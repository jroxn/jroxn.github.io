<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>æµ‹è¯•é¡µé¢</title>
      <link href="/posts/312f.html"/>
      <url>/posts/312f.html</url>
      
        <content type="html"><![CDATA[<p>è¿™ç¯‡æ–‡ç« çš„æ ‡ç­¾æ˜¯ï¼š<code>æµ‹è¯•é¡µ</code>ã€<code>Markdown</code></p><p>è¿™ç¯‡æ–‡ç« çš„åˆ†ç±»æ˜¯ï¼š<code>Markdown</code></p><p>è¿™æ˜¯ä¸€å¼ å›¾ç‰‡ï¼š<br><img src="/medias/drawing-bed/images/0.jpg" alt="Hello Kitty?" title="ğŸ˜¸ğŸ˜ºğŸ˜¹ğŸ˜»ğŸ˜¼ğŸ˜½ğŸ™€ğŸ˜¿ğŸ˜¾"><br>æ ‡é¢˜æ˜¯ï¼š<strong>Hello Kitty?</strong></p><p>å›¾ç‰‡ä¸Šæ³¨é‡Šä¸ºï¼šâ€ğŸ˜¸ğŸ˜ºğŸ˜¹ğŸ˜»ğŸ˜¼ğŸ˜½ğŸ™€ğŸ˜¿ğŸ˜¾â€</p><p>è¿™æ˜¯å‡ æ®µä»£ç é«˜äº®æµ‹è¯•</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token comment"># shell ä»£ç é«˜äº®æµ‹è¯•</span><span class="token builtin class-name">echo</span> <span class="token string">"Hello World !"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/python3</span><span class="token comment"># python ä»£ç é«˜äº®æµ‹è¯•</span>a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token keyword">while</span> b <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>    a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a<span class="token operator">+</span>b<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// java ä»£ç é«˜äº®æµ‹è¯•</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Hello World"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p><code>---</code>åˆ†å‰²çº¿ä¸Šçº¿ç©ºè¡Œå³å¯</p><p><a href="https://www.runoob.com/markdown/md-tutorial.html" title="è¶…é“¾æ¥title">mdå°æŠ€å·§</a></p><p><code>[mdå°æŠ€å·§](https://www.runoob.com/markdown/md-tutorial.html &quot;è¶…é“¾æ¥title&quot;)</code>è®¾ç½®è¶…é“¾æ¥æ–‡æœ¬ï¼Œ<code>&quot;è¶…é“¾æ¥title&quot;</code>å¯ä»¥ä¸åŠ </p><p>&emsp;&emsp;ç¼©è¿›ã€ç©ºç™½æ ¼</p><p><code>&amp;emsp;&amp;emsp;</code>ç©ºç™½æ ¼ï¼Œç”¨äºä¸­æ–‡æ®µè½é¦–è¡Œç¼©è¿›</p><p>æ¢è¡Œä½¿ç”¨è¡Œå°¾<code>ä¸¤ä¸ªç©ºæ ¼</code>æˆ–è€…<code>ç©ºè¡Œ</code>ï¼Œå‡å¯ä»¥è¡¨ç¤ºæ¢è¡Œã€‚æœ‰<code>å›¾ç‰‡é“¾æ¥</code>ã€<code>æ ‡é¢˜</code>ã€<code>è¡¨æ ¼</code>ã€<code>ä»£ç å—</code>çš„ä¸Šä¸‹è¡Œå¯ä»¥çœç•¥ç©ºæ ¼æˆ–ç©ºè¡Œï¼Œä¼šè‡ªåŠ¨æ¢è¡Œã€‚</p><hr><h1 id="ä¸€çº§æ ‡é¢˜"><a href="#ä¸€çº§æ ‡é¢˜" class="headerlink" title="ä¸€çº§æ ‡é¢˜"></a>ä¸€çº§æ ‡é¢˜</h1><h2 id="äºŒçº§æ ‡é¢˜"><a href="#äºŒçº§æ ‡é¢˜" class="headerlink" title="äºŒçº§æ ‡é¢˜"></a>äºŒçº§æ ‡é¢˜</h2><h3 id="ä¸‰çº§æ ‡é¢˜"><a href="#ä¸‰çº§æ ‡é¢˜" class="headerlink" title="ä¸‰çº§æ ‡é¢˜"></a>ä¸‰çº§æ ‡é¢˜</h3><h4 id="å››çº§æ ‡é¢˜"><a href="#å››çº§æ ‡é¢˜" class="headerlink" title="å››çº§æ ‡é¢˜"></a>å››çº§æ ‡é¢˜</h4><pre class="line-numbers language-none"><code class="language-none"># ä¸€çº§æ ‡é¢˜## äºŒçº§æ ‡é¢˜### ä¸‰çº§æ ‡é¢˜#### å››çº§æ ‡é¢˜<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><hr><p><em>æ–œä½“æ–‡æœ¬</em> &emsp;&emsp; <strong>ç²—ä½“æ–‡æœ¬</strong> &emsp;&emsp; <del>åˆ é™¤çº¿</del> &emsp;&emsp; __init__ &emsp;&emsp; æ˜¾ç¤ºæœ¬ä½“ ä¸è½¬ä¹‰</p><p><code>*æ–œä½“æ–‡æœ¬* &amp;emsp;&amp;emsp; **ç²—ä½“æ–‡æœ¬** &amp;emsp;&amp;emsp; ~~åˆ é™¤çº¿~~ &amp;emsp;&amp;emsp; \_\_init__ &amp;emsp;&amp;emsp; </code>æ˜¾ç¤ºæœ¬ä½“ ä¸è½¬ä¹‰</p><blockquote><p>è¿™æ˜¯å¼•ç”¨çš„å†…å®¹ â€” ä¸€çº§</p><blockquote><p>è¿™æ˜¯å¼•ç”¨çš„å†…å®¹ â€” äºŒçº§</p></blockquote></blockquote><pre class="line-numbers language-none"><code class="language-none">&gt;è¿™æ˜¯å¼•ç”¨çš„å†…å®¹ --- ä¸€çº§&gt;&gt;è¿™æ˜¯å¼•ç”¨çš„å†…å®¹ --- äºŒçº§*æ³¨æ„è¿™é‡Œæ²¡æœ‰ç©ºè¡Œ*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸‹è½½åœ°å€ä¹¦å†™ï¼š<a href="https://gitee.com/roxnc/download/raw/master/%E7%B1%BB%E5%92%8C%E6%96%B9%E6%B3%95.zip" title="ç±»å’Œæ–¹æ³•.zip">download</a></p><p><code>ä¸‹è½½åœ°å€ä¹¦å†™ï¼š[download](https://gitee.com/roxnc/download/raw/master/ç±»å’Œæ–¹æ³•.zip &quot;ç±»å’Œæ–¹æ³•.zip&quot;)</code></p><hr><ul><li><input checked="" disabled="" type="checkbox"> Markdown  </li><li><input disabled="" type="checkbox"> JavaScript </li></ul><ul><li><input checked="" disabled="" type="checkbox"> Markdown</li><li><input disabled="" type="checkbox"> JavaScript</li></ul><ul><li><input checked="" disabled="" type="checkbox"> Markdown</li><li><input disabled="" type="checkbox"> JavaScript<pre class="line-numbers language-none"><code class="language-none">å¤é€‰æ¡†ä¸‰ç§å†™æ³•ï¼š* [x] Markdown  * [ ] JavaScriptor+ [x] Markdown  + [ ] JavaScriptor- [x] Markdown  - [ ] JavaScript<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>æ— åºåˆ—è¡¨ç”¨ - + * ä»»ä½•ä¸€ç§éƒ½å¯ä»¥<br>æ³¨æ„: - + * è·Ÿå†…å®¹ä¹‹é—´éƒ½è¦æœ‰ä¸€ä¸ªç©ºæ ¼   <pre class="line-numbers language-none"><code class="language-none">- åˆ—è¡¨å†…å®¹- åˆ—è¡¨å†…å®¹- åˆ—è¡¨å†…å®¹<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul><ul><li>åˆ—è¡¨å†…å®¹</li><li>åˆ—è¡¨å†…å®¹</li><li>åˆ—è¡¨å†…å®¹</li></ul><hr><p>æœ‰åºåˆ—è¡¨<br>æ³¨æ„: åºå·è·Ÿå†…å®¹ä¹‹é—´è¦æœ‰ç©ºæ ¼   </p><pre class="line-numbers language-none"><code class="language-none">1. åˆ—è¡¨å†…å®¹  2. åˆ—è¡¨å†…å®¹  3. åˆ—è¡¨å†…å®¹  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol><li>åˆ—è¡¨å†…å®¹  </li><li>åˆ—è¡¨å†…å®¹  </li><li>åˆ—è¡¨å†…å®¹<br>åˆ—è¡¨åµŒå¥—<br>ä¸Šä¸€çº§å’Œä¸‹ä¸€çº§ä¹‹é—´æ•²ä¸‰ä¸ªç©ºæ ¼å³å¯   <pre class="line-numbers language-none"><code class="language-none">1. åˆ—è¡¨1  2. åˆ—è¡¨2     * åµŒå¥—1  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li>åˆ—è¡¨1  </li><li>åˆ—è¡¨2  <ul><li>åµŒå¥—1  </li></ul></li></ol><hr><p>è¡¨æ ¼å¯¹é½æ–¹å¼</p><p>-: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å³å¯¹é½ã€‚<br>:- è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…å·¦å¯¹é½ã€‚<br>:-: è®¾ç½®å†…å®¹å’Œæ ‡é¢˜æ å±…ä¸­å¯¹é½ã€‚<br>å®ä¾‹å¦‚ä¸‹ï¼š  </p><table><thead><tr><th align="left">å·¦</th><th align="center">å±…ä¸­</th><th align="right">å³</th></tr></thead><tbody><tr><td align="left">abc</td><td align="center">bcd</td><td align="right">cde</td></tr><tr><td align="left">abc</td><td align="center">bcd</td><td align="right">cde</td></tr><tr><td align="left">abc</td><td align="center">bcd</td><td align="right">cde</td></tr></tbody></table><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>font <span class="token assign-left variable">face</span><span class="token operator">=</span><span class="token string">"é»‘ä½“"</span><span class="token operator">></span>æˆ‘æ˜¯é»‘ä½“å­—<span class="token operator">&lt;</span>/font<span class="token operator">></span><span class="token operator">&lt;</span>font <span class="token assign-left variable">face</span><span class="token operator">=</span><span class="token string">"å¾®è½¯é›…é»‘"</span><span class="token operator">></span>æˆ‘æ˜¯å¾®è½¯é›…é»‘<span class="token operator">&lt;</span>/font<span class="token operator">></span><span class="token operator">&lt;</span>font <span class="token assign-left variable">face</span><span class="token operator">=</span><span class="token string">"STCAIYUN"</span><span class="token operator">></span>æˆ‘æ˜¯åæ–‡å½©äº‘<span class="token operator">&lt;</span>/font<span class="token operator">></span><span class="token operator">&lt;</span>font <span class="token assign-left variable">color</span><span class="token operator">=</span>red<span class="token operator">></span>æˆ‘æ˜¯çº¢è‰²<span class="token operator">&lt;</span>/font<span class="token operator">></span><span class="token operator">&lt;</span>font <span class="token assign-left variable">color</span><span class="token operator">=</span><span class="token comment">#008000>æˆ‘æ˜¯ç»¿è‰²&lt;/font></span><span class="token operator">&lt;</span>font <span class="token assign-left variable">color</span><span class="token operator">=</span>Blue<span class="token operator">></span>æˆ‘æ˜¯è“è‰²<span class="token operator">&lt;</span>/font<span class="token operator">></span><span class="token operator">&lt;</span>font <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token operator"><span class="token file-descriptor important">5</span>></span>æˆ‘æ˜¯å°ºå¯¸<span class="token operator">&lt;</span>/font<span class="token operator">></span><span class="token operator">&lt;</span>font <span class="token assign-left variable">face</span><span class="token operator">=</span><span class="token string">"é»‘ä½“"</span> <span class="token assign-left variable">color</span><span class="token operator">=</span>green <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token operator"><span class="token file-descriptor important">5</span>></span>æˆ‘æ˜¯é»‘ä½“, ç»¿è‰², å°ºå¯¸ä¸º<span class="token operator"><span class="token file-descriptor important">5</span>&lt;</span>/font<span class="token operator">></span><span class="token operator">&lt;</span>center<span class="token operator">></span>å±…ä¸­<span class="token operator">&lt;</span>/center<span class="token operator">></span>  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><font face="é»‘ä½“">æˆ‘æ˜¯é»‘ä½“å­—</font></p><p><font face="å¾®è½¯é›…é»‘">æˆ‘æ˜¯å¾®è½¯é›…é»‘</font></p><p><font face="STCAIYUN">æˆ‘æ˜¯åæ–‡å½©äº‘</font></p><p><font color=red>æˆ‘æ˜¯çº¢è‰²</font></p><p><font color=#008000>æˆ‘æ˜¯ç»¿è‰²</font></p><p><font color=Blue>æˆ‘æ˜¯è“è‰²</font></p><p><font size=5>æˆ‘æ˜¯å°ºå¯¸</font></p><center>å±…ä¸­</center><p><font face="é»‘ä½“" color=green size=5>æˆ‘æ˜¯é»‘ä½“, ç»¿è‰², å°ºå¯¸ä¸º5</font></p><hr><p>å‚è€ƒ<a href="https://blog.csdn.net/heimu24/article/details/81189700">é“¾æ¥</a></p><p>è„šæ³¨æ˜¯å¯¹æ–‡æœ¬çš„è¡¥å……è¯´æ˜ã€‚<br>[^è¦æ³¨æ˜çš„æ–‡æœ¬]<br>åˆ›å»ºè„šæ³¨æ ¼å¼ç±»ä¼¼è¿™æ · [^RUNOOB]ã€‚<br>[^RUNOOB]: èœé¸Ÿæ•™ç¨‹ â€“ å­¦çš„ä¸ä»…æ˜¯æŠ€æœ¯, æ›´æ˜¯æ¢¦æƒ³ï¼ï¼ï¼  </p><p>TODO å¾…å®Œæˆ<br>FIXME ä»£ç éœ€è¦ä¿®æ­£å’ŒåŸå› è¯´æ˜<br>XXX è™½ç„¶å®ç°åŠŸèƒ½ï¼Œä½†æ˜¯ä»£ç éœ€è¦æ”¹è¿›å’Œè¯´æ˜<br>HACK è¡¥é”…è¸©é›·å¡«å‘<br>BUG ä¸¢é”…åŸ‹é›·æŒ–å‘  </p><p><code>Ctrl+G</code>å¿«é€Ÿå»æŸä¸€è¡Œ</p><h2 id="Have-a-nice-day"><a href="#Have-a-nice-day" class="headerlink" title="Have a nice day "></a><font size=5><strong>Have a nice day</strong> </font></h2>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> æµ‹è¯•é¡µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexoä½¿ç”¨æ‰‹å†Œ</title>
      <link href="/posts/c412.html"/>
      <url>/posts/c412.html</url>
      
        <content type="html"><![CDATA[<h1 id="å®‰è£…hexo"><a href="#å®‰è£…hexo" class="headerlink" title="å®‰è£…hexo"></a>å®‰è£…hexo</h1><p>å®‰è£…å‰æï¼šå…ˆå®‰è£…<code>nodejs</code>å’Œ<code>git</code>ï¼Œ<code>win10</code>å’Œ<code>Linux</code>å®‰è£…å»ºè®®ä½¿ç”¨å®‰è£…åŒ…ï¼Œå®‰è£…åˆ°é»˜è®¤ä½ç½®å³å¯ï¼Œçœçš„é…ç½®ç¯å¢ƒå˜é‡ã€‚</p><p><a href="https://nodejs.org/zh-cn/">Node.js</a></p><p><a href="http://git-scm.com/">Git</a></p><p>è¿›å…¥ä½ çš„<code>hexo</code>ç›®å½•ï¼Œå»ºè®®ä½¿ç”¨<code>vscode</code>æˆ–è€…<code>typora</code>æ‰“å¼€ç›®å½•</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">npm i hexo hexo-clihexo initnpm i# æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š.â”œâ”€â”€ node_modulesâ”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source|   â”œâ”€â”€ _drafts|   â””â”€â”€ _postsâ””â”€â”€ themes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨win10ç³»ç»Ÿï¼Œå¦‚æœä½¿ç”¨<code>hexo s</code>æŠ¥é”™ï¼Œé…ç½®win10çš„ç¯å¢ƒå˜é‡ï¼š</p><p>æ‰“å¼€<code>è®¾ç½®</code>ï¼Œæœç´¢<code>é«˜çº§ç³»ç»Ÿè®¾ç½®</code>ï¼Œæ‰¾åˆ°<code>ç¯å¢ƒå˜é‡</code>ï¼Œåœ¨<code>ç”¨æˆ·å˜é‡</code>å’Œ<code>ç³»ç»Ÿå˜é‡</code>é‡Œé¢æ‰¾åˆ°<code>Path</code>ï¼Œåˆ†åˆ«ç‚¹å‡»<code>ç¼–è¾‘</code><br><img src="/medias/drawing-bed/images/0.png"><br>æ–°å»ºä¸€è¡Œï¼Œè¿™ä¸€è¡Œæ˜¯ä½ çš„<code>hexoç›®å½•</code>ä¸‹é¢çš„<code>node_modules</code>ä¸‹çš„<code>.bin</code>ç›®å½•<br><img src="/medias/drawing-bed/images/1.png"><br>ç›´æ¥åœ¨<code>æ–‡ä»¶èµ„æºç®¡ç†å™¨</code>æ‰“å¼€<code>.bin</code>ç›®å½•ï¼Œå¤åˆ¶åœ°å€æ çš„åœ°å€å³å¯ã€‚<br><img src="/medias/drawing-bed/images/2.png"><br>é…ç½®å®Œæˆåéœ€è¦æ‰“å¼€æ–°çš„<code>ç¼–è¾‘å™¨</code>æˆ–<code>cmd</code>æ‰§è¡Œå‘½ä»¤</p><p>win10å…¶ä»–é—®é¢˜<code>æ— æ³•åŠ è½½æ–‡ä»¶...ç¦æ­¢è¿è¡Œè„šæœ¬</code>ï¼Œåœ¨è®¾ç½®ä¸­æœç´¢<code>å…è®¸æœ¬åœ°</code>ï¼Œå‹¾é€‰åº”ç”¨<code>å…è®¸powershellè¾ƒç¬¨åœ¨ä¸ç­¾åçš„æƒ…å†µä¸‹è¿è¡Œ</code>ï¼š<br><img src="/medias/drawing-bed/images/3.png"></p><h1 id="å®‰è£…ä¸»é¢˜"><a href="#å®‰è£…ä¸»é¢˜" class="headerlink" title="å®‰è£…ä¸»é¢˜"></a>å®‰è£…ä¸»é¢˜</h1><p>è¿›å…¥åˆ°<code>themes</code>ç›®å½•ï¼Œå…‹éš†ä¸»é¢˜ï¼Œå¹¶ä¿®æ”¹æ–‡ä»¶å¤¹åç§°ä¸º<code>matery</code>ï¼Œåˆ é™¤å¦‚æœä½ éœ€è¦å°†ä¸»é¢˜è‡ªå®šä¹‰ç¾åŒ–ï¼Œå¹¶ä¸Šä¼ åˆ°gitä»“åº“ï¼Œéœ€è¦å°†cloneä¸‹æ¥çš„ä»“åº“ä¸­çš„<code>.git</code>ç›®å½•åˆ é™¤ï¼Œåœ¨hexoç›®å½•åˆ›å»º<code>.git</code>ï¼Œä¸Šä¼ åˆ°è‡ªå·±çš„ä»£ç åº“ç»Ÿä¸€ç®¡ç†ã€‚</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">git clone https:&#x2F;&#x2F;github.com&#x2F;blinkfox&#x2F;hexo-theme-matery.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨<code>hexo</code>ç›®å½•å°†<code>_config.landscape.yml</code>ä¿®æ”¹ä¸º<code>_config.matery.yml</code></p><h1 id="ç»Ÿä¸€é…ç½®æ–‡ä»¶"><a href="#ç»Ÿä¸€é…ç½®æ–‡ä»¶" class="headerlink" title="ç»Ÿä¸€é…ç½®æ–‡ä»¶"></a>ç»Ÿä¸€é…ç½®æ–‡ä»¶</h1><p>å°†ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ä¸­çš„å†…å®¹å¤åˆ¶åˆ°hexoæ ¹ç›®å½•ä¸‹çš„<code>_config.matery.yml</code>æ–‡ä»¶ä¸­ï¼Œå¹¶åˆ é™¤ä¸»é¢˜æ–‡ä»¶å¤¹ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶</p><p>ä»¥åä¸»é¢˜é…ç½®æ–‡ä»¶å°±æ˜¯<code>_config.matery.yml</code>ï¼Œhexoé…ç½®æ–‡ä»¶æ˜¯<code>_config.yml</code></p><h1 id="å†™ä½œæŠ€å·§"><a href="#å†™ä½œæŠ€å·§" class="headerlink" title="å†™ä½œæŠ€å·§"></a>å†™ä½œæŠ€å·§</h1><p>å†™è‰ç¨¿ï¼Œä¸ä¼šè¢«å‘å¸ƒï¼š</p><p><code>hexo n draft æ–‡ç« è‰ç¨¿</code></p><p>è¿™æ ·ä¼šåœ¨<code>source/**_draft</code>ä¸­æ–°å»ºä¸€ä¸ª<strong>æ–‡ç« è‰ç¨¿.md</strong>ï¼Œé¢„è§ˆè‰ç¨¿ï¼š</p><p><code>hexo s -p 80 --draft</code></p><p>ä¸é¢„è§ˆè‰ç¨¿ï¼Œæ­£å¼å‘å¸ƒé¢„è§ˆï¼š</p><p><code>hexo s -p 80</code></p><p>å†™å®Œçš„è‰ç¨¿ï¼Œæ­£å¼å‘å¸ƒï¼š</p><p><code>hexo p draft æ–‡ç« è‰ç¨¿</code></p><p>è¿™æ ·ä¼šè‡ªåŠ¨æŠŠ<strong>æ–‡ç« è‰ç¨¿.md</strong>å‘å¸ƒåˆ°<code>_posts</code>ç›®å½•ä¸‹ã€‚</p><p>å†™ä½œè¯·ä½¿ç”¨</p><p><code>hexo n post --path åˆ†ç±»å/æ–‡ç« å &quot;titleä¿¡æ¯&quot;</code></p><p>hexoç®€å†™å‘½ä»¤ï¼š</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">hexo n <span class="token string">"æ–‡ç« å"</span> == hexo new <span class="token string">"æ–‡ç« å"</span>hexo p == hexo publishhexo g == hexo generatehexo s == hexo serverhexo d == hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">hexo s   <span class="token comment"># Hexoä¼šç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶è‡ªåŠ¨æ›´æ–°ï¼Œæ‚¨æ— é¡»é‡å¯æœåŠ¡å™¨ã€‚</span>hexo s <span class="token operator">-</span>s   <span class="token comment"># é™æ€æ¨¡å¼</span>hexo s <span class="token operator">-</span>p 5000   <span class="token comment"># æ›´æ”¹ç«¯å£</span>hexo s <span class="token operator">-</span>i 192<span class="token punctuation">.</span>168<span class="token punctuation">.</span>1<span class="token punctuation">.</span>10   <span class="token comment"># è‡ªå®šä¹‰ IP</span>hexo clean   <span class="token comment"># æ¸…é™¤ç¼“å­˜,ç½‘é¡µæ­£å¸¸æƒ…å†µä¸‹å¯ä»¥å¿½ç•¥æ­¤æ¡å‘½ä»¤</span>hexo g   <span class="token comment"># ç”Ÿæˆé™æ€ç½‘é¡µ</span>hexo d   <span class="token comment"># å¼€å§‹éƒ¨ç½²</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> Markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Markdown </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨breezeå®‰è£…kubernetesé«˜å¯ç”¨</title>
      <link href="/posts/72c4.html"/>
      <url>/posts/72c4.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>ä½¿ç”¨VMwareå¼€å¯7å°è™šæ‹Ÿæœºï¼Œè¿™é‡Œä½¿ç”¨äº†ä¸€å°32Gå†…å­˜å°å¼æœºå’Œä¸€å°16Gç¬”è®°æœ¬</p><table><thead><tr><th align="left">ä¸»æœºå</th><th align="center">IP</th><th align="center">é…ç½®</th><th align="right">å®‰è£…æœåŠ¡</th></tr></thead><tbody><tr><td align="left">deploy</td><td align="center">192.168.3.200</td><td align="center">centos7.9 x64,4gå†…å­˜</td><td align="right">docker/docker-compose/breeze</td></tr><tr><td align="left">master01</td><td align="center">192.168.3.201</td><td align="center">centos7.9 x64,4gå†…å­˜</td><td align="right">k8smaster/etcd/hapoxy/keepalived</td></tr><tr><td align="left">master02</td><td align="center">192.168.3.202</td><td align="center">centos7.9 x64,4gå†…å­˜</td><td align="right">k8smaster/etcd/hapoxy/keepalived</td></tr><tr><td align="left">master03</td><td align="center">192.168.3.203</td><td align="center">centos7.9 x64,4gå†…å­˜</td><td align="right">k8smaster/etcd/hapoxy/keepalived</td></tr><tr><td align="left">worker01</td><td align="center">192.168.3.204</td><td align="center">centos7.9 x64,4gå†…å­˜</td><td align="right">k8swork/prometheus</td></tr><tr><td align="left">worker02</td><td align="center">192.168.3.205</td><td align="center">centos7.9 x64,4gå†…å­˜</td><td align="right">k8swork</td></tr><tr><td align="left">harbor</td><td align="center">192.168.3.206</td><td align="center">centos7.9 x64,4gå†…å­˜</td><td align="right">harbor</td></tr><tr><td align="left"></td><td align="center">192.168.3.210</td><td align="center">vip</td><td align="right">haè™šIPåœ¨3å°k8smasteræµ®åŠ¨</td></tr></tbody></table><p>æ‰€æœ‰ä¸»æœºå®‰è£…<a href="https://repo.huaweicloud.com/centos/7/isos/x86_64/CentOS-7-x86_64-Minimal-2009.iso">centos7.9.mini.x64.2009.iso</a>é•œåƒï¼Œæ³¨æ„å®‰è£…æ—¶<font color=red>ä¸è¦</font>åˆ›å»º<code>/swap</code>åˆ†åŒºï¼Œåªåˆ›å»º<code>/boot</code>å’Œ<code>/</code>åˆ†åŒºå³å¯ï¼Œç£ç›˜å»ºè®®å¤§äº30Gï¼Œå†…å­˜å¤§äº4Gï¼Œé…ç½®å›ºå®šIPå’Œä¸»æœºå</p><p>å‚è€ƒæ–‡æ¡£ï¼š</p><p>&emsp;&emsp;<a href="https://github.com/wise2c-devops/breeze/blob/master/BreezeManual-CN.md">BreezeManual-CN.md</a></p><p>&emsp;&emsp;<a href="https://github.com/wise2c-devops/breeze/releases">docker-compose.yaml</a></p><p>&emsp;&emsp;<a href="https://github.com/wise2c-devops/breeze/raw/master/manual/BreezeManual-CN.pdf">BreezeManual-CN.pdf</a></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">timedatectl set-timezone Asia/Shanghaisetenforce <span class="token number">0</span><span class="token function">sed</span> --follow-symlinks -i <span class="token string">"s/SELINUX=enforcing/SELINUX=disabled/g"</span> /etc/selinux/configfirewall-cmd --set-default-zone<span class="token operator">=</span>trustedfirewall-cmd --complete-reload<span class="token function">reboot</span><span class="token comment"># åšå®Œä¹‹åè®°å¾—å„æœºå™¨æ‹æ‘„å¿«ç…§</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åœ¨deployä¸»æœºæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä¸è¦æ›´æ”¹yumæºé™¤éä½ ä¼šï¼Œå¦‚æœä¸‹è½½é€Ÿåº¦æ…¢é€‰æ‹©å¤‡ç”¨é“¾æ¥ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> -L https://github.com/docker/compose/releases/download/1.24.1/docker-compose-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -s<span class="token variable">)</span></span>-<span class="token variable"><span class="token variable">$(</span><span class="token function">uname</span> -m<span class="token variable">)</span></span> -o /usr/local/bin/docker-compose<span class="token comment"># å¤‡ç”¨</span><span class="token comment"># curl -L http://mirror.azure.cn/docker-toolbox/linux/compose/1.25.4/docker-compose-Linux-x86_64 -o /usr/local/bin/docker-compose</span><span class="token function">chmod</span> +x /usr/local/bin/docker-composeyum <span class="token function">install</span> docker -ysystemctl start dockersystemctl <span class="token builtin class-name">enable</span> docker<span class="token comment"># curl -L https://raw.githubusercontent.com/wise2c-devops/breeze/v1.20.4/docker-compose.yml -o docker-compose.yml</span><span class="token function">curl</span> -L https://raw.githubusercontent.com/wise2c-devops/breeze/v1.20.4/docker-compose-centos.yml -o docker-compose.yml<span class="token comment"># curl -L https://raw.githubusercontent.com/wise2c-devops/breeze/v1.20.4/docker-compose-ubuntu.yml -o docker-compose.yml</span><span class="token comment"># å¤‡ç”¨ï¼Œå¦‚æœä¸‹è½½ä¸åˆ°æ‰“å¼€æ­¤é“¾æ¥å¤åˆ¶å†…å®¹åˆ°æ–‡ä»¶ä¸­ï¼Œhttps://github.com/wise2c-devops/breeze/blob/master/docker-compose-centos-aliyun.yml</span><span class="token comment">## curl -L https://raw.githubusercontent.com/wise2c-devops/breeze/v1.20.4/docker-compose-aliyun.yml -o docker-compose.yml</span><span class="token comment"># curl -L https://raw.githubusercontent.com/wise2c-devops/breeze/v1.20.4/docker-compose-centos-aliyun.yml -o docker-compose.yml</span><span class="token comment">## curl -L https://raw.githubusercontent.com/wise2c-devops/breeze/v1.20.4/docker-compose-ubuntu-aliyun.yml -o docker-compose.yml</span>docker-compose up -d<span class="token comment"># å› å¼€å¯çš„è™šæ‹Ÿæœºè¿‡å¤šå»ºè®®ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤</span><span class="token comment"># COMPOSE_HTTP_TIMEOUT=300 docker-compose up -d</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰“å¼€ç½‘é¡µ<code>192.168.3.200:88</code>å®‰è£…é›†ç¾¤</p><p>éªŒè¯å®‰è£…ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŸ¥çœ‹keepalivedç»‘å®šï¼Œå¯¹æ‰€æœ‰masterä¸»æœºæ‰§è¡Œ</span><span class="token function">ip</span> addr show ens32<span class="token comment"># å¯ä»¥çœ‹åˆ°å…¶ä¸­ä¸€å°æœºå™¨ens32ç½‘å¡ç»‘å®šVIPä¸º192.168.3.210</span><span class="token comment"># kubectl get cs è·å–é›†ç¾¤çŠ¶æ€</span>Warning: v1 ComponentStatus is deprecated <span class="token keyword">in</span> v1.19+NAME                 STATUS      MESSAGE                                                                                       ERRORscheduler            Unhealthy   Get <span class="token string">"http://127.0.0.1:10251/healthz"</span><span class="token builtin class-name">:</span> dial tcp <span class="token number">127.0</span>.0.1:10251: connect: connection refused   controller-manager   Unhealthy   Get <span class="token string">"http://127.0.0.1:10252/healthz"</span><span class="token builtin class-name">:</span> dial tcp <span class="token number">127.0</span>.0.1:10252: connect: connection refused   etcd-0               Healthy     <span class="token punctuation">&#123;</span><span class="token string">"health"</span><span class="token builtin class-name">:</span><span class="token string">"true"</span><span class="token punctuation">&#125;</span>                                                                             etcd-1               Healthy     <span class="token punctuation">&#123;</span><span class="token string">"health"</span><span class="token builtin class-name">:</span><span class="token string">"true"</span><span class="token punctuation">&#125;</span>                                                                             etcd-2               Healthy     <span class="token punctuation">&#123;</span><span class="token string">"health"</span><span class="token builtin class-name">:</span><span class="token string">"true"</span><span class="token punctuation">&#125;</span><span class="token comment"># è§£å†³æŠ¥é”™ï¼š</span><span class="token comment"># ç¼–è¾‘/etc/kubernetes/manifests/kube-controller-manager.yamlå’Œ/etc/kubernetes/manifests/kube-scheduler.yaml</span><span class="token comment"># å°†ä¸¤ä¸ªæ–‡ä»¶ä¸­çš„</span><span class="token comment"># - --port=0</span><span class="token comment"># è¿™ä¸€è¡Œæ³¨é‡Šæ‰ï¼Œç¨ç­‰ç‰‡åˆ»</span><span class="token comment"># kubectl get cs</span>Warning: v1 ComponentStatus is deprecated <span class="token keyword">in</span> v1.19+NAME                 STATUS    MESSAGE             ERRORcontroller-manager   Healthy   ok                  scheduler            Healthy   ok                  etcd-1               Healthy   <span class="token punctuation">&#123;</span><span class="token string">"health"</span><span class="token builtin class-name">:</span><span class="token string">"true"</span><span class="token punctuation">&#125;</span>   etcd-0               Healthy   <span class="token punctuation">&#123;</span><span class="token string">"health"</span><span class="token builtin class-name">:</span><span class="token string">"true"</span><span class="token punctuation">&#125;</span>   etcd-2               Healthy   <span class="token punctuation">&#123;</span><span class="token string">"health"</span><span class="token builtin class-name">:</span><span class="token string">"true"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> docker </tag>
            
            <tag> kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>apacheé…ç½®sslè¿æ¥</title>
      <link href="/posts/dcf4.html"/>
      <url>/posts/dcf4.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="å‡†å¤‡"><a href="#å‡†å¤‡" class="headerlink" title="å‡†å¤‡"></a>å‡†å¤‡</h1><p>æ£€æŸ¥<code>apache</code>æ˜¯å¦å¯ç”¨<code>mod_ssl</code>æ¨¡å—ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¼šåœ¨<code>/etc/httpd/conf.d/</code>ä¸‹å­˜åœ¨<code>ssl.conf</code>æ–‡ä»¶ã€‚</p><h1 id="ä¾èµ–å®‰è£…"><a href="#ä¾èµ–å®‰è£…" class="headerlink" title="ä¾èµ–å®‰è£…"></a>ä¾èµ–å®‰è£…</h1><p>å®‰è£…<code>mod_ssl</code>æ¨¡å—</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> -y mod_ssl<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="é…ç½®æ¨¡å—"><a href="#é…ç½®æ¨¡å—" class="headerlink" title="é…ç½®æ¨¡å—"></a>é…ç½®æ¨¡å—</h2><h3 id="ä¿®æ”¹ssl-confæ–‡ä»¶"><a href="#ä¿®æ”¹ssl-confæ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ssl.confæ–‡ä»¶"></a>ä¿®æ”¹ssl.confæ–‡ä»¶</h3><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">&lt;VirtualHost _default_:443&gt;DocumentRoot &quot;&#x2F;var&#x2F;www&#x2F;html&quot;ServerName roxn.cn:443SSLEngine onSSLProtocol all -SSLv2 -SSLv3SSLCipherSuite HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUMSSLHonorCipherOrder onSSLCipherSuite PROFILE&#x3D;SYSTEMSSLProxyCipherSuite PROFILE&#x3D;SYSTEMSSLCertificateFile &#x2F;etc&#x2F;pki&#x2F;tls&#x2F;certs&#x2F;apache&#x2F;4434998_roxn.cn_public.crtSSLCertificateKeyFile &#x2F;etc&#x2F;pki&#x2F;tls&#x2F;certs&#x2F;apache&#x2F;4434998_roxn.cn.key<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä¿®æ”¹httpd-confï¼Œä½¿httpè·³è½¬åˆ°https"><a href="#ä¿®æ”¹httpd-confï¼Œä½¿httpè·³è½¬åˆ°https" class="headerlink" title="ä¿®æ”¹httpd.confï¼Œä½¿httpè·³è½¬åˆ°https"></a>ä¿®æ”¹httpd.confï¼Œä½¿httpè·³è½¬åˆ°https</h3><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">&lt;VirtualHost *:80&gt;    RewriteEngine on    RewriteCond %&#123;SERVER_PORT&#125; !^443$    RewriteRule ^(.*)$ https:&#x2F;&#x2F;%&#123;SERVER_NAME&#125;$1 [L,R]&lt;&#x2F;VirtualHost&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é‡å¯éªŒè¯"><a href="#é‡å¯éªŒè¯" class="headerlink" title="é‡å¯éªŒè¯"></a>é‡å¯éªŒè¯</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl restart httpd<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/medias/drawing-bed/gif/0.gif"></p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> apache </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ansible</title>
      <link href="/posts/ea2c.html"/>
      <url>/posts/ea2c.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ansibleç®€ä»‹"><a href="#ansibleç®€ä»‹" class="headerlink" title="ansibleç®€ä»‹"></a>ansibleç®€ä»‹</h1><h2 id="è‡ªåŠ¨åŒ–è¿ç»´åº”ç”¨åœºæ™¯"><a href="#è‡ªåŠ¨åŒ–è¿ç»´åº”ç”¨åœºæ™¯" class="headerlink" title="è‡ªåŠ¨åŒ–è¿ç»´åº”ç”¨åœºæ™¯"></a>è‡ªåŠ¨åŒ–è¿ç»´åº”ç”¨åœºæ™¯</h2><blockquote><p>æ–‡ä»¶ä¼ è¾“<br>å‘½ä»¤æ‰§è¡Œ</p><blockquote><p>åº”ç”¨éƒ¨ç½²<br>é…ç½®ç®¡ç†<br>ä»»åŠ¡æµç¼–æ’</p></blockquote></blockquote><h2 id="å¸¸ç”¨è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·"><a href="#å¸¸ç”¨è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·" class="headerlink" title="å¸¸ç”¨è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·"></a>å¸¸ç”¨è‡ªåŠ¨åŒ–è¿ç»´å·¥å…·</h2><ol><li><p>ansibleï¼šåŸºäºpythonå¼€å‘ï¼Œagentlessä¸€èˆ¬ä¸éœ€è¦ä»£ç†ï¼Œéœ€è¦sshè¿æ¥åŸºäºkeyéªŒè¯æ˜¯åŸºæœ¬ï¼Œä¸­å°å‹åº”ç”¨ç¯å¢ƒï¼ˆä¸»æœºæ•°é‡ &lt; 300 å°ï¼‰</p></li><li><p>saltstackï¼šåŸºäºpythonå¼€å‘ï¼Œä¸€èˆ¬éœ€éƒ¨ç½²agentï¼Œæ‰§è¡Œæ•ˆç‡æ›´é«˜</p></li><li><p>puppetï¼šåŸºäºrubyå¼€å‘ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œé…ç½®å¤æ‚ï¼Œé€‚åˆå¤§å‹ç¯å¢ƒ</p></li><li><p>fabricã€chefã€cfengineã€funcç­‰</p></li></ol><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><blockquote><p>æ¨¡å—åŒ–ï¼šè°ƒç”¨ç‰¹å®šçš„æ¨¡å—ï¼Œå®Œæˆç‰¹å®šä»»åŠ¡<br>æœ‰Paramikoï¼ŒPyYAMLï¼ŒJinja2ï¼ˆæ¨¡æ¿è¯­è¨€ï¼‰ä¸‰ä¸ªå…³é”®æ¨¡å—<br>æ”¯æŒè‡ªå®šä¹‰æ¨¡å—<br>åŸºäºPythonè¯­è¨€å®ç°<br>éƒ¨ç½²ç®€å•ï¼ŒåŸºäºpythonå’ŒSSHï¼ˆé»˜è®¤å·²å®‰è£…ï¼‰ï¼Œagentless<br>å®‰å…¨ï¼ŒåŸºäºOpenSSH<br>æ”¯æŒplaybookç¼–æ’ä»»åŠ¡<br>å¹‚ç­‰æ€§ï¼šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œ1éå’Œæ‰§è¡Œnéæ•ˆæœä¸€æ ·ï¼Œä¸å› é‡å¤æ‰§è¡Œå¸¦æ¥æ„å¤–æƒ…å†µ<br>æ— éœ€ä»£ç†ä¸ä¾èµ–PKIï¼ˆæ— éœ€sslï¼‰<br>å¯ä½¿ç”¨ä»»ä½•ç¼–ç¨‹è¯­è¨€å†™æ¨¡å—<br>YAMLæ ¼å¼ï¼Œç¼–æ’ä»»åŠ¡ï¼Œæ”¯æŒä¸°å¯Œçš„æ•°æ®ç»“æ„<br>è¾ƒå¼ºå¤§çš„å¤šå±‚è§£å†³æ–¹æ¡ˆ</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/wujiops/jpeg/ansible/0.png"></p><p><img src="https://cdn.jsdelivr.net/gh/wujiops/jpeg/ansible/1.png"></p><h2 id="ansible-playbookï¼ˆå‰§æœ¬ï¼‰æ‰§è¡Œè¿‡ç¨‹ï¼š"><a href="#ansible-playbookï¼ˆå‰§æœ¬ï¼‰æ‰§è¡Œè¿‡ç¨‹ï¼š" class="headerlink" title="ansible-playbookï¼ˆå‰§æœ¬ï¼‰æ‰§è¡Œè¿‡ç¨‹ï¼š"></a>ansible-playbookï¼ˆå‰§æœ¬ï¼‰æ‰§è¡Œè¿‡ç¨‹ï¼š</h2><ol><li><p>å°†å·²æœ‰ç¼–æ’å¥½çš„ä»»åŠ¡é›†å†™å…¥ansible-playbook</p></li><li><p>é€šè¿‡ansible-playbookå‘½ä»¤åˆ†æ‹†ä»»åŠ¡é›†è‡³é€æ¡ansibleå‘½ä»¤ï¼ŒæŒ‰é¢„å®šè§„åˆ™é€æ¡æ‰§è¡Œ</p></li></ol><h2 id="Ansibleä¸»è¦æ“ä½œå¯¹è±¡ï¼š"><a href="#Ansibleä¸»è¦æ“ä½œå¯¹è±¡ï¼š" class="headerlink" title="Ansibleä¸»è¦æ“ä½œå¯¹è±¡ï¼š"></a>Ansibleä¸»è¦æ“ä½œå¯¹è±¡ï¼š</h2><ol><li><p>hostsä¸»æœº</p></li><li><p>NETWORKINGç½‘ç»œè®¾å¤‡</p></li></ol><h2 id="æ³¨æ„äº‹é¡¹"><a href="#æ³¨æ„äº‹é¡¹" class="headerlink" title="æ³¨æ„äº‹é¡¹"></a>æ³¨æ„äº‹é¡¹</h2><ol><li><p>æ‰§è¡Œansibleçš„ä¸»æœºä¸€èˆ¬ç§°ä¸ºä¸»æ§ç«¯ï¼Œä¸­æ§ï¼Œmasteræˆ–å ¡å’æœº</p></li><li><p>ä¸»æ§ç«¯Pythonç‰ˆæœ¬éœ€è¦2.6æˆ–ä»¥ä¸Š</p></li><li><p>è¢«æ§ç«¯Pythonç‰ˆæœ¬å°äº2.4éœ€è¦å®‰è£…python-simplejson</p></li><li><p>è¢«æ§ç«¯å¦‚å¼€å¯SELinuxéœ€è¦å®‰è£…libselinux-python</p></li><li><p>windowsä¸èƒ½åšä¸ºä¸»æ§ç«¯</p></li></ol><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># rpmåŒ…å®‰è£…:EPELæº</span>yum <span class="token function">install</span> ansible -y<span class="token comment"># ç¼–è¯‘å®‰è£…:</span>yum -y <span class="token function">install</span> python-jinja2 PyYAML python-paramiko python-babel python-crypto<span class="token function">tar</span> xf ansible-1.5.4.tar.gz<span class="token builtin class-name">cd</span> ansible-1.5.4python setup.py buildpython setup.py <span class="token function">install</span><span class="token function">mkdir</span> /etc/ansiblecp-r examples/* /etc/ansible<span class="token comment"># Gitæ–¹å¼:</span><span class="token function">git</span> clone git://github.com/ansible/ansible.git --recursive<span class="token builtin class-name">cd</span> ./ansible<span class="token builtin class-name">source</span> ./hacking/env-setup<span class="token comment"># pipå®‰è£…:pipæ˜¯å®‰è£…PythonåŒ…çš„ç®¡ç†å™¨ï¼Œç±»ä¼¼yum</span>yum <span class="token function">install</span> python-pip python-develyum <span class="token function">install</span> gcc glibc-devel zibl-devel rpm-bulid openssl-develpip <span class="token function">install</span> --upgrade pippip <span class="token function">install</span> ansible --upgrade<span class="token comment"># ç¡®è®¤å®‰è£…:</span>ansible --version<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç›¸å…³æ–‡ä»¶"><a href="#ç›¸å…³æ–‡ä»¶" class="headerlink" title="ç›¸å…³æ–‡ä»¶"></a>ç›¸å…³æ–‡ä»¶</h2><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><pre class="line-numbers language-none"><code class="language-none">&#x2F;etc&#x2F;ansible&#x2F;ansible.cfg   # ä¸»é…ç½®æ–‡ä»¶ï¼Œé…ç½®ansibleå·¥ä½œç‰¹æ€§&#x2F;etc&#x2F;ansible&#x2F;hosts   # ä¸»æœºæ¸…å•&#x2F;etc&#x2F;ansible&#x2F;roles&#x2F;   # å­˜æ”¾è§’è‰²çš„ç›®å½•<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="ç¨‹åº"><a href="#ç¨‹åº" class="headerlink" title="ç¨‹åº"></a>ç¨‹åº</h3><pre class="line-numbers language-none"><code class="language-none">&#x2F;usr&#x2F;bin&#x2F;ansible   # ä¸»ç¨‹åºï¼Œä¸´æ—¶å‘½ä»¤æ‰§è¡Œå·¥å…·&#x2F;usr&#x2F;bin&#x2F;ansible-doc   # æŸ¥çœ‹é…ç½®æ–‡æ¡£ï¼Œæ¨¡å—åŠŸèƒ½æŸ¥çœ‹å·¥å…·&#x2F;usr&#x2F;bin&#x2F;ansible-galaxy   # ä¸‹è½½&#x2F;ä¸Šä¼ ä¼˜ç§€ä»£ç æˆ–Rolesæ¨¡å—çš„å®˜ç½‘å¹³å°&#x2F;usr&#x2F;bin&#x2F;ansible-playbook   # å®šåˆ¶è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œç¼–æ’å‰§æœ¬å·¥å…·&#x2F;usr&#x2F;bin&#x2F;ansible-pull   # è¿œç¨‹æ‰§è¡Œå‘½ä»¤çš„å·¥å…·&#x2F;usr&#x2F;bin&#x2F;ansible-vault   # æ–‡ä»¶åŠ å¯†å·¥å…·&#x2F;usr&#x2F;bin&#x2F;ansible-console   # åŸºäºconsoleç•Œé¢ä¸ç”¨æˆ·äº¤äº’çš„æ‰§è¡Œå·¥å…·<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸»æœºæ¸…å•inventory"><a href="#ä¸»æœºæ¸…å•inventory" class="headerlink" title="ä¸»æœºæ¸…å•inventory"></a>ä¸»æœºæ¸…å•inventory</h2><p>Inventoryä¸»æœºæ¸…å•</p><p>&emsp;&emsp;ansibleçš„ä¸»è¦åŠŸç”¨åœ¨äºæ‰¹é‡ä¸»æœºæ“ä½œï¼Œä¸ºäº†ä¾¿æ·åœ°ä½¿ç”¨å…¶ä¸­çš„éƒ¨åˆ†ä¸»æœºï¼Œå¯ä»¥åœ¨inventory fileä¸­å°†å…¶åˆ†ç»„å‘½å</p><p>&emsp;&emsp;é»˜è®¤çš„inventory fileä¸º <code>/etc/ansible/hosts</code> </p><p>&emsp;&emsp;inventory fileå¯ä»¥æœ‰å¤šä¸ªï¼Œä¸”ä¹Ÿå¯ä»¥é€šè¿‡ <code>Dynamic Inventory</code> æ¥åŠ¨æ€ç”Ÿæˆ</p><h3 id="etc-ansible-hostsæ–‡ä»¶æ ¼å¼"><a href="#etc-ansible-hostsæ–‡ä»¶æ ¼å¼" class="headerlink" title="/etc/ansible/hostsæ–‡ä»¶æ ¼å¼"></a>/etc/ansible/hostsæ–‡ä»¶æ ¼å¼</h3><p>&emsp;&emsp;inventoryæ–‡ä»¶éµå¾ªINIæ–‡ä»¶é£æ ¼ï¼Œä¸­æ‹¬å·ä¸­çš„å­—ç¬¦ä¸ºç»„åã€‚å¯ä»¥å°†åŒä¸€ä¸ªä¸»æœºåŒæ—¶å½’å¹¶åˆ°å¤šä¸ªä¸åŒçš„ç»„ä¸­ï¼›æ­¤å¤–ï¼Œå½“å¦‚è‹¥ç›®æ ‡ä¸»æœºä½¿ç”¨äº†éé»˜è®¤çš„SSHç«¯å£ï¼Œè¿˜å¯ä»¥åœ¨ä¸»æœºåç§°ä¹‹åä½¿ç”¨å†’å·åŠ ç«¯å£å·æ¥æ ‡æ˜</p><pre class="line-numbers language-hosts" data-language="hosts"><code class="language-hosts">ntp.magedu.com[webservers]www1.magedu.com:2222www2.magedu.com[dbservers]db1.magedu.comdb2.magedu.comdb3.magedu.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœä¸»æœºåç§°éµå¾ªç›¸ä¼¼çš„å‘½åæ¨¡å¼ï¼Œè¿˜å¯ä»¥ä½¿ç”¨åˆ—è¡¨çš„æ–¹å¼æ ‡è¯†å„ä¸»æœº</p><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-hosts" data-language="hosts"><code class="language-hosts">[webservers]www[01:100].example.com[dbservers]db-[a:f].example.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ansibleé…ç½®æ–‡ä»¶"><a href="#ansibleé…ç½®æ–‡ä»¶" class="headerlink" title="ansibleé…ç½®æ–‡ä»¶"></a>ansibleé…ç½®æ–‡ä»¶</h2><p>Ansibleé…ç½®æ–‡ä»¶<code>/etc/ansible/ansible.cfg</code> ï¼ˆä¸€èˆ¬ä¿æŒé»˜è®¤ï¼‰</p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">[defaults]#inventory &#x3D; &#x2F;etc&#x2F;ansible&#x2F;hosts   # ä¸»æœºåˆ—è¡¨é…ç½®æ–‡ä»¶#library &#x3D; &#x2F;usr&#x2F;share&#x2F;my_modules&#x2F;   # åº“æ–‡ä»¶å­˜æ”¾ç›®å½•#remote_tmp &#x3D; $HOME&#x2F;.ansible&#x2F;tmp   # ä¸´æ—¶pyå‘½ä»¤æ–‡ä»¶å­˜æ”¾åœ¨è¿œç¨‹ä¸»æœºç›®å½•#local_tmp&#x3D; $HOME&#x2F;.ansible&#x2F;tmp   # æœ¬æœºçš„ä¸´æ—¶å‘½ä»¤æ‰§è¡Œç›®å½•#forks&#x3D; 5   # é»˜è®¤å¹¶å‘æ•°#sudo_user&#x3D; root   # é»˜è®¤sudoç”¨æˆ·#ask_sudo_pass &#x3D; True   # æ¯æ¬¡æ‰§è¡Œansibleå‘½ä»¤æ˜¯å¦è¯¢é—®sshå¯†ç #ask_pass&#x3D; True#remote_port&#x3D; 22#host_key_checking &#x3D; False   # æ£€æŸ¥å¯¹åº”æœåŠ¡å™¨çš„host_keyï¼Œé¦–æ¬¡è¿æ¥ä¸å¿…è¾“å…¥yes&#x2F;no#log_path&#x3D;&#x2F;var&#x2F;log&#x2F;ansible.log   # æ—¥å¿—æ–‡ä»¶<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Ansibleç³»åˆ—å‘½ä»¤"><a href="#Ansibleç³»åˆ—å‘½ä»¤" class="headerlink" title="Ansibleç³»åˆ—å‘½ä»¤"></a>Ansibleç³»åˆ—å‘½ä»¤</h2><p><code>ansible</code>ã€<code>ansible-doc</code>ã€<code>ansible-playbook</code>ã€<code>ansible-vault</code>ã€<code>ansible-console</code>ã€<code>ansible-galaxy</code>ã€<code>ansible-pull</code></p><p><code>ansible-doc</code>ï¼šæ˜¾ç¤ºæ¨¡å—å¸®åŠ©</p><p><code>ansible-doc [options] [module...]</code></p><p><code>-a</code>&emsp;&emsp;&emsp;# æ˜¾ç¤ºæ‰€æœ‰æ¨¡å—çš„æ–‡æ¡£</p><p><code>-l</code>, <code>--list</code>&emsp;&emsp;&emsp;# åˆ—å‡ºå¯ç”¨æ¨¡å—</p><p><code>-s</code>, <code>--snippet</code>&emsp;&emsp;&emsp;# æ˜¾ç¤ºæŒ‡å®šæ¨¡å—çš„playbookç‰‡æ®µ</p><p>ç¤ºä¾‹ï¼š</p><p><code>ansible-doc -l</code>   # åˆ—å‡ºæ‰€æœ‰æ¨¡å—</p><p><code>ansible-doc ping</code>   # æŸ¥çœ‹æŒ‡å®šæ¨¡å—å¸®åŠ©ç”¨æ³•</p><p><code>ansible-doc -s ping</code>   # æŸ¥çœ‹æŒ‡å®šæ¨¡å—å¸®åŠ©ç”¨æ³•</p><p>&emsp;&emsp;ansibleé€šè¿‡sshå®ç°é…ç½®ç®¡ç†ã€åº”ç”¨éƒ¨ç½²ã€ä»»åŠ¡æ‰§è¡Œç­‰åŠŸèƒ½ï¼Œå»ºè®®é…ç½®ansibleç«¯èƒ½åŸºäºå¯†é’¥è®¤è¯çš„æ–¹å¼è”ç³»å„è¢«ç®¡ç†èŠ‚ç‚¹</p><p><code>ansible &lt;host-pattern&gt; [-m module_name] [-a args]</code></p><p><code>--version</code>   # æ˜¾ç¤ºç‰ˆæœ¬</p><p><code>-m module</code>   # æŒ‡å®šæ¨¡å—ï¼Œé»˜è®¤ä¸ºcommand</p><p><code>-v</code>   # è¯¦ç»†è¿‡ç¨‹<code>-vv</code> <code>-vvv</code>æ›´è¯¦ç»†</p><p><code>--list</code>,<code> --list-hosts</code>   # æ˜¾ç¤ºä¸»æœºåˆ—è¡¨</p><p><code>-k</code>, <code>--ask-pass</code>   # æç¤ºè¾“å…¥sshè¿æ¥å¯†ç ï¼Œé»˜è®¤KeyéªŒè¯</p><p><code>-K</code>, <code>--ask-become-pass</code>   # æç¤ºè¾“å…¥sudoæ—¶çš„å£ä»¤</p><p><code>-C</code>ï¼Œ<code>--check</code>   # æ£€æŸ¥ï¼Œå¹¶ä¸æ‰§è¡Œ</p><p><code>-T</code>ï¼Œ<code>--timeout=TIMEOUT</code>   # æ‰§è¡Œå‘½ä»¤çš„è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤10s</p><p><code>-u</code>ï¼Œ<code>--user=REMOTE_USER</code>   # æ‰§è¡Œè¿œç¨‹æ‰§è¡Œçš„ç”¨æˆ·</p><p><code>-b</code>,  <code>--become</code>   # ä»£æ›¿æ—§ç‰ˆçš„sudoåˆ‡æ¢</p><h1 id="ansibleçš„host-pattern"><a href="#ansibleçš„host-pattern" class="headerlink" title="ansibleçš„host-pattern"></a>ansibleçš„host-pattern</h1><p>åŒ¹é…ä¸»æœºçš„åˆ—è¡¨</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># allï¼šè¡¨ç¤ºæ‰€æœ‰inventoryä¸­çš„æ‰€æœ‰ä¸»æœº</span>ansible all -m <span class="token function">ping</span><span class="token comment"># *ï¼šé€šé…ç¬¦</span>ansible <span class="token string">"*"</span> -m <span class="token function">ping</span>ansible <span class="token number">192.168</span>.182.* -m <span class="token function">ping</span>ansible <span class="token string">"*cd"</span> -m <span class="token function">ping</span><span class="token comment"># æˆ–å…³ç³»</span>ansible <span class="token string">"ab:cd"</span> -m <span class="token function">ping</span>ansible <span class="token string">"192.168.182.130:192.168.182.131"</span> -m <span class="token function">ping</span><span class="token comment"># é€»è¾‘ä¸</span>ansible <span class="token string">"ab:&amp;bcd"</span> -m <span class="token function">ping</span><span class="token comment"># åœ¨abç»„å¹¶ä¸”åœ¨bcdç»„ä¸­çš„ä¸»æœº</span><span class="token comment"># é€»è¾‘é</span>ansible <span class="token string">'ab:!bcd'</span> -m <span class="token function">ping</span><span class="token comment"># åœ¨abç»„ï¼Œä½†ä¸åœ¨bcdç»„ä¸­çš„ä¸»æœºï¼Œæ³¨æ„æ˜¯å•å¼•å·</span><span class="token comment"># ç»¼åˆé€»è¾‘</span>ansible <span class="token string">'ab:cd:&amp;bcd:!cd'</span> -m <span class="token function">ping</span><span class="token comment"># æ­£åˆ™è¡¨è¾¾å¼</span>ansible <span class="token string">"ab:&amp;cd"</span> -m <span class="token function">ping</span> ansible <span class="token string">"~(b|c)d"</span> -m <span class="token function">ping</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ansibleå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹"><a href="#ansibleå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="ansibleå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹"></a>ansibleå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹</h1><ol><li><p>åŠ è½½è‡ªå·±çš„é…ç½®æ–‡ä»¶é»˜è®¤ <code>/etc/ansible/ansible.cfg</code> </p></li><li><p>åŠ è½½è‡ªå·±å¯¹åº”çš„æ¨¡å—æ–‡ä»¶ï¼Œå¦‚  <code>command</code> </p></li><li><p>é€šè¿‡ansibleå°†æ¨¡å—æˆ–å‘½ä»¤ç”Ÿæˆå¯¹åº”çš„ä¸´æ—¶pyæ–‡ä»¶ï¼Œå¹¶å°†è¯¥æ–‡ä»¶ä¼ è¾“è‡³è¿œç¨‹æœåŠ¡å™¨çš„å¯¹åº”æ‰§è¡Œç”¨æˆ·<code>$HOME/.ansible/tmp/ansible-tmp-æ•°å­—/XXX.PYæ–‡ä»¶</code></p></li><li><p>ç»™æ–‡ä»¶+xæ‰§è¡Œ</p></li><li><p>æ‰§è¡Œå¹¶è¿”å›ç»“æœ</p></li><li><p>åˆ é™¤ä¸´æ—¶pyæ–‡ä»¶ï¼Œ<code>sleep 0</code>é€€å‡º</p></li></ol><p>æ‰§è¡ŒçŠ¶æ€ï¼ˆåœ¨ansible.cfgé…ç½®æ–‡ä»¶ä¸­[colors]å¯ä»¥æ›´æ”¹ï¼‰ï¼š</p><blockquote><p><font color=Green>ç»¿è‰²</font>ï¼šæ‰§è¡ŒæˆåŠŸå¹¶ä¸”ä¸éœ€è¦åšæ”¹å˜çš„æ“ä½œ<br><font color=Yellow>é»„è‰²</font>ï¼šæ‰§è¡ŒæˆåŠŸå¹¶ä¸”å¯¹ç›®æ ‡ä¸»æœºåšå˜æ›´<br><font color=Red>çº¢è‰²</font>ï¼šæ‰§è¡Œå¤±è´¥</p></blockquote><h1 id="ansibleä½¿ç”¨ç¤ºä¾‹"><a href="#ansibleä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ansibleä½¿ç”¨ç¤ºä¾‹"></a>ansibleä½¿ç”¨ç¤ºä¾‹</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä»¥wangç”¨æˆ·æ‰§è¡Œpingå­˜æ´»æ£€æµ‹</span>ansible all -m ping-u wang -k<span class="token comment"># ä»¥wang sudoè‡³rootæ‰§è¡Œpingå­˜æ´»æ£€æµ‹</span>ansible all -m ping-u wang -b -k<span class="token comment"># ä»¥wang sudoè‡³mageç”¨æˆ·æ‰§è¡Œpingå­˜æ´»æ£€æµ‹</span>ansible all -m ping-u wang -b -k --become-user mage<span class="token comment"># ä»¥wang sudoè‡³rootç”¨æˆ·æ‰§è¡Œls</span>ansible all -m <span class="token builtin class-name">command</span> -u wang --become-user<span class="token operator">=</span>root -a <span class="token string">'ls /root'</span> -b -k -K<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ansibleå¸¸ç”¨æ¨¡å—"><a href="#ansibleå¸¸ç”¨æ¨¡å—" class="headerlink" title="ansibleå¸¸ç”¨æ¨¡å—"></a>ansibleå¸¸ç”¨æ¨¡å—</h2><ol><li>commandï¼šåœ¨è¿œç¨‹ä¸»æœºæ‰§è¡Œå‘½ä»¤ï¼Œé»˜è®¤æ¨¡å—ï¼Œå¯å¿½ç•¥-mé€‰é¡¹</li></ol><p><code>ansible ab -m command -a &#39;service vsftpd start&#39;</code> </p><p><code>ansible ab -m command -a &#39;echo magedu | passwd --stdin wang&#39;</code> ä¸æˆåŠŸ</p><p>æ­¤å‘½ä»¤ä¸æ”¯æŒ<code>$VARNAME</code> <code>&lt;</code> <code>&gt;</code> <code>|</code> <code>;</code> <code>&amp;</code>ç­‰ï¼Œç”¨shellæ¨¡å—å®ç°</p><ol start="2"><li>Shellï¼šå’Œcommandç›¸ä¼¼ï¼Œç”¨shellæ‰§è¡Œå‘½ä»¤</li></ol><p><code>ansible ab -m shell -a &#39; &#39;</code> </p><p>è°ƒç”¨bashæ‰§è¡Œå‘½ä»¤ç±»ä¼¼<code>cat /tmp/stanley.md | awk -F&#39;|&#39; &#39;iprint $1,$2&#125;&#39; &amp;&gt; /tmp/example.txt</code>è¿™äº›å¤æ‚å‘½ä»¤ï¼Œå³ä½¿ä½¿ç”¨shellä¹Ÿå¯èƒ½ä¼šå¤±è´¥ï¼Œè§£å†³åŠæ³•ï¼šå†™åˆ°è„šæœ¬æ—¶ï¼Œcopyåˆ°è¿œç¨‹ï¼Œæ‰§è¡Œï¼Œå†æŠŠéœ€è¦çš„ç»“æœæ‹‰å›æ‰§è¡Œå‘½ä»¤çš„æœºå™¨</p><ol start="3"><li>Script: è¿è¡Œè„šæœ¬</li></ol><p><code>-a &quot;/PATH/TO/SCRIPT_FILE&quot;</code> </p><p><code>snsible abc -m script -a f1.sh</code> </p><ol start="4"><li>Copyï¼šä»æœåŠ¡å™¨å¤åˆ¶æ–‡ä»¶åˆ°å®¢æˆ·ç«¯,</li></ol><p><code>ansible bcd -m copy -a &quot;src=/root/host.sh dest=/data/host.sh owner=wang mode=600 backup=yes&quot;</code></p><p>å¦‚ç›®æ ‡å­˜åœ¨ï¼Œé»˜è®¤è¦†ç›–ï¼Œæ­¤å¤„æŒ‡å®šå…ˆå¤‡ä»½(æ³¨æ„ï¼šæ–‡ä»¶æœªæ›´æ”¹åˆ™ä¸ä¼šå¤‡ä»½)</p><p><code>ansible 192.168.182.128 -m copy -a &quot;content=&#39;test content\n&#39; dest=/tmp/f1.txt&quot;</code>åˆ©ç”¨å†…å®¹ï¼Œç›´æ¥ç”Ÿæˆç›®æ ‡æ–‡ä»¶</p><ol start="5"><li>Fetchï¼šä»å®¢æˆ·ç«¯å–æ–‡ä»¶è‡³æœåŠ¡å™¨ç«¯ï¼Œcopyç›¸åï¼Œç›®å½•å¯å…ˆtar</li></ol><p><code>ansible ab -m fetch -a &#39;src=/root/a.sh dest=/data/scripts&#39;</code></p><p><code>ansible bcd -m shell -a &#39;tar JPcf /var/log/log.txz /var/log/*.log&#39;</code></p><p><code>ansible bcd -m fetch -a &#39;src=/var/log/log.txz dest=/data&#39;</code></p><ol start="6"><li>Fileï¼šè®¾ç½®æ–‡ä»¶å±æ€§</li></ol><p><code>ansible bcd -m file -a &quot;path=/root/a.sh owner=wang mode=755&quot;</code></p><p><code>ansible bcd -m file -a &#39;src=/etc/fstab dest=/data/fstab state=link&#39;</code></p><ol start="7"><li>Hostnameï¼šç®¡ç†ä¸»æœºå</li></ol><p><code>ansible node1 -m hostname -a &quot;name=websrv&quot;</code></p><p><code>ansible 192.168.182.128 -m hostname -a &#39;name=node128&#39;</code></p><ol start="8"><li>Cronï¼šè®¡åˆ’ä»»åŠ¡</li></ol><p>æ”¯æŒæ—¶é—´ï¼š<code>minute </code>, <code>hour</code> , <code>day </code>, <code>month</code> , <code>weekday</code></p><p><code>ansible bcd -m cron -a &#39;minute=* weekday=2,4,6 job=&quot;/usr/bin/wall PC warning&quot; name=waring&#39;</code>åˆ›å»ºä»»åŠ¡</p><p><code>ansible bcd -m cron -a &#39;disabled=true job=&quot;/usr/bin/wall PC warning&quot; name=waring&#39;</code>æ³¨é‡Šä»»åŠ¡</p><p><code>ansible bcd -m cron -a &#39;disabled=false job=&quot;/usr/bin/wall PC warning&quot; name=waring&#39;</code>å–æ¶ˆæ³¨é‡Šä»»åŠ¡ï¼Œtrueã€falseå¯ä»¥è¢«yesã€noæ›¿æ¢</p><p><code>ansible bcd -m cron -a &#39;job=&quot;/usr/bin/wall PC warning&quot; name=waring state=absent&#39;</code>åˆ é™¤ä»»åŠ¡</p><ol start="9"><li>Yumï¼šç®¡ç†åŒ…</li></ol><p><code>ansible all -m yum -a &#39;name=httpd state=latest&#39;</code>å®‰è£…(<code>state=latest</code>å¯çœ)</p><p><code>ansible bcd -m yum -a &#39;name=httpd,nginx&#39;</code>å®‰è£…å¤šä¸ª</p><p><code>ansible all -m yum -a &#39;name=httpd state=removed&#39;</code>åˆ é™¤</p><p><code>ansible all -m yum -a &#39;name=httpd state=absent&#39;</code>åˆ é™¤</p><p>å®‰è£…æœ¬åœ°åŒ…ï¼Œå…ˆcopyå†å®‰è£…ï¼Œå¿½ç•¥keyæ£€æŸ¥<code>disable_gpg_check=yes</code></p><p><code>ansible bcd -m copy -a &#39;src=/data/vsftpd-3.0.2-22.el8.x86_64.rpm dest/=root/&#39;</code></p><p><code>ansible bcd -m yum -a &#39;name=/root/vsftpd-3.0.2-22.el8.x86_64.rpm&#39;</code></p><p><code>ansible bcd -m yum -a &#39;name=/root/vsftpd-3.0.2-22.el8.x86_64.rpm disable_gpg_check=yes&#39;</code></p><p>æ¸…é™¤ç¼“å­˜å®‰è£…åŒ…</p><p><code>ansible bcd -m yum -a &#39;name=dstat update_cache=yes&#39;</code> <code>update_cache=yes</code>ç­‰åŒäº<code>yum clean all</code></p><ol start="10"><li>Serviceï¼šç®¡ç†æœåŠ¡</li></ol><p><code>ansible bcd -m service -a &#39;name=httpd state=started enabled=yes&#39;</code> <code>enable=yes</code>è®¾ç½®å¼€æœºè‡ªå¯</p><p><code>ansible bcd -m service -a &#39;name=httpd state=stopped&#39;</code></p><p><code>ansible bcd -m service -a &#39;name=httpd state=started&#39;</code></p><p><code>ansible bcd -m service -a &#39;name=httpd state=reloaded&#39;</code></p><p><code>ansible bcd -m service -a &#39;name=httpd state=restarted&#39;</code></p><ol start="11"><li>Userï¼šç®¡ç†ç”¨æˆ·</li></ol><p><code>ansible cd -m user -a &#39;name=nginx shell=/sbin/nologin system=yes home=/var/nginx groups=root,bin uid=80 comment=&quot;nginx service&quot;&#39;</code></p><p><code>ansible cd -a &#39;getent passwd nginx&#39;</code></p><p><code>ansible cd -m user -a &#39;name=nginx remove=yes state=absent&#39;</code> åˆ é™¤ç”¨æˆ·åŠå®¶ç›®å½•ç­‰æ•°æ®</p><p><code>ansible cd -a &#39;getent passwd nginx&#39;</code></p><ol start="12"><li>Groupï¼šç®¡ç†ç»„</li></ol><p><code>ansible cd -m group -a &#39;name=nginx system=yes gid=80&#39;</code></p><p><code>ansible cd -a &#39;getent group nginx&#39;</code></p><p><code>ansible cd -m group -a &#39;name=nginx state=absent&#39;</code></p><p><code>ansible cd -a &#39;getent group nginx&#39;</code></p><p>ansible-galaxy</p><p>è¿æ¥<a href="https://galaxy.ansible.comä¸‹è½½ç›¸åº”çš„roles/">https://galaxy.ansible.comä¸‹è½½ç›¸åº”çš„roles</a></p><p><a href="https://galaxy.ansible.com/search?deprecated=false&amp;keywords=&amp;order_by=-relevance%E6%9F%A5%E6%89%BE%E5%8C%85%E5%9C%B0%E5%9D%80%E3%80%82">https://galaxy.ansible.com/search?deprecated=false&amp;keywords=&amp;order_by=-relevanceæŸ¥æ‰¾åŒ…åœ°å€ã€‚</a></p><p><code>ansible-galaxy install geerlingguy.nginx</code> å®‰è£…åˆ«äººçš„galaxy</p><p><code>ansible-galaxy list</code> åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„</p><p><code>ansible-galaxy list geerlingguy.nginx</code> æŸ¥çœ‹å·²å®‰è£…<code>geerlingguy.nginx</code>çš„ç‰ˆæœ¬</p><p><code>cd  /root/.ansible/roles/</code> å®‰è£…åä¼šæç¤ºå®‰è£…çš„ç›®å½•</p><p><code>tree .</code> æŸ¥çœ‹ç»“æ„</p><p><code>cp geerlingguy.nginx wang.nginx -rp</code> å¤åˆ¶ä¸€ä»½ ä¿®ä¿®æ”¹æ”¹ å½“è‡ªå·±çš„ğŸ˜‹</p><p><code>ansible-galaxy list</code> åˆ—å‡ºå·²å®‰è£…çš„å¯ä»¥çœ‹åˆ°å¤šäº†ä¸€ä¸ª<code>wang.nginx</code></p><p>åˆ é™¤galaxyï¼Œå¯ä»¥ç›´æ¥åˆ é™¤æ–‡ä»¶å¤¹<code>geerlingguy.nginx</code> <code>wang.nginx</code></p><p><code>ansible-galaxy remove geerlingguy.nginx</code> å‘½ä»¤åˆ é™¤</p><p><code>ansible-galaxy list</code> åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„</p><p><code>rm -fr wang.nginx/</code> ç›´æ¥åˆ é™¤æ–‡ä»¶å¤¹</p><p><code>ansible-galaxy list</code> åˆ—å‡ºæ‰€æœ‰å·²å®‰è£…çš„</p><h2 id="ansible-pull"><a href="#ansible-pull" class="headerlink" title="ansible-pull"></a>ansible-pull</h2><p>æ¨é€å‘½ä»¤è‡³è¿œç¨‹ï¼Œæ•ˆç‡æ— é™æå‡ï¼Œå¯¹è¿ç»´è¦æ±‚è¾ƒé«˜</p><h2 id="Ansible-playbook"><a href="#Ansible-playbook" class="headerlink" title="Ansible-playbook"></a>Ansible-playbook</h2><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#hello world yml file</span><span class="token comment">#abcd is 192.168.182.1&#123;28,31&#125;</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> cd  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> hello world      <span class="token key atrule">command</span><span class="token punctuation">:</span> /usr/bin/wall hello world<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ansible-playbook hello.yml</code> æ‰§è¡Œç»“æœå¯ä»¥æ‰“å¼€cã€dæœºå™¨çš„ç»ˆç«¯æŸ¥çœ‹ï¼Œxshellç­‰ã€‚</p><h2 id="Ansible-vault"><a href="#Ansible-vault" class="headerlink" title="Ansible-vault"></a>Ansible-vault</h2><p>åŠŸèƒ½ï¼šç®¡ç†åŠ å¯†è§£å¯†ymlæ–‡ä»¶</p><p><code>ansible-vault [create|decrypt|edit|encrypt|rekey|view]</code></p><p><code>ansible-vault encrypt hello.yml</code>   # åŠ å¯†</p><p><code>ansible-vault decrypt hello.yml</code>   # è§£å¯†</p><p><code>ansible-vault view hello.yml</code>   # æŸ¥çœ‹</p><p><code>ansible-vault edit hello.yml</code>   # ç¼–è¾‘åŠ å¯†æ–‡ä»¶</p><p><code>ansible-vault rekey hello.yml</code>   # ä¿®æ”¹å£ä»¤</p><p><code>ansible-vault create new.yml</code>   # åˆ›å»ºå¸¦å£ä»¤çš„æ–°æ–‡ä»¶</p><h2 id="Ansible-console"><a href="#Ansible-console" class="headerlink" title="Ansible-console"></a>Ansible-console</h2><p>2.0+æ–°å¢ï¼Œå¯äº¤äº’æ‰§è¡Œå‘½ä»¤ï¼Œæ”¯æŒtab</p><p><code>root@test(2)[f:10]$</code></p><p><code>æ‰§è¡Œç”¨æˆ·@å½“å‰æ“ä½œçš„ä¸»æœºç»„(å½“å‰ç»„çš„ä¸»æœºæ•°é‡)[f:å¹¶å‘æ•°]$</code></p><p>è®¾ç½®å¹¶å‘æ•°: <code>forks n</code> ä¾‹å¦‚ï¼š <code>forks 10</code></p><p>åˆ‡æ¢ç»„: <code>cd ä¸»æœºç»„</code> ä¾‹å¦‚: <code>cd web</code></p><p>åˆ—å‡ºå½“å‰ç»„ä¸»æœºåˆ—è¡¨ï¼š<code>list</code></p><p>åˆ—å‡ºæ‰€æœ‰çš„å†…ç½®å‘½ä»¤ï¼š<code>?</code> æˆ– <code>help</code></p><p>ç¤ºä¾‹:</p><p><code>root@all (4)[f:5]$ list</code></p><p><code>root@all (4)[f:5]$ cd cd</code></p><p><code>root@cd (2)[f:5]$ list</code></p><p><code>root@cd (2)[f:5]$ yum name=httpd state=present</code></p><p><code>root@cd (2)[f:5]$ service name=httpd state=started</code></p><h1 id="playbook"><a href="#playbook" class="headerlink" title="playbook"></a>playbook</h1><p>&emsp;&emsp;playbookæ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªâ€playâ€ç»„æˆçš„åˆ—è¡¨</p><p>&emsp;&emsp;playçš„ä¸»è¦åŠŸèƒ½åœ¨äºå°†äº‹å…ˆå½’å¹¶ä¸ºä¸€ç»„çš„ä¸»æœºè£…æ‰®æˆäº‹å…ˆé€šè¿‡ansibleä¸­çš„taskå®šä¹‰å¥½çš„è§’è‰²ã€‚ä»æ ¹æœ¬ä¸Šæ¥è®²ï¼Œæ‰€è°“taskæ— éæ˜¯è°ƒç”¨ansibleçš„ä¸€ä¸ªmoduleã€‚å°†å¤šä¸ªplayç»„ç»‡åœ¨ä¸€ä¸ªplaybookä¸­ï¼Œå³å¯ä»¥è®©å®ƒä»¬è”åŒèµ·æ¥æŒ‰äº‹å…ˆç¼–æ’çš„æœºåˆ¶åŒå”±ä¸€å°å¤§æˆ</p><p>&emsp;&emsp;Playbooké‡‡ç”¨YAMLè¯­è¨€ç¼–å†™</p><p><img src="https://cdn.jsdelivr.net/gh/wujiops/jpeg/ansible/0.jpg"></p><h2 id="YAMLä»‹ç»"><a href="#YAMLä»‹ç»" class="headerlink" title="YAMLä»‹ç»"></a>YAMLä»‹ç»</h2><p>&emsp;&emsp;YAMLæ˜¯ä¸€ä¸ªå¯è¯»æ€§é«˜çš„ç”¨æ¥è¡¨è¾¾èµ„æ–™åºåˆ—çš„æ ¼å¼ã€‚YAMLå‚è€ƒäº†å…¶ä»–å¤šç§è¯­è¨€ï¼ŒåŒ…æ‹¬:XMLã€Cè¯­è¨€ã€Pythonã€Perlä»¥åŠç”µå­é‚®ä»¶æ ¼å¼RFC2822ç­‰ã€‚Clark Evansåœ¨2001å¹´åœ¨é¦–æ¬¡å‘è¡¨äº†è¿™ç§è¯­è¨€ï¼Œå¦å¤–Ingy dÃ¶t Netä¸Oren Ben-Kikiä¹Ÿæ˜¯è¿™è¯­è¨€çš„å…±åŒè®¾è®¡è€…</p><p>&emsp;&emsp;YAML Ainâ€™t Markup Languageï¼Œå³YAMLä¸æ˜¯XMLã€‚ä¸è¿‡ï¼Œåœ¨å¼€å‘çš„è¿™ç§è¯­è¨€æ—¶ï¼ŒYAMLçš„æ„æ€å…¶å®æ˜¯:â€Yet Another Markup Languageâ€(ä»æ˜¯ä¸€ç§æ ‡è®°è¯­è¨€ï¼‰</p><h3 id="ç‰¹æ€§-1"><a href="#ç‰¹æ€§-1" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h3><blockquote><p>YAMLçš„å¯è¯»æ€§å¥½<br>YAMLå’Œè„šæœ¬è¯­è¨€çš„äº¤äº’æ€§å¥½<br>YAMLä½¿ç”¨å®ç°è¯­è¨€çš„æ•°æ®ç±»å‹<br>YAMLæœ‰ä¸€ä¸ªä¸€è‡´çš„ä¿¡æ¯æ¨¡å‹<br>YAMLæ˜“äºå®ç°<br>YAMLå¯ä»¥åŸºäºæµæ¥å¤„ç†<br>YAMLè¡¨è¾¾èƒ½åŠ›å¼ºï¼Œæ‰©å±•æ€§å¥½</p></blockquote><p>æ›´å¤šçš„å†…å®¹åŠè§„èŒƒå‚è§<a href="http://www.yaml.org/">http://www.yaml.org</a></p><h3 id="YAMLè¯­æ³•ç®€ä»‹"><a href="#YAMLè¯­æ³•ç®€ä»‹" class="headerlink" title="YAMLè¯­æ³•ç®€ä»‹"></a>YAMLè¯­æ³•ç®€ä»‹</h3><p>&emsp;&emsp;åœ¨å•ä¸€æ¡£æ¡ˆä¸­ï¼Œå¯ç”¨è¿ç»­ä¸‰ä¸ªè¿å­—å·<code>---</code>åŒºåˆ†å¤šä¸ªæ¡£æ¡ˆã€‚å¦å¤–ï¼Œè¿˜æœ‰é€‰æ‹©æ€§çš„è¿ç»­ä¸‰ä¸ªç‚¹å·<code>...</code>ç”¨æ¥è¡¨ç¤ºæ¡£æ¡ˆç»“å°¾</p><p>&emsp;&emsp;æ¬¡è¡Œå¼€å§‹æ­£å¸¸å†™Playbookçš„å†…å®¹ï¼Œä¸€èˆ¬å»ºè®®å†™æ˜è¯¥Playbookçš„åŠŸèƒ½</p><p>&emsp;&emsp;ä½¿ç”¨<code>#</code>å·æ³¨é‡Šä»£ç </p><p>&emsp;&emsp;ç¼©è¿›å¿…é¡»æ˜¯ç»Ÿä¸€çš„ï¼Œä¸èƒ½ç©ºæ ¼å’Œtabæ··ç”¨</p><p>&emsp;&emsp;ç¼©è¿›çš„çº§åˆ«ä¹Ÿå¿…é¡»æ˜¯ä¸€è‡´çš„ï¼ŒåŒæ ·çš„ç¼©è¿›ä»£è¡¨åŒæ ·çš„çº§åˆ«ï¼Œç¨‹åºåˆ¤åˆ«é…ç½®çš„çº§åˆ«æ˜¯é€šè¿‡ç¼©è¿›ç»“åˆæ¢è¡Œæ¥å®ç°çš„</p><p>&emsp;&emsp;YAMLæ–‡ä»¶å†…å®¹å’ŒLinuxç³»ç»Ÿå¤§å°å†™åˆ¤æ–­æ–¹å¼ä¿æŒä¸€è‡´ï¼Œæ˜¯åŒºåˆ«å¤§å°å†™çš„ï¼Œk/vçš„å€¼å‡éœ€å¤§å°å†™æ•æ„Ÿ</p><p>&emsp;&emsp;k/vçš„å€¼å¯åŒè¡Œå†™ä¹Ÿå¯æ¢è¡Œå†™ã€‚åŒè¡Œä½¿ç”¨<code>:</code>åˆ†éš”</p><p>&emsp;&emsp;vå¯æ˜¯ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯æ˜¯å¦ä¸€ä¸ªåˆ—è¡¨</p><p>&emsp;&emsp;ä¸€ä¸ªå®Œæ•´çš„ä»£ç å—åŠŸèƒ½éœ€æœ€å°‘å…ƒç´ éœ€åŒ…æ‹¬<code>name: task</code></p><p>&emsp;&emsp;ä¸€ä¸ªnameåªèƒ½åŒ…æ‹¬ä¸€ä¸ªtask</p><p>&emsp;&emsp;YAMLæ–‡ä»¶æ‰©å±•åé€šå¸¸ä¸ºymlæˆ–yaml</p><h3 id="Listï¼šåˆ—è¡¨ï¼Œå…¶æ‰€æœ‰å…ƒç´ å‡ä½¿ç”¨-æ‰“å¤´"><a href="#Listï¼šåˆ—è¡¨ï¼Œå…¶æ‰€æœ‰å…ƒç´ å‡ä½¿ç”¨-æ‰“å¤´" class="headerlink" title="Listï¼šåˆ—è¡¨ï¼Œå…¶æ‰€æœ‰å…ƒç´ å‡ä½¿ç”¨-æ‰“å¤´"></a>Listï¼šåˆ—è¡¨ï¼Œå…¶æ‰€æœ‰å…ƒç´ å‡ä½¿ç”¨<code>-</code>æ‰“å¤´</h3><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#A list of tasty fruits</span><span class="token punctuation">-</span> Apple<span class="token punctuation">-</span> Orange<span class="token punctuation">-</span> Strawberry<span class="token punctuation">-</span> Mango<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Dictionaryï¼šå­—å…¸ï¼Œé€šå¸¸ç”±å¤šä¸ªkeyä¸valueæ„æˆ"><a href="#Dictionaryï¼šå­—å…¸ï¼Œé€šå¸¸ç”±å¤šä¸ªkeyä¸valueæ„æˆ" class="headerlink" title="Dictionaryï¼šå­—å…¸ï¼Œé€šå¸¸ç”±å¤šä¸ªkeyä¸valueæ„æˆ"></a>Dictionaryï¼šå­—å…¸ï¼Œé€šå¸¸ç”±å¤šä¸ªkeyä¸valueæ„æˆ</h3><p>ç¤ºä¾‹:</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token comment"># An employee record</span><span class="token key atrule">name</span><span class="token punctuation">:</span> Example Developer<span class="token key atrule">job</span><span class="token punctuation">:</span> Developer<span class="token key atrule">skill</span><span class="token punctuation">:</span> Elite<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¹Ÿå¯ä»¥å°†<code>key:value</code>æ”¾ç½®äº<code>&#123;&#125;</code>ä¸­è¿›è¡Œè¡¨ç¤ºï¼Œç”¨<code>,</code>åˆ†éš”å¤šä¸ª<code>key:value</code></p><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token comment"># An employee record</span><span class="token punctuation">&#123;</span><span class="token key atrule">name</span><span class="token punctuation">:</span> Example Developer<span class="token punctuation">,</span> <span class="token key atrule">job</span><span class="token punctuation">:</span> Developer<span class="token punctuation">,</span> skill<span class="token punctuation">:</span>Elite<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;YAMLçš„è¯­æ³•å’Œå…¶ä»–é«˜é˜¶è¯­è¨€ç±»ä¼¼ï¼Œå¹¶ä¸”å¯ä»¥ç®€å•è¡¨è¾¾æ¸…å•ã€æ•£åˆ—è¡¨ã€æ ‡é‡ç­‰æ•°æ®ç»“æ„ã€‚å…¶ç»“æ„(Structure )é€šè¿‡ç©ºæ ¼æ¥å±•ç¤ºï¼Œåºåˆ—(Sequence )é‡Œçš„é¡¹ç”¨<code>-</code>æ¥ä»£è¡¨ï¼ŒMapé‡Œçš„é”®å€¼å¯¹ç”¨<code>:</code>åˆ†éš”</p><p>ç¤ºä¾‹</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">name</span><span class="token punctuation">:</span> John Smith<span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">41</span><span class="token key atrule">gender</span><span class="token punctuation">:</span> Male<span class="token key atrule">spouse</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> Jane Smith  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">37</span>  <span class="token key atrule">gender</span><span class="token punctuation">:</span> Female<span class="token key atrule">children</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Jimmy Smith    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">17</span>    <span class="token key atrule">gender</span><span class="token punctuation">:</span> Male  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Jenny Smith    <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">13</span>    <span class="token key atrule">gender</span><span class="token punctuation">:</span> Female<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Playbookæ ¸å¿ƒå…ƒç´ "><a href="#Playbookæ ¸å¿ƒå…ƒç´ " class="headerlink" title="Playbookæ ¸å¿ƒå…ƒç´ "></a>Playbookæ ¸å¿ƒå…ƒç´ </h2><p><code>Hosts</code> æ‰§è¡Œçš„è¿œç¨‹ä¸»æœºåˆ—è¡¨</p><p><code>Tasks</code> ä»»åŠ¡é›†</p><p><code>Varniables</code> å†…ç½®å˜é‡æˆ–è‡ªå®šä¹‰å˜é‡åœ¨playbookä¸­è°ƒç”¨</p><p><code>Templates</code> æ¨¡æ¿ï¼Œå¯æ›¿æ¢æ¨¡æ¿æ–‡ä»¶ä¸­çš„å˜é‡å¹¶å®ç°ä¸€äº›ç®€å•é€»è¾‘çš„æ–‡ä»¶</p><p><code>Handlers</code> å’Œ <code>notity</code> ç»“åˆä½¿ç”¨ï¼Œç”±ç‰¹å®šæ¡ä»¶è§¦å‘çš„æ“ä½œï¼Œæ»¡è¶³æ¡ä»¶æ–¹æ‰æ‰§è¡Œï¼Œå¦åˆ™ä¸æ‰§è¡Œ<br><code>tags</code> æ ‡ç­¾ æŒ‡å®šæŸæ¡ä»»åŠ¡æ‰§è¡Œï¼Œç”¨äºé€‰æ‹©è¿è¡Œplaybookä¸­çš„éƒ¨åˆ†ä»£ç ã€‚ansibleå…·æœ‰å¹‚ç­‰æ€§ï¼Œå› æ­¤ä¼šè‡ªåŠ¨è·³è¿‡æ²¡æœ‰å˜åŒ–çš„éƒ¨åˆ†ï¼Œå³ä¾¿å¦‚æ­¤ï¼Œæœ‰äº›ä»£ç ä¸ºæµ‹è¯•å…¶ç¡®å®æ²¡æœ‰å‘ç”Ÿå˜åŒ–çš„æ—¶é—´ä¾ç„¶ä¼šéå¸¸åœ°é•¿ã€‚æ­¤æ—¶ï¼Œå¦‚æœç¡®ä¿¡å…¶æ²¡æœ‰å˜åŒ–ï¼Œå°±å¯ä»¥é€šè¿‡tagsè·³è¿‡æ­¤äº›ä»£ç ç‰‡æ–­ã€‚</p><p><code>ansible-playbook -t tagsname useradd.yml</code> </p><h2 id="playbookåŸºç¡€ç»„ä»¶"><a href="#playbookåŸºç¡€ç»„ä»¶" class="headerlink" title="playbookåŸºç¡€ç»„ä»¶"></a>playbookåŸºç¡€ç»„ä»¶</h2><h3 id="Hostsï¼š"><a href="#Hostsï¼š" class="headerlink" title="Hostsï¼š"></a>Hostsï¼š</h3><p>playbookä¸­çš„æ¯ä¸€ä¸ªplayçš„ç›®çš„éƒ½æ˜¯ä¸ºäº†è®©æŸä¸ªæˆ–æŸäº›ä¸»æœºä»¥æŸä¸ªæŒ‡å®šçš„ç”¨æˆ·èº«ä»½æ‰§è¡Œä»»åŠ¡ã€‚hostsç”¨äºæŒ‡å®šè¦æ‰§è¡ŒæŒ‡å®šä»»åŠ¡çš„ä¸»æœºï¼Œé¡»äº‹å…ˆå®šä¹‰åœ¨ä¸»æœºæ¸…å•ä¸­</p><p>å¯ä»¥æ˜¯å¦‚ä¸‹å½¢å¼ï¼š</p><pre class="line-numbers language-none"><code class="language-none">one.example.comone.example.com:two.example.com192.168.1.50192.168.1.*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>Websrvs:dbsrvs</code> ä¸¤ä¸ªç»„çš„å¹¶é›†</p><p><code>Websrvs:&amp;dbsrvs</code> ä¸¤ä¸ªç»„çš„äº¤é›†</p><p><code>websrvs:!dbsrvs</code> åœ¨websrvsç»„ï¼Œä½†ä¸åœ¨dbsrvsç»„</p><p>ç¤ºä¾‹ï¼š</p><p><code>- hosts: websrvs:dbsrvs</code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> cd  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root    <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create new file      <span class="token key atrule">file</span><span class="token punctuation">:</span> name=/data/newfile state=touch    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create new user      <span class="token key atrule">user</span><span class="token punctuation">:</span> name=test2 system=yes shell=/sbin/nologin    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=httpd    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy html      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=/var/www/html/index.html dest=/var/www/html/    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start service      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=httpd state=started enabled=yes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ansible-playbook -C play.yaml</code>   # æ£€æŸ¥playbook</p><h2 id="remote-user"><a href="#remote-user" class="headerlink" title="remote_user"></a>remote_user</h2><p>å¯ç”¨äºHostå’Œtaskä¸­</p><p>&emsp;&emsp;ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®šå…¶é€šè¿‡sudoçš„æ–¹å¼åœ¨è¿œç¨‹ä¸»æœºä¸Šæ‰§è¡Œä»»åŠ¡ï¼Œå…¶å¯ç”¨äºplayå…¨å±€æˆ–æŸä»»åŠ¡ï¼›æ­¤å¤–ï¼Œç”šè‡³å¯ä»¥åœ¨sudoæ—¶ä½¿ç”¨sudo_useræŒ‡å®šsudoæ—¶åˆ‡æ¢çš„ç”¨æˆ·</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> websrvs  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root    <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> test connection      <span class="token key atrule">ping</span><span class="token punctuation">:</span>      <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> magedu      <span class="token key atrule">sudo</span><span class="token punctuation">:</span> yes   é»˜è®¤sudoä¸ºroot      <span class="token key atrule">sudo_user</span><span class="token punctuation">:</span> wang   sudoä¸ºwang<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="task-åˆ—è¡¨å’Œ-action"><a href="#task-åˆ—è¡¨å’Œ-action" class="headerlink" title="task åˆ—è¡¨å’Œ action"></a>task åˆ—è¡¨å’Œ action</h2><p>playçš„ä¸»ä½“éƒ¨åˆ†æ˜¯task list</p><p>&emsp;&emsp;task listä¸­çš„å„ä»»åŠ¡æŒ‰æ¬¡åºé€ä¸ªåœ¨hostsä¸­æŒ‡å®šçš„æ‰€æœ‰ä¸»æœºä¸Šæ‰§è¡Œï¼Œå³åœ¨æ‰€æœ‰ä¸»æœºä¸Šå®Œæˆç¬¬ä¸€ä¸ªä»»åŠ¡åå†å¼€å§‹ç¬¬äºŒä¸ªã€‚åœ¨è¿è¡Œè‡ªä¸‹è€Œä¸‹æŸplaybookæ—¶ï¼Œå¦‚æœä¸­é€”å‘ç”Ÿé”™è¯¯ï¼Œæ‰€æœ‰å·²æ‰§è¡Œä»»åŠ¡éƒ½å°†å›æ»šï¼Œå› æ­¤ï¼Œåœ¨æ›´æ­£playbookåé‡æ–°æ‰§è¡Œä¸€æ¬¡å³å¯</p><p>&emsp;&emsp;taskçš„ç›®çš„æ˜¯ä½¿ç”¨æŒ‡å®šçš„å‚æ•°æ‰§è¡Œæ¨¡å—ï¼Œè€Œåœ¨æ¨¡å—å‚æ•°ä¸­å¯ä»¥ä½¿ç”¨å˜é‡ã€‚æ¨¡å—æ‰§è¡Œæ˜¯å¹‚ç­‰çš„ï¼Œè¿™æ„å‘³ç€å¤šæ¬¡æ‰§è¡Œæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºå…¶ç»“æœå‡ä¸€è‡´</p><p>&emsp;&emsp;æ¯ä¸ªtaskéƒ½åº”è¯¥æœ‰å…¶nameï¼Œç”¨äºplaybookçš„æ‰§è¡Œç»“æœè¾“å‡ºï¼Œå»ºè®®å…¶å†…å®¹å°½å¯èƒ½æ¸…æ™°åœ°æè¿°ä»»åŠ¡æ‰§è¡Œæ­¥éª¤ã€‚å¦‚æœæœªæä¾›nameï¼Œåˆ™actionçš„ç»“æœå°†ç”¨äºè¾“å‡º</p><h3 id="tasksï¼šä»»åŠ¡åˆ—è¡¨"><a href="#tasksï¼šä»»åŠ¡åˆ—è¡¨" class="headerlink" title="tasksï¼šä»»åŠ¡åˆ—è¡¨"></a>tasksï¼šä»»åŠ¡åˆ—è¡¨</h3><p>æ ¼å¼ï¼š</p><p>(1) <code>action: module arguments</code></p><p>(2) <code>module: arguments</code>   å»ºè®®ä½¿ç”¨</p><p>æ³¨æ„ï¼š <code>shell</code> å’Œ <code>command</code> æ¨¡å—åé¢è·Ÿå‘½ä»¤ï¼Œè€Œé<code>key=value</code></p><p>æŸä»»åŠ¡çš„çŠ¶æ€åœ¨è¿è¡Œåä¸ºchangedæ—¶ï¼Œå¯é€šè¿‡â€notifyâ€é€šçŸ¥ç»™ç›¸åº”çš„handlers</p><p>ä»»åŠ¡å¯ä»¥é€šè¿‡â€tagsâ€æ‰“æ ‡ç­¾ï¼Œè€Œåå¯åœ¨<code>ansible-playbook</code>å‘½ä»¤ä¸Šä½¿ç”¨<code>-t</code>æŒ‡å®šè¿›è¡Œè°ƒç”¨</p><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">tasks</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> disable selinux    <span class="token key atrule">command</span><span class="token punctuation">:</span> /sbin/setenforce 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœå‘½ä»¤æˆ–è„šæœ¬çš„é€€å‡ºç ä¸ä¸ºé›¶ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼æ›¿ä»£</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">tasks</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> run this command and ignore the result    <span class="token key atrule">shell</span><span class="token punctuation">:</span> /usr/bin/somecommand <span class="token punctuation">|</span><span class="token punctuation">|</span> /bin/true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æˆ–è€…ä½¿ç”¨ignore_errorsæ¥å¿½ç•¥é”™è¯¯ä¿¡æ¯ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">tasks</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> run this command and ignore the result    <span class="token key atrule">shell</span><span class="token punctuation">:</span> /usr/bin/somecommand    <span class="token key atrule">ignore_errors</span><span class="token punctuation">:</span> <span class="token boolean important">True</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¿è¡Œplaybook"><a href="#è¿è¡Œplaybook" class="headerlink" title="è¿è¡Œplaybook"></a>è¿è¡Œplaybook</h2><p>è¿è¡Œplaybookçš„æ–¹å¼</p><p><code>ansible-playbook &lt;filename.yml&gt; ... [options]</code></p><p>å¸¸è§é€‰é¡¹</p><p><code>--check</code>   åªæ£€æµ‹å¯èƒ½ä¼šå‘ç”Ÿçš„æ”¹å˜ï¼Œä½†ä¸çœŸæ­£æ‰§è¡Œæ“ä½œ</p><p><code>--list-hosts</code>   åˆ—å‡ºè¿è¡Œä»»åŠ¡çš„ä¸»æœº</p><p><code>--limit</code>   ä¸»æœº/åˆ—è¡¨ åªé’ˆå¯¹ä¸»æœºåˆ—è¡¨ä¸­çš„ä¸»æœºæ‰§è¡Œ</p><p><code>-v</code>   æ˜¾ç¤ºè¿‡ç¨‹<code>-vv</code> <code>-vvv</code>æ›´è¯¦ç»†</p><p>ç¤ºä¾‹</p><p><code>ansible-playbook file.yml --check</code>   åªæ£€æµ‹</p><p><code>ansible-playbook file.yml --list</code></p><p><code>ansible-playbook file.yml --list-tasks</code></p><p><code>ansible-playbook file.yml --limit websrvs</code></p><p><code>ansible-playbook file.yml --list-tags</code></p><p>Playbook VS ShellScripts</p><p>SHELLè„šæœ¬</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token comment">#å®‰è£…Apache</span>yum <span class="token function">install</span> --quiet -y httpd<span class="token comment">#å¤åˆ¶é…ç½®æ–‡ä»¶</span><span class="token function">cp</span> /tmp/httpd.conf /etc/httpd/conf/httpd.conf<span class="token function">cp</span> /tmp/vhosts.conf /etc/httpd/confd/<span class="token comment">#å¯åŠ¨Apacheï¼Œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨</span><span class="token function">service</span> httpd start<span class="token function">chkconfig</span> httpd on<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Playbookå®šä¹‰</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> all  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"å®‰è£…Apache"</span>      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=httpd    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"å¤åˆ¶é…ç½®æ–‡ä»¶"</span>      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=/tmp/httpd.conf dest=/etc/httpd/conf/<span class="token comment">#      copy: src=/tmp/vhosts.conf dest=/etc/httpd/conf.d/   æ³¨æ„å¦‚æœç›¸åŒçš„æ¨¡å—ï¼Œä¸èƒ½æ”¾åœ¨ä¸€å—ï¼Œå¦åˆ™åªä¼šæ‰§è¡Œæœ€åä¸€ä¸ª</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"å¤åˆ¶é…ç½®æ–‡ä»¶"</span>       <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=/tmp/vhosts.conf dest=/etc/httpd/conf.d/    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"å¯åŠ¨Apacheï¼Œå¹¶è®¾ç½®å¼€æœºå¯åŠ¨"</span>      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=httpd state=started enabled=yes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¤ºä¾‹ï¼šsysuser.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span>  <span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> all    <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root        <span class="token key atrule">tasks</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create mysql user        <span class="token key atrule">user</span><span class="token punctuation">:</span> name=mysql system=yes uid=36      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create a group        <span class="token key atrule">group</span><span class="token punctuation">:</span> name=httpd system=yes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¤ºä¾‹ï¼šhttpd.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> websrvs  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install httpd      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=httpd state=present    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install configure file        <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=$HOME/httpd.conf dest=/etc/httpd/conf/   <span class="token comment"># srcç›¸å¯¹è·¯å¾„æ˜¯ç›¸å¯¹äºå½“å‰ç›®å½•ã€‚å¦‚æœä¿®æ”¹è¿œç«¯æ–‡ä»¶ï¼Œç›´æ¥ä¿®æ”¹æœ¬åœ°æ–‡ä»¶ï¼Œå†æ¬¡æ‰§è¡Œplaybookä¼šè¦†ç›–è¿œç«¯çš„æ–‡ä»¶ã€‚</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start service        <span class="token key atrule">service</span><span class="token punctuation">:</span> name=httpd state=started enabled=yes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="handlerså’Œnotifyç»“åˆä½¿ç”¨è§¦å‘æ¡ä»¶"><a href="#handlerså’Œnotifyç»“åˆä½¿ç”¨è§¦å‘æ¡ä»¶" class="headerlink" title="handlerså’Œnotifyç»“åˆä½¿ç”¨è§¦å‘æ¡ä»¶"></a>handlerså’Œnotifyç»“åˆä½¿ç”¨è§¦å‘æ¡ä»¶</h1><p>Handlersï¼ˆè§¦å‘å™¨å’Œtaskæ˜¯å¹¶åˆ—å…³ç³»ï¼‰</p><p>æ˜¯taskåˆ—è¡¨ï¼Œè¿™äº›taskä¸å‰è¿°çš„taskå¹¶æ²¡æœ‰æœ¬è´¨ä¸Šçš„ä¸åŒï¼Œç”¨äºå½“å…³æ³¨çš„èµ„æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡‡å–ä¸€å®šçš„æ“ä½œ</p><p>Notifyï¼ˆé€šçŸ¥ï¼‰</p><p>æ­¤actionå¯ç”¨äºåœ¨æ¯ä¸ªplayçš„æœ€åè¢«è§¦å‘ï¼Œè¿™æ ·å¯ä»¥é¿å…å¤šæ¬¡æœ‰æ”¹å˜å‘ç”Ÿæ—¶æ¯æ¬¡éƒ½æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œï¼Œä»…åœ¨æ‰€æœ‰çš„å˜åŒ–å‘ç”Ÿå®Œæˆæœ€åä¸€æ¬¡æ€§åœ°æ‰§è¡ŒæŒ‡å®šæ“ä½œã€‚åœ¨notifyä¸­åˆ—å‡ºçš„æ“ä½œç§°ä¸ºhandlerï¼Œä¹Ÿå³notifyä¸­è°ƒç”¨handlerä¸­å®šä¹‰çš„æ“ä½œã€‚</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> 192.168.182.131  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy conf file      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=httpd.conf dest=/etc/httpd/conf/ backup=yes      <span class="token key atrule">notify</span><span class="token punctuation">:</span> restart service   <span class="token comment"># notifyå†…å®¹å’Œhandlesä¸­- name:å†…å®¹ä¿æŒä¸€è‡´ï¼Œæ‰ä¼šè§¦å‘ã€‚</span>  <span class="token key atrule">handlers</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> restart service      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=httpd state=restarted    <span class="token comment"># è¿™é‡Œå¯ä»¥å¤šä¸ª - name:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> 192.168.182.131  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root    <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> add group nginx      <span class="token key atrule">tags</span><span class="token punctuation">:</span> user      <span class="token key atrule">user</span><span class="token punctuation">:</span> name=nginx state=present    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> add user nginx      <span class="token key atrule">user</span><span class="token punctuation">:</span> name=nginx state=present group=nginx    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Install Nginx      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=nginx state=present    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> config      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=/root/config.txt dest=/etc/nginx/nginx.conf      <span class="token key atrule">notify</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> Restart Nginx        <span class="token punctuation">-</span> Check Nginx Process  <span class="token key atrule">handlers</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Restart Nginx      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=nginx state=restarted enabled=yes    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Check Nginx process      <span class="token key atrule">shell</span><span class="token punctuation">:</span> killall <span class="token punctuation">-</span>0 nginx <span class="token punctuation">></span> /tmp/nginx.log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="Playbookä¸­tagsä½¿ç”¨"><a href="#Playbookä¸­tagsä½¿ç”¨" class="headerlink" title="Playbookä¸­tagsä½¿ç”¨"></a>Playbookä¸­tagsä½¿ç”¨</h1><p>ç¤ºä¾‹: <code>httpd.yml</code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> 192.168.182.131  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install httpd      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=httpd      <span class="token key atrule">tags</span><span class="token punctuation">:</span> inshttp      <span class="token comment"># tags: http</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy conf file      <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=httpd.conf dest=/etc/httpd/conf/ backup=yes      <span class="token key atrule">notify</span><span class="token punctuation">:</span> restart service    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start httpd      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=httpd state=started enabled=yes      <span class="token key atrule">tags</span><span class="token punctuation">:</span> rshttp      <span class="token comment"># tags: http</span>  <span class="token key atrule">handlers</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> restart service      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=httpd state=restarted<span class="token comment"># å…¶ä¸­å¤šä¸ªåŠ¨ä½œå¯ä»¥ä½¿ç”¨ç›¸åŒåç§°çš„tagsï¼Œå³ä¸€ä¸ªtagså¯ä»¥æŒ‡å®šå¤šä¸ªåŠ¨ä½œã€‚</span><span class="token comment"># è¿è¡Œæ—¶æŒ‡å®šæ ‡ç­¾åå³å¯ï¼Œé€—å·ä¸ºåˆ†éš”ç¬¦ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ansible 192.168.182.131 -m service -a &quot;name=httpd state=stopped&quot;</code> </p><p><code>ansible-playbook -t rshttp httpd.yml</code> or <code>ansible-playbook -t inshttp,rehttp httpd.yml</code> </p><p><code>ansible 192.168.182.131 -m shell -a &quot;ss -anptl|grep :8080&quot;</code> </p><p><code>ansible-playbook 131httpconf.yaml --list-tags</code>   # åˆ—å‡ºyamlæ–‡ä»¶ä¸­çš„tags</p><h1 id="Playbookä¸­å˜é‡ä½¿ç”¨"><a href="#Playbookä¸­å˜é‡ä½¿ç”¨" class="headerlink" title="Playbookä¸­å˜é‡ä½¿ç”¨"></a>Playbookä¸­å˜é‡ä½¿ç”¨</h1><p>å˜é‡åï¼šä»…èƒ½ç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆï¼Œä¸”åªèƒ½ä»¥å­—æ¯å¼€å¤´</p><p>å˜é‡æ¥æºï¼š</p><ol><li><p><code>ansible setup facts</code> è¿œç¨‹ä¸»æœºçš„æ‰€æœ‰å˜é‡éƒ½å¯ç›´æ¥è°ƒç”¨</p></li><li><p>åœ¨ <code>/etc/ansible/hosts</code> ä¸­å®šä¹‰</p></li></ol><p>æ™®é€šå˜é‡ï¼šä¸»æœºç»„ä¸­ä¸»æœºå•ç‹¬å®šä¹‰ï¼Œä¼˜å…ˆçº§é«˜äºå…¬å…±å˜é‡</p><p>å…¬å…±ï¼ˆç»„ï¼‰å˜é‡ï¼šé’ˆå¯¹ä¸»æœºç»„ä¸­æ‰€æœ‰ä¸»æœºå®šä¹‰ç»Ÿä¸€å˜é‡</p><ol start="3"><li>é€šè¿‡å‘½ä»¤è¡ŒæŒ‡å®šå˜é‡ï¼Œä¼˜å…ˆçº§æœ€é«˜</li></ol><p><code>ansible-playbook -e varname=value</code> </p><ol start="4"><li>åœ¨playbookä¸­å®šä¹‰</li></ol><pre class="line-numbers language-text" data-language="text"><code class="language-text">vars:- var1: value1- var2: value2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="5"><li>åœ¨roleä¸­å®šä¹‰</li></ol><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment">#httpd.yaml</span><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> 192.168.182.131  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> pkname <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start service      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> pkname <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> state=started enabled=true<span class="token comment"># å®‰è£…è½¯ä»¶ å¹¶ å¯åŠ¨ï¼Œæ³¨æ„åŒ…åå’ŒæœåŠ¡å å¯èƒ½ä¸ä¸€æ ·ã€‚</span><span class="token comment">#app.yaml</span><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> 192.168.182.131  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package1      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> pkname1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package2      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> pkname2 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å˜é‡èµ‹å€¼ä¸ºhttpd</p><p><code>ansible-playbook -e &#39;pkname=httpd&#39; httpd.yaml</code> </p><p>å˜é‡èµ‹å€¼ä¸ºhttpd,nginxï¼Œyumå¯ä»¥åŒæ—¶å®‰è£…å¤šä¸ªåŒ…</p><p><code>ansible-playbook -e &#39;pkname1=httpd,nginx&#39; bianliang.yaml</code> </p><p>å¤šä¸ªå˜é‡èµ‹å€¼ï¼Œç”¨ç©ºæ ¼éš”å¼€</p><p><code>ansible-playbook -e &#39;pkname1=httpd pkname2=nginx&#39; bianliang.yaml</code> </p><p>æŸ¥è¯¢å®‰è£…çš„åŒ…</p><p><code>ansible 192.168.182.131 -m shell -a &quot;rpm -qa|grep -E &#39;httpd|nginx&#39;&quot;</code> </p><p>å¸è½½å®‰è£…çš„åŒ…ï¼ŒåŒæ ·nameå¯ä»¥å°†httpdå’ŒnginxåŒæ—¶åˆ æ‰ï¼ˆabsent=removedï¼‰</p><p><code>ansible 192.168.182.131 -m yum -a &#39;name=httpd,nginx state=absent&#39;</code> </p><p>åœ¨playbooké‡Œé¢å®šä¹‰å˜é‡</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> 192.168.182.131  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">vars</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">pkname1</span><span class="token punctuation">:</span> httpd    <span class="token punctuation">-</span> <span class="token key atrule">pkname2</span><span class="token punctuation">:</span> nginx  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package1      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> pkname1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package2      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> pkname2 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ansible-playbook app.yaml</code> </p><p>åœ¨ä¸»æœºæ¸…å•ä¸­å®šä¹‰å˜é‡<code>/etc/ansible/hosts</code> </p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token punctuation">[</span>webs<span class="token punctuation">]</span><span class="token number">192.168</span>.1.107 <span class="token assign-left variable">na</span><span class="token operator">=</span><span class="token number">107</span><span class="token number">192.168</span>.1.108 <span class="token assign-left variable">na</span><span class="token operator">=</span><span class="token number">108</span><span class="token comment"># å…¶ä¸­[webs]ä¸»æœºæ¸…å•ä¸­ï¼Œåœ¨æ¯ä¸ªä¸»æœºåé¢å¯ä»¥å¯¹æ¯ä¸ªä¸»æœºè®¾ç½®å•ä¸€å˜é‡ï¼Œä¼˜å…ˆçº§é«˜äº é€šç”¨ å˜é‡</span><span class="token punctuation">[</span>webs:vars<span class="token punctuation">]</span><span class="token assign-left variable">a</span><span class="token operator">=</span>node<span class="token assign-left variable">z</span><span class="token operator">=</span>centos7.com<span class="token comment"># å¯¹websä¸»æœºç»„ä¸­æ‰€æœ‰çš„ä¸»æœºè®¾ç½®çš„ é€šç”¨/å…¬å…± å˜é‡</span><span class="token comment"># ä¸€èˆ¬çš„è§„åˆ™ï¼šå‘½ä»¤è¡Œ-e é…ç½®çš„å˜é‡ ä¼˜å…ˆçº§é«˜äº ä¸Šé¢ä¸¤ç§å®šä¹‰å˜é‡æ–¹å¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å˜é‡å‘½å"><a href="#å˜é‡å‘½å" class="headerlink" title="å˜é‡å‘½å"></a>å˜é‡å‘½å</h2><p>å˜é‡åä»…èƒ½ç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆï¼Œä¸”åªèƒ½ä»¥å­—æ¯å¼€å¤´</p><p>å˜é‡å®šä¹‰ï¼š<code>key=value</code> </p><p>ç¤ºä¾‹ï¼š<code>http_port=80</code> </p><p>å˜é‡è°ƒç”¨æ–¹å¼:</p><p>é€šè¿‡ <code>&#123;&#123; variable_name &#125;&#125;</code> è°ƒç”¨å˜é‡ï¼Œä¸”å˜é‡åå‰åå¿…é¡»æœ‰ç©ºæ ¼ï¼Œæœ‰æ—¶ç”¨ <code>&quot;&#123;&#123; variable_name &#125;&#125;&quot;</code> æ‰ç”Ÿæ•ˆ</p><p><code>ansible-playbook -e</code> é€‰é¡¹æŒ‡å®š</p><p><code>ansible-playbook test.yml -e &quot;hosts=www user=mageedu&quot;</code> </p><h2 id="ç›´æ¥ä½¿ç”¨ç³»ç»Ÿå˜é‡-setupæ¨¡å—"><a href="#ç›´æ¥ä½¿ç”¨ç³»ç»Ÿå˜é‡-setupæ¨¡å—" class="headerlink" title="ç›´æ¥ä½¿ç”¨ç³»ç»Ÿå˜é‡(setupæ¨¡å—)"></a>ç›´æ¥ä½¿ç”¨ç³»ç»Ÿå˜é‡(setupæ¨¡å—)</h2><p><code>ansible web -m setup</code>   æŸ¥çœ‹setupæ¨¡å—ä¸­å®šä¹‰çš„å˜é‡</p><p><code>&quot;ansible_user_uid&quot;</code>   å˜é‡åç±»ä¼¼äºè¿™æ ·</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create user      <span class="token key atrule">user</span><span class="token punctuation">:</span> name=wang groups=wheel comment="haha wang"    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create file      <span class="token key atrule">file</span><span class="token punctuation">:</span> name=/opt/<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> ansible_fqdn <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>.log state=touch mode=600 owner=wang<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ansible web -m shell -a &quot;ls /data -l&quot;</code> </p><p>åœ¨ <code>vars.yaml</code> æ–‡ä»¶ä¸­å®šä¹‰å˜é‡</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">var1</span><span class="token punctuation">:</span> httpd<span class="token key atrule">var2</span><span class="token punctuation">:</span> nginx<span class="token key atrule">var3</span><span class="token punctuation">:</span> haha<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">vars_files</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> vars.yaml  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create file      <span class="token key atrule">file</span><span class="token punctuation">:</span> name=/data/<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> var3 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> state=touch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ansible-playbook test.yaml</code>   è¿è¡Œplaybookæ–‡ä»¶</p><p><code>ansible web -m shell -a &quot;ls /data -l&quot;</code>   æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦åˆ›å»ºæˆåŠŸ</p><p>å˜é‡åä»…èƒ½ç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆï¼Œä¸”åªèƒ½ä»¥å­—æ¯å¼€å¤´å˜é‡å®šä¹‰: <code>key=value</code></p><p>ç¤ºä¾‹: <code>http_port=80</code></p><p>å˜é‡è°ƒç”¨æ–¹å¼ï¼š</p><p>é€šè¿‡<code>&#123;&#123; variable_name &#125;&#125;</code>è°ƒç”¨å˜é‡ï¼Œä¸”å˜é‡åå‰åå¿…é¡»æœ‰ç©ºæ ¼ï¼Œæœ‰æ—¶ç”¨<code>&quot;&#123;&#123; variable_name &#125;&#125;&quot;</code>æ‰ç”Ÿæ•ˆ</p><p><code>ansible-playbook -e</code> é€‰é¡¹æŒ‡å®š</p><p><code>ansible-playbook test.yml -e &quot;hosts=www user=magedu&quot;</code></p><p>ç¤ºä¾‹ï¼šå˜é‡</p><p>ç¤ºä¾‹ï¼švar.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> websrvs  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root    <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> pkname <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> state=present<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ansible-playbook -e pkname=httpd var.yml</code> </p><p>ç¤ºä¾‹ï¼šä½¿ç”¨setupå˜é‡</p><p>ç¤ºä¾‹ï¼švar.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> websrvs  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root    <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create log file      <span class="token key atrule">file</span><span class="token punctuation">:</span> name=/var/log/<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> ansible_fqdn <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> state=touch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ansible-playbook var.yml</code></p><p>ç¤ºä¾‹ï¼šå˜é‡<br>ç¤ºä¾‹: var.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> websrvs  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">vars</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">username</span><span class="token punctuation">:</span> user1    <span class="token punctuation">-</span> <span class="token key atrule">groupname</span><span class="token punctuation">:</span> group1  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create group      <span class="token key atrule">group</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> groupname <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> state=present    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create user       <span class="token key atrule">user</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> username <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> state=present<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ansible-playbook var.yml</code><br><code>ansible-playbook -e &quot;username=user2 groupname=group2&quot; var2.yml</code> </p><h2 id="ä¸»æœºå˜é‡"><a href="#ä¸»æœºå˜é‡" class="headerlink" title="ä¸»æœºå˜é‡"></a>ä¸»æœºå˜é‡</h2><p>å¯ä»¥åœ¨inventoryä¸­å®šä¹‰ä¸»æœºæ—¶ä¸ºå…¶æ·»åŠ ä¸»æœºå˜é‡ä»¥ä¾¿äºåœ¨playbookä¸­ä½¿ç”¨</p><p>ç¤ºä¾‹:</p><pre class="line-numbers language-none"><code class="language-none">[websrvs]www1.magedu.com http_port&#x3D;80 maxRequestsPerChild&#x3D;808www2.magedu.com http_port&#x3D;8080 maxRequestsPerChild&#x3D;909<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="ç»„å˜é‡"><a href="#ç»„å˜é‡" class="headerlink" title="ç»„å˜é‡"></a>ç»„å˜é‡</h2><p>ç»„å˜é‡æ˜¯æŒ‡èµ‹äºˆç»™æŒ‡å®šç»„å†…æ‰€æœ‰ä¸»æœºä¸Šçš„åœ¨playbookä¸­å¯ç”¨çš„å˜é‡ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">[websrvs]www1.magedu.comwww2.magedu.com[websrvs:vars]ntp_server&#x3D;ntp.magedu.comnfs_server&#x3D;nfs.magedu.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ™®é€šå˜é‡"><a href="#æ™®é€šå˜é‡" class="headerlink" title="æ™®é€šå˜é‡"></a>æ™®é€šå˜é‡</h2><pre class="line-numbers language-none"><code class="language-none">[websrvs]192.168.99.101 http_port&#x3D;8080 hname&#x3D;www1192.168.99.102 http_port&#x3D;80 hname&#x3D;www2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="å…¬å…±ï¼ˆç»„ï¼‰å˜é‡"><a href="#å…¬å…±ï¼ˆç»„ï¼‰å˜é‡" class="headerlink" title="å…¬å…±ï¼ˆç»„ï¼‰å˜é‡"></a>å…¬å…±ï¼ˆç»„ï¼‰å˜é‡</h2><pre class="line-numbers language-none"><code class="language-none">[websvrs:vars]http_port&#x3D;808mark&#x3D; &quot;_&quot;[websrvs]192.168.99.101 http_port&#x3D;8080 hname&#x3D;www1192.168.99.102 http_port&#x3D;80 hname&#x3D;www2ansible websvrs -m hostname -a &#39;name&#x3D;&#123;&#123; hname &#125;&#125;&#123;&#123; mark &#125;&#125;&#123;&#123; http_port &#125;&#125;&#39;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å‘½ä»¤è¡ŒæŒ‡å®šå˜é‡ï¼š"><a href="#å‘½ä»¤è¡ŒæŒ‡å®šå˜é‡ï¼š" class="headerlink" title="å‘½ä»¤è¡ŒæŒ‡å®šå˜é‡ï¼š"></a>å‘½ä»¤è¡ŒæŒ‡å®šå˜é‡ï¼š</h2><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ansible websvrs -e <span class="token assign-left variable">http_port</span><span class="token operator">=</span><span class="token number">8000</span> -m <span class="token function">hostname</span> -a <span class="token string">'name=&#123;&#123; hname &#125;&#125;&#123;&#123; mark &#125;&#125;&#123;&#123; http_port &#125;&#125;'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="ä½¿ç”¨å˜é‡æ–‡ä»¶"><a href="#ä½¿ç”¨å˜é‡æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨å˜é‡æ–‡ä»¶"></a>ä½¿ç”¨å˜é‡æ–‡ä»¶</h2><p>cat vars.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">var1</span><span class="token punctuation">:</span> httpd<span class="token key atrule">var2</span><span class="token punctuation">:</span> nginx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>cat var.yml</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">vars_files</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> vars.yml      <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create httpd log      <span class="token key atrule">file</span><span class="token punctuation">:</span> name=/app/<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> var1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>.log state=touch    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create nginx log       <span class="token key atrule">file</span><span class="token punctuation">:</span> name=/app/<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> var2 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>.log state=touch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¨¡æ¿<code>templates</code>ä¸èƒ½åœ¨å‘½ä»¤è¡Œä½¿ç”¨</p><p>æ–‡æœ¬æ–‡ä»¶ï¼ŒåµŒå¥—æœ‰è„šæœ¬ï¼ˆä½¿ç”¨æ¨¡æ¿ç¼–ç¨‹è¯­è¨€ç¼–å†™)</p><p>Jinja2è¯­è¨€ï¼Œä½¿ç”¨å­—é¢é‡ï¼Œæœ‰ä¸‹é¢å½¢å¼</p><p>å­—ç¬¦ä¸²ï¼šä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·</p><p>æ•°å­—ï¼šæ•´æ•°ï¼Œæµ®ç‚¹æ•°</p><p>åˆ—è¡¨ï¼š<code>[item1, item2,...]</code></p><p>å…ƒç»„ï¼š<code>(item1, item2,...)</code></p><p>å­—å…¸ï¼š<code>&#123;key1:value1, key2:value2,..&#125;</code></p><p>å¸ƒå°”å‹ï¼š<code>true/false</code></p><p>ç®—æœ¯è¿ç®—ï¼š<code>+, -, *, /, //, %, **</code></p><p>æ¯”è¾ƒæ“ä½œï¼š<code>==, !=, &gt;, &gt;=, &lt;, &lt;=</code></p><p>é€»è¾‘è¿ç®—ï¼š<code>and, or, not</code></p><p>æµè¡¨è¾¾å¼ï¼š<code>For If When</code></p><h1 id="templates"><a href="#templates" class="headerlink" title="templates"></a>templates</h1><p>templatesåŠŸèƒ½ï¼šæ ¹æ®æ¨¡å—æ–‡ä»¶åŠ¨æ€ç”Ÿæˆå¯¹åº”çš„é…ç½®æ–‡ä»¶</p><p>templatesæ–‡ä»¶å¿…é¡»å­˜æ”¾äºtemplatesç›®å½•ä¸‹ï¼Œä¸”å‘½åä¸º.j2ç»“å°¾</p><p>yaml/ymlæ–‡ä»¶éœ€å’Œtemplatesç›®å½•å¹³çº§ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">.&#x2F;|--j2test.yaml|--templates       |--nginx.conf.j2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Templatesç¤ºä¾‹"><a href="#Templatesç¤ºä¾‹" class="headerlink" title="Templatesç¤ºä¾‹"></a>Templatesç¤ºä¾‹</h2><p>ç¤ºä¾‹ï¼šåˆ©ç”¨templatesåŒæ­¥nginxé…ç½®æ–‡ä»¶å‡†å¤‡templates/nginx.conf.j2æ–‡ä»¶</p><p>åœ¨ansibleç›®å½•æ–°å»ºtemplatesæ–‡ä»¶å¤¹ï¼Œå¹¶å°† <code>/etc/nginx/nginx.conf</code> å¤åˆ¶åˆ° <code>templates/nginx.conf.j2</code></p><p><code>cp /etc/nginx/nginx.conf templates/nginx.conf.j2</code> </p><p>ç¼–è¾‘<code>j2test.yaml</code>æ–‡ä»¶</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=nginx    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy templates      <span class="token key atrule">template</span><span class="token punctuation">:</span> src=nginx.conf.j2 dest=/etc/nginx/nginx.conf<span class="token comment">#      notify: restart service</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start service      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=nginx state=started enabled=yes<span class="token comment">#  handlers:</span><span class="token comment">#    - name: restart service</span><span class="token comment">#      service: name=nginx state=restarted</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ£€æŸ¥æ‰§è¡Œplaybookæ–‡ä»¶ï¼Œæ£€æŸ¥nginxæ˜¯å¦è¿è¡Œ</p><p><code>ansible-playbook -C j2test.yaml</code></p><p><code>ansible-playbook j2test.yaml</code></p><p><code>ansible web -m shell -a &quot;ps aux|grep nginx&quot;</code></p><p>ä¿®æ”¹ <code>templates/nginx.conf.j2</code> æ–‡ä»¶ä¸º <code>worker_processes &#123;&#123; ansible_processor_vcpus*2 &#125;&#125;;</code> ï¼Œå°†workçº¿ç¨‹ä¿®æ”¹ä¸ºCPUæ ¸å¿ƒæ•°çš„2å€ã€‚åŒæ—¶å°†<code>j2test.yaml</code>æ–‡ä»¶ä¸­çš„notify-handlersæ³¨é‡Šè§£å¼€ã€‚</p><p>è¿è¡Œplaybookï¼ŒæŸ¥çœ‹workçº¿ç¨‹æ˜¯å¦å¢åŠ 2å€ã€‚</p><p><code>ansible-playbook j2test.yaml</code></p><p><code>ansible web -m shell -a &quot;ps aux|grep nginx&quot;</code></p><h1 id="when"><a href="#when" class="headerlink" title="when"></a>when</h1><p>æ¡ä»¶æµ‹è¯•ï¼šå¦‚æœéœ€è¦æ ¹æ®å˜é‡ã€factsæˆ–æ­¤å‰ä»»åŠ¡çš„æ‰§è¡Œç»“æœæ¥åšä¸ºæŸtaskæ‰§è¡Œä¸å¦çš„å‰ææ—¶è¦ç”¨åˆ°æ¡ä»¶æµ‹è¯•ï¼Œé€šè¿‡whenè¯­å¥å®ç°ï¼Œåœ¨taskä¸­ä½¿ç”¨ï¼Œjinja2çš„è¯­æ³•æ ¼å¼</p><h2 id="whenè¯­å¥"><a href="#whenè¯­å¥" class="headerlink" title="whenè¯­å¥"></a>whenè¯­å¥</h2><p>åœ¨taskåæ·»åŠ whenå­å¥å³å¯ä½¿ç”¨æ¡ä»¶æµ‹è¯•ï¼›whenè¯­å¥æ”¯æŒJinja2è¡¨è¾¾å¼è¯­æ³•</p><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">tasks</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"shutdown RedHat flavored systems"</span>    <span class="token key atrule">command</span><span class="token punctuation">:</span> /sbin/shutdown <span class="token punctuation">-</span>h now    <span class="token key atrule">when</span><span class="token punctuation">:</span> ansible_os_family == "RedHat"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ansibleå˜é‡çš„ä¼˜å…ˆçº§ <code>-e &#123;&#123; var &#125;&#125;</code> &gt; <code>playbook</code> &gt; <code>hosts &#123;&#123; host_vars &#125;&#125;</code> &gt; <code>hosts &#123;&#123; group_var &#125;&#125;</code></p><p><code>ansible_distribution_version</code>   ç‰ˆæœ¬å·</p><p><code>ansible_distribution_major_version</code>   å¤§ç‰ˆæœ¬å·</p><p><code>ansible_processor_vcpus</code>   æœ¬æœºçš„cpuæ ¸å¿ƒæ•°</p><p>ç¤ºä¾‹ï¼šwhenæ¡ä»¶åˆ¤æ–­</p><p> <code>cat j2test.yaml</code> </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web2  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package      <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=nginx    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy templates for centos8      <span class="token key atrule">template</span><span class="token punctuation">:</span> src=nginx.conf8.j2 dest=/etc/nginx/nginx.conf      <span class="token key atrule">when</span><span class="token punctuation">:</span> ansible_distribution_major_version == "8"      <span class="token key atrule">notify</span><span class="token punctuation">:</span> restart service    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy templates for centos7      <span class="token key atrule">template</span><span class="token punctuation">:</span> src=nginx.conf7.j2 dest=/etc/nginx/nginx.conf      <span class="token key atrule">when</span><span class="token punctuation">:</span> ansible_distribution_major_version == "7"      <span class="token key atrule">notify</span><span class="token punctuation">:</span> restart service    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start service      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=nginx state=started enabled=yes  <span class="token key atrule">handlers</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> restart service      <span class="token key atrule">service</span><span class="token punctuation">:</span> name=nginx state=restarted<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>cat templates/nginx.conf7.j2 | grep -Ev &quot;#|^$&quot;</code></p><pre class="line-numbers language-jinja2" data-language="jinja2"><code class="language-jinja2">user daemon;worker_processes &#123;&#123; ansible_processor_vcpus+4 &#125;&#125;;error_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log;pid &#x2F;run&#x2F;nginx.pid;include &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;modules&#x2F;*.conf;events &#123;    worker_connections 1024;&#125;http &#123;    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;    access_log  &#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log  main;    sendfile            on;    tcp_nopush          on;    tcp_nodelay         on;    keepalive_timeout   65;    types_hash_max_size 2048;    include             &#x2F;etc&#x2F;nginx&#x2F;mime.types;    default_type        application&#x2F;octet-stream;    include &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;*.conf;    server &#123;        listen       &#123;&#123; http_port &#125;&#125; default_server;        listen       [::]:&#123;&#123; http_port &#125;&#125; default_server;        server_name  _;        root         &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;        include &#x2F;etc&#x2F;nginx&#x2F;default.d&#x2F;*.conf;        location &#x2F; &#123;        &#125;        error_page 404 &#x2F;404.html;            location &#x3D; &#x2F;40x.html &#123;        &#125;        error_page 500 502 503 504 &#x2F;50x.html;            location &#x3D; &#x2F;50x.html &#123;        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>cat templates/nginx.conf8.j2 | grep -Ev &quot;#|^$&quot;</code></p><pre class="line-numbers language-jinja2" data-language="jinja2"><code class="language-jinja2">user bin;worker_processes &#123;&#123; ansible_processor_vcpus*2 &#125;&#125;;error_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log;pid &#x2F;run&#x2F;nginx.pid;include &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;modules&#x2F;*.conf;events &#123;    worker_connections 1024;&#125;http &#123;    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;    access_log  &#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log  main;    sendfile            on;    tcp_nopush          on;    tcp_nodelay         on;    keepalive_timeout   65;    types_hash_max_size 2048;    include             &#x2F;etc&#x2F;nginx&#x2F;mime.types;    default_type        application&#x2F;octet-stream;    include &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;*.conf;    server &#123;        listen       &#123;&#123; http_port &#125;&#125; default_server;        listen       [::]:&#123;&#123; http_port &#125;&#125; default_server;        server_name  _;        root         &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;        include &#x2F;etc&#x2F;nginx&#x2F;default.d&#x2F;*.conf;        location &#x2F; &#123;        &#125;        error_page 404 &#x2F;404.html;            location &#x3D; &#x2F;40x.html &#123;        &#125;        error_page 500 502 503 504 &#x2F;50x.html;            location &#x3D; &#x2F;50x.html &#123;        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¿­ä»£ï¼šwith-items"><a href="#è¿­ä»£ï¼šwith-items" class="headerlink" title="è¿­ä»£ï¼šwith_items"></a>è¿­ä»£ï¼šwith_items</h2><p>è¿­ä»£ï¼šå½“æœ‰éœ€è¦é‡å¤æ€§æ‰§è¡Œçš„ä»»åŠ¡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¿­ä»£æœºåˆ¶&gt;å¯¹è¿­ä»£é¡¹çš„å¼•ç”¨ï¼Œå›ºå®šå˜é‡åä¸ºâ€itemâ€</p><p>è¦åœ¨taskä¸­ä½¿ç”¨with_itemsç»™å®šè¦è¿­ä»£çš„å…ƒç´ åˆ—è¡¨</p><blockquote><p>åˆ—è¡¨æ ¼å¼ï¼š</p><blockquote><p>å­—ç¬¦<br>ä¸²å­—å…¸</p></blockquote></blockquote><p>ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> add several users  <span class="token key atrule">user</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> item <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> state=present groups=wheel  <span class="token key atrule">with_items</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> testuser1    <span class="token punctuation">-</span> testuser2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢è¯­å¥çš„åŠŸèƒ½ç­‰åŒäºä¸‹é¢çš„è¯­å¥ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> add user testuser1  <span class="token key atrule">user</span><span class="token punctuation">:</span> name=testuser1 state=present groups=wheel<span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> add user testuser2  <span class="token key atrule">user</span><span class="token punctuation">:</span> name=testuser2 state=present groups=wheel<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ç¤ºä¾‹ï¼šè¿­ä»£åµŒå¥—å­å˜é‡</p><p><code>cat user2.yaml</code> </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web2  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create some groups      <span class="token key atrule">group</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> item <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>      <span class="token key atrule">when</span><span class="token punctuation">:</span> ansible_distribution_major_version == "7"      <span class="token key atrule">with_items</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> g1        <span class="token punctuation">-</span> g2        <span class="token punctuation">-</span> g3    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create some users      <span class="token key atrule">user</span><span class="token punctuation">:</span> name=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> item.name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> group=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> item.group <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>      <span class="token key atrule">with_items</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token punctuation">&#123;</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'user1'</span><span class="token punctuation">,</span> <span class="token key atrule">group</span><span class="token punctuation">:</span> <span class="token string">'g1'</span> <span class="token punctuation">&#125;</span>        <span class="token punctuation">-</span> <span class="token punctuation">&#123;</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'user2'</span><span class="token punctuation">,</span> <span class="token key atrule">group</span><span class="token punctuation">:</span> <span class="token string">'g2'</span> <span class="token punctuation">&#125;</span>        <span class="token punctuation">-</span> <span class="token punctuation">&#123;</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">'user3'</span><span class="token punctuation">,</span> <span class="token key atrule">group</span><span class="token punctuation">:</span> <span class="token string">'g3'</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="Playbookä¸­template-for-if"><a href="#Playbookä¸­template-for-if" class="headerlink" title="Playbookä¸­template for if"></a>Playbookä¸­template for if</h1><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">&#123;</span>% for vhost in nginx_vhosts %<span class="token punctuation">&#125;</span>server <span class="token punctuation">&#123;</span>listen <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> vhost.listen <span class="token punctuation">|</span> default('80 default_server') <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>;<span class="token punctuation">&#123;</span>% if vhost.server_name is defined %<span class="token punctuation">&#125;</span>server_name <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> vhost.server_name <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>;<span class="token punctuation">&#123;</span>% endif %<span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span>% if vhost.root is defined %<span class="token punctuation">&#125;</span>root <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> vhost.root <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>;<span class="token punctuation">&#123;</span>% endif %<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>ç¤ºä¾‹</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml">// temnginx.yml     // templates/nginx.conf.j2<span class="token punctuation">---</span>                 <span class="token punctuation">&#123;</span>% for vhost in nginx_vhosts %<span class="token punctuation">&#125;</span>                    server <span class="token punctuation">&#123;</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> testweb    listen <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> vhost.listen <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root   <span class="token punctuation">&#125;</span><span class="token key atrule">vars</span><span class="token punctuation">:</span>               <span class="token punctuation">&#123;</span>% endfor %<span class="token punctuation">&#125;</span>  <span class="token key atrule">nginx_vhosts</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">listen</span><span class="token punctuation">:</span> 8080  // ç”Ÿæˆçš„ç»“æœ                    server <span class="token punctuation">&#123;</span>                      listen 8080                    <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¤ºä¾‹ï¼š</p><p><code>cat for.yaml</code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">vars</span><span class="token punctuation">:</span>    <span class="token key atrule">ports</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token number">81</span>      <span class="token punctuation">-</span> <span class="token number">82</span>      <span class="token punctuation">-</span> <span class="token number">83</span>        <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy conf      <span class="token key atrule">template</span><span class="token punctuation">:</span> src=for1.conf.j2 dest=/data/for1.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>cat templates/for1.conf.j2</code></p><pre class="line-numbers language-jinja2" data-language="jinja2"><code class="language-jinja2">&#123;% for port in ports %&#125;server&#123;    listen &#123;&#123; port &#125;&#125;&#125;&#123;% endfor %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ansible-playbook for.yaml</code></p><p><code>ansible web -m shell -a &#39;cat /data/for1.conf&#39;</code></p><p>é”®å€¼å¯¹çš„æ–¹å¼ç»„æˆåˆ—è¡¨</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">vars</span><span class="token punctuation">:</span>    <span class="token key atrule">ports</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">listen_port</span><span class="token punctuation">:</span> <span class="token number">81</span>      <span class="token punctuation">-</span> <span class="token key atrule">listen_port</span><span class="token punctuation">:</span> <span class="token number">82</span>      <span class="token punctuation">-</span> <span class="token key atrule">listen_port</span><span class="token punctuation">:</span> <span class="token number">83</span>        <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy conf      <span class="token key atrule">template</span><span class="token punctuation">:</span> src=for1.conf.j2 dest=/data/for1.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-jinja2" data-language="jinja2"><code class="language-jinja2">&#123;% for port in ports %&#125;server&#123;    listen &#123;&#123; port.listen_port &#125;&#125;&#125;&#123;% endfor %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ€ç»ˆçš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼ŒéªŒè¯æ—¶è®°å¾—åˆ é™¤åŸæ¥è¿œç¨‹ä¸»æœºç”Ÿæˆçš„æ–‡ä»¶ã€‚</p><p>åœ¨åˆ—è¡¨ä¸­å®šä¹‰å¦ä¸€ä¸ªåˆ—è¡¨ï¼Œè€Œå¦ä¸€ä¸ªåˆ—è¡¨å®šä¹‰äº†å¾ˆå¤šé”®å€¼å¯¹ï¼š</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">vars</span><span class="token punctuation">:</span>    <span class="token key atrule">ports</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">web1</span><span class="token punctuation">:</span>        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">81</span>        <span class="token key atrule">name</span><span class="token punctuation">:</span> web1.node.com        <span class="token key atrule">rootdir</span><span class="token punctuation">:</span> /data/website1      <span class="token punctuation">-</span> <span class="token key atrule">web2</span><span class="token punctuation">:</span>        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">82</span>        <span class="token key atrule">name</span><span class="token punctuation">:</span> web2.node.com        <span class="token key atrule">rootdir</span><span class="token punctuation">:</span> /data/website2      <span class="token punctuation">-</span> <span class="token key atrule">web3</span><span class="token punctuation">:</span>        <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">83</span>        <span class="token key atrule">name</span><span class="token punctuation">:</span> web3.node.com        <span class="token key atrule">rootdir</span><span class="token punctuation">:</span> /data/website3        <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy conf      <span class="token key atrule">template</span><span class="token punctuation">:</span> src=for1.conf.j2 dest=/data/for1.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-jinja2" data-language="jinja2"><code class="language-jinja2">&#123;% for p in ports %&#125;server&#123;    listen &#123;&#123; p.port &#125;&#125;&lt;!-- &#123;% if p.name is defined %&#125; --&gt;    servername &#123;&#123; p.name &#125;&#125;&lt;!-- &#123;% endif %&#125; --&gt;    documentroot &#123;&#123; p.rootdir &#125;&#125;&#125;&#123;% endfor %&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>IFåˆ¤æ–­ï¼Œå°†ä¸Šé¢çš„j2æ–‡ä»¶æ³¨é‡Šè§£å¼€ï¼Œå¹¶æ³¨é‡Šyamlæ–‡ä»¶çš„web1å’Œweb3çš„nameé…ç½®ï¼Œæ‰§è¡Œç»“æœå¯ä»¥çœ‹åˆ°åªæœ‰ç¬¬äºŒä¸ªæœ‰servernameï¼Œå…¶å®ƒä¸¤ä¸ªæ²¡æœ‰ã€‚å¦‚æœåœ¨j2æ–‡ä»¶ä¸­ï¼Œä¸åŠ ifåˆ¤æ–­ï¼Œæ‰§è¡Œansible-playbookä¼šæŠ¥é”™ã€‚</p><h1 id="roles"><a href="#roles" class="headerlink" title="roles"></a>roles</h1><p>ansilbeè‡ª1.2ç‰ˆæœ¬å¼•å…¥çš„æ–°ç‰¹æ€§ï¼Œç”¨äºå±‚æ¬¡æ€§ã€ç»“æ„åŒ–åœ°ç»„ç»‡playbookã€‚rolesèƒ½å¤Ÿæ ¹æ®å±‚æ¬¡å‹ç»“æ„è‡ªåŠ¨è£…è½½å˜é‡æ–‡ä»¶ã€tasksä»¥åŠhandlersç­‰ã€‚è¦ä½¿ç”¨rolesåªéœ€è¦åœ¨playbookä¸­ä½¿ç”¨includeæŒ‡ä»¤å³å¯ã€‚ç®€å•æ¥è®²ï¼Œroleså°±æ˜¯é€šè¿‡åˆ†åˆ«å°†å˜é‡ã€æ–‡ä»¶ã€ä»»åŠ¡ã€æ¨¡æ¿åŠå¤„ç†å™¨æ”¾ç½®äºå•ç‹¬çš„ç›®å½•ä¸­ï¼Œå¹¶å¯ä»¥ä¾¿æ·åœ°includeå®ƒä»¬çš„ä¸€ç§æœºåˆ¶ã€‚è§’è‰²ä¸€èˆ¬ç”¨äºåŸºäºä¸»æœºæ„å»ºæœåŠ¡çš„åœºæ™¯ä¸­ï¼Œä½†ä¹Ÿå¯ä»¥æ˜¯ç”¨äºæ„å»ºå®ˆæŠ¤è¿›ç¨‹ç­‰åœºæ™¯ä¸­</p><p>å¤æ‚åœºæ™¯ï¼šå»ºè®®ä½¿ç”¨rolesï¼Œä»£ç å¤ç”¨åº¦é«˜</p><blockquote><p>å˜æ›´æŒ‡å®šä¸»æœºæˆ–ä¸»æœºç»„<br>å¦‚å‘½åä¸è§„èŒƒç»´æŠ¤å’Œä¼ æ‰¿æˆæœ¬å¤§<br>æŸäº›åŠŸèƒ½éœ€å¤šä¸ªPlaybookï¼Œé€šè¿‡includeså³å¯å®ç°</p></blockquote><p>è§’è‰²(roles)ï¼šè§’è‰²é›†åˆ</p><pre class="line-numbers language-none"><code class="language-none">roles&#x2F;  mysql&#x2F;  httpd&#x2F;  nginx&#x2F;  memcached&#x2F;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://cdn.jsdelivr.net/gh/wujiops/jpeg/ansible/1.jpg"></p><h2 id="rolesç›®å½•ç»“æ„"><a href="#rolesç›®å½•ç»“æ„" class="headerlink" title="rolesç›®å½•ç»“æ„"></a>rolesç›®å½•ç»“æ„</h2><p>æ¯ä¸ªè§’è‰²ï¼Œä»¥ç‰¹å®šçš„å±‚çº§ç›®å½•ç»“æ„è¿›è¡Œç»„ç»‡</p><p>rolesç›®å½•ç»“æ„ï¼š</p><pre class="line-numbers language-none"><code class="language-none">playbook.ymlroles&#x2F;  project&#x2F;    tasks&#x2F;    files&#x2F;    vars&#x2F;       ä¸å¸¸ç”¨    default&#x2F;    ä¸å¸¸ç”¨    templates&#x2F;    handlers&#x2F;    meta&#x2F;       ä¸å¸¸ç”¨<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Roleså„ç›®å½•ä½œç”¨"><a href="#Roleså„ç›®å½•ä½œç”¨" class="headerlink" title="Roleså„ç›®å½•ä½œç”¨"></a>Roleså„ç›®å½•ä½œç”¨</h2><p><code>/roles/project/</code>ï¼šé¡¹ç›®åç§°ï¼ˆ<code>/roles/nginx/</code>ã€<code>/roles/httpd/</code>ç­‰ï¼‰ï¼Œæœ‰ä»¥ä¸‹å­ç›®å½•</p><p><code>files/</code>ï¼šå­˜æ”¾ç”±copyæˆ–scriptæ¨¡å—ç­‰è°ƒç”¨çš„æ–‡ä»¶</p><p><code>templates/</code>ï¼štemplateæ¨¡å—æŸ¥æ‰¾æ‰€éœ€è¦æ¨¡æ¿æ–‡ä»¶çš„ç›®å½•</p><p><code>tasks/</code>ï¼šå®šä¹‰taskï¼Œroleçš„åŸºæœ¬å…ƒç´ ï¼Œè‡³å°‘åº”è¯¥åŒ…å«ä¸€ä¸ªåä¸ºmain.ymlçš„æ–‡ä»¶ï¼›å…¶å®ƒçš„æ–‡ä»¶éœ€è¦åœ¨æ­¤æ–‡ä»¶ä¸­é€šè¿‡includeè¿›è¡ŒåŒ…å«</p><p><code>handlers/</code>ï¼šè‡³å°‘åº”è¯¥åŒ…å«ä¸€ä¸ªåä¸ºmain.ymlçš„æ–‡ä»¶ï¼›å…¶å®ƒçš„æ–‡ä»¶éœ€è¦åœ¨æ­¤æ–‡ä»¶ä¸­é€šè¿‡includeè¿›è¡ŒåŒ…å«</p><p><code>vars/</code>ï¼šå®šä¹‰å˜é‡ï¼Œè‡³å°‘åº”è¯¥åŒ…å«ä¸€ä¸ªåä¸ºmain.ymlçš„æ–‡ä»¶ï¼›å…¶å®ƒçš„æ–‡ä»¶éœ€è¦åœ¨æ­¤æ–‡ä»¶ä¸­é€šè¿‡includeè¿›è¡ŒåŒ…å«</p><p><code>meta/</code>ï¼šå®šä¹‰å½“å‰è§’è‰²çš„ç‰¹æ®Šè®¾å®šåŠå…¶ä¾èµ–å…³ç³»ï¼Œè‡³å°‘åº”è¯¥åŒ…å«ä¸€ä¸ªåä¸ºmain.ymlçš„æ–‡ä»¶ï¼Œå…¶å®ƒæ–‡ä»¶éœ€åœ¨æ­¤æ–‡ä»¶ä¸­é€šè¿‡includeè¿›è¡ŒåŒ…å«</p><p><code>default/</code>ï¼šè®¾å®šé»˜è®¤å˜é‡æ—¶ä½¿ç”¨æ­¤ç›®å½•ä¸­çš„main.ymlæ–‡ä»¶</p><h2 id="åˆ›å»ºrole"><a href="#åˆ›å»ºrole" class="headerlink" title="åˆ›å»ºrole"></a>åˆ›å»ºrole</h2><p>åˆ›å»ºroleçš„æ­¥éª¤</p><p>(1) åˆ›å»ºä»¥roleså‘½åçš„ç›®å½•</p><p>(2) åœ¨rolesç›®å½•ä¸­åˆ†åˆ«åˆ›å»ºä»¥å„è§’è‰²åç§°å‘½åçš„ç›®å½•ï¼Œå¦‚webserversç­‰</p><p>(3) åœ¨æ¯ä¸ªè§’è‰²å‘½åçš„ç›®å½•ä¸­åˆ†åˆ«åˆ›å»ºfilesã€handlersã€metaã€tasksã€templateså’Œvarsç›®å½•ï¼›ç”¨ä¸åˆ°çš„ç›®å½•å¯ä»¥åˆ›å»ºä¸ºç©ºç›®å½•ï¼Œä¹Ÿå¯ä»¥ä¸åˆ›å»º</p><p>(4) åœ¨playbookæ–‡ä»¶ä¸­ï¼Œè°ƒç”¨å„è§’è‰²</p><p>é’ˆå¯¹å¤§å‹é¡¹ç›®ä½¿ç”¨rolesè¿›è¡Œç¼–æ’</p><p>ç®€å•ç¤ºä¾‹ï¼š</p><pre class="line-numbers language-none"><code class="language-none">[root@node ansible]# tree .â”œâ”€â”€ nginx_role.yamlâ””â”€â”€ roles    â””â”€â”€ nginx        â”œâ”€â”€ tasks        â”‚Â Â  â”œâ”€â”€ group.yaml        â”‚Â Â  â”œâ”€â”€ main.yaml        â”‚Â Â  â”œâ”€â”€ restart.yaml        â”‚Â Â  â”œâ”€â”€ start.yaml        â”‚Â Â  â”œâ”€â”€ templ.yaml        â”‚Â Â  â”œâ”€â”€ user.yaml        â”‚Â Â  â””â”€â”€ yum.yaml        â””â”€â”€ templates            â””â”€â”€ nginx.conf.j2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>playbookè°ƒç”¨è§’è‰²ï¼Œæ–‡ä»¶å†…å®¹ï¼š</p><p><code>nginx_role.yaml</code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web2  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">roles</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> nginx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>group.yaml</code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create group  <span class="token key atrule">group</span><span class="token punctuation">:</span> name=nginx gid=80<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>user.yaml</code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create user   <span class="token key atrule">user</span><span class="token punctuation">:</span> name=nginx uid=80 group=nginx system=yes shell=/sbin/nologin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>yum.yaml</code> </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> install package  <span class="token key atrule">yum</span><span class="token punctuation">:</span> name=nginx <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>templ.yaml </code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy conf  <span class="token key atrule">template</span><span class="token punctuation">:</span> src=nginx.conf.j2 dest=/etc/nginx/nginx.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>start.yaml </code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> start nginx  <span class="token key atrule">service</span><span class="token punctuation">:</span> name=nginx state=started enabled=yes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>restart.yaml</code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> restart nginx  <span class="token key atrule">service</span><span class="token punctuation">:</span> name=nginx state=restarted<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>main.yaml</code> </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> group.yaml<span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> user.yaml<span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> yum.yaml<span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> templ.yaml<span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> start.yaml<span class="token comment">#- include: restart.yaml</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>cat templates/nginx.conf.j2 | grep -Ev &quot;^[[:space:]]*#|^$&quot;</code></p><pre class="line-numbers language-jinja2" data-language="jinja2"><code class="language-jinja2">user nginx;worker_processes &#123;&#123; ansible_processor_vcpus+2 &#125;&#125;;error_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log;pid &#x2F;run&#x2F;nginx.pid;include &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;modules&#x2F;*.conf;events &#123;    worker_connections 1024;&#125;http &#123;    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;;    access_log  &#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log  main;    sendfile            on;    tcp_nopush          on;    tcp_nodelay         on;    keepalive_timeout   65;    types_hash_max_size 2048;    include             &#x2F;etc&#x2F;nginx&#x2F;mime.types;    default_type        application&#x2F;octet-stream;    include &#x2F;etc&#x2F;nginx&#x2F;conf.d&#x2F;*.conf;    server &#123;        listen       80 default_server;        listen       [::]:80 default_server;        server_name  _;        root         &#x2F;usr&#x2F;share&#x2F;nginx&#x2F;html;        include &#x2F;etc&#x2F;nginx&#x2F;default.d&#x2F;*.conf;        location &#x2F; &#123;        &#125;        error_page 404 &#x2F;404.html;            location &#x3D; &#x2F;40x.html &#123;        &#125;        error_page 500 502 503 504 &#x2F;50x.html;            location &#x3D; &#x2F;50x.html &#123;        &#125;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>cat /etc/ansible/hosts | grep -Ev &quot;^[[:space:]]*#|^$&quot;</code></p><pre class="line-numbers language-none"><code class="language-none">[alls]192.168.1.2 hostnm&#x3D;node.1.2192.168.1.3 hostnm&#x3D;node.1.3192.168.1.4 hostnm&#x3D;node.1.4192.168.1.5 hostnm&#x3D;node.1.5192.168.1.6 hostnm&#x3D;node.1.6192.168.1.7 hostnm&#x3D;node.1.7[local]192.168.1.2[app]192.168.1.[3:6][web]192.168.1.5 http_port&#x3D;5555192.168.1.6 http_port&#x3D;6666[web2]192.168.1.7 http_port&#x3D;7777192.168.1.6 http_port&#x3D;6666<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œplaybookè„šæœ¬ï¼Œå¹¶éªŒè¯ï¼š</p><p><code>ansible-playbook nginx_role.yaml</code></p><p><code>ansible web2 -m shell -a &#39;ss -anptl | grep nginx&#39;</code></p><p><code>ansible web2 -m shell -a &#39;ps aux | grep nginx&#39;</code></p><p><code>ansible web2 -m shell -a &#39;getent passwd | grep nginx&#39;</code></p><p><code>ansible web2 -m shell -a &#39;getent group | grep nginx&#39;</code></p><p>ç¤ºä¾‹2ï¼š</p><p>åŒæ—¶æ‰§è¡Œå¤šä¸ªroles</p><p><code>http_role.yaml</code> </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web2  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">roles</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> httpd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>cat roles/httpd/files/httpd.conf | grep -Ev &quot;^$|^[[:space:]]*#&quot;</code></p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">ServerRoot &quot;&#x2F;etc&#x2F;httpd&quot;Listen 80Include conf.modules.d&#x2F;*.confUser apacheGroup apacheServerAdmin root@localhost&lt;Directory &#x2F;&gt;    AllowOverride none    Require all denied&lt;&#x2F;Directory&gt;DocumentRoot &quot;&#x2F;var&#x2F;www&#x2F;html&quot;&lt;Directory &quot;&#x2F;var&#x2F;www&quot;&gt;    AllowOverride None    Require all granted&lt;&#x2F;Directory&gt;&lt;Directory &quot;&#x2F;var&#x2F;www&#x2F;html&quot;&gt;    Options Indexes FollowSymLinks    AllowOverride None    Require all granted&lt;&#x2F;Directory&gt;&lt;IfModule dir_module&gt;    DirectoryIndex index.html&lt;&#x2F;IfModule&gt;&lt;Files &quot;.ht*&quot;&gt;    Require all denied&lt;&#x2F;Files&gt;ErrorLog &quot;logs&#x2F;error_log&quot;LogLevel warn&lt;IfModule log_config_module&gt;    LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%&#123;Referer&#125;i\&quot; \&quot;%&#123;User-Agent&#125;i\&quot;&quot; combined    LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b&quot; common    &lt;IfModule logio_module&gt;      LogFormat &quot;%h %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%&#123;Referer&#125;i\&quot; \&quot;%&#123;User-Agent&#125;i\&quot; %I %O&quot; combinedio    &lt;&#x2F;IfModule&gt;    CustomLog &quot;logs&#x2F;access_log&quot; combined&lt;&#x2F;IfModule&gt;&lt;IfModule alias_module&gt;    ScriptAlias &#x2F;cgi-bin&#x2F; &quot;&#x2F;var&#x2F;www&#x2F;cgi-bin&#x2F;&quot;&lt;&#x2F;IfModule&gt;&lt;Directory &quot;&#x2F;var&#x2F;www&#x2F;cgi-bin&quot;&gt;    AllowOverride None    Options None    Require all granted&lt;&#x2F;Directory&gt;&lt;IfModule mime_module&gt;    TypesConfig &#x2F;etc&#x2F;mime.types    AddType application&#x2F;x-compress .Z    AddType application&#x2F;x-gzip .gz .tgz    AddType text&#x2F;html .shtml    AddOutputFilter INCLUDES .shtml&lt;&#x2F;IfModule&gt;AddDefaultCharset UTF-8&lt;IfModule mime_magic_module&gt;    MIMEMagicFile conf&#x2F;magic&lt;&#x2F;IfModule&gt;EnableSendfile onIncludeOptional conf.d&#x2F;*.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>cat roles/httpd/tasks/copy.yaml</code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy file  <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=httpd.conf dest=/data owner=apache<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>cat roles/httpd/tasks/main.yaml</code> </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> user.yaml<span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> copy.yaml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>cat roles/httpd/tasks/user.yaml</code> </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create user   <span class="token key atrule">user</span><span class="token punctuation">:</span> name=apache system=yes shell=/sbin/nologin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>cat some_reole.yaml</code> </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web2  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">roles</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> httpd    <span class="token punctuation">-</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> nginx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éªŒè¯(æ¸…é™¤åŸæ¥playbookåˆ›å»ºçš„æ–‡ä»¶ğŸ˜Š)ï¼š</p><p><code>ansible-playbook some_reole.yaml</code></p><p>ç¤ºä¾‹3ï¼š</p><p>ä¸€ä¸ªroleè°ƒç”¨å¦ä¸€ä¸ªroleä¸­çš„tasksï¼Œnginxè°ƒç”¨httpdçš„copy.yaml</p><ol><li>ä¿®æ”¹nginxçš„main.yamlï¼Œå¢åŠ httpdçš„copy.yamlæ–‡ä»¶</li></ol><p><code>cat roles/nginx/tasks/main.yaml</code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> group.yaml<span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> user.yaml<span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> yum.yaml<span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> templ.yaml<span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> start.yaml<span class="token punctuation">-</span> <span class="token key atrule">include</span><span class="token punctuation">:</span> roles/httpd/tasks/copy.yaml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>å¦‚æœæ˜¯é€šç”¨çš„yamlæ–‡ä»¶ï¼Œå…¬å…±çš„yamlæ–‡ä»¶ä¸­çš„ä¸€äº›è·¯å¾„è¦å†™ç»å¯¹è·¯å¾„ï¼Œæ‰€ä»¥ä¿®æ”¹httpdçš„copy.yamlæ–‡ä»¶</li></ol><p><code>cat roles/httpd/tasks/copy.yaml</code> </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> copy file  <span class="token key atrule">copy</span><span class="token punctuation">:</span> src=/etc/httpd/conf/httpd.conf dest=/data owner=apache<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ç¤ºä¾‹4ï¼š</p><p>åŠ æ ‡ç­¾ï¼ˆæ ‡ç­¾å¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼‰ï¼š</p><p><code>cp -r roles/nginx/ roles/app</code></p><p><code>cat some_reole.yaml</code> </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web2  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">roles</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token punctuation">&#123;</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> httpd<span class="token punctuation">,</span> <span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'web'</span><span class="token punctuation">,</span><span class="token string">'httpd'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span>    <span class="token punctuation">-</span> <span class="token punctuation">&#123;</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> nginx<span class="token punctuation">,</span> <span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'web'</span><span class="token punctuation">,</span><span class="token string">'nginx'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span>    <span class="token punctuation">-</span> <span class="token punctuation">&#123;</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> app<span class="token punctuation">,</span> <span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token string">"app"</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éªŒè¯ï¼š</p><p><code>ansible-playbook -t web some_reole.yaml</code></p><p><code>ansible-playbook -t httpd some_reole.yaml</code></p><p><code>ansible-playbook -t app some_reole.yaml</code></p><p>ç¤ºä¾‹5ï¼š</p><p>whenè¯­å¥ï¼š</p><p><code>cat some_reole.yaml</code> </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">hosts</span><span class="token punctuation">:</span> web2  <span class="token key atrule">remote_user</span><span class="token punctuation">:</span> root  <span class="token key atrule">roles</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token punctuation">&#123;</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> httpd<span class="token punctuation">,</span> <span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'web'</span><span class="token punctuation">,</span><span class="token string">'httpd'</span><span class="token punctuation">]</span> <span class="token punctuation">&#125;</span>    <span class="token punctuation">-</span> <span class="token punctuation">&#123;</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> nginx<span class="token punctuation">,</span> <span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'web'</span><span class="token punctuation">,</span><span class="token string">'nginx'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token key atrule">when</span><span class="token punctuation">:</span> ansible_distribution_major_version == "7" <span class="token punctuation">&#125;</span>    <span class="token punctuation">-</span> <span class="token punctuation">&#123;</span> <span class="token key atrule">role</span><span class="token punctuation">:</span> app<span class="token punctuation">,</span> <span class="token key atrule">tags</span><span class="token punctuation">:</span> <span class="token string">"app"</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>ansible-playbook some_reole.yaml</code></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Linux Create User and Upload User Public keys  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> test  <span class="token comment">#remote_user: xxxx</span>  <span class="token comment">#sudo: yes</span>  <span class="token key atrule">vars</span><span class="token punctuation">:</span>    <span class="token key atrule">user_1</span><span class="token punctuation">:</span> xiaoxiaoleo  <span class="token key atrule">tasks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Make sure we have a 'wheel' group      <span class="token key atrule">group</span><span class="token punctuation">:</span>        <span class="token key atrule">name</span><span class="token punctuation">:</span> wheel        <span class="token key atrule">state</span><span class="token punctuation">:</span> present    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Allow 'wheel' group to have passwordless sudo      <span class="token key atrule">lineinfile</span><span class="token punctuation">:</span>        <span class="token key atrule">dest</span><span class="token punctuation">:</span> /etc/sudoers        <span class="token key atrule">state</span><span class="token punctuation">:</span> present        <span class="token key atrule">regexp</span><span class="token punctuation">:</span> <span class="token string">'^%wheel'</span>        <span class="token key atrule">line</span><span class="token punctuation">:</span> <span class="token string">'%wheel ALL=(ALL) NOPASSWD: ALL'</span>     <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Create user <span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user_1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>      <span class="token key atrule">user</span><span class="token punctuation">:</span>        <span class="token key atrule">name</span><span class="token punctuation">:</span> <span class="token string">"&#123;&#123; user_1 &#125;&#125;"</span>        <span class="token key atrule">shell</span><span class="token punctuation">:</span> /bin/bash        <span class="token key atrule">groups</span><span class="token punctuation">:</span> wheel        <span class="token key atrule">createhome</span><span class="token punctuation">:</span> yes        <span class="token key atrule">home</span><span class="token punctuation">:</span> /home/<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user_1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>        <span class="token key atrule">state</span><span class="token punctuation">:</span> present     <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create key directory      <span class="token key atrule">action</span><span class="token punctuation">:</span> file path=/home/<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user_1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>/.ssh/ state=directory  owner=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user_1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> group=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user_1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> mode=0700     <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> create key file      <span class="token key atrule">action</span><span class="token punctuation">:</span> file path=/home/<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user_1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>/.ssh/authorized_keys state=touch  owner=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user_1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> group=<span class="token punctuation">&#123;</span><span class="token punctuation">&#123;</span> user_1 <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> mode=0600            <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Set authorized key took from file      <span class="token key atrule">authorized_key</span><span class="token punctuation">:</span>        <span class="token key atrule">user</span><span class="token punctuation">:</span> <span class="token string">"&#123;&#123; user_1 &#125;&#125;"</span>        <span class="token key atrule">state</span><span class="token punctuation">:</span> present        <span class="token key atrule">key</span><span class="token punctuation">:</span> <span class="token string">"&#123;&#123; lookup('file', '/tmp/pubkey/id_rsa.pub') &#125;&#125;"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ansible </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxæ‚è®°</title>
      <link href="/posts/3c4c.html"/>
      <url>/posts/3c4c.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">du</span> -lh --max-depth<span class="token operator">=</span><span class="token number">1</span>   <span class="token comment"># å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„å„ç›®å½•å¤§å°</span><span class="token function">du</span> -sh   <span class="token comment"># å½“å‰æ–‡ä»¶å¤¹å¤§å°</span><span class="token function">df</span> -h   <span class="token comment"># å„æŒ‚è½½ç‚¹å¤§å°</span><span class="token comment"># selinuxæ²¡å…³nginxç«¯å£åªèƒ½é€‰æ‹©80 or 8080ï¼Œä¿®æ”¹å…¶ä»–ç«¯å£</span>setsebool -P httpd_can_network_connect <span class="token number">1</span>   <span class="token comment"># selinuxæ²¡å…³æ‰§è¡Œè¿™ä¸ª</span>semanage port -a -t http_port_t -p tcp <span class="token number">8090</span>   <span class="token comment"># åŠ å…¥ç«¯å£</span>semanage port -l <span class="token operator">|</span> <span class="token function">grep</span> http_port_t   <span class="token comment"># æŸ¥çœ‹è¢«selinuxæ”¾å¼€çš„httpç«¯å£</span><span class="token comment"># æ²¡æœ‰ç½‘å¡é…ç½®æ–‡ä»¶</span><span class="token function">cat</span> <span class="token operator">></span> /etc/sysconfig/network-scripts/ifcfg-eth1<span class="token assign-left variable">DEVICE</span><span class="token operator">=</span>eth1<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>dhcp<span class="token comment"># Ctrl + D ä¿å­˜é€€å‡º</span>systenctl restart network   <span class="token comment"># é‡å¯ç½‘ç»œ</span>systenctl restart NetworkManager   <span class="token comment"># é‡å¯ç½‘ç»œæœåŠ¡</span><span class="token function">usermod</span> -G wheel roxn   <span class="token comment"># å°†ç”¨æˆ·åŠ å…¥wheelç»„ï¼Œç”¨äºsudoå…å¯†æ‰§è¡Œå‘½ä»¤</span><span class="token comment"># æ ¹æ®æœåŠ¡çš„åç§°æŸ¥è¯¢ç«¯å£</span>ss -anptl<span class="token operator">|</span><span class="token function">grep</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">ps</span> aux<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">"roxn.*.jar$"</span><span class="token operator">|</span><span class="token function">awk</span> <span class="token string">'&#123;print $2&#125;'</span><span class="token variable">)</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitlabè¿ç§»</title>
      <link href="/posts/b33f.html"/>
      <url>/posts/b33f.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>æ¦‚è¿°ï¼š<code>centos-7.7.1908</code> + <code>gitlab-ce-12.6.1</code> è¿ç§»åˆ° <code>centos-8.2.2004</code> + <code>gitlab-ce-13.3.6</code><br>PSï¼šæœ‰åšå®¢æç¤ºéœ€ä»<code>gitlab-ce-12.6.1</code>å‡çº§åˆ°<code>gitlab-ce-12.10.14</code>ï¼Œå†å‡çº§åˆ°<code>gitlab-ce-13.3.6</code><br>åŸå› ä¸èƒ½å¤¸å¤§ç‰ˆæœ¬å‡çº§ï¼Œä¹‹èƒ½å…ˆå‡çº§åˆ°å½“å‰å¤§ç‰ˆæœ¬çš„æœ€åä¸€ä¸ªç‰ˆæœ¬ï¼Œä¹‹åä¾æ¬¡å‡çº§åˆ°ä¸‹ä¸€ä¸ªå¤§ç‰ˆæœ¬çš„æœ€åä¸€ä¸ªç‰ˆæœ¬ï¼Œæœ€åå‡çº§åˆ°æœ€æ–°çš„å¤§ç‰ˆæœ¬çš„latestã€‚</p><p>å¤‡ä»½çš„æ–‡ä»¶</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¤‡ä»½æ—§æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶</span>/etc/gitlab/gitlab.rb   <span class="token comment"># é…ç½®æ–‡ä»¶é¡»å¤‡ä»½</span>/var/opt/gitlab/nginx/conf   <span class="token comment"># nginx é…ç½®ç›®å½•</span>/etc/postfix/main.cf   <span class="token comment"># postfix é‚®ä»¶é…ç½®å¤‡ä»½</span>gitlab-rake gitlab:backup:create   <span class="token comment"># å¤‡ä»½ä»“åº“ã€ç”¨æˆ·ç­‰æ•°æ®taråŒ…åœ¨/var/opt/gitlab/backups</span><span class="token comment"># æ‹·è´åˆ°æ–°æœåŠ¡å™¨gitlab.bak</span><span class="token function">scp</span> * gitlab.bak:/backup<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­å»ºç¯å¢ƒï¼Œå®‰è£…gitlab-ce</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä»“åº“é…ç½®</span><span class="token function">cat</span> <span class="token operator">>></span> /etc/yum.repos.d/gitlab-ce.repo <span class="token operator">&lt;&lt;</span> <span class="token string">EOF[gitlab-ce]name=Gitlab CE Repositorybaseurl=https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el\<span class="token variable">$releasever</span>/gpgcheck=0enabled=1EOF</span>yum list gitlab-ce --showduplicates <span class="token operator">|</span> <span class="token function">sort</span> -r   <span class="token comment"># å½“å‰yumä»“åº“å¯å®‰è£…gitlab-ceçš„ç‰ˆæœ¬</span>yum <span class="token function">install</span> gitlab-ce -y   <span class="token comment"># å®‰è£…</span><span class="token function">cat</span> /etc/gitlab/gitlab.rb <span class="token operator">|</span> <span class="token function">grep</span> -Ev <span class="token string">"^$|^#"</span>   <span class="token comment"># å¯¹æ¯”ä¸¤ä¸ªé…ç½®æ–‡ä»¶1</span><span class="token function">cat</span> /backup/gitlab.rb   <span class="token comment"># å¯¹æ¯”ä¸¤ä¸ªé…ç½®æ–‡ä»¶2</span>gitlab-ctl reconfigure   <span class="token comment"># é…ç½®ä¸å¯åŠ¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> gitlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¦…é“è¿ç§»</title>
      <link href="/posts/cd15.html"/>
      <url>/posts/cd15.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>zboxä¸€é”®å®‰è£…åŒ…åªèƒ½å®‰è£…åœ¨<code>/opt</code>ç›®å½•ä¸‹ã€‚</p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> zbox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginxåå‘ä»£ç†gitlab</title>
      <link href="/posts/42ea.html"/>
      <url>/posts/42ea.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ç¯å¢ƒä»‹ç»"><a href="#ç¯å¢ƒä»‹ç»" class="headerlink" title="ç¯å¢ƒä»‹ç»"></a>ç¯å¢ƒä»‹ç»</h1><p>ç¯å¢ƒä»‹ç»ï¼šgitlabç‰ˆæœ¬12.6.1ï¼ŒLinuxç³»ç»Ÿcentos7.7.1908ï¼Œä½¿ç”¨yumå®‰è£…ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /var/opt/gitlab/gitlab-rails/etc/<span class="token function">vi</span> gitlab.yml<span class="token function">vi</span> <span class="token punctuation">..</span>/<span class="token punctuation">..</span>/nginx/conf/gitlab-http.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="gitlab-yml"><a href="#gitlab-yml" class="headerlink" title="gitlab.yml"></a>gitlab.yml</h1><p>åœ¨<code>gitlab.yml</code>é…ç½®æ–‡ä»¶ä¸­ç¬¬10è¡Œ<code>## GitLab settings</code>ã€555è¡Œ<code>## GitLab Shell settings</code>ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">## GitLab settings</span>gitlab:  host: <span class="token number">10</span>******23   <span class="token comment"># git clone çš„IP</span>  port: <span class="token number">82</span>   <span class="token comment"># httpç«¯å£</span><span class="token comment">## GitLab Shell settings</span>gitlab_shell:  path: /opt/gitlab/embedded/service/gitlab-shell/  hooks_path: /opt/gitlab/embedded/service/gitlab-shell/hooks/  authorized_keys_file: /var/opt/gitlab/.ssh/authorized_keys  <span class="token comment"># Git over HTTP</span>  upload_pack:  receive_pack:  <span class="token comment"># If you use non-standard ssh port you need to specify it</span>  ssh_port: <span class="token number">3</span>****   <span class="token comment"># sshç«¯å£</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="gitlabè‡ªå¸¦nginx"><a href="#gitlabè‡ªå¸¦nginx" class="headerlink" title="gitlabè‡ªå¸¦nginx"></a>gitlabè‡ªå¸¦nginx</h1><p>åœ¨gitlabè‡ªå¸¦nginxé…ç½®æ–‡ä»¶<code>gitlab-http.conf</code>ä¸­ï¼Œç¬¬30è¡Œ<code>configuration</code>ã€‚</p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">server &#123;  listen *:82;  server_name dev.******.com;   # é…ç½®åŸŸåè®¿é—®  server_tokens off; ## Don&#39;t s  ## Increase this if you want   ## Or if you want to accept l  client_max_body_size 0;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="nginxåå‘ä»£ç†"><a href="#nginxåå‘ä»£ç†" class="headerlink" title="nginxåå‘ä»£ç†"></a>nginxåå‘ä»£ç†</h1><p>nginxåå‘ä»£ç†è®¾ç½®<code>/etc/nginx/conf.d/gitlab.conf</code>ã€‚</p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">upstream  gitlab&#123;  # 7.x ç‰ˆæœ¬åœ¨æ­¤ä½ç½®  # server unix:&#x2F;var&#x2F;opt&#x2F;gitlab&#x2F;gitlab-rails&#x2F;tmp&#x2F;sockets&#x2F;gitlab.socket;  # 8.0 ä½ç½®  server unix:&#x2F;&#x2F;var&#x2F;opt&#x2F;gitlab&#x2F;gitlab-rails&#x2F;sockets&#x2F;gitlab.socket;&#125;server &#123;    listen      80;    server_name dev.****.com;   # è®¿é—®åŸŸå    location &#x2F; &#123;        # è¿™ä¸ªå¤§å°çš„è®¾ç½®éå¸¸é‡è¦ï¼Œå¦‚æœ git ç‰ˆæœ¬åº“é‡Œé¢æœ‰å¤§æ–‡ä»¶ï¼Œè®¾ç½®çš„å¤ªå°ï¼Œæ–‡ä»¶push ä¼šå¤±è´¥ï¼Œæ ¹æ®æƒ…å†µè°ƒæ•´        client_max_body_size 50m;        proxy_redirect off;        #ä»¥ä¸‹ç¡®ä¿ gitlabä¸­é¡¹ç›®çš„ url æ˜¯åŸŸåè€Œä¸æ˜¯ http:&#x2F;&#x2F;gitï¼Œä¸å¯ç¼ºå°‘        proxy_set_header Host $host;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;        # åå‘ä»£ç†åˆ° gitlab å†…ç½®çš„ nginx        proxy_pass http:&#x2F;&#x2F;dev.****.com:82;   # gitlabè‡ªå¸¦nginxåœ°å€        index index.html index.htm;    &#125;&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="hostsåŸŸåæ˜ å°„"><a href="#hostsåŸŸåæ˜ å°„" class="headerlink" title="hostsåŸŸåæ˜ å°„"></a>hostsåŸŸåæ˜ å°„</h1><p>æœ¬åœ°ä¸»æœºç›´æ¥å°†åŸŸåè§£æåˆ°å†…ç½‘IP<code>/etc/hosts</code><br><code>172.17.**** master dev.****.com</code>ï¼Œé…ç½®å†…ç½‘hostsåŸŸåæ˜ å°„ã€‚  </p><h1 id="é‡å¯ï¼Œç¨ç­‰ä¸€ä¼šéªŒè¯"><a href="#é‡å¯ï¼Œç¨ç­‰ä¸€ä¼šéªŒè¯" class="headerlink" title="é‡å¯ï¼Œç¨ç­‰ä¸€ä¼šéªŒè¯"></a>é‡å¯ï¼Œç¨ç­‰ä¸€ä¼šéªŒè¯</h1><p><code>gitlab-ctl restart</code>ï¼Œæ…é‡æ‰§è¡Œ<code># gitlab-ctl reconfigure</code><br><img src="/medias/drawing-bed/git/2.jpg"></p><h1 id="è‹¥ä¿®æ”¹å¤±è´¥å‚è€ƒ"><a href="#è‹¥ä¿®æ”¹å¤±è´¥å‚è€ƒ" class="headerlink" title="è‹¥ä¿®æ”¹å¤±è´¥å‚è€ƒ"></a>è‹¥ä¿®æ”¹å¤±è´¥å‚è€ƒ</h1><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">cat &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb|grep -Ev &quot;^$|^#&quot;external_url &#39;http:&#x2F;&#x2F;dev.******.com&#39;gitlab_rails[&#39;smtp_enable&#39;] &#x3D; truegitlab_rails[&#39;smtp_address&#39;] &#x3D; &quot;smtp.exmail.qq.com&quot;gitlab_rails[&#39;smtp_port&#39;] &#x3D; 465gitlab_rails[&#39;smtp_user_name&#39;] &#x3D; &quot;dev@****.com&quot;gitlab_rails[&#39;smtp_password&#39;] &#x3D; &quot;****&quot;gitlab_rails[&#39;smtp_domain&#39;] &#x3D; &quot;smtp.exmail.qq.com&quot;gitlab_rails[&#39;smtp_authentication&#39;] &#x3D; &quot;login&quot;gitlab_rails[&#39;smtp_enable_starttls_auto&#39;] &#x3D; truegitlab_rails[&#39;smtp_tls&#39;] &#x3D; truegitlab_rails[&#39;gitlab_email_from&#39;] &#x3D; &#39;dev@****.com&#39;gitlab_rails[&#39;backup_path&#39;] &#x3D; &quot;&#x2F;mnt&#x2F;gitbak&quot;gitlab_rails[&#39;gitlab_shell_ssh_port&#39;] &#x3D; ***nginx[&#39;listen_port&#39;] &#x3D; 82<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ‰§è¡Œ<code>gitlab-ctl stop</code> <code>gitlab-ctl reconfigure</code> <code>gitlab-ctl start</code></p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> nginx </tag>
            
            <tag> gitlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>devopsæ•…éšœæ’é”™</title>
      <link href="/posts/f80c.html"/>
      <url>/posts/f80c.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --> <h1 id="æ•…éšœæ’é™¤çš„æœ€ä½³å®è·µ"><a href="#æ•…éšœæ’é™¤çš„æœ€ä½³å®è·µ" class="headerlink" title="æ•…éšœæ’é™¤çš„æœ€ä½³å®è·µ"></a>æ•…éšœæ’é™¤çš„æœ€ä½³å®è·µ</h1><h2 id="1-1-åˆ’åˆ†é—®é¢˜ç©ºé—´"><a href="#1-1-åˆ’åˆ†é—®é¢˜ç©ºé—´" class="headerlink" title="1.1 åˆ’åˆ†é—®é¢˜ç©ºé—´"></a>1.1 åˆ’åˆ†é—®é¢˜ç©ºé—´</h2><p>é¦–å…ˆç©ä¸€ä¸ªæ¸¸æˆ1~100ä¸­é—´éšæœºä¸€ä¸ªæ•°å­—73ã€‚è®©ç©å®¶å»çŒœè¿™ä¸ªæ•°å­—ã€‚<br>ç¬¬ä¸€ç±»äººï¼š50ï¼Œ75ï¼Œ62ï¼Œ68ï¼Œ71ï¼Œ73ã€‚<br>ç¬¬äºŒç±»äººï¼š1ï¼Œ2ï¼Œ3â€¦73ã€‚<br>ç¬¬ä¸‰ç±»äººï¼š73ã€‚â€¦ã€‚23ï¼Œ1ï¼Œ59â€¦73ã€‚<br>ä½ å¯ä»¥çœ‹åˆ°ï¼Œæ‰¾åˆ°æ­£ç¡®ç­”æ¡ˆåªçŒœäº†6æ¬¡ã€‚å¦‚æœä»1å¼€å§‹é€’åŠ éœ€è¦çŒœ73æ¬¡ã€‚å¦‚æœéšæœºçŒœæœ‰å¯èƒ½è¦éå†æ‰€æœ‰çš„æ•°å­—æ‰èƒ½æ‰¾åˆ°ç­”æ¡ˆã€‚<br>&emsp;&emsp;è¿™ä¸ªæ–¹æ³•é€‚ç”¨äºæ‰€æœ‰çš„æ•…éšœæ’é™¤ã€‚é¢å¯¹é—®é¢˜ï¼Œä¸€äº›äººä»å¯èƒ½äº§ç”Ÿé—®é¢˜çš„åŸå› åˆ—è¡¨çš„åº•å±‚å¼€å§‹ï¼Œä¸€æ­¥ä¸€æ­¥è§£å†³é—®é¢˜ï¼Œå¦å¤–ä¸€äº›äººé€‰æ‹©éšæœºæµ‹è¯•ç›´åˆ°å¹¸è¿åœ°æ‰¾åˆ°åŸå› ã€‚ä¸€ä½ä¼˜ç§€çš„æ•…éšœæ’é™¤äººå‘˜é€‰æ‹©çš„æ¯ä¸€é¡¹æµ‹è¯•çš„ç»“æœéƒ½ä¼šæ’é™¤ä¸€ç±»åŸå› ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåŸå› ï¼Œå°†æ•…éšœåˆ†è€Œæ²»ä¹‹ã€‚åˆ’åˆ†é—®é¢˜ç©ºé—´ä¹‹åï¼Œå³ä½¿ä¸€é¡¹æµ‹è¯•ä¸èƒ½æ‰¾åˆ°æ•…éšœçš„æ ¹æœ¬åŸå› ï¼Œæµ‹è¯•ç»“æœæœ€å°‘ä¹Ÿèƒ½æ’é™¤æ‰å‡ ä¸ªå¯èƒ½çš„åŸå› ã€‚<br>&emsp;&emsp;ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘å°è¯•ç”¨æµè§ˆå™¨è®¿é—®ä¸€ä¸ªç½‘ç«™ï¼Œä½†æ˜¯è¯·æ±‚è¶…æ—¶ï¼Œæ­¤æ—¶æˆ‘æƒ³æµ‹è¯•æ˜¯ç½‘ç«™çš„åŸå› è¿˜æ˜¯æˆ‘çš„ç½‘ç»œè¿æ¥æœ‰é—®é¢˜ï¼Œä½†æˆ‘ä¸ä¼šç«‹å³å»æŸ¥çœ‹ç½‘çº¿æ˜¯å¦æ²¡æœ‰æ’å¥½ï¼Œè€Œæ˜¯è®¿é—®ä¸€ä¸¤ä¸ªé€šå¸¸éƒ½å¾ˆç¨³å®šçš„å…¶ä»–<a href="www.baidu.com">ç½‘ç«™</a>ã€‚å¦‚æœåˆ«çš„ç½‘ç«™èƒ½æ­£å¸¸åŠ è½½ï¼Œå°±å¯ä»¥ç¡®å®šæˆ‘çš„ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œä»è€Œçœå»ä¸€ç³»åˆ—æœ¬åœ°ç½‘ç»œæµ‹è¯•ã€‚<br>&emsp;&emsp;å½“ä½ å’Œå›¢é˜Ÿä¸­çš„å…¶ä»–äººåä½œæ’é™¤æ•…éšœæ—¶ï¼Œä¹Ÿä¼šåœ¨å›¢é˜Ÿæˆå‘˜ä¹‹é—´åˆ’åˆ†é—®é¢˜ç©ºé—´ï¼Œæ²¡æœ‰æ¯”è·Ÿè¸ªä¸€ä¸ªé—®é¢˜çš„æ—¶å€™å‘ç°æœ‰äººä¹Ÿåœ¨åšç›¸åŒçš„æµ‹è¯•æ›´åçš„äº‹æƒ…äº†ã€‚å½“ä½ åœ¨å›¢é˜Ÿç¯å¢ƒä¸‹ç€æ‰‹è§£å†³ä¸€ä¸ªé—®é¢˜æ—¶ï¼Œè¦ç»™æ¯ä¸ªäººåˆ†é…ä¸åŒçš„æµ‹è¯•å¹¶ä¿è¯ä¸€æ—¦æŸä¸ªäººæ’é™¤äº†ä¸€ä¸ªåŸå› ï¼Œèƒ½åŠæ—¶æŠŠç»“æœä¼ è¾¾ç»™å…¶ä»–äººã€‚</p><h2 id="1-2-ååŒå·¥ä½œæ—¶çš„è‰¯å¥½æ²Ÿé€š"><a href="#1-2-ååŒå·¥ä½œæ—¶çš„è‰¯å¥½æ²Ÿé€š" class="headerlink" title="1.2 ååŒå·¥ä½œæ—¶çš„è‰¯å¥½æ²Ÿé€š"></a>1.2 ååŒå·¥ä½œæ—¶çš„è‰¯å¥½æ²Ÿé€š</h2><p>&emsp;&emsp;å»ºç«‹è‰¯å¥½çš„æ²Ÿé€šæ–¹æ³•æ˜¯å›¢é˜Ÿæ’é™¤æ•…éšœçš„æœ€å¤§æŒ‘æˆ˜ä¹‹ä¸€ã€‚å¦‚æœæ²¡æœ‰è‰¯å¥½çš„æ²Ÿé€šï¼Œä¸¤ä¸ªäººä¸ä¼šæ„è¯†åˆ°æ­£åœ¨è§£å†³ç›¸åŒçš„é—®é¢˜ï¼Œä¸€ä¸ªäººä¼šé‡å¤æ’æŸ¥åˆ«äººå·²ç»æ£€æŸ¥è¿‡çš„é—®é¢˜ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œäººä»¬è¯¯è§£äº†è¯´æ˜ï¼Œè®©é—®é¢˜å˜å¾—æ„ˆåŠ ä¸¥é‡ã€‚<br>ç›´æ¥å¯¹è¯ï¼šè¿å›¢é˜Ÿäººå‘˜é€šå¸¸ååœ¨ä¸€ä¸ªåŒºåŸŸï¼Œæ–¹ä¾¿æ²Ÿé€šã€‚<br>ç”µå­é‚®ä»¶ï¼šä¸éœ€è¦ç«‹å³è§£å†³çš„é—®é¢˜å¯ä»¥é€‰æ‹©ç”µå­é‚®ä»¶<br>QQã€é’‰é’‰ã€å¾®ä¿¡ã€ç­‰ç¾¤èŠå¤©è½¯ä»¶ï¼šä¼˜ç‚¹ä¸ªäººä¹‹é—´å¯ä»¥ç§å¯†èŠå¤©ï¼Œç¾¤é‡Œé¢å¯ä»¥å…±äº«ä¿¡æ¯ã€‚å¯ä»¥ä¿ç•™èŠå¤©è®°å½•ã€‚<br>å…¶ä»–çš„å¤‡ç”¨æ–¹æ¡ˆï¼šç”µè¯ä¼šè®®ç­‰ã€‚</p><h2 id="1-3-é¦–é€‰å¿«é€Ÿã€ç®€å•çš„æµ‹è¯•ï¼Œè€Œä¸æ˜¯ç¼“æ…¢ã€å¤æ‚çš„æµ‹è¯•"><a href="#1-3-é¦–é€‰å¿«é€Ÿã€ç®€å•çš„æµ‹è¯•ï¼Œè€Œä¸æ˜¯ç¼“æ…¢ã€å¤æ‚çš„æµ‹è¯•" class="headerlink" title="1.3 é¦–é€‰å¿«é€Ÿã€ç®€å•çš„æµ‹è¯•ï¼Œè€Œä¸æ˜¯ç¼“æ…¢ã€å¤æ‚çš„æµ‹è¯•"></a>1.3 é¦–é€‰å¿«é€Ÿã€ç®€å•çš„æµ‹è¯•ï¼Œè€Œä¸æ˜¯ç¼“æ…¢ã€å¤æ‚çš„æµ‹è¯•</h2><p>&emsp;&emsp;å¦‚æœæ¯ä¸ªé—®é¢˜éƒ½æœ‰ä¸€ç³»åˆ—äº•ç„¶æœ‰åºçš„æµ‹è¯•é›†åˆï¼Œé‚£å°±å¤ªæ£’äº†ã€‚ç„¶è€Œï¼Œé€šå¸¸ä½ ä¼šé‡åˆ°å„ç§å„æ ·çš„åŸå› ï¼Œè¿™äº›åŸå› çœ‹èµ·æ¥éƒ½åƒæ˜¯é—®é¢˜çš„æ ¹æºæ‰€åœ¨ã€‚ä½ å¾ˆéš¾çŸ¥é“åº”è¯¥å…ˆå°è¯•å“ªä¸ªï¼Œä¸€ä¸ªå¥½çš„åŸåˆ™æ˜¯ï¼šå½“ä½ å¯ä»¥æ‰§è¡Œä¸¤ä¸ªä¸€æ ·å¥½çš„æµ‹è¯•çš„æ—¶å€™ï¼Œé¦–é€‰å¿«é€Ÿæˆ–ç®€å•çš„ï¼Œè€Œä¸æ˜¯ç¼“æ…¢æˆ–å¤æ‚çš„ã€‚<br>&emsp;&emsp;å¦‚æœä½ ä»¬å›¢é˜Ÿçš„å®•æœºæ—¶é—´æ˜¯ç”¨é‡‘é’±è¡¡é‡çš„ï¼Œé‚£ä¹ˆå°½å¯èƒ½å¿«åœ°å®šä½é—®é¢˜çš„åŸå› éå¸¸é‡è¦ã€‚ä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªWebæœåŠ¡å™¨å®•æœºçš„æ—¶å€™ï¼Œæœ‰å¾ˆå¤šä¸åŒçš„æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ä»pingæœåŠ¡å™¨çš„æ–¹æ³•å¼€å§‹å°è¯•ï¼Œé‚£ä¹ˆå°±æ˜¯åœ¨ä½¿ç”¨ä¸€ç§ç›¸å½“å¿«çš„æ–¹æ³•æ–­å®šæœåŠ¡å™¨æ˜¯å¦è¿é€šäº†ç½‘ç»œã€‚å¦‚æœæ— æ³•pingé€šæœåŠ¡å™¨ï¼Œä½ å°±å¯ä»¥ç€æ‰‹å¤„ç†å¦‚ä½•è®©æœåŠ¡å™¨æ¢å¤ç½‘ç»œè¿æ¥ã€‚è‹¥æ˜¯èƒ½pingé€šï¼Œåˆ™å¯ä»¥è¿›è¡Œæ›´è¿›ä¸€æ­¥çš„æ•…éšœæ’é™¤è¿‡ç¨‹ï¼ŒæŸå¤±çš„åªä¸è¿‡æ˜¯å‡ ç§’é’Ÿæ—¶é—´è€Œå·²ã€‚<br>&emsp;&emsp;åœ¨å›¢é˜Ÿåˆä½œçš„æƒ…æ™¯ä¸‹æœ‰ä¸ªä¼˜åŠ¿æ˜¯å¯ä»¥å¾ˆå®¹æ˜“åŒæ—¶è¿›è¡Œå¤šä¸ªæµ‹è¯•ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè®©ä¸€ä¸ªå‘˜å·¥åšç¼“æ…¢ã€å¤æ‚çš„æµ‹è¯•è€Œå…¶ä»–äººä¸“æ³¨æ›´çŸ­ã€æ›´ç®€å•çš„æµ‹è¯•æ˜¯åˆç†çš„ã€‚åªè¦å›¢é˜Ÿæˆå‘˜ä¹‹é—´å…·å¤‡è‰¯å¥½çš„æ²Ÿé€šï¼Œä½ ä»¬å°±èƒ½è¿…é€Ÿå®šä½åˆ°é—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚<br>&emsp;&emsp;å°½ç®¡åº”è¯¥é¦–é€‰å¿«é€Ÿã€ç®€å•çš„æµ‹è¯•ï¼Œä½†å¦‚æœæœ‰ç¼“æ…¢çš„æµ‹è¯•å¯ä»¥åœ¨å‡ ä¹æ— äººç›‘è§†çš„æƒ…å†µä¸‹æ‰§è¡Œï¼Œé‚£ä¹ˆåšä¸€ä¸‹æ…¢æµ‹è¯•ä¹Ÿæ— å¦¨ã€‚å› ä¸ºå¯åŠ¨æ…¢æµ‹è¯•ä¹‹åï¼Œæµ‹è¯•è¿è¡ŒæœŸé—´ä½ å¯ä»¥å»åšåˆ«çš„äº‹æƒ…ã€‚åŒæ ·çš„æ€è·¯ä¹Ÿé€‚ç”¨äºé‚£äº›éœ€è¦èŠ±è´¹æ—¶é—´çš„æ•…éšœæ’é™¤è¿‡ç¨‹ã€‚ä¾‹å¦‚ï¼Œæ•…éšœæ’é™¤ä¸­æœ‰ä¸€æ­¥æ˜¯æäº¤ä¸€ä¸ªå·¥å•æˆ–è€…ç»™æ”¯æŒäººå‘˜å‘é€æŸç§é€šçŸ¥ï¼Œå½“å¯åŠ¨è¿™äº›æµç¨‹ä¹‹åï¼Œä½ å°±å¯ä»¥å°†æ³¨æ„åŠ›è½¬ç§»åˆ°å…¶ä»–æ›´éœ€è¦å…³æ³¨çš„ä»»åŠ¡å½“ä¸­ã€‚<br>&emsp;&emsp;å¦å¤–ä¸€ä¸ªå¤§é—®é¢˜æ˜¯ï¼Œç½‘ç»œæ˜¯å¦æ¥é€šï¼Ÿé€šå¸¸ä¸€äº›å¤§é—®é¢˜çš„åŸå› éƒ½å¾ˆç®€å•ã€‚ç½‘ç»œå’Œç”µæºçº¿çš„è¿æ¥ç»å¸¸ä¼šæ¾åŠ¨ï¼Œéå¸¸è½»å¾®çš„æ¨åŠ¨å°±è¶³ä»¥è®©æœåŠ¡å™¨æ–­å¼€ç½‘ç»œè¿æ¥ã€‚å¦‚æœä½ ç¦»ç³»ç»Ÿè®¾å¤‡éå¸¸è¿‘ï¼Œå¯ä»¥æŸ¥çœ‹ä¸‹çº¿ç¼†æ˜¯å¦æ¥é€šï¼Œå¿«é€ŸæŸ¥çœ‹çº¿ç¼†è¿æ¥æ¯”ååœ¨ç”µè„‘å‰ä¸€åˆ†é’Ÿç­‰å¾…ç«¯å£æ‰«æçš„ç»“æœè¦å¥½å¾—å¤šã€‚</p><h2 id="1-4-å¤šå°è¯•è¿‡å»çš„è§£å†³æ–¹æ¡ˆ"><a href="#1-4-å¤šå°è¯•è¿‡å»çš„è§£å†³æ–¹æ¡ˆ" class="headerlink" title="1.4 å¤šå°è¯•è¿‡å»çš„è§£å†³æ–¹æ¡ˆ"></a>1.4 å¤šå°è¯•è¿‡å»çš„è§£å†³æ–¹æ¡ˆ</h2><p>&emsp;&emsp;äº‹å®ä¸Šå¤§éƒ¨åˆ†é—®é¢˜éƒ½å‘ç”Ÿäº†ä¸æ­¢ä¸€æ¬¡ã€‚æŸäº›äººæ‹¥æœ‰å¿«é€Ÿåˆ’åˆ†é—®é¢˜æ ¹æºèƒ½åŠ›çš„åŸå› æ˜¯ä»–ä»¬ä»¥å‰å¤šæ¬¡ç¢°åˆ°è¿‡åŒæ ·çš„é—®é¢˜ã€‚ä½ æ¥è§¦çš„é—®é¢˜è¶Šå¤šï¼Œä½ å°±è¶Šèƒ½æˆä¸ºä¸€ä¸ªæ›´å¥½ã€æ›´å¿«çš„æ•…éšœæ’é™¤äººå‘˜ã€‚<br>&emsp;&emsp;è§£å†³é—®é¢˜æ—¶ç»å¸¸ä¼šé‡åˆ°ä»¥å‰ç¢°åˆ°è¿‡çš„ç—‡çŠ¶ã€‚åŠªåŠ›å›å¿†ä¸Šæ¬¡æ˜¯ä»€ä¹ˆåŸå› é€ æˆçš„è¿™ä¸ªé—®é¢˜ï¼Œé‡‡å–äº†ä»€ä¹ˆæ ·çš„æ­¥éª¤æ¥éš”ç¦»é—®é¢˜ã€‚å¤šæ•°æƒ…å†µä¸‹ï¼Œé—®é¢˜ç—‡çŠ¶ä¸€æ ·ï¼Œé€ æˆé—®é¢˜çš„åŸå› ä¹Ÿç›¸åŒï¼Œå¦‚æœä½ èƒ½è¯†åˆ«å‡ºè¿™ä¸ªç—‡çŠ¶ï¼Œå°±èƒ½éå¸¸å¿«é€Ÿåœ°è§£å†³é—®é¢˜ã€‚ä¿—è¯è¯´å¾—å¥½ï¼Œå¦‚æœå®ƒèµ°èµ·è·¯æ¥åƒé¸­å­ä¸”å«å£°ä¹Ÿåƒé¸­å­ï¼Œé‚£å®ƒå¾ˆå¯èƒ½å°±æ˜¯åªé¸­å­ã€‚<br>&emsp;&emsp;ç„¶è€Œï¼Œæœ‰æ—¶å€™å®ƒå¹¶ä¸æ˜¯é¸­å­ã€‚æˆ‘æ›¾ç»è§è¿‡æŸäº›äººåœ¨å¬åˆ°ä»»ä½•ç›¸ä¼¼çš„ç—‡çŠ¶æ—¶å°±é‡‡ç”¨ä½¿ç”¨è¿‡çš„è§£å†³æ–¹æ¡ˆå»è§£å†³é—®é¢˜ï¼Œå®Œå…¨ä¸å†å¬å–ä»»ä½•å…¶ä»–çš„æè¿°ã€‚å®é™…æƒ…å†µæ˜¯ï¼Œå®Œå…¨ä¸åŒçš„é—®é¢˜ç»å¸¸ä¹Ÿå¯ä»¥äº§ç”Ÿç›¸åŒçš„ç—‡çŠ¶ã€‚å°¤å…¶æ˜¯é‚£äº›è¡¨é¢ç—‡çŠ¶ã€‚ä¾‹å¦‚ï¼Œç™»å…¥æœåŠ¡å™¨çš„ä¼šè¯æœ‰å»¶è¿Ÿå¹¶ä¸”çœ‹èµ·æ¥éå¸¸ç¼“æ…¢ã€‚åœ¨æœåŠ¡å™¨è´Ÿè½½å¾ˆé«˜æˆ–è€…ç½‘ç»œè¿æ¥ä¸ä½³çš„æƒ…å†µä¸‹éƒ½ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µã€‚Nmapï¼ˆä¸€ä¸ªå¾ˆå¥½ç”¨çš„ç«¯å£æ‰«æå·¥å…·ï¼‰ä¼šæŠ¥å‘Šä¸€ä¸ªç«¯å£è¢«è¿‡æ»¤ï¼Œå¦‚æœé˜²ç«å¢™é˜»å¡äº†è¿™ä¸ªç«¯å£æˆ–è€…æŸä¸ªè·¯ç”±å™¨é…ç½®é”™è¯¯çš„è¯ã€‚å¦‚æœè¿‡æ—©åœ°æŠŠæ³¨æ„åŠ›æ”¾åˆ°è¿‡å»çš„æŸä¸ªè§£å†³æ–¹æ¡ˆä¸­ï¼Œä¼šè®©è‡ªå·±å¯¹é—®é¢˜äº§ç”Ÿåè§ï¼Œä»è€Œæ›´éš¾æ‰¾åˆ°é€ æˆé—®é¢˜çš„çœŸæ­£åŸå› ã€‚<br>&emsp;&emsp;å…³é”®çš„ä¸€ç‚¹æ˜¯å³ä½¿ä½ ç”¨ä¹‹å‰çš„è§£å†³æ–¹æ¡ˆæŒ‡å¯¼æ•…éšœçš„æ’é™¤è¿‡ç¨‹ï¼Œä¹ŸåŠ¡å¿…éªŒè¯ä½ çš„å‡è®¾ã€‚å¦‚æœä½ è®°å¾—ä¸Šæ¬¡éš”ç¦»é—®é¢˜çš„ä¸€äº›æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™æ¬¡ä½ åº”è¯¥èƒ½ç”¨ä¸€ä¸ªæµ‹è¯•å¾ˆå¿«çš„éªŒè¯é—®é¢˜ï¼Œå¦‚æœæµ‹è¯•ç»“æœä¸åŒï¼Œå°±å‡†å¤‡å¥½é‡‡å–åˆ«çš„è§£å†³æ–¹æ³•å§ã€‚</p><h2 id="1-5-è®°å½•é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"><a href="#1-5-è®°å½•é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="1.5 è®°å½•é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"></a>1.5 è®°å½•é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2><p>&emsp;&emsp;å¦‚æˆ‘æ‰€è¯´è¿‡çš„ï¼Œå¤§éƒ¨åˆ†é—®é¢˜éƒ½å‘ç”Ÿäº†ä¸æ­¢ä¸€æ¬¡ã€‚åˆ©ç”¨è¿™ä¸ªäº‹å®çš„æœ€å¥½æ–¹æ³•ä¹‹ä¸€æ˜¯è®°å½•é—®é¢˜åŠå…¶è§£å†³æ–¹æ¡ˆã€‚è®¸å¤šäººå°†è¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºäº‹åæè¯¯ã€‚ä¸€ä¸ªé—®é¢˜è§£å†³ä»¥åï¼Œå‚ä¸è§£å†³é—®é¢˜çš„äººèšé›†åœ¨ä¸€èµ·è®°å½•å“ªé‡Œå‡ºäº†å·®é”™ï¼Œæ¯ä¸ªäººåˆ†åˆ«é‡‡å–äº†ä»€ä¹ˆæ­¥éª¤æ¥éš”ç¦»é—®é¢˜ï¼Œç›¸åº”çš„ç»“æœæ˜¯ä»€ä¹ˆã€‚äº‹åå‰–æçš„æœ€åç¡®å®šé—®é¢˜çš„æ ¹æœ¬åŸå› ï¼Œæ›´ç†æƒ³çš„æƒ…å†µæ˜¯ï¼Œå®æ–½è¿›ä¸€æ­¥çš„æ–¹æ¡ˆå»é˜²æ­¢æ­¤ç±»é—®é¢˜å†å‘ç”Ÿã€‚<br>&emsp;&emsp;å°½ç®¡äº‹åæè¯¯ä¼šå ç”¨æ¯ä¸ªäººçš„æ—¶é—´ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šç†ç”±å€¼å¾—è¿™ä¹ˆå»åšã€‚ä¸»è¦åŸå› æ˜¯ï¼Œå¦‚æœåŒæ ·çš„ç—‡çŠ¶ä¸‹æ¬¡å†å‡ºç°ï¼Œä¼šå¾ˆéš¾æƒ³èµ·ä¸Šæ¬¡è§£å†³è¿™ä¸ªé—®é¢˜æ—¶åšçš„æ¯ä¸€ä»¶äº‹æƒ…ã€‚æƒ…æ€¥ä¹‹ä¸‹ï¼Œä½ èƒ½è®°èµ·çš„åªæœ‰ä½ æ›¾ç»ç¢°åˆ°è¿‡è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœä½ èƒ½æ‰¾åˆ°ç›¸åº”çš„äº‹åæè¯¯è®°å½•ï¼Œå°±ä¼šç«‹å³æ‰¾åˆ°ä¸€ä¸ªæ’é™¤æ•…éšœçš„æ­¥éª¤åˆ—è¡¨å»éš”ç¦»é—®é¢˜ã€‚<br>&emsp;&emsp;è®°å½•é—®é¢˜çš„è¿‡ç¨‹ä¹Ÿä¼šè®©å›¢é˜Ÿä¸­çš„æ¯ä¸€ä½æˆå‘˜æˆä¸ºæ›´å¥½çš„é—®é¢˜è§£å†³è€…ã€‚å›¢é˜Ÿä¸­çš„åˆçº§æˆå‘˜ä»èµ„æ·±æˆå‘˜çš„ç»å†ä¸­å—ç›Šï¼Œæ¯ä¸ªäººä¸€èµ·å­¦ä¹ æ–°çš„å·¥å…·å’ŒæŠ€æœ¯ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœé—®é¢˜çš„è§£å†³æ–¹æ³•è®°å½•ä¸‹æ¥ï¼Œå›¢é˜Ÿä¸­çš„åˆçº§æˆå‘˜å¾ˆå®¹æ˜“è‡ªå·±å°±èƒ½è§£å†³é—®é¢˜ã€‚è¿™æ„å‘³ç€ï¼Œä½ åœ¨åº¦å‡æˆ–è€…ç¡è§‰æ—¶å°±ä¼šå°‘è¢«æ‰“æ‰°äº†ã€‚<br>&emsp;&emsp;è‹¥è¿ç”¨å¾—å½“ï¼Œäº‹åæè¯¯å°†æˆä¸ºä¸€ç¬”æœ‰ä»·å€¼çš„è´¢å¯Œã€‚å€˜è‹¥è¿ç”¨ä¸å½“ï¼Œåˆ™å®ƒä»¬å¼•å‘çš„é—®é¢˜ä¼šæ¯”èƒ½è§£å†³çš„è¿˜è¦å¤šã€‚è®¨è®ºå’Œè®°å½•æ•…éšœæ’é™¤æ–¹æ³•ä¸è¿‡ç¨‹éå¸¸æ£’ï¼Œä½†ä½ å¿…é¡»è¿½æº¯åˆ°é—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚ä¸€æ—¦é—®é¢˜æ¶ˆå¤±ï¼Œç¡®å®è¦èŠ±è´¹å¾ˆå¤šæ—¶é—´å’ŒåŠªåŠ›å»æŸ¥é˜…æ—¥å¿—æ¥è¿½æŸ¥é—®é¢˜çš„æ ¹æºã€‚å¾ˆå¤šæ—¶å€™ä¸€ä¸ªå›¢é˜Ÿåªèƒ½åšåˆ°æè¿°é—®é¢˜çš„ç—‡çŠ¶æ˜¯ä»€ä¹ˆï¼Œé‡‡å–äº†ä»€ä¹ˆæªæ–½æ¶ˆé™¤äº†è¿™ä¸ªé—®é¢˜ã€‚å›¢é˜Ÿç»å¸¸é€šè¿‡é‡å¯ç³»ç»Ÿæˆ–è€…æœåŠ¡å°±è§£å†³äº†é—®é¢˜ã€‚å¦‚æœä¸èƒ½éš”ç¦»é—®é¢˜çš„æ ¹æºï¼Œå¾ˆå¯èƒ½ä¼šä¸€æ¬¡åˆä¸€æ¬¡åœ°é‡åˆ°ç›¸åŒçš„é—®é¢˜ã€‚<br>&emsp;&emsp;å½“ç„¶ï¼Œæ‰¾åˆ°é—®é¢˜çš„æ ¹æºä»…åœ¨ä½ æƒ³é‡‡å–æªæ–½é˜²æ­¢é—®é¢˜é‡ç°æ—¶æœ‰ç”¨ã€‚ä¸€æ—¦ä½ æŒæ¡äº†é—®é¢˜çš„æ ¹æºï¼Œå°±å¯ä»¥æƒ³å‡ºè§£å†³é—®é¢˜çš„æ–¹æ³•å’Œèƒ½è§£å†³é—®é¢˜çš„äººå‘˜ã€‚è¿™è¯´èµ·æ¥å®¹æ˜“ï¼Œä½†è‹¥ä¸äº†è§£é—®é¢˜çš„æ ¹æºï¼Œå¯èƒ½ä¼šå†æ¬¡ç¢°åˆ°è¿™ä¸ªé—®é¢˜ã€‚æœ€åçš„æƒ…å½¢æ˜¯ï¼Œä½ ä¼šè®¤ä¸ºä»æ ¹æœ¬ä¸Šè§£å†³é—®é¢˜ä»è€Œä¸€åŠ³æ°¸é€¸çš„åŠªåŠ›æ˜¯ç™½è´¹çš„ã€‚<br>&emsp;&emsp;ä¸€äº›å›¢é˜Ÿä¼šæœ‰ç›¸åçš„é—®é¢˜ã€‚ä»–ä»¬å–œæ¬¢ç”¨äº‹åæè¯¯å»åˆ†æé—®é¢˜æ ¹æºï¼Œä½†åªæ˜¯ä¸ºäº†çŸ¥é“åº”è¯¥è´£å¤‡è°ï¼Œäº‹åæè¯¯åœ¨è¿™ç§ç¯å¢ƒä¸‹å°±ä¼šå˜å¾—æœ‰é˜²å¾¡æ€§ï¼Œä¸”å¸¸å¸¦æœ‰ä¾µç•¥æ€§ï¼Œè¿™æœ€ç»ˆä¼šèµ·åˆ°ç›¸åçš„æ•ˆæœã€‚å½“äº‹åæè¯¯å˜å¾—åªæœ‰æŒ‡è´£ï¼Œäººä»¬ä¸å¤§å¯èƒ½å»å‚ä¸å®ƒï¼Œè€Œå¾ˆå¯èƒ½éšç’äº‹å®ï¼Œå°¤å…¶æ˜¯é—®é¢˜å¯èƒ½ç‰µè¿åˆ°è‡ªå·±æ—¶ã€‚æœ€åï¼Œå³ä½¿ä½ å‘ç°åº”è¯¥è´£å¤‡æŸäººï¼Œä½†æ˜¯å¯èƒ½å¹¶æ²¡æœ‰æ‰¾åˆ°é—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚å½“ä½ ä¸å¾—ä¸æ’é™¤ä¸€ä¸ªæ–°é—®é¢˜çš„æ—¶å€™ï¼Œè¿™å°±å½¢æˆäº†ä¸€ä¸ªæ›´åŠ ç´Šä¹±çš„ç¯å¢ƒã€‚åœ¨è¿™æ ·çš„ç¯å¢ƒä¸­ï¼Œäººä»¬çš„å…³æ³¨ç‚¹ä¸æ˜¯è§£å†³æ‰‹è¾¹çš„é—®é¢˜ï¼Œè€Œæ˜¯åšå¾ˆå¤šå·¥ä½œå»è¯æ˜å‡ºç°é—®é¢˜çš„åŸå› åœ¨äºä½ ï¼Œè€Œä¸æ˜¯æˆ‘ã€‚<br>&emsp;&emsp;æœ€åï¼Œæœ‰äº›äººéå¸¸å–œæ¬¢äº‹åæè¯¯ä»¥è‡³äºä»–ä»¬åœ¨é—®é¢˜è§£å†³ä¹‹å‰å°±å¼€å§‹è¿™ä¹ˆåšäº†ã€‚å½“ä½ èº«å¤„äºä¸€ä¸ªå±æœºå½“ä¸­çš„æ—¶å€™ï¼Œä½ çš„å…³æ³¨ç‚¹åº”è¯¥åœ¨æ‰‹ä¸Šçš„é—®é¢˜å’Œä½ è¦éš”ç¦»é—®é¢˜è€Œé‡‡ç”¨çš„æ•…éšœæ’é™¤æ‰‹æ®µã€‚è¿™æ—¶å€™äº†è§£é—®é¢˜çš„æ ¹æºè¿˜ä¸ºæ—¶å°šæ—©ï¼Œè¿½é—®<strong>æˆ‘ä»¬æ€ä¹ˆåšæ‰èƒ½è®©è¿™æ ·çš„äº‹ä¸å†å‘ç”Ÿ</strong>ä¹Ÿæ²¡æœ‰æ„ä¹‰ã€‚å¦‚æœä½ è§£å†³è¿‡å¤æ‚çš„é—®é¢˜ï¼Œä½ å°±çŸ¥é“ï¼Œåœ¨è§£å†³é—®é¢˜è¿‡ç¨‹ä¸­ï¼Œä½ è®¤ä¸ºå¯èƒ½çš„é—®é¢˜æ ¹æºä¼šä¸æ–­åœ°å‘ç”Ÿæ”¹å˜ã€‚é€šå¸¸æ’é™¤æ•…éšœå‹åŠ›å¾ˆå¤§ï¼Œéœ€è¦æåº¦çš„ä¸“æ³¨ï¼Œå°¤å…¶æ˜¯å½“æ•…éšœèŠ±è´¹å…¬å¸çš„é‡‘é’±çš„æ—¶å€™ï¼Œä»»ä½•æ³¨æ„åŠ›åˆ†æ•£éƒ½æ„å‘³ç€è§£å†³é—®é¢˜çš„æ—¶é—´ä¼šæ›´ä¹…ã€‚<br>&emsp;&emsp;å³ä½¿ä½ å·²ç»é‰´å®šå‡ºé—®é¢˜çš„æ ¹æœ¬åŸå› ï¼Œæœ€å¥½ç»™æ¯ä¸ªäººè¶³å¤Ÿçš„æ—¶é—´å†·é™ä¸‹æ¥ï¼Œé•‡å®šä¸€ä¸‹ï¼Œåœ¨ä½ è®¡åˆ’é•¿æœŸçš„è§£å†³é—®é¢˜æ–¹æ¡ˆä¹‹å‰è®¤çœŸæ€è€ƒåˆšæ‰å‘ç”Ÿäº†ä»€ä¹ˆã€‚ç¼ºå°‘é‚£äº›é¢å¤–çš„æ—¶é—´ï¼Œä½ å¾ˆå¯èƒ½ä¼šç¢°åˆ°åå¯¹æ„è§ï¼Œè¿™å°†è¦ä¹ˆæ¨è¿Ÿé—®é¢˜çš„è§£å†³ï¼Œè¦ä¹ˆé€ æˆæ¯”ä»–ä»¬è§£å†³çš„é—®é¢˜è¿˜å¤šçš„é—®é¢˜ã€‚</p><h2 id="1-6-äº†è§£æ”¹åŠ¨"><a href="#1-6-äº†è§£æ”¹åŠ¨" class="headerlink" title="1.6 äº†è§£æ”¹åŠ¨"></a>1.6 äº†è§£æ”¹åŠ¨</h2><p>&emsp;&emsp;ç³»ç»Ÿé—®é¢˜çš„ä¸€ä¸ªæœ€å¤§æ¥æºæ˜¯æ”¹åŠ¨ã€‚å¦‚æœç³»ç»Ÿå·²ç»æµç•…åœ°è¿è¡Œäº†å¾ˆä¹…ï¼Œçªç„¶å‡ºç°äº†ä¸€ä¸ªé—®é¢˜ï¼Œä½ é¦–å…ˆåº”è¯¥é—®çš„æ˜¯ï¼šå“ªé‡Œå‘ç”Ÿäº†æ”¹åŠ¨ï¼Ÿå¦‚æœç³»ç»Ÿä¸€ç›´éƒ½ä¸ç¨³å®šï¼Œå°±ä¸å¿…æŠŠæ–°çš„æ”¹åŠ¨ä½œä¸ºé—®é¢˜çš„æ¥æºä¹‹ä¸€ã€‚ä½†æ˜¯å¯¹äºè¿è¡Œä¸€å‘ç¨³å®šçš„ç³»ç»Ÿæ¥è¯´ï¼Œåœ¨æ‰€æœ‰å…¶ä»–å› ç´ ç›¸åŒçš„æƒ…å†µä¸‹ï¼Œæ”¹åŠ¨çš„å†…å®¹åº”è¯¥ä½œä¸ºä½ è¿›è¡Œæ•…éšœæ’é™¤çš„ç¬¬ä¸€ç›®æ ‡ã€‚é‰´å®šå’Œæ’é™¤å¯¹ç³»ç»Ÿçš„æ”¹åŠ¨å°†ä¼šæ˜¾è‘—åŠ å¿«æ’é™¤æ•…éšœçš„è¿‡ç¨‹ã€‚<br>&emsp;&emsp;å°½ç®¡å¯¹ç³»ç»Ÿçš„æ›´æ”¹å¯èƒ½æ˜¯é—®é¢˜çš„æ¥æºï¼Œä½†ä½ å¦‚æœæ²¡æœ‰åŠæ³•è¿½è¸ªåˆ°æ›´æ”¹ï¼Œå°±å¾ˆå¯èƒ½æ— æ³•æ›´å¿«åœ°è§£å†³é—®é¢˜ã€‚å¦‚æœä½ ç¼ºä¹è¿½è¸ªæ‰€åšæ›´æ”¹çš„æ–¹æ³•ï¼Œå°±åº”è¯¥è®¤çœŸåœ°è€ƒè™‘å¯»æ‰¾ä¸€ä¸ªæ–¹æ³•ï¼Œå°¤å…¶æ˜¯å½“ä½ çš„ç³»ç»Ÿæ›¾ç»å¾ˆç¨³å®šæ—¶ã€‚æ²¡æœ‰æ¯”æ”¶åˆ°é—®é¢˜æŠ¥è­¦æ›´å¥½çš„äº†ï¼Œâ€<strong>Jimåœ¨é—®é¢˜å‘ç”Ÿçš„é‚£æ®µæ—¶é—´æäº¤äº†ä»£ç </strong>â€œï¼Œè¿™å¯ä»¥è¿…é€Ÿè·Ÿè¸ªåˆ°é—®é¢˜ã€‚æ²¡æœ‰æ¯”åœ¨ç¨³å®šçš„ç³»ç»Ÿä¸Šå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå½“æƒ³è¦çŸ¥é“å¯¹ç³»ç»Ÿåšäº†ä»€ä¹ˆæ”¹åŠ¨æ—¶å´æ— ä»å¾—çŸ¥æ›´ç³Ÿç³•çš„äº‹æƒ…äº†ã€‚<br>&emsp;&emsp;å³ä½¿é€šè¿‡æŸäº›æ–¹æ³•èƒ½äº†è§£åˆ°æ”¹åŠ¨çš„å†…å®¹ï¼Œä½ æœ€å¥½è¿˜æ˜¯è¦æ±‚è‡ªå·±æ¯æ¬¡åªåšä¸€ä¸ªæ”¹åŠ¨ã€‚å¦‚æœèƒ½åœ¨é—®é¢˜å‘ç”Ÿæ—¶æŒ‡å‡ºä¹‹å‰çš„ä¸€ä¸ªæ”¹åŠ¨ï¼Œä¼šå¾ˆå®¹æ˜“éš”ç¦»é—®é¢˜ã€‚è‹¥åŒæ—¶æ›´æ”¹äº†10æ®µä»£ç å’Œ3ä¸ªé…ç½®æ–‡ä»¶å°±å¾ˆéš¾éš”ç¦»é—®é¢˜ã€‚æˆ‘æ›¾ç»é‡åˆ°ä¸€äº›å›¢é˜Ÿç”¨ç»´æŠ¤çª—å£ä½œä¸ºè¿½è¸ªå˜æ›´çš„æ–¹æ³•ï¼Œç»“æœå¾ˆå¤šä¸ç›¸å…³çš„ä¿¡æ¯éƒ½æ¶Œäº†å‡ºæ¥ã€‚é—®é¢˜åœ¨äºåœ¨è¿™æ ·çš„ç»´æŠ¤çª—å£ä¸‹å‘ç”Ÿé—®é¢˜çš„æ—¶å€™ï¼Œå¾ˆéš¾éš”ç¦»é—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚<br>&emsp;&emsp;å¦‚æœæœ‰ä¸€ä¸ªç³»ç»Ÿä¸“é—¨ç”¨æ¥è®°å½•æ”¹åŠ¨é‚£å°±å¤ªæ£’äº†ï¼Œè¿™ä¸ªç³»ç»Ÿæœ€å¥½è¿˜å…è®¸å›æ»šé‚£äº›å¼•å‘é—®é¢˜çš„æ›´æ”¹ã€‚å¦‚æœæ²¡æœ‰åˆ«çš„é—®é¢˜ï¼Œè‹¥ä½ èƒ½æŠŠæ‰€æœ‰çš„æ”¹åŠ¨å›æ»šåˆ°é—®é¢˜å‘ç”Ÿä¹‹å‰ï¼Œè€Œé—®é¢˜ä¾æ—§å­˜åœ¨ï¼Œå°±æ’é™¤äº†ä¸€ä¸ªä¸»è¦çš„å‡è®¾ï¼Œç„¶åå¯ä»¥ç»§ç»­åšå…¶ä»–æµ‹è¯•ã€‚å³ä½¿ä½ èƒ½å›æ»šæ‰€æœ‰çš„æ”¹åŠ¨ï¼Œæœ€å¥½ä»ç„¶æ¯æ¬¡åªåšä¸€ä¸ªæ”¹åŠ¨ã€‚å›æ»šå¤šä¸ªæ”¹åŠ¨å¯èƒ½ä¼šè§£å†³é—®é¢˜ï¼Œä½†ä½ ä»ç„¶ä¸å¾—ä¸éå†æ¯ä¸ªæ”¹åŠ¨å»æ‰¾åˆ°é—®é¢˜çš„æºå¤´ã€‚<br>&emsp;&emsp;ä¸Šé¢è¯´äº†è¿™ä¹ˆå¤šï¼Œä½†æ”¹åŠ¨ä¸æ€»æ˜¯é€ æˆé—®é¢˜çš„åŸå› ã€‚äº‹å®ä¸Šï¼Œæˆ‘æ›¾ç»è§è¿‡â€æ›´æ”¹äº†ä»€ä¹ˆâ€è¿™ä¸ªé—®é¢˜åœ¨æ•…éšœæ’é™¤è¿‡ç¨‹ä¸­è½¬ç§»äº†å¾ˆå¤šæ³¨æ„åŠ›ã€‚åƒæ‰€æœ‰å…¶ä»–æ•…éšœæ’é™¤å“²å­¦ä¸€æ ·ï¼ŒéªŒè¯ä½ è®¤ä¸ºæ˜¯æ”¹åŠ¨é€ æˆçš„é—®é¢˜çš„å‡è®¾ï¼Œè€Œä¸è¦åœ¨åˆšç¢°åˆ°é—®é¢˜æ—¶å°±å›æ»šå…¨éƒ¨æ”¹åŠ¨ã€‚</p><h2 id="1-7-äº†è§£ç³»ç»Ÿå¦‚ä½•å·¥ä½œ"><a href="#1-7-äº†è§£ç³»ç»Ÿå¦‚ä½•å·¥ä½œ" class="headerlink" title="1.7 äº†è§£ç³»ç»Ÿå¦‚ä½•å·¥ä½œ"></a>1.7 äº†è§£ç³»ç»Ÿå¦‚ä½•å·¥ä½œ</h2><p>&emsp;&emsp;è¿™ä¹ˆå¤šå¹´æ¥ï¼Œä½œä¸ºä¸€ä¸ªç³»ç»Ÿç®¡ç†å‘˜æˆ‘äº†è§£åˆ°çš„ä¸€ç‚¹æ˜¯é‡åˆ°é—®é¢˜æ—¶ï¼Œæ¯ä¸ªäººéƒ½ä¼šæŒ‡è´£ä»–ä»¬çŸ¥ä¹‹ç”šå°‘çš„æŠ€æœ¯ã€‚åœ¨æˆ‘èŒä¸šç”Ÿæ¶¯çš„ä¸€æ®µæ—¶æœŸå†…ï¼ŒDNSæˆäº†æ‰€æœ‰ç½‘ç»œé—®é¢˜çš„æ›¿ç½ªç¾Šã€‚æˆ‘ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™æ ·çš„å±€é¢ï¼Œä¸è¿‡è‡ªæ‰“æˆ‘åœ¨é‚£é‡Œèµ·ï¼Œæˆ‘ä»¬çš„DNSæœåŠ¡å™¨ä¸€ç›´éƒ½å¾ˆç¨³å®šï¼Œä½†å‡ºç°ç½‘ç»œé—®é¢˜çš„æ—¶å€™ï¼Œäººä»¬æ€»ä¼šé—®ï¼šâ€æ˜¯ä¸æ˜¯DNSå®•æœºäº†ï¼Ÿâ€æˆ‘æ³¨æ„åˆ°æŒ‡è´£DNSæœ‰é—®é¢˜çš„äººå°±æ˜¯é‚£äº›å¯¹DNSäº†è§£æœ€å°‘çš„äººã€‚æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯åœ¨å…¬å¸å†…éƒ¨å¼€è®¾ä¸€ä¸ªè‡ªæ„¿å‚åŠ çš„è¯¾ç¨‹ï¼Œä¸»è®²DNSå¦‚ä½•å·¥ä½œã€‚åœ¨é‚£ä¹‹åï¼Œæˆ‘æ³¨æ„åˆ°å‚åŠ è¿‡è¯¾ç¨‹çš„äººåœ¨é‡åˆ°ç½‘ç»œé—®é¢˜æ—¶ä¸å†æŒ‡è´£DNS(ä½†å°‘æ•°æœªå‚åŠ è¯¥è¯¾ç¨‹çš„äººä»ç„¶æ˜¯è€æ ·å­)ã€‚<br>&emsp;&emsp;è¦ç‚¹æ˜¯ï¼Œæœ¬èƒ½åœ°å»æŒ‡è´£è‡ªå·±ä¸ç†Ÿæ‚‰çš„æŠ€æœ¯è¿™ä¸ªæ¯›ç—…æ’é™¤æ•…éšœçš„äººå‘˜å’Œå…¶ä»–äººä¹Ÿæœ‰ã€‚å¦‚æœä½ çŸ¥é“æ‰€æ’æŸ¥æ•…éšœçš„ç³»ç»Ÿå¦‚ä½•å·¥ä½œï¼Œä½ å°†ä¼šæ˜¯ä¸€ä¸ªé«˜æ•ˆçš„é—®é¢˜è§£å†³è€…ã€‚ä»è§£å†³Linuxé—®é¢˜çš„è§’åº¦è®²ï¼Œè¿™æ„å‘³ç€å¯¹TCP/IPã€DNSã€Linuxè¿›ç¨‹ã€ç¼–ç¨‹å’Œå†…å­˜ç®¡ç†éƒ½è¦æœ‰è¾ƒæ·±çš„ç†è§£ã€‚æœ¬ä¹¦å°†ä»¥æ•…éšœæ’é™¤ä¸ºä¸Šä¸‹æ–‡æ¥è§£é‡Šè¿™äº›ä¸»é¢˜ï¼Œä¸è¿‡è¿™äº›éƒ½æ˜¯éå¸¸ä¸é”™çš„ä¸»é¢˜ï¼Œå³ä½¿ä¸ä¸ºäº†æ’é™¤æ•…éšœä¹Ÿåº”è¯¥äº†è§£ã€‚<br>&emsp;&emsp;ä½ ä¼šå‘ç°ï¼Œå¯¹ç³»ç»Ÿå¦‚ä½•å·¥ä½œäº†è§£å¾—è¶Šå¤šï¼Œè§£å†³ç³»ç»Ÿé—®é¢˜çš„é€Ÿåº¦å°±è¶Šå¿«ï¼ŒåŒæ—¶ä¹Ÿä¼šå‘ç°ä½ å¯¹é—®é¢˜çš„é¢„æ„Ÿæ›´åŠ å‡†ç¡®ã€‚è¿™ä¹Ÿèƒ½å¸®åŠ©ä½ é¿å…åšæ— ç”¨åŠŸã€‚ä½ å°†ä¸ç”¨æ‰§è¡Œå¾ˆå¤šæµ‹è¯•å°±å¯ä»¥æ’é™¤å¼•èµ·æŸä¸ªé—®é¢˜çš„ä¸€ç³»åˆ—åŸå› ã€‚</p><h2 id="1-8-è°¨æ…ä½¿ç”¨Internet"><a href="#1-8-è°¨æ…ä½¿ç”¨Internet" class="headerlink" title="1.8 è°¨æ…ä½¿ç”¨Internet"></a>1.8 è°¨æ…ä½¿ç”¨Internet</h2><p>&emsp;&emsp;æ’é™¤æ•…éšœæ—¶ï¼ŒInternetæ˜¯ä¸€ä¸ªéå¸¸å®è´µçš„èµ„æºã€‚ä½ å¯èƒ½ä¸æ˜¯ä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªçœ‹åˆ°æŸæ¡é”™è¯¯æ¶ˆæ¯çš„äººã€‚å¾ˆæœ‰å¯èƒ½æœ‰äººå·²ç»ç¢°åˆ°è¿‡å’Œä½ ä¸€æ ·çš„é—®é¢˜ï¼Œè€Œä¸”ä½ æœ‰å¯èƒ½æœç´¢åˆ°å¯è¡Œçš„è§£å†³æ–¹æ³•ã€‚<br>&emsp;&emsp;ä½¿ç”¨Internetæ’é™¤æ•…éšœçš„æŒ‘æˆ˜æ˜¯åœ¨å¼€å§‹ç½‘ç»œæœç´¢ä¹‹å‰ï¼Œéœ€è¦å¯¹é—®é¢˜æœ‰æ­£ç¡®ã€æ¸…æ™°çš„ç†è§£ã€‚å‡å¦‚ä½ çš„æœåŠ¡å™¨æ²¡æœ‰è¿å…¥ç½‘ç»œï¼Œè€Œä½ åªæ˜¯åœ¨æœç´¢å¼•æ“ä¸­è¾“å…¥â€server not on networkâ€(æœåŠ¡å™¨è„±æœº)ï¼Œå¾ˆå¯èƒ½ä¸ä¼šå¾—åˆ°æœ‰ç”¨çš„ç»“æœã€‚ä¸€æ—¦ä½ é‡‡å–æŸäº›æ•…éšœæ’é™¤æªæ–½ç¼©å°äº†é—®é¢˜çš„èŒƒå›´ï¼Œå¹¶ä¸”å¯¹é—®é¢˜æœ‰äº†æ›´æ¸…æ™°çš„è®¤è¯†ï¼Œå°±èƒ½ä½¿ç”¨å…·ä½“ã€æœ‰é’ˆå¯¹æ€§çš„æœç´¢è¯æ¡å¸®åŠ©ä½ è§£å†³é—®é¢˜ã€‚<br>&emsp;&emsp;å½“é—®é¢˜æ•…éšœæ’é™¤çš„è¿‡ç¨‹ä¸­åŒ…å«äº†è¯¦ç»†çš„é”™è¯¯ç æˆ–çŸ­è¯­æ—¶ï¼ŒInternetæ˜¯æœ€æœ‰å¸®åŠ©çš„ã€‚æè¿°ç‰¹å®šé—®é¢˜çš„é”™è¯¯ç ç‰¹åˆ«æ–¹ä¾¿ï¼Œå› ä¸ºå¾ˆå®¹æ˜“æœç´¢åˆ°ç›¸å…³ä¿¡æ¯ï¼Œå³ä½¿ä½ ä¸äº†è§£é”™è¯¯ç çš„å«ä¹‰ã€‚ä¸€èˆ¬åœ¨æŸä¸ªè®ºå›èƒ½æ‰¾åˆ°ä¸ºä½ è§£é‡Šé”™è¯¯ç å«ä¹‰ä»¥åŠåº”è¯¥å¦‚ä½•å¤„ç†è¿™äº›é”™è¯¯çš„äººæˆ–çŸ¥è¯†åº“ã€‚å¦‚æœç¨‹åºè¾“å‡ºçš„é”™è¯¯ä¿¡æ¯è¶³å¤Ÿè¯¦å°½ï¼Œé‚£ä¹ˆå®ƒä»¬ä¹Ÿå¯ä»¥ä½œä¸ºå¸®åŠ©ä½ è§£å†³é—®é¢˜çš„ä¸€ä¸ªå¾ˆå¥½çš„æ¥æºã€‚<br>&emsp;&emsp;ä½¿ç”¨ç½‘ç»œæœç´¢çš„å¦ä¸€ä¸ªå±é™©æ˜¯ï¼šå¦‚æœå¯¹é—®é¢˜äº†è§£å¾—ä¸å¤Ÿæ·±å…¥æˆ–è€…æ²¡æœ‰ä½¿ç”¨ç‰¹å®šçš„å…³é”®è¯æœç´¢ï¼Œä½ å°±ä¼šå¾—åˆ°å¤§é‡æ— ä»·å€¼çš„ä¿¡æ¯ï¼Œå¹¶ä¸”é”™è¯¯çš„é—®é¢˜è¯Šæ–­æ­¥éª¤å°†ä¼šè®©ä½ ç¦»äº§ç”Ÿé—®é¢˜çš„æ ¹æºæ›´è¿œã€‚ä½ è¿˜å¯èƒ½ä¼šä»ä¸€ç¾¤ä¸€æ— æ‰€çŸ¥çš„äººé‚£é‡Œå¾—åˆ°å¾ˆå¤šå»ºè®®ã€‚æ€»æ˜¯ä»é—®é¢˜æœ¬èº«å‡ºå‘ï¼Œå°¤å…¶æ˜¯è¦ç¡®ä¿åœ¨å¤åˆ¶ã€ç²˜è´´ä»»ä½•å‘½ä»¤æˆ–ä»£ç ä¹‹å‰å¯¹å®ƒä»¬äº†å¦‚æŒ‡æŒã€‚</p><h2 id="1-9-æŠµåˆ¶é‡å¯"><a href="#1-9-æŠµåˆ¶é‡å¯" class="headerlink" title="1.9 æŠµåˆ¶é‡å¯"></a>1.9 æŠµåˆ¶é‡å¯</h2><p>&emsp;&emsp;åœ¨Windows 95æ—¶ä»£ï¼Œé‡å¯ç³»ç»Ÿé€šå¸¸æ˜¯ä¿®å¤é—®é¢˜çš„æœ€å¥½åŠæ³•ã€‚è™½ç„¶Windows 95æ—¶ä»£å·²ç»ä¹…è¿œï¼Œç”šè‡³ç°åœ¨æˆ‘ä»¬éƒ½ä¸å†ä½¿ç”¨Windowsä½œä¸ºæœåŠ¡å™¨ï¼Œä½†æ˜¯é‡å¯æ“ä½œåœ¨ä¸€äº›äººçš„è„‘æµ·ä¸­å·²ç»æ ¹æ·±è’‚å›ºï¼Œå½“å‘ç”Ÿæ•…éšœçš„æ—¶å€™ï¼Œä»–ä»¬çš„ç¬¬ä¸€ååº”å°±æ˜¯é‡å¯æœåŠ¡æˆ–è€…é‡å¯ç¡¬ä»¶è®¾å¤‡ã€‚<br>&emsp;&emsp;ä½¿ç”¨é‡å¯æ“ä½œä¿®å¤é—®é¢˜æœ€å±é™©ä¹‹å¤„ä¸åœ¨äºå®ƒä¸èƒ½å·¥ä½œï¼Œè€Œåœ¨äºæœ‰æ—¶å€™é‡å¯ç³»ç»Ÿç¡®å®ä¿®å¤äº†æ•…éšœã€‚å±é™©ä¹‹å¤„åœ¨äºå¦‚æœé€šè¿‡é‡å¯æ“ä½œä¿®å¤äº†é—®é¢˜ï¼Œä½ ä»ç„¶ä¸èƒ½è¯†åˆ«å‡ºé—®é¢˜çš„æ ¹æœ¬åŸå› ã€‚å› ä¸ºé—®é¢˜æ¶ˆå¤±äº†æ— æ³•ç»§ç»­æµ‹è¯•ï¼Œæ‰€ä»¥å¯èƒ½å†ä¹Ÿä¸èƒ½æ‰¾å‡ºäº§ç”Ÿé—®é¢˜çš„åŸå› ã€‚åœ¨é—®é¢˜ä¸å­˜åœ¨çš„æƒ…å†µä¸‹ï¼Œå¯»æ‰¾é—®é¢˜çš„åŸå› ç¡®å®éå¸¸å›°éš¾ã€‚å¦‚æœä½ ä¸èƒ½æ‰¾å‡ºé—®é¢˜çš„æ ¹æœ¬åŸå› ï¼Œå‡ ä¹å¯ä»¥ä¿è¯ä½ åœ¨æ™šäº›æ—¶å€™è¿˜ä¼šé‡åˆ°ç›¸åŒçš„é—®é¢˜ã€‚<br>&emsp;&emsp;ä¸è¦è¯¯è§£æˆ‘çš„æ„æ€ï¼Œæˆ‘ä¸æ˜¯è¯´æ’é™¤æ•…éšœæ—¶ï¼Œæ°¸è¿œä¸èƒ½é‡å¯ç¡¬ä»¶è®¾å¤‡æˆ–è€…é‡å¯æœåŠ¡ã€‚æˆ‘çš„æ„æ€æ˜¯ä½ åº”è¯¥æŠŠé‡å¯ä½œä¸ºæœ€åçš„æ‰‹æ®µã€‚åœ¨å¼€å§‹é—®é¢˜è¯Šæ–­ä¹‹å‰ï¼Œå°è¯•è·å¾—æ‰€æœ‰ä¸æ’é™¤æ•…éšœç›¸å…³çš„æ•°æ®ï¼Œä»¥é˜²é—®é¢˜æ¶ˆå¤±ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªå–å·§çš„ç­–ç•¥ï¼Œå°¤å…¶æ˜¯åœ¨é—®é¢˜éœ€è¦èŠ±è´¹é‡‘é’±å¹¶ä¸”ä½ çš„è€æ¿æˆ–è€…å®¢æˆ·å°–å«ç€è®©ä½ é‡å¯æœºå™¨çœ‹çœ‹é—®é¢˜æ˜¯å¦è§£å†³æ—¶ã€‚ä½†æ˜¯ï¼Œè¯·åšæŒç«‹åœºï¼Œå¦‚æœä½ è§‰å¾—è€æ¿æˆ–è€…å®¢æˆ·ä¸é«˜å…´ï¼Œé‚£å°±ç­‰åŒæ ·çš„é—®é¢˜å†æ¬¡å‡ºç°æ—¶å†è¯´å§ã€‚</p><h1 id="æœåŠ¡å™¨ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢ï¼ŸCPUã€RAMã€I-Oé—®é¢˜"><a href="#æœåŠ¡å™¨ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢ï¼ŸCPUã€RAMã€I-Oé—®é¢˜" class="headerlink" title="æœåŠ¡å™¨ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢ï¼ŸCPUã€RAMã€I/Oé—®é¢˜"></a>æœåŠ¡å™¨ä¸ºä»€ä¹ˆè¿™ä¹ˆæ…¢ï¼ŸCPUã€RAMã€I/Oé—®é¢˜</h1><p>&emsp;&emsp;å°½ç®¡æœåŠ¡å™¨çš„ç»å¤§éƒ¨åˆ†é—®é¢˜éƒ½ä¸ç½‘ç»œç›¸å…³ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€ç±»é—®é¢˜ä»…ä¸æœ¬åœ°æœåŠ¡å™¨ç›¸å…³ã€‚è®©è¿™ä¸ªé—®é¢˜å˜å¾—æ£˜æ‰‹çš„æ˜¯ï¼šæœ¬åœ°æœåŠ¡å™¨é—®é¢˜å’Œç½‘ç»œé—®é¢˜ç»å¸¸è¡¨ç°å‡ºç›¸åŒçš„å¾å…†ã€‚äº‹å®ä¸Šï¼ŒæœåŠ¡å™¨æœ¬åœ°çš„é—®é¢˜ä¼šå¯¼è‡´ç½‘ç»œé—®é¢˜ï¼Œåè¿‡æ¥ä¹Ÿä¸€æ ·ã€‚æœ¬ç« å°†ä¼šä»‹ç»ä¸“é—¨å‡ºç°åœ¨æœ¬æœºä¸Šçš„é—®é¢˜ï¼Œè€Œå°†å½±å“ç½‘ç»œçš„é—®é¢˜ç•™åˆ°ç¬¬5ç« ä»‹ç»ã€‚<br>&emsp;&emsp;å‡ ä¹DevOpså›¢é˜Ÿä¸­çš„æ‰€æœ‰æˆå‘˜éƒ½é‡åˆ°è¿‡æ€§èƒ½ä¸å¥½æˆ–å“åº”ç¼“æ…¢çš„ä¸»æœºï¼Œä¸è®ºæ˜¯è¯•å›¾æŸ¥å‡ºä¸ºä»€ä¹ˆæœ€è¿‘ä¸€æ¬¡æäº¤æ¯”ä¹‹å‰æ…¢å¾ˆå¤šçš„å¼€å‘è€…ï¼Œåœ¨ä»£ç éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¹‹å‰åŠªåŠ›æ‰§è¡Œè´Ÿè½½æµ‹è¯•çš„QAå·¥ç¨‹å¸ˆï¼Œè¿˜æ˜¯éœ€è¦ç¡®å®šæ˜¯å¦åº”è¯¥è´­ä¹°æ›´å¤šRAMã€CPUæˆ–è¿è¡Œé€Ÿåº¦æ›´å¿«çš„ç£ç›˜çš„ç³»ç»Ÿç®¡ç†å‘˜ã€‚è¿™äº›æŠ€æœ¯ç”šè‡³å¯ä»¥å¸®åŠ©ä½ æ’é™¤Linuxæ¡Œé¢ç³»ç»Ÿä¸­çš„è´Ÿè½½é—®é¢˜ã€‚<br>&emsp;&emsp;å…³äºä¸»æœºæœ€å¸¸è§çš„ä¸€ä¸ªé—®é¢˜å¯èƒ½æ˜¯æ€§èƒ½å¤ªå·®ï¼Œç”šè‡³éƒ½æ— æ³•å“åº”ã€‚é€šå¸¸ï¼Œç½‘ç»œæ•…éšœä¼šå¼•å‘è¿™ä¸ªé—®é¢˜ï¼Œä½†æœ¬ç« å°†ä¼šä»‹ç»ä¸€äº›æœ¬åœ°æ•…éšœæ’é™¤å·¥å…·ï¼Œå€ŸåŠ©è¿™äº›å·¥å…·å¯ä»¥åˆ†è¾¨å‡ºç½‘ç»œè¿‡è½½å’Œæœºå™¨è¿‡è½½ä¹‹é—´çš„åŒºåˆ«ã€‚<br>&emsp;&emsp;æœºå™¨è¿è¡Œç¼“æ…¢é€šå¸¸æ˜¯ç”±äºæ¶ˆè€—äº†å¤ªå¤šç³»ç»Ÿç‰¹å®šçš„èµ„æºã€‚ç³»ç»Ÿçš„ä¸»è¦èµ„æºåŒ…æ‹¬CPUã€RAMã€ç£ç›˜I/Oä»¥åŠç½‘ç»œï¼ˆå°†åœ¨ç¬¬5ç« ä»‹ç»ï¼‰ã€‚è¿‡åº¦ä½¿ç”¨è¿™äº›èµ„æºçš„ä»»ä½•ä¸€ç§éƒ½ä¼šè®©ç³»ç»Ÿé™·å…¥å›°å¢ƒï¼Œæ­¤æ—¶å”¯ä¸€çš„è§£å†³æ–¹æ³•å°±æ˜¯â€”â€”â€”â€”é‡å¯ã€‚ä¸è¿‡ï¼Œå¦‚æœèƒ½ç™»å½•åˆ°ç³»ç»Ÿä¹‹ä¸­ï¼Œåˆ™å¯ä»¥å€ŸåŠ©å¤§é‡å·¥å…·ç¡®å®šé—®é¢˜çš„èµ·å› ã€‚</p><h2 id="2-1ç³»ç»Ÿè´Ÿè½½"><a href="#2-1ç³»ç»Ÿè´Ÿè½½" class="headerlink" title="2.1ç³»ç»Ÿè´Ÿè½½"></a>2.1ç³»ç»Ÿè´Ÿè½½</h2><p>&emsp;&emsp;è§£å†³å¼•èµ·ç³»ç»Ÿè¿è¡Œç¼“æ…¢çš„é—®é¢˜æ—¶ï¼Œå¹³å‡ç³»ç»Ÿè´Ÿè½½å¯èƒ½æ˜¯æœ€å…ˆç”¨åˆ°çš„åŸºæœ¬åº¦é‡æ ‡å‡†ã€‚åœ¨æ’é™¤ç³»ç»Ÿè¿è¡Œç¼“æ…¢çš„é—®é¢˜æ—¶ï¼Œé€šå¸¸æˆ‘æ‰§è¡Œçš„ç¬¬ä¸€æ¡å‘½ä»¤æ˜¯<code>uptime</code>:  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">uptime</span><span class="token number">13</span>:35:03 up <span class="token number">103</span> days, <span class="token number">8</span> min, <span class="token number">5</span> users, load average: <span class="token number">2.03</span>, <span class="token number">20.17</span>, <span class="token number">15.09</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>&emsp;&emsp;<code>load average</code>åé¢çš„3ä¸ªæ•°å­—<code>2.03</code>ã€<code>20.17</code>å’Œ<code>15.09</code>åˆ†åˆ«ä»£è¡¨äº†<code>1åˆ†é’Ÿ</code>ã€<code>5åˆ†é’Ÿ</code>å’Œ<code>15åˆ†é’Ÿ</code>å†…æœºå™¨çš„å¹³å‡è´Ÿè½½ã€‚ä¸€ä¸ªç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ç­‰äºå¤„äºè¿è¡Œæˆ–è€…ä¸å¯æ‰“æ‰°çŠ¶æ€è¿›ç¨‹çš„å¹³å‡æ•°ã€‚å¯è¿è¡Œçš„è¿›ç¨‹è¦ä¹ˆæ­£åœ¨ä½¿ç”¨CPUï¼Œè¦ä¹ˆæ­£åœ¨ç­‰å¾…ä½¿ç”¨CPUï¼›ä¸å¯æ‰“æ‰°çŠ¶æ€çš„è¿›ç¨‹éƒ½åœ¨ç­‰å¾…IOå“åº”ã€‚<br>&emsp;&emsp;å¹³å‡è´Ÿè½½ä¸º1çš„å•CPUç³»ç»Ÿæ„å‘³ç€è¿™ä¸ªCPUå¤„äºæ’å®šè´Ÿè½½ã€‚å¦‚æœå•CPUç³»ç»Ÿçš„å¹³å‡è´Ÿè½½æ˜¯4ï¼Œé‚£ä¹ˆè¿™ä¸ªç³»ç»Ÿå¤„äºå®ƒå¯æ‰¿å—è´Ÿè½½èƒ½åŠ›çš„4å€ï¼Œæ‰€ä»¥3/4çš„è¿›ç¨‹éƒ½åœ¨ç­‰å¾…èµ„æºã€‚ä¸€ä¸ªç³»ç»Ÿçš„å¹³å‡è´Ÿè½½ä¸ä¼šå› ä¸ºä½ æ‰€æ‹¥æœ‰çš„CPUæ•°é‡è€Œæ›´æ”¹ï¼Œæ‰€ä»¥ï¼Œå¦‚æœå…·å¤‡ä¸¤ä¸ªCPUçš„ç³»ç»Ÿçš„å¹³å‡è´Ÿè½½æ˜¯1ï¼Œé‚£ä¹ˆå…¶ä¸­ä¸€ä¸ªCPUä¸€ç›´å¤„äºæ»¡è´Ÿè·çŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç³»ç»Ÿå¤„äº50%çš„è´Ÿè½½çŠ¶æ€ã€‚æ‰€ä»¥ï¼Œè´Ÿè½½çŠ¶æ€ä¸º1çš„å•CPUç³»ç»Ÿä¸è´Ÿè½½çŠ¶æ€ä¸º4çš„å››CPUç³»ç»Ÿä½¿ç”¨èµ„æºçš„é‡ä¸€æ ·ã€‚<br>&emsp;&emsp;1åˆ†é’Ÿã€5åˆ†é’Ÿã€15åˆ†é’Ÿçš„å¹³å‡è´Ÿè½½æè¿°äº†ç›¸å¯¹æ—¶é—´å†…è´Ÿè½½çš„å¹³å‡å€¼ï¼Œè¿™äº›å€¼åœ¨ç¡®å®šç³»ç»Ÿå½“å‰çŠ¶æ€æ—¶éå¸¸æœ‰ç”¨ã€‚1åˆ†é’Ÿå†…çš„å¹³å‡è´Ÿè½½ä¼šè®©ä½ å¯¹ç³»ç»Ÿå½“å‰æ‰€å¤„çš„çŠ¶æ€æœ‰ä¸€ä¸ªæ¸…æ™°çš„è®¤è¯†ï¼Œæ‰€ä»¥åœ¨å‰é¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ èƒ½çœ‹åˆ°æœåŠ¡å™¨åœ¨è¿‡å»çš„1åˆ†é’Ÿå†…è´Ÿè½½ä¸º2ï¼Œä½†æ˜¯åœ¨è¿‡å»çš„5åˆ†é’Ÿå†…å¹³å‡è´Ÿè½½å´é£™å‡åˆ°äº†20ã€‚å‰15åˆ†é’Ÿå†…ï¼Œè´Ÿè½½å¹³å‡å€¼æ˜¯15ã€‚ç”±æ­¤å¯çŸ¥ï¼Œæœºå™¨åœ¨è¿‡å»çš„15åˆ†é’Ÿå†…å¤„äºé«˜è´Ÿè½½çš„çŠ¶æ€ï¼Œè€Œä¸”5åˆ†é’Ÿå‰ç³»ç»Ÿè´Ÿè½½åˆå¼€å§‹å¢é•¿ï¼Œä½†æ˜¯ç°åœ¨å·²ç»å‡å¼±ã€‚è®©æˆ‘ä»¬å°†å®ƒä¸ä¸€ä¸ªå®Œå…¨ä¸åŒçš„å¹³å‡è´Ÿè½½åšä¸ªå¯¹æ¯”ã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">uptime</span>05:11:52 up <span class="token number">20</span> days, <span class="token number">55</span> min, <span class="token number">2</span> users, load average: <span class="token number">17.29</span>, <span class="token number">0.12</span>, <span class="token number">0.01</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>&emsp;&emsp;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ5åˆ†é’Ÿå†…å’Œ15åˆ†é’Ÿå†…çš„å¹³å‡è´Ÿè½½éƒ½å¾ˆä½ï¼Œä½†æ˜¯1åˆ†é’Ÿå†…çš„å¹³å‡è´Ÿè½½å´å¾ˆé«˜ï¼Œæ‰€ä»¥æˆ‘çŸ¥é“è´Ÿè½½çš„é£™å‡ç›¸å¯¹è€Œè¨€å‘ç”Ÿåœ¨æœ€è¿‘ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šå¸¸æˆ‘ä¼šè¿ç»­è¿è¡Œå¤šæ¬¡<code>uptime</code>å‘½ä»¤ï¼ˆæˆ–è€…ä½¿ç”¨<code>top</code>å‘½ä»¤ï¼Œé©¬ä¸Šæˆ‘å°±ä¼šè®²åˆ°è¿™ä¸ªå·¥å…·ï¼‰æ¥è§‚å¯Ÿè´Ÿè½½æ˜¯æŒç»­ä¸Šå‡è¿˜æ˜¯æ­£åœ¨ä¸‹é™ã€‚</p><p>ä»€ä¹ˆæ˜¯é«˜å¹³å‡è´Ÿè½½</p><p>&emsp;&emsp;ä¸€ä¸ªå€¼å¾—ç ”ç©¶çš„é—®é¢˜æ˜¯ï¼šå¹³å‡è´Ÿè½½å¤šå°‘ç®—é«˜ï¼Ÿç®€å•çš„å›ç­”æ˜¯â€è¿™å–å†³äºäº§ç”Ÿé«˜è´Ÿè½½çš„åŸå› â€ã€‚å› ä¸ºè´Ÿè½½æè¿°äº†æ­£åœ¨ä½¿ç”¨èµ„æºçš„æ´»åŠ¨è¿›ç¨‹çš„å¹³å‡æ•°é‡ï¼Œæ‰€ä»¥è´Ÿè½½çš„é£™å‡é€éœ²äº†å¾ˆå¤šä¿¡æ¯ã€‚æ˜ç¡®è´Ÿè½½æ˜¯CPUå¯†é›†å‹ï¼ˆç­‰å¾…CPUèµ„æºçš„è¿›ç¨‹ï¼‰ã€RAMå¯†é›†å‹ï¼ˆå°¤å…¶æ˜¯ï¼Œé¢‘ç¹ä½¿ç”¨çš„RAMè¢«ç§»å…¥äº†äº¤æ¢åŒºï¼‰è¿˜æ˜¯I/Oå¯†é›†å‹ï¼ˆäº‰å¤ºç£ç›˜æˆ–ç½‘ç»œI/Oèµ„æºçš„è¿›ç¨‹ï¼‰éå¸¸é‡è¦ã€‚<br>&emsp;&emsp;ä¾‹å¦‚ï¼Œå¦‚æœè¿è¡Œçš„ä¸€ä¸ªåº”ç”¨ç¨‹åºåœ¨ä¸åŒçš„æ—¶é—´ç‚¹äº§ç”Ÿå¤§é‡çš„åŒæ­¥çº¿ç¨‹ï¼Œè¿™äº›çº¿ç¨‹ä¼šåŒæ—¶å¯åŠ¨ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°è´Ÿè½½é£™å‡åˆ°20ã€40æˆ–è€…æ›´é«˜ï¼Œå®ƒä»¬åœ¨ç«äº‰ç³»ç»Ÿèµ„æºã€‚éšç€è¿™äº›è¿›ç¨‹é€æ¸å®Œæˆï¼Œè´Ÿè½½å°±ä¼šé™ä¸‹æ¥ã€‚<br>&emsp;&emsp;é€šå¸¸CPUå¯†é›†å‹çš„ç³»ç»Ÿä¼šæ¯”I/Oå¯†é›†å‹çš„ç³»ç»Ÿå“åº”åº¦æ›´é«˜ã€‚æˆ‘è§è¿‡æ•°ä»¥ç™¾è®¡CPUå¯†é›†å‹çš„ç³»ç»Ÿï¼Œæˆ‘ä»ç„¶å¯ä»¥åœ¨è¿™äº›ç³»ç»Ÿä¸Šè¿è¡Œæ•…éšœæ’é™¤å·¥å…·è€Œä¸”å…·æœ‰è‰¯å¥½çš„å“åº”æ—¶é—´ã€‚æˆ‘ä¹Ÿè§è¿‡IOè´Ÿè½½ç›¸å¯¹è¾ƒä½çš„I/Oå¯†é›†å‹ç³»ç»Ÿï¼Œåªæ˜¯ç™»å½•è¿™äº›ç³»ç»Ÿå°±éœ€è¦èŠ±è´¹ä¸€æ®µæ—¶é—´ï¼Œå› ä¸ºå®ƒä»¬çš„ç£ç›˜IOå®Œå…¨é¥±å’Œäº†ã€‚ç”¨å°½RAMèµ„æºçš„ç³»ç»Ÿé€šå¸¸ä¸I/Oå¯†é›†å‹çš„ç³»ç»Ÿè¡¨ç°ç›¸åŒï¼Œå› ä¸ºä¸€æ—¦ç³»ç»Ÿå¼€å§‹ä½¿ç”¨ç£ç›˜ä¸Šçš„äº¤æ¢å­˜å‚¨ï¼Œå®ƒå°±ä¼šæ¶ˆè€—ç£ç›˜èµ„æºï¼Œå¯¼è‡´è¿›ç¨‹é€æ¸å˜æ…¢ç›´è‡³åœæ­¢ã€‚</p><h2 id="2-2-ä½¿ç”¨topå‘½ä»¤è§£å†³è´Ÿè½½é—®é¢˜"><a href="#2-2-ä½¿ç”¨topå‘½ä»¤è§£å†³è´Ÿè½½é—®é¢˜" class="headerlink" title="2.2 ä½¿ç”¨topå‘½ä»¤è§£å†³è´Ÿè½½é—®é¢˜"></a>2.2 ä½¿ç”¨topå‘½ä»¤è§£å†³è´Ÿè½½é—®é¢˜</h2><p>&emsp;&emsp;å½“éœ€è¦è§£å†³é«˜è´Ÿè½½é—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å·¥å…·æ˜¯topå‘½ä»¤ã€‚åœ¨å‘½ä»¤è¡Œè¾“å…¥topå‘½ä»¤å¹¶æŒ‰ä¸‹Enteré”®åï¼Œé©¬ä¸Šå°±èƒ½çœ‹åˆ°å¤§é‡çš„ç³»ç»Ÿä¿¡æ¯ï¼ˆè§å›¾2-1ï¼‰ã€‚è¿™äº›æ•°æ®éƒ½ä¼šä¸æ–­æ›´æ–°ï¼Œæ‰€ä»¥ä½ èƒ½çœ‹åˆ°ç³»ç»Ÿçš„å®æ—¶ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç³»ç»Ÿå¯åŠ¨äº†å¤šä¹…ã€è´Ÿè½½å¹³å‡å€¼ã€ç³»ç»Ÿä¸­æ€»å…±æœ‰å¤šå°‘è¿›ç¨‹æ­£åœ¨è¿è¡Œã€æ€»å…±æœ‰å¤šå°‘å†…å­˜ã€ä½¿ç”¨äº†å¤šå°‘å†…å­˜ã€è¿˜å‰©å¤šå°‘å†…å­˜ï¼Œæœ€åè¿˜åŒ…å«ç³»ç»Ÿçš„è¿›ç¨‹åˆ—è¡¨ä»¥åŠå®ƒä»¬å ç”¨çš„èµ„æºæ•°é‡ã€‚ä½¿ç”¨topå‘½ä»¤å¯èƒ½æ— æ³•çœ‹åˆ°ç³»ç»Ÿå½“å‰è¿è¡Œçš„æ‰€æœ‰è¿›ç¨‹ï¼Œå› ä¸ºæ— æ³•å°†å®ƒä»¬éƒ½æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚topå‘½ä»¤é»˜è®¤æ’åºæ–¹å¼æ˜¯æŒ‰ç…§è¿›ç¨‹çš„CPUä½¿ç”¨æƒ…å†µä»ä¸Šåˆ°ä¸‹æ’åºï¼Œæ‰€ä»¥å¯ä»¥ä¸€çœ¼å°±èƒ½çœ‹åˆ°å“ªäº›è¿›ç¨‹æ­£åœ¨æ¶ˆè€—CPUèµ„æºã€‚</p><p><img src="/medias/drawing-bed/oops/0.jpg"></p><p>&emsp;&emsp;é‚£ä¹ˆå¦‚æœå‘ç°ä¸€ä¸ªè¿›ç¨‹å ç”¨äº†å…¨éƒ¨CPUèµ„æºï¼Œä½ æƒ³è¦ç»ˆæ­¢è¿™ä¸ªè¿›ç¨‹ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿtopå‘½ä»¤è¾“å‡ºçš„ç¬¬ä¸€åˆ—æ˜¯PIDï¼Œå®ƒä»£è¡¨ç¨‹åºçš„è¿›ç¨‹IDâ€”â€”â€”â€”ç³»ç»Ÿèµ‹ç»™æ¯ä¸ªè¿›ç¨‹çš„å”¯ä¸€IDã€‚æƒ³è¦<code>ç»ˆæ­¢æŸä¸ªè¿›ç¨‹</code>ï¼Œåªéœ€æŒ‰ä¸‹<code>K</code>æŒ‰é”®ï¼Œç„¶åè¾“å…¥æƒ³è¦ç»ˆæ­¢çš„<code>PID</code>ï¼Œæœ€åå½“ç³»ç»Ÿæç¤ºè¯¥è¿›ç¨‹å°†ä¼šç»ˆæ­¢äº<code>signal 15</code>æ—¶ï¼ŒæŒ‰ä¸‹<code>Enter</code>é”®å³å¯ã€‚<br>&emsp;&emsp;é»˜è®¤æƒ…å†µä¸‹topå‘½ä»¤åœ¨éäº¤äº’å¼æ¨¡å¼ä¸‹è¿è¡Œï¼Œå¦‚æœä¸éœ€è¦çœ‹æ˜¾ç¤ºåœ¨å±å¹•å¤–çš„ä¿¡æ¯ï¼Œé‚£ä¸€åˆ‡éƒ½è¿˜å¥½ã€‚å¦‚æœæƒ³è¦çœ‹åˆ°topå‘½ä»¤çš„å®Œæ•´è¾“å‡ºï¼Œæˆ–è€…æƒ³å°†è¿™äº›ä¿¡æ¯éƒ½é‡å®šå‘åˆ°æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆä½ å¯ä»¥åœ¨æ‰¹å¤„ç†æ¨¡å¼ä¸‹è¿è¡Œè¿™ä¸ªå‘½ä»¤ã€‚-bé€‰é¡¹å¯ä»¥å¼€å¯æ‰¹å¤„ç†æ¨¡å¼ï¼Œ-né€‰é¡¹å¯ä»¥æ§åˆ¶åœ¨é€€å‡ºtopå‘½ä»¤ä¹‹å‰ï¼Œåˆ·æ–°ä¿¡æ¯å¤šå°‘æ¬¡ã€‚ä¾‹å¦‚ï¼Œæƒ³çœ‹åˆ°å®Œæ•´çš„è¾“å‡ºï¼Œä»…éœ€è¿è¡Œä¸€æ¬¡topå‘½ä»¤ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">top</span> -b -n l<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæƒ³è¦å°†è¿™äº›ä¿¡æ¯å­˜å‚¨åˆ°åä¸ºtop_outputçš„æ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆè¯·è¾“å…¥å¦‚ä¸‹å‘½ä»¤:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">top</span> -b -n <span class="token number">1</span> <span class="token operator">></span> top_output<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæƒ³è¦æŸ¥çœ‹topå‘½ä»¤çš„è¾“å‡ºï¼ŒåŒæ—¶å°†è¯¥è¾“å‡ºå†™å…¥æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ä¾¿æ·çš„å‘½ä»¤è¡Œå·¥å…· tee:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">top</span> -b -n <span class="token number">1</span> <span class="token operator">|</span> <span class="token function">tee</span> top_output<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-2-1-äº†è§£topå‘½ä»¤çš„è¾“å‡º"><a href="#2-2-1-äº†è§£topå‘½ä»¤çš„è¾“å‡º" class="headerlink" title="2.2.1 äº†è§£topå‘½ä»¤çš„è¾“å‡º"></a>2.2.1 äº†è§£topå‘½ä»¤çš„è¾“å‡º</h3><p>&emsp;&emsp;ä½¿ç”¨topå‘½ä»¤æ¥æ’é™¤ç³»ç»Ÿè´Ÿè½½é—®é¢˜æ—¶ï¼ŒåŸºæœ¬æ­¥éª¤æ˜¯æ£€æŸ¥topçš„è¾“å‡ºï¼Œå€Ÿæ­¤æ˜ç¡®è€—å°½äº†å“ªäº›èµ„æºï¼ˆCPUã€RAMè¿˜æ˜¯ç£ç›˜I/Oï¼‰ã€‚ä¸€æ—¦æ¸…æ¥šäº†è¿™ä¸ªé—®é¢˜ï¼Œå°±å¯ä»¥å°è¯•æ£€æŸ¥åˆ°åº•æ˜¯å“ªäº›è¿›ç¨‹å¤§é‡æ¶ˆè€—äº†è¿™äº›èµ„æºã€‚é¦–å…ˆï¼Œæ£€æŸ¥ç³»ç»Ÿä¸­topå‘½ä»¤çš„æ ‡å‡†è¾“å‡º:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">top</span> - <span class="token number">14</span>:08:25 up <span class="token number">38</span> daysï¼Œ8:02ï¼Œ1 userï¼Œload average: <span class="token number">1.70</span>ï¼Œ1.77ï¼Œ1.68Tasks: <span class="token number">107</span> totalï¼Œ <span class="token number">3</span> runningï¼Œ104 sleepingï¼Œ <span class="token number">0</span> stoppedï¼Œ0 zombieCpu<span class="token punctuation">(</span>s<span class="token punctuation">)</span>: <span class="token number">11.4</span>%usï¼Œ29.6%syï¼Œ0.0%niï¼Œ58.3%idï¼Œ.7%waï¼Œ0.0%hiï¼Œ0.0%siï¼Œ0.8%stMem:  1024176k totalï¼Œ997408k usedï¼Œ 26768k freeï¼Œ 85520k buffersSwap: 1004052k totalï¼Œ  4360k usedï¼Œ999692k freeï¼Œ286040k cachedPID   <span class="token environment constant">USER</span>   PR NI  VIRT  RES  SHR  S %CPU %MEM     TINE+  COMWAND<span class="token number">9463</span>  mysql  <span class="token number">16</span>  <span class="token number">0</span>  686m  ll1m <span class="token number">3328</span> S   <span class="token number">53</span>  <span class="token number">5.5</span> <span class="token number">569</span>:17.64  mysqld<span class="token number">18749</span> nagios <span class="token number">16</span>  <span class="token number">0</span>  140m  134m <span class="token number">1868</span> S   <span class="token number">12</span>  <span class="token number">6.6</span>   <span class="token number">1345</span>:01  nagios2db_status<span class="token number">24636</span> nagios <span class="token number">17</span>  <span class="token number">0</span> <span class="token number">34660</span>  10m   <span class="token number">712</span> S    <span class="token number">8</span>  <span class="token number">0.5</span>   <span class="token number">1195</span>:15  nagios<span class="token number">22442</span> nagios <span class="token number">24</span>  <span class="token number">0</span>  <span class="token number">6048</span>  <span class="token number">2024</span> <span class="token number">1452</span> S    <span class="token number">8</span>  <span class="token number">0.1</span>   <span class="token number">0</span>:00.04  check_time.pl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;topå‘½ä»¤è¾“å‡ºçš„ç¬¬ä¸€è¡Œä¸ä½ ä¹‹å‰è§åˆ°çš„uptimeå‘½ä»¤çš„è¾“å‡ºä¸€è‡´ã€‚æ­£å¦‚ä½ åœ¨è¿™ä¸ªä¾‹å­ä¸­çœ‹åˆ°çš„ï¼Œå¯¹äºè¿™å°æ‹¥æœ‰4ä¸ªCPUçš„æœºå™¨æ¥è¯´ï¼Œç³»ç»Ÿè´Ÿè½½å¹¶ä¸å¤§ã€‚<br><code>top - 14:08:25 up 38 daysï¼Œ8:02ï¼Œ1 userï¼Œ1oad average: 1.70ï¼Œ1.77ï¼Œ1.68</code><br>&emsp;&emsp;ä¸è¿‡é™¤äº†æ ‡å‡†çš„ç³»ç»Ÿè´Ÿè½½ï¼Œtopå‘½ä»¤è¿˜ä¸ºä½ æä¾›äº†é¢å¤–çš„åº¦é‡æ ‡å‡†ã€‚ä¾‹å¦‚ï¼ŒCpu(s)è¿™ä¸€è¡Œæä¾›äº†å½“å‰CPUè¿è¡Œæƒ…å†µçš„ä¿¡æ¯:<br><code>Cpu(s): 11.4%usï¼Œ29.6%syï¼Œ0.0%niï¼Œ58.3%idï¼Œ0.7%waï¼Œ0.0%hiï¼Œ0.0%siï¼Œ0.0%st</code><br>&emsp;&emsp;å¦‚æœä½ ä¸æ¸…æ¥šè¿™äº›ç¼©å†™ä»£è¡¨ä»€ä¹ˆï¼Œé‚£ä¹ˆå®ƒä»¬å¯¹ä½ æ¯«æ— æ„ä¹‰ï¼Œæ‰€ä»¥æˆ‘å°†å®ƒä»¬éƒ½åˆ—åœ¨ä¸‹é¢:  </p><ul><li><input disabled="" type="checkbox"> us: ç”¨æˆ·CPUæ—¶é—´<br>è¿è¡Œéä¼˜é›…çš„ç”¨æˆ·è¿›ç¨‹æ‰€å CPUæ—¶é—´çš„ç™¾åˆ†æ¯”ï¼ˆä¼˜é›…ï¼Œè‹±æ–‡â€nicingâ€ï¼Œæ˜¯æŒ‡ä¸€ä¸ªè¿›ç¨‹å…è®¸ä½ æ ¹æ®å…¶ä»–è¿›ç¨‹æ›´æ”¹ä¼˜å…ˆçº§ï¼‰ã€‚  </li><li><input disabled="" type="checkbox"> sy: ç³»ç»ŸCPUæ—¶é—´<br>è¿è¡Œå†…æ ¸å’Œå†…æ ¸è¿›ç¨‹æ‰€å CPUæ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚  </li><li><input disabled="" type="checkbox"> ni: ä¼˜é›…CPUæ—¶é—´<br>å¦‚æœæ›´æ”¹è¿‡ä¸€äº›è¿›ç¨‹çš„ä¼˜å…ˆçº§ï¼Œè¿™ä¸ªæŒ‡æ ‡èƒ½å¤Ÿå‘Šè¯‰ä½ å®ƒä»¬æ‰€å CPUæ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚  </li><li><input disabled="" type="checkbox"> id: CPUç©ºé—²æ—¶é—´<br>è¿™æ˜¯ä½ å¸Œæœ›å…·å¤‡å¾ˆé«˜æ•°å€¼çš„åº¦é‡æŒ‡æ ‡ä¸­çš„ä¸€ä¸ªã€‚å®ƒä»£è¡¨äº†CPUçš„ç©ºé—²æ—¶é—´æ¯”ã€‚å¦‚æœç³»ç»Ÿè¿è¡Œç¼“æ…¢ï¼Œä½†æ˜¯è¿™ä¸ªæŒ‡æ ‡ç‰¹åˆ«é«˜ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥ç¡®å®šé—®é¢˜çš„åŸå› ä¸æ˜¯é«˜CPUè´Ÿè½½ã€‚  </li><li><input disabled="" type="checkbox"> wa: I/Oç­‰å¾…<br>è¿™ä¸ªæ•°å­—ä»£è¡¨äº†CPUæ—¶é—´ç”¨åœ¨ç­‰å¾…æ‰§è¡ŒI/Oæ“ä½œæ‰€å çš„ç™¾åˆ†æ¯”ã€‚å½“ä½ è§£å†³è¿è¡Œç¼“æ…¢çš„ç³»ç»Ÿé—®é¢˜çš„æ—¶å€™ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æœ‰ä»·å€¼çš„åº¦é‡æŒ‡æ ‡ï¼Œå› ä¸ºå¦‚æœè¿™ä¸ªæ•°å€¼å¾ˆä½ï¼Œé‚£ä¹ˆå°±èƒ½è½»æ¾æ’é™¤ç£ç›˜æˆ–è€…ç½‘ç»œI/Oçš„é—®é¢˜ã€‚  </li><li><input disabled="" type="checkbox"> hi: ç¡¬ä»¶ä¸­æ–­<br>CPUç”¨äºå¤„ç†ç¡¬ä»¶ä¸­æ–­æ‰€å æ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚  </li><li><input disabled="" type="checkbox"> si: è½¯ä»¶ä¸­æ–­<br>CPUç”¨åœ¨å¤„ç†è½¯ä»¶ä¸­æ–­æ‰€å æ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚  </li><li><input disabled="" type="checkbox"> st: æµé€çš„æ—¶é—´<br>å¦‚æœä½ æ­£åœ¨è¿è¡Œè™šæ‹Ÿæœºï¼Œè¿™ä¸ªåº¦é‡æŒ‡æ ‡ä¼šå‘Šè¯‰ä½ è™šæ‹Ÿæœºä¸­æ‰§è¡Œçš„å…¶ä»–ä»»åŠ¡æ‰€å CPUæ—¶é—´çš„ç™¾åˆ†æ¯”ã€‚  </li></ul><p>&emsp;&emsp;åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°ç³»ç»Ÿæœ‰è¶…è¿‡50%çš„ç©ºé—²æ—¶é—´ï¼Œè¿™ä¸æœºå™¨å…·å¤‡4ä¸ªCPUã€ç³»ç»Ÿè´Ÿè½½ä¸º1.70çš„æŒ‡æ ‡ç›¸åŒ¹é…ã€‚å½“ä½ å¤„ç†ä¸€ä¸ªè¿è¡Œç¼“æ…¢çš„ç³»ç»Ÿçš„æ—¶å€™ï¼Œé¦–å…ˆè¦è§‚å¯Ÿçš„åº¦é‡æŒ‡æ ‡ä¹‹ä¸€å°±æ˜¯I/Oç­‰å¾…æ—¶é—´ï¼Œå®ƒå¯ä»¥ç”¨æ¥æ’é™¤ç£ç›˜I/Oçš„é—®é¢˜ã€‚å¦‚æœI/Oç­‰å¾…æ—¶é—´å¾ˆä½ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹çœ‹CPUç©ºé—²æ—¶é—´ç™¾åˆ†æ¯”ï¼›å¦‚æœI/Oç­‰å¾…æ—¶é—´å¾ˆé«˜ï¼Œé‚£ä¹ˆä¸‹ä¸€æ­¥å°±æ˜¯ç¡®å®šæ˜¯ä»€ä¹ˆå› ç´ å¯¼è‡´I/Oç­‰å¾…æ—¶é—´æ‰€å çš„æ¯”é‡è¿™ä¹ˆé«˜ï¼Œè¿™ä¸€ç‚¹æˆ‘é©¬ä¸Šå°±ä¼šè®²åˆ°ã€‚å¦‚æœI/Oç­‰å¾…å’ŒCPUç©ºé—²æ—¶é—´ç™¾åˆ†æ¯”éƒ½å¾ˆä½ï¼Œé‚£ä¹ˆå¾ˆå¯èƒ½ä¼šçœ‹åˆ°ä¸€ä¸ªéå¸¸é«˜çš„ç”¨æˆ·æ—¶é—´ç™¾åˆ†æ¯”ï¼Œæ‰€ä»¥ä½ å¿…é¡»ç¡®å®šæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´äº†è¿™ä¹ˆé«˜çš„ç”¨æˆ·æ—¶é—´ç™¾åˆ†æ¯”ã€‚å¦‚æœI/Oç­‰å¾…æ—¶é—´æ‰€å ç™¾åˆ†æ¯”å¾ˆä½ï¼Œè€Œç©ºé—²æ—¶é—´ç™¾åˆ†æ¯”å¾ˆé«˜ï¼Œé‚£ä¹ˆä½ å°±çŸ¥é“ç³»ç»Ÿè¿è¡Œç¼“æ…¢ä¸æ˜¯CPUèµ„æºçš„åŸå› ï¼Œè€Œåº”è¯¥ä»åˆ«çš„åœ°æ–¹æ‰¾åŸå› ã€‚è¿™å¯èƒ½æ„å‘³ç€åº”è¯¥æŸ¥çœ‹ç½‘ç»œé—®é¢˜æˆ–è€…WebæœåŠ¡å™¨çš„é—®é¢˜ï¼Œæˆ–è€…æŸ¥çœ‹MySQLæŸ¥è¯¢ç¼“æ…¢çš„é—®é¢˜ç­‰ã€‚</p><h3 id="2-2-2-è§£å†³é«˜ç”¨æˆ·æ—¶é—´çš„é—®é¢˜"><a href="#2-2-2-è§£å†³é«˜ç”¨æˆ·æ—¶é—´çš„é—®é¢˜" class="headerlink" title="2.2.2 è§£å†³é«˜ç”¨æˆ·æ—¶é—´çš„é—®é¢˜"></a>2.2.2 è§£å†³é«˜ç”¨æˆ·æ—¶é—´çš„é—®é¢˜</h3><p>&emsp;&emsp;è§£å†³æ•…éšœçš„è¿‡ç¨‹ä¸­ä¸€ä¸ªå¸¸è§è€Œåˆç›¸å¯¹ç®€å•çš„é—®é¢˜æ˜¯ï¼Œç”±ç”¨æˆ·CPUæ—¶é—´ç™¾åˆ†æ¯”é«˜å¼•èµ·çš„é«˜è´Ÿè½½é—®é¢˜ã€‚è¿™å¾ˆå¸¸è§ï¼Œå› ä¸ºæœåŠ¡å™¨ä¸Šçš„æœåŠ¡å¾ˆå¯èƒ½ä¼šå ç³»ç»Ÿè´Ÿè½½çš„ç»å¤§éƒ¨åˆ†ï¼Œè€Œä¸”è¿™äº›æœåŠ¡éƒ½æ˜¯ç”¨æˆ·è¿›ç¨‹ã€‚å¦‚æœå‘ç°<code>ç”¨æˆ·æ—¶é—´ç™¾åˆ†æ¯”é«˜</code> ä½†<code>I/Oç­‰å¾…æ—¶é—´ç™¾åˆ†æ¯”å´å¾ˆä½</code>ï¼Œå¾ˆæ˜¾ç„¶ä½ éœ€è¦ç¡®å®šç³»ç»Ÿä¸­å“ªä¸€ä¸ª<code>è¿›ç¨‹å ç”¨äº†</code>å¦‚æ­¤<code>å¤§é‡çš„CPUèµ„æº</code>ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œtopå‘½ä»¤ä¼šæŒ‰ç…§å„ä¸ªè¿›ç¨‹CPUä½¿ç”¨ç‡ç”±é«˜åˆ°ä½æ’åºã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">  PID   <span class="token environment constant">USER</span> PR NI  VIRT  RES  SHR S %CPU %MEM     TIME+  COMMAND <span class="token number">9463</span>  mysql <span class="token number">16</span>  <span class="token number">0</span>  686m 111m <span class="token number">3328</span> S   <span class="token number">53</span>  <span class="token number">5.5</span> <span class="token number">569</span>:17.64  mysqld<span class="token number">18749</span> nagios  <span class="token number">1</span>  <span class="token number">0</span>  140m 134m <span class="token number">1868</span> S   <span class="token number">12</span>  <span class="token number">6.6</span>   <span class="token number">1345</span>:01  nagios2db_status<span class="token number">24636</span> nagios <span class="token number">17</span>  <span class="token number">0</span> <span class="token number">34660</span>  10m  <span class="token number">712</span> S    <span class="token number">8</span>  <span class="token number">0.5</span>   <span class="token number">1195</span>:15  nagios<span class="token number">22442</span> nagios <span class="token number">24</span>  <span class="token number">0</span>  <span class="token number">6048</span> <span class="token number">2024</span> <span class="token number">1452</span> S    <span class="token number">8</span>  <span class="token number">0.1</span>   <span class="token number">0</span>:00.04  check_time.pl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œmysqldè¿›ç¨‹æ¶ˆè€—äº†53%çš„CPUæ—¶é—´ï¼Œnagios2db_statusè¿›ç¨‹æ¶ˆè€—äº†12%çš„CPUæ—¶é—´ã€‚æ³¨æ„ï¼Œè¿™ä¸ªæ•°å­—ä»£è¡¨çš„æ˜¯æ‰€å å•ä¸ªCPUçš„ç™¾åˆ†æ¯”ï¼Œæ‰€ä»¥å¦‚æœä½ æ‹¥æœ‰ä¸€å°å…·å¤‡4ä¸ªCPUçš„æœºå™¨ï¼Œå¯èƒ½ä¼šçœ‹åˆ°å¤šä¸ªè¿›ç¨‹éƒ½è€—äº†99%çš„CPUæ—¶é—´ã€‚<br>&emsp;&emsp;ä½ ä¼šçœ‹åˆ°å¤§éƒ¨åˆ†é«˜CPUè´Ÿè½½çš„æƒ…å†µéƒ½æ˜¯ç”±äºCPU è¢«ä¸€ä¸ªã€ä¸¤ä¸ªæˆ–è€…å¾ˆå¤šä¸ªè¿›ç¨‹æ¶ˆè€—æ®†å°½ã€‚ä»»ä½•ä¸€ç§æƒ…å†µéƒ½å¾ˆå®¹æ˜“ç¡®å®šï¼Œå› ä¸ºåœ¨ç¬¬ä¸€ç§æƒ…å†µä¸‹ï¼Œtopå‘½ä»¤è¾“å‡ºä¸­å‰ä¸€ä¸¤ä¸ªè¿›ç¨‹éƒ½æœ‰éå¸¸é«˜çš„CPUç™¾åˆ†æ¯”ï¼Œè€Œå…¶ä½™è¿›ç¨‹æ‰€å CPUç™¾åˆ†æ¯”ç›¸å¯¹å¾ˆä½ï¼Œæ­¤æ—¶ï¼Œè§£å†³æ–¹æ³•å°±æ˜¯ç»ˆæ­¢å¤§é‡ä½¿ç”¨CPUèµ„æºçš„è¿›ç¨‹ï¼ˆæŒ‰Ké”®ï¼Œç„¶åè¾“å…¥å¯¹åº”è¿›ç¨‹çš„PIDï¼‰ã€‚<br>&emsp;&emsp;åœ¨å¤šè¿›ç¨‹çš„æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½è®©ç³»ç»Ÿåšäº†å¤ªå¤šäº‹ã€‚æ¯”å¦‚è¯´ï¼Œåœ¨WebæœåŠ¡å™¨ä¸­å¯èƒ½æœ‰å¤§é‡Apacheè¿›ç¨‹ï¼Œè¿˜æœ‰cronä¸­è¿è¡Œçš„éƒ¨åˆ†æ—¥å¿—è§£æè„šæœ¬ã€‚è¿™äº›è¿›ç¨‹å¯èƒ½ä¼šæ¶ˆè€—å·®ä¸å¤šç­‰é‡çš„CPUèµ„æºã€‚è¿™ç§é—®é¢˜çš„è§£å†³æ–¹æ¡ˆä»é•¿æœŸæ¥çœ‹ç›¸å½“å¤æ‚ã€‚ä»¥WebæœåŠ¡å™¨ä¸ºä¾‹ï¼Œä½ çš„ç¡®éœ€è¦è¿è¡Œå…¨éƒ¨Apacheè¿›ç¨‹ï¼ŒåŒæ—¶ä½ å¯èƒ½è¿˜éœ€è¦æ—¥å¿—è§£æå·¥å…·ã€‚åœ¨çŸ­æœŸå†…ï¼Œä½ å¯ä»¥ç»ˆæ­¢ï¼ˆæˆ–æ¨è¿Ÿï¼‰ä¸€äº›è¿›ç¨‹ç›´åˆ°è´Ÿè½½é™ä½ï¼Œä½†æ˜¯ä»é•¿æœŸæ¥çœ‹ï¼Œä½ å¯èƒ½éœ€è¦è€ƒè™‘å¢åŠ ç³»ç»Ÿèµ„æºæˆ–è€…å°†è¿™äº›åŠŸèƒ½åˆ†æ‹†åˆ°å¤šå°æœåŠ¡å™¨ä¸Šã€‚</p><h3 id="2-2-3-è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜"><a href="#2-2-3-è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜" class="headerlink" title="2.2.3 è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜"></a>2.2.3 è§£å†³å†…å­˜ä¸è¶³çš„é—®é¢˜</h3><p>&emsp;&emsp;topè¾“å‡ºä¸­çš„ä»¥ä¸‹ä¸¤è¡Œæä¾›äº†éå¸¸æœ‰ä»·å€¼çš„RAMä½¿ç”¨æƒ…å†µçš„ä¿¡æ¯ã€‚åœ¨å¤„ç†ç‰¹å®šçš„ç³»ç»Ÿé—®é¢˜ä¹‹å‰ï¼Œæ’é™¤å†…å­˜é—®é¢˜éå¸¸é‡è¦ã€‚</p><pre class="line-numbers language-none"><code class="language-none">Mem: 1024176k totalï¼Œ997408k usedï¼Œ 26768k freeï¼Œ 85520k buffersSwap:1004052k totalï¼Œ  4360k usedï¼Œ999692k freeï¼Œ286040k cached<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>&emsp;&emsp;ç¬¬1è¡Œå‘Šè¯‰æˆ‘ä»¬æœ‰å¤šå°‘ç‰©ç†å†…å­˜å¯ç”¨ã€å ç”¨äº†å¤šå°‘å†…å­˜ã€ç©ºé—²å¤šå°‘å†…å­˜ä»¥åŠç¼“å­˜äº†å¤šå°‘å†…å­˜ã€‚ç¬¬2è¡Œä¸ºæˆ‘ä»¬æä¾›äº†ç›¸ä¼¼çš„ä¿¡æ¯ï¼Œäº¤æ¢å­˜å‚¨ä»¥åŠLinuxæ–‡ä»¶ç¼“å­˜ä½¿ç”¨äº†å¤šå°‘RAMã€‚ä¸€çœ¼çœ‹ä¸Šå»ä¼šä»¥ä¸ºç³»ç»Ÿå†…å­˜å¿«è¦è€—å°½äº†ï¼Œå› ä¸ºç³»ç»Ÿä»…æ˜¾ç¤ºæœ‰26768KBç©ºé—²å†…å­˜ã€‚ä¸å°‘æ•…éšœæ’é™¤äººå‘˜éƒ½ä¼šè¢«è¾“å‡ºä¸­ä¸Linuxæ–‡ä»¶ç¼“å­˜ç›¸å…³çš„å·²ç”¨å’Œç©ºé—²çš„ä¿¡æ¯è¯¯å¯¼ã€‚ä¸€æ—¦Linuxå°†ä¸€ä¸ªæ–‡ä»¶è½½å…¥åˆ°RAMä¸­ï¼Œå½“ç¨‹åºç”¨å®Œè¿™ä¸ªæ–‡ä»¶çš„æ—¶å€™ï¼Œä¸éœ€è¦å°†å®ƒä»RAMä¸­ç§»é™¤ã€‚å¦‚æœè¿˜æœ‰å¯ç”¨çš„RAMï¼ŒLinuxå°†ä¼šåœ¨RAMä¸­ç¼“å­˜è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™æ ·å¦‚æœä¸€ä¸ªç¨‹åºå†æ¬¡è®¿é—®è¿™ä¸ªæ–‡ä»¶ï¼Œè®¿é—®é€Ÿåº¦å°†ä¼šå¾—åˆ°å¤§å¹…æå‡ã€‚å¦‚æœç³»ç»Ÿçš„ç¡®éœ€è¦ä¸ºæ´»åŠ¨çš„è¿›ç¨‹æä¾›RAMï¼Œé‚£RAMä¸­å°†ä¸ä¼šç¼“å­˜è¿™ä¹ˆå¤šæ–‡ä»¶ã€‚ç”±äºæ–‡ä»¶ç¼“å­˜çš„å­˜åœ¨ï¼Œé€šå¸¸åœ¨æœåŠ¡å™¨è¿è¡Œç›¸å½“é•¿çš„ä¸€æ®µæ—¶é—´åï¼Œéƒ½ä¼šæ˜¾ç¤ºä»…æœ‰å°‘é‡RAMç©ºé—²ï¼Œè€Œå…¶ä½™çš„éƒ½è¢«ç¼“å­˜å ç”¨ã€‚<br>&emsp;&emsp;æƒ³è¦æ‰¾å‡ºè¿›ç¨‹åˆ°åº•çœŸæ­£ä½¿ç”¨äº†å¤šå°‘RAMï¼Œä½ å¿…é¡»åˆ¨é™¤RAMä¸­çš„æ–‡ä»¶ç¼“å­˜ã€‚æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ç¤ºä¾‹ä»£ç ä¸€æ ·ï¼Œåœ¨å·²ç”¨çš„997408KBçš„RAMä¸­ï¼Œæœ‰286040KBçš„RAMè¢«æ–‡ä»¶ç¼“å­˜å ç”¨ï¼Œæ‰€ä»¥è¿™å°±æ˜¯è¯´å®é™…ä¸Šä»…ä½¿ç”¨äº†711368KBçš„RAMã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œç³»ç»Ÿä»ç„¶æœ‰å¤§é‡å¯ç”¨çš„å†…å­˜èµ„æºï¼Œå‡ ä¹æ²¡æœ‰ä½¿ç”¨ä»»ä½•äº¤æ¢å­˜å‚¨ã€‚å³ä¾¿ä½ çš„ç¡®çœ‹åˆ°ä½¿ç”¨äº†ä¸€äº›äº¤æ¢å­˜å‚¨ï¼Œè¿™ä¹Ÿä¸è¶³ä»¥ä½œä¸ºé—®é¢˜çš„å¾å…†ã€‚å¦‚æœä¸€ä¸ªè¿›ç¨‹è½¬ä¸ºç©ºé—²çŠ¶æ€ï¼ŒLinuxé€šå¸¸ä¼šå°†å®ƒå ç”¨çš„RAMé‡Šæ”¾ï¼Œä¾›å…¶ä»–è¿›ç¨‹ä½¿ç”¨ã€‚è¾¨åˆ«æ˜¯å¦è€—å°½äº†RAMçš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯æŸ¥çœ‹æ–‡ä»¶ç¼“å­˜ã€‚å¦‚æœå®é™…ç”¨çš„å†…å­˜å‡å»æ–‡ä»¶ç¼“å­˜çš„å€¼å¾ˆå¤§ï¼ŒåŒæ—¶äº¤æ¢å­˜å‚¨çš„å€¼ä¹Ÿå¾ˆé«˜ï¼Œå¾ˆå¯èƒ½çš„ç¡®æœ‰å†…å­˜é—®é¢˜ã€‚<br>&emsp;&emsp;å¦‚æœçœŸçš„å‘ç°äº†å†…å­˜é—®é¢˜ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ç¡®å®šå“ªäº›è¿›ç¨‹æ¶ˆè€—äº†RAMã€‚topé»˜è®¤æŒ‰ç…§CPUçš„ä½¿ç”¨ç‡æ’åºï¼Œæ‰€ä»¥ä½ éœ€è¦å°†å…¶æ”¹ä¸ºæŒ‰ç…§RAMä½¿ç”¨ç‡æ¥æ’åºã€‚ä¿æŒtopçš„æ‰“å¼€çŠ¶æ€ï¼Œç„¶åæŒ‰ä¸‹Mé”®ã€‚è¿™å°±ä¼šè®©æ‰€æœ‰è¿›ç¨‹æŒ‰ç…§RAMçš„ä½¿ç”¨ç‡æ’åºã€‚</p><pre class="line-numbers language-none"><code class="language-none">  PID USER   PR NI  VIRTï¹’RES  SHR S %CPU %MEM   TIME+  COMMAND18749 nagios 16  0  140m 134m 1868 S   12  6.6 1345:01  nagios2db_status 9463 mysql  16  0  686m 111m 3328 S   53  5.5  569:17  mysqld24636 nagios 17  0 34660  10m  712 S    8  0.5 1195:15  nagios22442 nagios 24  0   048 2024 1452 S    8  0.1 0:00.04  check_time.pl<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;æ³¨æ„%MEMè¿™ä¸€åˆ—ï¼Œä¼šçœ‹åˆ°å‰å‡ ä¸ªè¿›ç¨‹å ç”¨äº†å¤§é‡RAMã€‚å¦‚æœä½ æ‰¾åˆ°äº†å¤§é‡ä½¿ç”¨RAMçš„è¿›ç¨‹ï¼Œå¯ä»¥ç»ˆæ­¢å®ƒä»¬ï¼Œæˆ–è€…æ ¹æ®ç¨‹åºï¼Œé€šè¿‡ä¸“é—¨çš„æ•…éšœæ’é™¤æ–¹æ³•æ¥å¯»æ‰¾æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´è¿™äº›è¿›ç¨‹å ç”¨äº†å¤§é‡RAMã€‚<br><strong>æ³¨æ„</strong><br>&emsp;&emsp;<em>å®é™…ä¸Štopå‘½ä»¤çš„è¾“å‡ºå¯ä»¥æ ¹æ®ä»»ä½•åˆ—æ’åºã€‚æƒ³è¦æ›´æ”¹topè¾“å‡ºçš„æ’åºæ–¹å¼ï¼ŒæŒ‰Fé”®è¿›å…¥é€‰æ‹©æ’åºåˆ—çš„ç•Œé¢ã€‚åœ¨æŒ‰ä¸‹å¯¹åº”ç‰¹å®šåˆ—çš„æŒ‰é”®ä¹‹åï¼ˆæ¯”å¦‚ï¼ŒKå¯¹åº”CPUåˆ—ï¼‰ï¼Œå†æŒ‰Enteré”®å°±èƒ½å›åˆ°topçš„è¾“å‡ºç•Œé¢ã€‚</em><br>&emsp;&emsp;Linuxå†…æ ¸ä¹Ÿæœ‰ä¸€ä¸ªå†…å­˜è€—å°½ï¼ˆOOMï¼‰ç»ˆç»“è€…ï¼Œå¦‚æœä½å†…å­˜å¯¼è‡´ç³»ç»Ÿè¿è¡Œå±é™©ï¼Œå®ƒå°±ä¼šä»‹å…¥ã€‚å½“ç³»ç»Ÿå†…å­˜å¿«è¦è€—å°½çš„æ—¶å€™ï¼ŒOOMç»ˆç»“è€…å°±ä¼šå¼€å§‹ç»ˆæ­¢è¿›ç¨‹ã€‚æœ‰äº›æƒ…å†µä¸‹ï¼Œç»ˆæ­¢çš„å¯èƒ½æ˜¯å ç”¨å¤§é‡RAMçš„è¿›ç¨‹ï¼Œä½†å®ƒå¹¶ä¸èƒ½ä¿è¯ä¸ä¼šç»ˆæ­¢æœªå ç”¨å¤§é‡RAMçš„è¿›ç¨‹ã€‚æœ‰çš„æ—¶å€™å®ƒä¹Ÿä¼šç»ˆæ­¢åƒsshdè¿™æ ·çš„ç¨‹åºæˆ–è€…å…¶ä»–è¿›ç¨‹ï¼Œè€Œä¸æ˜¯çœŸæ­£çš„ç½ªé­ç¥¸é¦–ã€‚å¾ˆå¤šæ—¶å€™ï¼ŒOOMç»ˆæ­¢äº†ä¸€äº›è¿›ç¨‹ä¹‹åï¼Œç³»ç»Ÿå°±ä¼šå˜å¾—ä¸å¤§ç¨³å®šï¼Œæ‰€ä»¥ä½ ä¸å¾—ä¸é‡å¯æœºå™¨ä»¥ç¡®ä¿æ‰€æœ‰çš„ç³»ç»Ÿè¿›ç¨‹éƒ½åœ¨æ­£å¸¸è¿è¡Œã€‚å¦‚æœOOMç»ˆç»“è€…ä»‹å…¥äº†ï¼Œåœ¨/var/log/syslogä¸­ä½ ä¼šçœ‹åˆ°å¦‚ä¸‹è¡Œ:</p><pre class="line-numbers language-none"><code class="language-none">1228419127.32453.1704.hostname:2,S:Out of Memory: Kil1ed process 21389 (java).1228419127.32453_1710.hostname:2,S:Out of Memory: Killed process 21389 (java).<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="2-2-4-è§£å†³é«˜I-Oç­‰å¾…æ—¶é—´é—®é¢˜"><a href="#2-2-4-è§£å†³é«˜I-Oç­‰å¾…æ—¶é—´é—®é¢˜" class="headerlink" title="2.2.4 è§£å†³é«˜I/Oç­‰å¾…æ—¶é—´é—®é¢˜"></a>2.2.4 è§£å†³é«˜I/Oç­‰å¾…æ—¶é—´é—®é¢˜</h3><p>&emsp;&emsp;å½“ä½ çœ‹åˆ°IOç­‰å¾…æ—¶é—´æ‰€å CPUæ—¶é—´çš„æ¯”é‡å¾ˆé«˜çš„æ—¶å€™ï¼Œé¦–å…ˆéœ€è¦æ£€æŸ¥çš„å°±æ˜¯æœºå™¨æ˜¯å¦æ­£åœ¨å¤§é‡ä½¿ç”¨äº¤æ¢ç©ºé—´ã€‚å› ä¸ºç¡¬ç›˜æ“ä½œçš„é€Ÿåº¦è¿œè¿œä½äºRAMï¼Œæ‰€ä»¥å½“ç³»ç»Ÿå†…å­˜è€—å°½ï¼Œå¼€å§‹ä½¿ç”¨äº¤æ¢ç©ºé—´çš„æ—¶å€™ï¼Œç³»ç»Ÿçš„æ€§èƒ½ä¼šå—åˆ°ä¸¥é‡å“ã€‚ä»»ä½•æƒ³è¦è®¿é—®ç¡¬ç›˜çš„æ“ä½œéƒ½è¦å®Œæˆä¸ç¡¬ç›˜çš„I/Oäº¤æ¢ã€‚æ‰€ä»¥ï¼Œæ•…éšœæ’é™¤çš„ç¬¬ä¸€æ­¥æ˜¯çœ‹å†…å­˜æ˜¯å¦è€—å°½ï¼Œå¦‚æœæ˜¯ï¼Œå…ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¦‚æœè¿˜æœ‰å¤§é‡å¯ç”¨çš„RAMï¼Œä½ éœ€è¦æ˜ç¡®å“ªä¸ªè¿›ç¨‹å ç”¨äº†å¤§éƒ¨åˆ†I/Oæ“ä½œã€‚<br>&emsp;&emsp;æœ‰çš„æ—¶å€™å¾ˆéš¾å¼„æ˜ç™½åˆ°åº•æ˜¯å“ªä¸ªè¿›ç¨‹å ç”¨äº†å¤§é‡I/Oèµ„æºï¼Œä½†æ˜¯å¦‚æœç³»ç»Ÿä¸­å­˜åœ¨å¤šä¸ªåˆ†åŒºï¼Œä½ å¯ä»¥ç¼©å°èŒƒå›´ï¼Œæ‰¾åˆ°å“ªä¸ªåˆ†åŒºæ­£åœ¨æ‰§è¡Œå¤§é‡IOæ“ä½œã€‚æƒ³è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œéœ€è¦ä½¿ç”¨iostatç¨‹åºï¼ŒåŸºäºRed Hatå’ŒåŸºäºDebiançš„ç³»ç»Ÿçš„sysstatåŒ…ä¸­éƒ½æä¾›äº†è¿™ä¸ªç¨‹åºã€‚å¦‚æœä½ çš„æœºå™¨æ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥é€šè¿‡åŒ…ç®¡ç†å·¥å…·æ¥å®‰è£…ã€‚<br>&emsp;&emsp;åœ¨è§£å†³é—®é¢˜ä¹‹å‰ï¼Œä½ æœ€å¥½å…ˆå®‰è£…å¥½è¿™ä¸ªç¨‹åºã€‚å®‰è£…äº†è¿™ä¸ªç¨‹åºåï¼Œå°±å¯ä»¥ä¸å¸¦ä»»ä½•å‚æ•°è¿è¡Œiostatï¼Œè§‚å¯Ÿç³»ç»Ÿçš„æ•´ä½“æƒ…å†µã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> iostatLinux <span class="token number">2.6</span>.24-19-server <span class="token punctuation">(</span>hostname<span class="token punctuation">)</span>   01/31/2009avg-cpu:  %user  %nice  %system  %iowait  %steal  %idle           <span class="token number">5.73</span>   <span class="token number">0.07</span>     <span class="token number">2.03</span>     <span class="token number">0.53</span>    <span class="token number">0.00</span>  <span class="token number">91.64</span>Device:  tps  Blk_read/s  B1k_wrtn/s  B1k_read  Blk_wrtnsda     <span class="token number">9.82</span>      <span class="token number">417.96</span>       <span class="token number">27.53</span>  <span class="token number">30227262</span>   <span class="token number">1990625</span>sda1    <span class="token number">6.55</span>      <span class="token number">219.10</span>        <span class="token number">7.12</span>  <span class="token number">15845129</span>    <span class="token number">515216</span>sda2    <span class="token number">0.04</span>        <span class="token number">0.74</span>        <span class="token number">3.31</span>     <span class="token number">53506</span>    <span class="token number">239328</span>sda3    <span class="token number">3.24</span>      <span class="token number">198.12</span>       <span class="token number">17.09</span>  <span class="token number">14328323</span>   <span class="token number">1236081</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;é¦–å…ˆçœ‹åˆ°çš„æ˜¯ä¸topå‘½ä»¤ç›¸ä¼¼çš„CPUä¿¡æ¯ï¼Œä¸‹é¢ç´§è·Ÿç€ç³»ç»Ÿä¸Šæ‰€æœ‰ç¡¬ç›˜è®¾å¤‡åŠå…¶åˆ†åŒºçš„I/OçŠ¶æ€ä¿¡æ¯ã€‚ä¸‹é¢æ˜¯å„åˆ—ä»£è¡¨çš„æ„ä¹‰:  </p><ul><li><input disabled="" type="checkbox"> tps<br>è¿™ä¸ªå€¼åˆ—å‡ºäº†è®¾å¤‡æ¯ç§’çš„ä¼ è¾“é‡ã€‚â€ä¼ è¾“â€ï¼ˆTransferï¼‰æ˜¯å‘è®¾å¤‡å‘é€I/Oè¯·æ±‚çš„å¦ä¸€ç§è¡¨è¾¾æ–¹å¼ã€‚  </li><li><input disabled="" type="checkbox"> Blk_read/s<br>è¡¨ç¤ºæ¯ç§’ä»è®¾å¤‡è¯»å–çš„æ•°æ®é‡ã€‚  </li><li><input disabled="" type="checkbox"> Blk_wrtn/s<br>è¡¨ç¤ºæ¯ç§’å‘è®¾å¤‡å†™å…¥çš„æ•°æ®é‡ã€‚  </li><li><input disabled="" type="checkbox"> Blk_read<br>è¿™ä¸€åˆ—è¡¨ç¤ºä»è®¾å¤‡è¯»å–çš„æ•°æ®æ€»é‡ã€‚  </li><li><input disabled="" type="checkbox"> Blk_wrtn<br>è¿™ä¸€åˆ—è¡¨ç¤ºå†™å…¥è®¾å¤‡çš„æ•°æ®æ€»é‡ã€‚  </li></ul><p>&emsp;&emsp;å½“ç³»ç»Ÿå¤„äºé«˜I/Oè´Ÿè½½çŠ¶æ€çš„æ—¶å€™ï¼Œé¦–å…ˆå°±æ˜¯è§‚å¯Ÿæ¯ä¸ªåˆ†åŒºï¼Œçœ‹çœ‹å“ªä¸ªåˆ†åŒºçš„I/Oè´Ÿè½½æœ€é«˜ã€‚æ¯”å¦‚è¯´ï¼Œä½ æœ‰ä¸€å°æ•°æ®åº“æœåŠ¡å™¨ï¼Œæ•°æ®åº“æœ¬èº«å­˜å‚¨åœ¨/dev/sda3åˆ†åŒºã€‚ä½ å¦‚æœçœ‹åˆ°å¤§é‡çš„I/Oæ“ä½œæ¥è‡ªè¿™é‡Œï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„çº¿ç´¢:æ•°æ®åº“å¾ˆå¯èƒ½å ç”¨äº†å¤§é‡I/Oèµ„æºã€‚<br>&emsp;&emsp;å¼„æ˜ç™½äº†è¿™ä¸€ç‚¹åï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ç¡®å®šI/Oæ“ä½œå¤§éƒ¨åˆ†æ¥è‡ªè¯»å–è¿˜æ˜¯å†™å…¥ã€‚å‡è®¾ä½ æ€€ç–‘å¤‡ä»½å·¥ä½œå¯¼è‡´äº†I/Oæ“ä½œçš„å¢é•¿ã€‚å› ä¸ºå¤‡ä»½å·¥ä½œçš„æ“ä½œä¸»è¦é›†ä¸­äºä»æ–‡ä»¶ç³»ç»Ÿä¸­è¯»å–æ–‡ä»¶ï¼Œç„¶åé€šè¿‡ç½‘ç»œä¼ è¾“åˆ°å¤‡ç”¨æœåŠ¡å™¨ï¼Œå¦‚æœå¤§é‡çš„I/Oæ“ä½œéƒ½æ¥è‡ªäºå†™å…¥è€Œä¸æ˜¯è¯»å–æ“ä½œï¼Œé‚£ä¹ˆå¤§æ¦‚å°±å¯ä»¥æ’é™¤è¿™ä¸ªé—®é¢˜ã€‚<br><strong>æ³¨æ„</strong><br>&emsp;&emsp;<em>ä½ å¯èƒ½éœ€è¦è¿è¡Œiostatå‘½ä»¤å¤šæ¬¡ï¼Œä»¥æ­¤å¾—åˆ°ç³»ç»Ÿå½“å‰çš„ç²¾ç¡®I/OçŠ¶å†µã€‚å¦‚æœåœ¨å‘½ä»¤è¡ŒæŒ‡å®šä¸€ä¸ªæ•°å­—å‚æ•°ï¼Œiostatå°±ä¼šæŒç»­è¿è¡Œå¹¶æ ¹æ®æŒ‡å®šçš„ç§’æ•°åˆ·æ–°è¾“å‡ºä¿¡æ¯ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœä½ æƒ³è¦æ¯2ç§’çœ‹åˆ°ä¸€æ¬¡iostatçš„è¾“å‡ºï¼Œå°±å¯ä»¥è¾“å…¥sudo iostat 2ã€‚å¦‚æœä½ æœ‰ä»»ä½•NFSå…±äº«ï¼Œiostatå¦ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„å‚æ•°æ˜¯-nï¼Œå½“ä½ æŒ‡å®šäº†-nå‚æ•°ï¼Œiostatå°±ä¼šç»™å‡ºæ‰€æœ‰NFSå…±äº«çš„I/Oç»Ÿè®¡ä¿¡æ¯ã€‚</em><br>&emsp;&emsp;é™¤äº†iostatï¼Œåœ¨æœ€æ–°çš„å‘å¸ƒç‰ˆä¸­ï¼Œæˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ªå¾ˆç®€å•çš„å·¥å…·ã€‚å®é™…ä¸Šï¼Œå®ƒæ˜¯topå’Œiostatç¨‹åºçš„æ··åˆä½“ï¼Œèƒ½å¤Ÿæ˜¾ç¤ºç³»ç»Ÿä¸­æ‰€æœ‰è¿è¡Œè¿›ç¨‹å¹¶å°†è¿›ç¨‹æ ¹æ®IOç»Ÿè®¡ä¿¡æ¯æ’åºã€‚è¿™ä¸ªè½¯ä»¶ä½¿ç”¨äº†Linuxå†…æ ¸çš„ä¸€äº›æ–°ç‰¹æ€§ï¼Œæ‰€ä»¥éœ€è¦2.6.20æˆ–è€…æ›´æ–°çš„å†…æ ¸ã€‚å¦‚æœé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰å®‰è£…è¿™ä¸ªç¨‹åºï¼Œé‚£ä¹ˆå¯ä»¥åœ¨iotopåŒ…ä¸­æ‰¾åˆ°å®ƒã€‚è¿™ä¸ªå·¥å…·åŒ…å«åœ¨åŸºäºDebiançš„ç‰ˆæœ¬ä¸­ï¼Œä½†æ˜¯å¯¹äºåŸºäºRed Hatçš„ç‰ˆæœ¬æ¥è¯´ï¼Œä½ å°±éœ€è¦åœ¨ç½‘ä¸Šæˆ–è€…ä»ç¬¬ä¸‰æ–¹ä»“åº“ä¸­å¯»æ‰¾å¹¶å®‰è£…ç¬¬ä¸‰æ–¹çš„RPMã€‚å®‰è£…äº†è¿™ä¸ªåŒ…åï¼Œå°±å¯ä»¥ç”¨rootæƒé™è¿è¡Œiotopï¼Œå¹¶çœ‹åˆ°å¦‚ä¸‹è¾“å‡º:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token function">sudo</span> iotopTotal DISK READ: <span class="token number">189.52</span> K/s <span class="token operator">|</span> Total DISK WRITE: <span class="token number">0.00</span> B/s TID  PRIO  <span class="token environment constant">USER</span>  DISK  READ  DISK  WRITE   SWAPIN     I<span class="token operator"><span class="token file-descriptor important">0</span>></span>  COMMAND<span class="token number">8159</span>  be/4  root <span class="token number">189.2</span>   K/s  <span class="token number">0.00</span>    B/s   <span class="token number">0.00</span> %  <span class="token number">0.00</span> %  <span class="token function">rsync</span> --server --se <span class="token number">443</span>  be/4  kyle  <span class="token number">0.00</span>   B/s  <span class="token number">3.79</span>    K/s   <span class="token number">0.00</span> %  <span class="token number">0.00</span> %  cli /usr/lib/gnome-<span class="token number">4244</span>  be/4  kyle  <span class="token number">0.00</span>   B/s  <span class="token number">3.79</span>    K/s   <span class="token number">0.00</span> %  <span class="token number">0.00</span> %  cli /usr/lib/gnome-   <span class="token number">1</span>  be/4  root  <span class="token number">0.00</span>   B/s  <span class="token number">0.00</span>    B/s   <span class="token number">0.00</span> %  <span class="token number">0.00</span> %  initåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ ä¼šçœ‹åˆ°rsyncè¿›ç¨‹æ‰§è¡Œäº†å¤§é‡I/Oè¯»å–æ“ä½œã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-3-é—®é¢˜å‘ç”Ÿåçš„é«˜è´Ÿè½½å¤„ç†"><a href="#2-3-é—®é¢˜å‘ç”Ÿåçš„é«˜è´Ÿè½½å¤„ç†" class="headerlink" title="2.3 é—®é¢˜å‘ç”Ÿåçš„é«˜è´Ÿè½½å¤„ç†"></a>2.3 é—®é¢˜å‘ç”Ÿåçš„é«˜è´Ÿè½½å¤„ç†</h2><p>&emsp;&emsp;æˆªæ­¢åˆ°è¿™é‡Œï¼Œæœ¬ç« éƒ½åœ¨è®¨è®ºå½“ç³»ç»Ÿè´Ÿè½½è¿‡é«˜çš„æ—¶å€™ï¼Œå¦‚ä½•æ‰¾åˆ°é«˜è´Ÿè½½çš„åŸå› ã€‚å°½ç®¡topå’Œ iostatéƒ½æ˜¯éå¸¸ä¼˜ç§€çš„å·¥å…·ï¼Œä½†æ˜¯å½“ç³»ç»Ÿå‘ç”Ÿé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸æ˜¯æ€»èƒ½è¶³å¤Ÿå¹¸è¿åœ°æ‰¾åˆ°è§£å†³åŠæ³•ã€‚æˆ‘è®°ä¸æ¸…æˆ‘é‡åˆ°è¿‡å¤šå°‘æ¬¡æœºå™¨è¿è¡Œç¼“æ…¢ï¼Œåªèƒ½ç­‰å¾…è´Ÿè½½é™ä½æ‰èƒ½ç™»å½•ã€‚åªéœ€è¦ç¨å¾®å¤šåšä¸€ç‚¹å·¥ä½œï¼Œå°±èƒ½åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…ç›¸åº”çš„å·¥å…·ï¼Œè®°å½•å…¨å¤©çš„æ€§èƒ½æ•°æ®ã€‚<br>&emsp;&emsp;æˆ‘ä»¬å·²ç»è®¨è®ºäº†å¦‚ä½•ä½¿ç”¨sysstatåŒ…ä¸­çš„iostatå·¥å…·æ¥è§£å†³é«˜I/Oçš„é—®é¢˜ï¼Œä¸è¿‡sysstatä¸­ä¹ŸåŒ…å«ä¸€äº›èƒ½æŠ¥å‘ŠCPUå’ŒRAMä½¿ç”¨æƒ…å†µçš„å·¥å…·ã€‚è™½ç„¶çš„ç¡®å¯ä»¥ä½¿ç”¨topå‘½ä»¤è¾¾åˆ°è¿™ä¸ªç›®çš„ï¼Œä½†æ˜¯sysstatæ›´åŠ å¼ºå¤§ï¼Œå®ƒèƒ½å¤Ÿç”¨ä¸€ç§ç®€å•çš„æœºåˆ¶æ¥è®°å½•ç³»ç»Ÿçš„ç»Ÿè®¡ä¿¡æ¯ï¼Œå¦‚CPUè´Ÿè½½ã€RAMä»¥åŠI/OçŠ¶æ€ã€‚å€ŸåŠ©è¿™äº›ç»Ÿè®¡ä¿¡æ¯ï¼Œå½“æœ‰äººæŠ±æ€¨æ˜¨å¤©ä¸­åˆç³»ç»Ÿå¾ˆæ…¢æ—¶ï¼Œä½ å°±å¯ä»¥æŸ¥çœ‹æ—¥å¿—ï¼Œçœ‹çœ‹æ˜¯ä»€ä¹ˆåŸå› å¼•èµ·çš„è¿™ä¸ªé—®é¢˜ã€‚</p><h3 id="2-3-1-é…ç½®sysstat"><a href="#2-3-1-é…ç½®sysstat" class="headerlink" title="2.3.1 é…ç½®sysstat"></a>2.3.1 é…ç½®sysstat</h3><p>&emsp;&emsp;ç¬¬ä¸€æ­¥æ˜¯ä½¿ç”¨åŒ…ç®¡ç†å·¥å…·å®‰è£…sysstatåŒ…ã€‚åœ¨åŸºäºDebiançš„ç³»ç»Ÿï¼ˆå¦‚Ubuntuï¼‰ä¸­ï¼Œsysstatä¸ä¼šè‡ªåŠ¨å¯ç”¨ï¼Œæ‰€ä»¥éœ€è¦ä¿®æ”¹<code>/etc/default/sysstat</code>æ–‡ä»¶ï¼Œå°†<br>&emsp;&emsp;<code>ENABLED=&quot;false&quot;</code><br>&emsp;&emsp;æ›´æ”¹ä¸º<br>&emsp;&emsp;<code>ENABLED=&quot;true&quot;</code><br>&emsp;&emsp;åœ¨åŸºäºRed Hatçš„ç³»ç»Ÿä¸Šï¼Œä½ å¯èƒ½éœ€è¦ä¿®æ”¹<code>/etc/sysconfig/sysstat</code>æ–‡ä»¶ï¼Œæ›´æ”¹HISTORYé€‰é¡¹ï¼Œè®©å®ƒå¯ä»¥è®°å½•7å¤©ä»¥ä¸Šçš„ç»Ÿè®¡ä¿¡æ¯ã€‚å¯¹äºè¿™ä¸¤ç§ç³»ç»Ÿï¼Œç»Ÿè®¡ä¿¡æ¯éƒ½å¯ä»¥æ¯10åˆ†é’ŸæŠ“å–ä¸€æ¬¡å¹¶è®°å½•æ¯æ—¥æ€»ç»“ã€‚<br>&emsp;&emsp;ä¸€æ—¦å¯ç”¨äº†sysstatï¼Œå®ƒå°±ä¼šæ¯10åˆ†é’Ÿæ”¶é›†ä¸€æ¬¡ç³»ç»ŸçŠ¶æ€å¹¶å°†å®ƒä»¬å­˜å‚¨åˆ°<code>/var/log/sysstat</code>æˆ–<code>/var/log/sa</code>æ–‡ä»¶ä¸­ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ¯å¤©æ™šä¸Šåœ¨åˆå¤œä¹‹å‰ï¼Œå®ƒè¿˜ä¼šåˆ†å‰²ç»Ÿè®¡æ–‡ä»¶ã€‚è¿™äº›æ“ä½œéƒ½æ˜¯ç”±<code>/etc/cron.d/sysstat</code>è„šæœ¬æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦æ›´æ”¹sysstatæ”¶é›†ä¿¡æ¯çš„é¢‘ç‡ï¼Œä½ å¯ä»¥ä¿®æ”¹è¿™ä¸ªè„šæœ¬æ–‡ä»¶ã€‚</p><h3 id="2-3-2-æŸ¥çœ‹CPUç»Ÿè®¡ä¿¡æ¯"><a href="#2-3-2-æŸ¥çœ‹CPUç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="2.3.2 æŸ¥çœ‹CPUç»Ÿè®¡ä¿¡æ¯"></a>2.3.2 æŸ¥çœ‹CPUç»Ÿè®¡ä¿¡æ¯</h3><p>&emsp;&emsp;sysstatç»Ÿè®¡ä¿¡æ¯çš„æ—¶å€™ï¼Œå®ƒå°†è¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨ä»¥saå¼€å¤´ã€ä»¥æœ¬æœˆå½“å‰æ—¥æœŸç»“å°¾çš„æ–‡ä»¶åçš„æ–‡ä»¶ä¸­ï¼ˆå¦‚sa03ï¼‰ã€‚è¿™å°±æ„å‘³ç€ä½ å¯ä»¥æŸ¥çœ‹ä»å½“å‰æ—¥æœŸèµ·ï¼Œä¸€ä¸ªæœˆä»¥å†…çš„ç»Ÿè®¡æ•°æ®ã€‚ä½¿ç”¨sarå·¥å…·å¯ä»¥æŸ¥çœ‹è¿™äº›ç»Ÿè®¡ä¿¡æ¯ã€‚é»˜è®¤æƒ…å†µä¸‹sarä¼šè¾“å‡ºå½“å¤©çš„CPUç»Ÿè®¡ä¿¡æ¯:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ sarLinux <span class="token number">2.6</span>.24-22-server <span class="token punctuation">(</span>kickseed<span class="token punctuation">)</span>01/07/2012<span class="token punctuation">..</span>.07:44:20 PM CPU %user %nice %system %iowait %steal %idle07:45:01 PM all  <span class="token number">0.00</span>  <span class="token number">0.00</span>    <span class="token number">0.54</span>    <span class="token number">0.51</span>   <span class="token number">0.00</span> <span class="token number">98.95</span>07:55:01 PM all  <span class="token number">0.54</span>  <span class="token number">0.00</span>    <span class="token number">1.66</span>    <span class="token number">1.26</span>   <span class="token number">0.00</span> <span class="token number">96.54</span>08:05:01 PM all  <span class="token number">0.20</span>  <span class="token number">0.00</span>    <span class="token number">0.72</span>    <span class="token number">1.08</span>   <span class="token number">0.00</span> <span class="token number">98.00</span>08:15:01 PM all  <span class="token number">0.49</span>  <span class="token number">0.00</span>    <span class="token number">1.12</span>    <span class="token number">0.62</span>   <span class="token number">0.00</span> <span class="token number">97.77</span>08:25:01 PM all  <span class="token number">0.49</span>  <span class="token number">0.00</span>    <span class="token number">2.15</span>    <span class="token number">1.21</span>   <span class="token number">0.00</span> <span class="token number">96.16</span>08:35:01 PM all  <span class="token number">0.22</span>  <span class="token number">0.00</span>    <span class="token number">0.98</span>    <span class="token number">0.58</span>   <span class="token number">0.00</span> <span class="token number">98.23</span>08:45:01 PM all  <span class="token number">0.23</span>  <span class="token number">0.00</span>    <span class="token number">0.75</span>    <span class="token number">0.54</span>   <span class="token number">0.00</span> <span class="token number">98.47</span>08:55:01 PM all  <span class="token number">0.20</span>  <span class="token number">0.00</span>    <span class="token number">0.78</span>    <span class="token number">0.50</span>   <span class="token number">0.00</span> <span class="token number">98.52</span>09:01:18 PM all  <span class="token number">0.19</span>  <span class="token number">0.00</span>    <span class="token number">0.72</span>    <span class="token number">0.37</span>   <span class="token number">0.00</span> <span class="token number">98.71</span>09:05:01 PM all  <span class="token number">0.24</span>  <span class="token number">0.00</span>    <span class="token number">1.10</span>    <span class="token number">0.54</span>   <span class="token number">0.00</span> <span class="token number">98.12</span>Average:    all  <span class="token number">0.32</span>  <span class="token number">0.00</span>    <span class="token number">1.12</span>    <span class="token number">0.78</span>   <span class="token number">0.00</span> <span class="token number">97.78</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;ä»è¾“å‡ºä¸­å¯ä»¥å‘ç°ï¼ŒCPUçš„å¾ˆå¤šç»Ÿè®¡ä¿¡æ¯éƒ½å’Œtopå‘½ä»¤çš„è¾“å‡ºç›¸åŒã€‚åœ¨æœ€åä¸€è¡Œï¼Œsarè¿˜ä¸ºæ¯ä¸ªå€¼æä¾›äº†å¹³å‡å€¼ã€‚</p><h3 id="2-3-3-æŸ¥çœ‹RAMç»Ÿè®¡ä¿¡æ¯"><a href="#2-3-3-æŸ¥çœ‹RAMç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="2.3.3 æŸ¥çœ‹RAMç»Ÿè®¡ä¿¡æ¯"></a>2.3.3 æŸ¥çœ‹RAMç»Ÿè®¡ä¿¡æ¯</h3><p>&emsp;&emsp;sysstatè®¡åˆ’ä»»åŠ¡ä¸ä»…å¯ä»¥æ”¶é›†CPUè´Ÿè½½ä¿¡æ¯ï¼Œè¿˜èƒ½æ”¶é›†å¾ˆå¤šåˆ«çš„ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨-ré€‰é¡¹å°±å¯ä»¥æ”¶é›†RAMçš„ç»Ÿè®¡ä¿¡æ¯:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ sar -rLinux <span class="token number">2.6</span>.24-22-server <span class="token punctuation">(</span>kickseed<span class="token punctuation">)</span> 01/07/201207:44:20 PM kbmemfree kbmemused %memused kbbuffers kbcached kbswpfree kbswpused %swpused kbswpcad07:45:01 PM    <span class="token number">322064</span>    <span class="token number">193384</span>    <span class="token number">37.52</span>     <span class="token number">16056</span>   <span class="token number">142900</span>     <span class="token number">88316</span>         <span class="token number">0</span>     <span class="token number">0.00</span>        <span class="token number">0</span> 07:55:01 PM    <span class="token number">318484</span>    <span class="token number">196964</span>    <span class="token number">38.21</span>     <span class="token number">17152</span>   <span class="token number">144672</span>     <span class="token number">88316</span>         <span class="token number">0</span>     <span class="token number">0.00</span>        <span class="token number">0</span> 08:05:01 PM    <span class="token number">318228</span>    <span class="token number">197220</span>    <span class="token number">38.26</span>     <span class="token number">17648</span>   <span class="token number">144700</span>     <span class="token number">88316</span>         <span class="token number">0</span>     <span class="token number">0.00</span>        <span class="token number">0</span>08:15:01 PM    <span class="token number">297669</span>    <span class="token number">217780</span>    <span class="token number">42.25</span>     <span class="token number">18384</span>   <span class="token number">154408</span>     <span class="token number">88316</span>         <span class="token number">0</span>     <span class="token number">0.00</span>        <span class="token number">0</span>08:25:01 PM    <span class="token number">284152</span>    <span class="token number">231296</span>    <span class="token number">44.87</span>     <span class="token number">28072</span>   <span class="token number">173724</span>     <span class="token number">88316</span>         <span class="token number">0</span>     <span class="token number">0.00</span>        <span class="token number">0</span>08:35:01 PM    <span class="token number">283096</span>    <span class="token number">232352</span>    <span class="token number">45.08</span>     <span class="token number">20612</span>   <span class="token number">173756</span>     <span class="token number">88316</span>         <span class="token number">0</span>     <span class="token number">0.00</span>        <span class="token number">0</span>08:45:01 PM    <span class="token number">283284</span>    <span class="token number">232164</span>    <span class="token number">45.04</span>     <span class="token number">21116</span>   <span class="token number">173780</span>     <span class="token number">88316</span>         <span class="token number">0</span>     <span class="token number">0.00</span>        <span class="token number">0</span>08:55:01 PM    <span class="token number">282556</span>    <span class="token number">232892</span>    <span class="token number">45.18</span>     <span class="token number">21624</span>   <span class="token number">173804</span>     <span class="token number">88316</span>         <span class="token number">0</span>     <span class="token number">0.00</span>        <span class="token number">0</span>09:01:18 PM    <span class="token number">276632</span>    <span class="token number">238816</span>    <span class="token number">46.33</span>     <span class="token number">21964</span>   <span class="token number">173896</span>     <span class="token number">88316</span>         <span class="token number">0</span>     <span class="token number">0.00</span>        <span class="token number">0</span>09:05:01 PM    <span class="token number">281876</span>    <span class="token number">233572</span>    <span class="token number">45.31</span>     <span class="token number">22188</span>   <span class="token number">173900</span>     <span class="token number">88316</span>         <span class="token number">0</span>     <span class="token number">0.00</span>        <span class="token number">0</span>Average:       <span class="token number">294804</span>    <span class="token number">220644</span>    <span class="token number">42.81</span>     <span class="token number">19682</span>   <span class="token number">162954</span>     <span class="token number">88316</span>         <span class="token number">0</span>     <span class="token number">0.00</span>        <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;åœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ°ä½¿ç”¨äº†å¤šå°‘å†…å­˜ï¼Œç©ºé—²å¤šå°‘å†…å­˜ï¼ŒåŒæ—¶è¿˜èƒ½æŸ¥çœ‹äº¤æ¢ç©ºé—´çš„ä¿¡æ¯ä»¥åŠæ–‡ä»¶ç¼“å­˜çš„ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯ä¸ç”¨topæˆ–freeå‘½ä»¤è¾“å‡ºçš„ä¿¡æ¯ç±»ä¼¼ã€‚ä¸ä¹‹ä¸åŒçš„æ˜¯ï¼Œä½ å¯ä»¥åŠæ—¶æŸ¥çœ‹ä¹‹å‰çš„ä¿¡æ¯ã€‚</p><h3 id="2-3-4-æŸ¥çœ‹ç£ç›˜ç»Ÿè®¡ä¿¡æ¯"><a href="#2-3-4-æŸ¥çœ‹ç£ç›˜ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="2.3.4 æŸ¥çœ‹ç£ç›˜ç»Ÿè®¡ä¿¡æ¯"></a>2.3.4 æŸ¥çœ‹ç£ç›˜ç»Ÿè®¡ä¿¡æ¯</h3><p>&emsp;&emsp;ä»sarä¸­è¿˜å¯ä»¥è·å¾—å¦ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åº¦é‡æŒ‡æ ‡:ç£ç›˜ç»Ÿè®¡ä¿¡æ¯ã€‚ä½¿ç”¨-bé€‰é¡¹èƒ½ç»™å‡ºä¸€äº›åˆ—ç£ç›˜I/Oçš„åŸºæœ¬ä¿¡æ¯ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ sar -bLinux <span class="token number">2.6</span>.24-22-server <span class="token punctuation">(</span>kickseed<span class="token punctuation">)</span> 01/07/201207:44:20 PM  tps rtps wtps bread/s bwrtn/s07:45:01 PM <span class="token number">8.03</span> <span class="token number">0.00</span> <span class="token number">8.03</span>    <span class="token number">0.00</span>  <span class="token number">106.61</span>07:55:01 PM <span class="token number">8.78</span> <span class="token number">0.14</span> <span class="token number">8.64</span>    <span class="token number">3.35</span>  <span class="token number">127.59</span>08:05:01 PM <span class="token number">7.16</span> <span class="token number">0.00</span> <span class="token number">7.16</span>    <span class="token number">0.00</span>   <span class="token number">61.14</span>08:15:01 PM <span class="token number">8.17</span> <span class="token number">0.14</span> <span class="token number">8.03</span>    <span class="token number">5.82</span>  <span class="token number">139.02</span>08:25:01 PM <span class="token number">9.50</span> <span class="token number">0.06</span> <span class="token number">9.44</span>    <span class="token number">4.09</span>  <span class="token number">212.62</span>08:35:01 PM <span class="token number">8.27</span> <span class="token number">0.00</span> <span class="token number">8.27</span>    <span class="token number">0.01</span>   <span class="token number">74.66</span>08:45:01 PM <span class="token number">8.04</span> <span class="token number">0.00</span> <span class="token number">8.04</span>    <span class="token number">0.00</span>   <span class="token number">71.51</span>08:55:01 PM <span class="token number">7.64</span> <span class="token number">0.00</span> <span class="token number">7.64</span>    <span class="token number">0.00</span>   <span class="token number">66.46</span>09:01:18 PM <span class="token number">7.11</span> <span class="token number">0.00</span> <span class="token number">7.11</span>    <span class="token number">0.36</span>   <span class="token number">63.73</span>09:05:01 PM <span class="token number">7.61</span> <span class="token number">0.00</span> <span class="token number">7.61</span>    <span class="token number">0.00</span>   <span class="token number">72.11</span>Average:    <span class="token number">8.11</span> <span class="token number">0.04</span> <span class="token number">8.06</span>    <span class="token number">1.67</span>  <span class="token number">102.52</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;ä»è¿™é‡Œå¯ä»¥çœ‹åˆ°æ¯ç§’æ€»å…±ä¼ è¾“çš„æ•°æ®é‡ï¼ˆ tpsï¼‰ï¼Œå®ƒç”±æ€»å…±è¯»å–çš„æ•°æ®é‡å’Œå†™å…¥çš„æ•°æ®é‡ï¼ˆåˆ†åˆ«æ˜¯rtpså’Œ wtpsï¼‰ç›¸åŠ è·å¾—ã€‚bread/såˆ—å¹¶éç”¨æ¥è¡¡é‡å—IOï¼Œè€Œæ˜¯å‘Šè¯‰ä½ å¹³å‡æ¯ç§’è¯»å–çš„æ•°æ®é‡ã€‚ç±»ä¼¼åœ°ã€bwrtn/sèƒ½å‘Šè¯‰ä½ å¹³å‡æ¯ç§’å†™å…¥çš„æ•°æ®é‡ã€‚<br>&emsp;&emsp;sarç¨‹åºå¯ä»¥ä¼ å…¥å¾ˆå¤šå‚æ•°ï¼Œè¾“å‡ºç‰¹å®šçš„æ•°æ®é›†ï¼Œä¸è¿‡æœ‰çš„æ—¶å€™ä½ å¯èƒ½æƒ³ä¸€æ¬¡æ€§çœ‹åˆ°æ‰€æœ‰æ•°æ®ã€‚ä½¿ç”¨-Aé€‰é¡¹å¯ä»¥åšåˆ°è¿™ç‚¹ã€‚å®ƒä¼šæ˜¾ç¤ºåŒ…æ‹¬è´Ÿè½½å¹³å‡å€¼ã€CPUè´Ÿè½½ã€RAMã€ç£ç›˜IOã€ç½‘ç»œIOå’Œå…¶ä»–ä¸€äº›æœ‰è¶£å€¼åœ¨å†…çš„ç»Ÿè®¡ä¿¡æ¯ã€‚è¿™æ ·å¯ä»¥è®©ä½ æ›´åŠ äº†è§£sarèƒ½å¤Ÿè¾“å‡ºä»€ä¹ˆç»Ÿè®¡ä¿¡æ¯ï¼Œä¹‹åï¼Œé€šè¿‡é˜…è¯»sarçš„ç”¨æˆ·æ‰‹å†Œ(è¾“å…¥man sar).å¯ä»¥äº†è§£åˆ°æƒ³è¦çœ‹ç‰¹å®šçš„ç»Ÿè®¡ä¿¡æ¯åº”è¯¥ä¼ å…¥ä»€ä¹ˆæ ‡å¿—ä½ã€‚</p><h3 id="2-3-5-æŸ¥çœ‹ä¹‹å‰çš„ç»Ÿè®¡ä¿¡æ¯"><a href="#2-3-5-æŸ¥çœ‹ä¹‹å‰çš„ç»Ÿè®¡ä¿¡æ¯" class="headerlink" title="2.3.5 æŸ¥çœ‹ä¹‹å‰çš„ç»Ÿè®¡ä¿¡æ¯"></a>2.3.5 æŸ¥çœ‹ä¹‹å‰çš„ç»Ÿè®¡ä¿¡æ¯</h3><p>&emsp;&emsp;å½“ç„¶ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»…ä»…ä»‹ç»äº†å¦‚ä½•æŸ¥çœ‹æ•´å¤©çš„ä¿¡æ¯ã€‚æœ‰æ—¶ä½ ä¼šåªæƒ³æŸ¥çœ‹ä¸€å¤©ä¸­éƒ¨åˆ†æ—¶é—´æ®µå†…çš„ä¿¡æ¯ã€‚æƒ³è¦è·å¾—æŒ‡å®šæ—¶é—´èŒƒå›´å†…çš„ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨-så’Œ-eå‚æ•°åˆ†åˆ«æŒ‡å®šä½ æ„Ÿå…´è¶£çš„å¼€å§‹æ—¶é—´å’Œç»“æŸæ—¶é—´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæƒ³è¦æŸ¥çœ‹8:00pmâ€”8:30pmè¿™ä¸ªæ—¶é—´æ®µå†…çš„CPUæ•°æ®ï¼Œéœ€è¦è¾“å…¥:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ sar -s <span class="token number">20</span>:00:00 -e <span class="token number">20</span>:30:00Linux <span class="token number">2.6</span>.24-22-server <span class="token punctuation">(</span>kickseed<span class="token punctuation">)</span>01/07/201208:05:01 PM CPU %user %nice %system %iowait %steal %idle08:15:01 PM all  <span class="token number">0.49</span>  <span class="token number">0.00</span>    <span class="token number">1.12</span>    <span class="token number">0.62</span>   <span class="token number">0.00</span> <span class="token number">97.77</span>08:25:01 PM all  <span class="token number">0.49</span>  <span class="token number">0.00</span>    <span class="token number">2.15</span>    <span class="token number">1.21</span>   <span class="token number">0.00</span> <span class="token number">96.16</span>Average:    all  <span class="token number">0.49</span>  <span class="token number">0.00</span>    <span class="token number">1.63</span>    <span class="token number">0.91</span>   <span class="token number">0.00</span> <span class="token number">96.96</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;å¦‚æœæƒ³è¦è·å–éå½“å¤©çš„æ•°æ®ï¼Œä½¿ç”¨-fé€‰é¡¹ï¼Œåé¢è¾“å…¥å­˜å‚¨åœ¨<code>/var/log/sysstat</code>æˆ–<code>/var/log/sa</code>æ–‡ä»¶å¤¹å†…ç»Ÿè®¡ä¿¡æ¯æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œæƒ³è¦è·å–æœ¬æœˆç¬¬6å¤©çš„ç»Ÿè®¡ä¿¡æ¯ï¼Œä½ éœ€è¦è¾“å…¥:<br><code>$ sar -f /var/1og/sysstat/sa06</code><br>&emsp;&emsp;ä¹Ÿå¯ä»¥æ­£å¸¸æ··åˆä½¿ç”¨ä»»æ„å…¶ä»–saré€‰é¡¹ï¼Œä»è€Œè·å¾—ç‰¹å®šç±»å‹çš„ç»Ÿè®¡ä¿¡æ¯ã€‚</p><h1 id="ç³»ç»Ÿå¯åŠ¨é—®é¢˜"><a href="#ç³»ç»Ÿå¯åŠ¨é—®é¢˜" class="headerlink" title="ç³»ç»Ÿå¯åŠ¨é—®é¢˜"></a>ç³»ç»Ÿå¯åŠ¨é—®é¢˜</h1><p>&emsp;&emsp;Linuxç³»ç»Ÿå¯èƒ½ä¼šå‡ºå¾ˆå¤šé—®é¢˜ï¼Œå…¶ä¸­æœ€è®©äººæ„Ÿåˆ°å´©æºƒçš„ä¹Ÿè®¸å°±æ˜¯ç³»ç»Ÿæ— æ³•å¯åŠ¨äº†ã€‚æ¯•ç«Ÿï¼ŒæœåŠ¡å™¨ç³»ç»Ÿæ— æ³•å¯åŠ¨å°±æ„å‘³ç€å®ƒåœæ­¢äº†æ‰€æœ‰æœåŠ¡ï¼Œç›´åˆ°è¿™ä¸ªé—®é¢˜å¾—åˆ°è§£å†³ä¸ºæ­¢ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œä½ æƒ³è¦è·å–çš„ä»»ä½•æ•°æ®å¯èƒ½éƒ½ä¾èµ–äºç³»ç»Ÿå¤‡ä»½å’Œè¿è¡Œçš„èƒ½åŠ›ã€‚<br>&emsp;&emsp;æœ‰å¾ˆå¤šé—®é¢˜éƒ½å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿæ— æ³•å¯åŠ¨ã€‚ä¸ºäº†è®©å¤§å®¶æ›´å¥½åœ°æŸ¥æ˜ç³»ç»Ÿä¸ºä»€ä¹ˆæ— æ³•å¯åŠ¨ï¼Œæœ¬ç« é¦–å…ˆä¼šä»‹ç»å¯åŠ¨è¿‡ç¨‹ã€‚ä¸€æ—¦æ˜ç™½äº†ç³»ç»Ÿå¯åŠ¨çš„æµç¨‹ï¼Œä½ å°±å¯ä»¥è§‚å¯Ÿè‡ªå·±çš„ç³»ç»Ÿï¼Œçœ‹çœ‹å®ƒå¡åœ¨äº†å“ªä¸€æ­¥ã€‚è®²å®Œå¯åŠ¨æµç¨‹ä¹‹åï¼Œæœ¬ç« è¿˜ä¼šå¼ºè°ƒå‡ ç±»ä¸»è¦çš„å¯åŠ¨é—®é¢˜ï¼Œä»¥åŠå¦‚ä½•è¯Šæ–­å¹¶ä¿®å¤è¿™äº›é—®é¢˜ã€‚<br>&emsp;&emsp;ä»ä¼ ç»Ÿæ„ä¹‰ä¸Šè®²ï¼Œå¤„ç†å¯åŠ¨é—®é¢˜æ˜¯ç³»ç»Ÿç®¡ç†å‘˜çš„å·¥ä½œï¼Œä¸è¿‡ï¼Œä»»ä½•DevOpså›¢é˜Ÿä¸­çš„æˆå‘˜éƒ½æœ‰è´£ä»»è®©ç³»ç»Ÿä¸­çš„è½¯ä»¶åŒ…ä¿æŒæœ€æ–°çŠ¶æ€ã€‚å½“å†…æ ¸æˆ–è€…å‘è¡Œç‰ˆçš„æ›´æ–°å‡ºç°é—®é¢˜çš„æ—¶å€™ï¼Œä½ è‡ªå·±å°±èƒ½å¤Ÿè®©ç³»ç»Ÿæ¢å¤æ­£å¸¸å†å¥½ä¸è¿‡ã€‚</p><h2 id="3-1-Linuxå¯åŠ¨æµç¨‹"><a href="#3-1-Linuxå¯åŠ¨æµç¨‹" class="headerlink" title="3.1 Linuxå¯åŠ¨æµç¨‹"></a>3.1 Linuxå¯åŠ¨æµç¨‹</h2><p>&emsp;&emsp;ç¬¬1ç« æ›¾ç»æåˆ°è¿‡ï¼Œå¦‚æœä½ æƒ³è¦æ“…é•¿æ•…éšœæ’é™¤å·¥ä½œï¼Œé‚£ä¹ˆä½ æœ€å¥½æ¸…æ¥šç³»ç»Ÿå¦‚ä½•è¿è¡Œã€‚è¿™ä¸ªé“ç†ä¹Ÿé€‚ç”¨äºå¤„ç†å¯åŠ¨é—®é¢˜ï¼Œç‰¹åˆ«æ˜¯å› ä¸ºæœ‰ä¼—å¤šåŸå› å¯ä»¥å¼•å‘å¯åŠ¨é—®é¢˜ã€‚</p><h3 id="3-1-1-BIOS"><a href="#3-1-1-BIOS" class="headerlink" title="3.1.1 BIOS"></a>3.1.1 BIOS</h3><p>&emsp;&emsp;å¯åŠ¨è¿‡ç¨‹ä¸­æœ€å…ˆæ‰§è¡Œçš„ç¨‹åºæ˜¯BIOSï¼ˆåŸºæœ¬è¾“å…¥è¾“å‡ºç³»ç»Ÿï¼‰ã€‚ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œé¦–å…ˆä¼šçœ‹åˆ°è¿™ä¸ªç•Œé¢ã€‚å°½ç®¡å¯¹äºä¸åŒçš„ç³»ç»Ÿæ¥è¯´ï¼Œè¿™ä¸ªç¨‹åºçš„ç•Œé¢ä¸å°½ç›¸åŒï¼Œä½†æ˜¯BIOSéƒ½ä¼šåˆå§‹åŒ–ç¡¬ä»¶ï¼ŒåŒ…æ‹¬æ£€æµ‹ç¡¬ç›˜é©±åŠ¨å™¨ã€USBç£ç›˜ã€CD-ROMã€ç½‘å¡ä»¥åŠä»»ä½•å…¶ä»–å¯ä»¥ä»ä¸­å¯åŠ¨çš„ç¡¬ä»¶ã€‚ç„¶åBIOSä¼šæ ¹æ®æ‰€é…ç½®çš„å¯åŠ¨è®¾å¤‡çš„é¡ºåºä¸€æ­¥æ­¥æ£€æŸ¥ï¼Œç›´åˆ°æ‰¾åˆ°å¯ä»¥ä»ä¸­æˆåŠŸå¯åŠ¨çš„è®¾å¤‡ã€‚å¯¹äºLinuxæœåŠ¡å™¨æ¥è¯´ï¼Œè¿™ä¸ªè¿‡ç¨‹é€šå¸¸æ„å‘³ç€è¯»å–MBRï¼ˆä¸»å¼•å¯¼è®°å½•ï¼Œå³ç¡¬ç›˜ä¸Šçš„å‰512å­—èŠ‚ï¼‰ã€è½½å…¥å¹¶æ‰§è¡ŒMBRä¸­çš„å¯åŠ¨ä»£ç ï¼Œç”±æ­¤å¼€å§‹å¯åŠ¨æµç¨‹ã€‚</p><h3 id="3-1-2-GRUBå’ŒLinuxå¯åŠ¨è½½å…¥ç¨‹åº"><a href="#3-1-2-GRUBå’ŒLinuxå¯åŠ¨è½½å…¥ç¨‹åº" class="headerlink" title="3.1.2 GRUBå’ŒLinuxå¯åŠ¨è½½å…¥ç¨‹åº"></a>3.1.2 GRUBå’ŒLinuxå¯åŠ¨è½½å…¥ç¨‹åº</h3><p>&emsp;&emsp;BIOSå°†ç¡¬ä»¶åˆå§‹åŒ–å®Œæ¯•ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªå¯ä»¥å¯åŠ¨çš„è®¾å¤‡ä¹‹åï¼Œå¯åŠ¨è½½å…¥ç¨‹åºå°†æ¥ç®¡ä¸‹é¢çš„å·¥ä½œã€‚åœ¨ä¸€èˆ¬çš„LinuxæœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸ªå¯åŠ¨è½½å…¥ç¨‹åºå¯èƒ½æ˜¯GRUBï¼Œä¸è¿‡ä¹‹å‰ä¹Ÿæœ‰äººç”¨è¿‡ä¸€ä¸ªåä¸ºLILOçš„ç¨‹åºã€‚GRUBé€šå¸¸æ˜¯ç³»ç»Ÿä»ç¡¬ç›˜å¯åŠ¨æ—¶éœ€è¦ç”¨åˆ°çš„å¯åŠ¨è½½å…¥ç¨‹åºï¼Œå½“ç³»ç»Ÿä»USBã€CD-ROMæˆ–ç½‘ç»œå¯åŠ¨çš„æ—¶å€™ï¼Œåˆ†åˆ«ä¼šä½¿ç”¨syslinux ã€isolinuxæˆ–pxelinuxä½œä¸ºç›¸åº”çš„å¯åŠ¨è½½å…¥ç¨‹åºã€‚å°½ç®¡syslinuxåŠå…¶ä»–å¯åŠ¨è½½å…¥ç¨‹åºçš„ç»†èŠ‚ä¸GRUBä¸å°½ç›¸åŒï¼Œä½†æ˜¯å®ƒä»¬çš„åŠŸèƒ½éƒ½æ˜¯è½½å…¥å„ç§è½¯ä»¶å¹¶è¯»å–é…ç½®æ–‡ä»¶ï¼Œä»é…ç½®æ–‡ä»¶ä¸­èƒ½å¤Ÿå¾—çŸ¥å¯åŠ¨ä»€ä¹ˆæ“ä½œç³»ç»Ÿï¼Œåœ¨å“ªé‡Œæ‰¾åˆ°å¯¹åº”æ“ä½œç³»ç»Ÿçš„å†…æ ¸ä»¥åŠå½“ç³»ç»Ÿå¯åŠ¨æ—¶åº”ç”¨ä»€ä¹ˆæ ·çš„é…ç½®ã€‚<br>&emsp;&emsp;å½“GRUBè¢«è½½å…¥ä¹‹åï¼Œä¼šåœ¨MBRä¸­ä¼šæ‰§è¡Œä¸€å°éƒ¨åˆ†ä»£ç ï¼ˆç§°ä¹‹ä¸ºç¬¬ä¸€é˜¶æ®µï¼‰ã€‚å› ä¸ºMBRä¸­ä»…èƒ½å®¹çº³446å­—èŠ‚çš„å¯åŠ¨ä»£ç ï¼ˆå…¶ä½™éƒ¨åˆ†ç”¨æ¥ä¿å­˜åˆ†åŒºè¡¨ä¿¡æ¯ï¼‰ï¼Œè¿™äº›ä»£ç ä»…ä»…å¤Ÿå®šä½åˆ°å…¶ä»–ä»£ç ï¼Œç„¶åæ‰§è¡Œè¿™äº›ä»£ç ã€‚GRUBä»£ç çš„ä¸‹ä¸€é˜¶æ®µå¯ä»¥è®©å®ƒè®¿é—®Linuxçš„æ–‡ä»¶ç³»ç»Ÿã€è¯»å–å¹¶è½½å…¥é…ç½®æ–‡ä»¶ï¼Œç”±æ­¤æ‰¾å‡ºåº”è¯¥å¯åŠ¨å“ªä¸ªæ“ä½œç³»ç»Ÿå’Œè¿™äº›æ“ä½œç³»ç»Ÿåœ¨ç¡¬ç›˜çš„ä½ç½®ï¼Œä»¥åŠåº”å½“ä¼ å…¥å“ªäº›é€‰é¡¹å‚æ•°ã€‚å¯¹äºLinuxæ¥è¯´ï¼Œè¿™å¯èƒ½åŒ…å«ç¡¬ç›˜ä¸Šå¾ˆå¤šä¸åŒçš„å†…æ ¸ç‰ˆæœ¬ä»¥åŠèƒ½å¸®åŠ©è§£å†³é—®é¢˜çš„ç‰¹æ®Šæ¢å¤æ¨¡å¼ã€‚é€šå¸¸é…ç½®æ–‡ä»¶ä¸­ä¹Ÿä¼šæè¿°å¯ä»¥ç”¨æ¥æŸ¥çœ‹å¹¶ä¿®æ”¹å¯åŠ¨é€‰é¡¹çš„å„ç±»èœå•ã€‚<br>&emsp;&emsp;ç»å¤§å¤šæ•°ç°ä»£æ“ä½œç³»ç»Ÿä¸­ï¼ŒGRUBéƒ½ä¼šæ˜¾ç¤ºä¸€ä¸ªéå¸¸å‹å¥½çš„å¯åŠ¨ç•Œé¢ï¼Œæœ‰æ—¶å¸¦æœ‰ä¸€äº›å›¾å½¢ï¼Œä¸€èˆ¬è¿˜ä¼šæœ‰ä¸€ä¸ªå€’è®¡æ—¶ã€‚é€šå¸¸ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªèœå•ï¼Œä¸Šé¢æœ‰ä¸€ä¸ªå¯ä»¥é€‰æ‹©å¯åŠ¨å“ªä¸ªæ“ä½œç³»ç»Ÿçš„åˆ—è¡¨ï¼ˆè§å›¾ï¼‰ï¼Œä¸è¿‡æœ‰æ—¶éœ€è¦æŒ‰ä¸‹ç±»ä¼¼äºEscçš„æŒ‰é”®ï¼ˆåœ¨GRUB2ä¸­è¦æŒ‰ä¸‹Shifté”®ï¼‰æ‰èƒ½çœ‹åˆ°è¿™ä¸ªèœå•ã€‚GRUBä¹Ÿå…è®¸æŸ¥çœ‹å’Œä¿®æ”¹æŒ‡å®šçš„å¯åŠ¨æ—¶é—´è®¾ç½®ï¼Œè¿™ä¸€ç‚¹åœ¨è¿›è¡Œé—®é¢˜å¤„ç†çš„æ—¶å€™éå¸¸æ–¹ä¾¿ï¼Œå› ä¸ºä½ å¯ä»¥åœ¨æ²¡æœ‰æ¢å¤ç›˜çš„æƒ…å†µä¸‹ï¼Œä¿®æ­£å¯èƒ½å­˜åœ¨äºGRUBé…ç½®æ–‡ä»¶ä¸­çš„é”™è¯¯ã€‚</p><p><img src="/medias/drawing-bed/oops/1.jpg"></p><h3 id="3-1-3-å†…æ ¸ä¸åˆå§‹RAMç£ç›˜"><a href="#3-1-3-å†…æ ¸ä¸åˆå§‹RAMç£ç›˜" class="headerlink" title="3.1.3 å†…æ ¸ä¸åˆå§‹RAMç£ç›˜"></a>3.1.3 å†…æ ¸ä¸åˆå§‹RAMç£ç›˜</h3><p>&emsp;&emsp;ä¸€æ—¦åœ¨GRUBä¸­é€‰æ‹©äº†ç‰¹å®šçš„å†…æ ¸ï¼ˆæˆ–è€…å€’è®¡æ—¶ç»“æŸï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºä½ åšå‡ºé€‰æ‹©ï¼‰ï¼ŒGRUBä¼šå°†Linuxæ ¸å¿ƒè½½å…¥åˆ°RAMä¸­å¹¶æ‰§è¡Œï¼ŒåŒæ—¶ä¼ å…¥å¯åŠ¨æ—¶é…ç½®çš„æ‰€æœ‰å‚æ•°ã€‚é€šå¸¸GRUBä¹Ÿä¼šéšç€å†…æ ¸è½½å…¥åˆå§‹RAMç£ç›˜ï¼ˆInitialRAM Diskï¼ŒInitrdï¼‰ã€‚åœ¨ç°ä»£Linuxç³»ç»Ÿä¸­ï¼Œå®ƒé€šå¸¸æ˜¯gzipæ ¼å¼å‹ç¼©çš„å¤‡ä»½æ–‡æ¡£ï¼Œç§°ä¸ºinitramfsæ–‡ä»¶ï¼Œä¸€èˆ¬åŒ…å«ä¸€ä¸ªåŸºæœ¬çš„å°å‹Linuxæ ¹æ–‡ä»¶ç³»ç»Ÿã€‚åœ¨è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œæœ‰ä¸€äº›é‡è¦çš„é…ç½®æ–‡ä»¶ã€å†…æ ¸æ¨¡å—ä»¥åŠå†…æ ¸éœ€è¦ç”¨æ¥å¯»æ‰¾å¹¶æŒ‚è½½ï¼ˆmountï¼‰çœŸå®æ ¹æ–‡ä»¶ç³»ç»Ÿçš„ç¨‹åºã€‚<br>&emsp;&emsp;ä»¥å‰ï¼Œå¯åŠ¨æ—¶çš„è¿™äº›åŠŸèƒ½éƒ½ç›´æ¥æ„å»ºåœ¨ Linuxå†…æ ¸ä¸­ã€‚ä½†æ˜¯ï¼Œéšç€ç¡¬ä»¶å¼€å§‹æ”¯æŒå¾ˆå¤šä¸åŒç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿä»¥åŠSCSIå’ŒIDEè®¾å¤‡ï¼Œå¹¶å¸¦æœ‰ä¸€äº›é¢å¤–ç‰¹æ€§ï¼ˆå¦‚RAIDã€LVMå’Œæ–‡ä»¶ç³»ç»ŸåŠ å¯†ï¼‰ï¼Œå†…æ ¸å˜å¾—è¶Šæ¥è¶Šå¤§ã€‚å› æ­¤ï¼Œè¿™äº›ç‰¹æ€§è¢«åˆ†æ‹†åˆ°ç‹¬ç«‹çš„æ¨¡å—ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥ä»…ä»…è½½å…¥ç³»ç»Ÿéœ€è¦çš„æ¨¡å—ã€‚å› ä¸ºç¡¬ä»¶é©±åŠ¨å™¨å’Œæ–‡ä»¶ç³»ç»Ÿæ”¯æŒéƒ½åˆ†æ‹†åˆ°äº†æ¨¡å—ä¸­ï¼Œæ‰€ä»¥ä½ ä¼šé¢ä¸´é¸¡å’Œè›‹çš„é—®é¢˜ã€‚å¦‚æœæ¨¡å—å¤„äºæ ¹æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè€Œä½ åˆéœ€è¦ç”¨è¿™äº›æ¨¡å—æ¥è¯»å–æ ¹æ–‡ä»¶ç³»ç»Ÿï¼Œæ€æ ·æ‰èƒ½å®ŒæˆæŒ‚è½½?è§£å†³æ–¹æ³•å°±æ˜¯å°†è¿™äº›é‡è¦çš„æ¨¡å—éƒ½æ”¾å…¥åˆå§‹RAMç£ç›˜ä¸­ã€‚<br>&emsp;&emsp;éšç€å†…æ ¸çš„å¯åŠ¨ï¼Œå®ƒä¼šå°†initramfsæ–‡ä»¶è§£å‹åˆ°RAMä¸­ï¼Œç„¶ååœ¨initramfsæ–‡ä»¶çš„æ ¹ç›®å½•ä¸­è¿è¡Œä¸€æ®µåä¸ºinitçš„è„šæœ¬ã€‚è¿™ä»…ä»…æ˜¯ä¸€æ®µæ ‡å‡†çš„shellè„šæœ¬ï¼Œç”¨æ¥å…ˆæ£€æµ‹ç¡¬ä»¶ï¼Œç„¶ååˆ›å»ºæŒ‚è½½ç‚¹ï¼Œä¹‹åå†æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚å› ä¸ºè¿™ä¸ªè·¯å¾„æ˜¯ç”±GRUBåœ¨å®ƒé¦–æ¬¡åŠ è½½å†…æ ¸çš„æ—¶å€™ä¼ å…¥çš„ä¸€ä¸ªå¯åŠ¨å‚æ•°ï¼ˆroot=ï¼‰ï¼Œæ‰€ä»¥ç³»ç»Ÿå†…æ ¸çŸ¥é“æ ¹æ–‡ä»¶ç³»ç»Ÿåœ¨å“ªé‡Œã€‚åœ¨æŒ‚è½½äº†çœŸæ­£çš„æ ¹æ–‡ä»¶ç³»ç»Ÿä¹‹åï¼Œinitramfsæ–‡ä»¶çš„æœ€åä¸€æ­¥æ˜¯æ‰§è¡Œ<code>/sbin/init</code>ç¨‹åºï¼Œåè€…ä¼šæ¥ç®¡å¯åŠ¨æµç¨‹ä¸­å…¶ä½™çš„å·¥ä½œã€‚</p><h3 id="3-1-4-sbin-init"><a href="#3-1-4-sbin-init" class="headerlink" title="3.1.4 /sbin/init"></a>3.1.4 /sbin/init</h3><p>&emsp;&emsp;<code>/sbin/init</code>ç¨‹åºæ˜¯ç³»ç»Ÿä¸­æ‰€æœ‰ç¨‹åºçš„çˆ¶è¿›ç¨‹ã€‚è¿™ä¸ªè¿›ç¨‹çš„PIDæ€»æ˜¯1ï¼Œå®ƒè´Ÿè´£å¯åŠ¨ç»„æˆLinuxæ“ä½œç³»ç»Ÿçš„å…¶ä»–è¿›ç¨‹ã€‚é‚£äº›ä½¿ç”¨è¿‡ä¸€æ®µæ—¶é—´Linuxæ“ä½œç³»ç»Ÿçš„ç”¨æˆ·éƒ½çŸ¥é“ï¼ŒUbuntuæœåŠ¡å™¨ä¸Šçš„initç¨‹åºä¸å¤§å®¶ä¹‹å‰ä¹ æƒ¯ä½¿ç”¨çš„initç¨‹åºä¸åŒã€‚å®ƒä»¬åœ¨å¦‚ä½•åˆå§‹åŒ–UNIXæ“ä½œç³»ç»Ÿæ–¹é¢æœ‰ä¸€äº›ä¸åŒçš„æ ‡å‡†ï¼Œä½†æ˜¯ç»å¤§å¤šæ•°ä¼ ç»ŸLinuxå‘è¡Œç‰ˆéƒ½ä½¿ç”¨è‘—åçš„System V initæ¨¡å‹ï¼ˆé©¬ä¸Šå°±ä¼šè®²åˆ°ï¼‰ï¼Œç„¶è€Œä¸€äº›ç°ä»£Linuxå‘è¡Œç‰ˆé€‰æ‹©ä½¿ç”¨å…¶ä»–ç³»ç»Ÿï¼Œå¦‚Upstartï¼Œæˆ–è€…æœ€è¿‘çš„systemdä¾‹å¦‚ï¼ŒUbuntuæœåŠ¡å™¨é€‰æ‹©ä½¿ç”¨Upstartï¼Œä½†å®ƒä»ç„¶ä¿ç•™äº†System V initç¨‹åºçš„æ°å‡ºç»“æ„ï¼Œå¦‚è¿è¡Œç­‰çº§ï¼ˆrunlevelï¼‰å’Œé’ˆå¯¹å‘åå…¼å®¹çš„letc/rc?.dæ–‡ä»¶å¤¹ï¼Œè€Œä¸” Upstartç°åœ¨å¼€å§‹å¤„ç†åº•å±‚æ‰€æœ‰çš„å·¥ä½œã€‚å› ä¸ºæœåŠ¡å™¨ä¸Šæœ€å¸¸ä½¿ç”¨çš„ä¸¤ç§initç³»ç»Ÿæ˜¯Sytem V initå’ŒUpstartï¼Œæ‰€ä»¥ä¸‹é¢å°±åˆ†åˆ«ä»‹ç»å®ƒä»¬ã€‚  </p><ol><li>ä¼ ç»Ÿçš„ System V lnit</li></ol><p>&emsp;&emsp;System VæŒ‡çš„æ˜¯ç”±AT&amp;Tå¼€å‘çš„åŸå§‹UNIXæ“ä½œç³»ç»Ÿä¸­çš„ä¸€ä¸ªç‰¹å®šç‰ˆæœ¬ã€‚åœ¨è¿™ç§é£æ ¼çš„initç¨‹åºä¸­ï¼Œinitè¿›ç¨‹ä¼šè¯»å–<code>/etc/inittab</code>çš„é…ç½®æ–‡ä»¶ï¼Œé€šè¿‡å®ƒæ¥æŸ¥çœ‹é»˜è®¤çš„è¿è¡Œç­‰çº§ï¼Œä¸‹é¢ä¼šè®¨è®ºåˆ°è¿™ç‚¹ã€‚ç„¶åè¿›å…¥è¿™ä¸ªè¿è¡Œç­‰çº§ï¼Œå¯åŠ¨é…ç½®åœ¨è¿™ä¸ªè¿è¡Œç­‰çº§ä¸‹åº”è¯¥å¯åŠ¨çš„è¿›ç¨‹ã€‚<br>&emsp;&emsp;System V initè¿›ç¨‹ç”±å¾ˆå¤šç§°ä¸ºè¿è¡Œç­‰çº§çš„ä¸åŒç³»ç»ŸçŠ¶æ€å®šä¹‰ã€‚è¿è¡Œç­‰çº§ç”¨æ•°å­—åŒºåˆ†ï¼Œä»0åˆ°6ï¼Œæ¯ä¸ªæ•°å­—ä»£è¡¨äº†ä¸€ä¸ªå®Œå…¨ä¸åŒçš„ç³»ç»ŸçŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œè¿è¡Œç­‰çº§0ç•™ç»™äº†åœæ­¢çš„ç³»ç»ŸçŠ¶æ€ã€‚å½“ä½ è¿›å…¥è¿è¡Œç­‰çº§0ï¼Œç³»ç»Ÿå°±ä¼šç»ˆæ­¢æ‰€æœ‰çš„è¿è¡Œè¿›ç¨‹ï¼Œå¸è½½æ‰€æœ‰çš„æ–‡ä»¶ç³»ç»Ÿå¹¶æ–­ç”µã€‚ç±»ä¼¼åœ°ï¼Œè¿è¡Œç­‰çº§6ä»£è¡¨é‡å¯æœºå™¨ã€‚è¿è¡Œç­‰çº§1ä»£è¡¨å•ç”¨æˆ·æ¨¡å¼â€”â€”ä»…æœ‰å•ä¸ªç”¨æˆ·å¯ä»¥ç™»å½•åˆ°ç³»ç»Ÿä¸­çš„çŠ¶æ€ã€‚é€šå¸¸ï¼Œæ²¡æœ‰å‡ ä¸ªè¿›ç¨‹èƒ½åœ¨å•ç”¨æˆ·æ¨¡å¼ä¸‹å¯åŠ¨ï¼Œæ‰€ä»¥è¿™ä¸ªè¿è¡Œç­‰çº§åœ¨å¤„ç†ç³»ç»Ÿæ— æ³•å®Œå…¨å¯åŠ¨çš„é—®é¢˜ä¸Šéå¸¸æœ‰ç”¨ã€‚åœ¨é»˜è®¤çš„GRUBèœå•ä¸­èƒ½çœ‹åˆ°ä¸€ä¸ªæ¢å¤æ¨¡å¼ï¼Œå®ƒä¼šå¯åŠ¨è¿›å…¥è¿è¡Œç­‰çº§ä¸º1çš„ç³»ç»ŸçŠ¶æ€ä¸­ã€‚<br>&emsp;&emsp;è¿è¡Œç­‰çº§2åˆ°5ç•™ç»™å‘è¡Œç‰ˆä½¿ç”¨ï¼Œæœ€ç»ˆç”±ç”¨æˆ·æ¥å®šä¹‰ã€‚å®šä¹‰è¯¸å¤šè¿è¡Œç­‰çº§çš„æƒ³æ³•æ˜¯è®©ä½ åˆ›å»ºè¿›å…¥æœåŠ¡å™¨çš„ä¸åŒæ¨¡å¼ã€‚å¾ˆå¤šLinuxå‘è¡Œç‰ˆéƒ½ä¼šä¸ºå›¾å½¢æ¡Œé¢è®¾ç½®ä¸€ä¸ªè¿è¡Œç­‰çº§ï¼ˆåœ¨Red Hatä¸­ï¼Œä¸ºè¿è¡Œç­‰çº§5ï¼‰ï¼Œå¹¶ä¸ºéå›¾å½¢ç•Œé¢è®¾ç½®å¦ä¸€ä¸ªè¿è¡Œç­‰çº§ï¼ˆåœ¨Red Hatä¸­ï¼Œä¸ºè¿è¡Œç­‰çº§3ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªä¼ ç»Ÿçš„åšæ³•ã€‚ä½ ä¹Ÿå¯ä»¥å®šä¹‰å…¶ä»–çš„è¿è¡Œç­‰çº§ï¼Œä¾‹å¦‚ï¼Œä¸ºå¯åŠ¨ä¸å¸¦ç½‘ç»œè®¿é—®çš„ç³»ç»Ÿå®šä¹‰ä¸€ä¸ªè¿è¡Œç­‰çº§ã€‚ç„¶ååœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œæ ¹æ®æç¤ºè¾“å…¥ä¸€ä¸ªå‚æ•°ï¼Œç”¨ä½ æŒ‡å®šçš„è¿è¡Œç­‰çº§è¦†ç›–é»˜è®¤çš„è¿è¡Œç­‰çº§ã€‚ç³»ç»Ÿå¯åŠ¨ä¹‹åï¼Œä½ ä¹Ÿå¯ä»¥ç”¨initå‘½ä»¤åè·Ÿç€è¿è¡Œç­‰çº§çš„æ–¹å¼æ›´æ”¹å½“å‰çš„è¿è¡Œç­‰çº§ã€‚æ‰€ä»¥ï¼Œæƒ³è¦æ›´æ”¹ä¸ºå•ç”¨æˆ·æ¨¡å¼ï¼Œåº”è¯¥è¾“å…¥sudo init 1ã€‚<br>&emsp;&emsp;é™¤äº†/etc/inittabï¼Œå¯¹äºSystem V initç³»ç»Ÿå¯åŠ¨å’Œå…³é—­è„šæœ¬æˆ–è€…åˆå§‹åŒ–è„šæœ¬ï¼Œä»¥åŠç³»ç»Ÿçš„ä¸»è¦æœåŠ¡æ¥è¯´ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶ä»–é‡è¦çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹ã€‚  </p><ul><li><input disabled="" type="checkbox"> /etc/init.d<br>è¯¥æ–‡ä»¶å¤¹åŒ…å«æ‰€æœ‰æœåŠ¡åœ¨å„ä¸ªè¿è¡Œç­‰çº§ä¸­çš„å…¨éƒ¨å¯åŠ¨è„šæœ¬ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå®ƒä»¬éƒ½æ˜¯æ ‡å‡†çš„shellè„šæœ¬ï¼Œéµå®ˆæœ€åŸºæœ¬çš„æ ‡å‡†ã€‚æ¯ä¸ªè„šæœ¬æœ€å°‘æ¥å—ä¸¤ä¸ªå‚æ•°startå’Œstopï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨å¯åŠ¨å’Œåœæ­¢æœåŠ¡ï¼ˆå¦‚ç½‘é¡µæœåŠ¡ï¼‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œinitè„šä¸ªé€šå¸¸è¿˜ä¼šæ¥å—ä¸€äº›é¢å¤–çš„é€‰é¡¹ï¼Œå¦‚restartï¼ˆé‡å¯æœåŠ¡å™¨ï¼‰ã€statusï¼ˆè¿”å›æœåŠ¡å½“å‰çŠ¶æ€ï¼‰ã€reloadï¼ˆå‘ŠçŸ¥æœåŠ¡ä»é…ç½®æ–‡ä»¶ä¸­é‡æ–°è½½å…¥é…ç½®ï¼‰ä»¥åŠforce-reloadï¼ˆå¼ºåˆ¶æœåŠ¡é‡è½½å®ƒçš„é…ç½®ï¼‰ã€‚å½“ç”¨ä¸å¸¦å‚æ•°çš„æ–¹å¼è¿è¡Œè„šæœ¬çš„æ—¶å€™ï¼Œä¸€èˆ¬åº”è¯¥è¿”å›ä¸€ä¸ªå®ƒä¼šæ¥å—çš„å‚æ•°åˆ—è¡¨ã€‚  </li><li><input disabled="" type="checkbox"> /etc/rc0.d ~ /etc/rc6.d<br>è¿™äº›æ–‡ä»¶å¤¹åˆ†åˆ«åŒ…å«æ¯ä¸ªè¿è¡Œç­‰çº§å¯¹åº”çš„initè„šæœ¬ã€‚åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œå®ƒä»¬ä¸€èˆ¬é€šè¿‡ç¬¦å·é“¾æ¥åˆ°/etc/init.dæ–‡ä»¶å¤¹ä¸‹çš„å®é™…æ–‡ä»¶ã€‚ä¸è¿‡è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æ–‡ä»¶å–ä¸‹çš„initè„šæœ¬éƒ½æœ‰ä¸€äº›ç‰¹åˆ«çš„åå­—ï¼Œå‘½åéƒ½ä»¥Sï¼ˆstartï¼‰ã€Kï¼ˆkillï¼‰æˆ–Dï¼ˆdisableï¼‰å¼€å¤´ï¼Œåé¢è·Ÿä¸€ä¸ªæ•°å­—ã€‚å½“initè¿›äººä¸€ä¸ªè¿è¡Œç­‰çº§çš„æ—¶å€™ï¼Œå®ƒä¼šæŒ‰ç…§æ•°å­—é¡ºåºè¿è¡Œæ‰€æœ‰ä»¥Kå¼€å¤´çš„è„šæœ¬å¹¶ä¼ äººstopå‚æ•°ï¼Œé™¤éå¯¹åº”çš„initè„šæœ¬åœ¨å‰ä¸€ä¸ªè¿è¡Œç­‰çº§ä¸­æ²¡æœ‰å¯åŠ¨ã€‚ç„¶åinitæŒ‰ç…§æ•°å­—é¡ºåºè¿è¡Œæ‰€æœ‰ä»¥Så¼€å¤´çš„è„šæœ¬å¹¶ä¼ äººstartå‚æ•°ã€‚ä»»ä½•ä»¥Då¼€å¤´çš„initè„šæœ¬éƒ½ä¼šè¢«å¿½ç•¥â€”â€”è¿™è®©ä½ å¯ä»¥åœ¨æŒ‡å®šçš„è¿è¡Œç­‰çº§ç¦æ­¢ä¸€ä¸ªè„šæœ¬ï¼Œæˆ–è€…ä½ ä¹Ÿå¯ä»¥ä»…ä»…ç§»é™¤å…¨éƒ¨ç¬¦å·é“¾æ¥ã€‚æ‰€ä»¥å¦‚æœä½ æœ‰ä¸¤ä¸ªè„šæœ¬ï¼ŒS01fooå’ŒS05barï¼Œinité¦–å…ˆä¼šè¿è¡ŒS01foo startï¼Œå½“å®ƒè¿›äººç‰¹å®šçš„è¿è¡Œç­‰çº§åå†æ‰§è¡ŒS05bar startã€‚  </li><li><input disabled="" type="checkbox"> /etc/rcS.d<br>åœ¨è¿™ä¸ªæ–‡ä»¶å–ä¸­ï¼Œä½ ä¼šæ‰¾åˆ°åœ¨å˜æ›´åˆ°ç‰¹å®šçš„è¿è¡Œç­‰çº§ä¹‹å‰ï¼Œè¿è¡Œçš„æ‰€æœ‰ç³»ç»Ÿinitè„šæœ¬ã€‚ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­çš„è„šæœ¬æ—¶è¦å°å¿ƒï¼Œå› ä¸ºå¦‚æœå®ƒä»¬åœæ­¢å·¥ä½œï¼Œä½ å°†æ— æ³•è¿›äººå•ç”¨æˆ·æ¨¡å¼ã€‚  </li><li><input disabled="" type="checkbox"> /etc/rc.local<br>å¹¶éæ‰€æœ‰çš„å‘è¡Œç‰ˆéƒ½ä½¿ç”¨äº†rc.localï¼Œé€šå¸¸å®ƒæ˜¯ä¸€ä¸ªç•™ç»™ç”¨æˆ·ä¿®æ”¹çš„shellè„šæœ¬ã€‚ä¸€èˆ¬ä¼šåœ¨initè¿›ç¨‹ç»“æŸçš„æ—¶å€™è¿è¡Œå®ƒï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨è¿™é‡Œæ”¾ä¸€äº›æƒ³è¦è¿è¡Œçš„é¢å¤–è„šæœ¬ï¼Œè€Œä¸ç”¨å†åˆ›å»ºè‡ªå·±çš„initè„šæœ¬ã€‚<br>&emsp;&emsp;è¿™é‡Œæœ‰ä¸€ä¸ªæ ‡å‡†çš„System V initç³»ç»Ÿçš„å¯åŠ¨è¿‡ç¨‹ã€‚é¦–å…ˆinitå¯åŠ¨å¹¶è¯»å–/etc/inittabæ–‡ä»¶ä»¥ç¡®å®šé»˜è®¤çš„è¿è¡Œç­‰çº§ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­.è¿è¡Œç­‰çº§ä¸º2ã€‚ç„¶åinitè¿›å…¥/etc/rcS.dæ–‡ä»¶å¤¹ï¼ŒæŒ‰ç…§æ•°å­—é¡ºåºç”¨startä½œä¸ºå‚æ•°è¿è¡Œæ‰€æœ‰ä»¥Så¼€å¤´çš„è„šæœ¬æ–‡ä»¶ã€‚ç„¶åinitåœ¨/etc/rc2.dæ–‡ä»¶å¤¹ä¸­åšç›¸åŒçš„å·¥ä½œã€‚æœ€åinitæ‰§è¡Œå®Œæ¯•ï¼Œä½†æ˜¯è¿˜ä¼šåœ¨åå°è¿è¡Œï¼Œç­‰å¾…è¿è¡Œç­‰çº§çš„æ›´æ”¹ã€‚</li></ul><ol start="2"><li>Upstart</li></ol><p>&emsp;&emsp;System V initæ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„ç³»ç»Ÿï¼Œè€Œä¸”åœ¨Linuxç³»ç»Ÿä¸Šä¹Ÿå·¥ä½œäº†å¾ˆå¤šå¹´ï¼Œä¸è¿‡ï¼Œå®ƒå¹¶éå®Œç¾æ— ç‘•ã€‚ä¾‹å¦‚ï¼Œå½“æœåŠ¡å®•æ‰çš„æ—¶å€™ï¼Œinitè„šæœ¬æ²¡æœ‰ä¸€ä¸ªè‡ªåŠ¨é‡å¯æœºåˆ¶ï¼Œä½ å¿…é¡»å€ŸåŠ©å…¶ä»–å·¥å…·æ¥ç›‘è§†å’Œé‡å¯è¿™äº›è¿›ç¨‹ã€‚<br>&emsp;&emsp;initè„šæœ¬çš„å¦ä¸€ä¸ªé—®é¢˜æ˜¯å®ƒä»¬é€šå¸¸ä»…å—åˆ°æ ¹æ®è¿è¡Œç­‰çº§æ›´æ”¹æˆ–è€…ç³»ç»Ÿå¯åŠ¨çš„å½±å“ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œé™¤éæ‰‹åŠ¨æ“ä½œï¼Œè¿™äº›è„šæœ¬éƒ½ä¸ä¼šè¿è¡Œã€‚ä¾èµ–ç½‘ç»œè¿æ¥çš„initè„šæœ¬å°±æ˜¯ä¸€ä¸ªéå¸¸å¥½çš„ä¾‹å­ã€‚åœ¨åŸºäºRed Hatå’ŒåŸºäºDebianç³»ç»Ÿä¸­ï¼Œåä¸ºnetworkæˆ–networking çš„initè„šæœ¬åˆ†åˆ«ç”¨æ¥å»ºç«‹ç½‘ç»œè¿æ¥ã€‚ä»»ä½•ä¾èµ–äºç½‘ç»œè¿æ¥çš„initè„šæœ¬ä¸å…¶ä»–è„šæœ¬ç›¸æ¯”éƒ½æœ‰ä¸€ä¸ªå¾ˆå¤§çš„æ•°å­—ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯ç½‘ç»œè„šæœ¬è¿è¡Œä¹‹åå®ƒä»¬æ‰è¿è¡Œã€‚ä½†æ˜¯å¦‚æœä½ æ‹”æ‰æœåŠ¡å™¨çš„ç½‘çº¿ï¼Œå†å¯åŠ¨ä¼šæ€æ ·å‘¢?ç½‘ç»œè„šæœ¬è¿˜ä¼šæ‰§è¡Œï¼Œä½†æ˜¯æ‰€æœ‰ä¾èµ–ç½‘ç»œè¿æ¥çš„initè„šæœ¬éƒ½ä¼šä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¶…æ—¶ã€‚æœ€åä½ ä¼šå¾—åˆ°ä¸€ä¸ªç™»å½•æç¤ºå¹¶å¯ä»¥ç™»å½•ã€‚ç­‰ä½ ç™»å½•ä¹‹åï¼Œå¦‚æœä½ æ’ä¸Šç½‘çº¿ï¼Œé‡å¯ç½‘ç»œæœåŠ¡ï¼Œä½ ä¼šè¿ä¸Šç½‘ç»œï¼Œä½†æ˜¯æ²¡æœ‰ä¸€ä¸ªéœ€è¦ç½‘ç»œè¿æ¥çš„æœåŠ¡ä¼šè‡ªåŠ¨é‡å¯ï¼Œä½ å¿…é¡»ä¸€ä¸ªä¸ªåœ°æ‰‹åŠ¨å¯åŠ¨è¿™äº›æœåŠ¡ã€‚<br>&emsp;&emsp;Upstartçš„è®¾è®¡åˆè¡·å¹¶ä¸ä»…ä»…æ˜¯ä¸ºäº†å¼¥è¡¥System V initçš„ç¼ºé™·,è€Œä¸”è¿˜ä¸ºäº†æä¾›æ›´åŠ å¥å£®çš„æœåŠ¡ç®¡ç†ã€‚Upstartçš„ä¸€å¤§ç‰¹æ€§æ˜¯å®ƒç”±äº‹ä»¶é©±åŠ¨ã€‚UpstartæŒç»­ç›‘æ§ç³»ç»Ÿä¸­ç‰¹å®šäº‹ä»¶çš„å‘ç”Ÿï¼Œå½“è¿™äº›äº‹ä»¶å‘ç”Ÿçš„æ—¶å€™ï¼ŒUpstartå°±ä¼šåŸºäºè¿™äº›äº‹ä»¶åšå‡ºç›¸åº”çš„åŠ¨ä½œã€‚äº‹ä»¶å¯èƒ½æ˜¯ç³»ç»Ÿå¯åŠ¨ã€ç³»ç»Ÿå…³é—­ã€æŒ‰ä¸‹Ctrl-Alt-Delç»„åˆé”®ã€è¿è¡Œç­‰çº§æ›´æ”¹æˆ–è€…Upstartè„šæœ¬çš„å¯åŠ¨æˆ–åœæ­¢ã€‚è¦å¼„æ¸…æ¥šäº‹ä»¶é©±åŠ¨çš„ç³»ç»Ÿå¦‚ä½•æ”¹è¿›äº†ä¼ ç»Ÿçš„initè„šæœ¬ï¼Œè®©æˆ‘ä»¬ä»¥å‰é¢æ‹”ä¸‹ç½‘çº¿å¯åŠ¨æœåŠ¡å™¨ä¸ºä¾‹ã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªUpstartè„šæœ¬ï¼Œå½“æ’äººç½‘çº¿çš„æ—¶å€™ä¼šè§¦å‘è¿™ä¸ªè„šæœ¬ã€‚æ¥ç€ï¼Œè¿™ä¸ªè„šæœ¬ä¼šä¸ºä½ å¯åŠ¨ç½‘ç»œæœåŠ¡ã€‚ç„¶åï¼Œå½“ç½‘ç»œæœåŠ¡æˆåŠŸå¯åŠ¨ä¹‹åï¼Œä½ å°±å¯ä»¥é…ç½®è§¦å‘ä»»ä½•éœ€è¦ç½‘ç»œè¿æ¥çš„æœåŠ¡ã€‚ç°åœ¨å½“ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œæ’ä¸Šç½‘çº¿å³å¯ï¼ŒUpstartè„šæœ¬ä¼šå¸®ä½ å®Œæˆå‰©ä¸‹çš„å·¥ä½œã€‚<br>&emsp;&emsp;Upstartå¹¶æ²¡æœ‰å®Œå…¨æ›¿ä»£System V initï¼Œè‡³å°‘å¯¹äºç³»ç»ŸæœåŠ¡æ¥è¯´æ²¡èƒ½å®Œå…¨æ›¿ä»£ã€‚ç›®å‰ï¼ŒUpstartçš„ç¡®æ›¿ä»£äº†intå’Œ/etc/inittabæ–‡ä»¶çš„åŠŸèƒ½ï¼Œå®ƒç®¡ç†è¿è¡Œç­‰çº§çš„æ›´æ”¹ã€ç³»ç»Ÿå¯åŠ¨å’Œå…³é—­ä»¥åŠæ§åˆ¶ttysoUpstartè„šæœ¬ä¸­ç§»æ¤äº†è¶Šæ¥è¶Šå¤šçš„åŠŸèƒ½ï¼Œä½†æ˜¯ä½ ä»ç„¶ä¼šåœ¨/etc/init.dä¸­æ‰¾åˆ°éƒ¨åˆ†æ ‡å‡†çš„initè„šæœ¬ï¼Œæ‰€æœ‰æ ‡å‡†çš„symlinkéƒ½åœ¨letc/rc?.dæ–‡ä»¶å¤¹ä¸­ã€‚ä¸åŒçš„æ˜¯ï¼Œå½“è¿è¡Œç­‰çº§æ›´æ”¹çš„æ—¶å€™ï¼ŒUpstartä¼šå¼€å¯æˆ–è€…åœ<br>æ­¢æœåŠ¡ã€‚<br>&emsp;&emsp;Upstartè„šæœ¬åœ¨/etclinitæ–‡ä»¶å¤¹ä¸­ï¼Œå®ƒä»¬ä¸initè„šæœ¬çš„åŒºåˆ«å¾ˆå¤§ï¼Œå› ä¸ºå®ƒä»¬ä¸æ˜¯å¸¸è§„çš„shellè„šæœ¬ã€‚ä¸ºäº†å¸®åŠ©è§£é‡Šå®ƒçš„è¯­æ³•ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªUpstartè„šæœ¬(/etc/init/rc.confï¼‰çš„ä¾‹å­ï¼Œåœ¨è¿è¡Œç­‰çº§æ›´æ”¹çš„æ—¶å€™ä¼šè§¦å‘è¿™ä¸ªè„šæœ¬ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#rc - System V runlevel compatibility</span><span class="token comment">#</span><span class="token comment"># This task runs the old Systen V-style rc script when changing</span><span class="token comment">#between runleve1s.</span><span class="token string">"System V runlevel compatibility"</span>descriptionauthor<span class="token string">"Scott James Remnant &lt;scott@netsplit.com>"</span>start on runleve1 <span class="token punctuation">[</span>0123456<span class="token punctuation">]</span>stop on runleve1<span class="token punctuation">[</span> <span class="token operator">!</span>SRUNLEVEL<span class="token punctuation">]</span><span class="token builtin class-name">export</span> RUNLEVEL<span class="token builtin class-name">export</span> PREVLEVELtask<span class="token builtin class-name">exec</span> /etc/init.d/rc <span class="token variable">$RUNLEVEL</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ç£ç›˜æ»¡ã€ç£ç›˜æŸåé—®é¢˜"><a href="#ç£ç›˜æ»¡ã€ç£ç›˜æŸåé—®é¢˜" class="headerlink" title="ç£ç›˜æ»¡ã€ç£ç›˜æŸåé—®é¢˜"></a>ç£ç›˜æ»¡ã€ç£ç›˜æŸåé—®é¢˜</h1><h1 id="æœåŠ¡å™¨å®•æœºã€ç½‘ç»œé—®é¢˜"><a href="#æœåŠ¡å™¨å®•æœºã€ç½‘ç»œé—®é¢˜" class="headerlink" title="æœåŠ¡å™¨å®•æœºã€ç½‘ç»œé—®é¢˜"></a>æœåŠ¡å™¨å®•æœºã€ç½‘ç»œé—®é¢˜</h1><h1 id="DNSæœåŠ¡å™¨é—®é¢˜"><a href="#DNSæœåŠ¡å™¨é—®é¢˜" class="headerlink" title="DNSæœåŠ¡å™¨é—®é¢˜"></a>DNSæœåŠ¡å™¨é—®é¢˜</h1><h1 id="é‚®ä»¶é—®é¢˜"><a href="#é‚®ä»¶é—®é¢˜" class="headerlink" title="é‚®ä»¶é—®é¢˜"></a>é‚®ä»¶é—®é¢˜</h1><h1 id="WebæœåŠ¡å™¨é—®é¢˜"><a href="#WebæœåŠ¡å™¨é—®é¢˜" class="headerlink" title="WebæœåŠ¡å™¨é—®é¢˜"></a>WebæœåŠ¡å™¨é—®é¢˜</h1><h1 id="MySQLæ•°æ®åº“é—®é¢˜"><a href="#MySQLæ•°æ®åº“é—®é¢˜" class="headerlink" title="MySQLæ•°æ®åº“é—®é¢˜"></a>MySQLæ•°æ®åº“é—®é¢˜</h1><h1 id="ç¡¬ä»¶é—®é¢˜"><a href="#ç¡¬ä»¶é—®é¢˜" class="headerlink" title="ç¡¬ä»¶é—®é¢˜"></a>ç¡¬ä»¶é—®é¢˜</h1><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> devops </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>mycatä½¿ç”¨</title>
      <link href="/posts/dad9.html"/>
      <url>/posts/dad9.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="Mycatå®‰è£…æµ‹è¯•ä½¿ç”¨"><a href="#Mycatå®‰è£…æµ‹è¯•ä½¿ç”¨" class="headerlink" title="Mycatå®‰è£…æµ‹è¯•ä½¿ç”¨"></a>Mycatå®‰è£…æµ‹è¯•ä½¿ç”¨</h1><h2 id="Mycatç®€ä»‹ï¼š"><a href="#Mycatç®€ä»‹ï¼š" class="headerlink" title="Mycatç®€ä»‹ï¼š"></a>Mycatç®€ä»‹ï¼š</h2><p><code>MyCAT</code> æ˜¯ä¸€æ¬¾å¼€æºçš„<code>Mysql</code>ä¼ä¸šçº§é›†ç¾¤åº”ç”¨ï¼Œå®ƒæ˜¯åŸºäºé˜¿é‡Œçš„å¼€æºäº§å“<code>Cobar</code>å‘å±•å‡ºæ¥çš„ã€‚<code>MyCAT</code>æä¾›äº†ç±»ä¼¼<code>Mysql</code>çš„æ¥å£ï¼Œå¯ä»¥å¹³æ»‘çš„å°†å•æœº<code>Mysql</code>è¿ç§»åˆ°<code>Mysql</code>é›†ç¾¤ä¸Šï¼Œè§£å†³æ•°æ®å­˜å‚¨å’Œä¸šåŠ¡è§„æ¨¡è¿…é€Ÿå¢é•¿æƒ…å†µä¸‹çš„æ•°æ®ç“¶é¢ˆé—®é¢˜ã€‚  </p><h2 id="å®‰è£…ï¼š"><a href="#å®‰è£…ï¼š" class="headerlink" title="å®‰è£…ï¼š"></a>å®‰è£…ï¼š</h2><p>ç¯å¢ƒéœ€è¦JDK1.8ï¼Œmysql5.5-5.7ç‰ˆæœ¬ä¹‹é—´ï¼ˆç¨³å®šç‰ˆï¼‰<br><img src="/medias/drawing-bed/mycat/0.png"></p><p>ä¸‹è½½å®‰è£…mycatå®‰è£…åŒ…  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Mycat-server-1.6-RELEASE-20161028204710-linux.tar.gz<span class="token function">wget</span>  http://dl.mycat.io/1.6-RELEASE/Mycat-server-1.6-RELEASE-20161028204710-linux.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>tar è§£å‹mycatå®‰è£…åŒ…  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tar</span> xvf Mycat-server-1.6-RELEASE-20161028204710-linux.tar.gz -C /usr/local/<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/medias/drawing-bed/mycat/1.png"><br><img src="/medias/drawing-bed/mycat/2.png"></p><p>å®‰è£…å®Œæˆ</p><h1 id="æµ‹è¯•ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#æµ‹è¯•ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="æµ‹è¯•ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>æµ‹è¯•ä¿®æ”¹é…ç½®æ–‡ä»¶</h1><h2 id="ä¸»è¦é…ç½®æ–‡ä»¶ï¼š"><a href="#ä¸»è¦é…ç½®æ–‡ä»¶ï¼š" class="headerlink" title="ä¸»è¦é…ç½®æ–‡ä»¶ï¼š"></a>ä¸»è¦é…ç½®æ–‡ä»¶ï¼š</h2><p><code>schema.xml</code>ä¸­å®šä¹‰é€»è¾‘åº“ï¼Œè¡¨ã€åˆ†ç‰‡èŠ‚ç‚¹ç­‰å†…å®¹ï¼›<br><code>rule.xml</code>ä¸­å®šä¹‰åˆ†ç‰‡è§„åˆ™ï¼›<br><code>server.xml</code>ä¸­å®šä¹‰ç”¨æˆ·ä»¥åŠç³»ç»Ÿç›¸å…³å˜é‡ï¼Œå¦‚ç«¯å£ç­‰<br><img src="/medias/drawing-bed/mycat/3.png"></p><p><code>wrapper.conf</code>æ˜¯æ§åˆ¶mycat jvmçš„ä¸€äº›å¯åŠ¨å‚æ•°ã€‚<br><code>server.xml</code>æ˜¯MycatæœåŠ¡å™¨å‚æ•°è°ƒæ•´å’Œç”¨æˆ·æˆæƒçš„é…ç½®æ–‡ä»¶ã€‚<br><code>schema.xml</code>æ˜¯é€»è¾‘åº“å®šä¹‰å’Œè¡¨ä»¥åŠåˆ†ç‰‡å®šä¹‰çš„é…ç½®æ–‡ä»¶ã€‚<br><code>rule.xml</code>æ˜¯åˆ†ç‰‡è§„åˆ™çš„é…ç½®æ–‡ä»¶ï¼Œåˆ†ç‰‡è§„åˆ™çš„å…·ä½“ä¸€äº›å‚æ•°ä¿¡æ¯å•ç‹¬å­˜æ”¾ä¸ºæ–‡ä»¶ï¼Œä¹Ÿåœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œé…ç½®æ–‡ä»¶ä¿®æ”¹éœ€è¦é‡å¯Mycatã€‚  </p><p><code>server.xml</code>æ˜¯MyCATå¯¹å¤–çš„â€è™šæ‹Ÿæ•°æ®åº“â€é…ç½®æ–‡ä»¶ã€‚æ‰€è°“çš„â€è™šæ‹Ÿæ•°æ®åº“â€æ˜¯è¯´ï¼ŒMyCATå°†å¤šä¸ªMysqlé›†ç¾¤æ•´åˆèµ·æ¥å¯¹å¤–æä¾›æœåŠ¡ï¼Œæä¾›æœåŠ¡çš„æ¥å£ä»ç„¶é‡‡ç”¨Mysqlçš„å½¢å¼ï¼Œå› æ­¤ï¼Œé€šè¿‡ä»¿é€ Mysqlæ¥å£ï¼Œè®©è°ƒç”¨ç¨‹åºä»¥ä¸ºè‡ªå·±æ˜¯åœ¨è®¿é—®Mysqlæ•°æ®åº“ï¼Œå°±æ˜¯æ‰€è°“çš„â€è™šæ‹Ÿæ•°æ®åº“â€ã€‚  </p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mycat:server</span> <span class="token name">SYSTEM</span> <span class="token string">"server.dtd"</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mycat:</span>server</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>mycat</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://io.mycat/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>system</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>useSqlStat<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- 1ä¸ºå¼€å¯å®æ—¶ç»Ÿè®¡ã€0ä¸ºå…³é—­ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>useGlobleTableCheck<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- 1ä¸ºå¼€å¯å…¨åŠ ç­ä¸€è‡´æ€§æ£€æµ‹ã€0ä¸ºå…³é—­ --></span>    <span class="token comment">&lt;!--é…ç½®id(åºåˆ—)çš„ç”Ÿæˆæ–¹å¼--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sequnceHandlerType<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--  &lt;property name="useCompression">1&lt;/property>--></span> <span class="token comment">&lt;!--1ä¸ºå¼€å¯mysqlå‹ç¼©åè®®--></span>    <span class="token comment">&lt;!-- &lt;property name="fakeMySQLVersion">5.6.20&lt;/property>--></span> <span class="token comment">&lt;!--è®¾ç½®æ¨¡æ‹Ÿçš„MySQLç‰ˆæœ¬å·--></span>    <span class="token comment">&lt;!-- &lt;property name="processorBufferChunk">40960&lt;/property> --></span>    <span class="token comment">&lt;!-- &lt;property name="processors">1&lt;/property> --></span>    <span class="token comment">&lt;!--&lt;property name="processorExecutor">32&lt;/property>  --></span>    <span class="token comment">&lt;!--é»˜è®¤ä¸ºtype 0: DirectByteBufferPool | type 1 ByteBufferArena--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>processorBufferPoolType<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--é»˜è®¤æ˜¯65535 64K ç”¨äºsqlè§£ææ—¶æœ€å¤§æ–‡æœ¬é•¿åº¦ --></span>    <span class="token comment">&lt;!--&lt;property name="maxStringLiteralLength">65535&lt;/property>--></span>    <span class="token comment">&lt;!--&lt;property name="sequnceHandlerType">0&lt;/property>--></span>    <span class="token comment">&lt;!--&lt;property name="backSocketNoDelay">1&lt;/property>--></span>    <span class="token comment">&lt;!--&lt;property name="frontSocketNoDelay">1&lt;/property>--></span>    <span class="token comment">&lt;!--&lt;property name="processorExecutor">16&lt;/property>--></span>    <span class="token comment">&lt;!--&lt;property name="serverPort">8066&lt;/property> &lt;property name="managerPort">9066&lt;/property> --></span>    <span class="token comment">&lt;!--&lt;property name="idleTimeout">300000&lt;/property> &lt;property name="bindIp">0.0.0.0&lt;/property> --></span>    <span class="token comment">&lt;!--&lt;property name="frontWriteQueueSize">4096&lt;/property> &lt;property name="processors">32&lt;/property> --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleDistributedTransactions<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>useOffHeapForMerge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--å•ä½ä¸ºm--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>memoryPageSize<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1m<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--å•ä½ä¸ºk--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spillsFileBufferSize<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>1k<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>useStreamOutput<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--å•ä½ä¸ºm--></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>systemReserveMemorySize<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>384m<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--æ˜¯å¦é‡‡ç”¨zookeeperåè°ƒåˆ‡æ¢  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>useZKSwitch<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>system</span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- å…¨å±€SQLé˜²ç«å¢™è®¾ç½® --></span>  <span class="token comment">&lt;!--     &lt;firewall>     &lt;whitehost>        &lt;host host="127.0.0.1" user="mycat"/>        &lt;host host="127.0.0.2" user="mycat"/>    &lt;/whitehost>    &lt;blacklist check="false">    &lt;/blacklist>    &lt;/firewall>  --></span>  <span class="token comment">&lt;!-- é…ç½®mycatæœåŠ¡è¿æ¥ç”¨æˆ·åå¯†ç  ,åœ¨é¡¹ç›®ä¸­çš„æ•°æ®æºçš„ç”¨æˆ·åå¯†ç åˆ™ä½¿ç”¨è¿™ä¸ªï¼Œä¸å†ç›´è¿mysql--></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>user</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>123456<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>schemas<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>TESTDB<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- è¡¨çº§ DML æƒé™è®¾ç½® --></span>    <span class="token comment">&lt;!--    &lt;privileges check="false">      &lt;schema name="TESTDB" dml="0110" >        &lt;table name="tb01" dml="0000">&lt;/table>        &lt;table name="tb02" dml="1111">&lt;/table>      &lt;/schema>    &lt;/privileges>         --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>user</span><span class="token punctuation">></span></span><span class="token comment">&lt;!--  &lt;user name="user">    &lt;property name="password">user&lt;/property>    &lt;property name="schemas">TESTDB&lt;/property>    &lt;property name="readOnly">true&lt;/property>  &lt;/user>--></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mycat:</span>server</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¡¨æ˜è¯¥è™šæ‹Ÿæ•°æ®åº“æœ‰ä¸€ä¸ª<code>schema</code>ï¼Œ<code>TESTDB</code>ï¼›<br>æœ‰2ä¸ªç”¨æˆ·<code>test</code>å’Œ<code>user</code>ï¼Œå¯†ç åˆ†åˆ«æ˜¯<code>root</code>å’Œ<code>user</code>ï¼Œ<br><code>user</code>ç”¨æˆ·æ˜¯åªè¯»çš„ï¼Œ<code>root</code>ç”¨æˆ·æœªè®¾ç½®åªè¯»,æœ‰å¢åˆ æ”¹æŸ¥æƒé™ï¼›<br>é»˜è®¤çš„SQLè§£æå™¨æ˜¯<code>druidparser</code>ã€‚<br><code>schema.xml</code>é€»è¾‘åº“å®šä¹‰å’Œè¡¨ä»¥åŠåˆ†ç‰‡å®šä¹‰çš„é…ç½®æ–‡ä»¶  </p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0"?></span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mycat:schema</span> <span class="token name">SYSTEM</span> <span class="token string">"schema.dtd"</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mycat:</span>schema</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>mycat</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://io.mycat/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token comment">&lt;!-- TESTDBä¸ºmycatçš„é€»è¾‘è¡¨,åœ¨server.xmlä¸­çš„æŒ‡å®š,å¹¶ä¸mycatçš„ç™»å½•è´¦æˆ·ç»‘å®šåœ¨ä¸€èµ· --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>schema</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>TESTDB<span class="token punctuation">"</span></span> <span class="token attr-name">checkSQLschema</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">sqlMaxLimit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--    é…ç½®ç‰©ç†è¡¨åœ¨mycatä¸­çš„é€»è¾‘å…³ç³»,è¿™é‡ŒæŒ‡å®šäº†mycatä¸­æœ‰ä¸€å¼ é€»è¾‘è¡¨åä¸ºuser,è¿™å¼ è¡¨çš„å®é™…æ•°æ®åˆ†æ•£åœ¨dn1,dn2,dn3ä¸­å¯¹åº”çš„ä¸åŒæ•°>æ®åº“é‡Œé¢,ä¸”åˆ†ç‰‡è§„åˆ™é‡‡ç”¨äº†mod-longï¼Œå½“ç„¶å¯ä»¥æŒ‡å®šä¸åŒçš„åˆ†ç‰‡è§„åˆ™ï¼Œåˆ†ç‰‡è§„åˆ™åœ¨rile.xmlé…ç½®    --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>users<span class="token punctuation">"</span></span> <span class="token attr-name">dataNode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dn1,dn2,dn3<span class="token punctuation">"</span></span> <span class="token attr-name">rule</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rule1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!--    userInfoè¡¨æ˜¯userè¡¨çš„å…³è”è¡¨,ç”¨äºå…³è”æŸ¥è¯¢çš„æƒ…å†µä¸‹,mycatçš„åˆ†ç‰‡é‡‡ç”¨eræ¨¡å‹,joinKey="userId"ä¸ºuserInfoè¡¨çš„å­—æ®µï¼Œè”userè¡¨çš„id,å½“ç„¶ä¹Ÿä¸å®šéå¾—æ˜¯id,é€šè¿‡parentKey="xx"å¯ä»¥æŒ‡å®šå…³è”userè¡¨çš„å­—æ®µ    --></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>childTable</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userInfo<span class="token punctuation">"</span></span>  <span class="token attr-name">joinKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userId<span class="token punctuation">"</span></span> <span class="token attr-name">parentKey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>schema</span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- é…ç½®3ä¸ªèŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹çš„ä¸‰ä¸ªå±æ€§ä¾æ¬¡ä¸º:èŠ‚ç‚¹çš„åç§°,æœåŠ¡å™¨ip,æ•°æ®åº“å®ä¾‹(MySQLçœŸæ­£çš„å®ä¾‹) --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataNode</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dn1<span class="token punctuation">"</span></span> <span class="token attr-name">dataHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bogon<span class="token punctuation">"</span></span> <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>db0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataNode</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dn2<span class="token punctuation">"</span></span> <span class="token attr-name">dataHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bogon<span class="token punctuation">"</span></span> <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>db1<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataNode</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dn3<span class="token punctuation">"</span></span> <span class="token attr-name">dataHost</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bogon<span class="token punctuation">"</span></span> <span class="token attr-name">database</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>db2<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>  <span class="token comment">&lt;!-- é…ç½®è¿æ¥çš„æ•°æ®åº“,éœ€é…ç½®å¥½è¿æ¥æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç åŠip,è¿™ä¸ªå¯ä»¥é…ç½®å¤šä¸ªåœ°å€,ä¸”å¯åˆ†ä¸ºè¯»æ•°æ®åº“å’Œå†™æ•°æ®åº“ --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataHost</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bogon<span class="token punctuation">"</span></span> <span class="token attr-name">maxCon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1000<span class="token punctuation">"</span></span> <span class="token attr-name">minCon</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>10<span class="token punctuation">"</span></span> <span class="token attr-name">balance</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">writeType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>0<span class="token punctuation">"</span></span> <span class="token attr-name">dbType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mysql<span class="token punctuation">"</span></span> <span class="token attr-name">dbDriver</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>native<span class="token punctuation">"</span></span> <span class="token attr-name">switchType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span>  <span class="token attr-name">slaveThreshold</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>100<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- å¿ƒè·³,mycatæœåŠ¡æ¯éš”ä¸€æ®µæ—¶é—´ä¼šå‘å‡ºè¯¥sqlè¯­å¥,éªŒè¯è¯¥æœåŠ¡å™¨æ˜¯å¦è¢«åœæ‰ --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>heartbeat</span><span class="token punctuation">></span></span>select user()<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>heartbeat</span><span class="token punctuation">></span></span>    <span class="token comment">&lt;!-- æŒ‡å®šè‡ªå·±mysqlçš„åœ°å€åŠç”¨æˆ·åå¯†ç  --></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>writeHost</span> <span class="token attr-name">host</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bogon<span class="token punctuation">"</span></span> <span class="token attr-name">url</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>192.168.10.142:3306<span class="token punctuation">"</span></span> <span class="token attr-name">user</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span> <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123456<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>writeHost</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataHost</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mycat:</span>schema</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>Schema</code>ä¸­ä¸»è¦é…ç½®<code>Mycatæ•°æ®åº“</code>ï¼Œ<code>MySQLè¡¨</code>ï¼Œ<code>åˆ†ç‰‡è§„åˆ™</code>ï¼Œ<code>åˆ†ç‰‡ç±»å‹</code>ã€‚  </p><h2 id="schema"><a href="#schema" class="headerlink" title="schema"></a>schema</h2><p>ç¬¬1å—æ˜¯<code>schema</code>å—ï¼Œä¸»è¦æè¿°äº†è™šæ‹Ÿæ•°æ®åº“çš„<code>schemaTESTDB</code>ä¸­æœ‰å“ªäº›è¡¨ï¼Œæ¯ä¸ªè¡¨åˆ†å¸ƒåœ¨å“ªäº›æ•°æ®èŠ‚ç‚¹ä¸Šï¼Œåˆ†å¸ƒçš„æ–¹æ³•é‡‡ç”¨å“ªç§ç®—æ³•ã€‚ä¾‹å¦‚<code>&lt;table name=&quot;users&quot; dataNode=&quot;dn1,dn2,dn3&quot; rule=&quot;rule1&quot; /&gt;</code>ï¼Œè¡¨ç¤º<code>user</code>è¡¨åˆ†å¸ƒåœ¨<code>dn1</code>,<code>dn2</code>,<code>dn3</code>è¿™3ä¸ªèŠ‚ç‚¹ä¸Šï¼Œåˆ†å¸ƒçš„æ–¹æ³•é‡‡ç”¨<code>rule1</code>ç®—æ³•ï¼ˆ<code>rule.xml</code>æ–‡ä»¶ä¸­çš„é…ç½®ï¼‰ã€‚  </p><h2 id="dataNode"><a href="#dataNode" class="headerlink" title="dataNode"></a>dataNode</h2><p>ç¬¬2å—æ˜¯<code>dataNode</code>ï¼Œè¡¨ç¤ºè¯¥æ•°æ®åº“æœ‰å“ªäº›æ•°æ®èŠ‚ç‚¹ï¼Œä»¥åŠè¿™äº›æ•°æ®èŠ‚ç‚¹å®é™…å¯¹åº”çš„æ•°æ®æœåŠ¡å™¨å’Œæ•°æ®åº“åï¼Œè¿™é‡Œé…ç½®äº†3ä¸ªèŠ‚ç‚¹<code>dn1</code>,<code>dn2</code>,<code>dn3</code>ï¼Œéƒ½æ˜¯åœ¨<code>bogon</code>æœåŠ¡å™¨ä¸Šï¼Œæ•°æ®åº“ååˆ†åˆ«æ˜¯<code>db0</code>,<code>db1</code>,<code>db2</code>ï¼Œå…¶å®ï¼Œè¿™ä¹Ÿæ­£æ˜¯å‰é¢<code>schema</code>å—ä¸­ç”¨åˆ°çš„ã€‚  </p><h2 id="dataHost"><a href="#dataHost" class="headerlink" title="dataHost"></a>dataHost</h2><p>ç¬¬3å—æ˜¯<code>dataHost</code>ï¼Œè¿™éƒ¨åˆ†æ˜¯å®é™…çš„æ•°æ®åº“æœåŠ¡å™¨é…ç½®ï¼Œè¿™é‡Œæµ‹è¯•é…ç½®äº†æœ¬åœ°<code>Mysql</code>æ•°æ®åº“ï¼Œåœ°å€åœ¨<code>192.168.10.142:3306</code>ï¼Œç”¨æˆ·åéƒ½æ˜¯<code>root</code>ï¼Œå¯†ç æ˜¯<code>123456</code>ï¼Œå¹¶ä¸”æŒ‡å®šäº†å¿ƒè·³æ˜¯<code>select user()</code>ã€‚  </p><p>è¿™é‡Œé¢æœ‰ä¸¤ä¸ªå‚æ•°éœ€è¦æ³¨æ„ï¼Œ<code>balance</code>å’Œ<code>switchType</code>ã€‚<br><code>balance</code>æŒ‡çš„è´Ÿè½½å‡è¡¡ç±»å‹ï¼Œç›®å‰çš„å–å€¼æœ‰4ç§ï¼š<br><code>balance=&quot;0&quot;</code>, ä¸å¼€å¯è¯»å†™åˆ†ç¦»æœºåˆ¶ï¼Œæ‰€æœ‰è¯»æ“ä½œéƒ½å‘é€åˆ°å½“å‰å¯ç”¨çš„<code>writeHost</code>ä¸Šã€‚<br><code>balance=&quot;1&quot;</code>ï¼Œå…¨éƒ¨çš„<code>readHost</code>ä¸<code>stand by writeHost</code>å‚ä¸<code>select</code>è¯­å¥çš„è´Ÿè½½å‡è¡¡ï¼Œç®€å•çš„è¯´ï¼Œå½“åŒä¸»åŒä»æ¨¡å¼<code>(M1-&gt;S1ï¼ŒM2-&gt;S2ï¼Œå¹¶ä¸”M1ä¸ M2äº’ä¸ºä¸»å¤‡)</code>ï¼Œæ­£å¸¸æƒ…å†µä¸‹ï¼Œ<code>M2</code>,<code>S1</code>,<code>S2</code>éƒ½å‚ä¸<code>select</code>è¯­å¥çš„è´Ÿè½½å‡è¡¡ã€‚<br><code>balance=&quot;2&quot;</code>ï¼Œæ‰€æœ‰è¯»æ“ä½œéƒ½éšæœºçš„åœ¨<code>writeHost</code>ã€<code>readhost</code>ä¸Šåˆ†å‘ã€‚<br><code>balance=&quot;3&quot;</code>ï¼Œæ‰€æœ‰è¯»è¯·æ±‚éšæœºçš„åˆ†å‘åˆ°<code>wiriterHost</code>å¯¹åº”çš„<code>readhost</code>æ‰§è¡Œï¼Œ<code>writerHost</code>ä¸è´Ÿæ‹…è¯»å‹åŠ›  </p><p><code>switchType</code>æŒ‡çš„æ˜¯åˆ‡æ¢çš„æ¨¡å¼ï¼Œç›®å‰çš„å–å€¼ä¹Ÿæœ‰4ç§ï¼š<br><code>switchType=&#39;-1&#39;</code> è¡¨ç¤ºä¸è‡ªåŠ¨åˆ‡æ¢<br><code>switchType=&#39;1&#39;</code> é»˜è®¤å€¼ï¼Œè¡¨ç¤ºè‡ªåŠ¨åˆ‡æ¢<br><code>switchType=&#39;2&#39;</code> åŸºäº<code>MySQLä¸»ä»åŒæ­¥</code>çš„çŠ¶æ€å†³å®šæ˜¯å¦åˆ‡æ¢,å¿ƒè·³è¯­å¥ä¸º<code>show slave status</code><br><code>switchType=&#39;3&#39;</code> åŸºäº<code>MySQL galary cluster</code>çš„åˆ‡æ¢æœºåˆ¶ï¼ˆé€‚åˆé›†ç¾¤ï¼‰ï¼ˆ1.4.1ï¼‰ï¼Œå¿ƒè·³è¯­å¥ä¸º<code>show status like &#39;wsrep%&#39;</code>ã€‚  </p><p><code>rule.xml</code>å®šä¹‰åˆ†ç‰‡è§„åˆ™çš„é…ç½®æ–‡ä»¶ï¼Œåˆ†ç‰‡è§„åˆ™çš„å…·ä½“ä¸€äº›å‚æ•°ä¿¡æ¯å•ç‹¬å­˜æ”¾ä¸ºæ–‡ä»¶ã€‚  </p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mycat:rule</span> <span class="token name">SYSTEM</span> <span class="token string">"rule.dtd"</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mycat:</span>rule</span> <span class="token attr-name"><span class="token namespace">xmlns:</span>mycat</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://io.mycat/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tableRule</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>rule1<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rule</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>columns</span><span class="token punctuation">></span></span>id<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>columns</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>algorithm</span><span class="token punctuation">></span></span>mod-long<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>algorithm</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rule</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tableRule</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>function</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mod-long<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>io.mycat.route.function.PartitionByMod<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>  <span class="token comment">&lt;!-- how many data nodes --></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>count<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>function</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mycat:</span>rule</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ•°æ®åˆ‡åˆ†ä¸­ä½œä¸ºè¡¨åˆ‡åˆ†è§„åˆ™ä¸­æœ€é‡è¦çš„é…ç½®ï¼Œè¡¨çš„åˆ‡åˆ†æ–¹å¼å†³å®šäº†æ•°æ®åˆ‡åˆ†åçš„æ€§èƒ½å¥½åï¼Œå› æ­¤ä¹Ÿæ˜¯æœ€é‡è¦çš„é…ç½®ã€‚  </p><p>å¦‚ä¸Šé¢ä¾‹å­é…ç½®äº†ä¸€ä¸ªåˆ‡åˆ†è§„åˆ™ï¼Œåä¸º<code>rule1</code>å¯¹åº”çš„åˆ‡åˆ†æ–¹å¼ï¼ˆ<code>function</code>ï¼‰æ˜¯æŒ‰æ—¥æœŸåˆ‡åˆ†ï¼Œè¯¥é…ç½®ä¸­ï¼š </p><h2 id="tableRule"><a href="#tableRule" class="headerlink" title="tableRule"></a>tableRule</h2><p><code>name</code> ä¸º<code>schema.xml</code>ä¸­<code>table</code>æ ‡ç­¾ä¸­å¯¹åº”çš„<code>rule=&quot;rule1&quot;</code>,ä¹Ÿå°±æ˜¯é…ç½®è¡¨çš„åˆ†ç‰‡è§„åˆ™ï¼Œ<br><code>columns</code> æ˜¯è¡¨çš„åˆ‡åˆ†å­—æ®µï¼š<code>id</code>ã€‚<br><code>algorithm</code> æ˜¯è§„åˆ™å¯¹åº”çš„åˆ‡åˆ†è§„åˆ™ï¼š<code>æ˜ å°„åˆ°functionçš„name</code>ã€‚ </p><h2 id="function"><a href="#function" class="headerlink" title="function"></a>function</h2><p><code>function</code> é…ç½®æ˜¯åˆ†ç‰‡è§„åˆ™çš„é…ç½®ã€‚<br><code>name</code> ä¸ºåˆ‡åˆ†è§„åˆ™çš„åç§°ï¼Œåå­—äººå‘˜å–ï¼Œä½†æ˜¯éœ€è¦ä¸<code>tableRule</code>ä¸­åŒ¹é…ã€‚<br><code>class</code> æ˜¯åˆ‡åˆ†è§„åˆ™å¯¹åº”çš„åˆ‡åˆ†ç±»ï¼Œå†™æ­»ï¼Œéœ€è¦å“ªç§è§„åˆ™åˆ™é…ç½®å“ªç§ï¼Œä¾‹å¦‚æœ¬ä¾‹æ˜¯æ±‚æ¨¡æ³•ï¼š<code>io.mycat.route.function.PartitionByMod</code><br>ï¼ˆä¸Šé¢<code>columns</code>æ ‡è¯†å°†è¦åˆ†ç‰‡çš„è¡¨å­—æ®µï¼Œ<code>algorithm</code>åˆ†ç‰‡å‡½æ•°ï¼Œ<br>æ­¤ç§é…ç½®éå¸¸æ˜ç¡®å³æ ¹æ®<code>id</code>ä¸<code>count</code>ï¼ˆä½ çš„ç»“ç‚¹æ•°ï¼‰è¿›è¡Œæ±‚æ¨¡é¢„ç®—ï¼Œç›¸æ¯”æ–¹å¼1ï¼Œæ­¤ç§åœ¨æ‰¹é‡æ’å…¥æ—¶éœ€è¦åˆ‡æ¢æ•°æ®æºï¼Œ<code>idä¸è¿ç»­</code>ï¼‰ã€‚<br><code>property</code> æ ‡ç­¾æ˜¯åˆ‡åˆ†è§„åˆ™å¯¹åº”çš„ä¸åŒå±æ€§ï¼Œä¸åŒçš„åˆ‡åˆ†è§„åˆ™é…ç½®ä¸åŒã€‚ </p><h1 id="ç™»å½•æ¼”ç¤ºmycat"><a href="#ç™»å½•æ¼”ç¤ºmycat" class="headerlink" title="ç™»å½•æ¼”ç¤ºmycat"></a>ç™»å½•æ¼”ç¤ºmycat</h1><p>ç™»å½•æ–¹å¼ç±»ä¼¼äº<code>mysql</code>çš„æœåŠ¡ç«¯ç™»é™†ï¼Œç›®å‰<code>mycat</code>æœ‰ä¸¤ä¸ªç«¯å£ï¼Œ<code>8066</code>æ•°æ®ç«¯å£ï¼Œ<code>9066</code>ç®¡ç†ç«¯å£ã€‚<br><code>mysql -h192.168.10.142 -uroot -p -P8066</code><br><code>-h</code> åé¢æ˜¯ä¸»æœºï¼Œå³å½“å‰<code>mycat</code>æŒ‰ç…§çš„ä¸»æœºåœ°å€ï¼Œæœ¬åœ°å¯ç”¨<code>127.0.0.1</code>è¿œç¨‹éœ€è¦è¿œç¨‹<code>ip</code><br><code>-u</code> <code>Mycat server.xml</code>ä¸­é…ç½®çš„é€»è¾‘åº“ç”¨æˆ·<br><code>-p</code> <code>Mycat server.xml</code>ä¸­é…ç½®çš„é€»è¾‘åº“å¯†ç <br><code>-P</code> åé¢æ˜¯ç«¯å£é»˜è®¤<code>9066</code>ï¼Œæ³¨æ„<code>P</code>æ˜¯å¤§å†™<br><code>-d</code> <code>Mycat server.xml</code>ä¸­é…ç½®çš„é€»è¾‘åº“  </p><p>æ•°æ®ç«¯å£ä¸ç®¡ç†ç«¯å£çš„é…ç½®ç«¯å£ä¿®æ”¹ï¼š<br>æ•°æ®ç«¯å£é»˜è®¤<code>8066</code>ï¼Œç®¡ç†ç«¯å£é»˜è®¤<code>9066</code>ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹éœ€è¦é…ç½®<code>serve.xml</code><br><img src="/medias/drawing-bed/mycat/4.png"><br><img src="/medias/drawing-bed/mycat/5.png"><br><img src="/medias/drawing-bed/mycat/6.png"></p><p>ç™»å½•æŸ¥çœ‹çœŸå®æ•°æ®åº“æŸ¥çœ‹å†…å®¹æ˜¯å¦åœ¨<code>db0</code>,<code>db1</code>,<code>db2</code>åº“çš„<code>users</code>è¡¨ä¸­<br><img src="/medias/drawing-bed/mycat/7.png"><br><img src="/medias/drawing-bed/mycat/8.png"><br>æˆåŠŸï¼ï¼ï¼  </p><h1 id="æ³¨æ„ï¼š"><a href="#æ³¨æ„ï¼š" class="headerlink" title="æ³¨æ„ï¼š"></a>æ³¨æ„ï¼š</h1><p>å¯åŠ¨<code>MyCAT</code>ä¹‹å‰ï¼Œéœ€è¦å…ˆæ£€æŸ¥ä¸€äº›é…ç½®ï¼š </p><ol><li><code>java</code>çš„ç‰ˆæœ¬éœ€è¦æ˜¯<code>1.7</code>æˆ–ä»¥ä¸Šï¼›  </li><li><code>Mysql</code>çš„é…ç½®æ–‡ä»¶éœ€è¦åŠ ä¸€è¡Œ<code>lower_case_table_names = 1</code>åœ¨<code>[mysqld]</code>æ ç›®ä¸­ï¼Œè¿™ä¸ªè®¾ç½®ä¸º<code>Mysql</code>å¤§å°å†™ä¸æ•æ„Ÿï¼Œå¦åˆ™å¯èƒ½ä¼šå‘ç”Ÿè¡¨æ‰¾ä¸åˆ°çš„é—®é¢˜ï¼› </li><li><code>ERROR 3009 (HY000): java.lang.IllegalArgumentException: Invalid DataSource:1</code><br>è¿™ä¸ªæœ‰å¯èƒ½æ˜¯<code>Mycat</code>å’Œ<code>MySQL</code>éƒ¨ç½²åœ¨åŒä¸€å°æœºå™¨ä¸Šï¼Œè€Œåœ¨<code>schema.xml</code>æ˜¯ä½¿ç”¨äº†<code>IP</code>çš„ï¼Œä½†æ˜¯è´¦å·åªèƒ½ä½¿ç”¨<code>localhost</code>ç™»é™†ï¼Œæ‰€ä»¥ä¼šå‡ºç°æœ¬åœ°çš„<code>Mycat</code>æ— æ³•è¿æ¥<code>MySQL</code> </li><li>æ·»åŠ <code>MYCAT_HOME</code>ç¯å¢ƒå˜é‡æŒ‡å‘è§£å‹çš„<code>mycat</code>ç›®å½•ï¼Œä¸»è¦æ˜¯ä¸ºäº†ä¸€äº›<code>bin</code>ç›®å½•ä¸‹çš„è„šæœ¬çš„ä½¿ç”¨ã€‚ </li></ol><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> mysql </tag>
            
            <tag> mycat </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ntpæœåŠ¡å™¨</title>
      <link href="/posts/d7b4.html"/>
      <url>/posts/d7b4.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p><strong>ä¸­å›½ | åŸŸåï¼š<font color=Blue>cn.ntppod.com</font></strong></p><table><thead><tr><th align="left">åºå·</th><th align="center">æœåŠ¡å™¨IPåœ°å€</th><th>æä¾›è€…</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">120.25.115.20ï¼ˆæ·±åœ³ï¼‰</td><td>é˜¿é‡Œäº‘</td></tr><tr><td align="left">2</td><td align="center">182.92.12.11ï¼ˆåŒ—äº¬ï¼‰</td><td>é˜¿é‡Œäº‘</td></tr><tr><td align="left">3</td><td align="center">203.107.6.88ï¼ˆé’å²›ï¼‰</td><td>é˜¿é‡Œäº‘</td></tr><tr><td align="left">4</td><td align="center">120.25.108.11ï¼ˆæ·±åœ³ï¼‰</td><td>é˜¿é‡Œäº‘</td></tr></tbody></table><p><strong>ä¸­å›½æ•™ç§‘ç½‘ | åŸŸåï¼š<font color=Blue>edu.ntppod.com</font></strong></p><table><thead><tr><th align="left">åºå·</th><th align="center">æœåŠ¡å™¨IPåœ°å€</th><th>æä¾›è€…</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">202.118.1.81ï¼ˆæ²ˆé˜³ï¼‰</td><td>ä¸œåŒ—å¤§å­¦</td></tr><tr><td align="left">2</td><td align="center">202.118.1.130ï¼ˆæ²ˆé˜³ï¼‰</td><td>ä¸œåŒ—å¤§å­¦</td></tr><tr><td align="left">3</td><td align="center">202.112.29.82ï¼ˆæ²ˆé˜³ï¼‰</td><td>ä¸œåŒ—å¤§å­¦</td></tr><tr><td align="left">4</td><td align="center">202.112.31.197ï¼ˆæ²ˆé˜³ï¼‰</td><td>ä¸œåŒ—å¤§å­¦</td></tr></tbody></table><p><strong>ä¸­å›½å°æ¹¾ | åŸŸåï¼š<font color=Blue>tw.ntppod.com</font></strong></p><table><thead><tr><th align="left">åºå·</th><th align="center">æœåŠ¡å™¨IPåœ°å€</th><th>æä¾›è€…</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">103.18.128.60ï¼ˆå°åŒ—ï¼‰</td><td>NtpPod</td></tr><tr><td align="left">2</td><td align="center">123.204.45.116ï¼ˆé«˜é›„ï¼‰</td><td>NtpPod</td></tr></tbody></table><p><strong>ä¸­å›½é¦™æ¸¯ | åŸŸåï¼š<font color=Blue>hk.ntppod.com</font></strong></p><table><thead><tr><th align="left">åºå·</th><th align="center">æœåŠ¡å™¨IPåœ°å€</th><th>æä¾›è€…</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">118.193.151.223ï¼ˆé¦™æ¸¯ï¼‰</td><td>NtpPod</td></tr></tbody></table><p><strong>æ—¥æœ¬ | åŸŸåï¼š<font color=Blue>jp.ntppod.com</font></strong></p><table><thead><tr><th align="left">åºå·</th><th align="center">æœåŠ¡å™¨IPåœ°å€</th><th>æä¾›è€…</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">133.100.11.8ï¼ˆç¦å†ˆï¼‰</td><td>NtpPod</td></tr><tr><td align="left">2</td><td align="center">129.250.35.251ï¼ˆç¾å›½ï¼‰</td><td>NtpPod</td></tr><tr><td align="left">3</td><td align="center">106.187.100.179ï¼ˆä¸œäº¬ï¼‰</td><td>NtpPod</td></tr><tr><td align="left">4</td><td align="center">106.186.122.232ï¼ˆä¸œäº¬KDDIï¼‰</td><td>NtpPod</td></tr></tbody></table><p><strong>éŸ©å›½ | åŸŸåï¼š<font color=Blue>kr.ntppod.com</font></strong></p><table><thead><tr><th align="left">åºå·</th><th align="center">æœåŠ¡å™¨IPåœ°å€</th><th>æä¾›è€…</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">106.247.248.106ï¼ˆäº¬ç•¿é“ï¼‰</td><td>NtpPod</td></tr><tr><td align="left">2</td><td align="center">211.233.40.78ï¼ˆéŸ©å›½ï¼‰</td><td>NtpPod</td></tr></tbody></table><p><strong>æ–°åŠ å¡ | åŸŸåï¼š<font color=Blue>sgp.ntppod.com</font></strong></p><table><thead><tr><th align="left">åºå·</th><th align="center">æœåŠ¡å™¨IPåœ°å€</th><th>æä¾›è€…</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">218.186.3.36ï¼ˆæ–°åŠ å¡ï¼‰</td><td>NtpPod</td></tr><tr><td align="left">2</td><td align="center">128.199.134.40ï¼ˆæ–°åŠ å¡ï¼‰</td><td>NtpPod</td></tr><tr><td align="left">3</td><td align="center">188.166.245.58ï¼ˆæ–°åŠ å¡ï¼‰</td><td>NtpPod</td></tr><tr><td align="left">4</td><td align="center">202.73.57.107ï¼ˆæ–°åŠ å¡ï¼‰</td><td>NtpPod</td></tr><tr><td align="left">5</td><td align="center">103.11.143.248ï¼ˆæ–°åŠ å¡ï¼‰</td><td>NtpPod</td></tr></tbody></table><p><strong>ç¾å›½ | åŸŸåï¼š<font color=Blue>us.ntppod.com</font></strong></p><table><thead><tr><th align="left">åºå·</th><th align="center">æœåŠ¡å™¨IPåœ°å€</th><th>æä¾›è€…</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">208.53.158.34ï¼ˆèŠåŠ å“¥ï¼‰</td><td>NtpPod</td></tr><tr><td align="left">2</td><td align="center">66.228.42.59ï¼ˆæ–°æ³½è¥¿ï¼‰</td><td>NtpPod</td></tr><tr><td align="left">3</td><td align="center">158.69.48.97ï¼ˆåŠ æ‹¿å¤§é­åŒ—å…‹ï¼‰</td><td>NtpPod</td></tr><tr><td align="left">4</td><td align="center">216.218.254.202ï¼ˆåŠ åˆ©ç¦å°¼äºšï¼‰</td><td>NtpPod</td></tr></tbody></table><p><strong>å¾·å›½ | åŸŸåï¼š<font color=Blue>de.ntppod.com</font></strong></p><table><thead><tr><th align="left">åºå·</th><th align="center">æœåŠ¡å™¨IPåœ°å€</th><th>æä¾›è€…</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">131.188.3.220ï¼ˆå·´ä¼åˆ©äºšï¼‰</td><td>NtpPod</td></tr><tr><td align="left">2</td><td align="center">131.188.3.223ï¼ˆå·´ä¼åˆ©äºšï¼‰</td><td>NtpPod</td></tr></tbody></table><p><strong>å°åº¦å°¼è¥¿äºš | åŸŸåï¼š<font color=Blue>ina.ntppod.com</font></strong></p><table><thead><tr><th align="left">åºå·</th><th align="center">æœåŠ¡å™¨IPåœ°å€</th><th>æä¾›è€…</th></tr></thead><tbody><tr><td align="left">1</td><td align="center">203.114.74.17ï¼ˆé›…åŠ è¾¾ï¼‰</td><td>NtpPod</td></tr></tbody></table><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> ntp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zabbixç›‘æ§é…ç½®</title>
      <link href="/posts/8737.html"/>
      <url>/posts/8737.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h2 id="ç¯å¢ƒé…ç½®-serverç«¯å’Œagentç«¯"><a href="#ç¯å¢ƒé…ç½®-serverç«¯å’Œagentç«¯" class="headerlink" title="ç¯å¢ƒé…ç½®(serverç«¯å’Œagentç«¯)"></a>ç¯å¢ƒé…ç½®(serverç«¯å’Œagentç«¯)</h2><p>å‡çº§ç³»ç»Ÿç»„ä»¶åˆ°æœ€æ–°çš„ç‰ˆæœ¬</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span>  yum -y update<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å…³é—­selinux</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">setenforce <span class="token number">0</span>       <span class="token comment">#ä¸´æ—¶å…³é—­å‘½ä»¤</span><span class="token function">vi</span> /etc/selinux/config    <span class="token comment">#å°†SELINUX=enforcingæ”¹ä¸ºSELINUX=disabled è®¾ç½®åéœ€è¦é‡å¯æ‰èƒ½ç”Ÿæ•ˆ</span>getenforce         <span class="token comment">#æ£€æµ‹selinuxæ˜¯å¦å…³é—­ï¼ŒDisabled ä¸ºå…³é—­</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å…³é—­é˜²ç«å¢™</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall-cmd --state    <span class="token comment">#æŸ¥çœ‹é»˜è®¤é˜²ç«å¢™çŠ¶æ€ï¼Œå…³é—­åæ˜¾ç¤ºnot runningï¼Œå¼€å¯åæ˜¾ç¤ºrunning</span>systemctl stop firewalld.service    <span class="token comment">#ä¸´æ—¶å…³é—­firewal</span>systemctl disable firewalld.service <span class="token comment">#ç¦æ­¢firewallå¼€æœºå¯åŠ¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="zabbixæœåŠ¡ç«¯é…ç½®-serverç«¯"><a href="#zabbixæœåŠ¡ç«¯é…ç½®-serverç«¯" class="headerlink" title="zabbixæœåŠ¡ç«¯é…ç½®(serverç«¯)"></a>zabbixæœåŠ¡ç«¯é…ç½®(serverç«¯)</h2><p>zabbixéœ€è¦å€ŸåŠ©LAMPæˆ–è€…LNMPç¯å¢ƒ,LAMPæ¯”è¾ƒæ–¹ä¾¿é…ç½®æ‰€ä»¥å…ˆæ­å»ºLAMPç¯å¢ƒ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å®‰è£…è½¯ä»¶åŒ…å’Œå…¶ä»–å·¥å…·åŒ…</span> yum <span class="token function">install</span> -y httpd mariadb-server mariadb php php-mysql php-gd libjpeg* php-ldap php-odbc php-pear php-xml php-xmlrpc php-mhash <span class="token function">rpm</span> -qa httpd php   mariadb    <span class="token comment"># æˆ–è€…  </span> <span class="token function">rpm</span> -qa httpd php mysql-community-server   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ·»åŠ é¦–é¡µæ”¯æŒæ ¼å¼ã€€</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span>  /etc/httpd/conf/httpd.conf     DirectoryIndex index.html index.php  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>é…ç½®æ—¶åŒº  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/php.ini      date.timezone <span class="token operator">=</span> PRC<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¯åŠ¨å¹¶åŠ å…¥å¼€å¯è‡ªå¯åŠ¨</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl start httpd   <span class="token comment">#å¯åŠ¨å¹¶åŠ å…¥å¼€æœºè‡ªå¯åŠ¨httpd</span>systemctl <span class="token builtin class-name">enable</span> httpdsystemctl start mysqld  <span class="token comment">#å¯åŠ¨å¹¶åŠ å…¥å¼€æœºè‡ªå¯åŠ¨mysqld</span>systemctl <span class="token builtin class-name">enable</span> mysqldss -anplt <span class="token operator">|</span> <span class="token function">grep</span> httpd   <span class="token comment">#æŸ¥çœ‹httpdå¯åŠ¨æƒ…å†µï¼Œ80ç«¯å£ç›‘æ§è¡¨ç¤ºhttpdå·²å¯åŠ¨</span>ss -naplt <span class="token operator">|</span> <span class="token function">grep</span> mysqld  <span class="token comment">#æŸ¥çœ‹mysqldå¯åŠ¨æƒ…å†µï¼Œ3306ç«¯å£ç›‘æ§è¡¨ç¤ºmysqldå·²å¯åŠ¨ã€€</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡µæµ‹è¯•</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span>  <span class="token function">sh</span> -c <span class="token string">'echo "&lt;?php echo phpinfo();?>"  > index.php '</span>  <span class="token comment"># ç›´æ¥ä½¿ç”¨sudo echo ä¼šæç¤ºæƒé™ä¸è¶³   ä¾‹å¦‚ï¼šsudo echo "&lt;?php echo phpinfo();?>"  > index.php </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/zabbix/1.png"></p><h2 id="æ•°æ®åº“é…ç½®-serverç«¯"><a href="#æ•°æ®åº“é…ç½®-serverç«¯" class="headerlink" title="æ•°æ®åº“é…ç½®(serverç«¯)"></a>æ•°æ®åº“é…ç½®(serverç«¯)</h2><p>åˆå§‹åŒ–æ•°æ®åº“è®¾ç½®æ•°æ®åº“rootå¯†ç </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> mysqladmin -u root password <span class="token number">123456</span>  <span class="token comment">#rootç”¨æˆ·ç™»é™†æ•°æ®åº“</span>mysql -u root -p123456       <span class="token comment">#åˆ›å»ºzabbixæ•°æ®åº“ï¼ˆä¸­æ–‡ç¼–ç æ ¼å¼ï¼‰</span>CREATE DATABASE zabbix character <span class="token builtin class-name">set</span> utf8 collate utf8_bin<span class="token punctuation">;</span>   <span class="token comment">#æˆäºˆzabbixç”¨æˆ·zabbixæ•°æ®åº“çš„æ‰€æœ‰æƒé™ï¼Œå¯†ç admin123</span>GRANT all ON zabbix.* TO <span class="token string">'zabbix'</span>@<span class="token string">'%'</span> IDENTIFIED BY <span class="token string">'admin123'</span><span class="token punctuation">;</span>  <span class="token comment">#åˆ·æ–°æƒé™</span>flush privileges<span class="token punctuation">;</span>   <span class="token comment">#é€€å‡ºæ•°æ®åº“ </span>quit                <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/zabbix/2.png"></p><p>æ•°æ®åº“è¿æ¥æµ‹è¯•é¡µ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">vim</span> /var/www/html/index.php     <span class="token operator">&lt;</span>?php    <span class="token variable">$link</span><span class="token operator">=</span>mysql_connect<span class="token punctuation">(</span><span class="token string">'172.18.20.224'</span>,<span class="token string">'zabbix'</span>,<span class="token string">'admin123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>     if<span class="token punctuation">(</span><span class="token variable">$link</span><span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">"&lt;h1>Success!!&lt;/h1>"</span><span class="token punctuation">;</span>   <span class="token comment">#æ˜¾ç¤ºSuccessè¡¨ç¤ºè¿æ¥æ•°æ®åº“æˆåŠŸ</span>    <span class="token keyword">else</span> <span class="token builtin class-name">echo</span> <span class="token string">"Fail!!"</span><span class="token punctuation">;</span>    mysql_close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    ?<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/zabbix/3.png"></p><h2 id="å®‰è£…zabbix-serverç«¯"><a href="#å®‰è£…zabbix-serverç«¯" class="headerlink" title="å®‰è£…zabbix(serverç«¯)"></a>å®‰è£…zabbix(serverç«¯)</h2><p>å®‰è£…ä¾èµ–åŒ…å’Œç»„ä»¶</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span>  yum -y <span class="token function">install</span> net-snmp net-snmp-devel <span class="token function">curl</span> curl-devel libxml2 libxml2-devel libevent-devel.x86_64 javacc.noarch  javacc-javadoc.noarch javacc-maven-plugin.noarch javacc*<span class="token comment"># å®‰è£…phpæ”¯æŒzabbixç»„ä»¶</span><span class="token function">sudo</span>  yum <span class="token function">install</span> php-bcmath php-mbstring -y <span class="token comment"># ä¼šè‡ªåŠ¨ç”Ÿæˆyumæºæ–‡ä»¶ï¼Œä¿è¯ç³»ç»Ÿå¯ä»¥ä¸Šç½‘</span><span class="token function">sudo</span>  <span class="token function">rpm</span> -ivh http://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-1.el7.noarch.rpm  <span class="token comment"># æ¸…ç†yumç¼“å­˜</span><span class="token function">sudo</span> yum clean all <span class="token comment"># å®‰è£…zabbixç»„ä»¶</span><span class="token function">sudo</span>  yum <span class="token function">install</span> zabbix-server-mysql zabbix-web-mysql -y    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®‰è£…zabbixåä¼šæœ‰ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶,éœ€è¦æŠŠè¿™ä¸ªæ–‡ä»¶æ¢å¤åˆ°æ•°æ®åº“ä¸­</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span>   /usr/share/doc/zabbix-server-mysql-4.0.21/<span class="token comment">#å¯¼å…¥æ•°æ®åˆ°æ•°æ®åº“zabbixä¸­(æœ€åä¸€ä¸ªzabbixæ˜¯æ•°æ®åº“zabbix)ï¼Œä¸”å› ä¸ºç”¨æˆ·zabbixæ˜¯%(ä»»æ„ä¸»æœº)ï¼Œæ‰€ä»¥ç™»å½•æ—¶éœ€è¦åŠ ä¸Šå½“å‰ä¸»æœºip(-h 192.168.1.122),å¯†ç æ˜¯ç”¨æˆ·zabbixç™»é™†å¯†ç admin123</span><span class="token function">sudo</span>  zcat  create.sql.gz <span class="token operator">|</span> mysql -uzabbix -p -h <span class="token number">192.168</span>.1.122 zabbix   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>åœ¨é…ç½®æ–‡ä»¶ä¸­é…ç½®æ•°æ®åº“ç”¨æˆ·åŠå¯†ç </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">vim</span>  /etc/zabbix/zabbix_server.conf     <span class="token assign-left variable">DBHost</span><span class="token operator">=</span><span class="token number">192.168</span>.1.122    <span class="token assign-left variable">DBName</span><span class="token operator">=</span>zabbix    <span class="token assign-left variable">DBUser</span><span class="token operator">=</span>zabbix    <span class="token assign-left variable">DBPassword</span><span class="token operator">=</span>admin123<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¡®å®šæ•°æ®åº“ç”¨æˆ·åŠå¯†ç </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">grep</span> -n <span class="token string">'^'</span><span class="token punctuation">[</span>a-Z<span class="token punctuation">]</span> /etc/zabbix/zabbix_server.conf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¿®æ”¹æ—¶åŒº</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span>  <span class="token function">vim</span> /etc/httpd/conf.d/zabbix.conf  <span class="token comment"># å°†# php_value date.timezone Europe/Riga å˜æ›´æˆphp_value date.timezone Asia/Shanghai</span>    php_value date.timezone Asia/Shanghai<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¯åŠ¨å¹¶åŠ å…¥å¼€æœºè‡ªå¯åŠ¨zabbix-server</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl <span class="token builtin class-name">enable</span> zabbix-server systemctl start zabbix-server<span class="token comment">#   ç›‘å¬åœ¨10051ç«¯å£ä¸Š,å¦‚æœæ²¡ç›‘å¬æˆåŠŸï¼Œå¯é‡å¯zabbix-serveræœåŠ¡è¯•è¯•</span><span class="token function">netstat</span> -anpt <span class="token operator">|</span> <span class="token function">grep</span> zabbix        <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>é»˜è®¤ç”¨æˆ·å’Œå¯†ç </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">é»˜è®¤è´¦å·Adminé»˜è®¤å¯†ç ä¸ºzabbix  å¯†ç ç»è¿‡MD5åŠ å¯†åä¸º5fce1b3e34b520afeffb37ce08c7cd66<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="welcom-zabbix-åå°"><a href="#welcom-zabbix-åå°" class="headerlink" title="welcom zabbix(åå°)"></a>welcom zabbix(åå°)</h2><p>å¦‚æœä»¥ä¸Šæ­¥éª¤æ— è¯¯ï¼Œç°åœ¨å¯ä»¥ä½¿ç”¨webæ‰“å¼€   </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">http://192.168.1.122/zabbixã€€  <span class="token comment"># æ³¨æ„è¿™é‡ŒIEæµè§ˆå™¨æ‰“ä¸å¼€,ä½¿ç”¨å…¶ä»–æµè§ˆå™¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/medias/drawing-bed/zabbix/5.png"><br>è¿™é‡Œå¿…é¡»å…¨éƒ¨éƒ½æ˜¯OK<br><img src="/medias/drawing-bed/zabbix/6.png"><br><img src="/medias/drawing-bed/zabbix/7.png"><br><img src="/medias/drawing-bed/zabbix/8.png"><br><img src="/medias/drawing-bed/zabbix/9.png"><br>å®‰è£…æˆåŠŸ<br><img src="/medias/drawing-bed/zabbix/10.png"><br>è¿›å…¥ç•Œé¢åè®¾ç½®è¯­è¨€<br><img src="/medias/drawing-bed/zabbix/11.png"><br>é€‰æ‹©Chinese<br><img src="/medias/drawing-bed/zabbix/12.png"></p><h2 id="Agentç«¯é…ç½®-agentç«¯"><a href="#Agentç«¯é…ç½®-agentç«¯" class="headerlink" title="Agentç«¯é…ç½®(agentç«¯)"></a>Agentç«¯é…ç½®(agentç«¯)</h2><p>å®‰è£…ä¾èµ–åŒ…å’Œç»„ä»¶</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span>  yum -y <span class="token function">install</span> net-snmp net-snmp-devel <span class="token function">curl</span> curl-devel libxml2 libxml2-devel libevent-devel.x86_64 javacc.noarch  javacc-javadoc.noarch javacc-maven-plugin.noarch javacc*<span class="token comment"># å®‰è£…phpæ”¯æŒzabbixç»„ä»¶</span><span class="token function">sudo</span>  yum <span class="token function">install</span> php-bcmath php-mbstring -y <span class="token comment"># ä¼šè‡ªåŠ¨ç”Ÿæˆyumæºæ–‡ä»¶ï¼Œä¿è¯ç³»ç»Ÿå¯ä»¥ä¸Šç½‘</span><span class="token function">sudo</span>  <span class="token function">rpm</span> -ivh http://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-1.el7.noarch.rpm  <span class="token comment"># æ¸…ç†yumç¼“å­˜</span><span class="token function">sudo</span> yum clean all <span class="token comment"># å®‰è£…zabbix-agent </span><span class="token function">sudo</span>   yum <span class="token function">install</span> zabbix-agent  -y   <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¿®æ”¹zabbix-agentçš„é…ç½®æ–‡ä»¶</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span>   /etc/zabbix/zabbix_agentd.conf    <span class="token comment"># æŒ‡å®šzabbixæœåŠ¡å™¨çš„IP</span>    <span class="token assign-left variable">Server</span><span class="token operator">=</span><span class="token number">192.168</span>.1.122        <span class="token comment"># æŒ‡å®šzabbixæœåŠ¡å™¨çš„IP</span>    <span class="token assign-left variable">ServerActive</span><span class="token operator">=</span><span class="token number">192.168</span>.1.122      <span class="token comment"># æŒ‡å®šåå°æ˜¾ç¤ºåç§°</span>    <span class="token assign-left variable">Hostname</span><span class="token operator">=</span>test         <span class="token comment"># æ˜¯å¦æ”¯æŒè‡ªå®šä¹‰key  é»˜è®¤ä¸º 0  ä¸æ”¯æŒ</span>    <span class="token assign-left variable">UnsafeUserParameters</span><span class="token operator">=</span><span class="token number">1</span>       <span class="token comment"># è‡ªå®šä¹‰key  ç›‘æ§é¡¹</span>    <span class="token assign-left variable">UserParameter</span><span class="token operator">=</span>prod.redis,ps -ef<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'redis'</span> <span class="token operator">|</span><span class="token function">grep</span> -v <span class="token string">'grep'</span><span class="token operator">|</span><span class="token function">wc</span> -l         <span class="token comment"># è‡ªå®šä¹‰key  ç›‘æ§é¡¹</span>    <span class="token assign-left variable">UserParameter</span><span class="token operator">=</span>prod.mongo,ps -ef<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'mongo'</span> <span class="token operator">|</span><span class="token function">grep</span> -v <span class="token string">'grep'</span><span class="token operator">|</span><span class="token function">wc</span> -l       <span class="token comment"># è‡ªå®šä¹‰key  ç›‘æ§é¡¹  </span>    <span class="token assign-left variable">UserParameter</span><span class="token operator">=</span>prod.node,ps -ef<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">'node'</span> <span class="token operator">|</span><span class="token function">grep</span> -v <span class="token string">'grep'</span><span class="token operator">|</span><span class="token function">wc</span> -l       <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯åŠ¨agentç«¯</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/usr/sbin/zabbix_agentd  -c /etc/zabbix/zabbix_agentd.conf     <span class="token comment"># å¯åŠ¨agentç«¯</span>systemctl  restart   zabbix-agent   <span class="token comment"># é‡å¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="zabbixæœåŠ¡å™¨ä¸Šæµ‹è¯•-serverç«¯"><a href="#zabbixæœåŠ¡å™¨ä¸Šæµ‹è¯•-serverç«¯" class="headerlink" title="zabbixæœåŠ¡å™¨ä¸Šæµ‹è¯•(serverç«¯)"></a>zabbixæœåŠ¡å™¨ä¸Šæµ‹è¯•(serverç«¯)</h2><p>éœ€è¦ä¸‹è½½ zabbix-get</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum <span class="token function">install</span>  zabbix-get   -y<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>sgsm@localhost zabbix-server-mysql-4.0.21<span class="token punctuation">]</span>$ zabbix_get -s <span class="token number">192.168</span>.1.220 -p <span class="token number">10050</span> -k prod.redis     <span class="token comment"># æ˜¾ç¤ºæ•°å€¼ ä»£è¡¨æˆåŠŸ</span><span class="token number">1</span>  <span class="token punctuation">[</span>sgsm@localhost zabbix-server-mysql-4.0.21<span class="token punctuation">]</span>$ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="zabbixåå°é…ç½®ç›‘æ§é¡¹-åå°"><a href="#zabbixåå°é…ç½®ç›‘æ§é¡¹-åå°" class="headerlink" title="zabbixåå°é…ç½®ç›‘æ§é¡¹(åå°)"></a>zabbixåå°é…ç½®ç›‘æ§é¡¹(åå°)</h2><p>åˆ›å»ºç¾¤ç»„<br><img src="/medias/drawing-bed/zabbix/13.png"><br>è®¾ç½®ç»„å<br><img src="/medias/drawing-bed/zabbix/14.png"><br><img src="/medias/drawing-bed/zabbix/15.png"><br>åˆ›å»ºä¸»æœº<br><img src="/medias/drawing-bed/zabbix/16.png"><br><img src="/medias/drawing-bed/zabbix/18.png"><br><img src="/medias/drawing-bed/zabbix/19.png"><br><img src="/medias/drawing-bed/zabbix/20.png"><br><img src="/medias/drawing-bed/zabbix/21.png"><br>åˆ›å»ºç›‘æ§é¡¹<br><img src="/medias/drawing-bed/zabbix/22.png"><br><img src="/medias/drawing-bed/zabbix/23.png"><br><img src="/medias/drawing-bed/zabbix/24.png"><br>åˆ›å»ºè§¦å‘å™¨<br><img src="/medias/drawing-bed/zabbix/25.png"><br><img src="/medias/drawing-bed/zabbix/26.png"><br><img src="/medias/drawing-bed/zabbix/27.png"><br><img src="/medias/drawing-bed/zabbix/28.png"><br>å¯ä»¥åœ¨æœ€æ–°æ•°æ®æŸ¥çœ‹å½“å‰å€¼<br><img src="/medias/drawing-bed/zabbix/29.png"><br><img src="/medias/drawing-bed/zabbix/30.png"></p><p>ä¿®æ”¹çŠ¶æ€æµ‹è¯•<br><img src="/medias/drawing-bed/zabbix/31.png"><br><img src="/medias/drawing-bed/zabbix/32.png"><br><img src="/medias/drawing-bed/zabbix/33.png"><br><img src="/medias/drawing-bed/zabbix/34.png"><br>è‡³æ­¤ç›‘æ§é…ç½®å®Œæˆ,ä¸‹é¢éœ€è¦é…ç½®é‚®ä»¶æœåŠ¡,å½“æœ‰æœåŠ¡å®•æœºå‘é‚®ä»¶å‘Šè­¦</p><h2 id="é…ç½®åª’ä»‹é‚®ä»¶-serverç«¯"><a href="#é…ç½®åª’ä»‹é‚®ä»¶-serverç«¯" class="headerlink" title="é…ç½®åª’ä»‹é‚®ä»¶(serverç«¯)"></a>é…ç½®åª’ä»‹é‚®ä»¶(serverç«¯)</h2><p>é¦–å…ˆéœ€è¦åœ¨é‚®ä»¶è·å–æˆæƒç <br><img src="/medias/drawing-bed/zabbix/40.png"><br><img src="/medias/drawing-bed/zabbix/41.png"><br><img src="/medias/drawing-bed/zabbix/42.png"></p><p>æœ¬æ¬¡æµ‹è¯•ä½¿ç”¨mailxæœåŠ¡</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å…³é—­å½“å‰postfixé‚®ä»¶</span><span class="token function">sudo</span>  systemctl stop postfix<span class="token function">chkconfig</span>  postfix  off<span class="token comment"># å®‰è£…mailx</span><span class="token function">sudo</span> yum <span class="token function">install</span> mailx  -y<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®é‚®ä»¶æœåŠ¡</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span>  <span class="token function">vim</span> /etc/mail.rc    <span class="token comment"># å‘ä»¶äººåœ°å€</span>    <span class="token builtin class-name">set</span> <span class="token assign-left variable">from</span><span class="token operator">=</span>xxxxxx@qq.com <span class="token assign-left variable">smtp</span><span class="token operator">=</span>smtp.qq.com        <span class="token comment"># æ”¶ä»¶äººåœ°å€                       æˆæƒç (é‚®ç®±IMAP/SMTPæœåŠ¡çš„æˆæƒç )</span>    <span class="token builtin class-name">set</span> smtp-auth-user<span class="token operator">=</span>xxxxxx@qq.com smtp-auth-password<span class="token operator">=</span>xxxxxx          <span class="token builtin class-name">set</span> smtp-auth<span class="token operator">=</span>login<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•å‘é€é‚®ä»¶</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"zabbix test mail"</span> <span class="token operator">|</span>mail -s <span class="token string">"zabbix"</span> xxxxxx@qq.com<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="é…ç½®å‘é€é‚®ä»¶-åå°"><a href="#é…ç½®å‘é€é‚®ä»¶-åå°" class="headerlink" title="é…ç½®å‘é€é‚®ä»¶(åå°)"></a>é…ç½®å‘é€é‚®ä»¶(åå°)</h2><p>ç®¡ç†â€”ç¤ºè­¦ä»‹ç±»å‹â€”åˆ›å»ºåª’ä½“ç±»å‹<br>åˆ›å»ºæŠ¥è­¦åª’ä»‹ç±»å‹ (è„šæœ¬å‚æ•°åˆ†åˆ«å¯¹åº”ï¼šæ”¶ä»¶äººåœ°å€ã€ä¸»é¢˜ã€è¯¦ç»†å†…å®¹)<br><img src="/medias/drawing-bed/zabbix/50.png"><br>é…ç½®ç”¨æˆ· é€‰æ‹©adminç”¨æˆ·<br><img src="/medias/drawing-bed/zabbix/51.png"><br>æ·»åŠ æŠ¥è­¦åª’ä»‹<br><img src="/medias/drawing-bed/zabbix/52.png"><br>åˆ›å»ºæŠ¥è­¦åŠ¨ä½œ é…ç½®-åŠ¨ä½œ-åˆ›å»ºåŠ¨ä½œ,æ–°å»ºåŠ¨ä½œ<br><img src="/medias/drawing-bed/zabbix/53.png"><br>æ–°å»ºæ“ä½œ<br><img src="/medias/drawing-bed/zabbix/54.png"><br><img src="/medias/drawing-bed/zabbix/55.png"><br>æ·»åŠ æ¢å¤æ“ä½œ<br><img src="/medias/drawing-bed/zabbix/56.png"></p><p>é…ç½®å®Œæˆåæµ‹è¯•(ä¿®æ”¹è§¦å‘å™¨æˆ–è€…å…³é—­è¿›ç¨‹)<br><img src="/medias/drawing-bed/zabbix/57.png"><br><img src="/medias/drawing-bed/zabbix/58.png"><br><img src="/medias/drawing-bed/zabbix/59.png"><br><img src="/medias/drawing-bed/zabbix/60.png"><br><img src="/medias/drawing-bed/zabbix/61.png"><br><img src="/medias/drawing-bed/zabbix/62.png"><br>é‚®ä»¶å†…å®¹ä»¥åŠåœ¨åŠ¨ä½œæ—¥å¿—ä¸­æŸ¥çœ‹å‘é€è®°å½•<br><img src="/medias/drawing-bed/zabbix/63.png"></p><hr><h2 id="é¦–å…ˆéœ€è¦ç”³è¯·ä¸€ä¸ªä¼ä¸šå·"><a href="#é¦–å…ˆéœ€è¦ç”³è¯·ä¸€ä¸ªä¼ä¸šå·" class="headerlink" title="é¦–å…ˆéœ€è¦ç”³è¯·ä¸€ä¸ªä¼ä¸šå·"></a>é¦–å…ˆéœ€è¦ç”³è¯·ä¸€ä¸ªä¼ä¸šå·</h2><p>ç”³è¯·ä¼ä¸šå·ï¼Œéœ€è¦ä¸€ä¸ªç»‘å®šä½ æœ¬äººå¼€æˆ·é“¶è¡Œå¡çš„å¾®ä¿¡å·ã€‚<br>ç”³è¯·ç½‘å€ <a href="https://qy.weixin.qq.com/">https://qy.weixin.qq.com/</a><br>ç‚¹å‡»â€œç«‹å³æ³¨å†Œâ€ã€‚<br>æ ¹æ®æç¤ºæ³¨å†Œä¼ä¸šå·ï¼Œåˆ°â€œé€‰æ‹©ç±»å‹â€æ—¶ï¼Œé€‰æ‹©æœ€å³è¾¹çš„ä¼ä¸šå·ã€‚<br>æ³¨æ„ï¼šä¼ä¸šæè¿°ä¸­ï¼šâ€œæŠ¥è­¦â€æ˜¯æ•æ„Ÿè¯ä¸èƒ½ä½¿ç”¨ã€‚<br>ç™»å½•ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹é¡µé¢<br><img src="/medias/drawing-bed/zabbix/1/1.png"><br>æŒ‰ç…§ä¸‹å›¾ä¾æ¬¡ç‚¹å‡»ã€‚<br><img src="/medias/drawing-bed/zabbix/1/2.png"><br><img src="/medias/drawing-bed/zabbix/1/3.png"><br><img src="/medias/drawing-bed/zabbix/1/4.png"></p><h2 id="å…³æ³¨ä¼ä¸šå·çš„æ–¹æ³•"><a href="#å…³æ³¨ä¼ä¸šå·çš„æ–¹æ³•" class="headerlink" title="å…³æ³¨ä¼ä¸šå·çš„æ–¹æ³•"></a>å…³æ³¨ä¼ä¸šå·çš„æ–¹æ³•</h2><p>ç‚¹å‡»å·¦ä¾§çš„â€œè®¾ç½®â€-äºŒç»´ç ï¼Œä½¿ç”¨å¾®ä¿¡æ‰«ä¸€æ‰«æ‰«æäºŒç»´ç <br><img src="/medias/drawing-bed/zabbix/1/5.png"><br>ç‚¹å‡»å·¦ä¾§åˆ—çš„â€œåº”ç”¨ä¸­å¿ƒâ€ï¼Œç‚¹å‡»â€œæˆ‘çš„åº”ç”¨â€ä¸‹é¢çš„åŠ å·<br><img src="/medias/drawing-bed/zabbix/1/6.png"><br>å¡«å†™åº”ç”¨åç§°ï¼Œæè¿°ã€‚ä¸€åˆ‡æ­£å¸¸çš„è¯ï¼Œç‚¹å‡»è¿›å…¥åˆšæ‰åˆ›å»ºçš„åº”ç”¨<br><img src="/medias/drawing-bed/zabbix/1/7.png"><br>è¿™é‡Œçš„åº”ç”¨ id å·éœ€è¦è®°ä½ã€‚åé¢éœ€è¦å¡«å†™</p><h2 id="è®¾ç½®ç®¡ç†å‘˜"><a href="#è®¾ç½®ç®¡ç†å‘˜" class="headerlink" title="è®¾ç½®ç®¡ç†å‘˜"></a>è®¾ç½®ç®¡ç†å‘˜</h2><p>è®¾ç½®-åŠŸèƒ½è®¾ç½®-æƒé™ç®¡ç†-æ–°å»ºç®¡ç†ç»„<br><img src="/medias/drawing-bed/zabbix/1/8.png"><br><img src="/medias/drawing-bed/zabbix/1/9.png"><br><img src="/medias/drawing-bed/zabbix/1/10.png"><br>æ³¨æ„ï¼šè¿™é‡Œè¦è®°å½•ä¸‹æ¥ä¸‹é¢çš„ CorpID å’Œ Secretã€‚</p><h2 id="ç¼–å†™è„šæœ¬"><a href="#ç¼–å†™è„šæœ¬" class="headerlink" title="ç¼–å†™è„šæœ¬"></a>ç¼–å†™è„šæœ¬</h2><p>åœ¨/usr/lib/zabbix/alertscriptsç›®å½•(é…ç½®æ–‡ä»¶å®šä¹‰)ä¸‹æ–°å»ºä¸€ä¸ªåä¸º wechat.sh çš„è„šæœ¬æ–‡ä»¶</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token assign-left variable">CropID</span><span class="token operator">=</span><span class="token string">'ww13d3c1c55e5d3414'</span>   <span class="token comment"># ä¼ä¸šid-åœ¨ç½‘é¡µåº”ç”¨ç®¡ç†å¯ä»¥æŸ¥åˆ°</span><span class="token assign-left variable">Secret</span><span class="token operator">=</span><span class="token string">'-qo7YckISjsL11u8kI5PF0gGJrjYKlk0ISF2ftAPuzQ'</span>   <span class="token comment"># SecretID-åœ¨ç½‘é¡µåº”ç”¨ç®¡ç†å¯ä»¥æŸ¥åˆ°</span><span class="token assign-left variable">GURL</span><span class="token operator">=</span><span class="token string">"https://qyapi.weixin.qq.com/cgi-bin/gettoken?corpid=<span class="token variable">$CropID</span>&amp;corpsecret=<span class="token variable">$Secret</span>"</span><span class="token assign-left variable">Gtoken</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span>/usr/bin/curl -s -G $GURL <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">'access_token":"'</span> <span class="token string">'&#123;print $2&#125;'</span><span class="token operator">|</span><span class="token function">awk</span> -F<span class="token string">'"'</span> <span class="token string">'&#123;print $1&#125;'</span> <span class="token variable">`</span></span><span class="token assign-left variable">PURL</span><span class="token operator">=</span><span class="token string">"https://qyapi.weixin.qq.com/cgi-bin/message/send?access_token=<span class="token variable">$Gtoken</span>"</span><span class="token keyword">function</span> <span class="token function-name function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token builtin class-name">local</span> int <span class="token assign-left variable">AppID</span><span class="token operator">=</span><span class="token number">1000002</span>  <span class="token comment"># åº”ç”¨id-åœ¨ç½‘é¡µåº”ç”¨ç®¡ç†å¯ä»¥æŸ¥åˆ°</span><span class="token builtin class-name">local</span> <span class="token assign-left variable">UserID</span><span class="token operator">=</span><span class="token variable">$1</span><span class="token builtin class-name">local</span> <span class="token assign-left variable">PartyID</span><span class="token operator">=</span><span class="token number">1</span><span class="token builtin class-name">local</span> <span class="token assign-left variable">Msg</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$@</span>"</span> <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">" "</span> -f3-<span class="token variable">)</span></span><span class="token builtin class-name">printf</span> <span class="token string">'&#123;\n'</span><span class="token builtin class-name">printf</span> <span class="token string">'\t"touser": "'</span>"<span class="token variable">$User</span><span class="token string">"<span class="token entity" title="\&quot;">\"</span>"</span>,<span class="token punctuation">\</span>n<span class="token string">"printf '<span class="token entity" title="\t">\t</span>"</span>toparty<span class="token string">": "</span><span class="token string">'"$PartyID"\"",\n"printf '</span><span class="token punctuation">\</span>t<span class="token string">"msgtype"</span><span class="token builtin class-name">:</span> <span class="token string">"text"</span>,<span class="token punctuation">\</span>n<span class="token string">'printf '</span><span class="token punctuation">\</span>t<span class="token string">"agentid"</span><span class="token builtin class-name">:</span> <span class="token string">"'"</span> <span class="token variable">$AppID</span> <span class="token string">"<span class="token entity" title="\&quot;">\"</span>"</span>,<span class="token punctuation">\</span>n<span class="token string">"printf '<span class="token entity" title="\t">\t</span>"</span>text<span class="token string">": &#123;<span class="token entity" title="\n">\n</span>'printf '<span class="token entity" title="\t">\t</span><span class="token entity" title="\t">\t</span>"</span>content<span class="token string">": "</span><span class="token string">'"$Msg"\""\n"printf '</span><span class="token punctuation">\</span>t<span class="token punctuation">&#125;</span>,<span class="token punctuation">\</span>n<span class="token string">'printf '</span><span class="token punctuation">\</span>t<span class="token string">"safe"</span><span class="token builtin class-name">:</span><span class="token string">"0"</span><span class="token punctuation">\</span>n<span class="token string">'printf '</span><span class="token punctuation">&#125;</span><span class="token punctuation">\</span>n'<span class="token punctuation">&#125;</span>/usr/bin/curl --data-ascii <span class="token string">"<span class="token variable"><span class="token variable">$(</span>body $1 $2 $3<span class="token variable">)</span></span>"</span> <span class="token variable">$PURL</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éœ€è¦è®¾ç½®æƒé™ä¸ç„¶è°ƒç”¨çš„æ—¶å€™ä¼šæŠ¥é”™æ²¡æœ‰æƒé™</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span>  <span class="token function">chown</span> zabbix:zabbix   wechat.sh  -R <span class="token function">sudo</span>  <span class="token function">chmod</span> +x     wechat.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ‰§è¡Œ./wechat.sh 1 1 test çœ‹è‡ªå·±å¾®ä¿¡æ˜¯å¦èƒ½æ”¶åˆ°ä¿¡æ¯ï¼Œå¦‚æœèƒ½çš„è¯ï¼Œç»§ç»­ä¸‹ä¸€æ­¥ã€‚åä¹‹æ£€æŸ¥ä¸Šé¢æœ‰ä»€ä¹ˆé—®é¢˜ã€‚</p><h2 id="zabbixåå°é…ç½®"><a href="#zabbixåå°é…ç½®" class="headerlink" title="zabbixåå°é…ç½®"></a>zabbixåå°é…ç½®</h2><p>ç®¡ç†â€”ç¤ºè­¦ä»‹ç±»å‹â€”åˆ›å»ºåª’ä½“ç±»å‹<br>åˆ›å»ºæŠ¥è­¦åª’ä»‹ç±»å‹ (è„šæœ¬å‚æ•°åˆ†åˆ«å¯¹åº”ï¼šæ”¶ä»¶äººåœ°å€ã€ä¸»é¢˜ã€è¯¦ç»†å†…å®¹)<br><img src="/medias/drawing-bed/zabbix/1/21.png"><br>é…ç½®ç”¨æˆ· é€‰æ‹©adminç”¨æˆ·<br><img src="/medias/drawing-bed/zabbix/1/22.png"><br>æ·»åŠ æŠ¥è­¦åª’ä»‹<br><img src="/medias/drawing-bed/zabbix/1/23.png"><br>åˆ›å»ºæŠ¥è­¦åŠ¨ä½œ é…ç½®-åŠ¨ä½œ-åˆ›å»ºåŠ¨ä½œ,æ–°å»ºåŠ¨ä½œ<br><img src="/medias/drawing-bed/zabbix/1/24.png"><br>æ–°å»ºæ“ä½œ<br><img src="/medias/drawing-bed/zabbix/1/25.png"><br><img src="/medias/drawing-bed/zabbix/1/26.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">æ“ä½œæ•…éšœ<span class="token punctuation">&#123;</span>TRIGGER.STATUS<span class="token punctuation">&#125;</span>,æœåŠ¡å™¨:<span class="token punctuation">&#123;</span>HOSTNAME1<span class="token punctuation">&#125;</span>å‘ç”Ÿ: <span class="token punctuation">&#123;</span>TRIGGER.NAME<span class="token punctuation">&#125;</span>æ•…éšœ<span class="token operator">!</span>å‘Šè­¦ä¸»æœº:<span class="token punctuation">&#123;</span>HOSTNAME1<span class="token punctuation">&#125;</span>å‘Šè­¦æ—¶é—´:<span class="token punctuation">&#123;</span>EVENT.DATE<span class="token punctuation">&#125;</span> <span class="token punctuation">&#123;</span>EVENT.TIME<span class="token punctuation">&#125;</span>å‘Šè­¦ç­‰çº§:<span class="token punctuation">&#123;</span>TRIGGER.SEVERITY<span class="token punctuation">&#125;</span>å‘Šè­¦ä¿¡æ¯: <span class="token punctuation">&#123;</span>TRIGGER.NAME<span class="token punctuation">&#125;</span>å‘Šè­¦é¡¹ç›®:<span class="token punctuation">&#123;</span>TRIGGER.KEY1<span class="token punctuation">&#125;</span>é—®é¢˜è¯¦æƒ…:<span class="token punctuation">&#123;</span>ITEM.NAME<span class="token punctuation">&#125;</span>:<span class="token punctuation">&#123;</span>ITEM.VALUE<span class="token punctuation">&#125;</span>å½“å‰çŠ¶æ€:<span class="token punctuation">&#123;</span>TRIGGER.STATUS<span class="token punctuation">&#125;</span>:<span class="token punctuation">&#123;</span>ITEM.VALUE1<span class="token punctuation">&#125;</span>äº‹ä»¶ ID:<span class="token punctuation">&#123;</span>EVENT.ID<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ·»åŠ æ¢å¤æ“ä½œ<br><img src="/medias/drawing-bed/zabbix/1/27.png"></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">æ¢å¤æ“ä½œæ¢å¤<span class="token punctuation">&#123;</span>TRIGGER.STATUS<span class="token punctuation">&#125;</span>, æœåŠ¡å™¨:<span class="token punctuation">&#123;</span>HOSTNAME1<span class="token punctuation">&#125;</span>: <span class="token punctuation">&#123;</span>TRIGGER.NAME<span class="token punctuation">&#125;</span>å·²æ¢å¤<span class="token operator">!</span>å‘Šè­¦ä¸»æœº:<span class="token punctuation">&#123;</span>HOSTNAME1<span class="token punctuation">&#125;</span>å‘Šè­¦æ—¶é—´:<span class="token punctuation">&#123;</span>EVENT.DATE<span class="token punctuation">&#125;</span> <span class="token punctuation">&#123;</span>EVENT.TIME<span class="token punctuation">&#125;</span>å‘Šè­¦ç­‰çº§:<span class="token punctuation">&#123;</span>TRIGGER.SEVERITY<span class="token punctuation">&#125;</span>å‘Šè­¦ä¿¡æ¯: <span class="token punctuation">&#123;</span>TRIGGER.NAME<span class="token punctuation">&#125;</span>å‘Šè­¦é¡¹ç›®:<span class="token punctuation">&#123;</span>TRIGGER.KEY1<span class="token punctuation">&#125;</span>é—®é¢˜è¯¦æƒ…:<span class="token punctuation">&#123;</span>ITEM.NAME<span class="token punctuation">&#125;</span>:<span class="token punctuation">&#123;</span>ITEM.VALUE<span class="token punctuation">&#125;</span>å½“å‰çŠ¶æ€:<span class="token punctuation">&#123;</span>TRIGGER.STATUS<span class="token punctuation">&#125;</span>:<span class="token punctuation">&#123;</span>ITEM.VALUE1<span class="token punctuation">&#125;</span>äº‹ä»¶ ID:<span class="token punctuation">&#123;</span>EVENT.ID<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®å®Œæˆåæµ‹è¯•(ä¿®æ”¹è§¦å‘å™¨æˆ–è€…å…³é—­è¿›ç¨‹)<br><img src="/medias/drawing-bed/zabbix/1/28.png"><br><img src="/medias/drawing-bed/zabbix/1/29.png"><br><img src="/medias/drawing-bed/zabbix/1/30.png"></p><h2 id="é‚®ä»¶å†…å®¹ä»¥åŠåœ¨åŠ¨ä½œæ—¥å¿—ä¸­æŸ¥çœ‹å‘é€è®°å½•"><a href="#é‚®ä»¶å†…å®¹ä»¥åŠåœ¨åŠ¨ä½œæ—¥å¿—ä¸­æŸ¥çœ‹å‘é€è®°å½•" class="headerlink" title="é‚®ä»¶å†…å®¹ä»¥åŠåœ¨åŠ¨ä½œæ—¥å¿—ä¸­æŸ¥çœ‹å‘é€è®°å½•"></a>é‚®ä»¶å†…å®¹ä»¥åŠåœ¨åŠ¨ä½œæ—¥å¿—ä¸­æŸ¥çœ‹å‘é€è®°å½•</h2><p><img src="/medias/drawing-bed/zabbix/1/35.png"></p><hr><h2 id="ä¸‹è½½yumæºæŠ¥é”™"><a href="#ä¸‹è½½yumæºæŠ¥é”™" class="headerlink" title="ä¸‹è½½yumæºæŠ¥é”™"></a>ä¸‹è½½yumæºæŠ¥é”™</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>sgsm@localhost yum.repos.d<span class="token punctuation">]</span>$ <span class="token function">sudo</span>  <span class="token function">rpm</span> -ivh http://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-1.el7.noarch.rpm è·å–http://repo.zabbix.com/zabbix/4.0/rhel/7/x86_64/zabbix-release-4.0-1.el7.noarch.rpmå‡†å¤‡ä¸­<span class="token punctuation">..</span>.                          <span class="token comment">################################# [100%]</span>        <span class="token function">file</span> /etc/yum.repos.d/zabbix.repo from <span class="token function">install</span> of zabbix-release-4.0-1.el7.noarch conflicts with <span class="token function">file</span> from package zabbix-release-3.2-1.el7.noarch<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ˜¯å› ä¸ºæœåŠ¡å™¨ä¸Šå·²ç»éƒ¨ç½²äº†zabbix,å¸è½½åŸæ¥çš„zabbixå°±å¯ä»¥äº† </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> yum  remove   zabbix-release-3.2-1.el7.noarch   -y      <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="åå°ç™»å½•å¯†ç å¿˜è®°"><a href="#åå°ç™»å½•å¯†ç å¿˜è®°" class="headerlink" title="åå°ç™»å½•å¯†ç å¿˜è®°"></a>åå°ç™»å½•å¯†ç å¿˜è®°</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mysql<span class="token operator">></span> use zabbixReading table information <span class="token keyword">for</span> completion of table and <span class="token function">column</span> namesYou can turn off this feature to get a quicker startup with -ADatabase changedmysql<span class="token operator">></span> update <span class="token function">users</span> <span class="token builtin class-name">set</span> <span class="token assign-left variable">passwd</span><span class="token operator">=</span><span class="token string">'5fce1b3e34b520afeffb37ce08c7cd66'</span> where <span class="token assign-left variable">userid</span><span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">;</span>Query OK, <span class="token number">1</span> row affected <span class="token punctuation">(</span><span class="token number">0.01</span> sec<span class="token punctuation">)</span>Rows matched: <span class="token number">1</span>  Changed: <span class="token number">1</span>  Warnings: <span class="token number">0</span><span class="token comment"># ç”±äºå¯†ç æ˜¯md5åŠ å¯†çš„ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥çœ‹é»˜è®¤çš„zabbixå¯†ç çš„md5</span>mysql<span class="token operator">></span> use zabbix<span class="token punctuation">;</span>mysql<span class="token operator">></span> update <span class="token function">users</span> <span class="token builtin class-name">set</span> <span class="token assign-left variable">passwd</span><span class="token operator">=</span><span class="token string">'5fce1b3e34b520afeffb37ce08c7cd66'</span> where <span class="token assign-left variable">userid</span><span class="token operator">=</span><span class="token string">'1'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡æ–°è®¾ç½®å¯†ç ä¸ºzabbix,ç„¶åé‡æ–°ç™»é™† ç”¨æˆ·ï¼šAdmin   å¯†ç ï¼šzabbix</p><h2 id="zabbixè®¾ç½®ä¸­æ–‡å‡ºç°ä¹±ç "><a href="#zabbixè®¾ç½®ä¸­æ–‡å‡ºç°ä¹±ç " class="headerlink" title="zabbixè®¾ç½®ä¸­æ–‡å‡ºç°ä¹±ç "></a>zabbixè®¾ç½®ä¸­æ–‡å‡ºç°ä¹±ç </h2><p>zabbixè¯­è¨€è®¾ç½®ä¸ºä¸­æ–‡å,æœ‰ä¹±ç å¦‚ä¸‹ï¼š<br><img src="/medias/drawing-bed/zabbix/2/1.png"></p><p>1.ä» windows ä¸‹æ§åˆ¶é¢æ¿-&gt;å­—ä½“-&gt;é€‰æ‹©ä¸€ç§ä¸­æ–‡å­—åº“ä¾‹å¦‚â€œæ¥·ä½“â€<br><img src="/medias/drawing-bed/zabbix/2/2.png"><br><img src="/medias/drawing-bed/zabbix/2/3.png"></p><p>2.å°†å­—ä½“ä¸Šä¼ è‡³/usr/share/zabbix/assets/fonts (æ ¹æ®zabbixçš„å®‰è£…ä½ç½® å¯ä»¥ä½¿ç”¨findæŸ¥æ‰¾ä¸€ä¸‹è·¯å¾„) ç›®å½•ä¸‹<br><img src="/medias/drawing-bed/zabbix/2/99.png"><br>æ³¨æ„ï¼šæŸ¥æ‰¾åˆ°zabbixæœ‰ä¸¤ä¸ªfontsç›®å½• å°±å»é…ç½®æ–‡ä»¶çœ‹ä¸‹ä½¿ç”¨çš„é‚£ä¸ªç›®å½•(ç‰ˆæœ¬ä¸åŒ è·¯å¾„å°±ä¸åŒ)</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>sgsm@localhost fonts<span class="token punctuation">]</span>$ <span class="token function">cat</span> /usr/share/zabbix/include/defines.inc.php <span class="token operator">|</span> <span class="token function">grep</span> pathdefine<span class="token punctuation">(</span><span class="token string">'ZBX_FONTPATH'</span>,                          realpath<span class="token punctuation">(</span><span class="token string">'assets/fonts'</span><span class="token punctuation">))</span><span class="token punctuation">;</span> // where to search <span class="token keyword">for</span> font <span class="token punctuation">(</span>GD <span class="token operator">></span> <span class="token number">2.0</span>.18<span class="token punctuation">)</span><span class="token punctuation">[</span>sgsm@localhost fonts<span class="token punctuation">]</span>$ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨rz æ‹‰å–åˆ°æœåŠ¡å™¨<br><img src="/medias/drawing-bed/zabbix/2/7.png"></p><p>3.ä¿®æ”¹ zabbix é¡µé¢ç®¡ç†çš„ä¸­æ–‡å­—ä½“è®¾ç½®</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@zabbix-server zabbix-2.4.5<span class="token punctuation">]</span><span class="token comment"># vim /usr/share/zabbix/include/defines.inc.php</span><span class="token comment">#ä¿®æ”¹å¦‚ä¸‹ 2 è¡Œ</span>define<span class="token punctuation">(</span><span class="token string">'ZBX_FONT_NAME'</span>, <span class="token string">'simkai'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>define<span class="token punctuation">(</span><span class="token string">'ZBX_GRAPH_FONT_NAME'</span>, <span class="token string">'simkai'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>ä¿®æ”¹åçš„ zabbix ç•Œé¢<br><img src="/medias/drawing-bed/zabbix/2/5.png"><br>å¦‚æœè¿˜ä¸è¡Œå°±ç»™å­—ä½“æƒé™</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span>  <span class="token function">chmod</span>   <span class="token number">777</span>    simkai.ttf<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> wujiops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> zabbix </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntuä¸€äº›é…ç½®</title>
      <link href="/posts/9fae.html"/>
      <url>/posts/9fae.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>æ­¤æ–‡ç« åœ¨Ubuntu 20.04 LTS DesktopéªŒè¯é€šè¿‡ã€‚<br>ä¸å»ºè®®ä¿®æ”¹è¿‡å¤šç³»ç»Ÿé¡¹ï¼Œä»¥å…å¼•èµ·ç³»ç»Ÿç¨³å®šæ€§ã€‚  </p><h1 id="å®‰è£…openssh"><a href="#å®‰è£…openssh" class="headerlink" title="å®‰è£…openssh"></a>å®‰è£…openssh</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> openssh-serversystemctl start sshd<span class="token comment"># æŒ‰æç¤ºè¾“å…¥å¯†ç </span><span class="token comment"># xhsellé“¾æ¥</span><span class="token function">ssh</span> username@IP<span class="token comment"># ssh username:password@ip:port</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä¿®æ”¹aptä¸ºé˜¿é‡Œäº‘æº"><a href="#ä¿®æ”¹aptä¸ºé˜¿é‡Œäº‘æº" class="headerlink" title="ä¿®æ”¹aptä¸ºé˜¿é‡Œäº‘æº"></a>ä¿®æ”¹aptä¸ºé˜¿é‡Œäº‘æº</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">cp</span> /etc/apt/sources.list /etc/apt/sources.list.backup<span class="token function">sudo</span> <span class="token function">vi</span> /etc/apt/sources.list<span class="token comment">###</span>deb http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ focal-backports main restricted universe multiverse<span class="token comment">###</span><span class="token function">sudo</span> <span class="token function">apt</span> update<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="vimå®‰è£…"><a href="#vimå®‰è£…" class="headerlink" title="vimå®‰è£…"></a>vimå®‰è£…</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> <span class="token function">vim</span><span class="token function">sudo</span> <span class="token function">vi</span> /etc/profile<span class="token comment">### å¢åŠ </span><span class="token builtin class-name">alias</span> <span class="token assign-left variable">vi</span><span class="token operator">=</span>vim<span class="token comment">### source æ–‡ä»¶ç”Ÿæ•ˆ</span><span class="token function">vi</span> /etc/vim/vimrc<span class="token comment">### å¢åŠ æ˜¾ç¤ºè¡Œå·ã€tabè®¾ç½®4ä¸ªç©ºæ ¼</span><span class="token builtin class-name">set</span> number<span class="token builtin class-name">set</span> <span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">4</span><span class="token builtin class-name">set</span> expandtab<span class="token builtin class-name">set</span> autoindent<span class="token comment">### ç«‹å³ç”Ÿæ•ˆ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="rootæƒé™"><a href="#rootæƒé™" class="headerlink" title="rootæƒé™"></a>rootæƒé™</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">user@user-virtual-machine:~$ <span class="token function">sudo</span> <span class="token function">passwd</span>æ–°çš„ å¯†ç ï¼š é‡æ–°è¾“å…¥æ–°çš„ å¯†ç ï¼š passwdï¼šå·²æˆåŠŸæ›´æ–°å¯†ç user@user-virtual-machine:~$ <span class="token function">su</span> - rootå¯†ç ï¼š root@user-virtual-machine:~<span class="token comment"># </span><span class="token comment"># å…è®¸rootè¿œç¨‹ç™»å½•</span><span class="token function">vi</span> /etc/ssh/sshd_config<span class="token comment">###</span>PermitRootLogin <span class="token function">yes</span><span class="token comment">###</span>systemctl restart sshd<span class="token comment"># éªŒè¯</span><span class="token punctuation">[</span>C:<span class="token punctuation">\</span>~<span class="token punctuation">]</span>$ <span class="token function">ssh</span> root:1@192.168.1.12<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="bashä¿®æ”¹"><a href="#bashä¿®æ”¹" class="headerlink" title="bashä¿®æ”¹"></a>bashä¿®æ”¹</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ls</span> -al /bin/sh<span class="token comment"># lrwxrwxrwx 1 root root 4 7æœˆ  27 17:20 /bin/sh -> dash</span>dpkg-reconfigure dash   <span class="token comment"># é€‰æ‹© å¦/No</span><span class="token comment"># æ­£åœ¨åˆ é™¤ é€šè¿‡ dash ä» /bin/sh åˆ° /bin/sh.distrib çš„è½¬ç§»</span><span class="token comment"># æ­£åœ¨æ·»åŠ  é€šè¿‡ bash ä» /bin/sh åˆ° /bin/sh.distrib çš„è½¬ç§»</span><span class="token comment"># æ­£åœ¨åˆ é™¤ é€šè¿‡ dash ä» /usr/share/man/man1/sh.1.gz åˆ° /usr/share/man/man1/sh.distrib.1.gz çš„è½¬ç§»</span><span class="token comment"># æ­£åœ¨æ·»åŠ  é€šè¿‡ bash ä» /usr/share/man/man1/sh.1.gz åˆ° /usr/share/man/man1/sh.distrib.1.gz çš„è½¬ç§»</span><span class="token function">ls</span> -al /bin/sh<span class="token comment"># lrwxrwxrwx 1 root root 4 7æœˆ  28 17:02 /bin/sh -> bash</span><span class="token function">vi</span> .bashrc <span class="token comment"># PS1="\[\e]0;$&#123;debian_chroot:+($debian_chroot)&#125;\u@\h: \w\a\]$PS1" ä¿®æ”¹ä¸º PS1="[\u@\h \W]\\$ "</span><span class="token comment"># bash ç”Ÿæ•ˆï¼Œcentosé£æ ¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="apache2"><a href="#apache2" class="headerlink" title="apache2"></a>apache2</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt</span> <span class="token function">install</span> apache2 <span class="token function">curl</span>systemctl start apache2update-rc.d -f apache2 defaults   <span class="token comment"># å¼€æœºè‡ªå¯</span><span class="token builtin class-name">echo</span> <span class="token string">"apache2 test page"</span> <span class="token operator">></span> /var/www/html/index.html <span class="token function">curl</span> localhost<span class="token comment"># apache2 test page</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="python3"><a href="#python3" class="headerlink" title="python3"></a>python3</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># é»˜è®¤å®‰è£…python3.8</span><span class="token function">apt</span> <span class="token function">install</span> python3-pippython3 -V<span class="token comment"># Python 3.8.2</span>pip3 -V<span class="token comment"># pip 20.0.2 from /usr/lib/python3/dist-packages/pip (python 3.8)</span><span class="token function">mkdir</span> .pip<span class="token function">vi</span> .pip/pip.conf   <span class="token comment"># é…ç½®pipé˜¿é‡Œäº‘æº</span><span class="token comment">###</span><span class="token punctuation">[</span>global<span class="token punctuation">]</span>index-url <span class="token operator">=</span> http://mirrors.aliyun.com/pypi/simple/trusted-host <span class="token operator">=</span> mirrors.aliyun.com<span class="token comment">###</span>pip3 <span class="token function">install</span> --upgrade pip   <span class="token comment"># å®‰è£…å‡çº§pip</span>pip -V<span class="token comment"># pip 20.1.1 from /usr/local/lib/python3.8/dist-packages/pip (python 3.8)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="java"><a href="#java" class="headerlink" title="java"></a>java</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">apt</span> <span class="token function">install</span> default-jre default-jdk   <span class="token comment"># å®‰è£…é»˜è®¤ç‰ˆæœ¬</span><span class="token function">apt</span> <span class="token function">install</span> openjdk-8-jdk openjdk-8-jre   <span class="token comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬</span>java -version   <span class="token comment"># javaé»˜è®¤ç‰ˆæœ¬</span><span class="token comment"># openjdk version "11.0.8" 2020-07-14</span><span class="token comment"># OpenJDK Runtime Environment (build 11.0.8+10-post-Ubuntu-0ubuntu120.04)</span><span class="token comment"># OpenJDK 64-Bit Server VM (build 11.0.8+10-post-Ubuntu-0ubuntu120.04, mixed mode, sharing)</span>javac -version   <span class="token comment"># javacé»˜è®¤ç‰ˆæœ¬</span><span class="token comment"># javac 11.0.8</span>update-alternatives --config java   <span class="token comment"># è®¾ç½®é»˜è®¤java</span><span class="token comment"># æœ‰ 2 ä¸ªå€™é€‰é¡¹å¯ç”¨äºæ›¿æ¢ java (æä¾› /usr/bin/java)ã€‚</span><span class="token comment">#   é€‰æ‹©       è·¯å¾„                                          ä¼˜å…ˆçº§  çŠ¶æ€</span><span class="token comment"># ------------------------------------------------------------</span><span class="token comment"># * 0            /usr/lib/jvm/java-11-openjdk-amd64/bin/java      1111      è‡ªåŠ¨æ¨¡å¼</span><span class="token comment">#   1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java      1111      æ‰‹åŠ¨æ¨¡å¼</span><span class="token comment">#   2            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      æ‰‹åŠ¨æ¨¡å¼</span><span class="token comment"># è¦ç»´æŒå½“å‰å€¼[*]è¯·æŒ‰&lt;å›è½¦é”®>ï¼Œæˆ–è€…é”®å…¥é€‰æ‹©çš„ç¼–å·ï¼š2</span><span class="token comment"># update-alternatives: ä½¿ç”¨ /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java æ¥åœ¨æ‰‹åŠ¨æ¨¡å¼ä¸­æä¾› /usr/bin/java (java)</span>update-alternatives --config javac   <span class="token comment"># è®¾ç½®é»˜è®¤javac</span><span class="token comment"># æœ‰ 2 ä¸ªå€™é€‰é¡¹å¯ç”¨äºæ›¿æ¢ javac (æä¾› /usr/bin/javac)ã€‚</span><span class="token comment">#   é€‰æ‹©       è·¯å¾„                                        ä¼˜å…ˆçº§  çŠ¶æ€</span><span class="token comment"># ------------------------------------------------------------</span><span class="token comment"># * 0            /usr/lib/jvm/java-11-openjdk-amd64/bin/javac   1111      è‡ªåŠ¨æ¨¡å¼</span><span class="token comment">#   1            /usr/lib/jvm/java-11-openjdk-amd64/bin/javac   1111      æ‰‹åŠ¨æ¨¡å¼</span><span class="token comment">#   2            /usr/lib/jvm/java-8-openjdk-amd64/bin/javac    1081      æ‰‹åŠ¨æ¨¡å¼</span><span class="token comment"># è¦ç»´æŒå½“å‰å€¼[*]è¯·æŒ‰&lt;å›è½¦é”®>ï¼Œæˆ–è€…é”®å…¥é€‰æ‹©çš„ç¼–å·ï¼š2</span><span class="token comment"># update-alternatives: ä½¿ç”¨ /usr/lib/jvm/java-8-openjdk-amd64/bin/javac æ¥åœ¨æ‰‹åŠ¨æ¨¡å¼ä¸­æä¾› /usr/bin/javac (javac)</span>javac -version   <span class="token comment"># éªŒè¯</span><span class="token comment"># javac 1.8.0_252</span>java -version   <span class="token comment"># éªŒè¯</span><span class="token comment"># openjdk version "1.8.0_252"</span><span class="token comment"># OpenJDK Runtime Environment (build 1.8.0_252-8u252-b09-1ubuntu1-b09)</span><span class="token comment"># OpenJDK 64-Bit Server VM (build 25.252-b09, mixed mode)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ‰¹é‡è£…æœº</title>
      <link href="/posts/33bd.html"/>
      <url>/posts/33bd.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="PXEæ‰¹é‡è£…æœº"><a href="#PXEæ‰¹é‡è£…æœº" class="headerlink" title="PXEæ‰¹é‡è£…æœº"></a>PXEæ‰¹é‡è£…æœº</h1><h2 id="PXEçš„å·¥ä½œè¿‡ç¨‹"><a href="#PXEçš„å·¥ä½œè¿‡ç¨‹" class="headerlink" title="PXEçš„å·¥ä½œè¿‡ç¨‹"></a>PXEçš„å·¥ä½œè¿‡ç¨‹</h2><ol><li>å®¢æˆ·æœºä»è‡ªå·±çš„PXEç½‘å¡å¯åŠ¨ï¼Œå‘æœ¬ç½‘ç»œä¸­çš„DHCPæœåŠ¡å™¨ç´¢å–IP  </li><li>DHCPæœåŠ¡å™¨è¿”å›åˆ†ç»™å®¢æˆ·æœºIPä»¥åŠbootstrapæ–‡ä»¶çš„æ”¾ç½®ä½ç½®(è¯¥æ–‡ä»¶ä¸€ èˆ¬æ˜¯æ”¾åœ¨ä¸€å°TFTPæœåŠ¡å™¨ä¸Š)  </li><li>å®¢æˆ·æœºå‘æœ¬ç½‘ç»œä¸­çš„TFTPæœåŠ¡å™¨ç´¢å–bootstrapæ–‡ä»¶  </li><li>å®¢æˆ·æœºå–å¾—bootstrapæ–‡ä»¶åä¹‹æ‰§è¡Œè¯¥æ–‡ä»¶  </li><li>æ ¹æ®bootstrapçš„æ‰§è¡Œç»“æœï¼Œé€šè¿‡TFTPæœåŠ¡å™¨åŠ è½½å†…æ ¸å’Œæ–‡ä»¶ç³»ç»Ÿ  </li><li>è¿›å…¥å®‰è£…ç”»é¢, æ­¤æ—¶å¯ä»¥é€šè¿‡é€‰æ‹©FTP,HTTP,NFSæ–¹å¼ä¹‹ä¸€è¿›è¡Œå®‰è£…  </li></ol><h2 id="PXEï¼šé¢„å¯åŠ¨æ‰§è¡Œç¯å¢ƒ"><a href="#PXEï¼šé¢„å¯åŠ¨æ‰§è¡Œç¯å¢ƒ" class="headerlink" title="PXEï¼šé¢„å¯åŠ¨æ‰§è¡Œç¯å¢ƒ"></a>PXEï¼šé¢„å¯åŠ¨æ‰§è¡Œç¯å¢ƒ</h2><p>&emsp;&emsp;PXEæ˜¯ç”±Intelå…¬å¸å¼€å‘çš„ç½‘ç»œå¼•å¯¼æŠ€æœ¯ï¼Œå·¥ä½œåœ¨C/Sæ¶æ„ï¼Œå…è®¸å®¢æˆ·æœºé€š è¿‡ç½‘ç»œä»è¿œç¨‹æœåŠ¡å™¨ä¸‹è½½å¼•å¯¼é•œåƒï¼Œå¹¶åŠ è½½å®‰è£…æ–‡ä»¶æˆ–è€…æ•´ä¸ªæ“ä½œç³»ç»Ÿã€‚<br>è‹¥è¦æ­å»ºPXEç½‘ç»œä½“ç³»ï¼Œå¿…é¡»æ»¡è¶³ä¸€ä¸‹å‡ ä¸ªå‰ææ¡ä»¶ï¼š  </p><ol><li>å®¢æˆ·æœºçš„ç½‘å¡æ”¯æŒpxeåè®®ï¼ˆé›†æˆBOOTROMèŠ¯ç‰‡ï¼‰ï¼Œä¸”ä¸»æ¿æ”¯æŒç½‘ ç»œå¼•å¯¼ï¼Œç›®å‰ç»å¤§å¤šæ•°æœåŠ¡å™¨å’Œå¤§å¤šæ•°PCéƒ½èƒ½å¤Ÿæä¾›æ­¤åŠŸèƒ½ï¼Œåªéœ€è¦åœ¨BIOSè®¾ ç½®ä¸­å…è®¸ä»networkæˆ–LANå¯åŠ¨å³å¯ã€‚  </li><li>ç½‘ç»œä¸­æœ‰ä¸€å°DHCPæœåŠ¡å™¨ä»¥ä¾¿ä¸ºå®¢æˆ·æœºè‡ªåŠ¨åˆ†é…åœ°å€ï¼ŒæŒ‡å®šå¼•å¯¼æ–‡ ä»¶ä½ç½®ï¼ˆå› ä¸ºå®¢æˆ·æœºæ²¡æœ‰æ“ä½œç³»ç»Ÿæ— æ³•é…ç½®ipï¼Œæ‰€ä»¥æ¶è®¾DHCPï¼‰ã€‚  </li><li>æœåŠ¡å™¨é€šè¿‡TFTPï¼ˆç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼‰æä¾›å¼•å¯¼é•œåƒæ–‡ä»¶çš„ä¸‹è½½ ï¼ˆä¸ºä»€ä¹ˆç”¨TFTPå‘¢ï¼Ÿ å› ä¸ºTFTPå®¢æˆ·ç«¯å·¥å…·æ¯”è¾ƒå°é›†æˆåœ¨äº†ç½‘å¡ä¸Šï¼‰ã€‚  </li></ol><h3 id="æ­¥éª¤ï¼š"><a href="#æ­¥éª¤ï¼š" class="headerlink" title="æ­¥éª¤ï¼š"></a>æ­¥éª¤ï¼š</h3><p>å‡†å¤‡centos6å®‰è£…æº<br><code>mount /dev/se0 /media</code><br>å®‰è£…å¹¶å¯ç”¨TFTPï¼ˆå¯åŠ¨xinetdï¼‰ã€ftpï¼ˆå¯åŠ¨vsftpdï¼‰æœåŠ¡ï¼Œ<br><code>yum -y install tftp-server ftp*</code><br><img src="/medias/drawing-bed/pxe/0.png"></p><p><code>vim /etc/xinetd.d/tftp</code><br>ä¿®æ”¹<code>wait</code>ä¸º<code>no</code>ï¼Œä¿®æ”¹<code>disable</code>ä¸º<code>no</code><br><img src="/medias/drawing-bed/pxe/1.png"></p><p>å¯åŠ¨<code>xinetd.d</code>ï¼Œä½¿ç”¨<code>netstat -nupl</code>æŸ¥çœ‹<code>xinetd.d</code>çš„ç«¯å£æ˜¯å¦å¯åŠ¨<br><img src="/medias/drawing-bed/pxe/2.png"></p><p>æŒ‚è½½å…‰ç›˜ï¼Œå¤åˆ¶<code>initrd.img</code>å’Œ<code>vmlinz</code>åˆ°<code>/var/lib/tftpboot/</code>ç›®å½•ä¸‹<br><img src="/medias/drawing-bed/pxe/3.png"></p><p>å®‰è£…<code>syslinux</code><br><img src="/medias/drawing-bed/pxe/4.png"></p><p>å¤åˆ¶<code>pxelinux.0</code>åˆ°<code>/var/lib/tftpboot/</code>ç›®å½•ä¸‹<br><img src="/medias/drawing-bed/pxe/5.png"></p><p>å¤åˆ¶èœå•æ–‡ä»¶<code>isolinux.cfg</code>åˆ°<code>/var/lib/tftpboot/pxelinux.cfg/default</code>ä¿®æ”¹æƒé™ä¸º<code>644</code><br><img src="/medias/drawing-bed/pxe/6.png"></p><p>å®‰è£…<code>DHCP</code><br><img src="/medias/drawing-bed/pxe/7.png"></p><p>å¤åˆ¶å¹¶é…ç½®<code>DHCP</code><br><img src="/medias/drawing-bed/pxe/8.png"></p><p>åœ¨é…ç½®æ–‡ä»¶æœ€åæ·»åŠ ï¼ˆ<code>DHCP</code>é…ç½®å’Œä¸‹è½½æ–‡ä»¶çš„ä¸»æœºã€æ–‡ä»¶åï¼‰<br><img src="/medias/drawing-bed/pxe/9.png"></p><p>æ³¨ï¼šç½‘å¡é…ç½®ä¸º<code>192.168.0.33</code>é™æ€ï¼›è™šæ‹Ÿæœºé‡Œé¢è°ƒæ•´<code>vmnet</code><br>å°†å…‰ç›˜æŒ‚è½½åˆ°<code>/var/ftp/pub/</code><br><img src="/medias/drawing-bed/pxe/10.png"></p><p>è£…æœºå®¢æˆ·ç«¯ï¼š<br>è¿›å…¥<code>BIOS</code>å°†<code>Network</code>è°ƒæ•´åˆ°ç¬¬ä¸€ä¸ªï¼Œ<code>F10</code>å›è½¦ï¼Œä¿å­˜é€€å‡ºï¼Œç­‰å¾…å¼€æœºã€‚<br><img src="/medias/drawing-bed/pxe/11.png"><br>ï¼ˆä¸‹é¢æŒ‰å›¾ï¼Œé€‰æ‹©å›è½¦ï¼‰<br><img src="/medias/drawing-bed/pxe/12.png"><br><img src="/medias/drawing-bed/pxe/13.png"><br><img src="/medias/drawing-bed/pxe/14.png"></p><p>åœ¨çº¢è‰²å…‰æ ‡å¤„æŒ‰ <code>ç©ºæ ¼</code> æŒ‰<code>â†“</code> é€‰æ‹©<code>OK</code> å›è½¦ä¸‹ä¸€æ­¥ï¼Œç­‰å¾…ä¸€ä¼šã€‚<br><img src="/medias/drawing-bed/pxe/15.png"></p><p>åœ¨æœ€ä¸Šé¢ä¸€è¡Œè¾“å…¥ï¼š<code>ftp://192.168.0.33/pub</code>ï¼Œé€‰æ‹©<code>OK</code><br><img src="/medias/drawing-bed/pxe/16.png"></p><p>å‡ºç°ä»¥ä¸‹ç•Œé¢å°±è¡Œå•¦<br><img src="/medias/drawing-bed/pxe/17.png"></p><p>è¯»æ¡å®Œæˆå‡ºç°ä»¥ä¸‹ç•Œé¢ï¼šï¼ˆç†Ÿæ‚‰çš„é…æ–¹ï¼‰<br><img src="/medias/drawing-bed/pxe/18.png"></p><hr><h1 id="æ— äººå€¼å®ˆå®‰è£…"><a href="#æ— äººå€¼å®ˆå®‰è£…" class="headerlink" title="æ— äººå€¼å®ˆå®‰è£…"></a>æ— äººå€¼å®ˆå®‰è£…</h1><h2 id="kickstartæ— äººå€¼å®ˆæŠ€æœ¯"><a href="#kickstartæ— äººå€¼å®ˆæŠ€æœ¯" class="headerlink" title="kickstartæ— äººå€¼å®ˆæŠ€æœ¯"></a>kickstartæ— äººå€¼å®ˆæŠ€æœ¯</h2><ol><li>åˆ›å»ºåº”ç­”æ–‡ä»¶ï¼Œé¢„å…ˆå®šä¹‰å¥½å„ç§å®‰è£…è®¾ç½®  </li><li>å…å»äº¤äº’è®¾ç½®è¿‡ç¨‹ï¼Œä»è€Œå®ç°å…¨è‡ªåŠ¨åŒ–å®‰è£…  </li><li>é€šè¿‡æ·»åŠ %postè„šæœ¬ï¼Œå®Œæˆå®‰è£…åçš„å„ç§é…ç½®æ“ä½œ  </li></ol><h2 id="å‡†å¤‡å®‰è£…åº”ç­”æ–‡ä»¶"><a href="#å‡†å¤‡å®‰è£…åº”ç­”æ–‡ä»¶" class="headerlink" title="å‡†å¤‡å®‰è£…åº”ç­”æ–‡ä»¶"></a>å‡†å¤‡å®‰è£…åº”ç­”æ–‡ä»¶</h2><ol><li>é…ç½®å®‰å…¨åº”ç­”å‚æ•°  </li><li>ä¿å­˜è‡ªåŠ¨åº”ç­”æ–‡ä»¶  </li></ol><h2 id="å…·ä½“æ­¥éª¤ï¼š"><a href="#å…·ä½“æ­¥éª¤ï¼š" class="headerlink" title="å…·ä½“æ­¥éª¤ï¼š"></a>å…·ä½“æ­¥éª¤ï¼š</h2><p>å®‰è£…åº”ç­”æ–‡ä»¶éœ€è¦<code>system-config-kickstart</code>è¿™ä¸ªè½¯ä»¶åŒ…<br>æŒ‚è½½å…‰ç›˜åˆ°<code>/media/</code>ï¼Œ<code>cd /media/Packages/</code>ï¼Œä½¿ç”¨<code>localinstall</code>è§£å†³<code>yum</code>å®‰è£…ä¾èµ–åŒ…<br><code>yum â€“y localinstall system-config-kickstart-2.8.6.6-el6.noarch.rpm</code><br><img src="/medias/drawing-bed/pxe/19.png"></p><p>è¾“å…¥<code>system-config-kickstart</code>å›è½¦ï¼Œç­‰å¾…ä¸€ä¼š<br><img src="/medias/drawing-bed/pxe/20.png"></p><p>å¼¹å‡ºä»¥ä¸‹ç•Œé¢<br><img src="/medias/drawing-bed/pxe/21.png"><br><img src="/medias/drawing-bed/pxe/22.png"><br><img src="/medias/drawing-bed/pxe/23.png"></p><p>åœ¨ å¸ƒå±€ é€‰é¡¹ä¸‹é¢ï¼Œè®¾ç½®åˆ†åŒºä¿¡æ¯ï¼ˆä¸èƒ½è¶…è¿‡å®¢æˆ·æœºç£ç›˜å®¹é‡ï¼ï¼‰<br><code>/bootï¼š200M</code><br><code>/swapï¼š1200M</code><br><code>/ï¼š10000M</code><br><img src="/medias/drawing-bed/pxe/24.png"><br><img src="/medias/drawing-bed/pxe/25.png"><br><img src="/medias/drawing-bed/pxe/26.png"><br><img src="/medias/drawing-bed/pxe/27.png"><br><img src="/medias/drawing-bed/pxe/28.png"></p><p>ä¿å­˜ä¹‹åå…³é—­çª—å£å³å¯<br><img src="/medias/drawing-bed/pxe/29.png"></p><p>å¤åˆ¶å…‰ç›˜é‡Œçš„å†…å®¹åˆ°<code>/var/ftp/pub</code>ï¼Œå¤åˆ¶<code>ks.cfg</code>åˆ°<code>pub</code>ç›®å½•ä¸‹<br><img src="/medias/drawing-bed/pxe/30.png"></p><p>ç¼–è¾‘<code>default</code>æ–‡ä»¶<br><img src="/medias/drawing-bed/pxe/31.png"><br><img src="/medias/drawing-bed/pxe/32.png"></p><p>å®¢æˆ·æœºå¼€æœºè¿›å…¥<code>BIOS</code>ï¼Œåœ¨<code>boot</code>é¡¹ä¸‹ï¼Œå°†<code>Network</code>è°ƒæ•´åˆ°ç¬¬ä¸€ä½ï¼Œ<code>F10</code>ä¿å­˜é€€å‡º<br><img src="/medias/drawing-bed/pxe/33.png"><br><img src="/medias/drawing-bed/pxe/34.png"><br>ï¼ˆæŠ¥é”™ï¼šæ— æ³•ä¸‹è½½æ–‡ä»¶ï¼Œé‡å¯æœåŠ¡ç«¯<code>xinetd</code>ï¼Œ<code>vsftpd</code>ç­‰æœåŠ¡ï¼‰<br><img src="/medias/drawing-bed/pxe/35.png"><br><img src="/medias/drawing-bed/pxe/36.png"><br><img src="/medias/drawing-bed/pxe/37.png"><br>è¾“å…¥<code>root</code>ç”¨æˆ·ï¼Œå¯†ç æ˜¯ä¸Šé¢è®¾ç½®çš„<code>123456</code>  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> PXE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é˜²ç«å¢™</title>
      <link href="/posts/459a.html"/>
      <url>/posts/459a.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h1><p>&emsp;&emsp;é˜²ç«å¢™ï¼Œå…¶å®è¯´ç™½äº†è®²ï¼Œå°±æ˜¯ç”¨äºå®ç°Linuxä¸‹è®¿é—®æ§åˆ¶çš„åŠŸèƒ½çš„ï¼Œå®ƒåˆ†ä¸º<font color=red>ç¡¬ä»¶çš„æˆ–è€…è½¯ä»¶çš„é˜²ç«å¢™ä¸¤ç§</font>ã€‚æ— è®ºæ˜¯åœ¨å“ªä¸ªç½‘ç»œä¸­ï¼Œé˜²ç«å¢™å·¥ä½œçš„åœ°æ–¹ä¸€å®šæ˜¯åœ¨ç½‘ç»œçš„è¾¹ç¼˜ã€‚è€Œæˆ‘ä»¬çš„ä»»åŠ¡å°±æ˜¯éœ€è¦å»å®šä¹‰åˆ°åº•é˜²ç«å¢™å¦‚ä½•å·¥ä½œï¼Œè¿™å°±æ˜¯é˜²ç«å¢™çš„ç­–ç•¥/è§„åˆ™ï¼Œä»¥è¾¾åˆ°è®©å®ƒå¯¹å‡ºå…¥ç½‘ç»œçš„IPã€æ•°æ®è¿›è¡Œæ£€æµ‹ã€‚<br>&emsp;&emsp;ç›®å‰å¸‚é¢ä¸Šæ¯”è¾ƒå¸¸è§çš„æœ‰3ã€4å±‚çš„é˜²ç«å¢™ï¼Œå«ç½‘ç»œå±‚çš„é˜²ç«å¢™ï¼Œè¿˜æœ‰7å±‚çš„é˜²ç«å¢™ï¼Œå…¶å®æ˜¯ä»£ç†å±‚çš„ç½‘å…³ã€‚<br>&emsp;&emsp;å¯¹äºTCP/IPçš„ä¸ƒå±‚æ¨¡å‹æ¥è®²ï¼Œæˆ‘ä»¬çŸ¥é“ç¬¬ä¸‰å±‚æ˜¯ç½‘ç»œå±‚ï¼Œä¸‰å±‚çš„é˜²ç«å¢™ä¼šåœ¨è¿™å±‚å¯¹æºåœ°å€å’Œç›®æ ‡åœ°å€è¿›è¡Œæ£€æµ‹ã€‚ä½†æ˜¯å¯¹äºä¸ƒå±‚çš„é˜²ç«å¢™ï¼Œä¸ç®¡ä½ æºç«¯å£æˆ–è€…ç›®æ ‡ç«¯å£ï¼Œæºåœ°å€æˆ–è€…ç›®æ ‡åœ°å€æ˜¯ä»€ä¹ˆï¼Œéƒ½å°†å¯¹ä½ æ‰€æœ‰çš„ä¸œè¥¿è¿›è¡Œæ£€æŸ¥ã€‚æ‰€ä»¥ï¼Œå¯¹äºè®¾è®¡åŸç†æ¥è®²ï¼Œä¸ƒå±‚é˜²ç«å¢™æ›´åŠ å®‰å…¨ï¼Œä½†æ˜¯è¿™å´å¸¦æ¥äº†æ•ˆç‡æ›´ä½ã€‚æ‰€ä»¥å¸‚é¢ä¸Šé€šå¸¸çš„é˜²ç«å¢™æ–¹æ¡ˆï¼Œéƒ½æ˜¯ä¸¤è€…ç»“åˆçš„ã€‚è€Œåˆç”±äºæˆ‘ä»¬éƒ½éœ€è¦ä»é˜²ç«å¢™æ‰€æ§åˆ¶çš„è¿™ä¸ªå£æ¥è®¿é—®ï¼Œæ‰€ä»¥é˜²ç«å¢™çš„å·¥ä½œæ•ˆç‡å°±æˆäº†ç”¨æˆ·èƒ½å¤Ÿè®¿é—®æ•°æ®å¤šå°‘çš„ä¸€ä¸ªæœ€é‡è¦çš„æ§åˆ¶ï¼Œé…ç½®çš„ä¸å¥½ç”šè‡³æœ‰å¯èƒ½æˆä¸ºæµé‡çš„ç“¶é¢ˆã€‚  </p><h1 id="iptablesçš„å†å²ä»¥åŠå·¥ä½œåŸç†"><a href="#iptablesçš„å†å²ä»¥åŠå·¥ä½œåŸç†" class="headerlink" title="iptablesçš„å†å²ä»¥åŠå·¥ä½œåŸç†"></a>iptablesçš„å†å²ä»¥åŠå·¥ä½œåŸç†</h1><h2 id="iptablesçš„å‘å±•"><a href="#iptablesçš„å‘å±•" class="headerlink" title="iptablesçš„å‘å±•"></a>iptablesçš„å‘å±•</h2><p><code>iptables</code>çš„å‰èº«å«<code>ipfirewall</code>ï¼ˆå†…æ ¸1.xæ—¶ä»£ï¼‰,è¿™æ˜¯ä¸€ä¸ªä½œè€…ä»<code>freeBSD</code>ä¸Šç§»æ¤è¿‡æ¥çš„ï¼Œèƒ½å¤Ÿå·¥ä½œåœ¨å†…æ ¸å½“ä¸­çš„ï¼Œå¯¹æ•°æ®åŒ…è¿›è¡Œæ£€æµ‹çš„ä¸€æ¬¾ç®€æ˜“è®¿é—®æ§åˆ¶å·¥å…·ã€‚ä½†æ˜¯<code>ipfirewall</code>å·¥ä½œåŠŸèƒ½æå…¶æœ‰é™(å®ƒéœ€è¦å°†æ‰€æœ‰çš„è§„åˆ™éƒ½æ”¾è¿›å†…æ ¸å½“ä¸­ï¼Œè¿™æ ·è§„åˆ™æ‰èƒ½å¤Ÿè¿è¡Œèµ·æ¥ï¼Œè€Œæ”¾è¿›å†…æ ¸ï¼Œè¿™ä¸ªåšæ³•ä¸€èˆ¬æ˜¯æå…¶å›°éš¾çš„)ã€‚å½“å†…æ ¸å‘å±•åˆ°2.xç³»åˆ—çš„æ—¶å€™ï¼Œè½¯ä»¶æ›´åä¸º<code>ipchains</code>ï¼Œå®ƒå¯ä»¥å®šä¹‰å¤šæ¡è§„åˆ™ï¼Œå°†ä»–ä»¬ä¸²èµ·æ¥ï¼Œå…±åŒå‘æŒ¥ä½œç”¨ï¼Œè€Œç°åœ¨ï¼Œå®ƒå«åš<code>iptables</code>ï¼Œå¯ä»¥å°†è§„åˆ™ç»„æˆä¸€ä¸ªåˆ—è¡¨ï¼Œå®ç°ç»å¯¹è¯¦ç»†çš„è®¿é—®æ§åˆ¶åŠŸèƒ½ã€‚<br>ä»–ä»¬éƒ½æ˜¯å·¥ä½œåœ¨ç”¨æˆ·ç©ºé—´ä¸­ï¼Œå®šä¹‰è§„åˆ™çš„å·¥å…·ï¼Œæœ¬èº«å¹¶ä¸ç®—æ˜¯é˜²ç«å¢™ã€‚å®ƒä»¬å®šä¹‰çš„è§„åˆ™ï¼Œå¯ä»¥è®©åœ¨å†…æ ¸ç©ºé—´å½“ä¸­çš„<code>netfilter</code>æ¥è¯»å–ï¼Œå¹¶ä¸”å®ç°è®©é˜²ç«å¢™å·¥ä½œã€‚è€Œæ”¾å…¥å†…æ ¸çš„åœ°æ–¹å¿…é¡»è¦æ˜¯ç‰¹å®šçš„ä½ç½®ï¼Œå¿…é¡»æ˜¯<code>tcp/ip</code>çš„åè®®æ ˆç»è¿‡çš„åœ°æ–¹ã€‚è€Œè¿™ä¸ª<code>tcp/ip</code>åè®®æ ˆå¿…é¡»ç»è¿‡çš„åœ°æ–¹ï¼Œå¯ä»¥å®ç°è¯»å–è§„åˆ™çš„åœ°æ–¹å°±å«åš<code>netfilter</code>ã€‚(ç½‘ç»œè¿‡æ»¤å™¨)<br>ä½œè€…ä¸€å…±åœ¨å†…æ ¸ç©ºé—´ä¸­é€‰æ‹©äº†5ä¸ªä½ç½®ï¼Œ  </p><ol><li>å†…æ ¸ç©ºé—´ä¸­ï¼šä»ä¸€ä¸ªç½‘ç»œæ¥å£è¿›æ¥ï¼Œåˆ°å¦ä¸€ä¸ªç½‘ç»œæ¥å£å»çš„<br><code>FORWARD</code>ï¼šè½¬å‘  </li><li>æ•°æ®åŒ…ä»å†…æ ¸æµå…¥ç”¨æˆ·ç©ºé—´çš„<br><code>INPUT</code>ï¼šè¿›ç«™  </li><li>æ•°æ®åŒ…ä»ç”¨æˆ·ç©ºé—´æµå‡ºçš„<br><code>OUTPUT</code>ï¼šå‡ºç«™  </li><li>è¿›å…¥/ç¦»å¼€æœ¬æœºçš„å¤–ç½‘æ¥å£<br><code>POSTROUTING</code>ï¼šè·¯ç”±å  </li><li>è¿›å…¥/ç¦»å¼€æœ¬æœºçš„å†…ç½‘æ¥å£<br><code>PREROUTEING</code>ï¼šè·¯ç”±å‰  </li></ol><h2 id="iptablesçš„å·¥ä½œæœºåˆ¶"><a href="#iptablesçš„å·¥ä½œæœºåˆ¶" class="headerlink" title="iptablesçš„å·¥ä½œæœºåˆ¶"></a>iptablesçš„å·¥ä½œæœºåˆ¶</h2><p>&emsp;&emsp;ä»ä¸Šé¢çš„å‘å±•æˆ‘ä»¬çŸ¥é“äº†ä½œè€…é€‰æ‹©äº†5ä¸ªä½ç½®ï¼Œæ¥ä½œä¸ºæ§åˆ¶çš„åœ°æ–¹ï¼Œä½†æ˜¯ä½ æœ‰æ²¡æœ‰å‘ç°ï¼Œå…¶å®å‰ä¸‰ä¸ªä½ç½®å·²ç»åŸºæœ¬ä¸Šèƒ½å°†è·¯å¾„å½»åº•å°é”äº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆå·²ç»åœ¨è¿›å‡ºçš„å£è®¾ç½®äº†å…³å¡ä¹‹åè¿˜è¦åœ¨å†…éƒ¨å¡å‘¢ï¼Ÿç”±äºæ•°æ®åŒ…å°šæœªè¿›è¡Œè·¯ç”±å†³ç­–ï¼Œè¿˜ä¸çŸ¥é“æ•°æ®è¦èµ°å‘å“ªé‡Œï¼Œæ‰€ä»¥åœ¨è¿›å‡ºå£æ˜¯æ²¡åŠæ³•å®ç°æ•°æ®è¿‡æ»¤çš„ã€‚æ‰€ä»¥è¦åœ¨å†…æ ¸ç©ºé—´é‡Œè®¾ç½®è½¬å‘çš„å…³å¡ï¼Œè¿›å…¥ç”¨æˆ·ç©ºé—´çš„å…³å¡ï¼Œä»ç”¨æˆ·ç©ºé—´å‡ºå»çš„å…³å¡ã€‚é‚£ä¹ˆï¼Œæ—¢ç„¶ä»–ä»¬æ²¡ä»€ä¹ˆç”¨ï¼Œé‚£æˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦æ”¾ç½®ä»–ä»¬å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬åœ¨åšNATå’ŒDNATçš„æ—¶å€™ï¼Œç›®æ ‡åœ°å€è½¬æ¢å¿…é¡»åœ¨è·¯ç”±ä¹‹å‰è½¬æ¢ã€‚æ‰€ä»¥æˆ‘ä»¬å¿…é¡»åœ¨å¤–ç½‘è€Œåå†…ç½‘çš„æ¥å£å¤„è¿›è¡Œè®¾ç½®å…³å¡ã€‚<br>è¿™äº”ä¸ªä½ç½®ä¹Ÿè¢«ç§°ä¸ºäº”ä¸ªé’©å­å‡½æ•°ï¼ˆhook functionsï¼‰,ä¹Ÿå«äº”ä¸ªè§„åˆ™é“¾ã€‚  </p><ol><li><code>PREROUTING</code> (è·¯ç”±å‰)  </li><li><code>INPUT</code> (æ•°æ®åŒ…æµå…¥å£)  </li><li><code>FORWARD</code> (è½¬å‘ç®¡å¡)  </li><li><code>OUTPUT</code> (æ•°æ®åŒ…å‡ºå£)  </li><li><code>POSTROUTING</code> (è·¯ç”±å)  </li></ol><p>&emsp;&emsp;è¿™æ˜¯<code>NetFilter</code>è§„å®šçš„äº”ä¸ªè§„åˆ™é“¾ï¼Œä»»ä½•ä¸€ä¸ªæ•°æ®åŒ…ï¼Œåªè¦ç»è¿‡æœ¬æœºï¼Œå¿…å°†ç»è¿‡è¿™äº”ä¸ªé“¾ä¸­çš„å…¶ä¸­ä¸€ä¸ªé“¾ã€‚   </p><h2 id="é˜²ç«å¢™çš„ç­–ç•¥"><a href="#é˜²ç«å¢™çš„ç­–ç•¥" class="headerlink" title="é˜²ç«å¢™çš„ç­–ç•¥"></a>é˜²ç«å¢™çš„ç­–ç•¥</h2><p>&emsp;&emsp;é˜²ç«å¢™ç­–ç•¥ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼Œä¸€ç§å«â€œé€šâ€ç­–ç•¥ï¼Œä¸€ç§å«â€œå µâ€ç­–ç•¥ï¼Œé€šç­–ç•¥ï¼Œé»˜è®¤é—¨æ˜¯å…³ç€çš„ï¼Œå¿…é¡»è¦å®šä¹‰è°èƒ½è¿›ã€‚å µç­–ç•¥åˆ™æ˜¯ï¼Œå¤§é—¨æ˜¯æ´å¼€çš„ï¼Œä½†æ˜¯ä½ å¿…é¡»æœ‰èº«ä»½è®¤è¯ï¼Œå¦åˆ™ä¸èƒ½è¿›ã€‚æ‰€ä»¥æˆ‘ä»¬è¦å®šä¹‰ï¼Œè®©è¿›æ¥çš„è¿›æ¥ï¼Œè®©å‡ºå»çš„å‡ºå»ï¼Œæ‰€ä»¥é€šï¼Œæ˜¯è¦å…¨é€šï¼Œè€Œå µï¼Œåˆ™æ˜¯è¦é€‰æ‹©ã€‚å½“æˆ‘ä»¬å®šä¹‰çš„ç­–ç•¥çš„æ—¶å€™ï¼Œè¦åˆ†åˆ«å®šä¹‰å¤šæ¡åŠŸèƒ½ï¼Œå…¶ä¸­ï¼šå®šä¹‰æ•°æ®åŒ…ä¸­å…è®¸æˆ–è€…ä¸å…è®¸çš„ç­–ç•¥ï¼Œfilterè¿‡æ»¤çš„åŠŸèƒ½ï¼Œè€Œå®šä¹‰åœ°å€è½¬æ¢çš„åŠŸèƒ½çš„åˆ™æ˜¯naté€‰é¡¹ã€‚ä¸ºäº†è®©è¿™äº›åŠŸèƒ½äº¤æ›¿å·¥ä½œï¼Œæˆ‘ä»¬åˆ¶å®šå‡ºäº†â€œè¡¨â€è¿™ä¸ªå®šä¹‰ï¼Œæ¥å®šä¹‰ã€åŒºåˆ†å„ç§ä¸åŒçš„å·¥ä½œåŠŸèƒ½å’Œå¤„ç†æ–¹å¼ã€‚  </p><p>æˆ‘ä»¬ç°åœ¨ç”¨çš„æ¯”è¾ƒå¤šä¸ªåŠŸèƒ½æœ‰3ä¸ªï¼š  </p><ol><li><code>filter</code> å®šä¹‰å…è®¸æˆ–è€…ä¸å…è®¸çš„  </li><li><code>nat</code> å®šä¹‰åœ°å€è½¬æ¢çš„  </li><li><code>mangle</code>åŠŸèƒ½:ä¿®æ”¹æŠ¥æ–‡åŸæ•°æ®  </li></ol><p>&emsp;&emsp;æˆ‘ä»¬ä¿®æ”¹æŠ¥æ–‡åŸæ•°æ®å°±æ˜¯æ¥ä¿®æ”¹TTLçš„ã€‚èƒ½å¤Ÿå®ç°å°†æ•°æ®åŒ…çš„å…ƒæ•°æ®æ‹†å¼€ï¼Œåœ¨é‡Œé¢åšæ ‡è®°/ä¿®æ”¹å†…å®¹çš„ã€‚è€Œé˜²ç«å¢™æ ‡è®°ï¼Œå…¶å®å°±æ˜¯é mangleæ¥å®ç°çš„ã€‚  </p><p>å°æ‰©å±•:<br>å¯¹äº<code>filter</code>æ¥è®²ä¸€èˆ¬åªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼š<code>INPUT</code> ï¼Œ<code>FORWARD</code> ï¼Œ<code>OUTPUT</code><br>å¯¹äº<code>nat</code>æ¥è®²ä¸€èˆ¬ä¹Ÿåªèƒ½åšåœ¨3ä¸ªé“¾ä¸Šï¼š<code>PREROUTING</code> ï¼Œ<code>OUTPUT</code> ï¼Œ<code>POSTROUTING</code><br>è€Œ<code>mangle</code>åˆ™æ˜¯5ä¸ªé“¾éƒ½å¯ä»¥åšï¼š<code>PREROUTING</code>ï¼Œ<code>INPUT</code>ï¼Œ<code>FORWARD</code>ï¼Œ<code>OUTPUT</code>ï¼Œ<code>POSTROUTING</code>  </p><p><code>iptables/netfilter</code>ï¼ˆè¿™æ¬¾è½¯ä»¶ï¼‰æ˜¯å·¥ä½œåœ¨ç”¨æˆ·ç©ºé—´çš„ï¼Œå®ƒå¯ä»¥è®©è§„åˆ™è¿›è¡Œç”Ÿæ•ˆçš„ï¼Œæœ¬èº«ä¸æ˜¯ä¸€ç§æœåŠ¡ï¼Œè€Œä¸”è§„åˆ™æ˜¯ç«‹å³ç”Ÿæ•ˆçš„ã€‚è€Œæˆ‘ä»¬<code>iptables</code>ç°åœ¨è¢«åšæˆäº†ä¸€ä¸ªæœåŠ¡ï¼Œå¯ä»¥è¿›è¡Œå¯åŠ¨ï¼Œåœæ­¢çš„ã€‚å¯åŠ¨ï¼Œåˆ™å°†è§„åˆ™ç›´æ¥ç”Ÿæ•ˆï¼Œåœæ­¢ï¼Œåˆ™å°†è§„åˆ™æ’¤é”€ã€‚<br><code>iptables</code>è¿˜æ”¯æŒè‡ªå·±å®šä¹‰é“¾ã€‚ä½†æ˜¯è‡ªå·±å®šä¹‰çš„é“¾ï¼Œå¿…é¡»æ˜¯è·ŸæŸç§ç‰¹å®šçš„é“¾å…³è”èµ·æ¥çš„ã€‚åœ¨ä¸€ä¸ªå…³å¡è®¾å®šï¼ŒæŒ‡å®šå½“æœ‰æ•°æ®çš„æ—¶å€™ä¸“é—¨å»æ‰¾æŸä¸ªç‰¹å®šçš„é“¾æ¥å¤„ç†ï¼Œå½“é‚£ä¸ªé“¾å¤„ç†å®Œä¹‹åï¼Œå†è¿”å›ã€‚æ¥ç€åœ¨ç‰¹å®šçš„é“¾ä¸­ç»§ç»­æ£€æŸ¥ã€‚  </p><p>æ³¨æ„ï¼šè§„åˆ™çš„æ¬¡åºéå¸¸å…³é”®ï¼Œè°çš„è§„åˆ™è¶Šä¸¥æ ¼ï¼Œåº”è¯¥æ”¾çš„è¶Šé å‰ï¼Œè€Œæ£€æŸ¥è§„åˆ™çš„æ—¶å€™ï¼Œæ˜¯æŒ‰ç…§ä»ä¸Šå¾€ä¸‹çš„æ–¹å¼è¿›è¡Œæ£€æŸ¥çš„ã€‚  </p><h1 id="è§„åˆ™çš„å†™æ³•"><a href="#è§„åˆ™çš„å†™æ³•" class="headerlink" title="è§„åˆ™çš„å†™æ³•:"></a>è§„åˆ™çš„å†™æ³•:</h1><p><code>iptables</code>å®šä¹‰è§„åˆ™çš„æ–¹å¼æ¯”è¾ƒå¤æ‚ï¼šæ ¼å¼ï¼š<code>iptables [-t table] COMMAND chain CRETIRIA -j ACTION</code><br><code>-t table</code>ï¼š3ä¸ªfilter nat mangle<br><code>COMMAND</code>ï¼šå®šä¹‰å¦‚ä½•å¯¹è§„åˆ™è¿›è¡Œç®¡ç†<br><code>chain</code>ï¼šæŒ‡å®šä½ æ¥ä¸‹æ¥çš„è§„åˆ™åˆ°åº•æ˜¯åœ¨å“ªä¸ªé“¾ä¸Šæ“ä½œçš„ï¼Œå½“å®šä¹‰ç­–ç•¥çš„æ—¶å€™ï¼Œæ˜¯å¯ä»¥çœç•¥çš„<br><code>CRETIRIA</code>ï¼šæŒ‡å®šåŒ¹é…æ ‡å‡†<br><code>-j ACTION</code>ï¼šæŒ‡å®šå¦‚ä½•è¿›è¡Œå¤„ç†  </p><p>æ¯”å¦‚ï¼šä¸å…è®¸<code>172.16.0.0/24</code>çš„è¿›è¡Œè®¿é—®ã€‚<br><code>iptables -t filter -A INPUT -s 172.16.0.0/16 -p udp --dport 53 -j DROP</code>  </p><p>å½“ç„¶ä½ å¦‚æœæƒ³æ‹’ç»çš„æ›´å½»åº•ï¼š<br><code>iptables -t filter -R INPUT 1 -s 172.16.0.0/16 -p udp --dport 53 -j REJECT</code>  </p><p>æŸ¥çœ‹å®šä¹‰è§„åˆ™çš„è¯¦ç»†ä¿¡æ¯<br><code>iptables -L -n -v</code>  </p><h1 id="è¯¦è§£COMMAND"><a href="#è¯¦è§£COMMAND" class="headerlink" title="è¯¦è§£COMMAND:"></a>è¯¦è§£COMMAND:</h1><h2 id="é“¾ç®¡ç†å‘½ä»¤ï¼ˆè¿™éƒ½æ˜¯ç«‹å³ç”Ÿæ•ˆçš„ï¼‰"><a href="#é“¾ç®¡ç†å‘½ä»¤ï¼ˆè¿™éƒ½æ˜¯ç«‹å³ç”Ÿæ•ˆçš„ï¼‰" class="headerlink" title="é“¾ç®¡ç†å‘½ä»¤ï¼ˆè¿™éƒ½æ˜¯ç«‹å³ç”Ÿæ•ˆçš„ï¼‰"></a>é“¾ç®¡ç†å‘½ä»¤ï¼ˆè¿™éƒ½æ˜¯ç«‹å³ç”Ÿæ•ˆçš„ï¼‰</h2><p><code>-P</code>ï¼šè®¾ç½®é»˜è®¤ç­–ç•¥çš„ï¼ˆè®¾å®šé»˜è®¤é—¨æ˜¯å…³ç€çš„è¿˜æ˜¯å¼€ç€çš„ï¼‰é»˜è®¤ç­–ç•¥ä¸€èˆ¬åªæœ‰ä¸¤ç§<br><code>iptables -P INPUT (DROP|ACCEPT)</code>  é»˜è®¤æ˜¯å…³çš„/é»˜è®¤æ˜¯å¼€çš„  </p><p>æ¯”å¦‚ï¼š<code>iptables -P INPUT DROP</code> è¿™å°±æŠŠé»˜è®¤è§„åˆ™ç»™æ‹’ç»äº†ã€‚å¹¶ä¸”æ²¡æœ‰å®šä¹‰å“ªä¸ªåŠ¨ä½œï¼Œæ‰€ä»¥å…³äºå¤–ç•Œè¿æ¥çš„æ‰€æœ‰è§„åˆ™åŒ…æ‹¬Xshellè¿æ¥ä¹‹ç±»çš„ï¼Œè¿œç¨‹è¿æ¥éƒ½è¢«æ‹’ç»äº†ã€‚<br><code>-F</code>ï¼šFLASHï¼Œæ¸…ç©ºè§„åˆ™é“¾çš„(æ³¨æ„æ¯ä¸ªé“¾çš„ç®¡ç†æƒé™)<br><code>iptables -t nat -F PREROUTING</code><br><code>iptables -t nat -F</code> æ¸…ç©ºnatè¡¨çš„æ‰€æœ‰é“¾<br><code>-N</code>ï¼šNEW æ”¯æŒç”¨æˆ·æ–°å»ºä¸€ä¸ªé“¾<br><code>iptables -N inbound_tcp_web</code> è¡¨ç¤ºé™„åœ¨tcpè¡¨ä¸Šç”¨äºæ£€æŸ¥webçš„ã€‚<br><code>-X</code>ï¼šç”¨äºåˆ é™¤ç”¨æˆ·è‡ªå®šä¹‰çš„ç©ºé“¾ï¼Œä½¿ç”¨æ–¹æ³•è·Ÿ-Nç›¸åŒï¼Œä½†æ˜¯åœ¨åˆ é™¤ä¹‹å‰å¿…é¡»è¦å°†é‡Œé¢çš„é“¾ç»™æ¸…ç©ºæ˜‚äº†<br><code>-E</code>ï¼šç”¨æ¥Rename chainä¸»è¦æ˜¯ç”¨æ¥ç»™ç”¨æˆ·è‡ªå®šä¹‰çš„é“¾é‡å‘½å<br><code>-E oldname newname</code><br><code>-Z</code>ï¼šæ¸…ç©ºé“¾ï¼ŒåŠé“¾ä¸­é»˜è®¤è§„åˆ™çš„è®¡æ•°å™¨çš„ï¼ˆæœ‰ä¸¤ä¸ªè®¡æ•°å™¨ï¼Œè¢«åŒ¹é…åˆ°å¤šå°‘ä¸ªæ•°æ®åŒ…ï¼Œå¤šå°‘ä¸ªå­—èŠ‚ï¼‰<br><code>iptables -Z</code>:æ¸…ç©º  </p><h2 id="è§„åˆ™ç®¡ç†å‘½ä»¤"><a href="#è§„åˆ™ç®¡ç†å‘½ä»¤" class="headerlink" title="è§„åˆ™ç®¡ç†å‘½ä»¤"></a>è§„åˆ™ç®¡ç†å‘½ä»¤</h2><p><code>-A</code>ï¼šè¿½åŠ ï¼Œåœ¨å½“å‰é“¾çš„æœ€åæ–°å¢ä¸€ä¸ªè§„åˆ™<br><code>-I num</code>ï¼šæ’å…¥ï¼ŒæŠŠå½“å‰è§„åˆ™æ’å…¥ä¸ºç¬¬å‡ æ¡ã€‚<br><code>-I 3</code>ï¼šæ’å…¥ä¸ºç¬¬ä¸‰æ¡<br><code>-R num</code>ï¼šReplaysæ›¿æ¢/ä¿®æ”¹ç¬¬å‡ æ¡è§„åˆ™ï¼Œæ ¼å¼ï¼š<code>iptables -R 3 ...</code><br><code>-D num</code>ï¼šåˆ é™¤ï¼Œæ˜ç¡®æŒ‡å®šåˆ é™¤ç¬¬å‡ æ¡è§„åˆ™  </p><h2 id="æŸ¥çœ‹ç®¡ç†å‘½ä»¤-â€œ-Lâ€"><a href="#æŸ¥çœ‹ç®¡ç†å‘½ä»¤-â€œ-Lâ€" class="headerlink" title="æŸ¥çœ‹ç®¡ç†å‘½ä»¤ â€œ-Lâ€"></a>æŸ¥çœ‹ç®¡ç†å‘½ä»¤ â€œ-Lâ€</h2><p>é™„åŠ å­å‘½ä»¤<br><code>-n</code>ï¼šä»¥æ•°å­—çš„æ–¹å¼æ˜¾ç¤ºipï¼Œå®ƒä¼šå°†ipç›´æ¥æ˜¾ç¤ºå‡ºæ¥ï¼Œå¦‚æœä¸åŠ -nï¼Œåˆ™ä¼šå°†ipåå‘è§£ææˆä¸»æœºåã€‚<br><code>-v</code>ï¼šæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯<br><code>-vv</code>ï¼Œ<code>-vvv</code>:è¶Šå¤šè¶Šè¯¦ç»†<br><code>-x</code>ï¼šåœ¨è®¡æ•°å™¨ä¸Šæ˜¾ç¤ºç²¾ç¡®å€¼ï¼Œä¸åšå•ä½æ¢ç®—<br><code>--line-numbers</code>ï¼šæ˜¾ç¤ºè§„åˆ™çš„è¡Œå·<br><code>-t nat</code>ï¼šæ˜¾ç¤ºæ‰€æœ‰çš„å…³å¡çš„ä¿¡æ¯  </p><h1 id="è¯¦è§£åŒ¹é…æ ‡å‡†"><a href="#è¯¦è§£åŒ¹é…æ ‡å‡†" class="headerlink" title="è¯¦è§£åŒ¹é…æ ‡å‡†"></a>è¯¦è§£åŒ¹é…æ ‡å‡†</h1><h2 id="é€šç”¨åŒ¹é…ï¼šæºåœ°å€ç›®æ ‡åœ°å€çš„åŒ¹é…"><a href="#é€šç”¨åŒ¹é…ï¼šæºåœ°å€ç›®æ ‡åœ°å€çš„åŒ¹é…" class="headerlink" title="é€šç”¨åŒ¹é…ï¼šæºåœ°å€ç›®æ ‡åœ°å€çš„åŒ¹é…"></a>é€šç”¨åŒ¹é…ï¼šæºåœ°å€ç›®æ ‡åœ°å€çš„åŒ¹é…</h2><p><code>-s</code>ï¼šæŒ‡å®šä½œä¸ºæºåœ°å€åŒ¹é…ï¼Œè¿™é‡Œä¸èƒ½æŒ‡å®šä¸»æœºåç§°ï¼Œå¿…é¡»æ˜¯IP<br><code>IP</code> <code>IP/MASK</code> <code>0.0.0.0/0.0.0.0</code>ï¼Œè€Œä¸”åœ°å€å¯ä»¥å–åï¼ŒåŠ ä¸€ä¸ªâ€!â€è¡¨ç¤ºé™¤äº†å“ªä¸ªIPä¹‹å¤–<br><code>-d</code>ï¼šè¡¨ç¤ºåŒ¹é…ç›®æ ‡åœ°å€<br><code>-p</code>ï¼šç”¨äºåŒ¹é…åè®®çš„ï¼ˆè¿™é‡Œçš„åè®®é€šå¸¸æœ‰3ç§ï¼Œ<code>TCP</code>/<code>UDP</code>/<code>ICMP</code>ï¼‰<br><code>-i eth0</code>ï¼šä»è¿™å—ç½‘å¡æµå…¥çš„æ•°æ®ï¼Œæµå…¥ä¸€èˆ¬ç”¨åœ¨<code>INPUT</code>å’Œ<code>PREROUTING</code>ä¸Š<br><code>-o eth0</code>ï¼šä»è¿™å—ç½‘å¡æµå‡ºçš„æ•°æ®ï¼Œæµå‡ºä¸€èˆ¬åœ¨<code>OUTPUT</code>å’Œ<code>POSTROUTING</code>ä¸Š  </p><h2 id="æ‰©å±•åŒ¹é…"><a href="#æ‰©å±•åŒ¹é…" class="headerlink" title="æ‰©å±•åŒ¹é…"></a>æ‰©å±•åŒ¹é…</h2><h3 id="éšå«æ‰©å±•ï¼šå¯¹åè®®çš„æ‰©å±•"><a href="#éšå«æ‰©å±•ï¼šå¯¹åè®®çš„æ‰©å±•" class="headerlink" title="éšå«æ‰©å±•ï¼šå¯¹åè®®çš„æ‰©å±•"></a>éšå«æ‰©å±•ï¼šå¯¹åè®®çš„æ‰©å±•</h3><p><code>-p tcp</code>ï¼šTCPåè®®çš„æ‰©å±•ã€‚ä¸€èˆ¬æœ‰ä¸‰ç§æ‰©å±•<br><code>--dport XX-XX</code>ï¼šæŒ‡å®šç›®æ ‡ç«¯å£,ä¸èƒ½æŒ‡å®šå¤šä¸ªéè¿ç»­ç«¯å£,åªèƒ½æŒ‡å®šå•ä¸ªç«¯å£ï¼Œæ¯”å¦‚<br><code>--dport 21</code> æˆ–è€… <code>--dport 21-23</code> (æ­¤æ—¶è¡¨ç¤º21,22,23)<br><code>--sport</code>ï¼šæŒ‡å®šæºç«¯å£<br><code>--tcp-flags</code>ï¼šTCPçš„æ ‡å¿—ä½ï¼ˆ<code>SYN</code>,<code>ACK</code>ï¼Œ<code>FIN</code>,<code>PSH</code>ï¼Œ<code>RST</code>,<code>URG</code>ï¼‰<br>å¯¹äºå®ƒï¼Œä¸€èˆ¬è¦è·Ÿä¸¤ä¸ªå‚æ•°ï¼š<code>æ£€æŸ¥çš„æ ‡å¿—ä½</code>/<code>å¿…é¡»ä¸º1çš„æ ‡å¿—ä½</code><br><code>--tcp-flags syn,ack,fin,rst</code>=<code>--syn</code><br>è¡¨ç¤ºæ£€æŸ¥è¿™4ä¸ªä½ï¼Œè¿™4ä¸ªä½ä¸­synå¿…é¡»ä¸º1ï¼Œå…¶ä»–çš„å¿…é¡»ä¸º0ã€‚æ‰€ä»¥è¿™ä¸ªæ„æ€å°±æ˜¯ç”¨äºæ£€æµ‹ä¸‰æ¬¡æ¡æ‰‹çš„ç¬¬ä¸€æ¬¡åŒ…çš„ã€‚å¯¹äºè¿™ç§ä¸“é—¨åŒ¹é…ç¬¬ä¸€åŒ…çš„<code>SYN</code>ä¸º1çš„åŒ…ï¼Œè¿˜æœ‰ä¸€ç§ç®€å†™æ–¹å¼ï¼Œå«åš<code>--syn</code><br><code>-p udp</code>ï¼š<code>UDP</code>åè®®çš„æ‰©å±•<br><code>--dport</code><br><code>--sport</code><br><code>-p icmp</code>ï¼š<code>icmp</code>æ•°æ®æŠ¥æ–‡çš„æ‰©å±•<br><code>--icmp-type</code>ï¼š<br><code>echo-request</code>(è¯·æ±‚å›æ˜¾)ï¼Œä¸€èˆ¬ç”¨8 æ¥è¡¨ç¤ºï¼Œæ‰€ä»¥ <code>--icmp-type 8</code> åŒ¹é…è¯·æ±‚å›æ˜¾æ•°æ®åŒ…<br><code>echo-reply</code> ï¼ˆå“åº”çš„æ•°æ®åŒ…ï¼‰ä¸€èˆ¬ç”¨0æ¥è¡¨ç¤º  </p><h3 id="æ˜¾å¼æ‰©å±•ï¼ˆ-mï¼‰"><a href="#æ˜¾å¼æ‰©å±•ï¼ˆ-mï¼‰" class="headerlink" title="æ˜¾å¼æ‰©å±•ï¼ˆ-mï¼‰"></a>æ˜¾å¼æ‰©å±•ï¼ˆ-mï¼‰</h3><p>æ‰©å±•å„ç§æ¨¡å—<br><code>-m multiport</code>ï¼šè¡¨ç¤ºå¯ç”¨å¤šç«¯å£æ‰©å±•<br>ä¹‹åæˆ‘ä»¬å°±å¯ä»¥å¯ç”¨æ¯”å¦‚<code>--dports 21,23,80</code>  </p><h1 id="è¯¦è§£-j-ACTION"><a href="#è¯¦è§£-j-ACTION" class="headerlink" title="è¯¦è§£-j ACTION"></a>è¯¦è§£-j ACTION</h1><p>å¸¸ç”¨çš„<code>ACTION</code>ï¼š<br><code>DROP</code>ï¼šæ‚„æ‚„ä¸¢å¼ƒï¼Œä¸€èˆ¬æˆ‘ä»¬å¤šç”¨DROPæ¥éšè—æˆ‘ä»¬çš„èº«ä»½ï¼Œä»¥åŠéšè—æˆ‘ä»¬çš„é“¾è¡¨<br><code>REJECT</code>ï¼šæ˜ç¤ºæ‹’ç»<br><code>ACCEPT</code>ï¼šæ¥å—<br><code>custom_chain</code>ï¼šè½¬å‘ä¸€ä¸ªè‡ªå®šä¹‰çš„é“¾<br><code>DNAT</code><br><code>SNAT</code><br><code>MASQUERADE</code>ï¼šæºåœ°å€ä¼ªè£…<br><code>REDIRECT</code>ï¼šé‡å®šå‘ï¼šä¸»è¦ç”¨äºå®ç°ç«¯å£é‡å®šå‘<br><code>MARK</code>ï¼šæ‰“é˜²ç«å¢™æ ‡è®°çš„<br><code>RETURN</code>ï¼šè¿”å›<br>åœ¨è‡ªå®šä¹‰é“¾æ‰§è¡Œå®Œæ¯•åä½¿ç”¨è¿”å›ï¼Œæ¥è¿”å›åŸè§„åˆ™é“¾ã€‚  </p><p>Q1ï¼šåªè¦æ˜¯æ¥è‡ªäº<code>172.16.0.0/16</code>ç½‘æ®µçš„éƒ½å…è®¸è®¿é—®æˆ‘æœ¬æœºçš„<code>172.16.100.1</code>çš„<code>SSHD</code>æœåŠ¡<br>A1ï¼šé¦–å…ˆè‚¯å®šæ˜¯åœ¨å…è®¸è¡¨ä¸­å®šä¹‰çš„ã€‚å› ä¸ºä¸éœ€è¦åšNATåœ°å€è½¬æ¢ä¹‹ç±»çš„ï¼Œç„¶åæŸ¥çœ‹æˆ‘ä»¬<code>SSHD</code>æœåŠ¡ï¼Œåœ¨22å·ç«¯å£ä¸Šï¼Œå¤„ç†æœºåˆ¶æ˜¯æ¥å—ï¼Œå¯¹äºè¿™ä¸ªè¡¨ï¼Œéœ€è¦æœ‰ä¸€æ¥ä¸€å›ä¸¤ä¸ªè§„åˆ™ï¼Œå¦‚æœæˆ‘ä»¬å…è®¸ä¹Ÿå¥½ï¼Œæ‹’ç»ä¹Ÿå¥½ï¼Œå¯¹äºè®¿é—®æœ¬æœºæœåŠ¡ï¼Œæˆ‘ä»¬æœ€å¥½æ˜¯å®šä¹‰åœ¨INPUTé“¾ä¸Šï¼Œè€ŒOUTPUTå†äºˆä»¥å®šä¹‰å°±å¥½ã€‚(ä¼šè¯çš„åˆå§‹ç«¯å…ˆå®šä¹‰)ï¼Œæ‰€ä»¥åŠ è§„åˆ™å°±æ˜¯ï¼š<br>&emsp;&emsp;å®šä¹‰è¿›æ¥çš„ï¼š <code>iptables -t filter -A INPUT -s 172.16.0.0/16 -d 172.16.100.1 -p tcp --dport 22 -j ACCEPT</code><br>&emsp;&emsp;å®šä¹‰å‡ºå»çš„ï¼š <code>iptables -t filter -A OUTPUT -s 172.16.100.1 -d 172.16.0.0/16 -p tcp --dport 22 -j ACCEPT</code><br>&emsp;&emsp;å°†é»˜è®¤ç­–ç•¥æ”¹æˆDROP:  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">iptables -P INPUT DROPiptables -P OUTPUT DROPiptables -P FORWARD DROP<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="çŠ¶æ€æ£€æµ‹ï¼š"><a href="#çŠ¶æ€æ£€æµ‹ï¼š" class="headerlink" title="çŠ¶æ€æ£€æµ‹ï¼š"></a>çŠ¶æ€æ£€æµ‹ï¼š</h1><p>&emsp;&emsp;ä»€ä¹ˆæ˜¯çŠ¶æ€æ£€æµ‹ï¼Ÿå¯¹äºæ•´ä¸ªTCPåè®®æ¥è®²ï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ‰è¿æ¥çš„åè®®ï¼Œä¸‰æ¬¡æ¡æ‰‹ä¸­ï¼Œç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œæˆ‘ä»¬å°±å«NEWè¿æ¥ï¼Œè€Œä»ç¬¬äºŒæ¬¡æ¡æ‰‹ä»¥åçš„ï¼Œackéƒ½ä¸º1ï¼Œè¿™æ˜¯æ­£å¸¸çš„æ•°æ®ä¼ è¾“ï¼Œå’Œtcpçš„ç¬¬äºŒæ¬¡ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå«åšå·²å»ºç«‹çš„è¿æ¥ï¼ˆ<code>ESTABLISHED</code>ï¼‰,è¿˜æœ‰ä¸€ç§çŠ¶æ€ï¼Œæ¯”è¾ƒè¯¡å¼‚çš„ï¼Œæ¯”å¦‚ï¼š<code>SYN=1 ACK=1 RST=1</code>,å¯¹äºè¿™ç§æˆ‘ä»¬æ— æ³•è¯†åˆ«çš„ï¼Œæˆ‘ä»¬éƒ½ç§°ä¹‹ä¸º<code>INVALID</code>æ— æ³•è¯†åˆ«çš„ã€‚è¿˜æœ‰ç¬¬å››ç§ï¼ŒFTPè¿™ç§å¤è€çš„æ‹¥æœ‰çš„ç‰¹å¾ï¼Œæ¯ä¸ªç«¯å£éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œ21å·å’Œ20å·ç«¯å£éƒ½æ˜¯ä¸€å»ä¸€å›ï¼Œä»–ä»¬ä¹‹é—´æ˜¯æœ‰å…³ç³»çš„ï¼Œè¿™ç§å…³ç³»æˆ‘ä»¬ç§°ä¹‹ä¸º<code>RELATED</code>ã€‚  </p><p>æ‰€ä»¥æˆ‘ä»¬çš„çŠ¶æ€ä¸€å…±æœ‰å››ç§ï¼š<br>&emsp;&emsp;&emsp;&emsp;<code>NEW</code><br>&emsp;&emsp;&emsp;&emsp;<code>ESTABLISHED</code><br>&emsp;&emsp;&emsp;&emsp;<code>RELATED</code><br>&emsp;&emsp;&emsp;&emsp;<code>INVALID</code><br>æ‰€ä»¥æˆ‘ä»¬å¯¹äºåˆšæ‰çš„QA1ï¼Œå¯ä»¥å¢åŠ çŠ¶æ€æ£€æµ‹ã€‚æ¯”å¦‚è¿›æ¥çš„åªå…è®¸çŠ¶æ€ä¸º<code>NEW</code>å’Œ<code>ESTABLISHED</code>çš„è¿›æ¥ï¼Œå‡ºå»åªå…è®¸<code>ESTABLISHED</code>çš„çŠ¶æ€å‡ºå»ï¼Œè¿™å°±å¯ä»¥å°†æ¯”è¾ƒå¸¸è§çš„åå¼¹å¼æœ¨é©¬æœ‰å¾ˆå¥½çš„æ§åˆ¶æœºåˆ¶ã€‚  </p><p>å¯¹äºQA1çš„æ‰©å±•ï¼š<br>è¿›æ¥çš„æ‹’ç»å‡ºå»çš„å…è®¸ï¼Œè¿›æ¥çš„åªå…è®¸ESTABLISHEDè¿›æ¥ï¼Œå‡ºå»åªå…è®¸ESTABLISHEDå‡ºå»ã€‚é»˜è®¤è§„åˆ™éƒ½ä½¿ç”¨æ‹’ç»<br><code>iptables -L -n --line-number</code>ï¼šæŸ¥çœ‹ä¹‹å‰çš„è§„åˆ™ä½äºç¬¬å‡ è¡Œ<br>æ”¹å†™INPUT  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">iptables -R INPUT <span class="token number">2</span> -s <span class="token number">172.16</span>.0.0/16 -d <span class="token number">172.16</span>.100.1 -p tcp --dport <span class="token number">22</span> -m state --state NEW,ESTABLISHED -j ACCEPTiptables -R OUTPUT <span class="token number">1</span> -m state --state ESTABLISHED -j ACCEPT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ­¤æ—¶å¦‚æœæƒ³å†æ”¾è¡Œä¸€ä¸ª80ç«¯å£å¦‚ä½•æ”¾è¡Œå‘¢ï¼Ÿ  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">iptables -A INPUT -d <span class="token number">172.16</span>.100.1 -p tcp --dport <span class="token number">80</span> -m state --state NEW,ESTABLISHED -j ACCEPTiptables -R INPUT <span class="token number">1</span> -d <span class="token number">172.16</span>.100.1 -p udp --dport <span class="token number">53</span> -j ACCEPT<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>Q2ï¼šå‡å¦‚æˆ‘ä»¬å…è®¸è‡ªå·±pingåˆ«äººï¼Œä½†æ˜¯åˆ«äººpingè‡ªå·±pingä¸é€šå¦‚ä½•å®ç°å‘¢ï¼Ÿ<br>A2ï¼šå¯¹äºpingè¿™ä¸ªåè®®ï¼Œè¿›æ¥çš„ä¸º<code>8</code>ï¼ˆpingï¼‰ï¼Œå‡ºå»çš„ä¸º<code>0</code>(å“åº”).æˆ‘ä»¬ä¸ºäº†è¾¾åˆ°ç›®çš„ï¼Œéœ€è¦8å‡ºå»,å…è®¸<code>0</code>è¿›æ¥  </p><p>åœ¨å‡ºå»çš„ç«¯å£ä¸Šï¼š<code>iptables -A OUTPUT -p icmp --icmp-type 8 -j ACCEPT</code><br>åœ¨è¿›æ¥çš„ç«¯å£ä¸Šï¼š<code>iptables -A INPUT -p icmp --icmp-type 0 -j ACCEPT</code>  </p><p>å°æ‰©å±•ï¼šå¯¹äº<code>127.0.0.1</code>æ¯”è¾ƒç‰¹æ®Šï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®å®šä¹‰å®ƒ<br><code>iptables -A INPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT</code><br><code>iptables -A OUTPUT -s 127.0.0.1 -d 127.0.0.1 -j ACCEPT</code>  </p><h1 id="SNATå’ŒDNATçš„å®ç°"><a href="#SNATå’ŒDNATçš„å®ç°" class="headerlink" title="SNATå’ŒDNATçš„å®ç°"></a>SNATå’ŒDNATçš„å®ç°</h1><p>&emsp;&emsp;ç”±äºæˆ‘ä»¬ç°åœ¨IPåœ°å€ååˆ†ç´§ä¿ï¼Œå·²ç»åˆ†é…å®Œäº†ï¼Œè¿™å°±å¯¼è‡´æˆ‘ä»¬å¿…é¡»è¦è¿›è¡Œåœ°å€è½¬æ¢ï¼Œæ¥èŠ‚çº¦æˆ‘ä»¬ä»…å‰©çš„ä¸€ç‚¹IPèµ„æºã€‚é‚£ä¹ˆé€šè¿‡iptableså¦‚ä½•å®ç°NATçš„åœ°å€è½¬æ¢å‘¢ï¼Ÿ  </p><h2 id="SNATåŸºäºåŸåœ°å€çš„è½¬æ¢"><a href="#SNATåŸºäºåŸåœ°å€çš„è½¬æ¢" class="headerlink" title="SNATåŸºäºåŸåœ°å€çš„è½¬æ¢"></a>SNATåŸºäºåŸåœ°å€çš„è½¬æ¢</h2><p>&emsp;&emsp;åŸºäºåŸåœ°å€çš„è½¬æ¢ä¸€èˆ¬ç”¨åœ¨æˆ‘ä»¬çš„è®¸å¤šå†…ç½‘ç”¨æˆ·é€šè¿‡ä¸€ä¸ªå¤–ç½‘çš„å£ä¸Šç½‘çš„æ—¶å€™ï¼Œè¿™æ—¶æˆ‘ä»¬å°†æˆ‘ä»¬å†…ç½‘çš„åœ°å€è½¬æ¢ä¸ºä¸€ä¸ªå¤–ç½‘çš„IPï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°è¿æ¥å…¶ä»–å¤–ç½‘IPçš„åŠŸèƒ½ã€‚  </p><p>æ‰€ä»¥æˆ‘ä»¬åœ¨iptablesä¸­å°±è¦å®šä¹‰åˆ°åº•å¦‚ä½•è½¬æ¢ï¼š  </p><p>å®šä¹‰çš„æ ·å¼ï¼š<br>&emsp;&emsp;æ¯”å¦‚æˆ‘ä»¬ç°åœ¨è¦å°†æ‰€æœ‰<code>192.168.10.0</code>ç½‘æ®µçš„IPåœ¨ç»è¿‡çš„æ—¶å€™å…¨éƒ½è½¬æ¢æˆ<code>172.16.100.1</code>è¿™ä¸ªå‡è®¾å‡ºæ¥çš„å¤–ç½‘åœ°å€ï¼š<br><code>iptables -t nat -A POSTROUTING -s 192.168.10.0/24 -j SNAT --to-source 172.16.100.1</code><br>&emsp;&emsp;è¿™æ ·ï¼Œåªè¦æ˜¯æ¥è‡ªæœ¬åœ°ç½‘ç»œçš„è¯•å›¾é€šè¿‡ç½‘å¡è®¿é—®ç½‘ç»œçš„ï¼Œéƒ½ä¼šè¢«ç»Ÿç»Ÿè½¬æ¢æˆ172.16.100.1è¿™ä¸ªIPï¼Œé‚£ä¹ˆï¼Œå¦‚æœ<code>172.16.100.1</code>ä¸æ˜¯å›ºå®šçš„æ€ä¹ˆåŠï¼Ÿ<br>&emsp;&emsp;æˆ‘ä»¬éƒ½çŸ¥é“å½“æˆ‘ä»¬ä½¿ç”¨è”é€šæˆ–è€…ç”µä¿¡ä¸Šç½‘çš„æ—¶å€™ï¼Œä¸€èˆ¬å®ƒéƒ½ä¼šåœ¨æ¯æ¬¡ä½ å¼€æœºçš„æ—¶å€™éšæœºç”Ÿæˆä¸€ä¸ªå¤–ç½‘çš„IPï¼Œæ„æ€å°±æ˜¯å¤–ç½‘åœ°å€æ˜¯åŠ¨æ€å˜æ¢çš„ã€‚è¿™æ—¶æˆ‘ä»¬å°±è¦å°†å¤–ç½‘åœ°å€æ¢æˆ MASQUERADE(åŠ¨æ€ä¼ªè£…):å®ƒå¯ä»¥å®ç°è‡ªåŠ¨å¯»æ‰¾åˆ°å¤–ç½‘åœ°å€ï¼Œè€Œè‡ªåŠ¨å°†å…¶æ”¹ä¸ºæ­£ç¡®çš„å¤–ç½‘åœ°å€ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±éœ€è¦è¿™æ ·è®¾ç½®ï¼š<br><code>iptables -t nat -A POSTROUTING -s 192.168.10.0/24 -j MASQUERADE</code><br>è¿™é‡Œè¦æ³¨æ„ï¼šåœ°å€ä¼ªè£…å¹¶ä¸é€‚ç”¨äºæ‰€æœ‰çš„åœ°æ–¹ã€‚  </p><h2 id="DNATç›®æ ‡åœ°å€è½¬æ¢"><a href="#DNATç›®æ ‡åœ°å€è½¬æ¢" class="headerlink" title="DNATç›®æ ‡åœ°å€è½¬æ¢"></a>DNATç›®æ ‡åœ°å€è½¬æ¢</h2><p>&emsp;&emsp;å¯¹äºç›®æ ‡åœ°å€è½¬æ¢ï¼Œæ•°æ®æµå‘æ˜¯ä»å¤–å‘å†…çš„ï¼Œå¤–é¢çš„æ˜¯å®¢æˆ·ç«¯ï¼Œé‡Œé¢çš„æ˜¯æœåŠ¡å™¨ç«¯é€šè¿‡ç›®æ ‡åœ°å€è½¬æ¢ï¼Œæˆ‘ä»¬å¯ä»¥è®©å¤–é¢çš„ipé€šè¿‡æˆ‘ä»¬å¯¹å¤–çš„å¤–ç½‘ipæ¥è®¿é—®æˆ‘ä»¬æœåŠ¡å™¨ä¸åŒçš„æœåŠ¡å™¨ï¼Œè€Œæˆ‘ä»¬çš„æœåŠ¡å´æ”¾åœ¨å†…ç½‘æœåŠ¡å™¨çš„ä¸åŒçš„æœåŠ¡å™¨ä¸Šã€‚  </p><p>å¦‚ä½•åšç›®æ ‡åœ°å€è½¬æ¢å‘¢ï¼Ÿï¼š<br><code>iptables -t nat -A PREROUTING -d 192.168.10.18 -p tcp --dport 80 -j DNAT --todestination 172.16.100.2</code><br>ç›®æ ‡åœ°å€è½¬æ¢è¦åšåœ¨åˆ°è¾¾ç½‘å¡ä¹‹å‰è¿›è¡Œè½¬æ¢,æ‰€ä»¥è¦åšåœ¨PREROUTINGè¿™ä¸ªä½ç½®ä¸Š  </p><h1 id="æ§åˆ¶è§„åˆ™çš„å­˜æ”¾ä»¥åŠå¼€å¯"><a href="#æ§åˆ¶è§„åˆ™çš„å­˜æ”¾ä»¥åŠå¼€å¯" class="headerlink" title="æ§åˆ¶è§„åˆ™çš„å­˜æ”¾ä»¥åŠå¼€å¯"></a>æ§åˆ¶è§„åˆ™çš„å­˜æ”¾ä»¥åŠå¼€å¯</h1><p>&emsp;&emsp;æ³¨æ„ï¼šä½ æ‰€å®šä¹‰çš„æ‰€æœ‰å†…å®¹ï¼Œå½“ä½ é‡å¯çš„æ—¶å€™éƒ½ä¼šå¤±æ•ˆï¼Œè¦æƒ³æˆ‘ä»¬èƒ½å¤Ÿç”Ÿæ•ˆï¼Œéœ€è¦ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤å°†å®ƒä¿å­˜èµ·æ¥  </p><ol><li><p><code>service iptables save</code>å‘½ä»¤<br>å®ƒä¼šä¿å­˜åœ¨<code>/etc/sysconfig/iptables</code>è¿™ä¸ªæ–‡ä»¶ä¸­  </p></li><li><p><code>iptables-save</code>å‘½ä»¤<br><code>iptables-save &gt; /etc/sysconfig/iptables</code>  </p></li><li><p><code>iptables-restore</code>å‘½ä»¤<br>å¼€æœºçš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨åŠ è½½<code>/etc/sysconfig/iptabels</code><br>å¦‚æœå¼€æœºä¸èƒ½åŠ è½½æˆ–è€…æ²¡æœ‰åŠ è½½ï¼Œè€Œä½ æƒ³è®©ä¸€ä¸ªè‡ªå·±å†™çš„é…ç½®æ–‡ä»¶ï¼ˆå‡è®¾ä¸ºiptables.2ï¼‰æ‰‹åŠ¨ç”Ÿæ•ˆçš„è¯ï¼š<br><code>iptables-restore &lt; /etc/sysconfig/iptables.2</code><br>åˆ™å®Œæˆäº†å°†iptablesä¸­å®šä¹‰çš„è§„åˆ™æ‰‹åŠ¨ç”Ÿæ•ˆ  </p></li></ol><hr><h1 id="é˜²ç«å¢™firewallçš„åŸºæœ¬æ¦‚è¿°"><a href="#é˜²ç«å¢™firewallçš„åŸºæœ¬æ¦‚è¿°" class="headerlink" title="é˜²ç«å¢™firewallçš„åŸºæœ¬æ¦‚è¿°"></a>é˜²ç«å¢™firewallçš„åŸºæœ¬æ¦‚è¿°</h1><p>&emsp;&emsp;ç°åœ¨çš„RedHat/CentOS7ç‰ˆæœ¬é»˜è®¤éƒ½ä½¿ç”¨firewallé˜²ç«å¢™äº†ï¼Œfirewallçš„é…æ–¹æ³•å¤§è‡´å¯ä»¥åˆ†ä¸ºå›¾å½¢åŒ–å’Œå‘½ä»¤è¡Œã€‚firewalldè·Ÿiptablesæ¯”èµ·æ¥ï¼Œä¸å¥½çš„åœ°æ–¹æ˜¯æ¯ä¸ªæœåŠ¡éƒ½éœ€è¦å»è®¾ç½®æ‰èƒ½æ”¾è¡Œï¼Œå› ä¸ºé»˜è®¤æ˜¯æ‹’ç»ã€‚è€Œiptablesé‡Œé»˜è®¤æ˜¯æ¯ä¸ªæœåŠ¡æ˜¯å…è®¸ï¼Œéœ€è¦æ‹’ç»çš„æ‰å»é™åˆ¶ã€‚<br>&emsp;&emsp;firewalldè‡ªèº«å¹¶ä¸å…·å¤‡é˜²ç«å¢™çš„åŠŸèƒ½ï¼Œè€Œæ˜¯å’Œiptablesä¸€æ ·éœ€è¦é€šè¿‡å†…æ ¸çš„netfilteræ¥å®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´firewalldå’Œ iptablesä¸€æ ·ï¼Œä»–ä»¬çš„ä½œç”¨éƒ½æ˜¯ç”¨äºç»´æŠ¤è§„åˆ™ï¼Œè€ŒçœŸæ­£ä½¿ç”¨è§„åˆ™å¹²æ´»çš„æ˜¯å†…æ ¸çš„netfilterï¼Œåªä¸è¿‡firewalldå’Œiptablesçš„ç»“æ„ä»¥åŠä½¿ç”¨æ–¹æ³•ä¸ä¸€æ ·ç½¢äº†ã€‚  </p><h1 id="é˜²ç«å¢™ä½¿ç”¨åŒºåŸŸç®¡ç†"><a href="#é˜²ç«å¢™ä½¿ç”¨åŒºåŸŸç®¡ç†" class="headerlink" title="é˜²ç«å¢™ä½¿ç”¨åŒºåŸŸç®¡ç†"></a>é˜²ç«å¢™ä½¿ç”¨åŒºåŸŸç®¡ç†</h1><p><img src="/medias/drawing-bed/others/2.jpg"></p><pre class="line-numbers language-none"><code class="language-none">é˜»å¡åŒºåŸŸï¼ˆblockï¼‰ï¼šä»»ä½•ä¼ å…¥çš„ç½‘ç»œæ•°æ®åŒ…éƒ½å°†è¢«é˜»æ­¢ã€‚  å·¥ä½œåŒºåŸŸï¼ˆworkï¼‰ï¼šç›¸ä¿¡ç½‘ç»œä¸Šçš„å…¶ä»–è®¡ç®—æœºï¼Œä¸ä¼šæŸå®³ä½ çš„è®¡ç®—æœºã€‚  å®¶åº­åŒºåŸŸï¼ˆhomeï¼‰ï¼šç›¸ä¿¡ç½‘ç»œä¸Šçš„å…¶ä»–è®¡ç®—æœºï¼Œä¸ä¼šæŸå®³ä½ çš„è®¡ç®—æœºã€‚  å…¬å…±åŒºåŸŸï¼ˆpublicï¼‰ï¼šä¸ç›¸ä¿¡ç½‘ç»œä¸Šçš„ä»»ä½•è®¡ç®—æœºï¼Œåªæœ‰é€‰æ‹©æ¥å—ä¼ å…¥çš„ç½‘ç»œè¿æ¥ã€‚  éš”ç¦»åŒºåŸŸï¼ˆDMZï¼‰ï¼šéš”ç¦»åŒºåŸŸä¹Ÿç§°ä¸ºéå†›äº‹åŒºåŸŸï¼Œå†…å¤–ç½‘ç»œä¹‹é—´å¢åŠ çš„ä¸€å±‚ç½‘ç»œï¼Œèµ·åˆ°ç¼“å†²ä½œç”¨ã€‚å¯¹äºéš”ç¦»åŒºåŸŸï¼Œåªæœ‰é€‰æ‹©æ¥å—ä¼ å…¥çš„ç½‘ç»œè¿æ¥ã€‚  ä¿¡ä»»åŒºåŸŸï¼ˆtrustedï¼‰ï¼šæ‰€æœ‰çš„ç½‘ç»œè¿æ¥éƒ½å¯ä»¥æ¥å—ã€‚  ä¸¢å¼ƒåŒºåŸŸï¼ˆdropï¼‰ï¼šä»»ä½•ä¼ å…¥çš„ç½‘ç»œè¿æ¥éƒ½è¢«æ‹’ç»ã€‚  å†…éƒ¨åŒºåŸŸï¼ˆinternalï¼‰ï¼šä¿¡ä»»ç½‘ç»œä¸Šçš„å…¶ä»–è®¡ç®—æœºï¼Œä¸ä¼šæŸå®³ä½ çš„è®¡ç®—æœºã€‚åªæœ‰é€‰æ‹©æ¥å—ä¼ å…¥çš„ç½‘ç»œè¿æ¥ã€‚  å¤–éƒ¨åŒºåŸŸï¼ˆexternalï¼‰ï¼šä¸ç›¸ä¿¡ç½‘ç»œä¸Šçš„å…¶ä»–è®¡ç®—æœºï¼Œä¸ä¼šæŸå®³ä½ çš„è®¡ç®—æœºã€‚åªæœ‰é€‰æ‹©æ¥å—ä¼ å…¥çš„ç½‘ç»œè¿æ¥ã€‚    æ³¨ï¼šFirewallDçš„é»˜è®¤åŒºåŸŸæ˜¯publicã€‚  firewalldé»˜è®¤æä¾›äº†ä¹ä¸ªzoneé…ç½®æ–‡ä»¶ï¼šblock.xmlã€dmz.xmlã€drop.xmlã€external.xmlã€ home.xmlã€internal.xmlã€public.xmlã€trusted.xmlã€work.xmlï¼Œä»–ä»¬éƒ½ä¿å­˜åœ¨&quot;&#x2F;usr&#x2F;lib &#x2F;firewalld&#x2F;zones&#x2F;&quot;ç›®å½•ä¸‹ã€‚  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/others/3.jpg"></p><h1 id="é˜²ç«å¢™åŸºæœ¬æŒ‡ä»¤å‚æ•°"><a href="#é˜²ç«å¢™åŸºæœ¬æŒ‡ä»¤å‚æ•°" class="headerlink" title="é˜²ç«å¢™åŸºæœ¬æŒ‡ä»¤å‚æ•°"></a>é˜²ç«å¢™åŸºæœ¬æŒ‡ä»¤å‚æ•°</h1><p><code>firewall-cmd</code> #æ˜¯å‘½ä»¤è¡Œé…ç½®<br><code>firewall-config</code> #æ˜¯å›¾å½¢åŒ–é…ç½® é»˜è®¤ä¸­æ–‡ä¸æ”¯æŒç¦è§„åˆ™çš„åŠ¨ä½œè®¾ç½®éœ€è¦<code>LANG=C</code>è½¬ä¸€ä¸‹è‹±æ–‡ASCIIç¯å¢ƒ  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">firewall -cmd<span class="token comment"># åŸŸzoneç›¸å…³çš„å‘½ä»¤</span>--get-default-zone  æŸ¥è¯¢é»˜è®¤çš„åŒºåŸŸåç§°--set-default-zone<span class="token operator">=</span><span class="token operator">&lt;</span>åŒºåŸŸåç§°<span class="token operator">></span>   è®¾ç½®é»˜è®¤çš„åŒºåŸŸ--get-active-zones  æ˜¾ç¤ºå½“å‰æ­£åœ¨ä½¿ç”¨çš„åŒºåŸŸä¸ç½‘å¡åç§°--get-zones æ˜¾ç¤ºæ€»å…±å¯ç”¨çš„åŒºåŸŸ--new-zone<span class="token operator">=</span> æ–°å¢åŒºåŸŸ<span class="token comment"># servicesç®¡ç†çš„å‘½ä»¤</span>--get-services  æ˜¾ç¤ºé¢„å…ˆå®šä¹‰çš„æœåŠ¡--add-service<span class="token operator">=</span><span class="token operator">&lt;</span>æœåŠ¡å<span class="token operator">></span> è®¾ç½®é»˜è®¤åŒºåŸŸå…è®¸è¯¥æœåŠ¡çš„æµé‡--remove-service<span class="token operator">=</span><span class="token operator">&lt;</span>æœåŠ¡å<span class="token operator">></span>  è®¾ç½®é»˜è®¤åŒºåŸŸä¸å†å…è®¸è¯¥æœåŠ¡çš„æµé‡<span class="token comment"># Portç›¸å…³å‘½ä»¤</span>--add-port<span class="token operator">=</span><span class="token operator">&lt;</span>ç«¯å£å·/åè®®<span class="token operator">></span> è®¾ç½®é»˜è®¤åŒºåŸŸå…è®¸è¯¥ç«¯å£çš„æµé‡--remove-port<span class="token operator">=</span><span class="token operator">&lt;</span>ç«¯å£å·/åè®®<span class="token operator">></span>  è®¾ç½®é»˜è®¤åŒºåŸŸä¸å†å…è®¸è¯¥ç«¯å£çš„æµé‡<span class="token comment"># ç½‘å¡ç›¸å…³çš„å‘½ä»¤</span>--add-interface<span class="token operator">=</span><span class="token operator">&lt;</span>ç½‘å¡åç§°<span class="token operator">></span>  å°†æºè‡ªè¯¥ç½‘å¡çš„æ‰€æœ‰æµé‡éƒ½å¯¼å‘æŸä¸ªæŒ‡å®šåŒºåŸŸ--change-interface<span class="token operator">=</span><span class="token operator">&lt;</span>ç½‘å¡åç§°<span class="token operator">></span>   å°†æŸä¸ªç½‘å¡ä¸åŒºåŸŸè¿›è¡Œå…³è”<span class="token comment"># æŸ¥çœ‹æ‰€æœ‰è§„åˆ™çš„å‘½ä»¤</span>--list-all  æ˜¾ç¤ºå½“å‰åŒºåŸŸçš„ç½‘å¡é…ç½®å‚æ•°ã€èµ„æºã€ç«¯å£ä»¥åŠæœåŠ¡ç­‰ä¿¡æ¯åŠ ä¸Š--permanent æŸ¥çœ‹æ°¸ä¹…ç”Ÿæ•ˆçš„é…ç½®å‚æ•°ã€èµ„æºã€ç«¯å£ä»¥åŠæœåŠ¡ç­‰ä¿¡æ¯<span class="token comment"># é‡è½½é˜²ç«å¢™çš„ç­–ç•¥</span>--reload    è®©â€œæ°¸ä¹…ç”Ÿæ•ˆâ€çš„é…ç½®è§„åˆ™ç«‹å³ç”Ÿæ•ˆï¼Œå¹¶è¦†ç›–å½“å‰çš„é…ç½®è§„åˆ™<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é˜²ç«å¢™åŒºåŸŸé…ç½®ç­–ç•¥"><a href="#é˜²ç«å¢™åŒºåŸŸé…ç½®ç­–ç•¥" class="headerlink" title="é˜²ç«å¢™åŒºåŸŸé…ç½®ç­–ç•¥"></a>é˜²ç«å¢™åŒºåŸŸé…ç½®ç­–ç•¥</h1><p><img src="/medias/drawing-bed/others/4.jpg"></p><p>å¼€å§‹ä¹‹å‰ç¡®è®¤é˜²ç«å¢™æ˜¯å¼€å¯çš„çŠ¶æ€  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># zoneåŒºåŸŸç›¸å…³æŒ‡ä»¤</span>//æŸ¥çœ‹å½“å‰é»˜è®¤åŒºåŸŸ<span class="token punctuation">[</span>root@server ~<span class="token punctuation">]</span><span class="token comment"># firewall-cmd --get-default-zone </span>public//æŸ¥çœ‹å½“å‰æ´»è·ƒçš„åŒºåŸŸ<span class="token punctuation">[</span>root@server ~<span class="token punctuation">]</span><span class="token comment"># firewall-cmd --get-active-zone</span>publicinterfaces: eth0 eth1 //å°†å½“å‰é»˜è®¤åŒºåŸŸä¿®æ”¹ä¸ºdropfirewall-cmd --set-default-zone<span class="token operator">=</span>drop//å°†ç½‘ç»œæ¥å£å…³è”è‡³dropåŒºåŸŸfirewall-cmd --permanent  --change-interface<span class="token operator">=</span>eth0 --zone<span class="token operator">=</span>drop//å°†192.168.122.0/24ç½‘æ®µåŠ å…¥trustedç™½åå•firewall-cmd --permanent --add-source<span class="token operator">=</span><span class="token number">192.168</span>.122.0/24 --zone<span class="token operator">=</span>trusted//é‡è½½é˜²ç«å¢™firewall-cmd --reloadsuccess//æŸ¥çœ‹å½“å‰å¤„äºæ´»åŠ¨çš„åŒºåŸŸfirewall-cmd --get-active-zonesdrop    <span class="token comment"># é»˜è®¤åŒºåŸŸ, eth0æ¥å£æµé‡éƒ½ç”±dropåŒºåŸŸè¿‡æ»¤</span>interfaces: eth0trusted <span class="token comment"># æ•°æ®åŒ…çš„æºIPæ˜¯192.168.122.0/24ç½‘æ®µèµ°trustedåŒºåŸŸ</span>sources: <span class="token number">192.168</span>.122.0/24<span class="token comment"># ä½¿ç”¨firewalldä¸­å„ä¸ªåŒºåŸŸçš„åº”ç”¨</span>//å…è®¸10.0.0.1IPåœ°å€èƒ½è®¿é—®sshfirewall-cmd --add-source<span class="token operator">=</span><span class="token number">10.0</span>.0.0/24 --permanent --zone<span class="token operator">=</span>public <span class="token comment">#é»˜è®¤zoneåœ¨public</span>firewall-cmd --reload//å°†192.168.20.0ç½‘æ®µåŠ å…¥ç™½åå•firewall-cmd --add-source<span class="token operator">=</span><span class="token number">192.168</span>.20.0/24 --permanent --zone<span class="token operator">=</span>trustedfirewall-cmd --reload//æŸ¥çœ‹è®¾ç½®é¡¹firewall-cmd --get-active-zonedropinterfaces: eth0 eth1publicsources: <span class="token number">10.0</span>.0.1/32trustedsources: <span class="token number">192.168</span>.20.0/24<span class="token comment"># æŸ¥è¯¢firewaldæŒ‡å®šåŒºåŸŸçš„æ˜ç»†</span>firewall-cmd  --list-all --zone<span class="token operator">=</span>drop <span class="token comment">#æŒ‡æ˜è¦æŸ¥çš„zone åŠ ä¸Š--permanentæŸ¥çœ‹æ°¸ä¹…ç”Ÿæ•ˆçš„åŒºåŸŸçš„æ˜ç»†</span>drop <span class="token punctuation">(</span>active<span class="token punctuation">)</span>target: DROPicmp-block-inversion: nointerfaces: eth0 eth1sources:services:ports:protocols:masquerade: noforward-ports:source-ports:icmp-blocks:rich rules:<span class="token comment"># æŸ¥è¯¢publicåŒºåŸŸæ˜¯å¦å…è®¸è¯·æ±‚SSHåè®®çš„æµé‡ #å¯¹åº”æœåŠ¡å¯¹åº”çŠ¶æ€</span>firewall-cmd --zone<span class="token operator">=</span>public --query-service<span class="token operator">=</span>ssh<span class="token function">yes</span><span class="token comment"># æ¢å¤é»˜è®¤è§„åˆ™æ“ä½œ</span>firewall-cmd --set-default-zone<span class="token operator">=</span>publicfirewall-cmd --remove-source<span class="token operator">=</span><span class="token number">192.168</span>.1.0/24 --zone<span class="token operator">=</span>public --permanentfirewall-cmd --remove-source<span class="token operator">=</span><span class="token number">192.168</span>.1.0/24 --zone<span class="token operator">=</span>trusted --permanentfirewall-cmd --reload<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é˜²ç«å¢™ç«¯å£è®¿é—®ç­–ç•¥"><a href="#é˜²ç«å¢™ç«¯å£è®¿é—®ç­–ç•¥" class="headerlink" title="é˜²ç«å¢™ç«¯å£è®¿é—®ç­–ç•¥"></a>é˜²ç«å¢™ç«¯å£è®¿é—®ç­–ç•¥</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¼€æ”¾80ç«¯å£</span>firewall-cmd --permanent --add-port<span class="token operator">=</span><span class="token number">80</span>/udp --add-port<span class="token operator">=</span><span class="token number">80</span>/tcpfirewall-cmd --reload <span class="token comment">#é‡è½½é…ç½®ç”Ÿæ•ˆ</span>firewall-cmd --list-ports <span class="token comment">#æ£€æŸ¥å¼€æ”¾çš„ç«¯å£</span><span class="token comment"># é…ç½®é˜²ç«å¢™, è®¿é—®80udpçš„ç«¯å£æµé‡è®¾ç½®ä¸ºæ°¸ä¹…æ‹’ç»ï¼Œå¹¶ç«‹å³ç”Ÿæ•ˆ</span>firewall-cmd --permanent --remove-port<span class="token operator">=</span><span class="token number">80</span>/udpfirewall-cmd --reload <span class="token operator">&amp;&amp;</span> firewall-cmd --list-ports <span class="token comment">#é‡è½½å¹¶æŸ¥çœ‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é˜²ç«å¢™æœåŠ¡è®¿é—®ç­–ç•¥"><a href="#é˜²ç«å¢™æœåŠ¡è®¿é—®ç­–ç•¥" class="headerlink" title="é˜²ç«å¢™æœåŠ¡è®¿é—®ç­–ç•¥"></a>é˜²ç«å¢™æœåŠ¡è®¿é—®ç­–ç•¥</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å¼€æ”¾httpdæœåŠ¡</span>firewall-cmd --permanent --add-service<span class="token operator">=</span>http --add-service<span class="token operator">=</span>httpsfirewall-cmd --reload <span class="token punctuation">;</span> firewall-cmd --list-services <span class="token comment"># é‡è½½ç”Ÿæ•ˆå¹¶æŸ¥çœ‹</span><span class="token comment"># é…ç½®é˜²ç«å¢™, è¯·æ±‚httpsåè®®çš„æµé‡è®¾ç½®ä¸ºæ°¸ä¹…æ‹’ç»ï¼Œå¹¶ç«‹å³ç”Ÿæ•ˆ</span>firewall-cmd --permanent --remove-service<span class="token operator">=</span>https firewall-cmd --reload <span class="token punctuation">;</span> firewall-cmd --list-services <span class="token comment"># é‡è½½ç”Ÿæ•ˆå¹¶æŸ¥çœ‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é˜²ç«å¢™ç«¯å£è½¬å‘ç­–ç•¥"><a href="#é˜²ç«å¢™ç«¯å£è½¬å‘ç­–ç•¥" class="headerlink" title="é˜²ç«å¢™ç«¯å£è½¬å‘ç­–ç•¥"></a>é˜²ç«å¢™ç«¯å£è½¬å‘ç­–ç•¥</h1><p>ç«¯å£è½¬å‘éœ€è¦ç”¨åˆ°<code>forward-port</code>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">è½¬å‘æœ¬æœº80/tcpç«¯å£çš„æµé‡è‡³8080/tcpç«¯å£ï¼Œè¦æ±‚å½“å‰å’Œé•¿æœŸæœ‰æ•ˆfirewall-cmd --permanent --zone<span class="token operator">=</span>public --add-forward-port<span class="token operator">=</span>port<span class="token operator">=</span><span class="token number">80</span>:proto<span class="token operator">=</span>tcp:to <span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token number">8080</span>:toaddr<span class="token operator">=</span><span class="token number">10.0</span>.0.61ç§»é™¤è½¬å‘firewall-cmd --remove-forward-port<span class="token operator">=</span>port<span class="token operator">=</span><span class="token number">80</span>:proto<span class="token operator">=</span>tcp:toport<span class="token operator">=</span><span class="token number">8080</span>:toaddr<span class="token operator">=</span><span class="token number">10.0</span>.0.61å¼€å¯IPä¼ªè£…firewall-cmd --add-masquerade --permanent <span class="token comment">#IPåœ°å€è½¬æ¢</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é˜²ç«å¢™å¯Œè§„åˆ™ç­–ç•¥"><a href="#é˜²ç«å¢™å¯Œè§„åˆ™ç­–ç•¥" class="headerlink" title="é˜²ç«å¢™å¯Œè§„åˆ™ç­–ç•¥"></a>é˜²ç«å¢™å¯Œè§„åˆ™ç­–ç•¥</h1><p>åˆ°é‡ç‚¹äº†ï¼Œè¿™é‡Œä¸Šé¢çš„æ¡ç›®å¯Œè§„åˆ™éƒ½å¯å®ç°<br>å…·ä½“é…ç½®æ¡ˆä¾‹æŸ¥è¯¢<code>firewalld.richlanguage</code>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">//åŒºé‡Œçš„å¯Œè§„åˆ™æŒ‰å…ˆåé¡ºåºåŒ¹é…ï¼ŒæŒ‰å…ˆåŒ¹é…åˆ°çš„è§„åˆ™ç”Ÿæ•ˆã€‚<span class="token comment">#firewall-cmd â†“</span>--add-rich-rule<span class="token operator">=</span><span class="token string">'&lt;RULE>'</span>    //åœ¨æŒ‡å®šçš„åŒºæ·»åŠ ä¸€æ¡å¯Œè§„åˆ™--remove-rich-rule<span class="token operator">=</span><span class="token string">'&lt;RULE>'</span> //åœ¨æŒ‡å®šçš„åŒºåˆ é™¤ä¸€æ¡å¯Œè§„åˆ™--query-rich-rule<span class="token operator">=</span><span class="token string">'&lt;RULE>'</span>  //æ‰¾åˆ°è§„åˆ™è¿”å›0 ï¼Œæ‰¾ä¸åˆ°è¿”å›1--list-rich-rules       //åˆ—å‡ºæŒ‡å®šåŒºé‡Œçš„æ‰€æœ‰å¯Œè§„åˆ™--list-all å’Œ --list-all-zones ä¹Ÿèƒ½åˆ—å‡ºå­˜åœ¨çš„å¯Œè§„åˆ™//åœ¨192.168.0.0/24è¿™ä¸ªæ®µé‡Œå¯ä»¥è®¿é—®tftpæœåŠ¡rule <span class="token assign-left variable">family</span><span class="token operator">=</span><span class="token string">"ipv4"</span> <span class="token builtin class-name">source</span> <span class="token assign-left variable">address</span><span class="token operator">=</span><span class="token string">"192.168.0.0/24"</span> <span class="token function">service</span> <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">"tftp"</span> log <span class="token assign-left variable">prefix</span><span class="token operator">=</span><span class="token string">"tftp"</span> accept//æ¥è‡ª192.168.0.0/24è¿™ä¸ªæ®µçš„8080ç«¯å£æ•°æ®è½¬å‘åˆ°æœ¬åœ°çš„80ç«¯å£rule <span class="token assign-left variable">family</span><span class="token operator">=</span><span class="token string">"ipv4"</span> <span class="token builtin class-name">source</span> <span class="token assign-left variable">address</span><span class="token operator">=</span><span class="token string">"192.168.0.0/24"</span> forward-port to-addr<span class="token operator">=</span><span class="token string">"local"</span> to-port<span class="token operator">=</span><span class="token string">"8080"</span> <span class="token assign-left variable">protocol</span><span class="token operator">=</span><span class="token string">"tcp"</span> <span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token string">"80"</span>//æ‹’ç»192.168.2.4è¿™ä¸ªipè®¿é—®rule <span class="token assign-left variable">family</span><span class="token operator">=</span><span class="token string">"ipv4"</span> <span class="token builtin class-name">source</span> <span class="token assign-left variable">address</span><span class="token operator">=</span><span class="token string">"192.168.2.4"</span> drop<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é˜²ç«å¢™å¼€å¯å†…éƒ¨ä¸Šç½‘"><a href="#é˜²ç«å¢™å¼€å¯å†…éƒ¨ä¸Šç½‘" class="headerlink" title="é˜²ç«å¢™å¼€å¯å†…éƒ¨ä¸Šç½‘"></a>é˜²ç«å¢™å¼€å¯å†…éƒ¨ä¸Šç½‘</h1><p>firewalldé˜²ç«å¢™å¼€å¯ipä¼ªè£…  </p><ol><li><p>ç½‘å¡é»˜è®¤æ˜¯åœ¨publicçš„zoneså†…ï¼Œä¹Ÿæ˜¯é»˜è®¤zonesã€‚æ°¸ä¹…æ·»åŠ æºåœ°å€è½¬æ¢åŠŸèƒ½<br><code>firewall-cmd --add-masquerade --permanent</code><br><code>firewall-cmd --reload</code>  </p></li><li><p>å…±äº«ä¸Šç½‘<br>å¼€å¯çš„ipè½¬å‘åï¼Œç›¸å½“äº†ä¸€å°æœ¬åœ°çš„natæœåŠ¡å™¨ã€‚<br>å°†clientçš„ç½‘å…³æŒ‡å‘ä½ é…ç½®çš„ipè½¬å‘æœåŠ¡å™¨çš„IPã€‚<br>åªè¦ä½ çš„ipè½¬å‘æœåŠ¡å™¨å¯ä»¥æ­£å¸¸è§£æå…¬ç½‘IP(dnså¯è§£æå…¬ç½‘åœ°å€)ã€‚<br>ClentæœåŠ¡å™¨å°±å¯ä»¥å€ŸåŠ©IPè½¬å‘æœåŠ¡å™¨å®ç°ä¸Šç½‘ï¼ˆå‰ææ˜¯ä¸­é—´è·¯ç”±å¯è¾¾ï¼‰ã€‚  </p></li></ol><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> é˜²ç«å¢™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dnsåŸŸåè§£æ</title>
      <link href="/posts/61ef.html"/>
      <url>/posts/61ef.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="DNSåŸŸåè§£ææœåŠ¡"><a href="#DNSåŸŸåè§£ææœåŠ¡" class="headerlink" title="DNSåŸŸåè§£ææœåŠ¡"></a>DNSåŸŸåè§£ææœåŠ¡</h1><h2 id="äº†è§£åŸŸå"><a href="#äº†è§£åŸŸå" class="headerlink" title="äº†è§£åŸŸå"></a>äº†è§£åŸŸå</h2><p>&emsp;&emsp;IPåœ°å€æ˜¯Internetä¸»æœºçš„ä½œä¸ºè·¯ç”±å¯»å€ç”¨çš„æ•°å­—å‹æ ‡è¯†ï¼Œäººä¸å®¹æ˜“è®°å¿†ã€‚å› è€Œäº§ç”Ÿäº†åŸŸåï¼Œè¿™ä¸€å­—ç¬¦å‹æ ‡è¯†ã€‚<br>&emsp;&emsp;åŸŸåï¼Œæ˜¯ç”±ä¸€ä¸²ç”¨â€ç‚¹â€åˆ†å‰²çš„å­—ç¬¦ç»„æˆçš„Internetä¸ŠæŸä¸€å°è®¡ç®—æœºæˆ–è®¡ç®—æœºç»„çš„åç§°ï¼Œç”¨äºåœ¨æ•°æ®ä¼ è¾“æ—¶æ ‡è¯†è®¡ç®—æœºçš„ç”µå­æ–¹ä½ã€‚åŸŸåçš„ç›®çš„æ˜¯ä¾¿äºè®°å¿†å’Œæ²Ÿé€šçš„ä¸€ç»„æœåŠ¡å™¨çš„åœ°å€ï¼ˆç½‘ç«™ï¼Œç”µå­é‚®ä»¶ï¼ŒFTPç­‰ï¼‰ã€‚<br>åŸŸåç»„æˆï¼š<br>&emsp;&emsp;é¡¶çº§åŸŸï¼š<br>&emsp;&emsp;&emsp;&emsp;ç»„ç»‡åŸŸï¼š<code>.com</code> <code>.net</code> <code>.org</code> <code>.edu</code><br>&emsp;&emsp;&emsp;&emsp;å›½å®¶åŸŸï¼š<code>.cn</code> <code>.jp</code> <code>.iq</code><br>&emsp;&emsp;äºŒçº§åŸŸï¼šå°±æ˜¯ä¸ªäººç”³è¯·çš„åŸŸå<br>&emsp;&emsp;ä¸‰çº§åŸŸæˆ–ä¸»æœºåï¼šè‡ªå·±æ·»åŠ çš„ä¸‰çº§åŸŸåæˆ–æ ‡è¯†æ­¤ä¸»æœºçš„ä¸»æœºå<br>DNSçš„å‘½åæ–¹å¼ï¼šä¸»æœºå.äºŒçº§åŸŸå.é¡¶çº§åŸŸå.<br>ä¾‹å¦‚ï¼š<code>www.baidu.com.</code><br><code>www.baidu.com</code>ï¼šè¢«ç§°ä¸ºï¼š<code>FQDN</code>ï¼ˆå®Œå…¨åˆæ ¼åŸŸåï¼‰  </p><h2 id="å®¢æˆ·ç«¯è®¿é—®ç«™ç‚¹çš„æ­¥éª¤ï¼š"><a href="#å®¢æˆ·ç«¯è®¿é—®ç«™ç‚¹çš„æ­¥éª¤ï¼š" class="headerlink" title="å®¢æˆ·ç«¯è®¿é—®ç«™ç‚¹çš„æ­¥éª¤ï¼š"></a>å®¢æˆ·ç«¯è®¿é—®ç«™ç‚¹çš„æ­¥éª¤ï¼š</h2><p>&emsp;&emsp;å®¢æˆ·æœºå…ˆè®¿é—®æœ¬åœ°çš„hostsæ–‡ä»¶ï¼ˆ<code>/etc/hosts</code>ï¼‰,å¦‚æœæ²¡æœ‰ï¼Œåˆ™è®¿é—®æœ¬åœ°çš„ç¼“å­˜ï¼Œç¼“å­˜å†æ²¡æœ‰ï¼Œå°±å»ç½‘ç»œä¸­DNSæœåŠ¡å™¨ï¼Œç„¶åDNSæœåŠ¡å™¨è¿”å›ç»“æœä»¥åï¼Œå®¢æˆ·æœºæ‹¿åˆ°ç»“æœä»¥åï¼Œé¦–å…ˆå°†ç»“æœåœ¨è‡ªå·±çš„ç¼“å­˜ä¸­ä¿å­˜ï¼Œç„¶ååœ¨è¿›è¡ŒçœŸæ­£çš„è®¿é—®ã€‚è¿™é‡Œç¼“å­˜èµ·åˆ°äº†åŠ é€Ÿçš„ä½œç”¨ã€‚<br>åœ¨DNSæ•´ä¸ªæŸ¥è¯¢è§£æè¿‡ç¨‹ä¸­ï¼Œå…¶å®åˆ†ä¸ºä¸¤æ®µï¼Œä¸€æ®µæ˜¯ç”¨æˆ·æŒ‡å‘çš„DNSæœåŠ¡å™¨ï¼Œç¬¬äºŒé˜¶æ®µæ˜¯æŒ‡å®šçš„DNSæœåŠ¡å™¨åœ¨ç½‘ç»œä¸Šåˆ†å¸ƒå¼æŸ¥æ‰¾çš„è¿‡ç¨‹ã€‚è¿™ç§å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œæ‰¾è‡ªå·±æŒ‡å®šçš„DNSæœåŠ¡å™¨çš„æŸ¥è¯¢æ–¹å¼å°±å«åšé€’å½’æŸ¥è¯¢ã€‚  </p><p>DNSæŸ¥è¯¢ç±»å‹ï¼š<br>&emsp;&emsp;<code>é€’å½’æŸ¥è¯¢</code>ï¼šç¬¬ä¸€æ®µéƒ½æ˜¯é€’å½’æŸ¥è¯¢<br>&emsp;&emsp;<code>è¿­ä»£æŸ¥è¯¢</code>ï¼šç¬¬äºŒæ®µå°±æ˜¯è¿­ä»£æŸ¥è¯¢ï¼ˆè¿­ä»£ä¹Ÿä¸æ˜¯ç»å¯¹çš„ï¼Œåªæ˜¯å¤§å¤šæ•°æ˜¯è¿­ä»£çš„ï¼‰  </p><h1 id="DNSç³»ç»Ÿçš„ä½œç”¨"><a href="#DNSç³»ç»Ÿçš„ä½œç”¨" class="headerlink" title="DNSç³»ç»Ÿçš„ä½œç”¨"></a>DNSç³»ç»Ÿçš„ä½œç”¨</h1><p>&emsp;&emsp;æ•´ä¸ªInternetå¤§å®¶åº­ä¸­ï¼Œè¿æ¥äº†æ•°ä»¥äº¿è®¡çš„æœåŠ¡å™¨ï¼Œä¸ªäººä¸»æœºï¼Œå…¶ä¸­å¤§éƒ¨åˆ†çš„ç½‘ç«™ã€é‚®ä»¶ç­‰æœåŠ¡å™¨éƒ½ä½¿ç”¨äº†åŸŸåå½¢å¼çš„åœ°å€ï¼Œä¾‹å¦‚ï¼š<code>www.google.com</code>ã€<code>mail.163.com</code>ç­‰ï¼Œå¾ˆæ˜¾ç„¶è¿™ç§åœ°å€å½¢å¼è¦æ¯”ä½¿ç”¨<code>64.233.189.147</code>ã€<code>202.108.33.74</code>çš„IPåœ°å€å½¢å¼æ›´åŠ ç›´è§‚ï¼Œè€Œä¸”æ›´å®¹æ˜“è¢«ç”¨æˆ·è®°ä½ã€‚<br>&emsp;&emsp;DNSç³»ç»Ÿåœ¨ç½‘ç»œä¸­çš„ä½œç”¨å°±æ˜¯ç»´æŠ¤ç€ä¸€ä¸ªâ€åœ°å€æ•°æ®åº“â€ï¼Œå…¶ä¸­è®°å½•äº†å„ç§ä¸»æœºåŸŸåä¸ipåœ°å€çš„å¯¹åº”å…³ç³»ï¼Œä»¥ä¾¿ä¸ºå®¢æˆ·ç¨‹åºæä¾›æ­£å¼æˆ–åå‘çš„åœ°å€æŸ¥è¯¢æœåŠ¡ï¼Œå³æ­£å‘è§£æä¸åå‘è§£æã€‚<br>&emsp;&emsp;æ­£å‘è§£æï¼šæ ¹æ®åŸŸåæŸ¥ipåœ°å€ï¼Œå³å°†æŒ‡å®šçš„åŸŸåè§£æä¸ºç›¸å¯¹åº”çš„ipåœ°å€ï¼ŒåŸŸåçš„æ­£å‘è§£ææ˜¯DNSæœåŠ¡å™¨æœ€åŸºæœ¬çš„åŠŸèƒ½ï¼Œä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„åŠŸèƒ½ã€‚<br>&emsp;&emsp;åå‘è§£æï¼šæ ¹æ®ipåœ°å€æŸ¥è¯¢åŸŸåï¼Œå³å°†æŒ‡å®šçš„ipåœ°å€è§£æä¸ºç›¸å¯¹åº”çš„åŸŸåï¼ŒåŸŸåçš„åå‘è§£æä¸æ˜¯å¾ˆå¸¸ç”¨ï¼Œåªåœ¨ä¸€äº›ç‰¹æ®Šåœºåˆæ‰ä¼šç”¨åˆ°ï¼Œå¦‚å¯ç”¨äºååƒåœ¾é‚®ä»¶çš„éªŒè¯ã€‚<br>æ¯ä¸€å°DNSæœåŠ¡å™¨éƒ½åªè´Ÿè´£ç®¡ç†ä¸€ä¸ªæœ‰é™èŒƒå›´ï¼ˆä¸€ä¸ªæˆ–å‡ ä¸ªåŸŸï¼‰å†…çš„ä¸»æœºåŸŸåå’Œipåœ°å€çš„å¯¹åº”å…³ç³»ï¼Œè¿™äº›ç‰¹å®šçš„DNSåŸŸæˆ–ipåœ°å€æ®µç§°ä¸º<code>zone</code>(åŒºåŸŸ)ã€‚<br>æ ¹æ®åœ°å€è§£æçš„æ–¹å‘ä¸åŒï¼ŒDNSåŒºåŸŸå“åº”åœ°åˆ†ä¸ºæ­£å‘åŒºåŸŸï¼ˆåŒ…å«åŸŸååˆ°ipåœ°å€çš„è§£æè®°å½•ï¼‰å’Œåå‘åŒºåŸŸï¼ˆåŒ…å«IPåœ°å€åˆ°åŸŸåçš„è§£æè®°å½•ï¼‰ã€‚<br>&emsp;&emsp;æ ¹æ®æ‰€ç®¡ç†çš„åŒºåŸŸåœ°å€æ•°æ®çš„æ¥æºä¸åŒï¼ŒDNSç³»ç»Ÿå¯åˆ†ä¸ºä¸åŒçš„ç±»å‹  </p><p>å¸¸è§çš„DNSç±»å‹å¦‚ä¸‹ï¼š<br>&emsp;&emsp;ç¼“å­˜åŸŸåæœåŠ¡å™¨ï¼šåªæä¾›åŸŸåè§£æç»“æ„çš„ç¼“å­˜åŠŸèƒ½ï¼Œç›®åœ°åœ¨äºæé«˜æŸ¥è¯¢é€Ÿåº¦å’Œæ•ˆç‡ï¼Œä½†æ˜¯æ²¡æœ‰è‡ªå·±æ§åˆ¶çš„åŒºåŸŸåœ°å€æ•°æ®ï¼Œæ„å»ºç¼“å­˜åŸŸåæœåŠ¡å™¨æ—¶ï¼Œå¿…é¡»è®¾ç½®æ ¹åŸŸæˆ–æŒ‡å®šå…¶ä»–DNSæœåŠ¡å™¨ä½œä¸ºè§£ææ¥æºã€‚<br>&emsp;&emsp;ä¸»åŸŸåæœåŠ¡å™¨ï¼šç»´æŠ¤æŸä¸€ä¸ªç‰¹å®šDNSåŒºåŸŸçš„åœ°å€æ•°æ®åº“ï¼Œå¯¹å…¶ä¸­çš„è§£æè®°å½•å…·æœ‰ä¸»æ§åˆ¶æƒï¼Œæ˜¯æŒ‡å®šåŒºåŸŸä¸­å”¯ä¸€å­˜åœ¨çš„æƒå¨æœåŠ¡å™¨ã€å®˜æ–¹æœåŠ¡å™¨ã€‚æ„å»ºä¸»åŸŸåæœåŠ¡å™¨æ—¶ï¼Œéœ€è¦è‡ªè¡Œå»ºç«‹æ‰€è´Ÿè´£çš„åœ°å€æ•°æ®æ–‡ä»¶ã€‚<br>&emsp;&emsp;ä»åŸŸåæœåŠ¡å™¨ï¼šä¸ä¸»åŸŸåæœåŠ¡å™¨æä¾›å®Œå…¨ç›¸åŒçš„DNSè§£ææœåŠ¡ï¼Œé€šå¸¸ç”¨äºDNSæœåŠ¡å™¨çš„çƒ­å¤‡ä»½ï¼Œå¯¹å®¢æˆ·æœºæ¥è¯´ï¼Œæ— è®ºä½¿ç”¨ä¸»åŸŸåæœåŠ¡å™¨è¿˜æ˜¯ä»åŸŸåæœåŠ¡å™¨ï¼ŒæŸ¥è¯¢ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ã€‚<br>&emsp;&emsp;ä»¥ä¸Šæ‰€è¿°ä¸»ã€ä»æœåŠ¡å™¨çš„è§’è‰²åªæ˜¯é’ˆå¯¹æŸä¸€ä¸ªç‰¹å®šçš„DNSåŒºåŸŸæ¥è¯´çš„ï¼Œä¾‹å¦‚ï¼ŒåŒä¸€å°DNSæœåŠ¡å™¨ï¼Œå¯ä»¥æ˜¯<code>exp.com</code>åŒºåŸŸçš„ä¸»åŸŸåæœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥æ˜¯<code>itwangluo.com</code>åŒºåŸŸçš„ä»åŸŸåæœåŠ¡å™¨ã€‚  </p><h1 id="BINDçš„å®‰è£…ã€é…ç½®"><a href="#BINDçš„å®‰è£…ã€é…ç½®" class="headerlink" title="BINDçš„å®‰è£…ã€é…ç½®"></a>BINDçš„å®‰è£…ã€é…ç½®</h1><p>&emsp;&emsp;BINDä¸æ˜¯å”¯ä¸€èƒ½å¤Ÿæä¾›åŸŸåæœåŠ¡çš„DNSæœåŠ¡ç¨‹åºï¼Œä½†å®ƒå´æ˜¯åº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ï¼ŒBINDå¯ä»¥è¿è¡Œåœ¨å¤§å¤šæ•°Linux/Unixä¸»æœºä¸­ï¼Œå…¶å®˜æ–¹ç«™ç‚¹ä½äº<code>https://www.isc.org/</code><br>å®‰è£…BINDè½¯ä»¶ç³»ç»Ÿå…‰ç›˜è‡ªå¸¦äº†BINDæœåŠ¡çš„å®‰è£…æ–‡ä»¶ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªè½¯ä»¶åŒ…ï¼š<br>&emsp;&emsp;<code>bind-9.8.2-0.62.rc1.el6.x86_64</code><br>&emsp;&emsp;<code>bind-utils-9.8.2-0.62.rc1.el6.x86_64</code><br>&emsp;&emsp;<code>bind-libs-9.8.2-0.62.rc1.el6.x86_64</code><br>&emsp;&emsp;<code>bind-chroot-9.8.2-0.62.rc1.el6.x86_64</code>  </p><p>å„è½¯ä»¶åŒ…çš„ä½œç”¨å¦‚ä¸‹ï¼š<br>&emsp;&emsp;<code>bind</code>ï¼šæä¾›äº†åŸŸåæœåŠ¡çš„ä¸»è¦ç¨‹åºåŠç›¸å…³æ–‡ä»¶<br>&emsp;&emsp;<code>bind-utils</code>ï¼šæä¾›äº†å¯¹<code>DNS</code>æœåŠ¡å™¨çš„æµ‹è¯•å·¥å…·ç¨‹åºï¼Œå¦‚<code>nslookup</code>ç­‰<br>&emsp;&emsp;<code>bind-libs</code>ï¼šæä¾›äº†<code>bind</code>ã€<code>bind-utils</code>éœ€è¦ä½¿ç”¨çš„åº“å‡½æ•°<br>&emsp;&emsp;<code>bind-chroot</code>ï¼šä¸º<code>BIND</code>æœåŠ¡æä¾›ä¸€ä¸ªä¼ªè£…çš„æ ¹ç›®å½•ï¼ˆå°†<code>/var/named/chroot/</code>æ–‡ä»¶å¤¹ä½œä¸º<code>BIND</code>çš„æ ¹ç›®å½•ï¼‰ï¼Œä»¥æä¾›é«˜å®‰å…¨æ€§ã€‚<br><code>BIND</code>å®‰è£…ä»¥åï¼Œä¼šè‡ªåŠ¨å¢åŠ ä¸€ä¸ªåä¸º<code>named</code>çš„ç³»ç»ŸæœåŠ¡ã€‚  </p><h1 id="DNSæœåŠ¡å™¨çš„ç±»å‹ï¼ˆç¼“å­˜æœåŠ¡å™¨ã€ä¸»æœåŠ¡å™¨ã€ä»æœåŠ¡å™¨ã€åˆ†ç¦»è§£ææœåŠ¡å™¨ï¼‰"><a href="#DNSæœåŠ¡å™¨çš„ç±»å‹ï¼ˆç¼“å­˜æœåŠ¡å™¨ã€ä¸»æœåŠ¡å™¨ã€ä»æœåŠ¡å™¨ã€åˆ†ç¦»è§£ææœåŠ¡å™¨ï¼‰" class="headerlink" title="DNSæœåŠ¡å™¨çš„ç±»å‹ï¼ˆç¼“å­˜æœåŠ¡å™¨ã€ä¸»æœåŠ¡å™¨ã€ä»æœåŠ¡å™¨ã€åˆ†ç¦»è§£ææœåŠ¡å™¨ï¼‰"></a>DNSæœåŠ¡å™¨çš„ç±»å‹ï¼ˆç¼“å­˜æœåŠ¡å™¨ã€ä¸»æœåŠ¡å™¨ã€ä»æœåŠ¡å™¨ã€åˆ†ç¦»è§£ææœåŠ¡å™¨ï¼‰</h1><p>é…ç½®æ–‡ä»¶<code>/etc/named.conf</code>  </p><h2 id="ç¼“å­˜æœåŠ¡å™¨é…ç½®"><a href="#ç¼“å­˜æœåŠ¡å™¨é…ç½®" class="headerlink" title="ç¼“å­˜æœåŠ¡å™¨é…ç½®"></a>ç¼“å­˜æœåŠ¡å™¨é…ç½®</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/named.confoptions <span class="token punctuation">&#123;</span>  listen-on port <span class="token number">53</span> <span class="token punctuation">&#123;</span> <span class="token number">192.168</span>.0.5<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token comment"># ç›‘å¬çš„åœ°å€å’Œç«¯å£ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®š æŸä¸€ä¸ªï¼Œå¡«å†™"any"è¡¨ç¤ºç›‘å¬æ‰€æœ‰æ¥å£çš„UDP 53ç«¯å£ã€‚</span>  directory <span class="token string">"/var/named"</span><span class="token punctuation">;</span>  <span class="token comment"># åŒºåŸŸæ•°æ®æ–‡ä»¶çš„é»˜è®¤å­˜æ”¾ä½ç½®ã€‚</span>  dump-file <span class="token string">"/var/named/data/cacke_dump.db"</span><span class="token punctuation">;</span>  <span class="token comment"># è®¾ç½®åŸŸåç¼“å­˜æ•° æ®åº“æ–‡ä»¶ä½ç½®ã€‚</span>  memstatistics-file <span class="token string">"/var/named/data/named_mem_stats.txt"</span><span class="token punctuation">;</span>  <span class="token comment"># DNS æœåŠ¡å™¨è¾“å‡ºçš„å†…å­˜ä½¿ç”¨ç»Ÿè®¡æ–‡ä»¶</span>  query-source port <span class="token number">53</span><span class="token punctuation">;</span>  <span class="token comment"># æŒ‡å®šå®¢æˆ·ç«¯åœ¨æäº¤DNSæŸ¥è¯¢å¿…é¡»ä½¿ç”¨çš„ æºç«¯å£</span>  allow-query <span class="token punctuation">&#123;</span> <span class="token number">192.168</span>.0.0/24<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token comment"># ä¸ºå“ªäº›å®¢æˆ·ç«¯æä¾›è§£ææœåŠ¡ï¼Œ å¯æŒ‡å®šä¸€äº›ï¼Œä¹Ÿå¯ä»¥å†™"any"è¡¨ç¤ºæ‰€æœ‰çš„å®¢æˆ·ç«¯ã€‚</span>  recursion <span class="token function">yes</span><span class="token punctuation">;</span>  <span class="token comment"># å®šä¹‰é€’å½’å¼DNSï¼Œè‹¥ä¸å¯ç”¨é€’å½’æ”¹ä¸ºno</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>zone <span class="token string">"."</span> IN <span class="token punctuation">&#123;</span>   <span class="token comment"># æ­£å‘"."æ ¹åŒºåŸŸ</span>  <span class="token builtin class-name">type</span> hint<span class="token punctuation">;</span>   <span class="token comment"># ç±»å‹ä¸ºæ ¹åŒºåŸŸ</span>  <span class="token function">file</span> <span class="token string">"named.ca"</span><span class="token punctuation">;</span>   <span class="token comment"># åŒºåŸŸæ•°æ®æ–‡ä»¶å‘½åä¸ºnamed.ca</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æœ‰æ—¶å€™ä¸ºäº†æé«˜è§£ææ•ˆç‡ï¼Œä¹Ÿå¯ä»¥ä¸å‘æ ¹åŸŸæŸ¥è¯¢ï¼Œè€Œæ˜¯å°†æ¥è‡ªå®¢æˆ·ç«¯çš„æŸ¥è¯¢è¯·æ±‚è½¬å‘ç»™å›½å†…ç”µä¿¡è¿è¥å•†çš„DNSæœåŠ¡å™¨ï¼ˆå¦‚åŒ—äº¬çš„<code>202.106.0.20/202.106.148.1</code>ï¼‰ï¼Œç¼“å­˜æœåŠ¡å™¨æ”¶åˆ°è¿”å›çš„æŸ¥è¯¢ç»“æœåå†ä¼ é€’ç»™å®¢æˆ·ç«¯ï¼Œåªè¦å»æ‰<code>zone &quot;.&quot; IN &#123;â€¦â€¦&#125;; </code>çš„è®¾ç½®ï¼Œå¹¶åœ¨å…¨å±€é…ç½®ä¸­æ­£ç¡®è®¾ç½®<code>forwarders</code>å‚æ•°å³å¯å®ç°è¯¥åŠŸèƒ½  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">vim &#x2F;etc&#x2F;named.confoptions &#123;# â€¦â€¦ çœç•¥éƒ¨åˆ†å†…å®¹forwarders &#123; 202.106.0.20; 202.106.148.1; &#125;;&#125;;  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li><p>ç¡®è®¤æ ¹åŸŸçš„åŒºåŸŸæ•°æ®æ–‡ä»¶<code>named.ca</code><br>&emsp;&emsp;æ ¹åŒºåŸŸçš„åŒºåŸŸæ•°æ®æ–‡ä»¶é»˜è®¤ä½äºæ–‡ä»¶<code>/var/named/named.ca</code>ä¸­ï¼Œè¯¥æ–‡ä»¶è®°å½•äº†Internetä¸­å…¨çƒ13å°æ ¹åŸŸæœåŠ¡å™¨çš„åŸŸåå’Œipåœ°å€ç­‰ç›¸å…³ä¿¡æ¯ï¼Œè¦ä¿è¯è¿™ä¸ªæ–‡ä»¶æœ‰è¯»å–çš„æƒé™ï¼Œå¦‚æœæ²¡æœ‰æ­¤æ–‡ä»¶ï¼Œå¯ä»¥ä»ç½‘ä¸Šä¸‹è½½ç„¶åå¶é‡å‘½åæˆå’Œé…ç½®æ–‡ä»¶ä¸­fileåä¸€æ ·çš„åå­—å³å¯ã€‚<br>&emsp;&emsp;ç”¨<code>named-checkzone</code>å·¥å…·æ£€æŸ¥è¯­æ³•<br>&emsp;&emsp;æ ¼å¼ï¼š<code>named-checkzone . named-ca</code>  </p></li><li><p>å¯åŠ¨namedæœåŠ¡<br>&emsp;&emsp;<code>service named start</code> å¯åŠ¨namedæœåŠ¡<br>&emsp;&emsp;<code>netstat -unpl</code> é€šè¿‡netstatå‘½ä»¤æŸ¥çœ‹ç›‘å¬çš„UDPçš„53å·ç«¯å£æ˜¯å¦å¼€å¯  </p></li><li><p>éªŒè¯ç¼“å­˜åŸŸåæœåŠ¡å™¨<br>&emsp;&emsp;åœ¨å±€åŸŸç½‘å†…çš„å®¢æˆ·æœºä¸­ï¼Œå°†é¦–é€‰DNSæœåŠ¡å™¨çš„åœ°å€è®¾ç½®ä¸º<code>192.168.0.5</code>ï¼Œç”Ÿæ•ˆåï¼Œæ‰§è¡Œ<code>nslookup www.baidu.com</code>å‘½ä»¤å¯¹å…¶è¿›è¡Œè§£æï¼ŒéªŒè¯å…¶æ˜¯å¦èƒ½å¤Ÿè·å¾—è¯¥åŸŸåå¯¹åº”çš„ipåœ°å€ä¿¡æ¯ã€‚<br>ä¸€ä¸‹æ“ä½œåœ¨å®¢æˆ·æœºä¸­ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/resolv.conf  nameserver <span class="token number">192.168</span>.0.5  <span class="token comment"># æ·»åŠ DNSæœåŠ¡å™¨åœ°å€  </span><span class="token function">nslookup</span> www.baidu.com  <span class="token comment"># éªŒè¯  </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>æ¨¡æ‹Ÿæ’æŸ¥é”™è¯¯<br>&emsp;&emsp;åœ¨<code>/etc/named.conf</code>æ–‡ä»¶ä¸­éšä¾¿ä¿®æ”¹ä¸€å¤„ï¼Œåˆ¶é€ é”™è¯¯ï¼Œç„¶åå¯åŠ¨ï¼ŒæŠ¥é”™åï¼Œå»æŸ¥çœ‹<code>/var/log/message</code>æ—¥å¿—æ–‡ä»¶  </p></li></ol><p>ç»ƒä¹ ï¼š  </p><ol><li><p>ç¼–è¾‘<code>named.conf</code><br><img src="/medias/drawing-bed/dns/0.png">  </p></li><li><p>ç¼–è¾‘<code>resolv.conf</code><br><img src="/medias/drawing-bed/dns/1.png">  </p></li><li><p>ä½¿ç”¨<code>nslookup</code>éªŒè¯<br><img src="/medias/drawing-bed/dns/2.png"><br><img src="/medias/drawing-bed/dns/3.png">  </p></li></ol><h2 id="ä¸»æœåŠ¡å™¨çš„é…ç½®"><a href="#ä¸»æœåŠ¡å™¨çš„é…ç½®" class="headerlink" title="ä¸»æœåŠ¡å™¨çš„é…ç½®"></a>ä¸»æœåŠ¡å™¨çš„é…ç½®</h2><h3 id="ç¡®è®¤æœ¬æœºçš„ç½‘ç»œåœ°å€ã€ä¸»æœºæ˜ å°„ã€é»˜è®¤DNSæœåŠ¡å™¨åœ°å€"><a href="#ç¡®è®¤æœ¬æœºçš„ç½‘ç»œåœ°å€ã€ä¸»æœºæ˜ å°„ã€é»˜è®¤DNSæœåŠ¡å™¨åœ°å€" class="headerlink" title="ç¡®è®¤æœ¬æœºçš„ç½‘ç»œåœ°å€ã€ä¸»æœºæ˜ å°„ã€é»˜è®¤DNSæœåŠ¡å™¨åœ°å€"></a>ç¡®è®¤æœ¬æœºçš„ç½‘ç»œåœ°å€ã€ä¸»æœºæ˜ å°„ã€é»˜è®¤DNSæœåŠ¡å™¨åœ°å€</h3><p>&emsp;&emsp;å°†ä¸»åŸŸåæœåŠ¡å™¨çš„ipåœ°å€è®¾ä¸º<code>192.168.0.123</code>ï¼Œä¸»æœºåè®¾ä¸º<code>www.exp.com</code>ï¼Œé€šè¿‡ä¿®æ”¹ç½‘ç»œé…ç½®æ–‡ä»¶çš„æ–¹å¼è¿›è¡Œï¼Œå…·ä½“æ“ä½œè¿‡ç¨‹ç•¥ã€‚å¦å¤–ï¼Œä¸ºäº†æé«˜åŸŸåè§£ææ•ˆç‡ï¼Œå»ºè®®ä¸¤å°DNSæœåŠ¡å™¨çš„åœ°å€æ˜ å°„ç›´æ¥å†™å…¥åˆ°<code>/etc/hosts</code>æ–‡ä»¶ä¸­ï¼Œå¹¶åœ¨<code>/etc/resolv.conf</code>æ–‡ä»¶ä¸­æŒ‡å®šä¸¤ä¸ªDNSæœåŠ¡å™¨çš„åœ°å€ã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/hosts<span class="token number">192.168</span>.0.123 www.exp.com<span class="token number">192.168</span>.0.33 wap.exp.com<span class="token function">vim</span> /etc/resolv.confnameserver <span class="token number">192.168</span>.0.123nameserver <span class="token number">192.168</span>.0.33<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å»ºç«‹ä¸»é…ç½®æ–‡ä»¶named-conf"><a href="#å»ºç«‹ä¸»é…ç½®æ–‡ä»¶named-conf" class="headerlink" title="å»ºç«‹ä¸»é…ç½®æ–‡ä»¶named.conf"></a>å»ºç«‹ä¸»é…ç½®æ–‡ä»¶<code>named.conf</code></h3><p>&emsp;&emsp;æ–°å»ºçš„<code>named.conf</code>ä¸»é…ç½®æ–‡ä»¶ï¼Œç”±äºåªéœ€è¦æä¾›<code>exp.com</code>åŸŸçš„æ­£å‘è§£æå’Œ<code>192.168.0.0/24</code>ç½‘æ®µçš„åå‘è§£æï¼Œå› æ­¤ç›¸åº”åœ°æ·»åŠ è¿™ä¸¤ä¸ªåŒºåŸŸå³å¯ï¼Œæ ¹åŒºåŸŸï¼Œä¼šç¯å®‡ç­‰å…¶ä»–é…ç½®å†…å®¹å¯ä»¥çœç•¥ã€‚  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">vim &#x2F;etc&#x2F;named.confoptions &#123;  listen-on port 53 &#123; any ;&#125;;   # ä¹Ÿå¯å†™æˆ192.168.0.123  directory &quot;&#x2F;var&#x2F;named&quot;;  allow-query &#123; 192.168.0.0&#x2F;24; &#125;; ä¹Ÿå¯ä»¥å†™&quot;any&quot; &#125;;zone &quot;exp.com&quot; IN &#123;  type master;   # ç±»å‹ä¸ºä¸»åŒºåŸŸ  file &quot;exp.com.zone&quot;;   # åŒºåŸŸæ•°æ®æ–‡ä»¶ä¸ºexp.com.zone  allow-transfer &#123; 192.168.0.33; &#125;;   # å…è®¸ä»æœåŠ¡å™¨ä¸‹è½½æ­£å‘åŒºåŸŸæ•°æ® &#125;;zone &quot;0.168.192.in-addr.arpa&quot; IN &#123;  type master;  file &quot;192.168.0.arpa&quot;;   # åŒºåŸŸæ•°æ®æ–‡ä»¶ä¸º192.168.0.arpa  allow-transfer &#123; 192.168.0.33; &#125;;   # å…è®¸ä»æœåŠ¡å™¨ä¸‹è½½åå‘åŒºåŸŸæ•°æ® &#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;å½“ä¸éœ€è¦å»ºç«‹ä»åŸŸåæœåŠ¡å™¨æ—¶ï¼Œä¸Šè¿°é…ç½®å†…å®¹ä¸­çš„<code>allow-transferâ€¦â€¦</code>éƒ¨åˆ†å¯ä»¥ä¸æ·»åŠ ï¼Œå½“ä¸éœ€è¦æä¾›åå‘è§£ææ—¶ï¼Œ<code>zone &quot;0.168.192.in-addr.arpa&quot;â€¦â€¦</code>éƒ¨åˆ†ä¹Ÿå¯ä»¥å»æ‰ã€‚<br>&emsp;&emsp;å¯¹é…ç½®æ–‡ä»¶è¿›è¡Œè¯­æ³•æ£€æŸ¥ç”¨<code>named-checkconf</code>å‘½ä»¤ã€‚  </p><h3 id="å»ºç«‹æ­£ã€åå‘åŒºåŸŸæ•°æ®æ–‡ä»¶"><a href="#å»ºç«‹æ­£ã€åå‘åŒºåŸŸæ•°æ®æ–‡ä»¶" class="headerlink" title="å»ºç«‹æ­£ã€åå‘åŒºåŸŸæ•°æ®æ–‡ä»¶"></a>å»ºç«‹æ­£ã€åå‘åŒºåŸŸæ•°æ®æ–‡ä»¶</h3><p>&emsp;&emsp;æ ¹æ®<code>named.conf</code>ä¸­çš„zoneåŒºåŸŸè®¾ç½®ï¼Œåˆ†åˆ«å»ºç«‹æ­£å‘åŒºåŸŸæ•°æ®æ–‡ä»¶<code>exp.com.zone</code>ã€åå‘åŒºåŸŸæ•°æ®æ–‡ä»¶<code>192.168.0.arpa</code>ï¼Œå¹¶ä¸”ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶çš„å±ç»„ä¸º<code>named</code>ï¼Œé…ç½®å†…å®¹å¯ä»¥å‚è€ƒåŒºåŸŸæ•°æ®æ–‡ä»¶<code>/var/named/named.localhost</code>ã€‚ï¼ˆå»ºç«‹å®ŒåŒºåŸŸæ•°æ®æ–‡ä»¶åè¦è¯­æ³•æ£€æŸ¥ï¼‰ã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /var/named/<span class="token function">vim</span> exp.com.zone   <span class="token comment"># æ‰“å¼€æ–‡ä»¶è¿›è¡Œä¿®æ”¹ï¼ˆæ­£å‘æ–‡ä»¶ï¼‰</span><span class="token variable">$TTL</span> <span class="token number">86400</span>@ SOA exp.com. admin.exp.com. <span class="token punctuation">(</span>  <span class="token number">2017110822</span>  4H  30M  12H  1D <span class="token punctuation">)</span>@ IN NS www.exp.com.  IN NS wap.exp.com.  IN MX <span class="token number">10</span> mail.exp.com.www IN A <span class="token number">192.168</span>.0.123wap IN A <span class="token number">192.168</span>.0.33mail IN A <span class="token number">192.168</span>.0.35* IN A <span class="token number">192.168</span>.0.123<span class="token function">vim</span> <span class="token number">192.168</span>.0.arpa   <span class="token comment"># æ‰“å¼€æ–‡ä»¶è¿›è¡Œä¿®æ”¹</span><span class="token variable">$TTL</span> <span class="token number">86400</span>@ SOA exp.com. admin.exp.com. <span class="token punctuation">(</span>  <span class="token number">2017110823</span>  4H  30M  12H  1D <span class="token punctuation">)</span>  IN NS www.exp.com.  IN NS wap.exp.com.<span class="token number">123</span> IN PTR www.exp.com.<span class="token number">35</span> IN PTR mail.exp.com.<span class="token number">33</span> IN PTR wap.exp.com.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¯åŠ¨namedæœåŠ¡æˆ–é‡è½½é…ç½®"><a href="#å¯åŠ¨namedæœåŠ¡æˆ–é‡è½½é…ç½®" class="headerlink" title="å¯åŠ¨namedæœåŠ¡æˆ–é‡è½½é…ç½®"></a>å¯åŠ¨namedæœåŠ¡æˆ–é‡è½½é…ç½®</h3><p><code>service named reload/restart</code>  </p><h3 id="éªŒè¯ä¸»åŸŸåæœåŠ¡å™¨"><a href="#éªŒè¯ä¸»åŸŸåæœåŠ¡å™¨" class="headerlink" title="éªŒè¯ä¸»åŸŸåæœåŠ¡å™¨"></a>éªŒè¯ä¸»åŸŸåæœåŠ¡å™¨</h3><p>åœ¨å®¢æˆ·ç«¯å°†DNSæœåŠ¡å™¨æŒ‡å‘<code>192.168.0.123</code>ï¼ˆä¸»åŸŸåæœåŠ¡å™¨çš„IPåœ°å€ï¼‰<br>ä½¿ç”¨<code>nslookup</code>å‘½ä»¤éªŒè¯DNSæŸ¥è¯¢ç»“æœ<br>&emsp;&emsp;ä¾‹å¦‚ï¼Œåœ¨Linuxå®¢æˆ·æœºä¸­éªŒè¯ï¼ŒæŠŠ<code>/etc/resolv.conf</code>æ–‡ä»¶ä¸­çš„é¦–é€‰DNSæ”¹ä¸º<code>192.168.0.123</code>å°±å¯ä»¥éªŒè¯äº†  </p><p><code>nslookup wap.exp.com</code> éªŒè¯æ­£å‘è§£æ<br>&emsp;&emsp;server: 192.168.0.123<br>&emsp;&emsp;Address:  </p><p><code>nslookup x.exp.com</code> éªŒè¯æ³›åŸŸåè§£æ<br>&emsp;&emsp;server: 192.168.0.123<br>&emsp;&emsp;Address:<br><code>nslookup 192.168.0.35</code> éªŒè¯åå‘è§£æ  </p><p>ç»ƒä¹ ï¼š  </p><ol><li><p>ç¼–è¾‘<code>named.conf</code>åœ¨ç¼“å­˜æœåŠ¡å™¨çš„åŸºç¡€ä¸Šæ·»åŠ ï¼š<br><img src="/medias/drawing-bed/dns/4.png">  </p></li><li><p><code>cd /var/named/</code>  </p></li></ol><ol><li>ç¼–è¾‘<code>exp.com.zone</code>ï¼ˆæ­£å‘è§£ææ–‡ä»¶ï¼‰<br><img src="/medias/drawing-bed/dns/6.png">  </li><li>ç¼–è¾‘<code>192.168.0.arpa</code>ï¼ˆåå‘è§£ææ–‡ä»¶ï¼‰<br><img src="/medias/drawing-bed/dns/5.png">  </li></ol><ol start="3"><li>éªŒè¯ï¼š<code>nslookup wap.exp.com</code><br><img src="/medias/drawing-bed/dns/7.png"><br><code>nslookup x.exp.com</code><br><img src="/medias/drawing-bed/dns/8.png"><br><code>nalookup 192.168.0.35</code><br><img src="/medias/drawing-bed/dns/9.png">  </li></ol><h2 id="ä»æœåŠ¡å™¨é…ç½®"><a href="#ä»æœåŠ¡å™¨é…ç½®" class="headerlink" title="ä»æœåŠ¡å™¨é…ç½®"></a>ä»æœåŠ¡å™¨é…ç½®</h2><h3 id="ç¡®è®¤æœ¬æœºçš„ç½‘ç»œåœ°å€ã€ä¸»æœºæ˜ å°„ã€é»˜è®¤DNSæœåŠ¡å™¨åœ°å€-1"><a href="#ç¡®è®¤æœ¬æœºçš„ç½‘ç»œåœ°å€ã€ä¸»æœºæ˜ å°„ã€é»˜è®¤DNSæœåŠ¡å™¨åœ°å€-1" class="headerlink" title="ç¡®è®¤æœ¬æœºçš„ç½‘ç»œåœ°å€ã€ä¸»æœºæ˜ å°„ã€é»˜è®¤DNSæœåŠ¡å™¨åœ°å€"></a>ç¡®è®¤æœ¬æœºçš„ç½‘ç»œåœ°å€ã€ä¸»æœºæ˜ å°„ã€é»˜è®¤DNSæœåŠ¡å™¨åœ°å€</h3><p>å°†ä»åŸŸåæœåŠ¡å™¨çš„ipåœ°å€è®¾ä¸º<code>192.168.0.10</code>ï¼Œä¸»æœºåè®¾ä¸º<code>wap.exp.com</code>ï¼Œé€šè¿‡ä¿®æ”¹ç½‘ç»œé…ç½®æ–‡ä»¶çš„æ–¹å¼è¿›è¡Œï¼Œå…·ä½“æ“ä½œè¿‡ç¨‹ç•¥ï¼Œå¦å¤–ä¸»æœºæ˜ å°„æ–‡ä»¶<code>/etc/hosts</code>å’Œ<code>DNS</code>è§£ææ–‡ä»¶<code>/etc/resolv.conf</code>çš„å†…å®¹ä¸ä¸»æœåŠ¡å™¨ä¸­çš„å†…å®¹ç›¸åŒã€‚  </p><h3 id="å»ºç«‹ä¸»é…ç½®æ–‡ä»¶named-conf-1"><a href="#å»ºç«‹ä¸»é…ç½®æ–‡ä»¶named-conf-1" class="headerlink" title="å»ºç«‹ä¸»é…ç½®æ–‡ä»¶named.conf"></a>å»ºç«‹ä¸»é…ç½®æ–‡ä»¶named.conf</h3><p>&emsp;&emsp;åœ¨ä»åŸŸåæœåŠ¡å™¨ä¸­ï¼Œ<code>named.conf</code>æ–‡ä»¶çš„å†…å®¹ä¸ä¸»æœåŠ¡å™¨çš„å†…å®¹å¤§éƒ¨åˆ†ç›¸åŒï¼Œåªæ˜¯ä¸éœ€è¦å†è®¾ç½®<code>allow-transferâ€¦â€¦</code>;æ›´å…³é”®çš„ä¸€ç‚¹æ˜¯ï¼Œzoneéƒ¨åˆ†çš„åŒºåŸŸç±»å‹åº”è®¾ç½®ä¸º<code>slave</code>ï¼Œå¹¶æ·»åŠ <code>masters &#123;&#125;;</code>è¯­å¥æ¥æŒ‡å®šä¸»åŸŸåæœåŠ¡å™¨çš„åœ°å€ã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/named.confoptions <span class="token punctuation">&#123;</span>  listen-on port <span class="token number">53</span> <span class="token punctuation">&#123;</span> <span class="token number">192.168</span>.0.33<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  directory <span class="token string">"/var/named"</span><span class="token punctuation">;</span>  allow-query <span class="token punctuation">&#123;</span> <span class="token number">192.168</span>.0.0/24<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>   <span class="token comment"># ä¹Ÿå¯ä»¥å†™æˆ"any"</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>zone <span class="token string">"exp.com"</span> IN <span class="token punctuation">&#123;</span>  <span class="token builtin class-name">type</span> slave<span class="token punctuation">;</span>   <span class="token comment"># ç±»å‹ä¸ºä»åŒºåŸŸ</span>  masters <span class="token punctuation">&#123;</span> <span class="token number">192.168</span>.0.123<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>   <span class="token comment"># æŒ‡å®šä¸»æœåŠ¡å™¨çš„IPåœ°å€</span>  <span class="token function">file</span> <span class="token string">"slaves/exp.com.zone"</span><span class="token punctuation">;</span>   <span class="token comment"># ä¸‹è½½çš„åŒºåŸŸæ•°æ®æ–‡ä»¶ä¿å­˜åˆ°slaves/ ç›®å½•ä¸­</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>zone <span class="token string">"0.168.192.in-addr.arpa"</span> IN <span class="token punctuation">&#123;</span>  <span class="token builtin class-name">type</span> slave<span class="token punctuation">;</span>  masters <span class="token punctuation">&#123;</span> <span class="token number">192.168</span>.0.123<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>  <span class="token function">file</span> <span class="token string">"slaves/192.168.0.arpa"</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;ç”±äºä»æœåŠ¡å™¨çš„åŒºåŸŸæ•°æ®æ–‡ä»¶æ˜¯ä»ä¸»æœåŠ¡å™¨ä¸­ä¸‹è½½è€Œæ¥ï¼Œå› æ­¤ï¼Œè¯¥æ–‡ä»¶ä¿å­˜çš„åç§°å¯ä»¥è‡ªè¡Œå®šä¹‰ï¼Œä¸ç”¨éå¾—ä¸ä¸»åŸŸåæœåŠ¡å™¨ä¸­çš„ä¸€è‡´ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒnamedæœåŠ¡å™¨é»˜è®¤ä»¥åä¸º<code>named</code>çš„ç”¨æˆ·èº«ä»½è¿è¡Œï¼Œå› æ­¤è¦ç¡®è®¤namedç”¨æˆ·å¯¹å­˜æ”¾ç›®å½•æœ‰å†™å…¥æƒé™ã€‚<br>&emsp;&emsp;å»ºç«‹å®Œé…ç½®æ–‡ä»¶åç”¨<code>named-checkconf</code>å‘½ä»¤è¿›è¡Œè¯­æ³•æ£€æŸ¥ã€‚  </p><h3 id="å¯åŠ¨namedæœåŠ¡ï¼ŒæŸ¥çœ‹åŒºåŸŸæ•°æ®æ–‡ä»¶æ˜¯å¦ä¸‹è½½æˆåŠŸ"><a href="#å¯åŠ¨namedæœåŠ¡ï¼ŒæŸ¥çœ‹åŒºåŸŸæ•°æ®æ–‡ä»¶æ˜¯å¦ä¸‹è½½æˆåŠŸ" class="headerlink" title="å¯åŠ¨namedæœåŠ¡ï¼ŒæŸ¥çœ‹åŒºåŸŸæ•°æ®æ–‡ä»¶æ˜¯å¦ä¸‹è½½æˆåŠŸ"></a>å¯åŠ¨namedæœåŠ¡ï¼ŒæŸ¥çœ‹åŒºåŸŸæ•°æ®æ–‡ä»¶æ˜¯å¦ä¸‹è½½æˆåŠŸ</h3><p>&emsp;&emsp;åœ¨ä»åŸŸåæœåŠ¡å™¨ä¸­å¯åŠ¨namedæœåŠ¡ï¼Œè‹¥é…ç½®æ— è¯¯ï¼Œåˆ™namedå°†ä¼šä»ä¸»åŸŸåæœåŠ¡å™¨ä¸­è‡ªè¡Œä¸‹è½½æŒ‡å®šçš„åŒºåŸŸæ•°æ®æ–‡ä»¶ï¼Œå¹¶ä¿å­˜åˆ°<code>slaves/</code>ç›®å½•ä¸‹ï¼Œå¦å¤–ï¼Œé€šè¿‡ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶<code>/var/log/messages</code>ä¹Ÿå¯ä»¥è§‚å¯Ÿåˆ°ä¸‹è½½åŒºåŸŸæ•°æ®åŒ–æ–‡ä»¶çš„è¿‡ç¨‹ã€‚<br>&emsp;&emsp;<code>service named start</code> å¯åŠ¨æœåŠ¡  </p><h3 id="éªŒè¯ä»åŸŸåæœåŠ¡å™¨"><a href="#éªŒè¯ä»åŸŸåæœåŠ¡å™¨" class="headerlink" title="éªŒè¯ä»åŸŸåæœåŠ¡å™¨"></a>éªŒè¯ä»åŸŸåæœåŠ¡å™¨</h3><p>&emsp;&emsp;å¯¹äºå®¢æˆ·æœºæ¥è¯´ï¼Œä»åŸŸåæœåŠ¡å™¨ä¸ä¸»åŸŸåæœåŠ¡å™¨å¹¶æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œé€šè¿‡ä¸»æœåŠ¡å™¨èƒ½å¤ŸæŸ¥è¯¢åˆ°çš„ä¿¡æ¯çš„ï¼Œé€šè¿‡ä»æœåŠ¡å™¨ä¹ŸåŒæ ·èƒ½å¤ŸæŸ¥è¯¢åˆ°ï¼ŒéªŒè¯ä»åŸŸåæœåŠ¡å™¨æ—¶ï¼Œåªéœ€è¦å°†å®¢æˆ·ç«¯çš„é¦–é€‰DNSæœåŠ¡å™¨åœ°å€è®¾ä¸º<code>192.168.0.10</code>ï¼ˆä»åŸŸåæœåŠ¡å™¨çš„ipåœ°å€ï¼‰ï¼Œä½¿ç”¨<code>nslookup</code>å‘½ä»¤è¿›è¡Œæ­£å¸¸æµ‹è¯•å³å¯ã€‚  </p><h3 id="æµ‹è¯•ä¸»ã€ä»åŒæ­¥"><a href="#æµ‹è¯•ä¸»ã€ä»åŒæ­¥" class="headerlink" title="æµ‹è¯•ä¸»ã€ä»åŒæ­¥"></a>æµ‹è¯•ä¸»ã€ä»åŒæ­¥</h3><p>&emsp;&emsp;åœ¨ä¸»æœåŠ¡å™¨æ·»åŠ æˆ–åˆ é™¤ä¸»æœºåã€ipå¯¹åº”æ¡ç›®ï¼Œä¿®æ”¹åºåˆ—å·ï¼ˆæ¯æ¬¡ä¿®æ”¹éƒ½è¦åŠ 1ï¼‰ï¼Œä»æœåŠ¡å™¨ç­‰åˆ°æ›´æ–°çš„æ—¶é—´å°±ä¼šå¯¹æ¯”åºåˆ—å·ï¼Œå¦‚æœä¸åŒå°±ä¼šæ›´æ–°ã€‚<br>&emsp;&emsp;ä¹Ÿå¯ä»¥åœ¨ä¸»æœåŠ¡å™¨çš„é…ç½®æ–‡ä¸­æ·»åŠ å…¨å±€é…ç½®é¡¹ï¼š<br>&emsp;&emsp;<code>also-notify &#123; 192.168.0.33; &#125;;</code> ä¸»æœåŠ¡å™¨æ›´æ–°å®Œåé€šçŸ¥<code>192.168.0.33</code>ä»æœåŠ¡å™¨æ›´æ–°<br>&emsp;&emsp;æ·»åŠ å®Œæ­¤é¡¹åï¼Œæ¯å½“ä¸»æœåŠ¡å™¨æ›´æ–°ä¸€æ¬¡ï¼Œå°±ä¼šé€šçŸ¥ä»æœåŠ¡å™¨æ›´æ–°ã€‚<br>&emsp;&emsp;åœ¨åŒºåŸŸé…ç½®æ–‡ä»¶ä¸­ï¼ˆåå‘ã€æ­£å‘éƒ½è¦åŠ ï¼‰åŠ ä¸Šä¸€é¡¹ä¸»æœºä¸ipå¯¹åº”è¯¥å…³ç³»ï¼ˆä¸»åŸŸåæœåŠ¡å™¨ä¸­æ·»åŠ ï¼‰<br>&emsp;&emsp;æ­£å‘è§£æï¼š<code>ftp IN a 192.168.0.6</code><br>&emsp;&emsp;åå‘è§£æï¼š<code>6 IN PRT ftp.exp.com.</code><br>&emsp;&emsp;æ·»åŠ å®Œä¹‹åç”¨å®¢æˆ·æœºå»æµ‹è¯•ä»åŸŸåæœåŠ¡å™¨ã€‚  </p><p>ä¸»æœåŠ¡å™¨å¢åŠ åœ°å€è§£æè®°å½•ï¼Œä¿®æ”¹åºåˆ—å·<br>&emsp;&emsp;é…ç½®<code>also-notify &#123; 192.168.0.33; &#125;;</code>æ­¤é¡¹çš„æ„æ€æ˜¯ä¸»æœåŠ¡å™¨æ¯æ¬¡æ›´æ–°å®Œå°±ä¼šé€šçŸ¥æŒ‡å®šçš„ä»æœåŠ¡å™¨ã€‚  </p><p>ç»ƒä¹ ï¼š  </p><ol><li><p>æ­å»ºä»æœåŠ¡å™¨ï¼Œç¼–è¾‘é…ç½®æ–‡ä»¶ï¼ˆä½¿ç”¨ä¸»æœº33ï¼‰<br><img src="/medias/drawing-bed/dns/10.png"><br><img src="/medias/drawing-bed/dns/11.png">  </p></li><li><p>é‡å¯namedæœåŠ¡ï¼Œ<code>cd /var/named/slaves/</code><br><img src="/medias/drawing-bed/dns/12.png"><br>ä»æœåŠ¡å™¨ç”Ÿæ•ˆä¼šä¸‹è½½ä¸»æœåŠ¡å™¨çš„é…ç½®æ–‡ä»¶ï¼  </p></li><li><p>éªŒè¯<br><img src="/medias/drawing-bed/dns/13.png"><br><img src="/medias/drawing-bed/dns/14.png"><br><img src="/medias/drawing-bed/dns/15.png">  </p></li></ol><h1 id="æ„å»ºåˆ†ç¦»è§£ææœåŠ¡å™¨"><a href="#æ„å»ºåˆ†ç¦»è§£ææœåŠ¡å™¨" class="headerlink" title="æ„å»ºåˆ†ç¦»è§£ææœåŠ¡å™¨"></a>æ„å»ºåˆ†ç¦»è§£ææœåŠ¡å™¨</h1><p>&emsp;&emsp;åˆ†ç¦»è§£æçš„åŸŸåæœåŠ¡å™¨å®é™…ä¸Šè¿˜æ˜¯ä¸»åŸŸåæœåŠ¡å™¨ï¼Œè¿™é‡Œæ‰€è¯´çš„åˆ†ç¦»è§£æä¸»è¦æ˜¯æŒ‡æ ¹æ®ä¸åŒçš„å®¢æˆ·ç«¯æä¾›ä¸åŒçš„åŸŸåè§£æè®°å½•ï¼Œæ¥è‡ªä¸åŒåœ°å€çš„å®¢æˆ·æœºè¯·æ±‚è§£æåŒä¸€åŸŸåæ—¶ä¸ºå…¶æä¾›ä¸åŒçš„è§£æç»“æœã€‚<br>&emsp;&emsp;ä¾‹å¦‚ï¼Œå½“DNSæœåŠ¡å™¨é¢å‘Internetå’Œä¼ä¸šå†…éƒ¨å±€åŸŸç½‘ç»œæä¾›æœåŠ¡æ—¶ï¼Œå¯èƒ½éœ€è¦å°†å±€åŸŸç½‘ç”¨æˆ·è®¿é—®å…¬å¸åŸŸåçš„æ•°æ®ç›´æ¥å‘å¾€ä½äºå†…ç½‘ä¸­çš„ç½‘ç«™ã€é‚®ä»¶æœåŠ¡å™¨ï¼Œä»¥å‡è½»ç½‘å…³æœåŠ¡å™¨çš„åœ°å€è½¬æ¢è´Ÿæ‹…ã€‚<br>&emsp;&emsp;æ¶è®¾å¥½åˆ†ç¦»è§£æåŸŸåæœåŠ¡å™¨åï¼Œå½“å…¬å¸å†…éƒ¨çš„å®¢æˆ·æœºè®¿é—®å…¬å¸çš„ç½‘ç«™/é‚®ä»¶æœåŠ¡å™¨æ—¶ï¼Œç›´æ¥è®¿é—®å°±å¯ä»¥äº†ï¼Œè§£æçš„ç»“æœæ˜¯è¿™ä¸¤å°æœåŠ¡å™¨çš„IPåœ°å€ã€‚å½“å¤–ç½‘çš„å®¢æˆ·æœºè®¿é—®å…¬å¸çš„ç½‘ç«™/åŸŸåæœåŠ¡å™¨æ—¶ï¼ŒåŸŸåè§£æçš„ç»“æœæ˜¯ç½‘å…³æœåŠ¡å™¨å¤–ç½‘çš„IPåœ°å€ï¼ˆè¿™é‡Œä¼šæœ‰åœ°å€è§£ææŠ€æœ¯ï¼Œä½¿å¾—å¤–ç½‘å®¢æˆ·æœºä¹Ÿå¯èƒ½è®¿é—®è¿™ä¸¤å°æœåŠ¡å™¨ï¼‰<br>&emsp;&emsp;è¿™å°±æ˜¯åˆ†ç¦»è§£ææœåŠ¡å™¨çš„ä½œç”¨ï¼Œä½¿å¾—è®¿é—®åŒä¸€ä¸ªç”¨æˆ·å¾—åˆ°ä¸åŒçš„ç»“æœ<br>åŸºæœ¬é…ç½®æ­¥éª¤ï¼š  </p><ol><li>åœ¨named.confä¸»é…ç½®æ–‡ä»¶ä¸­ä¸ºä¸åŒçš„å®¢æˆ·æœºåœ°å€å¯ç”¨ä¸åŒçš„zoneåŒºåŸŸè®¾ç½®ï¼Œå„è‡ª ä½¿ç”¨ç‹¬ç«‹çš„æ•°æ®æ–‡ä»¶ã€‚  </li><li>åˆ†åˆ«å»ºç«‹ä¸åŒçš„åŒºåŸŸæ•°æ®æ–‡ä»¶  </li><li>å¯åŠ¨æˆ–é‡æ–°åŠ è½½namedæœåŠ¡ç¨‹åº  </li><li>éªŒè¯åˆ†ç¦»è§£æåŸŸåæœåŠ¡å™¨  </li></ol><p>å…·ä½“çš„æ“ä½œæ­¥éª¤ï¼š  </p><ol><li><p>ä¸ºä¸åŒçš„å®¢æˆ·æœºåˆ†åˆ«è®¾ç«‹<code>view</code>è§†å›¾<br>åœ¨<code>named.conf</code>ä¸»é…ç½®æ–‡ä»¶ä¸­æ·»åŠ   </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/named.confâ€¦â€¦view <span class="token string">"LAN"</span> <span class="token punctuation">&#123;</span> æ·»åŠ viewè§†å›¾ï¼Œåç§°ä¸º<span class="token string">"LAN"</span>  match-clients <span class="token punctuation">&#123;</span> <span class="token number">192.168</span>.0.33<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>   <span class="token comment"># è¿™ä¸ªè§†å›¾å¯¹å“ªäº›å®¢æˆ·ç«¯æœ‰æ•ˆï¼Œå¯ä»¥å†™å¤šä¸ª</span>  zone <span class="token string">"exp.com"</span> IN <span class="token punctuation">&#123;</span>  <span class="token builtin class-name">type</span> master<span class="token punctuation">;</span>  <span class="token function">file</span> <span class="token string">"exp.com.zone.lan"</span><span class="token punctuation">;</span>   <span class="token comment"># é’ˆå¯¹æ¥è‡ªå±€åŸŸç½‘å®¢æˆ·æœºçš„åŒºåŸŸ æ•°æ®æ–‡ä»¶</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>view <span class="token string">"WAN"</span> <span class="token punctuation">&#123;</span>  match-clients <span class="token punctuation">&#123;</span> any<span class="token punctuation">;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">;</span> <span class="token string">"any"</span>   <span class="token comment"># è¡¨ç¤ºä»»æ„ï¼Œè¿™é‡Œè¡¨ç¤ºé™¤äº†ä¸Šé¢é‚£ä¸ªç½‘ æ®µä»¥å¤–çš„ä»»æ„åœ°å€</span>  zone <span class="token string">"exp.com"</span> IN <span class="token punctuation">&#123;</span>  <span class="token builtin class-name">type</span> master<span class="token punctuation">;</span>  <span class="token function">file</span> <span class="token string">"exp.com.zone.wan"</span><span class="token punctuation">;</span>   <span class="token comment"># é’ˆå¯¹æ¥è‡ªä»»æ„åœ°å€å®¢æˆ·æœºçš„ åŒºåŸŸæ•°æ®æ–‡ä»¶</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>// include <span class="token string">"/etc/named.rfc1912.zones"</span><span class="token punctuation">;</span>   <span class="token comment"># æ³¨é‡Šæ‰è¿™è¡Œï¼Œä¸è®©å…¶ç”Ÿæ•ˆ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®æ–‡ä»¶ä¿®æ”¹å®Œåä½¿ç”¨<code>named-checkconf</code>å‘½ä»¤æ£€æŸ¥è¯­æ³•<br>åœ¨é…ç½®æ–‡ä»¶ä¸­ä¸»è¦éœ€è¦ä¿®æ”¹çš„åœ°æ–¹æ˜¯ï¼š<br>&emsp;&emsp;æ›´æ”¹ç›‘å¬çš„ç«¯å£<code>listen-on port 53 &#123; any; &#125;;</code>ä¸º<code>any</code><br>&emsp;&emsp;æ›´æ”¹å…è®¸æŸ¥è¯¢çš„<code>allow-query &#123; any; &#125;;</code>ä¸º<code>any</code><br>&emsp;&emsp;æ·»åŠ è§†å›¾<code>view</code><br>&emsp;&emsp;æ³¨é‡Šæ‰<code>include &quot;/etc/named.rfc1912.zones&quot;;</code>è¿™è¡Œ  </p></li><li><p>åˆ†åˆ«å»ºç«‹ä¸åŒçš„åŒºåŸŸæ•°æ®æ–‡ä»¶  </p></li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /var/named/exp.com.zone.lan<span class="token punctuation">..</span>.  NS www.exp.com.  MX <span class="token number">10</span> mail.exp.com.www A <span class="token number">192.168</span>.0.123wap A <span class="token number">192.168</span>.0.33mail A <span class="token number">192.168</span>.0.35<span class="token function">vim</span> /var/named/exp.com.zone.wan<span class="token punctuation">..</span>.  NS www.exp.com.  MX <span class="token number">10</span> mail.exp.com.www A <span class="token number">192.168</span>.0.124wap A <span class="token number">192.168</span>.0.34mail A <span class="token number">192.168</span>.0.36<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å»ºç«‹å¥½ä¸¤ä¸ªæ–‡ä»¶åå¯ä½¿ç”¨<code>named-checkzone</code>å‘½ä»¤è¿›è¡Œè¯­æ³•æ£€æŸ¥  </p><ol><li><p>å¯åŠ¨æˆ–é‡è½½namedæœåŠ¡ç¨‹åº<br><code>service named reload</code>  </p></li><li><p>éªŒè¯åˆ†ç¦»è§£æçš„åŸŸåæœåŠ¡å™¨<br>ä½¿ç”¨<code>192.168.0.33</code>çš„å®¢æˆ·æœºå°†é»˜è®¤DNSæŒ‡å‘<code>192.168.0.123</code>è§£æ<code>www.exp.com</code>ï¼Œç»“æœåº”è¯¥ä¸º<code>192.168.0.123</code><br>ä½¿ç”¨å…¶ä»–ipåœ°å€çš„å®¢æˆ·æœºï¼Œå°†é»˜è®¤<code>DNS</code>æŒ‡å‘<code>??</code>ï¼Œè§£æ<code>www.exp.com</code>ï¼Œç»“æœåº”è¯¥ä¸º<code>192.168.0.124</code><br><code>named</code>æœåŠ¡ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯ç”¨UDPçš„53ç«¯å£ï¼Œä½†æ˜¯æœ‰æ—¶ä¹Ÿä¼šç”¨tcpçš„53ç«¯å£  </p></li></ol><p>&emsp;&emsp;æ³¨æ„ï¼šä¸ç®¡æ˜¯ä¸»ã€ä»åŸŸåæœåŠ¡å™¨è¿˜æ˜¯åˆ†ç¦»è§£æåŸŸåæœåŠ¡å™¨ï¼Œæ¶è®¾æ—¶éƒ½è¦å…³é—­<code>selinux</code>å’Œ<code>iptables</code>ï¼ˆç­‰å­¦ä¹ äº†iptablesåå°±å¯ä»¥ä¸ç”¨å…³é—­äº†ï¼‰ï¼Œè¿˜è¦æŠŠå»ºç«‹çš„åŒºåŸŸæ•°æ®æ–‡ä»¶çš„å±ç»„è®¾ä¸º<code>named</code>ï¼ˆå› ä¸ºç³»ç»Ÿé»˜è®¤ä¼šä»¥<code>named</code>ç”¨æˆ·è¯»å–æ–‡ä»¶å†…å®¹ï¼‰ã€‚  </p><p>&emsp;&emsp;å¯ä»¥ä¸ºä¸åŒè¿è¥å•†çš„ç”¨æˆ·è§£æä¸åŒçš„ipåœ°å€ï¼Œä»è€ŒåŠ å¿«è®¿é—®é€Ÿåº¦<br>ä¾‹å¦‚ï¼šè”é€šç”¨æˆ·ä¸å…¶ä»–ç”¨æˆ·ï¼ˆéƒ½æ˜¯å¤–ç½‘ç”¨æˆ·ï¼‰éƒ½è®¿é—®åŒä¸€å°åˆ†ç¦»è§£ææœåŠ¡å™¨ï¼Œè¿”å›çš„ç»“æœå´ä¸ä¸€æ ·ã€‚  </p><p>ç»ƒä¹ ï¼šæ­å»ºåˆ†ç¦»è§£ææœåŠ¡å™¨  </p><ol><li><p>åˆ†ç¦»è§£ææœåŠ¡å™¨é…ç½®ä¸¤å—ç½‘å¡ï¼ˆä¸åŒç½‘æ®µï¼‰<br><img src="/medias/drawing-bed/dns/16.png">  </p></li><li><p>ç¼–è¾‘é…ç½®æ–‡ä»¶<code>named.conf</code><br><img src="/medias/drawing-bed/dns/17.png"><br><img src="/medias/drawing-bed/dns/18.png"><br><img src="/medias/drawing-bed/dns/19.png">  </p></li><li><p><code>cd /var/named</code>åˆ›å»ºæ–‡ä»¶<code>exp.com.zone.lan &amp; exp.com.zone.wan</code>  </p></li></ol><p><img src="/medias/drawing-bed/dns/20.png"><br><img src="/medias/drawing-bed/dns/21.png"><br><img src="/medias/drawing-bed/dns/22.png">  </p><ol start="4"><li><p>é‡è½½namedæœåŠ¡<code>service named restart</code>  </p></li><li><p>åœ¨å®¢æˆ·æœºè®¾ç½®æˆç½‘æ®µä¸º<code>192.168.1.</code><br><img src="/medias/drawing-bed/dns/23.png"><br>æ³¨ï¼šè‹¥<code>ping</code>ä¸é€šåˆ†ç¦»è§£ææœåŠ¡å™¨ç«¯çš„<code>1</code>ç½‘æ®µ<code>IP</code>  </p></li></ol><p>1)åœ¨ç½‘å¡ä¸­æ·»åŠ <code>GETWAY</code>æŒ‡å‘åˆ†ç¦»è§£ææœåŠ¡å™¨åŒç½‘æ®µ<code>IP</code><br>2)æ·»åŠ é»˜è®¤è·¯ç”±æŒ‡å‘ åˆ†ç¦»è§£ææœåŠ¡å™¨ç«¯çš„<code>1</code>ç½‘æ®µ<code>IP</code><br>3)å°†<code>å®¢æˆ·æœº</code>å’Œ<code>æœåŠ¡ç«¯</code>çš„<code>wmnet</code>è°ƒæˆåŒä¸€ä¸ª<br><img src="/medias/drawing-bed/dns/24.png"><br>pingé€š å³å¯  </p><ol start="6"><li>éªŒè¯  </li></ol><p>1)åœ¨å®¢æˆ·æœºçš„<code>resolv.conf</code>é…ç½®æ–‡ä»¶ä¸­å¡«å…¥<code>192.168.0.39</code>DNSæœåŠ¡å™¨IP<br><img src="/medias/drawing-bed/dns/25.png"><br><img src="/medias/drawing-bed/dns/26.png"><br>2)åœ¨å®¢æˆ·æœºçš„<code>resolv.conf</code>é…ç½®æ–‡ä»¶ä¸­å¡«å…¥<code>192.168.1.123</code>NDSæœåŠ¡å™¨IP<br><img src="/medias/drawing-bed/dns/27.png"><br><img src="/medias/drawing-bed/dns/28.png">  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> dns </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>rsync+inotifyå®æ—¶åŒæ­¥</title>
      <link href="/posts/7251.html"/>
      <url>/posts/7251.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="rsync-inotifyå®æ—¶åŒæ­¥"><a href="#rsync-inotifyå®æ—¶åŒæ­¥" class="headerlink" title="rsync+inotifyå®æ—¶åŒæ­¥"></a>rsync+inotifyå®æ—¶åŒæ­¥</h1><h1 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h1><p>&emsp;&emsp;rsyncæ˜¯Linuxç³»ç»Ÿä¸‹çš„æ–‡ä»¶åŒæ­¥å’Œæ•°æ®ä¼ è¾“å·¥å…·ï¼Œå®ƒé‡‡ç”¨â€rsyncç®—æ³•â€ä½¿å®¢æˆ·æœºå’ŒæœåŠ¡å™¨ä¹‹é—´å®ç°æ–‡ä»¶åŒæ­¥ï¼Œå¯ä»¥æ‰§è¡Œå®Œæ•´å¤‡ä»½æˆ–å¢é‡å¤‡ä»½ã€‚  </p><h2 id="åŠŸèƒ½ç‰¹æ€§ï¼š"><a href="#åŠŸèƒ½ç‰¹æ€§ï¼š" class="headerlink" title="åŠŸèƒ½ç‰¹æ€§ï¼š"></a>åŠŸèƒ½ç‰¹æ€§ï¼š</h2><p>&emsp;&emsp;å¯ä»¥é•œåƒä¿å­˜æ•´ä¸ªç›®å½•æ ‘å’Œæ–‡ä»¶ç³»ç»Ÿ<br>&emsp;&emsp;å¯ä»¥å¢é‡åŒæ­¥æ•°æ®ï¼Œæ–‡ä»¶ä¼ è¾“æ•ˆç‡é«˜ï¼Œå› è€ŒåŒæ­¥æ—¶é—´çŸ­<br>&emsp;&emsp;å¯ä»¥ä¿æŒåŸæœ‰æ–‡ä»¶çš„æƒé™ã€æ—¶é—´ç­‰å±æ€§<br>&emsp;&emsp;åŠ å¯†ä¼ è¾“æ•°æ®ï¼Œä¿è¯äº†æ•°æ®çš„å®‰å…¨æ€§<br>&emsp;&emsp;å¯ä»¥ä½¿ç”¨rcpã€sshç­‰æ–¹å¼æ¥ä¼ è¾“æ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›´æ¥é€šè¿‡socketè¿æ¥ä¼ è¾“æ–‡ä»¶<br>&emsp;&emsp;æ”¯æŒåŒ¿åä¼ è¾“  </p><h2 id="rsyncçš„ä¼˜ç‚¹ä¸ä¸è¶³"><a href="#rsyncçš„ä¼˜ç‚¹ä¸ä¸è¶³" class="headerlink" title="rsyncçš„ä¼˜ç‚¹ä¸ä¸è¶³"></a>rsyncçš„ä¼˜ç‚¹ä¸ä¸è¶³</h2><p>&emsp;&emsp;ä¸ä¼ ç»Ÿçš„cpã€tarå¤‡ä»½æ–¹å¼ç›¸æ¯”ï¼Œrsyncå…·æœ‰å®‰å…¨æ€§é«˜ã€å¤‡ä»½è¿…é€Ÿã€æ”¯æŒå¢é‡å¤‡ä»½ç­‰ä¼˜ç‚¹ï¼Œé€šè¿‡rsyncå¯ä»¥è§£å†³å¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„æ•°æ®å¤‡ä»½éœ€æ±‚ï¼Œä¾‹å¦‚ï¼Œå®šæœŸåœ°å¤‡ä»½æ–‡ä»¶æœåŠ¡å™¨æ•°æ®åˆ°è¿œç¨‹æœåŠ¡å™¨ï¼Œå¯¹æœ¬åœ°ç£ç›˜å®šæœŸè¿›è¡Œæ•°æ®é•œåƒç­‰ã€‚<br>&emsp;&emsp;éšç€åº”ç”¨ç³»ç»Ÿè§„æ¨¡çš„ä¸æ–­æ‰©å¤§ï¼Œå¯¹æ•°æ®çš„å®‰å…¨æ€§å’Œå¯é æ€§æå‡ºäº†æ›´é«˜çš„è¦æ±‚ï¼Œrsyncåœ¨é«˜ç«¯ä¸šåŠ¡ç³»ç»Ÿä¸­æš´éœ²å‡ºå¾ˆå¤šä¸è¶³ï¼ŒrsyncåŒæ­¥æ•°æ®æ—¶è¦æ‰«ææ‰€æœ‰æ–‡ä»¶ï¼Œç„¶åå†è¿›è¡Œå·®é‡ä¼ è¾“ã€‚å¦‚æœæ–‡ä»¶æ•°é‡è¾¾åˆ°ç™¾ä¸‡æˆ–åƒä¸‡çº§ï¼Œæ˜¯éå¸¸è€—æ—¶çš„ï¼Œè€Œä¸”å‘ç”Ÿå˜åŒ–çš„å¾€å¾€æ˜¯å…¶ä¸­å¾ˆå°‘çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤rsyncæ˜¯éå¸¸ä½æ•ˆçš„æ–¹å¼ï¼Œå…¶æ¬¡rsyncä¸èƒ½å®æ—¶ç›‘æµ‹åŒæ­¥æ•°æ®ï¼Œè™½ç„¶å®ƒå¯ä»¥é€šè¿‡Linuxå®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è§¦å‘åŒæ­¥ï¼Œä½†ä¸¤æ¬¡è§¦å‘åŠ¨ä½œä¸€å®šä¼šæœ‰æ—¶é—´å·®ï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ•°æ®å‡ºç°ä¸ä¸€è‡´ï¼ŒåŸºäºä»¥ä¸ŠåŸå› rsync+inotifyç»„åˆå°±å‡ºç°äº†  </p><h1 id="åˆè¯†inotify"><a href="#åˆè¯†inotify" class="headerlink" title="åˆè¯†inotify"></a>åˆè¯†inotify</h1><p>&emsp;&emsp;inotifyæ˜¯ä¸€ç§å¼ºå¤§çš„ã€ç»†ç²’åº¦çš„ã€å¼‚æ­¥çš„æ–‡ä»¶ç³»ç»Ÿæ—¶é—´ç›‘æ§æœºåˆ¶ï¼ŒLinuxå†…æ ¸ä»2.6.13ç‰ˆæœ¬èµ·ï¼ŒåŠ å…¥äº†å¯¹inotifyçš„æ”¯æŒã€‚é€šè¿‡inotifyå¯ä»¥ç›‘æ§æ–‡ä»¶ç³»ç»Ÿä¸­æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€ç§»åŠ¨ç­‰å„ç§ç»†å¾®äº‹ä»¶ï¼Œåˆ©ç”¨è¿™ä¸ªå†…æ ¸æ¥å£ï¼Œç¬¬ä¸‰æ–¹è½¯ä»¶å¯ä»¥ç›‘æ§æ–‡ä»¶ç³»ç»Ÿä¸‹æ–‡ä»¶çš„å„ç§å˜åŒ–æƒ…å†µï¼Œinotify-toolså°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªç¬¬ä¸‰æ–¹è½¯ä»¶ã€‚<br>&emsp;&emsp;rsyncå¯ä»¥å®æ—¶è§¦å‘å¼çš„æ–‡ä»¶åŒæ­¥ï¼Œä½†æ˜¯é€šè¿‡crontabå®ˆæŠ¤è¿›ç¨‹è¿›è¡Œè§¦å‘ï¼ŒåŒæ­¥æ•°æ®å’Œå®é™…æ•°æ®ä¼šæœ‰å·®å¼‚ï¼Œè€Œinotifyå¯ä»¥ç›‘æ§æ–‡ä»¶ç³»ç»Ÿçš„å„ç§å˜åŒ–ï¼Œå½“æ–‡ä»¶æœ‰ä»»ä½•å˜åŠ¨æ—¶ï¼Œä¼šè§¦å‘rsyncåŒæ­¥ï¼Œè¿™æ ·åˆšå¥½è§£å†³äº†åŒæ­¥æ•°æ®çš„å®æ—¶  </p><p>å‡†å¤‡ï¼š<br>å‘å¸ƒç«¯ï¼šå®‰è£…<code>inotify-tools</code>(epel)ã€<code>rsync</code>ã€<code>xinetd</code><br><code>ssh-keygen -t rsa -b 2048</code>(ä¸€è·¯å›è½¦)<br><img src="/medias/drawing-bed/rsync/0.png">  </p><p><code>ssh-copy-id -i .ssh/id_rsa.pub 192.168.0.123</code>(å‘é€ç»™åŒæ­¥ç«¯)<br><img src="/medias/drawing-bed/rsync/1.png">  </p><p><code>ssh 192.168.0.123</code>(éªŒè¯)<br><img src="/medias/drawing-bed/rsync/2.png">  </p><p><code>vim /etc/rsync.pass</code>(æ ‡è®°1ã€å†™å…¥å¯†ç )(600)<br><img src="/medias/drawing-bed/rsync/3.png">  </p><p><code>mkdir -p /test/dir</code>(åˆ›å»ºåŒæ­¥ç›®å½•)<br><code>vim rsync.sh</code>(755)<br><img src="/medias/drawing-bed/rsync/4.png">  </p><p>ï¼ˆsrcæŒ‡å®šå‘å¸ƒå‡ºå»çš„åŒæ­¥ç›®å½•ï¼‰<br><code>bash rsync.sh &amp;</code>(æ”¾å…¥åå°è¿è¡Œ)<br><img src="/medias/drawing-bed/rsync/5.png">  </p><p>åŒæ­¥ç«¯ï¼šå®‰è£…<code>rsync</code>ã€<code>xinetd</code>(å¯åŠ¨æœåŠ¡)<br><code>vim /etc/xinetd.d/rsync</code>(no)<br><img src="/medias/drawing-bed/rsync/6.png">  </p><p><code>vim /etc/rsync.pass</code>(user:å¯†ç ã€åŒæ ‡è®°1å¯¹åº”)(600)<br><img src="/medias/drawing-bed/rsync/7.png">  </p><p><code>vim /etc/rsyncd.conf</code>ï¼ˆpathæŒ‡å®šä»å‘å¸ƒç«¯ç›®å½• åŒæ­¥è¿‡æ¥çš„å†…å®¹ çš„å­˜æ”¾ç›®å½•ï¼‰<br><img src="/medias/drawing-bed/rsync/8.png">  </p><p>éªŒè¯ï¼š<br><img src="/medias/drawing-bed/rsync/9.png"><br><img src="/medias/drawing-bed/rsync/10.png">  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> rsync </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨ Git å‡å°‘å­˜å‚¨åº“å¤§å°</title>
      <link href="/posts/7d7a.html"/>
      <url>/posts/7d7a.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ä½¿ç”¨-BFG-å­˜å‚¨åº“æ¸…æ´å‰‚"><a href="#ä½¿ç”¨-BFG-å­˜å‚¨åº“æ¸…æ´å‰‚" class="headerlink" title="ä½¿ç”¨ BFG å­˜å‚¨åº“æ¸…æ´å‰‚"></a>ä½¿ç”¨ BFG å­˜å‚¨åº“æ¸…æ´å‰‚</h1><ol><li><p>ä»å…¶å¼€æºç¤¾åŒºå­˜å‚¨åº“å®‰è£… BFGã€‚</p></li><li><p>å¯¼èˆªåˆ°å­˜å‚¨åº“ï¼š<br><code>cd my_repository/</code></p></li><li><p>æ›´æ”¹ä¸ºè¦ä»ä¸­åˆ é™¤å¤§æ–‡ä»¶çš„åˆ†æ”¯ï¼š<br><code>git checkout master</code></p></li><li><p>åˆ›å»ºä»åˆ†æ”¯ä¸­åˆ é™¤å¤§æ–‡ä»¶çš„æäº¤ï¼ˆå¦‚æœè¯¥æäº¤ä»ç„¶å­˜åœ¨ï¼‰ï¼š<br><code>git rm path/to/big_file.mpg</code><br><code>git commit -m &#39;Remove unneeded large file&#39;</code></p></li><li><p>é‡å†™å†å²è®°å½•ï¼š<br><code>bfg --delete-files path/to/big_file.mpg</code><br>å¯¹è±¡æ˜ å°„æ–‡ä»¶å°†å†™å…¥ã€‚ä¿æŒå®ƒå‘¨å›´ä½ éœ€è¦å®ƒçš„æœ€åä¸€æ­¥ï¼<code>object-id-map.old-new.txt</code></p></li><li><p>å¼ºåˆ¶å°†æ›´æ”¹æ¨é€åˆ° GitLabï¼š<br><code>git push --force-with-lease origin master</code><br>å¦‚æœæ­¤æ­¥éª¤å¤±è´¥ï¼Œåˆ™æœ‰äººåœ¨æ‚¨é‡å†™å†å²è®°å½•æ—¶æ›´æ”¹äº†åˆ†æ”¯ã€‚æ‚¨å¯ä»¥è¿˜åŸåˆ†æ”¯å¹¶é‡æ–°è¿è¡Œ BFG ä»¥ä¿ç•™å…¶æ›´æ”¹ï¼Œæˆ–ä½¿ç”¨æ¥è¦†ç›–å…¶æ›´æ”¹ã€‚<code>mastergit push --force</code></p></li><li><p>å¯¼èˆªåˆ°é¡¹ç›® &gt; è®¾ç½® &gt; å­˜å‚¨åº“ &gt; å­˜å‚¨åº“æ¸…ç†ï¼š<br><img src="/medias/drawing-bed/notes/0.png"><br>ä¸Šä¼ æ–‡ä»¶ï¼Œç„¶åæŒ‰â€å¼€å§‹æ¸…ç†â€ã€‚è¿™å°†åˆ é™¤å¯¹æ—§æäº¤çš„ä»»ä½•å†…éƒ¨ Git å¼•ç”¨ï¼Œå¹¶é’ˆå¯¹å­˜å‚¨åº“è¿è¡Œã€‚å®Œæˆåï¼Œæ‚¨å°†æ”¶åˆ°ä¸€å°ç”µå­é‚®ä»¶ã€‚<code>object-id-map.old-new.txtgit gc</code></p></li></ol><p>æ³¨æ„ï¼šæ­¤è¿‡ç¨‹å°†ä» GitLab çš„ç¼“å­˜å’Œæ•°æ®åº“ä¸­åˆ é™¤ä¸€äº›é‡å†™çš„æäº¤å‰¯æœ¬ï¼Œä½†åœ¨è¦†ç›–èŒƒå›´ä¸Šä»ç„¶å­˜åœ¨è®¸å¤šå·®è·ç›®å‰ï¼ŒæŸäº›å‰¯æœ¬å¯èƒ½ä¼šæ— é™æœŸåœ°ä¿ç•™ã€‚æ¸…é™¤å®ä¾‹ç¼“å­˜å¯èƒ½æœ‰åŠ©äºåˆ é™¤å…¶ä¸­ä¸€äº›ç¼“å­˜ï¼Œä½†å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œä¸åº”ä¾èµ–å®ƒï¼</p><h1 id="ä½¿ç”¨git-filter-branch"><a href="#ä½¿ç”¨git-filter-branch" class="headerlink" title="ä½¿ç”¨git filter-branch"></a>ä½¿ç”¨git filter-branch</h1><ol><li><p>å¯¼èˆªåˆ°å­˜å‚¨åº“ï¼š<br><code>cd my_repository/</code></p></li><li><p>æ›´æ”¹ä¸ºè¦ä»ä¸­åˆ é™¤å¤§æ–‡ä»¶çš„åˆ†æ”¯ï¼š<br><code>git checkout master</code></p></li><li><p>ç”¨äºåˆ é™¤å¤§æ–‡ä»¶ï¼šfilter-branch<br><code>git filter-branch --force --tree-filter &#39;rm -f path/to/big_file.mpg&#39; HEAD</code><br><code>git filter-branch --force --tree-filter &#39;rm -rf target/&#39; HEAD</code></p></li><li><p>æŒ‡ç¤º Git æ¸…é™¤ä¸éœ€è¦çš„æ•°æ®ï¼š<br><code>git reflog expire --expire=now --all &amp;&amp; git gc --prune=now --aggressive</code></p></li><li><p>æœ€åï¼Œå¼ºåˆ¶æ¨é€åˆ°å­˜å‚¨åº“(å»é™¤ä¿æŠ¤åˆ†æ”¯å†æ¨é€)ï¼š<br><code>git push --force origin master</code></p></li></ol><p>æ‚¨çš„å­˜å‚¨åº“ç°åœ¨åº”ä½äºå¤§å°é™åˆ¶ã€‚</p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> gitlab </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ftpæ–‡ä»¶ä¼ è¾“</title>
      <link href="/posts/ee41.html"/>
      <url>/posts/ee41.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="FTPæ–‡ä»¶ä¼ è¾“æœåŠ¡"><a href="#FTPæ–‡ä»¶ä¼ è¾“æœåŠ¡" class="headerlink" title="FTPæ–‡ä»¶ä¼ è¾“æœåŠ¡"></a>FTPæ–‡ä»¶ä¼ è¾“æœåŠ¡</h1><p>æ¦‚è¿°ï¼šFTPï¼ˆæ–‡ä»¶ä¼ è¾“åè®®ï¼‰æ˜¯å…¸å‹çš„C/Sæ¶æ„çš„åº”ç”¨å±‚åè®®ï¼Œéœ€è¦ç”±æœåŠ¡ç«¯è½¯ä»¶ã€å®¢æˆ·ç«¯è½¯ä»¶ä¸¤éƒ¨åˆ†å…±åŒå®ç°æ–‡ä»¶ä¼ è¾“åŠŸèƒ½<br>FTPè¿æ¥åŠä¼ è¾“æ¨¡å¼<br>&emsp;&emsp;FTPçš„ä¸¤ä¸ªç«¯å£ï¼š<br>&emsp;&emsp;æ§åˆ¶è¿æ¥ï¼šTCPçš„21å·ç«¯å£ï¼Œç”¨äºæ§åˆ¶è¿æ¥ï¼Œå‘é€FTPå‘½ä»¤ä¿¡æ¯ã€‚<br>&emsp;&emsp;æ•°æ®è¿æ¥ï¼šTCPçš„20å·ç«¯å£ï¼Œç”¨äºä¸Šä¼ ã€ä¸‹è½½æ•°æ®<br>ä¸€èˆ¬è§‚æµ‹FTPæ—¶ï¼Œåªè§‚æµ‹21å·ç«¯å£å³å¯ï¼Œå­˜åœ¨è¯´æ˜æœåŠ¡æ­£åœ¨è¿è¡Œã€‚<br>æ•°æ®è¿æ¥çš„å»ºç«‹ç±»å‹ï¼šä¸»åŠ¨æ¨¡å¼ã€è¢«åŠ¨æ¨¡å¼ï¼ˆä»¥æœåŠ¡å™¨çš„è§’åº¦ï¼‰  </p><ol><li><p>ä¸»åŠ¨æ¨¡å¼ï¼šæœåŠ¡å™¨ä¸»åŠ¨å‘èµ·æ•°æ®è¿æ¥<br>&emsp;&emsp;é¦–å…ˆç”±å®¢æˆ·æœºå‘æœåŠ¡ç«¯çš„21å·ç«¯å£å»ºç«‹FTPæ§åˆ¶è¿æ¥ï¼Œå½“éœ€è¦æ•°æ®è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯ä»¥PORTå‘½ä»¤å‘ŠçŸ¥æœåŠ¡å™¨ï¼Œâ€å®¢æˆ·ç«¯æ‰“å¼€äº†æŸä¸ªç«¯å£ï¼Œè¯·æ±‚æœåŠ¡ç«¯è¿‡æ¥è¿æ¥â€ï¼Œäºæ˜¯æœåŠ¡å™¨ä»20å·ç«¯å£å‘å®¢æˆ·ç«¯çš„è¯¥ç«¯å£å‘é€è¯·æ±‚å¹¶å»ºç«‹æ•°æ®è¿æ¥ã€‚è¿™å…¶ä¸­çš„â€æŸç«¯å£â€æ˜¯å®¢æˆ·ç«¯ä»»æ„æŒ‘é€‰çš„ä¸€ä¸ªæœªè¢«ä½¿ç”¨çš„éšæœºç«¯å£ã€‚  </p></li><li><p>è¢«åŠ¨æ¨¡å¼ï¼šæœåŠ¡å™¨è¢«åŠ¨ç­‰å¾…æ•°æ®è¿æ¥<br>&emsp;&emsp;å¦‚æœå®¢æˆ·æœºæ‰€åœ¨ç½‘ç»œçš„é˜²ç«å¢™ç¦æ­¢ä¸»åŠ¨æ¨¡å¼è¿æ¥ï¼Œé€šå¸¸ä¼šä½¿ç”¨è¢«åŠ¨æ¨¡å¼ï¼Œé¦–å…ˆç”±å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯çš„21å·ç«¯å£å»ºç«‹FTPæ§åˆ¶è¿æ¥ï¼Œå½“éœ€è¦æ•°æ®è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨ä»¥PASVå‘½ä»¤å‘ŠçŸ¥å®¢æˆ·ç«¯â€æœåŠ¡ç«¯æ‰“å¼€äº†æŸç«¯å£ï¼Œè¯·æ±‚å®¢æˆ·ç«¯æ¥è¿æ¥â€ï¼Œäºæ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨çš„è¯¥ç«¯å£ï¼ˆé20å·ç«¯å£ï¼‰å‘é€è¯·æ±‚å¹¶å»ºç«‹æ•°æ®è¿æ¥ã€‚<br>&emsp;&emsp;è¿™å…¶ä¸­çš„â€æŸç«¯å£â€æ˜¯æœåŠ¡ç«¯ä»»æ„çš„ä¸€ä¸ªæœªè¢«ä½¿ç”¨çš„éšæœºç«¯å£<br>&emsp;&emsp;å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯å»ºç«‹å¥½æ•°æ®è¿æ¥ä¹‹åå°±å¯ä»¥æ ¹æ®æ§åˆ¶è¿æ¥ä¸­å‘é€çš„FTPå‘½ä»¤ä¸Šä¼ æˆ–ä¸‹è½½æ–‡ä»¶äº†ã€‚<br>&emsp;&emsp;åœ¨ä¼ è¾“æ–‡ä»¶æ—¶ï¼Œæ ¹æ®æ˜¯å¦è¿›è¡Œå­—ç¬¦è½¬æ¢ï¼Œåˆ†ä¸ºæ–‡æœ¬æ¨¡å¼å’ŒäºŒè¿›åˆ¶æ¨¡å¼ã€‚ä½¿ç”¨äºŒè¿›åˆ¶æ¨¡å¼æ¯”æ–‡æœ¬æ¨¡å¼æ›´æœ‰æ•ˆç‡ï¼Œå¤§å¤šæ•°FTPå®¢æˆ·ç«¯å·¥å…·å¯ä»¥æ ¹æ®æ–‡æœ¬ç±»å‹è‡ªåŠ¨é€‰é¡¹æ–‡ä»¶ä¼ è¾“æ¨¡å¼ï¼Œè€Œæ— éœ€ç”¨æˆ·æ‰‹å·¥æŒ‡å®š  </p></li></ol><h2 id="FTPç”¨æˆ·ç±»å‹åˆ†ä¸‰ç±»ï¼š"><a href="#FTPç”¨æˆ·ç±»å‹åˆ†ä¸‰ç±»ï¼š" class="headerlink" title="FTPç”¨æˆ·ç±»å‹åˆ†ä¸‰ç±»ï¼š"></a>FTPç”¨æˆ·ç±»å‹åˆ†ä¸‰ç±»ï¼š</h2><ol><li><p>ä½¿ç”¨FTPå®¢æˆ·ç«¯è½¯ä»¶è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œé€šå¸¸è¦ç”¨åˆ°ä¸€ç±»ç‰¹æ®Šçš„ç”¨æˆ·è´¦å·ï¼Œå…¶ç”¨æˆ·åä¸ºftpæˆ–anonymousï¼Œæä¾›ä»»æ„å¯†ç ï¼ˆåŒ…æ‹¬ç©ºå¯†ç ï¼‰éƒ½å¯ä»¥é€šè¿‡FTPæœåŠ¡å™¨çš„éªŒè¯ï¼Œè¿™æ ·çš„ç”¨æˆ·æˆä¸ºâ€åŒ¿åç”¨æˆ·â€<br>åŒ¿åç”¨æˆ·ä¸€èˆ¬ç”¨äºæä¾›å…¬å…±æ–‡ä»¶çš„ä¸‹è½½ï¼Œå¦‚ï¼Œæä¾›ä¸€äº›å…è´¹è½¯ä»¶ã€å­¦ä¹ èµ„æ–™ä¸‹è½½çš„ç«™ç‚¹ã€‚  </p></li><li><p>é™¤äº†ä¸éœ€è¦å¯†ç éªŒè¯çš„åŒ¿åç”¨æˆ·ä»¥å¤–ï¼ŒFTPæœåŠ¡å™¨è¿˜å¯ä»¥ç›´æ¥ä½¿ç”¨æœ¬æœºçš„ç³»ç»Ÿç”¨æˆ·è´¦å·è¿›è¡ŒéªŒè¯ï¼Œè¿™äº›ç”¨æˆ·é€šå¸¸è¢«ç§°ä¸ºâ€æœ¬åœ°ç”¨æˆ·â€  </p></li><li><p>æœ‰äº›FTPæœåŠ¡å™¨è½¯ä»¶è¿˜å¯ä»¥ç»´æŠ¤ä¸€ä»½ç‹¬ç«‹çš„ç”¨æˆ·æ•°æ®åº“æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ç³»ç»Ÿç”¨æˆ·è´¦å·ï¼Œè¿™äº›ä½äºç‹¬ç«‹æ•°æ®åº“æ–‡ä»¶ä¸­çš„FTPç”¨æˆ·è´¦å·ï¼Œé€šå¸¸è¢«ç§°ä¸ºâ€è™šæ‹Ÿç”¨æˆ·â€ï¼Œé€šè¿‡ä½¿ç”¨è™šæ‹Ÿç”¨æˆ·å°†FTPè´¦æˆ·ä¸Linuxç³»ç»Ÿè´¦æˆ·çš„å…³è”æ€§å°†è‡³æœ€ä½ï¼Œå¢åŠ äº†ç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚  </p></li></ol><h2 id="FTPæœåŠ¡å™¨è½¯ä»¶çš„ç§ç±»"><a href="#FTPæœåŠ¡å™¨è½¯ä»¶çš„ç§ç±»" class="headerlink" title="FTPæœåŠ¡å™¨è½¯ä»¶çš„ç§ç±»"></a>FTPæœåŠ¡å™¨è½¯ä»¶çš„ç§ç±»</h2><p>åœ¨windowsç³»ç»Ÿä¸­ï¼Œå¸¸è§çš„FTPæœåŠ¡å™¨è½¯ä»¶åŒ…æ‹¬File zilla serviceã€serv-Uç­‰<br>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œvsftpdæ˜¯ç›®å‰åœ¨Linux/Unixé¢†åŸŸåº”ç”¨ååˆ†å¹¿æ³›çš„ä¸€æ¬¾FTPæœåŠ¡è½¯ä»¶ã€‚<br>vsftpdæœåŠ¡çš„å…¨åæ¥æºäºâ€Very Secure FTP Daemonâ€ï¼Œè¯¥è½¯ä»¶é’ˆå¯¹å®‰å…¨æ–¹é¢åšäº†å¤§é‡çš„è®¾è®¡ï¼Œé™¤äº†å®‰å…¨æ€§å¤–ï¼Œvsftpdåœ¨é€Ÿåº¦å’Œç¨³å®šæ€§æ–¹é¢çš„è¡¨ç°ä¹Ÿç›¸å½“çªå‡ºã€‚  </p><h2 id="FTPå®¢æˆ·ç«¯å·¥å…·çš„ç§ç±»"><a href="#FTPå®¢æˆ·ç«¯å·¥å…·çš„ç§ç±»" class="headerlink" title="FTPå®¢æˆ·ç«¯å·¥å…·çš„ç§ç±»"></a>FTPå®¢æˆ·ç«¯å·¥å…·çš„ç§ç±»</h2><p>æœ€ç®€å•çš„FTPå®¢æˆ·ç«¯å·¥å…·è«è¿‡äºâ€ftpâ€å‘½ä»¤ç¨‹åºäº†ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰å¤§é‡çš„å›¾å½¢åŒ–FTPå®¢æˆ·ç«¯å·¥å…·ï¼ŒWindowsä¸­æ¯”è¾ƒå¸¸ç”¨çš„åŒ…æ‹¬â€Cuter FTPâ€ã€â€FlashFXPâ€ã€â€LeapFTPâ€ã€â€Filezillaâ€ç­‰ç­‰ã€‚<br>è¿˜æœ‰ä¸€äº›ä¸‹è½½å·¥å…·è½¯ä»¶ï¼Œå¦‚â€Flash Getâ€ã€â€wgetâ€ç­‰ï¼ŒåŒ…æ‹¬å¤§å¤šæ•°ç½‘é¡µæµè§ˆå™¨ç¨‹åºï¼Œéƒ½æ”¯æŒé€šè¿‡FTPåè®®ä¸‹è½½æ–‡ä»¶ï¼Œä½†å› ä¸å…·å¤‡FTPä¸Šä¼ ç­‰ç®¡ç†åŠŸèƒ½ï¼Œé€šå¸¸ä¸ç§°ä¸ºFTPå®¢æˆ·ç«¯å·¥å…·ã€‚  </p><h1 id="vsftpdæœåŠ¡åŸºç¡€"><a href="#vsftpdæœåŠ¡åŸºç¡€" class="headerlink" title="vsftpdæœåŠ¡åŸºç¡€"></a>vsftpdæœåŠ¡åŸºç¡€</h1><h2 id="vsftpdçš„é…ç½®æ–‡ä»¶"><a href="#vsftpdçš„é…ç½®æ–‡ä»¶" class="headerlink" title="vsftpdçš„é…ç½®æ–‡ä»¶"></a>vsftpdçš„é…ç½®æ–‡ä»¶</h2><ol><li>ç”¨æˆ·åˆ—è¡¨æ–‡ä»¶<code>ftpusers</code>å’Œ<code>user_list</code><br>åœ¨<code>ftpusers</code>ã€<code>user_list</code>æ–‡ä»¶ä¸­ï¼Œå„è‡ªè®°å½•äº†è‹¥å¹²ä¸ªFTPç”¨æˆ·çš„è´¦å·åç§°ï¼Œä¸¤ä¸ªæ–‡ä»¶éƒ½ç”¨äº<code>FTP</code>ç™»å½•æ§åˆ¶ï¼Œä½†æ˜¯æ§åˆ¶æ–¹å¼å­˜åœ¨ä¸€äº›å·®åˆ«ã€‚<br><code>ftpusers</code>æ–‡ä»¶ï¼šæ­¤æ–‡ä»¶ä¸­åˆ—å‡ºçš„ç”¨æˆ·å°†ç¦æ­¢ç™»å½•<code>vsftpd</code>æœåŠ¡å™¨ï¼Œä¸ç®¡è¯¥ç”¨æˆ·æ˜¯å¦åœ¨<code>user_list</code>æ–‡ä»¶ä¸­å‡ºç°ï¼Œé»˜è®¤å·²ç»åŒ…æ‹¬<code>root</code>ã€<code>bin</code>ã€<code>daemon</code>ç­‰ç”¨äºç³»ç»Ÿè¿è¡Œçš„ç‰¹æ®Šç”¨æˆ·ï¼ˆå°±å¦‚åŒé»‘åå•ï¼‰ã€‚  </li></ol><p><code>user_list</code>æ–‡ä»¶ï¼šæ­¤æ–‡ä»¶ä¸­åŒ…å«çš„ç”¨æˆ·å¯èƒ½è¢«ç¦æ­¢ç™»å½•ï¼Œä¹Ÿå¯èƒ½è¢«å…è®¸ç™»å½•ï¼Œå…·ä½“å–å†³å»ä¸»é…ç½®æ–‡ä»¶<code>vsftpd.conf</code>ä¸­çš„è®¾ç½®ï¼Œå½“å­˜åœ¨<code>userlist_enable=YES</code>çš„é…ç½®é¡¹æ—¶ï¼Œ<code>user_list</code>åˆ—è¡¨æ–‡ä»¶æ–¹å¯ç”Ÿæ•ˆï¼›è‹¥æŒ‡å®š<code>userlist_deny=YES</code>åˆ™ä»…ç¦æ­¢æ­¤æ–‡ä»¶åˆ—è¡¨ä¸­çš„ç”¨æˆ·ç­‰å½•ï¼›è‹¥æŒ‡å®š<code>userlist_deny=NO</code>ï¼Œåˆ™ä»…å…è®¸æ­¤æ–‡ä»¶åˆ—è¡¨ä¸­çš„ç”¨æˆ·ç­‰å½•ã€‚  </p><ol start="2"><li>ä¸»é…ç½®æ–‡ä»¶<code>vsftpd.conf</code><br>åœ¨vsftpdçš„ä¸»é…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®è¡Œé‡‡ç”¨â€é…ç½®é¡¹=å‚æ•°â€çš„å½¢å¼ï¼Œä¾‹ï¼š  <pre class="line-numbers language-conf" data-language="conf"><code class="language-conf"># ç”¨äºåŒ¿åç”¨æˆ·é…ç½®é¡¹ï¼šanonymous_enable&#x3D;YES   # è®¾ç½®æ˜¯å¦å…è®¸åŒ¿åè®¿é—®anon_umask&#x3D;022   # è®¾ç½®åŒ¿åç”¨æˆ·æ‰€ä¸Šä¼ æ–‡ä»¶çš„é»˜è®¤umaskå€¼anon_mkdir_write_enable&#x3D;YES   # æ˜¯å¦å…è®¸åŒ¿åç”¨æˆ·æœ‰åˆ›å»ºç›®å½•çš„å†™å…¥æƒé™ã€‚anon_other_write_enable&#x3D;YES   # æ˜¯å¦å…è®¸åŒ¿åç”¨æˆ·å¯¹æ–‡ä»¶æ”¹åã€è¦†ç›–åŠåˆ é™¤æ–‡ä»¶ç­‰æ“ä½œã€‚# ç”¨äºæœ¬åœ°ç”¨æˆ·éªŒè¯é…ç½®é¡¹ï¼šlocal_enable&#x3D;YES   # æ˜¯å¦å…è®¸æœ¬åœ°ç³»ç»Ÿç”¨æˆ·è®¿é—®local_umask&#x3D;022   # è®¾ç½®æœ¬åœ°ç”¨æˆ·æ‰€ä¸Šä¼ æ–‡ä»¶çš„é»˜è®¤umaskå€¼chroot_local_user&#x3D;YES   # æ˜¯å¦å°†FTPæœ¬åœ°ç”¨æˆ·ç¦é”¢åœ¨å®¶ç›®å½•ä¸­# å…¨å±€é…ç½®é¡¹ï¼šlisten&#x3D;YES   # æ˜¯å¦ä»¥ç‹¬ç«‹è¿è¡Œçš„æ–¹å¼ç›‘å¬æœåŠ¡listen_sddress&#x3D;0.0.0.0   # è®¾ç½®ç›‘å¬FTPæœåŠ¡çš„IPåœ°å€listen_port&#x3D;21   # è®¾ç½®ç›‘å¬FTPæœåŠ¡çš„ç«¯å£å·write_enable&#x3D;YES   # å¯ç”¨ä»»ä½•å½¢å¼çš„å†™å…¥æƒé™ï¼Œå¦‚ä¸Šä¼ ã€åˆ é™¤æ–‡ä»¶ç­‰download_enable&#x3D;YES   # æ˜¯å¦å…è®¸ä¸‹è½½æ–‡ä»¶ï¼ˆå»ºç«‹ä»…é™äºæµè§ˆã€ä¸Šä¼ çš„FTPæœåŠ¡å™¨æ—¶å¯å°†å…¶è®¾ç½®ä¸º&quot;NO&quot;ï¼‰<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>vsftpdæœåŠ¡å¯ä»¥ä½¿ç”¨Linuxä¸»æœºä¸­çš„ç³»ç»Ÿç”¨æˆ·è´¦å·ä½œä¸ºç™»å½•FTPçš„è´¦å·ï¼ŒåŒ…æ‹¬åŒ¿åè®¿é—®å’Œç”¨æˆ·éªŒè¯ä¸¤ç§å½¢å¼ã€‚<br>åŒ¿åè®¿é—®çš„FTPæœåŠ¡å™¨æ—¶ï¼Œä¸éœ€è¦å¯†ç ï¼Œä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨ï¼Œéå¸¸æ–¹ä¾¿ï¼Œå½“éœ€è¦æä¾›å…¬å¼€è®¿é—®çš„æ–‡ä»¶ä¸‹è½½èµ„æºæˆ–è€…è®©ç”¨æˆ·ä¸Šä¼ ä¸€äº›ä¸éœ€è¦ä¿å¯†çš„æ•°æ®èµ„æ–™æ—¶ï¼Œå¯ä»¥é€‰æ‹©æ­å»ºåŒ¿åFTPæœåŠ¡å™¨  </li></ol><h1 id="åŒ¿åè®¿é—®çš„FTPæœåŠ¡"><a href="#åŒ¿åè®¿é—®çš„FTPæœåŠ¡" class="headerlink" title="åŒ¿åè®¿é—®çš„FTPæœåŠ¡"></a>åŒ¿åè®¿é—®çš„FTPæœåŠ¡</h1><p>è®¾ç½®åŒ¿åè®¿é—®çš„FTPæœåŠ¡å™¨éœ€è¦ä¸‰æ­¥ï¼š  </p><ol><li>å‡†å¤‡åŒ¿åFTPè®¿é—®çš„ç›®å½•  </li><li>å¼€æ”¾åŒ¿åç”¨æˆ·é…ç½®å¹¶å¯åŠ¨vsftpdæœåŠ¡  </li><li>æµ‹è¯•åŒ¿åFTPè®¿é—®  </li></ol><h2 id="å…·ä½“æ­¥éª¤ï¼š"><a href="#å…·ä½“æ­¥éª¤ï¼š" class="headerlink" title="å…·ä½“æ­¥éª¤ï¼š"></a>å…·ä½“æ­¥éª¤ï¼š</h2><p>å‡†å¤‡åŒ¿åè®¿é—®çš„ç›®å½•é»˜è®¤<code>/var/ftp</code><br><code>/var/ftp/</code>ç›®å½•ä¸‹é»˜è®¤è®¾ç½®äº†ä¸€ä¸ªåä¸º<code>pub</code>çš„å­ç›®å½•ï¼Œå¯ä»¥ç»™åŒ¿åè®¿é—®FTPæ—¶æä¾›ä¸Šä¼ æ–‡ä»¶ä½¿ç”¨ã€‚<br>å°†<code>/var/ftp/pub</code>ç›®å½•èµ‹äºˆåŒ¿åç”¨æˆ·<code>ftp</code>å†™å…¥æƒé™<br><code>chown ftp /var/ftp/pub</code>  </p><h2 id="å¼€æ”¾åŒ¿åç”¨æˆ·é…ç½®å¹¶å¯åŠ¨vsftpdæœåŠ¡"><a href="#å¼€æ”¾åŒ¿åç”¨æˆ·é…ç½®å¹¶å¯åŠ¨vsftpdæœåŠ¡" class="headerlink" title="å¼€æ”¾åŒ¿åç”¨æˆ·é…ç½®å¹¶å¯åŠ¨vsftpdæœåŠ¡"></a>å¼€æ”¾åŒ¿åç”¨æˆ·é…ç½®å¹¶å¯åŠ¨vsftpdæœåŠ¡</h2><p>é…ç½®vsftpdæœåŠ¡æ—¶ï¼Œæ˜¯å¦å¼€æ”¾åŒ¿åFTPè®¿é—®å–å†³äºé…ç½®é¡¹â€anonymous_enableâ€ï¼Œåªè¦å°†å…¶è®¾ç½®ä¸ºâ€YESâ€å³å¯<br>å¯ç”¨æ­¤é¡¹åé»˜è®¤åªæœ‰è¯»å–æƒé™ï¼Œåªèƒ½æŸ¥çœ‹å’Œä¸‹è½½æ–‡ä»¶ï¼Œè‹¥è¦å…è®¸åŒ¿åç”¨æˆ·æœ‰ä¸Šä¼ æ–‡ä»¶çš„æƒé™ï¼Œå°±éœ€è¦å¼€æ”¾æ›´å¤šçš„é…ç½®ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ é¡¹ï¼š  </p><blockquote><p>write_enable=YES<br>anon_upload_enable=YES<br>anon_mkdir_write_enable=YES<br>anon_other_write_enable=YES  </p></blockquote><p>è¿™äº›é…ç½®é¡¹åº”æ ¹æ®å®é™…éœ€è¦é€‰æ‹©è®¾ç½®<br>ä¾‹å¦‚ï¼šè‹¥è¦è®¾ç½®vsftpdæœåŠ¡æä¾›åŒ¿åè®¿é—®ã€å…è®¸åŒ¿åç”¨æˆ·ä¸Šä¼ ã€ä¸‹è½½ï¼Œä½†ç¦æ­¢åˆ é™¤æ“ä½œï¼Œå¯ä»¥å¦‚ä¸‹è®¾ç½®ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/vsftpd/vsftpd.conf  <span class="token assign-left variable">anonymous_enable</span><span class="token operator">=</span>YES  <span class="token assign-left variable">write_enable</span><span class="token operator">=</span>YES  <span class="token assign-left variable">anon_umask</span><span class="token operator">=</span>022  <span class="token assign-left variable">anon_upload_enable</span><span class="token operator">=</span>YES  <span class="token assign-left variable">anon_mkdir_write_enable</span><span class="token operator">=</span>YES  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/ftp/0.png"><br><img src="/medias/drawing-bed/ftp/1.png"><br>é‡å¯vsftpdæœåŠ¡<br><code>service vsftpd restart</code><br><img src="/medias/drawing-bed/ftp/2.png"></p><h2 id="æµ‹è¯•åŒ¿åFTPè®¿é—®"><a href="#æµ‹è¯•åŒ¿åFTPè®¿é—®" class="headerlink" title="æµ‹è¯•åŒ¿åFTPè®¿é—®"></a>æµ‹è¯•åŒ¿åFTPè®¿é—®</h2><p>åœ¨Windowsä¸»æœºä¸­å¯ä»¥ç›´æ¥åœ¨â€æˆ‘çš„ç”µè„‘â€åœ°å€æ ä¸­è¾“å…¥URLåœ°å€è®¿é—®ï¼Œå¦‚<a href="ftp://192.168.0.123/">ftp://192.168.0.123</a><br><img src="/medias/drawing-bed/ftp/3.png"></p><p>åœ¨Linuxçš„å­—ç¬¦ç•Œé¢ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ftpå‘½ä»¤è¿›è¡Œæµ‹è¯•<br>å®‰è£…ftpå‘½ä»¤ï¼š<code>yum -y install ftp</code><br>ä¾‹å¦‚ï¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œå¯ä»¥åŒ¿åç™»å½•åˆ°FTPæœåŠ¡å™¨192.168.0.123  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ftp</span> <span class="token number">192.168</span>.0.123â€¦â€¦name<span class="token punctuation">(</span><span class="token number">192.168</span>.0.123:root<span class="token punctuation">)</span>:ç”¨æˆ·åpasswd:å¯†ç â€¦â€¦ftp<span class="token operator">></span>ç™»å½•æˆåŠŸ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/ftp/4.png"><br><img src="/medias/drawing-bed/ftp/5.png"><br><img src="/medias/drawing-bed/ftp/6.png"><br>ç™»å½•æˆåŠŸåæ‰§è¡Œâ€?â€æˆ–è€…â€helpâ€ä¼šæ˜¾ç¤ºå‡ºå¾ˆå¤šç±»ä¼¼äºsambaç™»å½•ç¯å¢ƒä¸­çš„å‘½ä»¤å¯ç”¨<br>å¸¸ç”¨çš„å‘½ä»¤ï¼šlsã€cdã€<br>&emsp;&emsp;<code>cd</code>ï¼šåˆ‡æ¢æœ¬åœ°ç›®å½•<br>&emsp;&emsp;<code>get</code> <code>wget</code>ï¼šå°†æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°<br><img src="/medias/drawing-bed/ftp/7.png"><br>&emsp;&emsp;<code>put</code> <code>mput</code>ï¼šå°†æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨<br><img src="/medias/drawing-bed/ftp/8.png"><br><img src="/medias/drawing-bed/ftp/9.png"><br>&emsp;&emsp;<code>quit</code> <code>exit</code>ï¼šæ–­å¼€ftpè¿ç»­è¿æ¥å¹¶é€€å‡º  </p><p>åœ¨å·²ç»çŸ¥é“è¦ä¸‹è½½æ–‡ä»¶çš„å®Œæ•´URLåœ°å€çš„æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥ä½¿ç”¨wgetå·¥å…·ç›´æ¥ä¸‹è½½æ–‡ä»¶ã€‚<br>ä¾‹å¦‚ï¼šè¦ä¸‹è½½<code>/var/ftp/pub/testfile</code>æ–‡ä»¶<br>æ‰§è¡Œï¼š<code>wget ftp://192.168.0.123/pub/testfile</code>  </p><p>lftpå‘½ä»¤ï¼šlftpæ”¯æŒtabé”®è¡¥å…¨ï¼Œæ˜¾ç¤ºå†…å®¹å¸¦æœ‰é¢œè‰²<br>ç”¨æ³•ï¼š<code>lftp ç”¨æˆ·åï¼šå¯†ç @ipï¼šç«¯å£</code>ï¼ˆé»˜è®¤21ï¼‰<br>ä¾‹å¦‚ï¼š<code>lftp 192.168.0.123</code><br><img src="/medias/drawing-bed/ftp/10.png"></p><h1 id="ç”¨æˆ·éªŒè¯çš„FTPæœåŠ¡"><a href="#ç”¨æˆ·éªŒè¯çš„FTPæœåŠ¡" class="headerlink" title="ç”¨æˆ·éªŒè¯çš„FTPæœåŠ¡"></a>ç”¨æˆ·éªŒè¯çš„FTPæœåŠ¡</h1><p>vsftpdå¯ä»¥ç›´æ¥ä½¿ç”¨Linuxä¸»æœºçš„ç³»ç»Ÿç”¨æˆ·ä½œä¸ºFTPè´¦å·ï¼Œæä¾›åŸºäºç”¨æˆ·åï¼Œå¯†ç çš„ç™»å½•éªŒè¯ã€‚ç”¨æˆ·ä½¿ç”¨ç³»ç»Ÿç”¨æˆ·è´¦å·ç™»å½•FTPæœåŠ¡å™¨åå°†é»˜è®¤ä½äºè‡ªå·±å®¶çš„å®¶ç›®å½•ä¸­ï¼Œä¸”åœ¨å®¶ç›®å½•ä¸­æ‹¥æœ‰è¯»å†™æƒé™  </p><ol><li>åŸºäºæœ¬åœ°ç”¨æˆ·éªŒè¯ï¼ˆä¿®æ”¹<code>anonymous_enable=NO</code>ï¼‰  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/vsftpd/vsftpd.confæ·»åŠ <span class="token assign-left variable">local_enable</span><span class="token operator">=</span>YES<span class="token assign-left variable">write_enable</span><span class="token operator">=</span>YES<span class="token assign-left variable">local_umask</span><span class="token operator">=</span>077<span class="token assign-left variable">chroot_local_user</span><span class="token operator">=</span>YESreloadé‡è½½<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><p>Windowsè®¿é—® è¾“å…¥<code>ftp://ç”¨æˆ·:å¯†ç @192.168.0.123</code> ç›´æ¥è¿›å…¥å…±äº«<br><img src="/medias/drawing-bed/ftp/11.png"></p><p>Linuxç³»ç»Ÿè®¿é—®å…±äº« è¾“å…¥<code>ftp 192.168.0.123</code><br><img src="/medias/drawing-bed/ftp/12.png"><br><img src="/medias/drawing-bed/ftp/13.png"></p><h2 id="è®¾ç½®ç”¨æˆ·â€ç™½åå•â€"><a href="#è®¾ç½®ç”¨æˆ·â€ç™½åå•â€" class="headerlink" title="è®¾ç½®ç”¨æˆ·â€ç™½åå•â€"></a>è®¾ç½®ç”¨æˆ·â€ç™½åå•â€</h2><p>åªè¦ä¸€äº›ç”¨æˆ·ç™»å½•  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/vsftpd/user_list æ·»åŠ ï¼šqueenkingwang<span class="token function">vim</span> /etc/vsftpd/vsftpd.conf æ·»åŠ ï¼š<span class="token assign-left variable">userlist_enable</span><span class="token operator">=</span>YES<span class="token operator">&amp;</span>emsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>emsp<span class="token punctuation">;</span>å¼€å¯user_listç”¨æˆ·åˆ—è¡¨<span class="token assign-left variable">userlist_deny</span><span class="token operator">=</span>NO<span class="token operator">&amp;</span>emsp<span class="token punctuation">;</span><span class="token operator">&amp;</span>emsp<span class="token punctuation">;</span>ç¦ç”¨user_liståˆ—è¡¨ä¸­çš„ç”¨æˆ·<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è®¾ç½®â€è™šæ‹Ÿç”¨æˆ·â€"><a href="#è®¾ç½®â€è™šæ‹Ÿç”¨æˆ·â€" class="headerlink" title="è®¾ç½®â€è™šæ‹Ÿç”¨æˆ·â€"></a>è®¾ç½®â€è™šæ‹Ÿç”¨æˆ·â€</h2><p>vsftpdæœåŠ¡çš„å…¶å®ƒå¸¸ç”¨é…ç½®  </p><ol><li><p>ä¿®æ”¹vsftpdæœåŠ¡çš„ç›‘å¬åœ°å€ã€ç«¯å£  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">listen&#x3D;YES   # å…è®¸ç‹¬ç«‹ç›‘å¬æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨xinetdæœåŠ¡è¿›è¡Œç®¡æ§vsftpdæœåŠ¡ï¼Œè‹¥ä½¿ç”¨ä¿®æ”¹YESä¸ºNOlisten_address&#x3D;192.168.0.123listen_port&#x3D;2121# é‡è½½ç”Ÿæ•ˆ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å…è®¸ä½¿ç”¨FTPæœåŠ¡çš„è¢«åŠ¨æ¨¡å¼  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">pasv_enable&#x3D;YESpasv_min_port&#x3D;24500pasv_max_port&#x3D;24600   # é‡å¯ç”Ÿæ•ˆ<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>é™åˆ¶FTPçš„å¹¶å‘è¿æ¥æ•°ã€ä¼ è¾“é€Ÿç‡  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">vim &#x2F;etc&#x2F;vsftpd&#x2F;vsftpd.confmax_clients&#x3D;20   # é™åˆ¶æœ€å¤šè¿æ¥20ä¸ªç”¨æˆ·max_per_ip&#x3D;2   # é™åˆ¶æ¯ä¸ªipæœ€å¤šè¿æ¥2ä¸ªanon_max_rate&#x3D;50000   # é™åˆ¶åŒ¿åç”¨æˆ·ä¼ è¾“é€Ÿç‡ä¸º50KB&#x2F;slocal_max_rate&#x3D;200000   # é™åˆ¶æœ¬åœ°ç”¨æˆ·ä¼ è¾“é€Ÿç‡ä¸º200KB&#x2F;s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><p>å»ºç«‹è™šæ‹Ÿç”¨æˆ·æ­¥éª¤ï¼š  </p><ol><li><p>åˆ›å»ºæ–‡æœ¬æ ¼å¼çš„ç”¨æˆ·åå’Œå¯†ç è¡¨ï¼ˆæ ¼å¼ï¼šå¥‡æ•°è¡Œå†™å‡çš„ç”¨æˆ·åï¼›å¶æ•°è¡Œå†™ç”¨æˆ·åå¯¹åº”çš„å¯†ç ï¼‰<br>ä¾‹å¦‚ï¼š<code>vim /etc/vsftpd/xnyh_list</code>(æ–‡ä»¶åéšæ„)  </p><pre class="line-numbers language-none"><code class="language-none">abc  123  xyz  456  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å»ºç«‹DBæ•°æ®åº“ï¼Œå®‰è£…<code>db4-utils</code>åŒ…<br>æ‰§è¡Œï¼š<code>db_load -T -t hash -f xnyh_list xnyh.db</code><br><code>db_load</code>å‘½ä»¤é€‰é¡¹æ„ä¹‰ï¼š<br>&emsp;&emsp;<code>-T</code>ï¼šåˆ¶ä½œæ•°æ®åº“ï¼ˆå…è®¸å°†æ–‡æœ¬æ–‡ä»¶è½¬è¯‘è½½å…¥æ•°æ®åº“ï¼‰<br>&emsp;&emsp;<code>-t</code>ï¼šæŒ‡å®šè½¬è¯‘è½½å…¥çš„æ•°æ®åº“ç±»å‹ï¼Œhashä¸ºä½¿ç”¨hashç åŠ å¯†<br>&emsp;&emsp;<code>-f</code>ï¼šæŒ‡å®šè¦è½¬è¯‘çš„æ–‡ä»¶<br><code>file xnyh.db</code>æŸ¥çœ‹æ–‡ä»¶çš„æ–‡ä»¶ç±»å‹<br><img src="/medias/drawing-bed/ftp/14.png"></p></li><li><p>æ·»åŠ è™šæ‹Ÿç”¨æˆ·æ˜ å°„è´¦å·ï¼Œåˆ›å»º<code>FTP</code>æ ¹ç›®å½•<br><code>useradd -s /sbin/nologin xnyh</code><br><code>mkdir /etc/vsftpd/xnyh_dir</code>  </p></li><li><p>ä¸ºè™šæ‹Ÿç”¨æˆ·å»ºç«‹<code>PAM</code>è®¤è¯æ–‡ä»¶  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/pam.d/vsftpd_xnyh<span class="token comment">#%PAM-1.0</span>auth required pam_userdb.so <span class="token assign-left variable">db</span><span class="token operator">=</span>/etc/vsftpd/xnyh   <span class="token comment"># ï¼ˆæŒ‡å‘ä¸ºåˆ›å»ºçš„è™šæ‹Ÿç”¨æˆ·æ•°æ®åº“ï¼Œçœç•¥.dbï¼‰</span>account required pam_userdb.so <span class="token assign-left variable">db</span><span class="token operator">=</span>/etc/vsftpd/xnyh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ä¿®æ”¹vsftpdé…ç½®ã€æ·»åŠ è™šæ‹Ÿç”¨æˆ·æ”¯æŒ  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/vsftpd/vsftpd.conf<span class="token assign-left variable">local_enable</span><span class="token operator">=</span>YES   <span class="token comment"># éœ€è¦æ˜ å°„æœ¬åœ°ç”¨æˆ·ï¼Œæ‰€æœ‰å¯ç”¨æ­¤é¡¹</span><span class="token assign-left variable">write_enable</span><span class="token operator">=</span>YES<span class="token assign-left variable">anon_umask</span><span class="token operator">=</span>022<span class="token assign-left variable">guest_enable</span><span class="token operator">=</span>YES   <span class="token comment"># å¯ç”¨ç”¨æˆ·æ˜ å°„åŠŸèƒ½</span><span class="token assign-left variable">guest_username</span><span class="token operator">=</span>xnyh   <span class="token comment"># æŒ‡å®šæ˜ å°„çš„ç³»ç»Ÿç”¨æˆ·</span><span class="token assign-left variable">pam_service_name</span><span class="token operator">=</span>vsftpd_xnyh   <span class="token comment"># æŒ‡å®šæ–°çš„PAMè®¤è¯æ–‡ä»¶</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ä¸ºä¸åŒçš„è™šæ‹Ÿç”¨æˆ·å»ºç«‹ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶<br><code>vim /etc/vsftpd/vsftpd.conf</code><br>æ·»åŠ ï¼š<code>user_config_dir=/etc/vsftpd/xnyh_dir</code><br><code>cd /etc/vsftpd/xnyh_dir</code>  </p></li></ol><p><code>vim abc</code><br><code>anon_upload_enable=YES</code><br><code>anon_mkdir_write_enable=YES</code>  </p><p><code>touch xyz</code><br>(<code>abc</code>è™šæ‹Ÿç”¨æˆ·å¯ä»¥ä¸Šä¼ ï¼Œè¯»å†™ï¼›<code>xyz</code>è™šæ‹Ÿç”¨æˆ·åªèƒ½è¯»ã€ä¸‹è½½)<br>é‡è½½<code>vsftpd</code>æœåŠ¡  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> æ–‡ä»¶ä¸Šä¼ /ä¸‹è½½ </tag>
            
            <tag> FTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sambaå…±äº«</title>
      <link href="/posts/647e.html"/>
      <url>/posts/647e.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="samba"><a href="#samba" class="headerlink" title="samba"></a>samba</h1><p>&emsp;&emsp;<code>samba</code>ï¼šæŒ‡<code>Linux</code>ç³»ç»Ÿä¸­çš„ä¸€ç§æ–‡ä»¶å…±äº«ç¨‹åº<br>&emsp;&emsp;åœ¨windowç½‘ç»œç¯å¢ƒä¸­ï¼Œä¸»æœºä¹‹é—´è¿›è¡Œæ–‡ä»¶å’Œæ‰“å°æœºå…±äº«æ˜¯é€šè¿‡å¾®è½¯å…¬å¸è‡ªå·±çš„SMB/CIFSç½‘ç»œåè®®å®ç°çš„ï¼Œæ˜¯å¾®è½¯çš„ç§æœ‰åè®®ï¼Œåœ¨sambaé¡¹ç›®å‡ºç°ä¹‹å‰ï¼Œå¹¶ä¸èƒ½ç›´æ¥ä¸Linux/Unixç³»ç»Ÿè¿›è¡Œé€šä¿¡ï¼Œsambaåœ¨Linux/Unixç³»ç»Ÿä¸­å®ç°äº†å¾®è½¯çš„SMB/CIFSç½‘ç»œåè®®ï¼Œä»è€Œä½¿å¾—è·¨å¹³å°çš„æ–‡ä»¶å…±äº«å˜çš„æ›´åŠ å®¹æ˜“ï¼Œåœ¨éƒ¨ç½²Windowsï¼ŒLinux/Unixæ··åˆå¹³å°çš„ä¼ä¸šç¯å¢ƒæ—¶ï¼Œé€‰ç”¨sambaå¯ä»¥å¾ˆå¥½åœ°è§£å†³ä¸åŒç³»ç»Ÿä¹‹é—´çš„æ–‡ä»¶äº’è®¿é—®é¢˜ã€‚  </p><h2 id="sambaè½¯ä»¶æ„æˆ"><a href="#sambaè½¯ä»¶æ„æˆ" class="headerlink" title="sambaè½¯ä»¶æ„æˆ"></a>sambaè½¯ä»¶æ„æˆ</h2><ol><li><p>sambaè½¯ä»¶åŒ…çš„æ„æˆ<br>åœ¨å…‰ç›˜çš„å®‰è£…åŒ…ä¸­ï¼Œå¯ä»¥æ‰¾åˆ°ä¸sambaç›¸å…³çš„å‡ ä¸ªè½¯ä»¶åŒ…ï¼Œä¸»è¦åŒ…æ‹¬æœåŠ¡ç«¯è½¯ä»¶<code>samba</code>ï¼Œå®¢æˆ·ç«¯è½¯ä»¶<code>samba-client</code>ï¼Œç”¨äºæä¾›æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ç¨‹åºçš„å…¬å…±ç»„ä»¶<code>samba-common</code><br><img src="/medias/drawing-bed/samba/0.png"></p></li><li><p>sambaæœåŠ¡çš„ç¨‹åºç»„ä»¶<br><code>samba</code>æœåŠ¡å™¨æä¾›<code>smbd</code>ã€<code>nmbd</code>ä¸¤ä¸ªæœåŠ¡ç¨‹åº<br>smbdè´Ÿè´£ä¸ºå®¢æˆ·æœºæä¾›æœåŠ¡å™¨ä¸­å…±äº«èµ„æºçš„è®¿é—®ï¼ˆç›®å½•æ–‡ä»¶ç­‰ï¼‰<br><code>nmbd</code>è´Ÿè´£æä¾›åŸºäºNetBIOSåè®®çš„åå­—è§£æã€æµè§ˆæœåŠ¡<br>NetBIOSåè®®ï¼šç”±IBMå…¬å¸å¼€å‘ï¼Œä½¿ç”¨æˆ·è½¯ä»¶èƒ½ä½¿ç”¨å±€åŸŸç½‘çš„èµ„æºï¼Œè‡ªä»è¯ç”Ÿï¼ŒNetBIOSæˆä¸ºè®¸å¤šå…¶ä»–ç½‘ç»œåº”ç”¨ç¨‹åºçš„åŸºç¡€ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šï¼ŒNetBIOSæ˜¯æ¥å…¥ç½‘ç»œæœåŠ¡çš„æ¥å£æ ‡å‡†  </p></li><li><p>ä½¿ç”¨<code>netstat</code>æŸ¥çœ‹çŠ¶æ€ï¼ˆ<code>-atunp</code>ï¼‰ï¼ˆ-aå¯ä»¥æŸ¥çœ‹æ‰€æœ‰è¿çº¿ä¸­çš„socketï¼‰<br><code>smbd</code>ï¼šè´Ÿè´£ç›‘å¬TCPåè®®çš„139ï¼ˆSMBåè®®ï¼‰å’Œ445ï¼ˆCIFSåè®®ï¼‰ç«¯å£<br><code>nmbd</code>ï¼šè´Ÿè´£ç›‘å¬UDPåè®®çš„137å’Œ138ï¼ˆNetBIOSåè®®ï¼‰ç«¯å£  </p></li></ol><h1 id="sambaæœåŠ¡åŸºç¡€"><a href="#sambaæœåŠ¡åŸºç¡€" class="headerlink" title="sambaæœåŠ¡åŸºç¡€"></a>sambaæœåŠ¡åŸºç¡€</h1><p>å¯åŠ¨æœåŠ¡<br>&emsp;&emsp;<code>service smb restart</code><br>&emsp;&emsp;å¯åŠ¨æœåŠ¡æ—¶ï¼Œåªè¦å¯åŠ¨smbdç¨‹åºå°±å¯ä»¥äº†ï¼Œå› ä¸ºé»˜è®¤ä¹Ÿä¼šæŠŠnmbdç¨‹åºå¯åŠ¨èµ·æ¥ï¼Œä½†æ˜¯å¦‚æœnmbdç¨‹åºæ²¡æœ‰è·Ÿç€å¯åŠ¨èµ·æ¥ï¼Œé‚£å°±å†å¯åŠ¨ä¸€ä¸‹nmbd<br>&emsp;&emsp;<code>service nmb restart</code>  </p><p>sambaé…ç½®<br>æ—¥å¿—æ–‡ä»¶<code>/var/log/samba/</code>ç›®å½•ä¸­<br>ä¸»é…ç½®æ–‡ä»¶<code>/etc/samba/smb.conf</code><br>é…ç½®æ–‡ä»¶ä¸­<code>#</code>å¼€å¤´çš„è¡¨ç¤ºæ³¨é‡Šä¿¡æ¯ï¼Œ<code>;</code>å¼€å¤´çš„è¡¨ç¤ºé…ç½®æ ·ä¾‹<br>&emsp;&emsp;sambaçš„ä¸»é…ç½®æ–‡ä»¶åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼š<br>&emsp;&emsp;<code>[global]</code>å…¨å±€é…ç½®ï¼Œå¯¹æ•´ä¸ªsambaé…ç½®æ–‡ä»¶éƒ½ç”Ÿæ•ˆ<br>&emsp;&emsp;<code>[homes]</code>å®¿ä¸»ç›®å½•å…±äº«è®¾ç½®ï¼Œè®¾ç½®Linuxç”¨æˆ·çš„é»˜è®¤å…±äº«ï¼Œå¯¹åº”ç”¨æˆ·çš„å®¿ä¸»ç›®å½•ï¼Œè¿™éƒ¨åˆ†å¾ˆå°‘è®¾ç½®ã€é»˜è®¤å°±å¯ä»¥<br>&emsp;&emsp;<code>[printers]</code>æ‰“å°æœºå…±äº«è®¾ç½®  </p><p>è‹¥éœ€è¦åœ¨<code>smb.conf</code>æ–‡ä»¶ä¸­è®¾ç½®æ–°çš„å…±äº«æ–‡ä»¶å¤¹ï¼Œåªéœ€è¦å¢åŠ ä¸€æ®µï¼š<br>&emsp;&emsp;<code>[samba]</code>è‡ªå®šä¹‰å…±äº«åï¼Œæ–°çš„å…±äº«æ–‡ä»¶å¤¹è®¾ç½®å¯ä»¥å‚è€ƒ<code>[homes]</code>å’Œ<code>[printers]</code>éƒ¨åˆ†çš„å†…å®¹  </p><p>sambaæœåŠ¡å™¨çš„å¸¸è§é…ç½®é¡¹åŠå«ä¹‰è¯´æ˜ï¼š<br>&emsp;&emsp;<code>workgroup</code>ï¼šè®¾ç½®æœåŠ¡å™¨æ‰€åœ¨çš„å·¥ä½œç»„åç§°<br>&emsp;&emsp;<code>service string</code>ï¼šè®¾ç½®æœåŠ¡å™¨çš„è¯´æ˜æ–‡å­—ï¼Œç”¨äºæè¿°sambaæœåŠ¡å™¨<br>&emsp;&emsp;<code>security</code>ï¼šè®¾ç½®æœåŠ¡å™¨çš„å®‰å…¨çº§åˆ«ï¼Œå¯è®¾ä¸ºï¼šshareï¼ˆå¯åŒ¿åï¼Œä»»ä½•äººéƒ½å¯ä»¥è®¿é—®ï¼‰ï¼›useréœ€è¦æœ¬æœåŠ¡å™¨éªŒè¯ç”¨æˆ·ååŠå¯†ç ï¼›serveréœ€è¦æŒ‡å®šå¦ä¸€å°æœåŠ¡å™¨æ¥éªŒè¯ç”¨æˆ·ååŠå¯†ç ï¼›domainç”±windowsåŸŸæ§åˆ¶å™¨éªŒè¯ç”¨æˆ·ååŠå¯†ç <br>&emsp;&emsp;<code>log file</code>ï¼šè®¾ç½®sambaæœåŠ¡å™¨çš„æ—¥å¿—æ–‡ä»¶ï¼Œé»˜è®¤è®¾ç½®ä¸º/var/log/samba/log.%mè¡¨ç¤ºå°†æ—¥å¿—æ–‡ä»¶ä¿å­˜åˆ°/var/log/samba/ç›®å½•ä¸­ï¼ŒæŒ‰æ¯ä¸ªå®¢æˆ·æœºå»ºç«‹ä¸€ä¸ªç›®å½•æ–‡ä»¶ï¼Œå…¶ä¸­â€%mâ€å˜é‡è¡¨ç¤ºå®¢æˆ·ç«¯ä¸»æœºåæˆ–ipåœ°å€<br>&emsp;&emsp;<code>max log size</code>ï¼šæ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å®¹é‡ï¼Œå•ä½ä¸ºKBï¼ˆé»˜è®¤50KBï¼Œè¶…è¿‡ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼‰ï¼Œè‹¥ç½‘ç»œå†…æ‹¥æœ‰LDAPç›®å½•è®¤è¯ï¼Œè¿™é‡Œå¯ä»¥æ”¹ç”¨ldapsamæ•°æ®åº“æ–‡ä»¶ï¼›å¦å¤–ï¼Œè‹¥è¦å…¼å®¹æ—§ç‰ˆçš„sambaå¯†ç æ–‡ä»¶ä¹Ÿå¯ä»¥å°†ç±»å‹è®¾ä¸ºsmbpasswd  </p><p>å¯¹æŸä¸ªå…±äº«ç›®å½•çš„é…ç½®é¡¹ï¼ˆå¯¹è¿™äº›ç›®å½•æ§åˆ¶ä¸€äº›ç‰¹æ€§ã€å±æ€§ï¼‰<br>&emsp;&emsp;<code>comment</code>ï¼šè®¾ç½®å¯¹åº”å…±äº«ç›®å½•çš„æ³¨é‡Šã€è¯´æ˜ä¿¡æ¯<br>&emsp;&emsp;<code>path</code>ï¼šè®¾ç½®å¯¹åº”å…±äº«ç›®å½•åœ¨æœåŠ¡å™¨ä¸­çš„æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ï¼‰<br>&emsp;&emsp;<code>browseable</code>ï¼šè®¾ç½®è¯¥å…±äº«ç›®å½•åœ¨â€ç½‘ä¸Šé‚»å±…â€ä¸­æ˜¯å¦çœ‹çš„åˆ°ï¼Œè®¾ç½®ä¸ºnoæ—¶ç›¸å½“äºéšè—å…±äº«ç›®å½•<br>&emsp;&emsp;<code>guest ok</code>ï¼šè®¾ç½®æ˜¯å¦æ‰€æœ‰äººéƒ½å¯ä»¥è®¿é—®å…±äº«ç›®å½•ï¼Œä¸â€publicâ€é…ç½®é¡¹ä½œç”¨ç›¸åŒ<br>&emsp;&emsp;<code>writable</code>ï¼šè®¾ç½®è¯¥å…±äº«ç›®å½•æ˜¯å¦å¯å†™ï¼ŒsambaæœåŠ¡è®¾ç½®çš„è¯»å–ã€å†™å…¥æƒé™ï¼Œä¼˜å…ˆçº§è¦ä½äºæ–‡ä»¶ç³»ç»Ÿä¸­è®¾ç½®çš„æƒé™&emsp;&emsp;<br>&emsp;&emsp;<code>read only</code>ï¼šè®¾ç½®æ˜¯å¦åªè¯»<br>&emsp;&emsp;<code>valid users</code>ï¼šæŒ‡å®šæœ‰æ•ˆç”¨æˆ·<br>&emsp;&emsp;<code>write list</code>ï¼šæŒ‡å®šç”¨æˆ·å¯å†™  </p><p>è¯­æ³•æ£€æŸ¥ï¼š<code>samba</code>æœåŠ¡å™¨æä¾›äº†ä¸€ä¸ªé…ç½®æ–‡ä»¶æ£€æŸ¥å·¥å…·<br><code>testparm</code>ç¨‹åºï¼Œä½¿ç”¨<code>testparm</code>å·¥å…·å¯ä»¥å¯¹<code>smb.conf</code>é…ç½®æ–‡ä»¶çš„æ­£ç¡®æ€§è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœå‘ç°æœ‰é”™è¯¯å°†ä¼šè¿›è¡Œæé†’  </p><h1 id="è®¾ç½®å¯åŒ¿åè®¿é—®å…±äº«"><a href="#è®¾ç½®å¯åŒ¿åè®¿é—®å…±äº«" class="headerlink" title="è®¾ç½®å¯åŒ¿åè®¿é—®å…±äº«"></a>è®¾ç½®å¯åŒ¿åè®¿é—®å…±äº«</h1><p>å¯åŒ¿åè®¿é—®çš„å…±äº«é€‚ç”¨äºå…¬å¼€çš„èµ„æºåˆ†äº«ï¼Œä¸€èˆ¬åªå»ºè®®æä¾›åªè¯»è®¿é—®<br>è®¾ç½®å¯åŒ¿åå…±äº«æ–‡ä»¶å¤¹æ—¶ï¼Œåœ¨ä¸»é…ç½®æ–‡ä»¶<code>samba.conf</code>ä¸­ä¸»è¦è°ƒæ•´ä¸¤ä¸ªåœ°æ–¹å³å¯<br>&emsp;&emsp;1.å°†é»˜è®¤å®‰å…¨çº§åˆ«ä¿®æ”¹ä¸ºshare<br>&emsp;&emsp;2.æ·»åŠ ä¸€æ®µå…±äº«ç›®å½•é…ç½®  </p><p>ä¾‹å¦‚ï¼šå°†æœ¬åœ°ç›®å½•<code>/testdir/dir</code>å‘å¸ƒä¸ºå…±äº«æ–‡ä»¶å¤¹ï¼Œå…±äº«åä¸º<code>samba</code>  </p><ol><li>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>/etc/samba/smb.conf</code>  </li></ol><p>æŠŠå®‰å…¨çº§åˆ«<code>security=user</code>æ”¹ä¸º<code>security=share</code><br><img src="/medias/drawing-bed/samba/1.png"><br>æ·»åŠ é…ç½®<br><img src="/medias/drawing-bed/samba/2.png"><br><code>comment</code>æ³¨é‡Šï¼Œ<code>path</code>å…±äº«ç›®å½•çš„ç»å¯¹è·¯å¾„ï¼Œ<code>guest ok</code>å…è®¸æ‰€æœ‰äººè®¿é—®ï¼Œ<code>read only</code>åªè¯»ï¼Œ<code>writable</code>å†™å…¥  </p><ol start="2"><li>å¼€å¯sambaå…±äº«æœåŠ¡  </li></ol><p>&emsp;&emsp;<code>service smb start</code><br><img src="/medias/drawing-bed/samba/3.png"></p><ol start="3"><li>ç”¨<code>testparm</code>å·¥å…·æ£€æŸ¥ä¸€ä¸‹è¯­æ³•  </li></ol><p>&emsp;&emsp;ç›´æ¥æ‰§è¡Œ<code>testparm</code>å³å¯ï¼Œæ˜¾ç¤º<code>ok</code>å­—æ ·è¡¨ç¤ºæ²¡æœ‰é”™è¯¯<br>&emsp;&emsp;ä¹Ÿå¯ä»¥å†å›è½¦ä¸€ä¸‹æŸ¥çœ‹åˆšæ·»åŠ çš„å…±äº«æ–‡ä»¶<br><img src="/medias/drawing-bed/samba/4.png"><br>&emsp;&emsp;ç”¨Windowsè®¿é—®å…±äº«æ–‡ä»¶<br><img src="/medias/drawing-bed/samba/5.png"><br>&emsp;&emsp;æ‰“å¼€è®¡ç®—æœºï¼Œåœ¨è¾“å…¥æ¡†è¾“å…¥ï¼š<code>\\å…±äº«æœåŠ¡å™¨ipåœ°å€</code>  </p><p>&emsp;&emsp;ç”¨Linuxè®¿é—®å…±äº«æ–‡ä»¶<br>&emsp;&emsp;å®‰è£…<code>samba-client</code>å·¥å…·<br>&emsp;&emsp;åŒ¿åè®¿é—® ï¼š<code>smbclient //IPåœ°å€/å…±äº«å</code>ï¼ˆä¸€è·¯å›è½¦ï¼‰<br><img src="/medias/drawing-bed/samba/6.png"></p><h1 id="è®¾ç½®éœ€è¦ç”¨æˆ·éªŒè¯çš„å…±äº«"><a href="#è®¾ç½®éœ€è¦ç”¨æˆ·éªŒè¯çš„å…±äº«" class="headerlink" title="è®¾ç½®éœ€è¦ç”¨æˆ·éªŒè¯çš„å…±äº«"></a>è®¾ç½®éœ€è¦ç”¨æˆ·éªŒè¯çš„å…±äº«</h1><p>&emsp;&emsp;åŒ¿åå…±äº«è™½ç„¶ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œä½†å› ä¸ºä»»ä½•äººéƒ½å¯ä»¥è®¿é—®åˆ°å…±äº«çš„æ–‡ä»¶æ•°æ®ï¼Œåœ¨æŸäº›æ—¶å€™å¯èƒ½ä¼šå¯¼è‡´ä¿¡æ¯çš„æ³„éœ²  </p><p>ç”¨æˆ·éªŒè¯çš„å…±äº«å®ç°æ­¥éª¤  </p><ol><li>å»ºç«‹sambaç”¨æˆ·æ•°æ®åº“<br>&emsp;&emsp;ä½¿ç”¨pdbeditå·¥å…·å¯ä»¥å¯¹å…±äº«ç”¨æˆ·è¿›è¡Œç®¡ç†<br>&emsp;&emsp;æ‰§è¡Œ<code>pdbedit -a -u ç”¨æˆ·å</code><br>&emsp;&emsp;å¯ä»¥æ·»åŠ ä¸€ä¸ªç”¨æˆ·ä¸º<code>samba</code>å…±äº«ç”¨æˆ·  </li></ol><p>é€‰é¡¹<br>&emsp;&emsp;<code>-a</code>ï¼šæ·»åŠ <br>&emsp;&emsp;<code>-u</code>ï¼šæŒ‡å®šç”¨æˆ·å<br>&emsp;&emsp;<code>-L</code>ï¼šåˆ—å‡ºæ‰€æœ‰sambaå…±äº«ç”¨æˆ·<br>&emsp;&emsp;<code>-v</code>ï¼šè¾“å‡ºè¯¦ç»†ä¿¡æ¯<br>&emsp;&emsp;<code>-x</code>ï¼šåˆ é™¤sambaç”¨æˆ·ï¼ŒæŒ‡å®šç”¨æˆ·åå³å¯<br>&emsp;&emsp;<code>-vL user</code>ï¼šåªåˆ—å‡ºæŸä¸ªç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯<br>&emsp;&emsp;<code>-xu user</code>ï¼šåˆ é™¤æŒ‡å®šsambaç”¨æˆ·  </p><p>&emsp;&emsp;ä¸ºäº†åŒºåˆ«äºLinuxä¸»æœºä¸­çš„ç³»ç»Ÿç”¨æˆ·ï¼Œé€šå¸¸å°†ç”¨äºè®¿é—®sambaå…±äº«èµ„æºçš„ç”¨æˆ·ç§°ä¸º<code>å…±äº«ç”¨æˆ·</code>sambaæœåŠ¡å™¨ä½¿ç”¨ç‹¬ç«‹çš„å…±äº«è´¦å·æ•°æ®åº“æ–‡ä»¶ï¼Œå…¶ä¸­çš„è´¦å·åç§°å¿…é¡»æœ‰ä¸å®ƒåŒåçš„ç³»ç»Ÿç”¨æˆ·ç›¸å¯¹åº”ï¼Œä»¥ä¾¿ä¸»æœºå¯¹å…±äº«è®¿é—®çš„è¯»å†™æƒé™è¿›è¡Œæ§åˆ¶ï¼Œä½†å…±äº«ç”¨æˆ·çš„å¯†ç æ˜¯é¢å¤–è®¾ç½®çš„ï¼Œå¯ä»¥ä¸ç³»ç»Ÿç”¨æˆ·çš„å¯†ç ä¸ä¸€æ ·<br>&emsp;&emsp;sambaå…±äº«ç”¨æˆ·çš„è´¦å·æ•°æ®åº“æ–‡ä»¶é»˜è®¤ä½äº<code>/var/lib/samba/private/passdb.tdb</code>æ˜¯ä¸€ä¸ªç»è¿‡åŠ å¯†çš„æ–‡ä»¶ï¼Œå…¶ä¸­ä¿å­˜äº†sambaç”¨æˆ·çš„è´¦å·åç§°ã€ç™»å½•å¯†ç ã€è´¦å·å¯ç”¨çŠ¶æ€ç­‰ä¿¡æ¯ã€‚  </p><ol start="2"><li>è®¾ç½®ç”¨æˆ·è®¿é—®æˆæƒ<br>&emsp;&emsp;è‹¥ä½¿ç”¨ç”¨æˆ·éªŒè¯çš„sambaå…±äº«ï¼Œåº”å°†securityå®‰å…¨çº§åˆ«æå‡ä¸º<code>user</code>ï¼Œå…±äº«ç”¨æˆ·æˆæƒä¸»è¦ç”±<code>valid users(æŒ‡å®šæœ‰æ•ˆç”¨æˆ·)</code>ï¼Œ<code>write list(æŒ‡å®šç”¨æˆ·å¯å†™)</code><br>é…ç½®é¡¹æŒ‡å®šï¼Œå½“éœ€è¦æˆæƒå¤šä¸ªå…±äº«ç”¨æˆ·æ—¶ï¼Œä»¥é€—å·æˆ–ç©ºæ ¼è¿›è¡Œåˆ†å‰²ï¼Œå¦‚æœéœ€è¦æˆæƒä¸€ä¸ªç”¨æˆ·ç»„ï¼Œå¯ä»¥ä½¿ç”¨<code>@ç»„å</code>çš„å½¢å¼ï¼Œä½†éœ€è¦ä¸ºç»„å†…çš„æ¯ä¸ªç³»ç»Ÿç”¨æˆ·éƒ½åˆ›å»ºå¯¹åº”çš„sambaå…±äº«ç”¨æˆ·  </li></ol><p>ä¾‹å¦‚ï¼š<br>&emsp;&emsp;å°†æœ¬åœ°ç›®å½•<code>/testdir</code>å‘å¸ƒä¸ºå…±äº«æ–‡ä»¶å¤¹ï¼Œå…±äº«åä¸º<code>date</code>ï¼Œè¦æ±‚åªæœ‰å…±äº«ç”¨æˆ·<code>queen</code>å’Œ<code>king</code>èƒ½å¤Ÿè®¿é—®ï¼Œå…¶ä¸­<code>queen</code>ç”¨æˆ·å…·æœ‰å†™å…¥æƒé™<br>1)åˆ›å»ºå…±äº«ç”¨æˆ·<code>queen</code>å’Œ<code>king</code>  </p><p><code>pdbedit -a -u queen;pdbedit -a -u king</code><br><img src="/medias/drawing-bed/samba/7.png"><br><img src="/medias/drawing-bed/samba/8.png"></p><p>2)åˆ›å»ºå…±äº«ç›®å½•<br><code>mkdir /testdir;chmod 777 /testdir</code><br><img src="/medias/drawing-bed/samba/9.png"></p><ol start="3"><li><p>ä¿®æ”¹<code>/tec/samba/smb.conf</code>é…ç½®æ–‡ä»¶<br>å…¶ä¸­<code>security=user</code><br><img src="/medias/drawing-bed/samba/10.png"><br>æ·»åŠ åä¸º<code>samba</code>çš„å…±äº«ç›®å½•é…ç½®æ®µ<br><img src="/medias/drawing-bed/samba/11.png"></p></li><li><p>é‡æ–°åŠ è½½<code>/etc/samba/smb.conf</code>é…ç½®æ–‡ä»¶ï¼Œæˆ–é‡å¯smbæœåŠ¡<br><img src="/medias/drawing-bed/samba/12.png"><br>ï¼ˆå¯èƒ½éœ€è¦é‡å¯nmbæœåŠ¡ï¼‰  </p></li></ol><p>ç¡®å®šç›®å½•è®¿é—®æˆæƒ<br>&emsp;&emsp;é€šè¿‡sambaæœåŠ¡å™¨å…±äº«æ–‡ä»¶å¤¹æ—¶ï¼Œç”¨æˆ·æœ€ç»ˆæ˜¯å¦æ‹¥æœ‰è¯»å–ã€å†™å…¥æƒé™é™¤äº†éœ€è¦è®¾ç½®ç”¨æˆ·æˆæƒä»¥å¤–ï¼Œè¿˜è¦æ»¡è¶³ä¸€ä¸ªå‰ææ¡ä»¶é‚£å°±æ˜¯åœ¨æœåŠ¡å™¨ä¸­ä¸å…±äº«ç”¨æˆ·åŒåçš„ç³»ç»Ÿç”¨æˆ·å¯¹å‘å¸ƒä¸ºå…±äº«æœ¬åœ°æ–‡ä»¶å¤¹å¿…é¡»æœ‰ç›¸åº”çš„è¯»å–ã€å†™å…¥æƒé™<br>&emsp;&emsp;å¦ï¼Œå½“é€šè¿‡å…±äº«ç›®å½•ä¸Šä¼ æ–‡æ¡£æ—¶ï¼Œå¯¹äºå…±äº«ç”¨æˆ·æ‰€ä¸Šä¼ çš„æ–‡ä»¶ã€åˆ›å»ºçš„å­ç›®å½•çš„é»˜è®¤æƒé™å¯ä»¥åˆ†åˆ«ä½¿ç”¨é…ç½®é¡¹<code>create mask</code> <code>directory mask</code>è¿›è¡ŒæŒ‡å®š<br>ç¼–è¾‘<code>/etc/samba/smb.conf</code><br><img src="/medias/drawing-bed/samba/13.png"><br>æŸ¥çœ‹æ˜¯å¦æˆåŠŸ<br><img src="/medias/drawing-bed/samba/14.png"><br><img src="/medias/drawing-bed/samba/15.png"><br><img src="/medias/drawing-bed/samba/16.png"><br><img src="/medias/drawing-bed/samba/17.png"></p><h1 id="ç”¨æˆ·æ˜ å°„åŠè®¿é—®åœ°å€é™åˆ¶"><a href="#ç”¨æˆ·æ˜ å°„åŠè®¿é—®åœ°å€é™åˆ¶" class="headerlink" title="ç”¨æˆ·æ˜ å°„åŠè®¿é—®åœ°å€é™åˆ¶"></a>ç”¨æˆ·æ˜ å°„åŠè®¿é—®åœ°å€é™åˆ¶</h1><p>ç”¨æˆ·æ˜ å°„åŠè®¿é—®åœ°å€é™åˆ¶<br>&emsp;&emsp;ä¸ºäº†è¿›ä¸€æ­¥æé«˜sambaå…±äº«æœåŠ¡çš„å®‰å…¨æ€§ï¼Œé™¤äº†å¯ä»¥å¯¹æŒ‡å®šçš„å…±äº«ç›®å½•è®¾ç½®ç”¨æˆ·æˆæƒä»¥å¤–ï¼Œå¯ä»¥é‡‡ç”¨ç”¨æˆ·æ˜ å°„ã€è®¿é—®åœ°å€é™åˆ¶ç­‰æªæ–½<br>&emsp;&emsp;1.å…±äº«è´¦å·æ˜ å°„ï¼ˆåˆ«åï¼‰<br>&emsp;&emsp;åœ¨ä½¿ç”¨sambaå…±äº«è´¦å·æ—¶ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå…±äº«ç”¨æˆ·è´¦å·éƒ½æœ‰ä¸€ä¸ªåŒåçš„ç³»ç»Ÿç”¨æˆ·è´¦å·ï¼Œä¸€äº›äººå¯èƒ½ä¼šä½¿ç”¨ç½‘ç»œä¸­æ³„éœ²çš„å…±äº«ç”¨æˆ·è´¦å·ä½œä¸ºsambaæœåŠ¡çš„ç³»ç»Ÿç”¨æˆ·ç™»å½•ï¼Œå¯¹Linuxä¸»æœºå¸¦æ¥äº†å®‰å…¨éšæ‚£<br>&emsp;&emsp;é‰´äºæ­¤ï¼ŒsambaæœåŠ¡ä¸ºæˆ‘ä»¬æä¾›äº†<code>ç”¨æˆ·åç§°æ˜ å°„</code>æœºåˆ¶ï¼Œå¯ä»¥å°†ä¸€ä¸ªå…±äº«ç”¨æˆ·æ˜ å°„ä¸ºå¤šä¸ªä¸åŒçš„åç§°ï¼ˆåˆ«åï¼‰ï¼Œè¿™æ ·ä¸€æ¥ï¼Œåªéœ€è¦é€šè¿‡å…±äº«ç”¨æˆ·çš„åˆ«åå’Œå¯†ç å°±å¯ä»¥è®¿é—®æˆæƒçš„èµ„æºäº†ï¼Œè€Œä¸éœ€è¦çŸ¥é“çœŸå®çš„å…±äº«ç”¨æˆ·ï¼ˆç³»ç»Ÿç”¨æˆ·ï¼‰åç§°<br>&emsp;&emsp;sambaå…±äº«è´¦å·çš„æ˜ å°„æ–‡ä»¶é»˜è®¤ä¸º<code>/etc/samba/smbusers</code>ï¼Œæ–‡ä»¶ä¸­çš„é…ç½®è®°å½•ä½¿ç”¨<code>å…±äº«ç”¨æˆ·å = åˆ«å1 åˆ«å2 ...</code>çš„æ ¼å¼ï¼Œåœ¨è¯¥æ–‡ä»¶ä¸­é»˜è®¤å·²ç»æ·»åŠ äº†ä¸¤æ¡å…¼å®¹Windowså®¢æˆ·æœºçš„åˆ«åæ˜ å°„  </p><p>å…·ä½“æ“ä½œ<br><code>vim /etc/samba/smbusers</code><br>æ·»åŠ  <code>queen = abc xyz</code> ä¿å­˜é€€å‡ºå³å¯<br><img src="/medias/drawing-bed/samba/18.png"><br>ä»¥åå°±å¯ä»¥ä½¿ç”¨abcæˆ–xyzç”¨æˆ·æ¥ä»£æ›¿queenç”¨æˆ·ç™»å½•äº†ï¼Œå¯†ç è¿˜æ˜¯queençš„å¯†ç é…ç½®æ–‡ä»¶<code>/etc/samba/smb.conf</code>æ·»åŠ å…¨å±€é…ç½®é¡¹ï¼ˆglobalï¼‰<br>&emsp;&emsp;<code>username map = /etc/samba/smbusers</code>  </p><p>ç„¶åé‡æ–°åŠ è½½é…ç½®ä½¿å…¶ç”Ÿæ•ˆ<br>&emsp;&emsp;2.è®¿é—®åœ°å€é™åˆ¶<br>é’ˆå¯¹è®¿é—®sambaæœåŠ¡çš„å®¢æˆ·æœºï¼Œå¯ä»¥é€šè¿‡ï¼ˆé»‘ ç™½åå•ï¼ŒäºŒè€…é€‰å…¶ä¸€ï¼‰<br><code>hosts allow</code>ï¼ˆç™½åå•ï¼‰å…è®¸è®¿é—®å…±äº«å®¢æˆ·æœºçš„ipåœ°å€<br><code>hosts deny</code>ï¼ˆé»‘åå•ï¼‰æ‹’ç»è®¿é—®å…±äº«å®¢æˆ·æœºçš„ipåœ°å€<br>è®¿é—®åœ°å€é™åˆ¶ä¸€èˆ¬ç”¨äº<code>[global]</code>å…¨å±€é…ç½®éƒ¨åˆ†ï¼Œä¹Ÿå¯ä»¥åº”ç”¨äºæŸä¸ªå…·ä½“çš„é…ç½®éƒ¨åˆ†ï¼Œé™åˆ¶çš„å¯¹è±¡å¯ä»¥æ˜¯ä¸»æœºåã€ipåœ°å€æˆ–è€…ç½‘æ®µåœ°å€ï¼ˆçœå»ä¸»æœºéƒ¨åˆ†ï¼‰ï¼Œå¤šä¸ªåœ°å€ä¹‹é—´ä»¥é€—å·æˆ–ç©ºæ ¼è¿›è¡Œåˆ†å‰²<br>ä¾‹å¦‚ï¼š<code>vim /etc/samba/smb.conf</code><br>&emsp;&emsp;<code>[global]</code><br>&emsp;&emsp;å¢åŠ <code>hosts allow = 192.168.0.  192.168.1.</code>ï¼ˆå…é¡»192.168çš„1ç½‘æ®µå’Œ2ç½‘æ®µè®¿é—®ï¼‰<br>ä¿å­˜é€€å‡ºï¼Œé‡è½½æœåŠ¡å³å¯<br><img src="/medias/drawing-bed/samba/19.png"><br>æ³¨æ„ï¼šæ·»åŠ åœ°å€æ˜¾ç¤ºæ—¶çš„æ ¼å¼ï¼Œå¦‚æœæ˜¯<code>192.168.1.0/24</code>ç½‘æ®µï¼Œè¦å†™æˆ<code>192.168.1.</code>è¿™ç§æ ¼å¼ï¼Œ<code>172.16.0.0/24</code>ç½‘æ®µï¼Œè¦å†™æˆ<code>173.16.</code>è¿™ç§æ ¼å¼  </p><h1 id="è®¿é—®å…±äº«æ–‡ä»¶å¤¹"><a href="#è®¿é—®å…±äº«æ–‡ä»¶å¤¹" class="headerlink" title="è®¿é—®å…±äº«æ–‡ä»¶å¤¹"></a>è®¿é—®å…±äº«æ–‡ä»¶å¤¹</h1><ol><li><p>ä½¿ç”¨<code>smbclient</code>è®¿é—®å…±äº«æ–‡ä»¶å¤¹<br>&emsp;&emsp;å®‰è£…<code>samba-client</code>è¿™ä¸ªåŒ…<br>æŸ¥è¯¢ç›®æ ‡ä¸»æœºçš„å…±äº«èµ„æºåˆ—è¡¨<br>ä½¿ç”¨<code>smbclient</code>å‘½ä»¤æŸ¥è¯¢<br>é€‰é¡¹ï¼š<br>&emsp;&emsp;<code>-U</code>ï¼šæŒ‡å®šç›®æ ‡ä¸»æœºipæˆ–ä¸»æœºå<br>&emsp;&emsp;<code>-L</code>ï¼šæŒ‡å®šä»¥æŸç”¨æˆ·è´¦å·åˆ—è¡¨æŸ¥çœ‹<br>æ ¼å¼ï¼š<code>smbclient -L ip/ä¸»æœºå -U ç”¨æˆ·å/åˆ«å</code><br>æŸ¥è¯¢å…±äº«èµ„æºæ—¶ï¼Œä¸€èˆ¬ä¸éœ€è¦ç”¨æˆ·éªŒè¯ï¼Œæç¤ºè¾“å…¥å¯†ç æ—¶ç›´æ¥å›è½¦å³å¯ã€‚<br>ä¾‹å¦‚ï¼šåŒ¿åæŸ¥è¯¢sambaæœåŠ¡å™¨<code>192.168.0.123</code>ä¸­æä¾›å…±äº«èµ„æºåˆ—è¡¨ï¼Œä½¿ç”¨queenç”¨æˆ·<br>&emsp;&emsp;<code>smbclient -L 192.168.0.123 -U queen</code><br><img src="/medias/drawing-bed/samba/20.png"></p></li><li><p>ç™»å½•å¹¶è®¿é—®å…±äº«æ–‡ä»¶å¤¹<br>åŒ¿åè®¿é—®å…±äº«æ–‡ä»¶å¤¹æ—¶æç¤ºè¾“å…¥å¯†ç æ—¶ç›´æ¥å›è½¦å³å¯<br>åŒ¿åç™»å½•è®¿é—®æ ¼å¼<br>&emsp;&emsp;<code>smbclient //ä¸»æœºåœ°å€/å…±äº«å</code><br>ä¾‹å¦‚ï¼šä»¥ä¸‹æ“ä½œå¯ä»¥è¿æ¥åˆ°sambaæœåŠ¡å™¨192.168.0.123ä¸­åä¸ºtestçš„åŒ¿åå…±äº«ç›®å½•<br>&emsp;&emsp;<code>smbclient //192.168.0.123/test</code>  </p></li></ol><p>è‹¥è®¿é—®éœ€è¦ç”¨æˆ·éªŒè¯çš„å…±äº«æ–‡ä»¶å¤¹ï¼Œåˆ™å¿…é¡»ç»“åˆ-Ué€‰é¡¹æŒ‡å®šç»è¿‡æˆæƒçš„å…±äº«ç”¨æˆ·åç§°ï¼ˆæˆ–æ˜ å°„çš„åˆ«åï¼‰å¹¶è¾“å…¥æ­£ç¡®çš„å¯†ç è¿›è¡ŒéªŒè¯<br>ç”¨æˆ·éªŒè¯ç™»å½•æ ¼å¼<br>&emsp;&emsp;<code>smbclient -U ç”¨æˆ·å/åˆ«å //ä¸»æœºåœ°å€/å…±äº«å [-U ç”¨æˆ·å/åˆ«å]</code>  </p><p>ä¾‹å¦‚ï¼šå¯¹äºä¸Šé¢è®²åˆ°çš„dateå…±äº«ï¼Œä½¿ç”¨queenæˆ–å…¶åˆ«åéƒ½å¯ä»¥è¿›è¡Œè®¿é—®<br><code>smbclient -U queen //192.168.0.123/date</code><br>é€šè¿‡<code>smbclient</code>å·¥å…·æˆåŠŸç™»å½•sambaæœåŠ¡å™¨ä»¥åï¼Œä¼šå‡ºç°<code>smb:\&gt;</code>æç¤ºç¬¦ï¼Œæä¾›äº†ä¸€ä¸ªå‘½ä»¤ç¨‹åºçš„ç¯å¢ƒï¼Œåœ¨<code>smb:\&gt;</code>ç¯å¢ƒä¸­ä½¿ç”¨ç‰¹å®šçš„å‘½ä»¤å¯ä»¥å¯¹å…±äº«ç›®å½•è¿›è¡Œåˆ—è¡¨ã€ä¸Šä¼ ã€ä¸‹è½½ç­‰æ“ä½œ  </p><p>ä¾‹å¦‚ï¼š<code>ls</code>ã€<code>cd</code>ã€<code>pwd</code>ã€<br><code>get</code>ã€<code>wget</code>ï¼šä¸‹è½½æ–‡ä»¶<br><code>put</code>ã€<code>mput</code>ï¼šç”¨äºä¸Šä¼ æ–‡ä»¶<br><code>ï¼Ÿ</code>ã€<code>help</code>ï¼šæŸ¥çœ‹å¸®åŠ©ä¿¡æ¯<br><code>exit</code>ã€<code>quit</code>ï¼šé€€å‡ºå…±äº«ç›®å½•  </p><ol start="3"><li>ä½¿ç”¨mountæŒ‚è½½å…±äº«æ–‡ä»¶å¤¹<br>smbclientå®¢æˆ·ç«¯å·¥å…·å¯ä»¥éå¸¸æ–¹ä¾¿åœ°ç™»å½•åˆ°sambaæœåŠ¡å™¨ä¸­ï¼Œä½†åªæœ‰å°†æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ä»¥åæ‰èƒ½æŸ¥çœ‹æ–‡ä»¶å†…å®¹ï¼Œè‹¥ä½¿ç”¨mountå‘½ä»¤å°†å…±äº«æ–‡ä»¶å¤¹æŒ‚è½½åˆ°æœ¬åœ°ï¼Œåˆ™é€šè¿‡æœ¬åœ°çš„æŒ‚è½½ç‚¹ç›®å½•å³å¯ç›´æ¥ä½¿ç”¨å…±äº«æ–‡ä»¶å¤¹çš„å†…å®¹ï¼Œä½¿æ–‡ä»¶å…±äº«æ›´åŠ æ–¹ä¾¿ã€‚<br>ä½¿ç”¨mountå‘½ä»¤æŒ‚è½½å…±äº«èµ„æºæ—¶ï¼Œåªéœ€è¦é€šè¿‡â€//ä¸»æœºåœ°å€/å…±äº«åâ€çš„å½¢å¼æŒ‡å®šå…±äº«æ–‡ä»¶å¤¹çš„ä½ç½®ï¼ˆè§†ä¸ºè®¾å¤‡èµ„æºï¼‰ï¼Œå¹¶æŒ‡å®šæœ¬åœ°çš„æŒ‚è½½ç‚¹å³å¯ï¼Œå¦‚æœè¦ä»¥æŸä¸ªå…±äº«ç”¨æˆ·è¿›è¡ŒéªŒè¯ï¼Œå°±è¦ç”¨åˆ°-oé€‰é¡¹æŒ‡å®šâ€username=ç”¨æˆ·åâ€çš„å½¢å¼æŒ‡å®š  </li></ol><p>æ ¼å¼ï¼š<br>&emsp;&emsp;<code>mount -o username=å…±äº«ç”¨æˆ·å //ä¸»æœºåœ°å€/å…±äº«å /æŒ‚è½½ç‚¹</code>  </p><p>å¦‚æœä¸èƒ½æŒ‚è½½æŸ¥çœ‹<code>cifs-utils</code>å·¥å…·æ˜¯å¦å®‰è£…<br>ä¾‹å¦‚ï¼šï¼ˆå¯¹å®¢æˆ·ç«¯æ¥è¯´ï¼‰  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> /media/date<span class="token function">mount</span> -o <span class="token assign-left variable">username</span><span class="token operator">=</span>queen //192.168.0.123/test /media/date<span class="token function">mount</span>   <span class="token comment"># æŸ¥çœ‹ç»“æœ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æŒ‚è½½æˆåŠŸåå¯ä»¥å¯¹sambaæœåŠ¡å™¨è®¾ç½®æƒé™è¿›è¡Œæµ‹è¯•ï¼ˆmkdir;touchï¼‰<br><img src="/medias/drawing-bed/samba/21.png"></p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> samba </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nfså…±äº«</title>
      <link href="/posts/98ae.html"/>
      <url>/posts/98ae.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="NFSå…±äº«æœåŠ¡"><a href="#NFSå…±äº«æœåŠ¡" class="headerlink" title="NFSå…±äº«æœåŠ¡"></a>NFSå…±äº«æœåŠ¡</h1><p>NFSç®€ä»‹ï¼š<br>&emsp;&emsp;NFSï¼šNetwork FileSystemï¼ˆç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼‰æ˜¯ä¸€ç§åŸºäºTCP/IPä¼ è¾“çš„ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿåè®®ï¼Œæœ€åˆç”±SUNå…¬å¸å¼€å‘<br>&emsp;&emsp;ä½œç”¨ï¼šé€šè¿‡ä½¿ç”¨NFSåè®®ï¼Œå®¢æˆ·æœºå¯ä»¥æŒ‚è½½NFSå…±äº«å‡ºæ¥çš„ç›®å½•ï¼Œç„¶ååƒè®¿é—®æœ¬åœ°ç›®å½•ä¸€æ ·è®¿é—®è¿œç¨‹æœåŠ¡å™¨ä¸­çš„å…±äº«èµ„æº<br>&emsp;&emsp;ç‰¹ç‚¹åŠé€‚ç”¨èŒƒå›´ï¼šNFSæ²¡æœ‰å®¢æˆ·ç«¯è®¤è¯æœºåˆ¶ï¼Œè€Œä¸”æ•°æ®åœ¨ç½‘ç»œä¸Šæ˜æ–‡ä¼ è¾“ï¼Œæ‰€ä»¥å®‰å…¨æ€§å¾ˆå·®ï¼Œä¸€èˆ¬åªèƒ½åœ¨å±€åŸŸç½‘ä¸­ä½¿ç”¨<br>NFSæœåŠ¡çš„å®ç°ä¾èµ–äºRPCæœºåˆ¶ï¼ˆè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰ï¼Œä»¥å®Œæˆè¿œç¨‹åˆ°æœ¬åœ°çš„æ˜ å°„è¿‡ç¨‹<br>ç”±äºnfså„é¡¹åŠŸèƒ½éƒ½å¿…é¡»å‘RPCæœåŠ¡æ³¨å†Œä¸€ä¸ªåˆæ³•çš„ç«¯å£ç”¨æ¥ç»™å®¢æˆ·ç«¯æä¾›æœåŠ¡ï¼Œæ‰€ä»¥å¯åŠ¨nfsæœåŠ¡æ—¶ï¼Œè¦å…ˆä¿è¯RPCæœåŠ¡å·²ç»å¯åŠ¨ï¼Œå¦åˆ™nfsæœåŠ¡ä¸èƒ½æ­£å¸¸æä¾›æœåŠ¡ï¼›</p><ol><li>å®¢æˆ·ç«¯ä¼šå‘æœåŠ¡å™¨ç«¯çš„RPCï¼ˆport 111ï¼‰å‘å‡ºNFSæœåŠ¡è¯·æ±‚  </li><li>æœåŠ¡å™¨ç«¯æ‰¾åˆ°å¯¹åº”çš„å·²æ³¨å†Œçš„NFS daemonç«¯å£åï¼Œä¼šå›æŠ¥ç»™å®¢æˆ·ç«¯  </li><li>å®¢æˆ·ç«¯çŸ¥é“æ­£ç¡®çš„ç«¯å£åï¼Œå°±å¯ä»¥ç›´æ¥ä¸NFS daemonæœåŠ¡è¿çº¿ï¼ˆdaemonå®ˆæŠ¤è¿›ç¨‹ï¼‰  </li></ol><p>åœ¨CentOS6ç³»ç»Ÿä¸­ï¼Œéœ€è¦å®‰è£…nfs-utils,rpcbindè½¯ä»¶åŒ…æ¥æä¾›NFSå…±äº«æœåŠ¡ï¼Œå‰è€…ç”¨äºNFSå…±äº«å‘å¸ƒå’Œè®¿é—®ï¼Œåè€…ç”¨äºRPCæ”¯æŒ  </p><h2 id="ä½¿ç”¨NFSå‘å¸ƒå…±äº«èµ„æºï¼š"><a href="#ä½¿ç”¨NFSå‘å¸ƒå…±äº«èµ„æºï¼š" class="headerlink" title="ä½¿ç”¨NFSå‘å¸ƒå…±äº«èµ„æºï¼š"></a>ä½¿ç”¨NFSå‘å¸ƒå…±äº«èµ„æºï¼š</h2><h3 id="å®‰è£…nfs-utilsã€rpcbindè½¯ä»¶åŒ…"><a href="#å®‰è£…nfs-utilsã€rpcbindè½¯ä»¶åŒ…" class="headerlink" title="å®‰è£…nfs-utilsã€rpcbindè½¯ä»¶åŒ…"></a>å®‰è£…nfs-utilsã€rpcbindè½¯ä»¶åŒ…</h3><p><code>yum -y install nfs-utils rpcbind</code><br>æ‰‹åŠ¨åŠ è½½NFSå…±äº«æœåŠ¡æ—¶ï¼Œåº”è¯¥å…ˆå¯åŠ¨rpcbind å†å¯åŠ¨nfs  </p><h3 id="è®¾ç½®å…±äº«ç›®å½•"><a href="#è®¾ç½®å…±äº«ç›®å½•" class="headerlink" title="è®¾ç½®å…±äº«ç›®å½•"></a>è®¾ç½®å…±äº«ç›®å½•</h3><p>NFSçš„é…ç½®æ–‡ä»¶ä¸º<code>/etc/exports</code><br>åœ¨exportsæ–‡ä»¶ä¸­è®¾ç½®å…±äº«èµ„æºæ—¶ï¼Œè®°å½•æ ¼å¼ä¸ºï¼š<br><code>ç›®å½•è·¯å¾„ï¼ˆç»å¯¹è·¯å¾„ï¼‰  å®¢æˆ·æœºåœ°å€ï¼ˆæƒé™é€‰é¡¹ï¼‰</code><br>ï¼ˆå®¢æˆ·æœºåœ°å€å¯ä»¥æ˜¯ä¸»æœºåã€IPåœ°å€ã€ç½‘æ®µåœ°å€ã€å¯ä»¥ä½¿ç”¨â€é€šé…ç¬¦â€ï¼‰<br>ä¾‹å¦‚ï¼š<br><code>/testdir/dir   192.168.0.0/24(rw,sync,no_root_squash)</code> </p><p>æƒé™é€‰é¡¹çš„å«ä¹‰ï¼š<br>&emsp;&emsp;<code>rw</code>ï¼šè¯»å†™<br>&emsp;&emsp;<code>ro</code>ï¼šåªè¯»<br>&emsp;&emsp;<code>sync</code>ï¼šåŒæ­¥å†™è¿›å†…å­˜å’Œç£ç›˜<br>&emsp;&emsp;<code>async</code>ï¼šå…ˆå†™è¿›å†…å­˜å†å†™è¿›ç£ç›˜<br>&emsp;&emsp;<code>no_root_squash</code>ï¼šè¡¨ç¤ºå½“å®¢æˆ·æœºä»¥<code>root</code>èº«ä»½è®¿é—®æ—¶èµ‹äºˆæœ¬åœ°<code>root</code>æƒé™<br>ï¼ˆé»˜è®¤æ˜¯<code>root_squash</code>ï¼Œå°†ä½œä¸º<code>nfsnobody</code>ç”¨æˆ·é™æƒå¯¹å¾…ï¼‰<br>&emsp;&emsp;å½“éœ€è¦å°†åŒä¸€ä¸ªç›®å½•å…±äº«ç»™ä¸åŒçš„å®¢æˆ·æœºï¼Œä¸”åˆ†é…ä¸åŒçš„ç‰¹æƒæ—¶ï¼Œåªè¦ä»¥ç©ºæ ¼åˆ†å‰²æŒ‡å®šå¤šä¸ªâ€å®¢æˆ·æœºï¼ˆç‰¹æƒé€‰é¡¹ï¼‰â€å³å¯  </p><h3 id="å¯åŠ¨NFSæœåŠ¡ç¨‹åº"><a href="#å¯åŠ¨NFSæœåŠ¡ç¨‹åº" class="headerlink" title="å¯åŠ¨NFSæœåŠ¡ç¨‹åº"></a>å¯åŠ¨NFSæœåŠ¡ç¨‹åº</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl start rpcbindsystemctl start nfs<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="æŸ¥çœ‹NFSçš„å¯åŠ¨çŠ¶å†µ"><a href="#æŸ¥çœ‹NFSçš„å¯åŠ¨çŠ¶å†µ" class="headerlink" title="æŸ¥çœ‹NFSçš„å¯åŠ¨çŠ¶å†µ"></a>æŸ¥çœ‹NFSçš„å¯åŠ¨çŠ¶å†µ</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rpcinfo  -p  localhost <span class="token operator">|</span> <span class="token function">grep</span> nfsss -anptl<span class="token operator">|</span><span class="token function">grep</span> rpcind<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/nfs/0.gif"><br>NFSæœåŠ¡ä½¿ç”¨çš„111å’Œ2049ç«¯å£æ˜¯å›ºå®šçš„ï¼Œmountdç«¯å£æ˜¯åŠ¨æ€çš„ï¼Œéœ€è¦å›ºå®šï¼Œç„¶ååœ¨é˜²ç«å¢™æ”¾è¡Œã€‚<br><em>é˜²ç«å¢™å…³é—­å°±ä¸å¿…æ‰§è¡Œäº†</em>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å›ºå®šç«¯å£</span><span class="token function">tee</span> <span class="token operator">>></span> /etc/sysconfig/nfs <span class="token operator">&lt;&lt;</span> <span class="token string">EOFRQUOTAD_PORT=30001LOCKD_TCPPORT=30002LOCKD_UDPPORT=30002MOUNTD_PORT=30003STATD_PORT=30004EOF</span><span class="token comment"># é‡å¯nfså’Œrpcbindï¼š</span>systemctl restart rpcbindsystemctl restart nfs<span class="token comment"># ï¼ˆç«¯å£å¹¶æœªä¿®æ”¹ï¼Œrebootç³»ç»Ÿåæ‰ä¿®æ”¹ï¼‰</span><span class="token comment"># é˜²ç«å¢™æ”¾è¡Œç«¯å£</span><span class="token comment"># æŸ¥çœ‹é˜²ç«å¢™æ˜¯å¦å¼€å¯ï¼š</span>firewall-cmd --state<span class="token comment"># è®¾ç½®é˜²ç«å¢™</span>firewall-cmd --permanent --add-port<span class="token operator">=</span><span class="token number">2049</span>/tcpfirewall-cmd --permanent --add-port<span class="token operator">=</span><span class="token number">2049</span>/udpfirewall-cmd --permanent --add-port<span class="token operator">=</span><span class="token number">111</span>/tcpfirewall-cmd --permanent --add-port<span class="token operator">=</span><span class="token number">111</span>/udpfirewall-cmd --permanent --add-port<span class="token operator">=</span><span class="token string">"30001-30004"</span>/udpfirewall-cmd --permanent --add-port<span class="token operator">=</span><span class="token string">"30001-30004"</span>/tcpfirewall-cmd --reload   <span class="token comment"># åŠ è½½è§„åˆ™ç”Ÿæ•ˆ</span>firewall-cmd --zone<span class="token operator">=</span>public --list-ports   <span class="token comment"># åˆ—å‡ºæ‰€æœ‰è§„åˆ™</span><span class="token comment"># 2049/tcp 2049/udp 111/tcp 111/udp 30001-30004/udp 30001-30004/tcp</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æŸ¥çœ‹æœ¬æœºå‘å¸ƒçš„NFSå…±äº«ç›®å½•"><a href="#æŸ¥çœ‹æœ¬æœºå‘å¸ƒçš„NFSå…±äº«ç›®å½•" class="headerlink" title="æŸ¥çœ‹æœ¬æœºå‘å¸ƒçš„NFSå…±äº«ç›®å½•"></a>æŸ¥çœ‹æœ¬æœºå‘å¸ƒçš„NFSå…±äº«ç›®å½•</h3><p><code>showmount -e IPåœ°å€ï¼ˆlocalhostï¼‰</code></p><p>exportfså¦‚æœä¿®æ”¹äº†<code>/etc/exports</code>æ–‡ä»¶åï¼Œä¸éœ€è¦é‡æ–°å¯åŠ¨nfsæœåŠ¡ï¼Œåªéœ€è¦é‡æ–°æ‰«æä¸€æ¬¡<code>/etc/exports</code>æ–‡ä»¶å¤¹ï¼Œå¹¶é‡æ–°åŠ è½½å³å¯  </p><blockquote><p>exportfså‘½ä»¤  </p><blockquote><p>-aåŠ è½½exportfsæ–‡ä»¶ä¸­çš„è®¾ç½®<br>-ré‡æ–°æŒ‚è½½æ–‡ä»¶ä¸­çš„è®¾ç½®<br>-uå¸è½½æŸä¸€ç›®å½•<br>-vè¯¦ç»†ä¿¡æ¯  </p></blockquote></blockquote><h2 id="åœ¨å®¢æˆ·æœºä¸­è®¿é—®NFSå…±äº«èµ„æº"><a href="#åœ¨å®¢æˆ·æœºä¸­è®¿é—®NFSå…±äº«èµ„æº" class="headerlink" title="åœ¨å®¢æˆ·æœºä¸­è®¿é—®NFSå…±äº«èµ„æº"></a>åœ¨å®¢æˆ·æœºä¸­è®¿é—®NFSå…±äº«èµ„æº</h2><h3 id="å®‰è£…rpcbindè½¯ä»¶åŒ…ï¼Œå¹¶å¯åŠ¨rpcbindæœåŠ¡"><a href="#å®‰è£…rpcbindè½¯ä»¶åŒ…ï¼Œå¹¶å¯åŠ¨rpcbindæœåŠ¡" class="headerlink" title="å®‰è£…rpcbindè½¯ä»¶åŒ…ï¼Œå¹¶å¯åŠ¨rpcbindæœåŠ¡"></a>å®‰è£…rpcbindè½¯ä»¶åŒ…ï¼Œå¹¶å¯åŠ¨rpcbindæœåŠ¡</h3><p>å¦‚æœå·²ç»å®‰è£…äº†<code>nfs-utils</code>è½¯ä»¶åŒ…ï¼Œåˆ™å®¢æˆ·æœºä¹Ÿå¯ä»¥ä½¿ç”¨<code>showmount</code>æŸ¥çœ‹NFSæœåŠ¡å™¨å…±äº«äº†å“ªäº›ç›®å½•ï¼ŒæŸ¥çœ‹æ ¼å¼ä¸ºï¼š<br><code>showmount -e æœåŠ¡å™¨ipåœ°å€</code> </p><h3 id="æ‰‹åŠ¨æŒ‚è½½NFSå…±äº«ç›®å½•"><a href="#æ‰‹åŠ¨æŒ‚è½½NFSå…±äº«ç›®å½•" class="headerlink" title="æ‰‹åŠ¨æŒ‚è½½NFSå…±äº«ç›®å½•"></a>æ‰‹åŠ¨æŒ‚è½½NFSå…±äº«ç›®å½•</h3><p>å°†NFSæœåŠ¡å™¨å…±äº«çš„ ç›®å½• æŒ‚è½½åˆ°æœ¬åœ° ç›®å½•<br>æŸ¥çœ‹ï¼š<br><code>mount æˆ– tail -1 /etc/mtab</code><br><img src="/medias/drawing-bed/nfs/1.gif"></p><h3 id="fstabè‡ªåŠ¨æŒ‚è½½è®¾ç½®"><a href="#fstabè‡ªåŠ¨æŒ‚è½½è®¾ç½®" class="headerlink" title="fstabè‡ªåŠ¨æŒ‚è½½è®¾ç½®"></a>fstabè‡ªåŠ¨æŒ‚è½½è®¾ç½®</h3><p>æ³¨æ„å°†æ–‡ä»¶ç³»ç»Ÿç±»å‹è®¾ç½®ä¸ºnfsï¼ŒæŒ‚è½½å‚æ•°å»ºè®®æ·»åŠ <code>_netdev</code>ï¼ˆè®¾å¤‡éœ€è¦ç½‘ç»œï¼‰<br><code>vi /etc/fstab</code><br>æ·»åŠ ï¼š<br><code>192.168.0.123:/å…±äº«ç›®å½• /æŒ‚è½½ç‚¹ nfs default,_netdev 0 0</code> </p><p>å¤šå°å®¢æˆ·æœºéƒ½å¯ä»¥è®¿é—®åŒä¸€ä¸ªæŒ‚è½½ç›®å½•ï¼Œä½†ä¸å…è®¸ä¿®æ”¹åŒä¸€æ–‡ä»¶  </p><h1 id="é™„å½•ï¼š"><a href="#é™„å½•ï¼š" class="headerlink" title="é™„å½•ï¼š"></a>é™„å½•ï¼š</h1><p><code>/etc/fstab</code>æ˜¯ç”¨æ¥å­˜æ”¾æ–‡ä»¶ç³»ç»Ÿçš„é™æ€ä¿¡æ¯çš„æ–‡ä»¶ã€‚<code>less /etc/fstab</code>æŸ¥çœ‹ï¼Œ<code>vi /etc/fstab</code>ä¿®æ”¹ã€‚<br>å½“ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åœ°ä»è¿™ä¸ªæ–‡ä»¶è¯»å–ä¿¡æ¯ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨å°†æ­¤æ–‡ä»¶ä¸­æŒ‡å®šçš„æ–‡ä»¶ç³»ç»ŸæŒ‚è½½åˆ°æŒ‡å®šçš„ç›®å½•ã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># &lt;file system>        &lt;dir>         &lt;type>    &lt;options>             &lt;dump> &lt;pass></span>tmpfs                  /tmp          tmpfs     nodev,nosuid          <span class="token number">0</span>      <span class="token number">0</span>/dev/sda1              /             ext4      defaults,noatime      <span class="token number">0</span>      <span class="token number">1</span>/dev/sda2              none          swap      defaults              <span class="token number">0</span>      <span class="token number">0</span>/dev/sda3              /home         ext4      defaults,noatime      <span class="token number">0</span>      <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å­—æ®µå®šä¹‰  </p><p><code>&lt;file system&gt;    &lt;dir&gt;    &lt;type&gt;    &lt;options&gt;    &lt;dump&gt;    &lt;pass&gt;</code><br><code>&lt;file systems&gt;</code>ï¼šè¦æŒ‚è½½çš„åˆ†åŒºæˆ–å­˜å‚¨è®¾å¤‡.<br><code>&lt;dir&gt;</code>ï¼š<code>&lt;file systems&gt;</code>çš„æŒ‚è½½ä½ç½®ã€‚<br><code>&lt;type&gt;</code>ï¼šè¦æŒ‚è½½è®¾å¤‡æˆ–æ˜¯åˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œæ”¯æŒè®¸å¤šç§ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿï¼š<code>ext2</code>,<code>ext3</code>,<code>ext4</code>,<code>reiserfs</code>,<code>xfs</code>,<code>jfs</code>,<code>smbfs</code>,<code>iso9660</code>,<code>vfat</code>,<code>ntfs</code>,<code>swap</code>åŠ<code>auto</code>ã€‚ è®¾ç½®æˆ<code>auto</code>ç±»å‹ï¼Œ<code>mount</code>å‘½ä»¤ä¼šçŒœæµ‹ä½¿ç”¨çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹ï¼Œå¯¹<code>CDROM</code>å’Œ<code>DVD</code>ç­‰ç§»åŠ¨è®¾å¤‡æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚<br><code>&lt;options&gt;</code>ï¼šæŒ‚è½½æ—¶ä½¿ç”¨çš„å‚æ•°ï¼Œæ³¨æ„æœ‰äº›<code>mount</code>å‚æ•°æ˜¯ç‰¹å®šæ–‡ä»¶ç³»ç»Ÿæ‰æœ‰çš„ã€‚ä¸€äº›æ¯”è¾ƒå¸¸ç”¨çš„å‚æ•°æœ‰ï¼š<br>-<code>auto</code>ï¼šåœ¨å¯åŠ¨æ—¶æˆ–é”®å…¥äº†<code>mount -a</code>å‘½ä»¤æ—¶è‡ªåŠ¨æŒ‚è½½ã€‚<br>-<code>noauto</code>ï¼šåªåœ¨ä½ çš„å‘½ä»¤ä¸‹è¢«æŒ‚è½½ã€‚<br>-<code>exec</code>ï¼šå…è®¸æ‰§è¡Œæ­¤åˆ†åŒºçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚<br>-<code>noexec</code>ï¼šä¸å…è®¸æ‰§è¡Œæ­¤æ–‡ä»¶ç³»ç»Ÿä¸Šçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚<br>-<code>ro</code>ï¼šä»¥åªè¯»æ¨¡å¼æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€‚<br>-<code>rw</code>ï¼šä»¥è¯»å†™æ¨¡å¼æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€‚<br>-<code>user</code>ï¼šå…è®¸ä»»æ„ç”¨æˆ·æŒ‚è½½æ­¤æ–‡ä»¶ç³»ç»Ÿï¼Œè‹¥æ— æ˜¾ç¤ºå®šä¹‰ï¼Œéšå«å¯ç”¨<code>noexec</code>,<code>nosuid</code>,<code>nodev</code>å‚æ•°ã€‚<br>-<code>users</code>ï¼šå…è®¸æ‰€æœ‰<code>users</code>ç»„ä¸­çš„ç”¨æˆ·æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿ.<br>-<code>nouser</code>ï¼šåªèƒ½è¢«<code>root</code>æŒ‚è½½ã€‚<br>-<code>owner</code>ï¼šå…è®¸è®¾å¤‡æ‰€æœ‰è€…æŒ‚è½½.<br>-<code>sync</code>ï¼šI/O åŒæ­¥è¿›è¡Œã€‚<br>-<code>async</code>ï¼šI/O å¼‚æ­¥è¿›è¡Œã€‚<br>-<code>dev</code>ï¼šè§£ææ–‡ä»¶ç³»ç»Ÿä¸Šçš„å—ç‰¹æ®Šè®¾å¤‡ã€‚<br>-<code>nodev</code>ï¼šä¸è§£ææ–‡ä»¶ç³»ç»Ÿä¸Šçš„å—ç‰¹æ®Šè®¾å¤‡ã€‚<br>-<code>suid</code>ï¼šå…è®¸<code>suid</code>æ“ä½œå’Œè®¾å®š<code>sgid</code>ä½ã€‚è¿™ä¸€å‚æ•°é€šå¸¸ç”¨äºä¸€äº›ç‰¹æ®Šä»»åŠ¡ï¼Œä½¿ä¸€èˆ¬ç”¨æˆ·è¿è¡Œç¨‹åºæ—¶ä¸´æ—¶æå‡æƒé™ã€‚<br>-<code>nosuid</code>ï¼šç¦æ­¢<code>suid</code>æ“ä½œå’Œè®¾å®š<code>sgid</code>ä½ã€‚<br>-<code>noatime</code>ï¼šä¸æ›´æ–°æ–‡ä»¶ç³»ç»Ÿä¸Š<code>inode</code>è®¿é—®è®°å½•ï¼Œå¯ä»¥æå‡æ€§èƒ½(å‚è§<code>atime</code>å‚æ•°)ã€‚<br>-<code>nodiratime</code>ï¼šä¸æ›´æ–°æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç›®å½•<code>inode</code>è®¿é—®è®°å½•ï¼Œå¯ä»¥æå‡æ€§èƒ½(å‚è§<code>atime</code>å‚æ•°)ã€‚<br>-<code>relatime</code>ï¼šå®æ—¶æ›´æ–°<code>inode</code> <code>access</code>è®°å½•ã€‚åªæœ‰åœ¨è®°å½•ä¸­çš„è®¿é—®æ—¶é—´æ—©äºå½“å‰è®¿é—®æ‰ä¼šè¢«æ›´æ–°ã€‚ï¼ˆä¸<code>noatime</code>ç›¸ä¼¼ï¼Œä½†ä¸ä¼šæ‰“æ–­å¦‚<code>mutt</code>æˆ–å…¶å®ƒç¨‹åºæ¢æµ‹æ–‡ä»¶åœ¨ä¸Šæ¬¡è®¿é—®åæ˜¯å¦è¢«ä¿®æ”¹çš„è¿›ç¨‹ã€‚ï¼‰ï¼Œå¯ä»¥æå‡æ€§èƒ½(å‚è§<code>atime</code>å‚æ•°)ã€‚<br>-<code>flush</code>ï¼š<code>vfat</code>çš„é€‰é¡¹ï¼Œæ›´é¢‘ç¹çš„åˆ·æ–°æ•°æ®ï¼Œå¤åˆ¶å¯¹è¯æ¡†æˆ–è¿›åº¦æ¡åœ¨å…¨éƒ¨æ•°æ®éƒ½å†™å…¥åæ‰æ¶ˆå¤±ã€‚<br>-<code>defaults</code>ï¼šä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿçš„é»˜è®¤æŒ‚è½½å‚æ•°ï¼Œä¾‹å¦‚<code>ext4</code>çš„é»˜è®¤å‚æ•°ä¸º:<code>rw</code>,<code>suid</code>,<code>dev</code>,<code>exec</code>,<code>auto</code>,<code>nouser</code>,<code>async</code>.  </p><p><code>&lt;dump&gt;</code>ï¼š<code>dump</code>å·¥å…·é€šè¿‡å®ƒå†³å®šä½•æ—¶ä½œå¤‡ä»½.<code>dump</code>ä¼šæ£€æŸ¥å…¶å†…å®¹ï¼Œå¹¶ç”¨æ•°å­—æ¥å†³å®šæ˜¯å¦å¯¹è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿè¿›è¡Œå¤‡ä»½ã€‚ å…è®¸çš„æ•°å­—æ˜¯<code>0</code>å’Œ<code>1</code>ã€‚<code>0</code>è¡¨ç¤ºå¿½ç•¥ï¼Œ<code>1</code>åˆ™è¿›è¡Œå¤‡ä»½ã€‚å¤§éƒ¨åˆ†çš„ç”¨æˆ·æ˜¯æ²¡æœ‰å®‰è£…<code>dump</code>çš„ï¼Œå¯¹ä»–ä»¬è€Œè¨€<code>&lt;dump&gt;</code>åº”è®¾ä¸º<code>0</code>ã€‚<br><code>&lt;pass&gt;</code>ï¼š<code>fsck</code>è¯»å–<code>&lt;pass&gt;</code>çš„æ•°å€¼æ¥å†³å®šéœ€è¦æ£€æŸ¥çš„æ–‡ä»¶ç³»ç»Ÿçš„æ£€æŸ¥é¡ºåºã€‚å…è®¸çš„æ•°å­—æ˜¯<code>0</code>,<code>1</code>,å’Œ<code>2</code>ã€‚æ ¹ç›®å½•åº”å½“è·å¾—æœ€é«˜çš„ä¼˜å…ˆæƒ<code>1</code>,å…¶å®ƒæ‰€æœ‰éœ€è¦è¢«æ£€æŸ¥çš„è®¾å¤‡è®¾ç½®ä¸º<code>2</code>.<code>0</code>è¡¨ç¤ºè®¾å¤‡ä¸ä¼šè¢«<code>fsck</code>æ‰€æ£€æŸ¥ã€‚  </p><p>æ–‡ä»¶ç³»ç»Ÿæ ‡è¯†<br>åœ¨<code>/etc/fstab</code>é…ç½®æ–‡ä»¶ä¸­ä½ å¯ä»¥ä»¥ä¸‰ç§ä¸åŒçš„æ–¹æ³•è¡¨ç¤ºæ–‡ä»¶ç³»ç»Ÿï¼šå†…æ ¸åç§°ã€<code>UUID</code>æˆ–è€…<code>label</code>ã€‚ä½¿ç”¨<code>UUID</code>æˆ–æ˜¯<code>label</code>çš„å¥½å¤„åœ¨äºå®ƒä»¬ä¸ç£ç›˜é¡ºåºæ— å…³ã€‚å¦‚æœä½ åœ¨<code>BIOS</code>ä¸­æ”¹å˜äº†ä½ çš„å­˜å‚¨è®¾å¤‡é¡ºåºï¼Œæˆ–æ˜¯é‡æ–°æ‹”æ’äº†å­˜å‚¨è®¾å¤‡ï¼Œæˆ–æ˜¯å› ä¸ºä¸€äº›<code>BIOS</code>å¯èƒ½ä¼šéšæœºåœ°æ”¹å˜å­˜å‚¨è®¾å¤‡çš„é¡ºåºï¼Œé‚£ä¹ˆç”¨<code>UUID</code>æˆ–æ˜¯<code>label</code>æ¥è¡¨ç¤ºå°†æ›´æœ‰æ•ˆã€‚å‚è§ æŒä¹…åŒ–å—è®¾å¤‡åç§° ã€‚  </p><p>è¦æ˜¾ç¤ºåˆ†åŒºçš„åŸºæœ¬ä¿¡æ¯è¯·è¿è¡Œï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ lsblk -fNAME   FSTYPE LABEL      UUID                                 MOUNTPOINTsda                                                         â”œâ”€sda1 ext4   Arch_Linux 978e3e81-8048-4ae1-8a06-aa727458e8ff /â”œâ”€sda2 ntfs   Windows    6C1093E61093B594                     â””â”€sda3 ext4   Storage    f838b24e-3a66-4d02-86f4-a2e73e454336 /media/Storagesdb                                                           â”œâ”€sdb1 ntfs   Games      9E68F00568EFD9D3                     â””â”€sdb2 ext4   Backup     14d50a6c-e083-42f2-b9c4-bc8bae38d274 /media/Backupsdc                                                           â””â”€sdc1 vfat   Camera     47FA-4071                            /media/Camera<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å†…æ ¸åç§°<br>ä½ å¯ä»¥ä½¿ç”¨<code>fdisk -l</code>æ¥è·å¾—å†…æ ¸åç§°ï¼Œå‰ç¼€æ˜¯<code>dev</code>.  </p><p>æ ‡ç­¾<br>æ³¨æ„: ä½¿ç”¨è¿™ä¸€æ–¹æ³•ï¼Œæ¯ä¸€ä¸ªæ ‡ç­¾å¿…é¡»æ˜¯å”¯ä¸€çš„.<br>è¦æ˜¾ç¤ºæ‰€æœ‰è®¾å¤‡çš„æ ‡ç­¾ï¼Œå¯ä»¥ä½¿ç”¨<code>lsblk -f</code>å‘½ä»¤ã€‚åœ¨<code>/etc/fstab</code>ä¸­ä½¿ç”¨<code>LABEL=</code>ä½œä¸ºè®¾å¤‡åçš„å¼€å¤´:  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># &lt;file system>        &lt;dir>         &lt;type>    &lt;options>             &lt;dump> &lt;pass></span>tmpfs                  /tmp          tmpfs     nodev,nosuid   <span class="token number">0</span>      <span class="token number">0</span><span class="token assign-left variable">LABEL</span><span class="token operator">=</span>Arch_Linux       /             ext4      defaults,noatime      <span class="token number">0</span>      <span class="token number">1</span><span class="token assign-left variable">LABEL</span><span class="token operator">=</span>Arch_Swap        none          swap      defaults              <span class="token number">0</span>      <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>UUID<br>æ‰€æœ‰åˆ†åŒºå’Œè®¾å¤‡éƒ½æœ‰å”¯ä¸€çš„ UUIDã€‚å®ƒä»¬ç”±æ–‡ä»¶ç³»ç»Ÿç”Ÿæˆå·¥å…·<code>(mkfs.*)</code>åœ¨åˆ›å»ºæ–‡ä»¶ç³»ç»Ÿæ—¶ç”Ÿæˆã€‚  </p><p><code>lsblk -f</code>å‘½ä»¤å°†æ˜¾ç¤ºæ‰€æœ‰è®¾å¤‡çš„ UUID å€¼ã€‚<code>/etc/fstab</code>ä¸­ä½¿ç”¨<code>UUID=</code>å‰ç¼€:  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># &lt;file system>                           &lt;dir>         &lt;type>    &lt;options>             &lt;dump> &lt;pass></span>tmpfs                                     /tmp          tmpfs     nodev,nosuid          <span class="token number">0</span>      <span class="token number">0</span><span class="token assign-left variable">UUID</span><span class="token operator">=</span>24f28fc6-717e-4bcd-a5f7-32b959024e26 /     ext4              defaults,noatime      <span class="token number">0</span>      <span class="token number">1</span><span class="token assign-left variable">UUID</span><span class="token operator">=</span>03ec5dd3-45c0-4f95-a363-61ff321a09ff /home ext4              defaults,noatime      <span class="token number">0</span>      <span class="token number">2</span><span class="token assign-left variable">UUID</span><span class="token operator">=</span>4209c845-f495-4c43-8a03-5363dd433153 none  swap              defaults              <span class="token number">0</span>      <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‡ªåŠ¨æŒ‚è½½<br>å¦‚æœ<code>/home</code>åˆ†åŒºè¾ƒå¤§ï¼Œå¯ä»¥è®©ä¸ä¾èµ–<code>/home</code>åˆ†åŒºçš„æœåŠ¡å…ˆå¯åŠ¨ã€‚æŠŠä¸‹é¢çš„å‚æ•°æ·»åŠ åˆ°<code>/etc/fstab</code>æ–‡ä»¶ä¸­<code>/home</code>é¡¹ç›®çš„å‚æ•°éƒ¨åˆ†å³å¯ï¼š<br><code>noauto,x-systemd.automount</code><br>è¿™æ ·<code>/home</code>åˆ†åŒºåªæœ‰éœ€è¦è®¿é—®æ—¶æ‰ä¼šè¢«æŒ‚è½½ã€‚å†…æ ¸ä¼šç¼“å­˜æ‰€æœ‰çš„æ–‡ä»¶æ“ä½œï¼Œç›´åˆ°<code>/home</code>åˆ†åŒºå‡†å¤‡å®Œæˆã€‚  </p><p>æ³¨æ„: è¿™æ ·åšä¼šä½¿<code>/home</code>çš„æ–‡ä»¶ç³»ç»Ÿç±»å‹è¢«è¯†åˆ«ä¸º<code>autofs</code>ï¼Œé€ æˆ<code>mlocate</code>æŸ¥è¯¢æ—¶å¿½ç•¥è¯¥ç›®å½•ã€‚å®é™…åŠ é€Ÿæ•ˆæœå› é…ç½®è€Œå¼‚ï¼Œæ‰€ä»¥è¯·è‡ªå·±æƒè¡¡æ˜¯å¦éœ€è¦ã€‚<br>æŒ‚è½½è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿä¹Ÿæ˜¯åŒç†ã€‚å¦‚æœä½ ä»…æƒ³åœ¨éœ€è¦çš„æ—¶å€™æ‰æŒ‚è½½ï¼Œä¹Ÿå¯ä»¥æ·»åŠ <code>noauto,x-systemd.automount</code>å‚æ•°ã€‚å¦å¤–ï¼Œå¯ä»¥è®¾ç½®<code>x-systemd.device-timeout=#</code>å‚æ•°ï¼Œè®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œä»¥é˜²æ­¢ç½‘ç»œèµ„æºä¸èƒ½è®¿é—®çš„æ—¶å€™æµªè´¹æ—¶é—´ã€‚<br>å¦‚æœä½ çš„åŠ å¯†æ–‡ä»¶ç³»ç»Ÿéœ€è¦å¯†é’¥ï¼Œåˆ™éœ€è¦æ·»åŠ <code>noauto</code>å‚æ•°åˆ°<code>/etc/crypttab</code>æ–‡ä»¶ä¸­çš„å¯¹åº”ä½ç½®ã€‚systemd å¼€æœºçš„æ—¶å€™å°±ä¸ä¼šæ‰“å¼€è¿™ä¸ªåŠ å¯†è®¾å¤‡ï¼Œä¼šä¸€ç›´ç­‰å¾…åˆ°è®¾å¤‡è¢«è®¿é—®æ—¶å†ä½¿ç”¨å¯†é’¥æ–‡ä»¶æŒ‚è½½ã€‚æ¯”å¦‚åœ¨ä½¿ç”¨åŠ å¯†RAIDè®¾å¤‡çš„æ—¶å€™å¯ä»¥èŠ‚çœä¸€å®šçš„æ—¶é—´ï¼Œå› ä¸º systemd ä¸å¿…ç­‰åˆ°è®¾å¤‡å¯ç”¨åæ‰èƒ½è®¿é—®ã€‚ä¾‹å¦‚ï¼š<code>/etc/crypttab</code><br><code>data /dev/md0 /root/key noauto</code> </p><p>äº¤æ¢åˆ†åŒº UUID<br>å¦‚æœäº¤æ¢åˆ†åŒºæ²¡æœ‰ UUIDï¼Œå¯ä»¥æ‰‹åŠ¨åŠ å…¥ã€‚å¦‚æœä½¿ç”¨<code>lsblk -f</code>å‘½ä»¤æ²¡æœ‰åˆ—å‡ºäº¤æ¢åˆ†åŒºçš„ UUID å°±è¯´æ˜å‘ç”Ÿäº†è¿™ç§æƒ…å†µã€‚ä¸‹é¢æ˜¯ä¸ºäº¤æ¢åˆ†åŒºæŒ‡å®š UUID çš„æ­¥éª¤ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ç¡®å®šäº¤æ¢åˆ†åŒºï¼š  </span><span class="token function">swapon</span> -s<span class="token comment"># ç¦ç”¨äº¤æ¢åˆ†åŒºï¼š</span>swapoff /dev/sda7<span class="token comment"># ç”¨æ–° UUID é‡æ–°åˆ›å»ºäº¤æ¢åˆ†åŒºï¼š</span><span class="token function">mkswap</span> -U random /dev/sda7<span class="token comment"># æ¿€æ´»äº¤æ¢åˆ†åŒº:</span><span class="token function">swapon</span> /dev/sda7<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è·¯å¾„åæœ‰ç©ºæ ¼<br>å¦‚æœæŒ‚è½½çš„è·¯å¾„ä¸­æœ‰ç©ºæ ¼ï¼Œå¯ä»¥ä½¿ç”¨<code>\040</code>è½¬ä¹‰å­—ç¬¦æ¥è¡¨ç¤ºç©ºæ ¼ï¼ˆä»¥ä¸‰ä½å…«è¿›åˆ¶æ•°æ¥è¿›è¡Œè¡¨ç¤ºï¼‰  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/etc/fstab<span class="token assign-left variable">UUID</span><span class="token operator">=</span>47FA-4071     /home/username/Camera<span class="token punctuation">\</span>040Pictures   vfat  defaults,noatime      <span class="token number">0</span>  <span class="token number">2</span>/dev/sda7          /media/100<span class="token punctuation">\</span>040GB<span class="token punctuation">\</span>040<span class="token punctuation">(</span>Storage<span class="token punctuation">)</span>       ext4  defaults,noatime,user  <span class="token number">0</span>  <span class="token number">0</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.<span class="token operator">&lt;</span>/nowiki<span class="token operator">></span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¤–éƒ¨è®¾å¤‡<br>å¤–éƒ¨è®¾å¤‡åœ¨æ’å…¥æ—¶æŒ‚è½½ï¼Œåœ¨æœªæ’å…¥æ—¶å¿½ç•¥ã€‚è¿™éœ€è¦ nofail é€‰é¡¹ï¼Œå¯ä»¥åœ¨å¯åŠ¨æ—¶è‹¥è®¾å¤‡ä¸å­˜åœ¨ç›´æ¥å¿½ç•¥å®ƒè€Œä¸æŠ¥é”™.  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/etc/fstab /dev/sdg1    /media/backup    jfs    defaults,nofail    <span class="token number">0</span>  <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>atime</code>å‚æ•°<br>ä½¿ç”¨<code>noatime</code>,<code>nodiratime</code>æˆ–<code>relatime</code>å¯ä»¥æå‡<code>ext2</code>ï¼Œ<code>ext3</code>åŠ<code>ext4</code>æ ¼å¼ç£ç›˜çš„æ€§èƒ½ã€‚<code>Linux</code>åœ¨é»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨<code>atime</code>é€‰é¡¹ï¼Œæ¯æ¬¡åœ¨ç£ç›˜ä¸Šè¯»å–ï¼ˆæˆ–å†™å…¥ï¼‰æ•°æ®æ—¶éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªè®°å½•ã€‚è¿™æ˜¯ä¸ºæœåŠ¡å™¨è®¾è®¡çš„ï¼Œåœ¨æ¡Œé¢ä½¿ç”¨ä¸­æ„ä¹‰ä¸å¤§ã€‚é»˜è®¤çš„<code>atime</code>é€‰é¡¹æœ€å¤§çš„é—®é¢˜åœ¨äºå³ä½¿ä»é¡µé¢ç¼“å­˜è¯»å–æ–‡ä»¶(ä»å†…å­˜è€Œä¸æ˜¯ç£ç›˜è¯»å–)ï¼Œä¹Ÿä¼šäº§ç”Ÿç£ç›˜å†™æ“ä½œï¼<br>ä½¿ç”¨<code>noatime</code>é€‰é¡¹é˜»æ­¢äº†è¯»æ–‡ä»¶æ—¶çš„å†™æ“ä½œã€‚å¤§éƒ¨åˆ†åº”ç”¨ç¨‹åºéƒ½èƒ½å¾ˆå¥½å·¥ä½œã€‚åªæœ‰å°‘æ•°ç¨‹åºå¦‚<code>Mutt</code>éœ€è¦è¿™äº›ä¿¡æ¯ã€‚<code>Mutt</code>çš„ç”¨æˆ·åº”è¯¥ä½¿ç”¨<code>relatime</code>é€‰é¡¹ã€‚ä½¿ç”¨<code>relatime</code>é€‰é¡¹åï¼Œåªæœ‰æ–‡ä»¶è¢«ä¿®æ”¹æ—¶æ‰ä¼šäº§ç”Ÿæ–‡ä»¶è®¿é—®æ—¶é—´å†™æ“ä½œã€‚<code>nodiratime</code>é€‰é¡¹ä»…å¯¹ç›®å½•ç¦ç”¨äº†æ–‡ä»¶è®¿é—®æ—¶é—´ã€‚<code>relatime</code>æ˜¯æ¯”è¾ƒå¥½çš„æŠ˜è¡·ï¼Œ<code>Mutt</code>ç­‰ç¨‹åºè¿˜èƒ½å·¥ä½œï¼Œä½†æ˜¯ä»ç„¶èƒ½å¤Ÿé€šè¿‡å‡å°‘è®¿é—®æ—¶é—´æ›´æ–°æå‡ç³»ç»Ÿæ€§èƒ½ã€‚<br>æ³¨æ„:<code>noatime</code>å·²ç»åŒ…å«äº†<code>nodiratime</code>ã€‚ä¸éœ€è¦åŒæ—¶æŒ‡å®šã€‚  </p><p><code>tmpfs</code><br><code>tmpfs</code>æ˜¯ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿï¼Œé©»ç•™äºä½ çš„äº¤æ¢åˆ†åŒºæˆ–æ˜¯å†…å­˜ä¸­ï¼ˆå–å†³äºä½ çš„ä½¿ç”¨æƒ…å†µï¼‰ã€‚ä½¿ç”¨å®ƒå¯ä»¥æé«˜æ–‡ä»¶è®¿é—®é€Ÿåº¦ï¼Œå¹¶èƒ½ä¿è¯é‡å¯æ—¶ä¼šè‡ªåŠ¨æ¸…é™¤è¿™äº›æ–‡ä»¶ã€‚<br>ç»å¸¸ä½¿ç”¨<code>tmpfs</code>çš„ç›®å½•æœ‰<code>/tmp</code>,<code>/var/lock</code>and<code>/var/run</code>. ä¸è¦å°†ä¹‹ä½¿ç”¨äº<code>/var/tmp</code>, å› ä¸ºè¿™ä¸€ç›®å½•ä¸­çš„ä¸´æ—¶æ–‡ä»¶åœ¨é‡å¯è¿‡ç¨‹ä¸­éœ€è¦è¢«ä¿ç•™ã€‚ä½¿ç”¨<code>tmpfs</code> <code>/run</code>ç›®å½•ï¼Œ<code>/var/run</code>å’Œ<code>/var/lock</code>æ˜¯ä¸ºäº†å…¼å®¹è€ç‰ˆæœ¬å»ºç«‹çš„é“¾æ¥ã€‚é»˜è®¤<code>/etc/fstab</code>ä¸­çš„çš„<code>/tmp</code>ä¹Ÿæ˜¯<code>tmpfs</code>.<br>é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code>tmpfs</code>åˆ†åŒºè¢«è®¾ç½®ä¸ºä½ æ€»çš„å†…å­˜çš„ä¸€åŠï¼Œå½“ç„¶ä½ å¯ä»¥è‡ªç”±è®¾å®šè¿™ä¸€å€¼ã€‚æ³¨æ„å®é™…ä¸­å†…å­˜å’Œäº¤æ¢åˆ†åŒºçš„ä½¿ç”¨æƒ…å†µå–å†³äºä½ çš„ä½¿ç”¨æƒ…å†µï¼Œè€Œ<code>tmpfs</code>åˆ†åŒºåœ¨å…¶çœŸæ­£ä½¿ç”¨å‰æ˜¯ä¸ä¼šå ç”¨å­˜å‚¨ç©ºé—´çš„ã€‚<br>è¦å°†<code>/tmp</code>æ”¾åˆ°<code>tmpfs</code>ï¼Œå°†ä¸‹è¡ŒåŠ å…¥<code>/etc/fstab</code>ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/etc/fstab<span class="token punctuation">..</span><span class="token punctuation">..</span>.tmpfs /tmp      tmpfs nodev,nosuid                 <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥æŒ‡å®šå¤§å°ï¼Œä½†ä¸è¦ä¿®æ”¹<code>mode</code>é€‰é¡¹ï¼Œä»¥ä¿è¯æ–‡ä»¶å…·æœ‰æ­£ç¡®çš„è®¿é—®æƒé™<code>1777</code>ã€‚åœ¨ä¸Šä¾‹ä¸­<code>/tmp</code>å°†æœ€å¤šä½¿ç”¨ä¸€åŠå†…å­˜ï¼Œè¦æŒ‡å®šæœ€å¤§ç©ºé—´ï¼Œä½¿ç”¨<code>size</code>æŒ‚è½½é€‰é¡¹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/etc/fstab<span class="token punctuation">..</span><span class="token punctuation">..</span>.tmpfs /tmp      tmpfs nodev,nosuid,size<span class="token operator">=</span>2G          <span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œæœ‰ä¸€ä¸ªæ›´é«˜çº§çš„ä¾‹å­ï¼Œå±•ç¤ºå¦‚ä½•ä¸ºç”¨æˆ·æ·»åŠ <code>tmpfs</code>æŒ‚è½½ã€‚è¿™å¯¹äºç½‘ç«™ã€<code>mysql</code>ä¸´æ—¶æ–‡ä»¶,<code>~/.vim/</code>, å’Œå…¶ä»–æƒ…å†µå¾ˆæœ‰ç”¨ã€‚å°è¯•å¹¶è·å¾—ç†æƒ³çš„æŒ‚è½½é€‰é¡¹æ¥å®Œæˆç›®æ ‡æ˜¯å¾ˆé‡è¦çš„ã€‚ç›®æ ‡æ˜¯å°½é‡é‡‡ç”¨å®‰å…¨çš„ç­–ç•¥æ¥é˜²æ­¢æ»¥ç”¨ã€‚é™åˆ¶å¤§å°ï¼ŒåŒæ—¶æŒ‡å®š<code>uid</code>å’Œ<code>gid</code>åŠ ä¸Š<code>mode</code>æ˜¯éå¸¸å®‰å…¨çš„ã€‚æ›´å¤šä¿¡æ¯.  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># /etc/fstab</span>tmpfs /www/cache tmpfs rw,size<span class="token operator">=</span>1G,nr_inodes<span class="token operator">=</span>5k,noexec,nodev,nosuid,uid<span class="token operator">=</span><span class="token number">648</span>,gid<span class="token operator">=</span><span class="token number">648</span>,mode<span class="token operator">=</span><span class="token number">1700</span> <span class="token number">0</span> <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>é‡å¯åæ–¹èƒ½ç”Ÿæ•ˆã€‚æ³¨æ„ä¸è¦ç›´æ¥æ‰§è¡Œ<code>mount -a</code>å‘½ä»¤ï¼Œå› ä¸ºå¯èƒ½é€ æˆæ— æ³•è®¿é—®å½“å‰ç›®å½•ä¸­çš„æ–‡ä»¶ï¼ˆæ¯”å¦‚ä½ åº”è¯¥ä¿è¯<code>lockfiles</code>çš„æ­£å¸¸å­˜åœ¨ï¼‰ã€‚ç„¶è€Œï¼Œå¦‚æœå®ƒä»¬éƒ½æ˜¯ç©ºçš„ï¼Œé‚£ä¹ˆå°±å¯ä»¥ç›´æ¥æ‰§è¡Œ<code>mount -a</code>è€Œä¸å¿…é‡å¯ç”µè„‘ã€‚  </p><p>åº”ç”¨æ›´æ”¹åï¼Œå¯ä»¥é€šè¿‡<code>findmnt</code>æ£€æŸ¥æ˜¯å¦ç”Ÿæ•ˆï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ findmnt --target /tmpTARGET SOURCE FSTYPE OPTIONS/tmp   tmpfs  tmpfs  rw,nosuid,nodev,relatime<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨<br>ä¸€èˆ¬éœ€è¦å¤§é‡è¯»å†™æ“ä½œçš„ç¨‹åºåœ¨ä½¿ç”¨<code>tmpfs</code>æ—¶éƒ½ä¼šæå‡æ€§èƒ½ã€‚æœ‰äº›ç¨‹åºæŠŠå…±äº«å†…å­˜æ”¾åˆ°<code>tmpfs</code>ä¸Šæ—¶æ€§èƒ½ä¼šå¤§å¹…æå‡ï¼Œä¾‹å¦‚å°† Firefox Profile æ–‡ä»¶å¤¹æ”¾åˆ°å†…å­˜åï¼ŒFirefox æ€§èƒ½å¤§å¹…æå‡ã€‚  </p><p><code>Note</code>:<code>tmpfs</code>ç›®å½•<code>/tmp</code>æŒ‚è½½æ—¶éœ€è¦å»æ‰<code>noexec</code>å‚æ•°ï¼Œå¦åˆ™æœ‰äº›ç¼–è¯‘ç¨‹åºæ— æ³•æ‰§è¡Œï¼Œæ­¤å¤–ï¼Œ<code>tmpfs</code>çš„é»˜è®¤å¤§å°æ˜¯å†…å­˜çš„ä¸€èˆ¬ï¼Œå¯èƒ½ä¼šäº§ç”Ÿç©ºé—´ä¸å¤Ÿçš„é—®é¢˜ã€‚  </p><p>ä¸‹é¢å‘½ä»¤å¯ä»¥è®©<code>makepkg</code>åœ¨<code>tmpfs</code>ç›®å½•è¿›è¡Œç¼–è¾‘ï¼Œä¹Ÿå¯ä»¥åœ¨åœ¨<code>/etc/makepkg.conf</code>ä¸­è¿›è¡Œè®¾ç½®:<code>BUILDDIR=/tmp/makepkg makepkg</code> </p><p>æ™®é€šç”¨æˆ·è¯»å†™<code>FAT32</code><br>ä¸ºäº†å–å¾—å¯¹<code>FAT32</code>åˆ†åŒºçš„å†™æƒé™ï¼Œä½ å¿…é¡»ä¿®æ”¹<code>/etc/fstab</code>æ–‡ä»¶ã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/etc/fstab/dev/sdxY    /mnt/some_folder  vfat   user,rw,umask<span class="token operator">=</span>000              <span class="token number">0</span>  <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>users</code>æ ‡ç­¾çš„æ„æ€æ˜¯ä»»ä½•ç”¨æˆ·ï¼ˆç”šè‡³é root ç”¨æˆ·ï¼‰éƒ½å¯ä»¥æŒ‚è½½æˆ–å¸è½½åˆ†åŒº<code>/dev/sdX</code>ã€‚â€rwâ€æ ‡ç­¾åˆ™åˆ†é…è¯»å†™çš„ä½¿ç”¨æƒã€‚<code>umask</code>æ˜¯æƒé™æ©ç å‘½ä»¤<code>umask=000</code>æŒ‡ä»»ä½•äººæ²¡æœ‰ç‰¹æƒï¼Œä¸”æƒé™ä¸º<code>777</code>ï¼Œå³æ‰€æœ‰äººéƒ½å¯ä»¥è¯»ã€å†™ã€æ‰§è¡Œã€‚  </p><p>æ¯”å¦‚ä½ çš„<code>FAT32</code>åˆ†åŒºåœ¨<code>/dev/sda9</code>ï¼Œä½ æƒ³å°†å…¶æŒ‚è½½åˆ°<code>/mnt/fat32</code>ï¼Œé‚£ä¹ˆä½ éœ€è¦è¾“å…¥å¹¶è¿è¡Œ  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/etc/fstab/dev/sda9    /mnt/fat32        vfat   user,rw,umask<span class="token operator">=</span><span class="token number">111</span>,dmask<span class="token operator">=</span>000    <span class="token number">0</span>  <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> nfs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>elk</title>
      <link href="/posts/f07c.html"/>
      <url>/posts/f07c.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>è¿™æ˜¯ä¸€ç¯‡ç†æƒ³æ–‡æ¡£ï¼ŒåŒ…å«äº†ä½œè€…æ‰€æœ‰å¿ƒæ€<br>å‡ ä¹æ˜¯å®Œç¾çš„ï¼Œä½†æ˜¯æ­¤é£æ ¼ç±»å‹çš„æ–‡æ¡£å¹¶ä¸é€‚ç”¨äºæ‹¿æ¥ä¸»ä¹‰è€…<br>ä½ å¯ä»¥é€šè¿‡æ–‡æ¡£æ¥å­¦ä¹ elkï¼Œä»åˆå­¦ä¹ç»ƒåˆ°æ¸å…¥ä½³å¢ƒ<br>ä½ ä¹Ÿæƒ³ä¸åˆ°ï¼Œæ­¤ç¯‡æœªç»è¿‡å®è·µæ£€éªŒï¼Œå¤„äºç†è®ºå’Œæµ‹è¯•ç¯å¢ƒ  </p><h1 id="è¿˜æ˜¯ç®€ä»‹"><a href="#è¿˜æ˜¯ç®€ä»‹" class="headerlink" title="è¿˜æ˜¯ç®€ä»‹"></a>è¿˜æ˜¯ç®€ä»‹</h1><p>è¿™é‡Œæ¯”è¾ƒå‡ ä¸ªä¸œè¥¿ï¼š</p><ol><li><code>kafka</code>ï¼Œåº”ç”¨åœ¨æ¶ˆæ¯ã€è¡Œä¸ºè·Ÿè¸ªã€æ—¥å¿—æ”¶é›†æ–¹é¢ï¼ˆååé‡å·¨å¤§ï¼Œå†…ç½®åˆ†åŒºï¼Œå†—ä½™å’Œå®¹é”™æ€§ï¼‰  </li><li><code>mqtt</code>ï¼Œåœ¨ç‰©è”ç½‘ç³»ç»Ÿåº”ç”¨å¹¿æ³›ï¼ˆå·¥ä½œåœ¨ä½å®½å¸¦ï¼Œä¸å¯é çš„ç½‘ç»œè¿œç¨‹é€šè®¯ç³»ç»Ÿä¸­ï¼‰  </li><li><code>redis</code>ï¼Œkey-valueçš„nosqlæ•°æ®åº“ï¼Œå¯ä½œä¸ºé˜Ÿåˆ—ä½¿ç”¨ï¼ˆå°æ•°æ®å…¥é˜Ÿæ€§èƒ½è¦ä¼˜äºrabbitmqï¼Œrabbitmqçš„å‡ºé˜Ÿæ€§èƒ½åˆ™è¿œä½äºredisï¼‰  </li><li><code>rabbitmq</code>ï¼Œååé‡ä¸å¦‚kafkaï¼Œå¯ç”¨æ€§ä¼˜äºkafkaï¼ˆrabbitmqæ”¯æŒmirorçš„queueï¼Œä¸»queueå¤±æ•ˆï¼Œmiror queueæ¥ç®¡ï¼‰</li></ol><p>è¿™é‡Œæ€»ç»“ä¸€ä¸‹ï¼š<br><code>kafka</code>ï¼šå¯ç”¨äºå³°å€¼æ•°äº¿çº§çš„æ—¥å¿—æ”¶é›†ï¼Œå¸¸ç”¨äºåˆ†å¸ƒå¼æ¶æ„ï¼Œå¯¹æ€§èƒ½è¦æ±‚é«˜çš„å¯ä»¥è€ƒè™‘kafka<br><code>RocketMQ</code>ï¼šæ€è·¯æ¥æºäºKAFKAï¼Œæ”¹æˆäº†ä¸»ä»ç»“æ„ï¼Œåœ¨äº‹åŠ¡æ€§å¯é æ€§æ–¹é¢åšäº†ä¼˜åŒ–ï¼Œå¹¿æ³›æ¥è¯´ï¼Œç”µå•†ã€é‡‘èç­‰å¯¹äº‹åŠ¡æ€§è¦æ±‚å¾ˆé«˜ï¼Œå¯ä»¥è€ƒè™‘RabbitMQå’ŒRocketMQï¼›<br><code>mqtt</code>ï¼šåœ¨ç‰©è”ç½‘ä¸­ä»»ç„¶æ˜¯ä¸å¯å–ä»£çš„å­˜åœ¨ã€‚é¥æ„Ÿæ•°æ®ï¼Œæ±½è½¦ï¼Œæ™ºèƒ½å®¶å±…ï¼Œæ™ºæ…§åŸå¸‚ï¼ŒåŒ»ç–—åŒ»æŠ¤ç­‰ï¼›<br><code>redis</code>ï¼škey-valueçš„nosqlæ•°æ®åº“ï¼Œè¿˜æ˜¯åšæ•°æ®åº“ã€ç¼“å­˜ä½¿ç”¨å§ï¼›<br><code>rabbitmq</code>ï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œåœ¨å¯¹æ•°æ®å®Œæ•´æ€§è¦æ±‚é«˜çš„åœºæ™¯ä½¿ç”¨å§ï¼Œå¢åŠ é›†ç¾¤è£…æœºé‡æ¥å¼¥è¡¥ååé‡çš„ä¸è¶³ã€‚  </p><h1 id="ä¸€äº›ELKçš„æ¶æ„å›¾"><a href="#ä¸€äº›ELKçš„æ¶æ„å›¾" class="headerlink" title="ä¸€äº›ELKçš„æ¶æ„å›¾"></a>ä¸€äº›ELKçš„æ¶æ„å›¾</h1><p><img src="/medias/drawing-bed/elk/0.jpg"><br><img src="/medias/drawing-bed/elk/0.png"><br><img src="/medias/drawing-bed/elk/1.jpg"><br><img src="/medias/drawing-bed/elk/1.png"></p><p>è¿™é‡Œå±•ç¤ºäº†4å¼ åŒ…å«kafkaæ—¥å¿—æ”¶é›†çš„ELKæ¶æ„ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼š<br><code>filebeat(web logs)</code> â€“&gt; <code>[+logstash]kafka</code> â€“&gt; <code>logstash</code> â€“&gt; <code>elasticsearch</code> â€“&gt; <code>kibana</code> â€“&gt; <code>nginx</code><br>è§£é‡Šï¼š<br>Q1ï¼šfilebeatå’Œlogstashä¸ºä»€ä¹ˆåˆ†ç¦»ï¼Ÿ<br>Q2ï¼šä¸ºä»€ä¹ˆä¸¤å±‚logstashï¼Ÿ<br>Q3ï¼škafkaæœ‰ä»€ä¹ˆç”¨ï¼Ÿwhy kafkaï¼Ÿ  </p><p>A1ï¼šåŸå› å¾ˆç®€å•ï¼Œèµ„æºæ¶ˆè€—æ¯”è¾ƒå¤§ã€‚<br>ç”±äº Logstash æ˜¯è·‘åœ¨ JVM ä¸Šé¢ï¼Œèµ„æºæ¶ˆè€—æ¯”è¾ƒå¤§ï¼Œåæ¥ä½œè€…ç”¨ GO å†™äº†ä¸€ä¸ªåŠŸèƒ½è¾ƒå°‘ä½†æ˜¯èµ„æºæ¶ˆè€—ä¹Ÿå°çš„è½»é‡çº§çš„ Agent å« Logstash-forwarderã€‚<br>åæ¥ä½œè€…åŠ å…¥ elastic.co å…¬å¸ï¼Œ Logstash-forwarder çš„å¼€å‘å·¥ä½œç»™å…¬å¸å†…éƒ¨ GO å›¢é˜Ÿæ¥æï¼Œæœ€åå‘½åä¸º Filebeatã€‚<br>Filebeat éœ€è¦éƒ¨ç½²åœ¨æ¯å°åº”ç”¨æœåŠ¡å™¨ä¸Šï¼Œå¯ä»¥é€šè¿‡ Salt æ¥æ¨é€å¹¶å®‰è£…é…ç½®ã€‚  </p><p>A2ï¼šä½ å¯ä»¥åœ¨kafkaå‰é¢å¢åŠ 0-å¤šå°logstashï¼Œå› ä¸ºåœ¨å¤§é‡çš„æ—¥å¿—æ•°æ®å†™å…¥æ—¶ï¼Œå®¹æ˜“å¯¼è‡´æ•°æ®çš„ä¸¢å¤±å’Œæ··ä¹±ï¼Œä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œå¢åŠ logstashé€šè¿‡ç±»å‹è¿›è¡Œæ±‡æ€»åˆ†ç±»ï¼Œé™ä½æ•°æ®ä¼ è¾“çš„è‡ƒè‚¿ã€‚åœ¨elasticsearchå‰å¢åŠ ä¸€å±‚logstashä»…ä½œè½¬å‘å¤„ç†ï¼Œæ—¢å¯ä»¥é€šè¿‡kibanaç›‘æ§å®æ—¶æ•°æ®æµï¼Œåˆèƒ½å°†kafkaæ•°æ®æºæºä¸æ–­çš„å­˜å‚¨åˆ°elasticsearchç£ç›˜ä¸­ã€‚<br>å½“ç„¶ä½ å¯ä»¥é…ç½®å°†filebeatæ”¶é›†åˆ°çš„æ—¥å¿—ç›´æ¥å¯¼å…¥åˆ°kafkaé›†ç¾¤ä¸­ã€‚  </p><p>A3ï¼šKafkaä¸»è¦ç‰¹ç‚¹æ˜¯åŸºäºPullçš„æ¨¡å¼æ¥å¤„ç†æ¶ˆæ¯æ¶ˆè´¹ï¼Œè¿½æ±‚é«˜ååé‡ï¼Œä¸€å¼€å§‹çš„ç›®çš„å°±æ˜¯ç”¨äºæ—¥å¿—æ”¶é›†å’Œä¼ è¾“ã€‚0.8ç‰ˆæœ¬å¼€å§‹æ”¯æŒå¤åˆ¶ï¼Œä¸æ”¯æŒäº‹åŠ¡ï¼Œå¯¹æ¶ˆæ¯çš„é‡å¤ã€ä¸¢å¤±ã€é”™è¯¯æ²¡æœ‰ä¸¥æ ¼è¦æ±‚ï¼Œé€‚åˆäº§ç”Ÿå¤§é‡æ•°æ®çš„äº’è”ç½‘æœåŠ¡çš„æ•°æ®æ”¶é›†ä¸šåŠ¡ã€‚<br>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨åˆ«çš„æ—¥å¿—æ”¶é›†å·¥å…·ï¼Œç”šè‡³æ˜¯åªç”¨ELKã€‚<br>ä½ å¿…é¡»è¦çŸ¥é“è¿™æ˜¯æ ¹æ®ä½ çš„ä¸šåŠ¡åœºæ™¯æ¥å†³å®šçš„ï¼Œå¦‚æœä½ åœ¨é‡‘èéƒ¨é—¨ï¼ŒKafkaå¹¶ä¸æ˜¯ä½ çš„ç¬¬ä¸€é€‰æ‹©ã€‚  </p><p>è¡¥å……ï¼š<br>æ•´ä¸ªæ¶æ„åŠ å…¥Kafkaï¼Œæ˜¯ä¸ºäº†è®©æ•´ä¸ªç³»ç»Ÿæ›´å¥½çš„åˆ†å±‚ï¼ŒKafkaä½œä¸ºä¸€ä¸ªæ¶ˆæ¯æµå¤„ç†ä¸æŒä¹…åŒ–å­˜å‚¨è½¯ä»¶ï¼Œèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬åœ¨ä¸»èŠ‚ç‚¹ä¸Šå±è”½æ‰å¤šä¸ªä»èŠ‚ç‚¹ä¹‹é—´ä¸åŒæ—¥å¿—æ–‡ä»¶çš„å·®å¼‚ï¼Œè´Ÿè´£ç®¡ç†æ—¥å¿—ç«¯ï¼ˆä»èŠ‚ç‚¹ï¼‰çš„äººå¯ä»¥ä¸“æ³¨äºå‘ Kafkaé‡Œç”Ÿäº§æ•°æ®ï¼Œè€Œè´Ÿè´£æ•°æ®åˆ†æèšåˆç«¯çš„äººåˆ™å¯ä»¥ä¸“æ³¨äºä» Kafkaå†…æ¶ˆè´¹æ•°æ®ã€‚æ‰€ä»¥éƒ¨ç½²æ—¶è¦æŠŠKafkaåŠ è¿›å»ã€‚<br>è€Œä¸”ä½¿ç”¨Kafkaè¿›è¡Œæ—¥å¿—ä¼ è¾“çš„åŸå› è¿˜åœ¨äºå…¶æœ‰æ•°æ®ç¼“å­˜çš„èƒ½åŠ›ï¼Œå¹¶ä¸”å®ƒçš„æ•°æ®å¯é‡å¤æ¶ˆè´¹ï¼ŒKafkaæœ¬èº«å…·æœ‰é«˜å¯ç”¨æ€§ï¼Œèƒ½å¤Ÿå¾ˆå¥½çš„é˜²æ­¢æ•°æ®ä¸¢å¤±ï¼Œå®ƒçš„ååé‡ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¥½å¹¶ä¸”ä½¿ç”¨å¹¿æ³›ã€‚å¯ä»¥æœ‰æ•ˆé˜²æ­¢æ—¥å¿—ä¸¢å¤±å’Œé˜²æ­¢logsthashæŒ‚æ‰ã€‚ç»¼åˆæ¥è¯´ï¼šå®ƒå‡è¡¡äº†ç½‘ç»œä¼ è¾“ï¼Œä»è€Œé™ä½äº†ç½‘ç»œé—­å¡ï¼Œå°¤å…¶æ˜¯ä¸¢å¤±æ•°æ®çš„å¯èƒ½æ€§ã€‚  </p><p>è¿™é‡Œä¸ºä»€ä¹ˆè¦åœ¨Kafkaå‰é¢å¢åŠ äºŒå°logstashå‘¢ï¼Ÿ<br>å¦‚æœåªæœ‰ä¸€å±‚çš„Logstashï¼Œå®ƒå°†å¤„ç†æ¥è‡ªä¸åŒå®¢æˆ·ç«¯Filebeatæ”¶é›†çš„æ—¥å¿—ä¿¡æ¯æ±‡æ€»ï¼Œå¹¶ä¸”è¿›è¡Œå¤„ç†åˆ†æï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šä¼šé€ æˆåœ¨å¤§è§„æ¨¡æ—¥å¿—æ•°æ®ä¸‹ä¿¡æ¯çš„å¤„ç†æ··ä¹±ï¼Œå¹¶ä¸¥é‡åŠ æ·±è´Ÿè½½ï¼Œæ‰€ä»¥æœ‰äºŒå±‚çš„ç»“æ„è¿›è¡Œè´Ÿè½½å‡è¡¡å¤„ç†ï¼Œå¹¶ä¸”èŒè´£åˆ†å·¥ï¼Œä¸€å±‚æ±‡èšç®€å•åˆ†æµï¼Œä¸€å±‚åˆ†æè¿‡æ»¤å¤„ç†ä¿¡æ¯ï¼Œå¹¶ä¸”å†…å±‚éƒ½æœ‰äºŒå°Logstashæ¥ä¿éšœæœåŠ¡çš„é«˜å¯ç”¨æ€§ï¼Œä»¥æ­¤æå‡æ•´ä¸ªæ¶æ„çš„ç¨³å®šæ€§ã€‚  </p><h1 id="å®‰è£…ELK"><a href="#å®‰è£…ELK" class="headerlink" title="å®‰è£…ELK"></a>å®‰è£…ELK</h1><p>é‡‡ç”¨kafka+ELKé‡‡é›†logã€‚</p><h2 id="æœåŠ¡å™¨å’Œè§’è‰²"><a href="#æœåŠ¡å™¨å’Œè§’è‰²" class="headerlink" title="æœåŠ¡å™¨å’Œè§’è‰²"></a>æœåŠ¡å™¨å’Œè§’è‰²</h2><table><thead><tr><th align="left">IP</th><th align="left">ä¸»æœºå</th><th align="left">è§’è‰²</th></tr></thead><tbody><tr><td align="left">192.168.1.90</td><td align="left">node0</td><td align="left">web log+filebeat</td></tr><tr><td align="left">192.168.1.91</td><td align="left">node1</td><td align="left">kafka+zookeeper</td></tr><tr><td align="left">192.168.1.92</td><td align="left">node2</td><td align="left">kafka+zookeeper</td></tr><tr><td align="left">192.168.1.93</td><td align="left">node3</td><td align="left">kafka+zookeeper</td></tr><tr><td align="left">192.168.1.94</td><td align="left">node4</td><td align="left">logstash</td></tr><tr><td align="left">192.168.1.95</td><td align="left">node5</td><td align="left">elasticsearch kibana nginx</td></tr></tbody></table><h2 id="å¯¼å…¥å¯†é’¥"><a href="#å¯¼å…¥å¯†é’¥" class="headerlink" title="å¯¼å…¥å¯†é’¥"></a>å¯¼å…¥å¯†é’¥</h2><p><code>rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch</code></p><h2 id="é…ç½®yumä»“åº“å®‰è£…"><a href="#é…ç½®yumä»“åº“å®‰è£…" class="headerlink" title="é…ç½®yumä»“åº“å®‰è£…"></a>é…ç½®yumä»“åº“å®‰è£…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>elasticsearch<span class="token punctuation">]</span><span class="token assign-left variable">name</span><span class="token operator">=</span>Elasticsearch repository <span class="token keyword">for</span> <span class="token number">7</span>.x packages<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>https://artifacts.elastic.co/packages/7.x/yum<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span><span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://artifacts.elastic.co/GPG-KEY-elasticsearch<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">0</span><span class="token assign-left variable">autorefresh</span><span class="token operator">=</span><span class="token number">1</span><span class="token assign-left variable">type</span><span class="token operator">=</span>rpm-md<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç›´æ¥ä¸‹è½½rpmåŒ…å®‰è£…"><a href="#ç›´æ¥ä¸‹è½½rpmåŒ…å®‰è£…" class="headerlink" title="ç›´æ¥ä¸‹è½½rpmåŒ…å®‰è£…"></a>ç›´æ¥ä¸‹è½½rpmåŒ…å®‰è£…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># https://elasticsearch.cn/download/   # ä¸­æ–‡ç¤¾åŒºä¸‹è½½åœ°å€ï¼Œå»ºè®®ä½¿ç”¨è¿…é›·ç­‰å·¥å…·ä¸‹è½½ã€‚</span><span class="token function">wget</span> https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.8.0-x86_64.rpm<span class="token function">wget</span> https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.8.0-x86_64.rpm.sha512shasum -a <span class="token number">512</span> -c elasticsearch-7.8.0-x86_64.rpm.sha512 <span class="token function">rpm</span> --install elasticsearch-7.8.0-x86_64.rpm<span class="token function">wget</span> https://artifacts.elastic.co/downloads/kibana/kibana-7.8.0-x86_64.rpm<span class="token function">wget</span> https://artifacts.elastic.co/downloads/logstash/logstash-7.8.0.rpm<span class="token function">wget</span> https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-7.8.0-x86_64.rpm<span class="token function">wget</span> https://mirrors.aliyun.com/apache/kafka/2.5.0/kafka_2.13-2.5.0.tgz<span class="token function">wget</span> https://mirrors.aliyun.com/apache/zookeeper/zookeeper-3.6.1/apache-zookeeper-3.6.1-bin.tar.gz<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®‰è£…æ­¥éª¤ç•¥-æƒ³ä¸åˆ°å§ğŸ¥´ğŸ§"><a href="#å®‰è£…æ­¥éª¤ç•¥-æƒ³ä¸åˆ°å§ğŸ¥´ğŸ§" class="headerlink" title="å®‰è£…æ­¥éª¤ç•¥(æƒ³ä¸åˆ°å§ğŸ¥´ğŸ§)"></a>å®‰è£…æ­¥éª¤ç•¥(æƒ³ä¸åˆ°å§ğŸ¥´ğŸ§)</h2><p>ä½ å¯ä»¥å‚è€ƒæœåŠ¡å™¨å’Œè§’è‰²å®‰è£…é…ç½®  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># node0èŠ‚ç‚¹</span>hostnamectl set-hostname node0   <span class="token comment"># è®¾ç½®ä¸»æœºå</span>systemctl stop firewalld   <span class="token comment"># å…³é—­é˜²ç«å¢™</span>setenforce <span class="token number">0</span>   <span class="token comment"># å…³é—­selinux</span><span class="token function">tee</span> <span class="token operator">>></span> /etc/hosts <span class="token operator">&lt;&lt;</span> <span class="token string">EOF192.168.1.90 node0192.168.1.91 node1192.168.1.92 node2192.168.1.93 node3192.168.1.94 node4192.168.1.95 node5EOF</span>   <span class="token comment"># è®¾ç½®ä¸»æœºå</span>yum -y <span class="token function">install</span> nginx filebeat <span class="token comment"># node123å®‰è£…zookeeper+kafka</span><span class="token builtin class-name">cd</span> /home<span class="token function">tar</span> xf apache-zookeeper-3.6.1-bin.tar.gz<span class="token function">mv</span> apache-zookeeper-3.6.1-bin/ zookeeper<span class="token builtin class-name">cd</span> zookeeper/<span class="token function">mkdir</span> -p tmp/zookeeper<span class="token builtin class-name">echo</span> <span class="token string">"1"</span> <span class="token operator">></span> tmp/zookeeper/myid<span class="token comment"># nodeä¸Šå®‰è£…é…ç½®kafka</span><span class="token function">tar</span> xf kafka_2.13-2.5.0.tgz<span class="token function">mv</span> kafka_2.13-2.5.0/ kafka<span class="token function">mkdir</span> -p /tmp/kafka-logs<span class="token comment"># ç”Ÿæˆzookeeperé…ç½®æ–‡ä»¶</span><span class="token builtin class-name">cd</span> conf<span class="token function">cp</span> zoo_sample.cfg zoo.cfg<span class="token comment"># node4</span>yum -y <span class="token function">install</span> java java-devel logstash<span class="token comment"># node5</span>yum -y <span class="token function">install</span> elasticsearch kibana nginx httpd-tools   <span class="token comment"># epel-release</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h3><p><code>/etc/nginx/nginx.conf</code><br>ä¿®æ”¹Nginxé…ç½®æ–‡ä»¶æ·»åŠ ä»¥ä¸‹å†…å®¹  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">log_format json &#39;&#123;&quot;@timestamp&quot;:&quot;$time_iso8601&quot;,&quot;@version&quot;:&quot;1&quot;,&quot;client_ip&quot;:&quot;$remote_addr&quot;,&quot;status&quot;:&quot;$status&quot;,&quot;host&quot;:&quot;$server_addr&quot;,&quot;url&quot;:&quot;$request_uri&quot;,&quot;domain&quot;:&quot;$host&quot;,&quot;size&quot;:&quot;$body_bytes_sent&quot;,&quot;responsetime&quot;:&quot;$request_time&quot;,&quot;referer&quot;:&quot;$scheme:&#x2F;&#x2F;$server_addr$request_uri&quot;,&quot;user_agent&quot;:&quot;$http_user_agent&quot;&#125;&#39;;access_log &#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log json;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="filebeat"><a href="#filebeat" class="headerlink" title="filebeat"></a>filebeat</h3><p><code>/etc/filebeat/filebeat.yml</code>è¯¦ç»†é…ç½®åœ¨è§£é‡Šæœ«<br>filebeatæ”¯æŒå¾ˆå¤šç§è¾“å…¥å’Œè¾“å‡º.å…·ä½“å¯çœ‹input,output.<br>é¡¹ç›®ä¸­ç”¨åˆ°çš„è¾“å…¥æ˜¯log,è¾“å‡ºçš„kafka.åœ¨è¿™åªè®²è¿™ä¸¤ç§é…ç½®.<br>è¾“å…¥é…ç½®log<br>logè¾“å…¥æ˜¯ä»æ–‡ä»¶ä¸­æŒ‰è¡Œè¯»å–.åœ¨pathsæŒ‡å®šéœ€è¦ç›‘è§†çš„æ–‡ä»¶.<br>ä¾‹å­:  </p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">filebeat.inputs</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log  <span class="token key atrule">paths</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> /var/log/nginx    <span class="token punctuation">-</span> /var/log/<span class="token important">*.log</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªé…ç½®é¡¹.<br><code>paths</code>ï¼šéœ€è¦ç›‘è§†çš„æ–‡ä»¶è·¯å¾„.æ”¯æŒGo Glabçš„æ‰€æœ‰æ¨¡å¼.ä¾‹å¦‚: /var/log/<em>.log.è¿™ä¸ªé…ç½®å°†ç›‘è§†/var/logæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰ä»¥.logç»“å°¾çš„æ–‡ä»¶.å¯ä»¥ç”¨recursive_globæ¥é€’å½’å­æ–‡ä»¶å¤¹.<br><code>recursive_glob.enabled</code>ï¼šå…è®¸æ‰©å±• * * ä¸ºé€’å½’çš„globæ¨¡å¼.å¯ç”¨æ­¤åŠŸèƒ½å. /foo/</em> * æ‰©å±•åˆ°/foo, /foo/* ,/foo/* /* ,ç­‰ç­‰,å®ƒä¼šå°†å•ä¸ªæ‰©å±• * * ä¸º8çº§æ·±åº¦*æ¨¡å¼.<br>é»˜è®¤æƒ…å†µä¸‹å¯ç”¨æ­¤åŠŸèƒ½.è®¾ç½®falseç¦ç”¨.<br><code>exclude_lines</code>ï¼šæ­£åˆ™è¡¨è¾¾å¼åˆ—è¡¨,ç”¨äºåŒ¹é…æ‚¨å¸Œæœ›Filebeatæ’é™¤çš„è¡Œ.Filebeatä¼šåˆ é™¤ä¸åˆ—è¡¨ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„æ‰€æœ‰è¡Œ.é»˜è®¤æƒ…å†µä¸‹,ä¸ä¼šåˆ é™¤ä»»ä½•è¡Œ.ç©ºè¡Œè¢«å¿½ç•¥.<br>ä»¥ä¸‹ç¤ºä¾‹å°†Filebeaté…ç½®ä¸ºåˆ é™¤ä»»ä½•ä»¥DBGå¼€å¤´çš„è¡Œ:  </p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">filebeat.inputs</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log  <span class="token punctuation">...</span>  <span class="token key atrule">exclude_lines</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'^DBG'</span><span class="token punctuation">]</span>include_lines<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­£åˆ™è¡¨è¾¾å¼åˆ—è¡¨,ç”¨äºåŒ¹é…æ‚¨å¸Œæœ›FilebeatåŒ…å«çš„è¡Œ.Filebeatä»…å¯¼å‡ºä¸åˆ—è¡¨ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„è¡Œ.é»˜è®¤æƒ…å†µä¸‹,å°†å¯¼å‡ºæ‰€æœ‰è¡Œ.ç©ºè¡Œè¢«å¿½ç•¥.<br>ä»¥ä¸‹ç¤ºä¾‹å°†Filebeaté…ç½®ä¸ºå¯¼å‡ºä»¥ERRæˆ–WARNå¼€å¤´çš„æ‰€æœ‰è¡Œ:  </p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">filebeat.inputs</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log  <span class="token punctuation">...</span>  <span class="token key atrule">include_lines</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'^ERR'</span><span class="token punctuation">,</span> <span class="token string">'^WARN'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>PS: å¦‚æœinclude_lineså’Œexclude_linesä¸¤ä¸ªé…ç½®åŒæ—¶å‡ºç°,ä¼˜å…ˆæ‰§è¡Œinlcude_lineså†æ‰§è¡Œexclude_lines.å’Œé…ç½®é¡¹æ”¾çš„ä½ç½®æ²¡æœ‰å…³ç³».<br><code>json</code>ï¼šfilebeatæ”¯æŒjsonæ ¼å¼çš„æ¶ˆæ¯æ—¥å¿—.å®ƒå°†é€è¡Œå¤„ç†æ—¥å¿—,å› æ­¤åªæœ‰æ¯è¡Œæœ‰ä¸€ä¸ªjsonå¯¹è±¡æ—¶,jsonè§£ç æ‰æœ‰æ•ˆ.<br>é…ç½®ç¤ºä¾‹:  </p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">json.keys_under_root</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">json.add_error_key</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">json.message_key</span><span class="token punctuation">:</span> logenabled<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>è¾“å…¥å¼€å…³.é»˜è®¤trueæ‰“å¼€.<br>è¾“å‡ºé…ç½®kafka<br>kafkaå°†è¾“å‡ºæµå‘é€åˆ°Apache Kafka.<br>é…ç½®ç¤ºä¾‹:  </p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">output.kafka</span><span class="token punctuation">:</span>  <span class="token comment"># initial brokers for reading cluster metadata</span>  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"kafka1:9092"</span><span class="token punctuation">,</span> <span class="token string">"kafka2:9092"</span><span class="token punctuation">,</span> <span class="token string">"kafka3:9092"</span><span class="token punctuation">]</span>  <span class="token comment"># message topic selection + partitioning</span>  <span class="token key atrule">topic</span><span class="token punctuation">:</span> <span class="token string">'%&#123;[fields.log_topic]&#125;'</span>  <span class="token key atrule">partition.round_robin</span><span class="token punctuation">:</span>    <span class="token key atrule">reachable_only</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">required_acks</span><span class="token punctuation">:</span> <span class="token number">1</span>  <span class="token key atrule">compression</span><span class="token punctuation">:</span> gzip  <span class="token key atrule">max_message_bytes</span><span class="token punctuation">:</span> <span class="token number">1000000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸»è¦ä»¥ä¸‹å‡ ä¸ªé…ç½®é¡¹<br><code>enabled</code>ï¼šæ˜¯å¦æ‰“å¼€è¾“å‡ºé…ç½®é¡¹.trueæ‰“å¼€,falseå…³é—­.é»˜è®¤æ˜¯true.<br><code>hosts</code>ï¼škafkaçš„brokeråœ°å€.<br><code>topic</code>ï¼škafkaçš„topic.<br><code>worker</code>ï¼šå¹¶å‘è´Ÿè½½å‡è¡¡Kafkaè¾“å‡ºå·¥ä½œçº¿ç¨‹çš„æ•°é‡.<br><code>timeout</code>ï¼škafkaè¿”å›åº”ç­”çš„ç­‰å¾…æ—¶é—´.é»˜è®¤30(ç§’).<br><code>keep_alive</code>ï¼šè¿æ¥çš„å­˜æ´»æ—¶é—´.å¦‚æœä¸º0,è¡¨ç¤ºçŸ­è¿,å‘é€å®Œå°±å…³é—­.é»˜è®¤ä¸º0ç§’.<br><code>required_acks</code>ï¼šACKçš„å¯é ç­‰çº§.0=æ— å“åº”,1=ç­‰å¾…æœ¬åœ°æ¶ˆæ¯,-1=ç­‰å¾…æ‰€æœ‰å‰¯æœ¬æäº¤.é»˜è®¤1.<br>PSï¼šå¦‚æœè®¾ä¸º0,kafkaæ— åº”ç­”è¿”å›æ—¶,æ¶ˆæ¯å°†ä¸¢å¤±.<br>é…ç½®ä¾‹å­  </p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">filebeat.inputs</span><span class="token punctuation">:</span><span class="token punctuation">-</span> <span class="token key atrule">type</span><span class="token punctuation">:</span> log   <span class="token comment"># æ—¥å¿—ç±»å‹</span>  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token key atrule">json.keys_under_root</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token comment"># å¯ä»¥è®©å­—æ®µä½äºæ ¹èŠ‚ç‚¹</span>  <span class="token key atrule">json.overwrite_keys</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token comment"># å¯¹äºåŒåçš„keyï¼Œè¦†ç›–åŸæœ‰keyå€¼</span>  <span class="token key atrule">fields_under_root</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token comment"># å¯ä»¥è®©å­—æ®µä½äºæ ¹èŠ‚ç‚¹</span>  <span class="token key atrule">paths</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> /var/log/nginx/access.log   <span class="token comment"># æ—¥å¿—æ–‡ä»¶è·¯å¾„</span>  <span class="token key atrule">fields</span><span class="token punctuation">:</span>      <span class="token key atrule">type</span><span class="token punctuation">:</span> log    <span class="token key atrule">log_topic</span><span class="token punctuation">:</span> dev<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>access   <span class="token comment"># æŒ‡å®šæ—¥å¿—topicåç§°</span><span class="token key atrule">name</span><span class="token punctuation">:</span> dev<span class="token punctuation">-</span>nginx<span class="token key atrule">output.kafka</span><span class="token punctuation">:</span>  <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"192.168.1.91:9092"</span><span class="token punctuation">,</span><span class="token string">"192.168.1.92:9092"</span><span class="token punctuation">,</span><span class="token string">"192.168.1.93:9092"</span><span class="token punctuation">]</span>   <span class="token comment"># kafkaé›†ç¾¤åœ°å€</span>  <span class="token key atrule">topic</span><span class="token punctuation">:</span> <span class="token string">'%&#123;[log_topic]&#125;'</span>   <span class="token comment"># fileds.log_topic å®šä¹‰çš„å€¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="zookeeper-kafka"><a href="#zookeeper-kafka" class="headerlink" title="zookeeper+kafka"></a>zookeeper+kafka</h3><p>node1ç¼–è¾‘zookeeperé…ç½®æ–‡ä»¶zoo.cfg  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">dataDir&#x3D;&#x2F;home&#x2F;zookeeper&#x2F;tmp&#x2F;zookeeperserver.1&#x3D;192.168.1.91:2888:3888server.2&#x3D;192.168.1.92:2888:3888server.3&#x3D;192.168.1.93:2888:3888<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®node2å’Œnode3çš„zookeeper<br>ä¾ç…§node1çš„é…ç½®é…ç½®node2å’Œnode3ï¼Œæ³¨æ„ä¸‹é¢çš„å‚æ•°ä¸‰ä¸ªèŠ‚ç‚¹å„æœ‰å·®å¼‚<br>Node2ï¼š<code>echo &quot;2&quot; &gt; tmp/zookeeper/myid</code><br>Node3ï¼š<code>echo &quot;3&quot; &gt; tmp/zookeeper/myid</code><br>ä¾æ¬¡å¯åŠ¨ä¸‰ä¸ªèŠ‚ç‚¹çš„æœåŠ¡<code>./bin/zkServer.sh start conf/zoo.cfg</code>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Using config:/usr/local/zookeeper/bin/<span class="token punctuation">..</span>/conf/zoo.cfg  Starting zookeeper <span class="token punctuation">..</span>. STARTED  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><hr><p>é”™è¯¯: æ‰¾ä¸åˆ°æˆ–æ— æ³•åŠ è½½ä¸»ç±» org.apache.zookeeper.server.quorum.QuorumPeerMain<br>è§£å†³ï¼šä¸‹è½½apache-zookeeper-3.6.1-bin.tar.gzåŒ…è¿è¡Œ</p><p>2020-07-05 19:43:54,474 [myid:] - ERROR [main:QuorumPeerMain@98] - Invalid config, exiting abnormally<br>org.apache.zookeeper.server.quorum.QuorumPeerConfig$ConfigException: Address unresolved: 192.168.1.91:3888<br>è§£å†³ï¼šmyidæ–‡ä»¶çš„è·¯å¾„ä¸å¯¹ï¼Œæˆ‘çš„åé¢æœ‰ä¸¤ä¸ªç©ºæ ¼åˆ æ‰å°±å¥½äº†</p><hr><p>æŸ¥çœ‹ä¸‰ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Node1ï¼š  <span class="token comment"># ./bin/zkServer.sh status  </span><span class="token punctuation">[</span>root@localhost zookeeper<span class="token punctuation">]</span><span class="token comment"># ./bin/zkServer.sh status</span>/usr/bin/javaZooKeeper JMX enabled by defaultUsing config: /home/zookeeper/bin/<span class="token punctuation">..</span>/conf/zoo.cfgClient port found: <span class="token number">2181</span>. Client address: localhost.Mode: follower   Node2ï¼š  <span class="token punctuation">[</span>root@localhost zookeeper<span class="token punctuation">]</span><span class="token comment"># ./bin/zkServer.sh status</span>/usr/bin/javaZooKeeper JMX enabled by defaultUsing config: /home/zookeeper/bin/<span class="token punctuation">..</span>/conf/zoo.cfgClient port found: <span class="token number">2181</span>. Client address: localhost.Mode: leader   Node3ï¼š  <span class="token punctuation">[</span>root@localhost zookeeper<span class="token punctuation">]</span><span class="token comment"># ./bin/zkServer.sh status</span>/usr/bin/javaZooKeeper JMX enabled by defaultUsing config: /home/zookeeper/bin/<span class="token punctuation">..</span>/conf/zoo.cfgClient port found: <span class="token number">2181</span>. Client address: localhost.Mode: follower<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>node1é…ç½®kafka<br>/kafkaconfig/server.properties  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">broker.id<span class="token operator">=</span><span class="token number">0</span><span class="token assign-left variable">port</span><span class="token operator">=</span><span class="token number">9092</span>host.name<span class="token operator">=</span>node1log.dirs<span class="token operator">=</span>/home/kafka/tmp/kafka-logsnum.partitions<span class="token operator">=</span><span class="token number">2</span>zookeeper.connect<span class="token operator">=</span><span class="token number">192.168</span>.1.91:2181,192.168.1.92:2181,192.168.1.93:2181<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®Node2å’Œnode3çš„kafka<br>ä¾ç…§node1çš„é…ç½®é…ç½®node2å’Œnode3ï¼Œæ³¨æ„ä¸‹é¢çš„å‚æ•°ä¸‰ä¸ªèŠ‚ç‚¹å„æœ‰å·®å¼‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Node2ï¼š  broker.id<span class="token operator">=</span><span class="token number">1</span>  host.name<span class="token operator">=</span>node2     node3ï¼š  broker.id<span class="token operator">=</span><span class="token number">2</span>  host.name<span class="token operator">=</span>node3     è¯´æ˜ï¼š  host.nameæ˜¯èŠ‚ç‚¹çš„ä¸»æœºå  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¾æ¬¡å¯åŠ¨ä¸‰ä¸ªèŠ‚ç‚¹çš„kafka<code>./bin/kafka-server-start.sh config/server.properties</code><br>åˆ›å»ºtopicéªŒè¯é›†ç¾¤æ˜¯å¦æ­£å¸¸  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># Node1ä¸Šåˆ›å»ºtopic</span>./bin/kafka-topics.sh --create --zookeeper <span class="token number">192.168</span>.1.91:2181 --replication-factor <span class="token number">3</span> --partitions <span class="token number">2</span> --topic test1Created topic <span class="token string">"test1"</span><span class="token builtin class-name">.</span><span class="token comment"># Node2ä¸Šå‘é€æ¶ˆæ¯è‡³kafkaï¼ˆ2èŠ‚ç‚¹æ¨¡æ‹Ÿproducerï¼‰</span>./bin/kafka-console-producer.sh --broker-list <span class="token number">192.168</span>.1.91:9092 --topic test1hello world<span class="token comment"># Node3æ˜¾ç¤ºæ¶ˆæ¯çš„æ¶ˆè´¹ï¼ˆ3èŠ‚ç‚¹æ¨¡æ‹Ÿconsumerï¼‰</span>./bin/kafka-console-consumer.sh --zookeeper  <span class="token number">192.168</span>.1.91:2181 --topic test1 --from-beginninghello world<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°åœ¨node2èŠ‚ç‚¹çš„è¾“å…¥çš„ä¿¡æ¯å¯ä»¥åœ¨nide3èŠ‚ç‚¹æ˜¾ç¤ºï¼Œè¯´æ˜é›†ç¾¤æ­£å¸¸ä½¿ç”¨ã€‚  </p><hr><p>./bin/kafka-console-consumer.sh â€“zookeeper  192.168.1.91:2181 â€“topic test1 â€“from-beginning<br>æŠ¥é”™ï¼šzookeeper is not a recognized option<br>è¿™ä¸ªæ˜¯0.9ä¹‹åçš„æ‰“å¼€æ–¹å¼<br>/usr/java/kafka_2.12-2.2.0/bin/kafka-console-consumer.sh â€“bootstrap-server localhost:9092 â€“topic test â€“from-beginning<br>è¿™ä¸ªæ˜¯0.9ä¹‹å‰çš„æ‰“å¼€æ–¹å¼<br>/usr/java/kafka_2.12-2.2.0/bin/kafka-console-consumer.sh â€“zookeeper localhost:2181 â€“topic test â€“from-beginning<br>è§£å†³ï¼š./bin/kafka-console-consumer.sh â€“bootstrap-server 192.168.1.91:9092 â€“topic test1 â€“from-beginning</p><hr><h3 id="logstash"><a href="#logstash" class="headerlink" title="logstash"></a>logstash</h3><p>/etc/logstash/conf.d/kafka.conf</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml">input <span class="token punctuation">&#123;</span>    kafka <span class="token punctuation">&#123;</span>        bootstrap_servers =<span class="token punctuation">></span> "192.168.1.91<span class="token punctuation">:</span><span class="token number">9092</span><span class="token punctuation">,</span>192.168.1.92<span class="token punctuation">:</span><span class="token number">9092</span><span class="token punctuation">,</span>192.168.1.93<span class="token punctuation">:</span>9092"   <span class="token comment"># kafkaé›†ç¾¤åœ°å€</span>        topics =<span class="token punctuation">></span> "dev<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>access"   <span class="token comment"># æ¥å—topicçš„åç§°</span>        codec =<span class="token punctuation">></span> "json"   <span class="token comment"># è§£ææ ¼å¼</span>        consumer_threads =<span class="token punctuation">></span> 5   <span class="token comment"># æœ€å¤§çº¿ç¨‹</span>        decorate_events =<span class="token punctuation">></span> true   <span class="token comment"># å°†å½“å‰topicã€offsetã€groupã€partitionç­‰ä¿¡æ¯ä¹Ÿå¸¦åˆ°messageä¸­</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>output <span class="token punctuation">&#123;</span>    elasticsearch <span class="token punctuation">&#123;</span>        hosts =<span class="token punctuation">></span> <span class="token punctuation">[</span><span class="token string">"192.168.1.95:9200"</span><span class="token punctuation">]</span>   <span class="token comment"># ESé›†ç¾¤ä¿¡æ¯</span>        index =<span class="token punctuation">></span> "dev<span class="token punctuation">-</span>nginx<span class="token punctuation">-</span>access<span class="token punctuation">-</span>%<span class="token punctuation">&#123;</span>+YYYY<span class="token punctuation">-</span>MM<span class="token punctuation">-</span>dd<span class="token punctuation">&#125;</span>"   <span class="token comment"># ç´¢å¼•æ ¼å¼å»ºè®®æŒ‰å¤©åˆ‡å‰²</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>/etc/logstash/logstash.yml</code>  </p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">path.data</span><span class="token punctuation">:</span> /var/lib/logstash<span class="token key atrule">pipeline.ordered</span><span class="token punctuation">:</span> auto<span class="token key atrule">path.config</span><span class="token punctuation">:</span> /etc/logstash/conf.d/<span class="token important">*.conf</span><span class="token key atrule">path.logs</span><span class="token punctuation">:</span> /var/log/logstash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>/usr/share/logstash/bin/logstash -t -f /etc/logstash/conf.d/logstash-nginx.conf</code>æµ‹è¯•æ˜¯å¦OK<br>æç¤ºï¼šConfiguration OK  </p><h3 id="elasticsearch"><a href="#elasticsearch" class="headerlink" title="elasticsearch"></a>elasticsearch</h3><p><code>/etc/elasticsearch/elasticsearch.yml</code></p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token comment"># å…è®¸å•†ä¸šåŠŸèƒ½åˆ›å»ºç´¢å¼•</span><span class="token key atrule">action.auto_create_index</span><span class="token punctuation">:</span> .monitoring*<span class="token punctuation">,</span>.watches<span class="token punctuation">,</span>.triggered_watches<span class="token punctuation">,</span>.watcher<span class="token punctuation">-</span>history*<span class="token punctuation">,</span>.ml*<span class="token comment"># å¦‚æœä¸ç¡®å®šæœ¬åœ°çš„Logstashæˆ–Beatsé…ç½®ï¼Œå¯ä»¥è€ƒè™‘å°†è¯¥å€¼è®¾ç½®ä¸º*ï¼Œå…è®¸è‡ªåŠ¨åˆ›å»ºæ‰€æœ‰ç´¢å¼•</span><span class="token key atrule">action.auto_create_index</span><span class="token punctuation">:</span> *<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>é…ç½®æ ·ä¾‹ï¼š</p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token comment"># æ›´æ”¹æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶çš„è·¯å¾„å®ä¾‹</span><span class="token key atrule">path</span><span class="token punctuation">:</span>    <span class="token key atrule">data</span><span class="token punctuation">:</span> /var/lib/elasticsearch    <span class="token key atrule">logs</span><span class="token punctuation">:</span> /var/log/elasticsearch<span class="token comment"># ä¹Ÿå¯ä»¥è¿™æ ·å¹¶è¡Œå†™</span><span class="token key atrule">path.data</span><span class="token punctuation">:</span> /var/lib/elasticsearch<span class="token key atrule">path.logs</span><span class="token punctuation">:</span> /var/log/elasticsearch<span class="token comment"># ä»¥å˜é‡æ–¹å¼é…ç½®ymlæ–‡ä»¶</span><span class="token key atrule">node.name</span><span class="token punctuation">:</span>    $<span class="token punctuation">&#123;</span>HOSTNAME<span class="token punctuation">&#125;</span><span class="token key atrule">network.host</span><span class="token punctuation">:</span> $<span class="token punctuation">&#123;</span>ES_NETWORK_HOST<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¯å¢ƒå˜é‡çš„å€¼å¿…é¡»æ˜¯ç®€å•çš„å­—ç¬¦ä¸²ã€‚ä½¿ç”¨é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²æä¾›Elasticsearchå°†è§£æä¸ºåˆ—è¡¨çš„å€¼ã€‚ä¾‹å¦‚ï¼ŒElasticsearchå°†ä»¥ä¸‹å­—ç¬¦ä¸²æ‹†åˆ†ä¸º<code>$&#123;HOSTNAME&#125;</code>ç¯å¢ƒå˜é‡çš„å€¼åˆ—è¡¨ï¼š<br><code>export HOSTNAME=&quot;host1,host2&quot;</code><br>ä¸€äº›é…ç½®æ–‡ä»¶<br><code>/etc/elasticsearch</code>  </p><ol><li><code>elasticsearch.yml</code> ç”¨äºé…ç½®Elasticsearch  </li><li><code>jvm.options</code> ç”¨äºé…ç½®Elasticsearch JVMè®¾ç½®  </li><li><code>log4j2.properties</code> ç”¨äºé…ç½®Elasticsearchæ—¥å¿—è®°å½•  </li></ol><h4 id="è¯¦ç»†é¡¹"><a href="#è¯¦ç»†é¡¹" class="headerlink" title="è¯¦ç»†é¡¹"></a>è¯¦ç»†é¡¹</h4><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token comment"># è‡ªå®šä¹‰è·¯å¾„å­˜å‚¨æ•°æ®å’Œæ—¥å¿—ã€‚</span><span class="token key atrule">path</span><span class="token punctuation">:</span>  <span class="token key atrule">logs</span><span class="token punctuation">:</span> /var/log/elasticsearch  <span class="token key atrule">data</span><span class="token punctuation">:</span> /var/data/elasticsearch<span class="token comment"># ç”šè‡³ä½ å¯ä»¥è¿™æ ·ï¼Œå°†æ•°æ®å­˜åˆ°å¤šä¸ªç›®å½•</span><span class="token comment"># path:</span><span class="token comment">#   data:</span><span class="token comment">#     - /mnt/elasticsearch_1</span><span class="token comment">#     - /mnt/elasticsearch_2</span><span class="token comment">#     - /mnt/elasticsearch_3</span><span class="token comment"># è®¾ç½®é›†ç¾¤åï¼ŒnodeåŠ å…¥é›†ç¾¤çš„åï¼Œå¤šä¸ªé›†ç¾¤åå­—è¦è®¾ç½®ä¸åŒçš„ï¼Œå¦åˆ™nodeå¯èƒ½åŠ å…¥é”™è¯¯çš„é›†ç¾¤</span><span class="token key atrule">cluster.name</span><span class="token punctuation">:</span> logging<span class="token punctuation">-</span>prod<span class="token comment"># å½“å‰èŠ‚ç‚¹çš„ä¸»æœºå</span><span class="token key atrule">node.name</span><span class="token punctuation">:</span> prod<span class="token punctuation">-</span>data<span class="token punctuation">-</span><span class="token number">2</span><span class="token comment"># ä¸å…¶å®ƒèŠ‚ç‚¹å½¢æˆé›†ç¾¤ï¼Œé»˜è®¤æ˜¯å›ç¯åœ°å€ï¼Œå•æœº</span><span class="token key atrule">network.host</span><span class="token punctuation">:</span> 192.168.1.95<span class="token comment"># é»˜è®¤ç»‘å®šåˆ°å›ç¯åœ°å€ï¼Œé»˜è®¤ç«¯å£ä¸º9300</span><span class="token key atrule">discovery.seed_hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"192.168.1.95"</span><span class="token punctuation">]</span><span class="token comment"># ä½ ä¹Ÿå¯ä»¥è¿™æ ·ä½¿ç”¨</span><span class="token comment"># discovery.seed_hosts:</span><span class="token comment">#    - 192.168.1.10:9300</span><span class="token comment">#    - 192.168.1.11 </span><span class="token comment">#    - seeds.mydomain.com   # ç»‘å®šDNSè§£æçš„åŸŸå</span><span class="token comment">#    - [0:0:0:0:0:ffff:c0a8:10c]:9301   # IPv6</span><span class="token key atrule">cluster.initial_master_nodes</span><span class="token punctuation">:</span>   <span class="token comment"># æ˜¾å¼åˆ—å‡ºæœ‰masterèµ„æ ¼çš„ä¸»æœºèŠ‚ç‚¹ï¼Œå¹¶åœ¨ç¬¬ä¸€æ¬¡é€‰ä¸¾ä¸­å¯¹å…¶æŠ•ç¥¨è¿›è¡Œè®¡æ•°ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨æ­¤é…ç½®</span>  <span class="token punctuation">-</span> node5<span class="token comment">#    - master-node-b</span><span class="token comment">#    - master-node-c</span><span class="token comment"># æœ€å°‘æœ‰ä¸¤ä¸ªèŠ‚ç‚¹å­˜æ´»æ‰å¯ä»¥é€‰ä¸¾master</span><span class="token comment"># discovery.zen.minimum_master_nodes: 2</span><span class="token comment"># æœ€å°‘ä¸¤ä¸ªèŠ‚ç‚¹å­˜æ´»åœ¨å¼€å§‹æ•°æ®å­˜æ´»</span><span class="token comment"># gateway.recover_after_nodes: 2</span><span class="token comment"># å…¶å®ƒæœ‰masterèµ„æ ¼çš„èŠ‚ç‚¹ï¼Œä¸ä¸Šé¢ä¸åŒçš„é…ç½®ä»…æœ‰ä»¥ä¸‹2é¡¹</span><span class="token comment"># network.host:   # æœ¬æœºIPåœ°å€</span><span class="token comment"># node.name:   # åˆ†é…çš„èŠ‚ç‚¹åç§°</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><table><thead><tr><th align="left">å±æ€§å</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">cluster.name</td><td align="left">é…ç½®elasticsearchçš„é›†ç¾¤åç§°ï¼Œé»˜è®¤æ˜¯elasticsearchã€‚å»ºè®®ä¿®æ”¹æˆä¸€ä¸ªæœ‰æ„ä¹‰çš„åç§°ã€‚</td></tr><tr><td align="left">node.name</td><td align="left">èŠ‚ç‚¹åï¼Œesä¼šé»˜è®¤éšæœºæŒ‡å®šä¸€ä¸ªåå­—ï¼Œå»ºè®®æŒ‡å®šä¸€ä¸ªæœ‰æ„ä¹‰çš„åç§°ï¼Œæ–¹ä¾¿ç®¡ç†</td></tr><tr><td align="left">path.conf</td><td align="left">è®¾ç½®é…ç½®æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ï¼Œtaræˆ–zipåŒ…å®‰è£…é»˜è®¤åœ¨esæ ¹ç›®å½•ä¸‹çš„configæ–‡ä»¶å¤¹ï¼Œrpmå®‰è£…é»˜è®¤åœ¨/etc/ elasticsearch</td></tr><tr><td align="left">path.data</td><td align="left">è®¾ç½®ç´¢å¼•æ•°æ®çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„dataæ–‡ä»¶å¤¹ï¼Œå¯ä»¥è®¾ç½®å¤šä¸ªå­˜å‚¨è·¯å¾„ï¼Œç”¨é€—å·éš”å¼€</td></tr><tr><td align="left">path.logs</td><td align="left">è®¾ç½®æ—¥å¿—æ–‡ä»¶çš„å­˜å‚¨è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„logsæ–‡ä»¶å¤¹</td></tr><tr><td align="left">path.plugins</td><td align="left">è®¾ç½®æ’ä»¶çš„å­˜æ”¾è·¯å¾„ï¼Œé»˜è®¤æ˜¯esæ ¹ç›®å½•ä¸‹çš„pluginsæ–‡ä»¶å¤¹</td></tr><tr><td align="left">bootstrap.memory_lock</td><td align="left">è®¾ç½®ä¸ºtrueå¯ä»¥é”ä½ESä½¿ç”¨çš„å†…å­˜ï¼Œé¿å…å†…å­˜è¿›è¡Œswap</td></tr><tr><td align="left">network.host</td><td align="left">è®¾ç½®bind_hostå’Œpublish_hostï¼Œè®¾ç½®ä¸º0.0.0.0å…è®¸å¤–ç½‘è®¿é—®</td></tr><tr><td align="left">http.port</td><td align="left">è®¾ç½®å¯¹å¤–æœåŠ¡çš„httpç«¯å£ï¼Œé»˜è®¤ä¸º9200ã€‚</td></tr><tr><td align="left">transport.tcp.port</td><td align="left">é›†ç¾¤ç»“ç‚¹ä¹‹é—´é€šä¿¡ç«¯å£</td></tr><tr><td align="left">discovery.zen.ping.timeout</td><td align="left">è®¾ç½®ESè‡ªåŠ¨å‘ç°èŠ‚ç‚¹è¿æ¥è¶…æ—¶çš„æ—¶é—´ï¼Œé»˜è®¤ä¸º3ç§’ï¼Œå¦‚æœç½‘ç»œå»¶è¿Ÿé«˜å¯è®¾ç½®å¤§äº›</td></tr><tr><td align="left">discovery.zen.minimum_master_nodes</td><td align="left">ä¸»ç»“ç‚¹æ•°é‡çš„æœ€å°‘å€¼ ,æ­¤å€¼çš„å…¬å¼ä¸ºï¼š(master_eligible_nodes/2) + 1 ï¼Œæ¯”å¦‚ï¼šæœ‰3ä¸ªç¬¦åˆè¦æ±‚çš„ä¸»ç»“ç‚¹ï¼Œé‚£ä¹ˆè¿™é‡Œè¦è®¾ç½®ä¸º2</td></tr></tbody></table><h3 id="jvm-options"><a href="#jvm-options" class="headerlink" title="jvm.options"></a>jvm.options</h3><ol><li><code>/etc/elasticsearch/jvm.options</code>ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶  </li><li><code>/etc/elasticsearch/jvm.options.d/</code>å°†é…ç½®æ–‡ä»¶æ”¾å…¥æ­¤ç›®å½•ä¸‹ï¼Œè¯»å–é¡ºåºæŒ‰å­—å…¸é¡ºåºa-z</li></ol><p><code>jvm.options</code></p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token comment"># ç‹¬ç«‹äºJVMç‰ˆæœ¬çš„JVMé€‰é¡¹</span><span class="token punctuation">-</span>Xmx2g<span class="token comment"># JDKç‰ˆæœ¬ä¸º8çš„JVMé€‰é¡¹</span><span class="token comment"># 8:-Xmx2g</span><span class="token comment"># JDKç‰ˆæœ¬å¤§äº8çš„JVMé€‰é¡¹ï¼Œå¦‚æœä½ çš„JDKæ˜¯11å°†åº”ç”¨è¿™ä¸ªé€‰é¡¹</span><span class="token comment"># 8-:-Xmx2g</span><span class="token comment"># JDKç‰ˆæœ¬å¤§äº8å°äº9çš„JVMé€‰é¡¹</span><span class="token comment"># 8-9:-Xmx2g</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="etc-sysconfig-elasticsearch"><a href="#etc-sysconfig-elasticsearch" class="headerlink" title="/etc/sysconfig/elasticsearch"></a>/etc/sysconfig/elasticsearch</h3><table><thead><tr><th align="left">é…ç½®é¡¹</th><th align="left">è§£é‡Š</th></tr></thead><tbody><tr><td align="left">JAVA_HOME</td><td align="left">è®¾ç½®è¦ä½¿ç”¨çš„è‡ªå®šä¹‰Javaè·¯å¾„ã€‚</td></tr><tr><td align="left">MAX_OPEN_FILES</td><td align="left">æœ€å¤§æ‰“å¼€æ–‡ä»¶æ•°ï¼Œé»˜è®¤ä¸º65535ã€‚</td></tr><tr><td align="left">MAX_LOCKED_MEMORY</td><td align="left">æœ€å¤§é”å®šå†…å­˜å¤§å°ã€‚å¦‚æœæ‚¨åœ¨elasticsearch.ymlä¸­ä½¿ç”¨bootstrap.memory_locké€‰é¡¹ï¼Œè¯·è®¾ç½®ä¸º<code>unlimited</code>ã€‚</td></tr><tr><td align="left">MAX_MAP_COUNT</td><td align="left">ä¸€ä¸ªè¿›ç¨‹å¯èƒ½å…·æœ‰çš„æœ€å¤§å†…å­˜æ˜ å°„åŒºåŸŸæ•°ã€‚å¦‚æœå°†mmapfsç”¨ä½œç´¢å¼•å­˜å‚¨ç±»å‹ï¼Œè¯·ç¡®ä¿å°†å…¶è®¾ç½®ä¸ºè¾ƒé«˜çš„å€¼ã€‚åœ¨å¯åŠ¨Elasticsearchä¹‹å‰é€šè¿‡<code>sysctl</code>è¿›è¡Œè®¾ç½®ã€‚é»˜è®¤ä¸º262144ã€‚</td></tr><tr><td align="left">ES_PATH_CONF</td><td align="left">é…ç½®æ–‡ä»¶ç›®å½•ï¼ˆéœ€è¦åŒ…å«<code>elasticsearch.yml</code>ï¼Œ<code>jvm.options</code>å’Œ<code>log4j2.properties</code>æ–‡ä»¶ï¼‰ï¼›é»˜è®¤ä¸º<code>/etc/elasticsearch</code>ã€‚</td></tr><tr><td align="left">ES_JAVA_OPTS</td><td align="left">æ‚¨å¯èƒ½æƒ³è¦åº”ç”¨çš„ä»»ä½•å…¶ä»–JVMç³»ç»Ÿå±æ€§ã€‚</td></tr><tr><td align="left">RESTART_ON_UPGRADE</td><td align="left">é…ç½®åœ¨è½¯ä»¶åŒ…å‡çº§æ—¶é‡æ–°å¯åŠ¨ï¼Œé»˜è®¤ä¸º<code>false</code>ã€‚è¿™æ„å‘³ç€æ‚¨å¿…é¡»åœ¨æ‰‹åŠ¨å®‰è£…è½¯ä»¶åŒ…åé‡æ–°å¯åŠ¨Elasticsearchå®ä¾‹ã€‚è¿™æ ·åšçš„åŸå› æ˜¯ä¸ºäº†ç¡®ä¿é›†ç¾¤ä¸­çš„å‡çº§ä¸ä¼šå¯¼è‡´è¿ç»­çš„åˆ†ç‰‡é‡æ–°åˆ†é…ï¼Œä»è€Œå¯¼è‡´é«˜ç½‘ç»œæµé‡å¹¶å‡å°‘é›†ç¾¤çš„å“åº”æ—¶é—´ã€‚</td></tr></tbody></table><h4 id="éªŒè¯å®ƒ"><a href="#éªŒè¯å®ƒ" class="headerlink" title="éªŒè¯å®ƒ"></a>éªŒè¯å®ƒ</h4><pre class="line-numbers language-html" data-language="html"><code class="language-html">[root@localhost ~]# curl 192.168.1.95:9200&#123;  "name" : "node5",  "cluster_name" : "my-application",  "cluster_uuid" : "_na_",  "version" : &#123;    "number" : "7.8.0",    "build_flavor" : "default",    "build_type" : "rpm",    "build_hash" : "757314695644ea9a1dc2fecd26d1a43856725e65",    "build_date" : "2020-06-14T19:35:50.234439Z",    "build_snapshot" : false,    "lucene_version" : "8.5.1",    "minimum_wire_compatibility_version" : "6.8.0",    "minimum_index_compatibility_version" : "6.0.0-beta1"  &#125;,  "tagline" : "You Know, for Search"&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h4><table><thead><tr><th align="left">Type</th><th align="left">Description</th><th align="left">Default Location</th><th align="left">Setting</th></tr></thead><tbody><tr><td align="left">home</td><td align="left">Elasticsearchä¸»ç›®å½•æˆ–$ES_HOME</td><td align="left">/usr/share/elasticsearch</td><td align="left">-</td></tr><tr><td align="left">bin</td><td align="left">äºŒè¿›åˆ¶è„šæœ¬ï¼ŒåŒ…æ‹¬ç”¨äºå¯åŠ¨èŠ‚ç‚¹çš„elasticsearchå’Œç”¨äºå®‰è£…æ’ä»¶çš„elasticsearch-plugin</td><td align="left">usr/share/elasticsearch/bin</td><td align="left">-</td></tr><tr><td align="left">conf</td><td align="left">é…ç½®æ–‡ä»¶ï¼ŒåŒ…æ‹¬elasticsearch.yml</td><td align="left">/etc/elasticsearch</td><td align="left">ES_PATH_CONF</td></tr><tr><td align="left">conf</td><td align="left">ç¯å¢ƒå˜é‡ï¼ŒåŒ…æ‹¬å †å¤§å°ï¼Œæ–‡ä»¶æè¿°ç¬¦.</td><td align="left">/etc/sysconfig/elasticsearch</td><td align="left">-</td></tr><tr><td align="left">data</td><td align="left">èŠ‚ç‚¹ä¸Šåˆ†é…çš„æ¯ä¸ªç´¢å¼•/åˆ†ç‰‡çš„æ•°æ®æ–‡ä»¶çš„ä½ç½®ã€‚å¯ä»¥å®¹çº³å¤šä¸ªä½ç½®.</td><td align="left">/var/lib/elasticsearch</td><td align="left">path.data</td></tr><tr><td align="left">jdk</td><td align="left">æ†ç»‘çš„Javaå¼€å‘å·¥å…·åŒ…ï¼Œç”¨äºè¿è¡ŒElasticsearchã€‚å¯ä»¥é€šè¿‡åœ¨/etc/sysconfig/elasticsearch.</td><td align="left">/usr/share/elasticsearch/jdk</td><td align="left">-</td></tr><tr><td align="left">logs</td><td align="left">æ—¥å¿—æ–‡ä»¶ä½ç½®</td><td align="left">/var/log/elasticsearch</td><td align="left">path.logs</td></tr><tr><td align="left">plugins</td><td align="left">æ’ä»¶æ–‡ä»¶ä½ç½®ã€‚æ¯ä¸ªæ’ä»¶å°†åŒ…å«åœ¨ä¸€ä¸ªå­ç›®å½•ä¸­ã€‚</td><td align="left">/usr/share/elasticsearch/plugins</td><td align="left">-</td></tr><tr><td align="left">repo</td><td align="left">å…±äº«æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨åº“ä½ç½®ã€‚å¯ä»¥å®¹çº³å¤šä¸ªä½ç½®ã€‚å¯ä»¥å°†æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨åº“æ”¾ç½®åœ¨æ­¤å¤„æŒ‡å®šçš„ä»»ä½•ç›®å½•çš„ä»»ä½•å­ç›®å½•ä¸­ã€‚</td><td align="left">Not configured</td><td align="left">path.repo</td></tr></tbody></table><h3 id="kibana"><a href="#kibana" class="headerlink" title="kibana"></a>kibana</h3><p><code>/etc/kibana/kibana.yml</code>  </p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">server.port</span><span class="token punctuation">:</span> <span class="token number">5601</span><span class="token key atrule">server.host</span><span class="token punctuation">:</span> <span class="token string">"192.168.1.95"</span><span class="token key atrule">elasticsearch.hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"http://192.168.1.95:9200"</span><span class="token punctuation">]</span><span class="token key atrule">i18n.locale</span><span class="token punctuation">:</span> <span class="token string">"zh-CN"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="nginx-1"><a href="#nginx-1" class="headerlink" title="nginx"></a>nginx</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">htpasswd -cm /etc/nginx/kibana-user admin   <span class="token comment"># æ¨è</span>htpasswd -bcm /etc/nginx/kibana-user admin admin   <span class="token comment"># ä¸æ¨èï¼Œå¯†ç æ˜æ–‡æš´éœ²åœ¨å‘½ä»¤è¡Œ</span><span class="token comment"># vi /etc/nginx/conf.d/kibana.conf </span>server <span class="token punctuation">&#123;</span>    listen <span class="token number">80</span><span class="token punctuation">;</span>    server_name <span class="token number">192.168</span>.1.95<span class="token punctuation">;</span>    auth_basic <span class="token string">"Restricted Access"</span><span class="token punctuation">;</span>    auth_basic_user_file /etc/nginx/kibana-user<span class="token punctuation">;</span>    location / <span class="token punctuation">&#123;</span>        proxy_pass http://192.168.1.95:5601<span class="token punctuation">;</span>        proxy_http_version <span class="token number">1.1</span><span class="token punctuation">;</span>        proxy_set_header Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>        proxy_set_header Connection <span class="token string">'upgrade'</span><span class="token punctuation">;</span>        proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span>        proxy_cache_bypass <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="ä½ å¯èƒ½éœ€è¦ä¿®æ”¹ä¸€ä¸‹ç³»ç»Ÿå‚æ•°"><a href="#ä½ å¯èƒ½éœ€è¦ä¿®æ”¹ä¸€ä¸‹ç³»ç»Ÿå‚æ•°" class="headerlink" title="ä½ å¯èƒ½éœ€è¦ä¿®æ”¹ä¸€ä¸‹ç³»ç»Ÿå‚æ•°"></a>ä½ å¯èƒ½éœ€è¦ä¿®æ”¹ä¸€ä¸‹ç³»ç»Ÿå‚æ•°</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> /etc/security/limits.conf   <span class="token comment"># æ–°å¢æˆ–ä¿®æ”¹ä»¥ä¸‹é€‰é¡¹ï¼Œé‡æ–°ç™»é™†ç”Ÿæ•ˆ</span>* soft nofile <span class="token number">65536</span>* hard nofile <span class="token number">131072</span>* soft nproc <span class="token number">2048</span>* hard nproc <span class="token number">4096</span>* soft memlock unlimited* hard memlock unlimited<span class="token builtin class-name">echo</span> <span class="token string">"vm.max_map_count=262144"</span> <span class="token operator">>></span> /etc/sysctl.confsysctl -p<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="end"><a href="#end" class="headerlink" title="end"></a>end</h1><p>è®¿é—®kibanaç•Œé¢ï¼ŒæŸ¥çœ‹dev-nginx-access-*ç´¢å¼•æ˜¯å¦å­˜åœ¨  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> wujiops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> elk </tag>
            
            <tag> tool </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dhcp</title>
      <link href="/posts/f8b7.html"/>
      <url>/posts/f8b7.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ç†è§£DHCPåŸç†"><a href="#ç†è§£DHCPåŸç†" class="headerlink" title="ç†è§£DHCPåŸç†"></a>ç†è§£DHCPåŸç†</h1><p>DHCPï¼ˆåŠ¨æ€ä¸»æœºé…ç½®åè®®ï¼‰æ˜¯ç”±Internetå·¥ä½œä»»åŠ¡å°ç»„è®¾è®¡å¼€å‘çš„ï¼Œä¸“é—¨ç”¨äºä¸ºTCP/IPç½‘ç»œä¸­çš„è®¡ç®—æœºåœ¨è‡ªåŠ¨åˆ†é…TCP/IPå‚æ•°çš„åè®®<br>ç®€å•æ¥è¯´ï¼ŒDHCPå°±æ˜¯ä¸€ä¸ªä¸éœ€è¦è´¦å·å¯†ç ç™»å½•çš„ã€è‡ªåŠ¨ç»™å†…ç½‘æœºå™¨åˆ†é…IPåœ°å€ç­‰ä¿¡æ¯çš„åè®®  </p><p>ä½¿ç”¨DHCPçš„å¥½å¤„ï¼š  </p><ol><li>å‡å°‘ç®¡ç†å‘˜çš„å·¥ä½œé‡  </li><li>é¿å…ipåœ°å€å†²çª  </li><li>å½“ç½‘ç»œæ›´æ”¹ipåœ°å€æ®µæ—¶ï¼Œä¸éœ€è¦å†é‡æ–°é…ç½®æ¯ä¸ªç”¨æˆ·çš„ipåœ°å€  </li><li>æé«˜äº†ipåœ°å€çš„åˆ©ç”¨ç‡  </li><li>æ–¹ä¾¿å®¢æˆ·ç«¯çš„é…ç½®  </li></ol><p>å¯åˆ†é…çš„åœ°å€ä¿¡æ¯ä¸»è¦åŒ…æ‹¬ï¼š  </p><blockquote><p>ç½‘å¡çš„IPåœ°å€ã€å­ç½‘æ©ç <br>å¯¹åº”çš„ç½‘ç»œåœ°å€ã€å¹¿æ’­åœ°å€<br>é»˜è®¤ç½‘å…³åœ°å€<br>DNSæœåŠ¡å™¨åœ°å€  </p></blockquote><p>DHCPæœåŠ¡çš„ç«¯å£ï¼šUDPçš„67ã€68  </p><h2 id="DHCPçš„åˆ†é…æ–¹å¼ï¼š"><a href="#DHCPçš„åˆ†é…æ–¹å¼ï¼š" class="headerlink" title="DHCPçš„åˆ†é…æ–¹å¼ï¼š"></a>DHCPçš„åˆ†é…æ–¹å¼ï¼š</h2><p>è‡ªåŠ¨åˆ†é…ï¼šåˆ†é…åˆ°ä¸€ä¸ªipåœ°å€åæ°¸ä¹…ä½¿ç”¨<br>æ‰‹åŠ¨åˆ†é…ï¼šç”±DHCPæœåŠ¡å™¨ç®¡ç†å‘˜ä¸“é—¨æŒ‡å®šipåœ°å€<br>åŠ¨æ€åˆ†é…ï¼šä½¿ç”¨å®Œåé‡Šæ”¾è¯¥ipï¼Œä¾›å…¶å®ƒå®¢æˆ·æœºä½¿ç”¨  </p><h2 id="DHCPçš„ç§Ÿçº¦è¿‡ç¨‹"><a href="#DHCPçš„ç§Ÿçº¦è¿‡ç¨‹" class="headerlink" title="DHCPçš„ç§Ÿçº¦è¿‡ç¨‹"></a>DHCPçš„ç§Ÿçº¦è¿‡ç¨‹</h2><p>å®¢æˆ·æœºä»DHCPæœåŠ¡å™¨è·å¾—ipåœ°å€çš„è¿‡ç¨‹ç§°ä¸ºDHCPçš„ç§Ÿçº¦è¿‡ç¨‹  </p><p>ç§Ÿçº¦è¿‡ç¨‹åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼š  </p><ol><li>å®¢æˆ·æœºè¯·æ±‚ipï¼ˆå®¢æˆ·æœºå‘DHCP Discoverï¼‰ï¼ˆå››æ­¥å‡ä¸ºå¹¿æ’­å‘é€ï¼‰<br>å®¢æˆ·ç«¯åœ¨ç½‘ç»œä¸­æœç´¢æœåŠ¡å™¨  </li><li>æœåŠ¡å™¨å“åº”ï¼ˆæœåŠ¡å™¨å‘DHCP Offerï¼‰<br>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯å“åº”æœåŠ¡  </li><li>å®¢æˆ·æœºé€‰æ‹©ipï¼ˆå®¢æˆ·æœºå‘DHCP Requestï¼‰<br>å®¢æˆ·ç«¯å‘ç›®æ ‡æœåŠ¡å™¨å‘é€æœåŠ¡è¯·æ±‚  </li><li>æœåŠ¡å™¨ç¡®å®šç§Ÿçº¦ï¼ˆæœåŠ¡å™¨å‘DHCP ACKå¹¿æ’­åŒ…ï¼‰<br>æœåŠ¡å™¨å‘å®¢æˆ·ç«¯æä¾›æœåŠ¡  </li></ol><hr><ol><li>å®¢æˆ·æœºè¯·æ±‚ipåœ°å€<br>å½“ä¸€ä¸ªDHCPå®¢æˆ·æœºå¯åŠ¨æ—¶ï¼Œå®¢æˆ·æœºè¿˜æ²¡æœ‰ipåœ°å€ï¼Œæ‰€ä»¥å®¢æˆ·æœºè¦é€šè¿‡DHCPè·å–ä¸€ä¸ªåˆæ³•çš„åœ°å€<br>æ­¤æ—¶ï¼ŒDHCPå®¢æˆ·æœºä»¥å¹¿æ’­çš„æ–¹å¼ï¼ˆåŸå› æ˜¯DHCPæœåŠ¡å™¨çš„ipåœ°å€å¯¹å®¢æˆ·æœºæ¥è¯´æ˜¯æœªçŸ¥çš„ï¼‰ï¼Œé€šè¿‡UDPçš„67ç«¯å£å‘é€DHCP Discoverå‘ç°ä¿¡æ¯æ¥å¯»æ‰¾DHCPæœåŠ¡å™¨ï¼Œå¹¿æ’­ä¿¡æ¯ä¸­åŒ…å«DHCPå®¢æˆ·æœºçš„MACåœ°å€å’Œè®¡ç®—æœºåï¼Œä»¥ä¾¿DHCPæœåŠ¡å™¨ç¡®å®šå“ªä¸ªå®¢æˆ·æœºå‘é€çš„è¯·æ±‚<br><img src="/medias/drawing-bed/dhcp/0.png">              </li><li>æœåŠ¡å™¨å“åº”<br>å½“DHCPæœåŠ¡å™¨æ¥æ”¶åˆ°æ¥è‡ªå®¢æˆ·æœºè¯·æ±‚ipåœ°å€çš„ä¿¡æ¯æ—¶ï¼Œå®ƒå°±åœ¨è‡ªå·±çš„ipåœ°å€æ± ä¸­æŸ¥æ‰¾æ˜¯å¦æœ‰åˆæ³•çš„ipåœ°å€æä¾›ç»™å®¢æˆ·æœºï¼Œå¦‚æœæœ‰ï¼ŒDHCPæœåŠ¡å™¨å°±å°†æ­¤ipåœ°å€åšä¸Šæ ‡è®°ï¼ŒåŠ å…¥åˆ°DHCP Offerçš„æ¶ˆæ¯ä¸­ï¼Œç„¶åDHCPæœåŠ¡å™¨å°±é€šè¿‡UDPçš„68ç«¯å£å¹¿æ’­ä¸€åˆ™åŒ…å«ä¸‹åˆ—ä¿¡æ¯çš„DHCP Offeræ¶ˆæ¯<br>DHCPå®¢æˆ·æœºçš„MACåœ°å€ã€DHCPæœåŠ¡å™¨æä¾›çš„åˆæ³•ipåœ°å€ã€å­ç½‘æ©ç ã€é»˜è®¤ç½‘å…³ã€ç§Ÿçº¦çš„æœŸé™ã€DHCPæœåŠ¡å™¨çš„ipåœ°å€<br><img src="/medias/drawing-bed/dhcp/1.png">              </li><li>å®¢æˆ·æœºé€‰æ‹©ipåœ°å€<br>DHCPå®¢æˆ·æœºä»æ¥æ”¶åˆ°çš„ç¬¬ä¸€ä¸ªDHCP Offeræ¶ˆæ¯ä¸­æå–ipåœ°å€ï¼Œå‘å‡ºipåœ°å€çš„DHCPæœåŠ¡å™¨å°†è¯¥åœ°å€ä¿ç•™ï¼Œè¿™æ ·è¯¥åœ°å€å°±ä¸èƒ½å†åˆ†é…ç»™å…¶å®ƒå®¢æˆ·æœº<br>å®¢æˆ·æœºä»ç¬¬ä¸€ä¸ªDHCPæœåŠ¡å™¨æ¥æ”¶DHCP Offeræ¶ˆæ¯å¹¶æå–äº†ipåœ°å€åï¼Œå®¢æˆ·æœºå°†DHCP Requestæ¶ˆæ¯å¹¿æ’­åˆ°æ‰€æœ‰çš„DHCPæœåŠ¡å™¨ï¼Œè¡¨æ˜å®ƒæ¥æ”¶æä¾›çš„å†…å®¹<br>DHCP Requestæ¶ˆæ¯åŒ…æ‹¬ä¸ºå®¢æˆ·æœºæä¾›ipé…ç½®çš„æœåŠ¡å™¨çš„æœåŠ¡æ ‡è¯†ï¼ˆæœåŠ¡å™¨ipåœ°å€ï¼‰DHCPæœåŠ¡å™¨æŸ¥çœ‹æœåŠ¡å™¨æ ‡è¯†å­—æ®µï¼Œä»¥ç¡®å®šæä¾›çš„ipåœ°å€æ˜¯å¦è¢«æ¥æ”¶ï¼Œå¦‚æœDHCP Offerè¢«æ‹’ç»ï¼Œåˆ™DHCPæœåŠ¡å–æ¶ˆå¹¶ä¿ç•™å…¶ipåœ°å€ä»¥æä¾›ç»™ä¸‹ä¸€ä¸ªå®¢æˆ·æœºçš„ç§Ÿçº¦è¯·æ±‚<br><img src="/medias/drawing-bed/dhcp/2.png" alt="img">              </li><li>æœåŠ¡å™¨ç¡®å®šç§Ÿçº¦<br>DHCPæœåŠ¡å™¨æ¥æ”¶åˆ°DHCP Requestæ¶ˆæ¯åï¼Œä»¥DHCP Ackæ¶ˆæ¯çš„å½¢å¼å‘å®¢æˆ·æœºå¹¿æ’­æˆåŠŸç¡®è®¤ï¼Œè¯¥æ¶ˆæ¯åŒ…å«æœ‰ipåœ°å€çš„æœ‰æ•ˆç§Ÿçº¦å’Œå…¶å®ƒå¯é…ç½®çš„ä¿¡æ¯<br>å½“å®¢æˆ·æœºæ”¶åˆ°DHCP Ackæ¶ˆæ¯æ—¶ï¼Œå®ƒå°±é…ç½®äº†ipåœ°å€ï¼Œå®ŒæˆTCP/IPçš„åˆå§‹åŒ–<br><img src="/medias/drawing-bed/dhcp/3.png" alt="img">  </li></ol><h2 id="é‡æ–°ç™»å½•"><a href="#é‡æ–°ç™»å½•" class="headerlink" title="é‡æ–°ç™»å½•"></a>é‡æ–°ç™»å½•</h2><h3 id="å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼š"><a href="#å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼š" class="headerlink" title="å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼š"></a>å¯ä»¥ç»§ç»­ä½¿ç”¨ï¼š</h3><p>DHCPå®¢æˆ·æœºæ¯æ¬¡é‡æ–°ç™»å½•ç½‘ç»œæ—¶ï¼Œä¸éœ€è¦å†å‘é€DHCP Discoveræ¶ˆæ¯ï¼Œè€Œæ˜¯ç›´æ¥å‘é€åŒ…å«å‰ä¸€æ¬¡æ‰€åˆ†é…çš„ipåœ°å€çš„DHCP Requestè¯·æ±‚ä¿¡æ¯<br>å½“DHCPæœåŠ¡å™¨æ¥æ”¶åˆ°è¿™ä¸€ä¿¡æ¯åï¼Œå®ƒä¼šå°è¯•è®©DHCPå®¢æˆ·æœºç»§ç»­ä½¿ç”¨åŸæ¥çš„ipåœ°å€ï¼Œå¹¶å›ç­”ä¸€ä¸ªDHCP Ackç¡®è®¤ä¿¡æ¯  </p><h3 id="ä¸å¯ç»§ç»­ä½¿ç”¨ï¼š"><a href="#ä¸å¯ç»§ç»­ä½¿ç”¨ï¼š" class="headerlink" title="ä¸å¯ç»§ç»­ä½¿ç”¨ï¼š"></a>ä¸å¯ç»§ç»­ä½¿ç”¨ï¼š</h3><p>å¦‚æœæ­¤ipåœ°å€æ— æ³•å†åˆ†é…ç»™åŸæ¥çš„DHCPå®¢æˆ·æœºä½¿ç”¨ï¼ˆå¦‚ï¼Œipåœ°å€å·²ç»åˆ†é…ç»™å…¶å®ƒçš„DHCPå®¢æˆ·æœºä½¿ç”¨ï¼‰ï¼ŒDHCPæœåŠ¡å™¨ç»™DHCPå®¢æˆ·æœºå›ç­”ä¸€ä¸ªDHCP Noackå¦è®¤ä¿¡æ¯<br>å½“åŸæ¥çš„DHCPå®¢æˆ·æœºæ”¶åˆ°æ­¤DHCP Noackå¦è®¤ä¿¡æ¯åï¼Œå®ƒå°±å¿…é¡»é‡æ–°å‘é€DHCP Discoverå‘ç°ä¿¡æ¯æ¥è¯·æ±‚æ–°çš„ipåœ°å€  </p><h3 id="æ›´æ–°ç§Ÿçº¦ï¼š"><a href="#æ›´æ–°ç§Ÿçº¦ï¼š" class="headerlink" title="æ›´æ–°ç§Ÿçº¦ï¼š"></a>æ›´æ–°ç§Ÿçº¦ï¼š</h3><p>å½“DHCPæœåŠ¡å™¨å‘å®¢æˆ·æœºå‡ºç§Ÿçš„ipåœ°å€ç§ŸæœŸè¾¾åˆ°50%æ—¶ï¼Œå°±éœ€è¦æ›´æ–°åœ°å€ç§Ÿçº¦ï¼Œå½“ç§Ÿçº¦æ—¶é—´è¾¾åˆ°87.5%æ—¶è¿˜æ²¡èƒ½æ‰¾åˆ°DHCPæœåŠ¡å™¨æ›´æ–°æ–°ç§Ÿçº¦ï¼Œå®¢æˆ·æœºå°±éœ€è¦é‡æ–°å‘é€DHCP DiscoveråŒ…<br>å¦‚æœå®¢æˆ·ç«¯å‘é€DiscoveråŒ…åï¼Œæ²¡æœ‰DHCPå›åº”ï¼Œå®¢æˆ·ç«¯ä¼šå¯ç”¨ä¸€ä¸ª169.254.0.0/16çš„Bç±»åœ°å€ä½œä¸ºä¸´æ—¶é€šè®¯åœ°å€  </p><h1 id="é…ç½®DHCPæœåŠ¡"><a href="#é…ç½®DHCPæœåŠ¡" class="headerlink" title="é…ç½®DHCPæœåŠ¡"></a>é…ç½®DHCPæœåŠ¡</h1><h2 id="DHCPé…ç½®ä¸ä½¿ç”¨"><a href="#DHCPé…ç½®ä¸ä½¿ç”¨" class="headerlink" title="DHCPé…ç½®ä¸ä½¿ç”¨"></a>DHCPé…ç½®ä¸ä½¿ç”¨</h2><p>å…³é—­è™šæ‹ŸæœºDHCPæœåŠ¡ï¼ˆä»»åŠ¡ç®¡ç†å™¨â€”-&gt;æœåŠ¡ï¼‰<br><img src="/medias/drawing-bed/dhcp/4.png">  </p><h3 id="DHCPæœåŠ¡å™¨çš„é…ç½®"><a href="#DHCPæœåŠ¡å™¨çš„é…ç½®" class="headerlink" title="DHCPæœåŠ¡å™¨çš„é…ç½®"></a>DHCPæœåŠ¡å™¨çš„é…ç½®</h3><p>å®‰è£…DHCPåŒ…ï¼š<code>dhcp</code>ï¼ˆyumå®‰è£…å³å¯ï¼‰<br>ä¸»é…ç½®æ–‡ä»¶ï¼š<br><code>/etc/dhcp/dhcpd.conf</code><br><img src="/medias/drawing-bed/dhcp/5.png">    </p><p>é»˜è®¤æ­¤æ–‡ä»¶ä¸­æ²¡æœ‰é…ç½®å†…å®¹ï¼Œåªæœ‰æç¤ºï¼Œéœ€è¦åˆ°<code>/usr/share/doc/dhcp-ç‰ˆæœ¬/dhcpd.conf.sample</code>æ–‡ä»¶å¤åˆ¶   </p><h3 id="æ‰§è¡Œç¨‹åºï¼š"><a href="#æ‰§è¡Œç¨‹åºï¼š" class="headerlink" title="æ‰§è¡Œç¨‹åºï¼š"></a>æ‰§è¡Œç¨‹åºï¼š</h3><p>ä¸»ç¨‹åºï¼š<code>/usr/sbin/dhcp/dhcpd</code><br>æœåŠ¡è„šæœ¬ï¼š<code>/etc/init.d/dhcpd</code><br>æŒ‡å®šé…ç½®å‚æ•°ï¼š<code>/etc/sysconfig/dhcpd</code>ï¼ˆdhcpå¯åŠ¨æ—¶è¦è¯»å–çš„å‚æ•°ï¼‰<br>ä¸­ç»§ä¸»ç¨‹åºï¼š<code>dhcrelay</code><br>ä¸­ç»§æœåŠ¡è„šæœ¬ï¼š<code>/etc/init.d/dhcrelay</code><br>DHCPä¸­ç»§é…ç½®ï¼š<code>/etc/sysconfig/dhcrelay</code><br><img src="/medias/drawing-bed/dhcp/6.png"><br>å£°æ˜ï¼šç”¨æ¥æè¿°dhcpdæœåŠ¡å™¨ä¸­å¯¹ç½‘ç»œå¸ƒå±€çš„åˆ’åˆ†ï¼Œå…¶ä¸­subnetå£°æ˜ç”¨æ¥çº¦æŸä¸€ä¸ªç½‘æ®µï¼Œhostå£°æ˜ç”¨æ¥çº¦æŸä¸€å°ç‰¹å®šçš„ä¸»æœº<br>å‚æ•°ï¼šç”±é…ç½®å…³é”®å­—å’Œå¯¹åº”çš„å€¼ç»„æˆï¼Œæ€»æ˜¯ä»¥ ï¼›ç»“æŸï¼Œä¸€èˆ¬ä½äºæŒ‡å®šçš„å£°æ˜èŒƒå›´ä¹‹å†…ï¼Œç”¨æ¥è®¾ç½®æ‰€åœ¨èŒƒå›´çš„è¿è¡Œç‰¹æ€§ï¼ˆå¦‚ï¼Œé»˜è®¤ç§Ÿçº¦æ—¶é—´ã€æœ€å¤§ç§Ÿçº¦æ—¶é—´ç­‰ï¼‰<br>é€‰é¡¹ï¼šç”±optionå¼•å¯¼ï¼Œåé¢è·Ÿå…·ä½“çš„é…ç½®å…³é”®å­—å’Œå¯¹åº”çš„å€¼ï¼Œä¹Ÿæ˜¯ä»¥åˆ†å· ï¼›ç»“æŸï¼Œç”¨äºæŒ‡å®šåˆ†é…ç»™å®¢æˆ·æœºçš„å„ç§åœ°å€å‚æ•°ï¼ˆå¦‚ï¼Œé»˜è®¤ç½‘å…³åœ°å€ã€å­ç½‘æ©ç ã€DNSæœåŠ¡å™¨åœ°å€ç­‰ï¼‰<br>ç¡®å®šDHCPæœåŠ¡çš„å…¨å±€é…ç½®ï¼Œä½œç”¨ä¸æ•´ä¸ªDHCPæœåŠ¡å™¨ï¼Œä¸ºäº†ä½¿é…ç½®æ–‡ä»¶çš„ç»“æœæ›´åŠ æ¸…æ™°ï¼Œå…¨å±€é…ç½®é€šå¸¸ä¼šæ”¾åœ¨é…ç½®æ–‡ä»¶dhcpd.confçš„å¼€å¤´éƒ¨åˆ†ï¼Œå¯ä»¥æ˜¯é…ç½®å‚æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯é…ç½®é€‰é¡¹  </p><h3 id="subnetç½‘æ®µå£°æ˜"><a href="#subnetç½‘æ®µå£°æ˜" class="headerlink" title="subnetç½‘æ®µå£°æ˜"></a>subnetç½‘æ®µå£°æ˜</h3><p>ä½œç”¨äºæ•´ä¸ªå­ç½‘æ®µï¼ˆsubnetå¿…é¡»è¦æœ‰ï¼Œä¸”å¯æœ‰å¤šä¸ªï¼‰  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">subnet 192.168.0.0 netmask 255.255.255.0 &#123;   # å£°æ˜ç½‘æ®µåœ°å€    range 192.168.0.10 192.168.0.100;   # è®¾ç½®åœ°å€æ±     option subnet-mask 255.255.255.0;   # è®¾ç½®å­ç½‘æ©ç     option routers 192.168.0.1;   # æŒ‡å®šé»˜è®¤ç½‘å…³&#125;  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="hostä¸»æœºå£°æ˜"><a href="#hostä¸»æœºå£°æ˜" class="headerlink" title="hostä¸»æœºå£°æ˜"></a>hostä¸»æœºå£°æ˜</h3><p>ä½œç”¨äºå•ä¸ªä¸»æœºï¼ˆä¸ºä¸ªåˆ«æœåŠ¡å™¨åˆ†é…å›ºå®šçš„ipåœ°å€ï¼‰  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">host test&#123;      hardware ethernet 00:00:00:00:00:00;   # æŒ‡å®šmacåœ°å€    fixed-address 192.168.0.45;   # æŒ‡å®šipåœ°å€&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å¯åŠ¨DHCPæœåŠ¡  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">service</span> dhcpd start<span class="token function">netstat</span> -anpu<span class="token operator">|</span><span class="token function">grep</span> <span class="token string">":67"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¯åŠ¨å¤±è´¥ï¼ŒæŸ¥çœ‹/var/log/messagesä¸­çš„æŠ¥é”™ä¿¡æ¯ï¼Œæ ¹æ®æç¤ºè¿›è¡Œæ’é”™ã€‚<br>æ³¨æ„ï¼šåœ¨å¯åŠ¨dhcpdæœåŠ¡ä¹‹å‰ï¼Œåº”ç¡®å®šæä¾›DHCPæœåŠ¡å™¨çš„ç½‘ç»œæ¥å£å…·æœ‰é™æ€æŒ‡å®šçš„å›ºå®šipåœ°å€ï¼Œå¹¶è‡³å°‘æœ‰ä¸€ä¸ªç½‘ç»œæ¥å£çš„ipåœ°å€ä¸DHCPæœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªsubnetç½‘æ®µç›¸å¯¹åº”ï¼Œå¦åˆ™å°†æ— æ³•æ­£å¸¸å¯åŠ¨dhcpdæœåŠ¡  </p><h3 id="DHCPå®¢æˆ·ç«¯è·å–IPï¼š"><a href="#DHCPå®¢æˆ·ç«¯è·å–IPï¼š" class="headerlink" title="DHCPå®¢æˆ·ç«¯è·å–IPï¼š"></a>DHCPå®¢æˆ·ç«¯è·å–IPï¼š</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">service</span> network restartdhclient -d eth0   <span class="token comment"># dhclient -r é‡Šæ”¾è·å–çš„ipåœ°å€</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>/var/lib/dhcpd/dhcpd.leases</code>ä¸­è®°å½•äº†æœåŠ¡å™¨çš„ipåœ°å€åˆ†é…æƒ…å†µ</p><h1 id="é…ç½®DHCPä¸­ç»§"><a href="#é…ç½®DHCPä¸­ç»§" class="headerlink" title="é…ç½®DHCPä¸­ç»§"></a>é…ç½®DHCPä¸­ç»§</h1><p>åœ¨å®é™…åº”ç”¨ä¸­å¯èƒ½ä¼šé‡åˆ°ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç‰©ç†ç½‘ç»œä¸­å­˜åœ¨å¤šä¸ªipå­ç½‘ï¼Œè€Œæ¯ä¸ªipå­ç½‘çš„ä¸»æœºéƒ½éœ€è¦DHCPæœåŠ¡å™¨æ¥åŠ¨æ€åˆ†é…ipåœ°å€ï¼š  </p><ol><li>åœ¨æ¯ä¸ªå­ç½‘è®¾ç½®DHCPæœåŠ¡å™¨ï¼Œå°†å…¶åˆ†åˆ«ä¸ºæ¯ä¸ªå­ç½‘åˆ†é…ipåœ°å€ï¼Œä½†æ­¤æ–¹æ³•ä¼šå¢åŠ å¼€é”€ï¼Œæµªè´¹èµ„æº  </li><li>åœ¨ä¸€ä¸ªå­ç½‘å†…è®¾ç½®DHCPæœåŠ¡å™¨ï¼Œé€šè¿‡è¿™å°DHCPæœåŠ¡å™¨æ¥ä¸ºæ‰€æœ‰çš„å­ç½‘åˆ†é…ipåœ°å€  </li></ol><h2 id="DHCPä¸­ç»§é…ç½®"><a href="#DHCPä¸­ç»§é…ç½®" class="headerlink" title="DHCPä¸­ç»§é…ç½®"></a>DHCPä¸­ç»§é…ç½®</h2><p>ä¸­ç»§ä¸»ç¨‹åºï¼š<code>dhcrelay</code><br>ä¸­ç»§æœåŠ¡è„šæœ¬ï¼š<code>/etc/init.d/dhcrelay</code><br>DHCPä¸­ç»§é…ç½®æ–‡ä»¶ï¼š<code>/etc/sysconfig/dhcrelay</code>  </p><ol><li><p>å¼€å¯è·¯ç”±è½¬å‘åŠŸèƒ½<br>æ°¸ä¹…å¯ç”¨ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/sysctl.confnet.ipv4.ip_forword<span class="token operator">=</span><span class="token number">1</span>   <span class="token comment"># ä¿®æ”¹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>sysctl -p</code> è®©é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ  </p></li><li><p>æŒ‡å®šdhcpserveråŠç›‘å¬çš„ç½‘å¡åˆ°é…ç½®æ–‡ä»¶  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> /etc/sysconfig/dhcrelay  <span class="token assign-left variable">INTERFACES</span><span class="token operator">=</span><span class="token string">"eth0 eth1 eth2â€¦"</span>   <span class="token comment"># ç›‘å¬çš„ç½‘å¡  </span><span class="token assign-left variable">DHCPSERVERS</span><span class="token operator">=</span><span class="token string">"192.168.0.10"</span>   <span class="token comment"># dhcpæœåŠ¡å™¨ip  </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>å¯åŠ¨ä¸­ç»§æœåŠ¡<br><code>service dhcrelay restart</code><br>æ·»åŠ è·¯ç”±ï¼š<br>dhcpæœåŠ¡å™¨ä¸­æ·»åŠ é»˜è®¤è·¯ç”±æŒ‡å®šä¸­ç»§ip<br>dhcpå®¢æˆ·æœºä¸­æ·»åŠ é»˜è®¤è·¯ç”±æŒ‡å®šä¸­ç»§ip  </p></li></ol><p>ç¤ºä¾‹ï¼š<br>DHCPæœåŠ¡å™¨ç«¯<br>å…³é—­SELinuxå’Œiptables<br><img src="/medias/drawing-bed/dhcp/7.png">  </p><p>å®‰è£…<code>dhcp</code><br>é…ç½®<code>/etc/dhcp/dhcpd.conf</code>ï¼ˆsubnet å¯¹å…¨å±€ç”Ÿæ•ˆï¼‰<br><img src="/medias/drawing-bed/dhcp/8.png">  </p><p>å¦‚æœhostä¸­æœ‰æŒ‡å®šipåˆ™subnetå¯¹æ­¤hostä¸ç”Ÿæ•ˆ<br><img src="/medias/drawing-bed/dhcp/9.png">  </p><p>å®¢æˆ·ç«¯ï¼š<br><code>dhclient -d eth#</code> è·å–åŠ¨æ€ip<br>å¸¦ä¸­ç»§ï¼š<br>HDCPæœåŠ¡å™¨å¢åŠ <br><img src="/medias/drawing-bed/dhcp/10.png">  </p><p>é…ç½®ä¸­ç»§æœåŠ¡å™¨ï¼š<br>é…ç½®<code>/etc/sysctl.conf</code><br><img src="/medias/drawing-bed/dhcp/11.png">  </p><p>ç”Ÿæ•ˆ<code>sysctl -p</code><br><img src="/medias/drawing-bed/dhcp/12.png">  </p><p>é…ç½®/etc/sysconfig/dhcrelay<br><img src="/medias/drawing-bed/dhcp/13.png">  </p><p>å¯åŠ¨ä¸­ç»§æœåŠ¡ï¼š<br><code>service dhcrelay restart</code><br>åœ¨dhcpæœåŠ¡å™¨ä¸­æ·»åŠ é»˜è®¤è·¯ç”±ä¸‹ä¸€è·³ä¸ºä¸­ç»§ipï¼ˆå’ŒdhcpæœåŠ¡å™¨åŒç½‘æ®µï¼‰<br>åœ¨dhcpå®¢æˆ·ç«¯ä¸­æ·»åŠ é»˜è®¤è·¯ç”±ä¸‹ä¸€è·³ä¸ºä¸­ç»§ipï¼ˆå’ŒdhcpæœåŠ¡å™¨åˆ†é…çš„ç½‘æ®µä¸€è‡´ï¼‰<br>TODO routeå¾…å¢åŠ <br>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> dhcp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é’‰é’‰</title>
      <link href="/posts/4af8.html"/>
      <url>/posts/4af8.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>æ·»åŠ æœºå™¨äººï¼š<br>1.æ‰¾åˆ°ç¾¤<br><img src="/medias/drawing-bed/others/5.jpg"><br>2.æ·»åŠ è‡ªå®šä¹‰æœºå™¨äºº<br><img src="/medias/drawing-bed/others/6.jpg"><br>3.è®°ä½webhook<br><img src="/medias/drawing-bed/others/7.jpg"><br>4.è®°ä½ç­¾å€¼ï¼Œé¼ æ ‡æ”¾åœ¨æ¡†é‡Œé¢åŒå‡»å¯ä»¥å¤åˆ¶ï¼Œä¸å«Œéº»çƒ¦å¯ä»¥æ·»åŠ å…³é”®å­—å’ŒIPåœ°å€æ®µï¼Œä¸åŠ ç­¾ç›¸æ¯”ï¼Œæ¯”è¾ƒå®¹æ˜“å®ç°ã€‚<br><img src="/medias/drawing-bed/others/8.jpg"></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># coding: utf-8</span><span class="token keyword">import</span> requests<span class="token keyword">import</span> json<span class="token keyword">import</span> codecs<span class="token keyword">import</span> time<span class="token keyword">import</span> hmac<span class="token keyword">import</span> hashlib<span class="token keyword">import</span> base64<span class="token keyword">import</span> urllib<span class="token punctuation">.</span>parse<span class="token keyword">from</span> time <span class="token keyword">import</span> strftime<span class="token punctuation">,</span> localtimelocaltime <span class="token operator">=</span> strftime<span class="token punctuation">(</span><span class="token string">"%Y-%m-%d %H:%M:%S"</span><span class="token punctuation">,</span> localtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token comment"># æ­¤æ®µä»£ç æ˜¯python3æŠŠtimestamp+"\n"+å¯†é’¥å½“åšç­¾åå­—ç¬¦ä¸²ï¼Œä½¿ç”¨HmacSHA256ç®—æ³•è®¡ç®—ç­¾åï¼Œç„¶åè¿›è¡ŒBase64 encodeï¼Œæœ€åå†æŠŠç­¾åå‚æ•°å†è¿›è¡ŒurlEncodeï¼Œå¾—åˆ°æœ€ç»ˆçš„ç­¾åsignï¼ˆéœ€è¦ä½¿ç”¨UTF-8å­—ç¬¦é›†ï¼‰</span>timestamp <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span>secret <span class="token operator">=</span> <span class="token string">'SEC******'</span>   <span class="token comment"># ç­¾å€¼</span>secret_enc <span class="token operator">=</span> secret<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>string_to_sign <span class="token operator">=</span> <span class="token string">'&#123;&#125;\n&#123;&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>timestamp<span class="token punctuation">,</span> secret<span class="token punctuation">)</span>string_to_sign_enc <span class="token operator">=</span> string_to_sign<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span>hmac_code <span class="token operator">=</span> hmac<span class="token punctuation">.</span>new<span class="token punctuation">(</span>secret_enc<span class="token punctuation">,</span> string_to_sign_enc<span class="token punctuation">,</span>                     digestmod<span class="token operator">=</span>hashlib<span class="token punctuation">.</span>sha256<span class="token punctuation">)</span><span class="token punctuation">.</span>digest<span class="token punctuation">(</span><span class="token punctuation">)</span>sign <span class="token operator">=</span> urllib<span class="token punctuation">.</span>parse<span class="token punctuation">.</span>quote_plus<span class="token punctuation">(</span>base64<span class="token punctuation">.</span>b64encode<span class="token punctuation">(</span>hmac_code<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">class</span> <span class="token class-name">DingTalk_Base</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>__headers <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json;charset=utf-8'</span><span class="token punctuation">&#125;</span>        self<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">def</span> <span class="token function">send_msg</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">:</span>        json_text <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            <span class="token string">"msgtype"</span><span class="token punctuation">:</span> <span class="token string">"text"</span><span class="token punctuation">,</span>            <span class="token string">"text"</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>                <span class="token string">"content"</span><span class="token punctuation">:</span> text            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>            <span class="token string">"at"</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span>                <span class="token string">"atMobiles"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>                    <span class="token string">""</span>                <span class="token punctuation">]</span><span class="token punctuation">,</span>                <span class="token string">"isAtAll"</span><span class="token punctuation">:</span> <span class="token boolean">False</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">return</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>self<span class="token punctuation">.</span>url<span class="token punctuation">,</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>json_text<span class="token punctuation">)</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>self<span class="token punctuation">.</span>__headers<span class="token punctuation">)</span><span class="token punctuation">.</span>content<span class="token keyword">class</span> <span class="token class-name">DingTalk_Disaster</span><span class="token punctuation">(</span>DingTalk_Base<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># å¡«å†™æœºå™¨äººçš„webhook</span>        self<span class="token punctuation">.</span>url <span class="token operator">=</span> <span class="token string">'https://oapi.dingtalk.com/robot/send?access_token=******'</span> <span class="token operator">+</span> \            <span class="token string">'&amp;timestamp='</span> <span class="token operator">+</span> timestamp <span class="token operator">+</span> <span class="token string">'&amp;sign='</span> <span class="token operator">+</span> sign<span class="token keyword">with</span> codecs<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'./text'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>    txt <span class="token operator">=</span> localtime <span class="token operator">+</span> <span class="token string">"\n"</span> <span class="token operator">+</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span>   <span class="token comment"># .strip('\n')å»é™¤é¦–è¡Œå’Œå°¾è¡Œçš„ç©ºè¡Œ</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    ding <span class="token operator">=</span> DingTalk_Disaster<span class="token punctuation">(</span><span class="token punctuation">)</span>    ding<span class="token punctuation">.</span>send_msg<span class="token punctuation">(</span>txt<span class="token punctuation">)</span>    <span class="token comment"># ding.send_msg('åŠ ç›\ntest')</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å°†textæ–‡ä»¶æ”¾åœ¨pyæ–‡ä»¶çš„åŒçº§ç›®å½•</strong></p><pre class="line-numbers language-text" data-language="text"><code class="language-text">wujiopsæµ‹è¯•ä¿¡æ¯haha2haha<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„æ­¤æ–‡ä»¶å¯èƒ½ä¼šå¯¼è‡´æ‚¨çš„dingdingæ¥å£è¢«æ¶æ„è·å–ğŸ¤¬ï¼å†·é™ç‚¹~æ ¹æœ¬æ²¡äººè®¤è¯†ä½ å•Šå–‚ğŸ˜­  </p><p>è¿™é‡Œåˆ†äº«ä¸€ä¸ªpythonæ‰“åŒ…pyæ–‡ä»¶æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚<br>æ–¹æ³•ä¸€ï¼š<br><code>pip3 install pyinstaller tinyaes</code>å®‰è£…æ‰“åŒ…æ¨¡å—<br><code>pyinstaller -F dingtalk.py</code>ç›´æ¥æ‰“åŒ…å¯ä»¥è¢«åç¼–è¯‘æˆæºä»£ç <br>åç¼–è¯‘<code>pyhton pyinstxtractor.py xxx</code>  </p><p>æ–¹æ³•äºŒï¼š<br>å¯¹æºç åŠ å¯†æ‰“åŒ…å®‰è£…æ¨¡å—  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3 <span class="token function">install</span> Cythonpip3 uninstall Cryptopip3 <span class="token function">install</span> pycrypto<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ç”Ÿæˆkeyï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span> /dev/urandom <span class="token function">tr</span> -dc <span class="token number">0</span>-9-A-Z-a-z-_,.?<span class="token operator">=</span>+@%<span class="token operator">!</span> <span class="token operator">|</span> <span class="token function">head</span> -c <span class="token variable">$&#123;1<span class="token operator">:-</span>64&#125;</span><span class="token punctuation">;</span><span class="token builtin class-name">echo</span>openssl rand -base64 <span class="token number">32</span><span class="token operator">|</span><span class="token function">tr</span> A-Z a-z<span class="token operator">|</span><span class="token function">cut</span> -c <span class="token number">1</span>-64<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><code>pyinstaller -F --key=****** --clean dingtalk.py</code>åŠ å¯†æ‰“åŒ…<br>ç”Ÿæˆdist/dingtalkå¯æ‰§è¡Œæ–‡ä»¶  </p><p>é‡åˆ°çš„éº»çƒ¦äº‹ï¼š  </p><ol><li><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">    src/MD2.c:31:10: è‡´å‘½é”™è¯¯ï¼šPython.hï¼šNo such <span class="token function">file</span> or directory     <span class="token comment">#include "Python.h"</span>              ^~~~~~~~~~    ç¼–è¯‘ä¸­æ–­ã€‚    error: <span class="token builtin class-name">command</span> <span class="token string">'gcc'</span> failed with <span class="token builtin class-name">exit</span> status <span class="token number">1</span>yum -y <span class="token function">install</span> gcc python3-devel   <span class="token comment"># è§£å†³</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><pre class="line-numbers language-none"><code class="language-none">æ‰§è¡Œæ‰“åŒ…å¥½çš„æ–‡ä»¶ä¸æŠ¥é”™ä¸å‘é€ä¿¡æ¯  åŸå› ï¼šæ—¶é—´æœªåŒæ­¥  è®¾ç½®äº†åŠ ç›å‘é€æ¶ˆæ¯æ—¶é—´æœªåšåŒæ­¥  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å…¶å®ƒé—®é¢˜ï¼š<br>å¦‚æœä½ çœ‹è¿™ç¯‡æ–‡æ¡£ä¹‹å‰å®‰è£…äº†è®¸å¤šæ’ä»¶ï¼Œä½ å¯èƒ½éœ€è¦å¸è½½æ‰ä¸€äº›  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3 uninstall pycryptodomepip3 uninstall Crypto<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> wujiops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ssh</title>
      <link href="/posts/5d5.html"/>
      <url>/posts/5d5.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="sshæœåŠ¡è®²è§£"><a href="#sshæœåŠ¡è®²è§£" class="headerlink" title="sshæœåŠ¡è®²è§£"></a>sshæœåŠ¡è®²è§£</h1><p>SSHç®€ä»‹ï¼š<br>&emsp;&emsp;SSHæ˜¯ä¸€ç§å®‰å…¨é€šé“åè®®ï¼Œä¸»è¦ç”¨æ¥å®ç°å­—ç¬¦ç•Œé¢çš„è¿œç¨‹ç™»å½•ï¼Œè¿œç¨‹å¤åˆ¶ç­‰åŠŸèƒ½<br>&emsp;&emsp;sshåè®®å¯¹é€šä¿¡åŒæ–¹çš„æ•°æ®ä¼ è¾“è¿›è¡Œäº†åŠ å¯†å¤„ç†ï¼Œå…¶ä¸­åŒ…æ‹¬ç”¨æˆ·ç™»å½•æ—¶è¾“å…¥çš„ç”¨æˆ·å£ä»¤<br>&emsp;&emsp;ä¸telnetç­‰åº”ç”¨ç›¸æ¯”ï¼Œsshåè®®æä¾›äº†æ›´å¥½çš„å®‰å…¨æ€§<br>&emsp;&emsp;OpenSSHï¼šsshåè®®çš„å¼€æºå®ç°  </p><p>é…ç½®opensshæœåŠ¡å™¨ç«¯ï¼š<br>&emsp;&emsp;sshæœåŠ¡æ˜¯â€C/Sâ€æ¶æ„çš„ï¼ŒCä»£è¡¨å®¢æˆ·ç«¯ï¼ŒSä»£è¡¨æœåŠ¡å™¨ç«¯<br>&emsp;&emsp;åœ¨å®‰è£…Linuxç³»ç»Ÿæ—¶opensshæœåŠ¡é»˜è®¤å·²ç»å®‰è£…  </p><p>sshæœåŠ¡åŠé…ç½®æ–‡ä»¶ï¼š<br>&emsp;&emsp;openssh-serverï¼šæœåŠ¡å™¨ç«¯è½¯ä»¶<br>&emsp;&emsp;openssh-clientsï¼šå®¢æˆ·ç«¯è½¯ä»¶<br>è¦ä¿è¯è¿™ä¸¤ä¸ªåŒ…éƒ½å®‰è£…æ‰è¡Œ<br>&emsp;&emsp;å¯åŠ¨ï¼šservice sshd start  </p><p>é…ç½®æ–‡ä»¶ï¼š<br>&emsp;&emsp;/etc/ssh/sshd_config<br>&emsp;&emsp;é…ç½®é¡¹ï¼š<br>Port 22ï¼športä»£è¡¨ç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤22ï¼Œå¯ä¿®æ”¹<br>ListenAddress 0.0.0.0ï¼šç›‘å¬çš„IPåœ°å€ï¼Œé»˜è®¤ä¸ºæ‰€æœ‰ï¼Œå¯ä¿®æ”¹<br>Protocol 2ï¼šä»£è¡¨çš„sshçš„ç¬¬äºŒä¸ªç‰ˆæœ¬<br>LoginGraceTime 2mï¼šè¾“å…¥ç”¨æˆ·ååï¼Œ2åˆ†é’Ÿä¸è¾“å…¥å¯†ç è‡ªåŠ¨å…³é—­<br>PermitRootLogin yesï¼šæ˜¯å¦å…è®¸rootç™»å½•<br>MaxAuthTries 6ï¼šæœ€å¤§çš„è®¤è¯æ¬¡æ•°ï¼Œå³è¾“å…¥å¯†ç æ¬¡æ•°<br>RSAAuthentication yesï¼šå¯ç”¨RSAç®—æ³•è®¤è¯<br>PubkeyAuthentication yesï¼šå¯ç”¨å…¬é’¥è®¤è¯<br>AuthorizedkeysFileï¼š~/.ssh/authorized_keyså…¬é’¥æ”¾ç½®ä½ç½®ï¼Œåœ¨å¯¹åº”ç”¨æˆ·çš„å®¶ç›®å½•ä¸‹é¢çš„.sshéšè—ç›®å½•ä¸­ï¼Œåå­—ä¸ºauthorized_keysæ–‡ä»¶<br>PasswordAuthentication yesï¼šå¯†ç è®¤è¯<br>PermitEmptyPasswords noï¼šæ˜¯å¦å…è®¸ç©ºå¯†ç ç™»å½•  </p><p>é™åˆ¶å¯ç™»å½•ç”¨æˆ·çš„é…ç½®ï¼šï¼ˆallowç™½åå•ï¼Œdenyé»‘åå•ï¼‰<br>AllowUsers user1 user2 user3â€¦<br>DenyUsers<br>AllowGroups<br>DenyGroups  </p><p>ç™»å½•éªŒè¯æ–¹æ³•ï¼š<br>&emsp;&emsp;sshæœåŠ¡æ”¯æŒä¸¤ç§éªŒè¯æ–¹å¼ï¼šå¯†ç éªŒè¯ã€å¯†é’¥å¯¹éªŒè¯ï¼Œå¯ä»¥åªè®¾ç½®å…¶ä¸­ä¸€ç§æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä¸¤ç§æ–¹å¼éƒ½å¯ç”¨<br>&emsp;&emsp;å¯†ç éªŒè¯ï¼šä»¥æœåŠ¡å™¨ä¸­æœ¬åœ°ç³»ç»Ÿç”¨æˆ·çš„è¿œç¨‹ç™»å½•åç§°ã€å¯†ç è¿›è¡ŒéªŒè¯ï¼Œè¿™ç§æ–¹å¼ä½¿ç”¨æœ€ä¸ºç®€ä¾¿ï¼Œä½†ä»¥å®¢æˆ·æœºè§’åº¦æ¥çœ‹ï¼Œæ­£åœ¨è¿æ¥çš„æœåŠ¡å™¨æœ‰å¯èƒ½è¢«å‡å†’ï¼Œä»æœåŠ¡å™¨è§’åº¦æ¥çœ‹ï¼Œå½“é‡åˆ°å¯†ç ç©·ä¸¾ï¼ˆå³æš´åŠ›ç ´è§£ï¼‰æ”»å‡»æ—¶ï¼Œé˜²å¾¡åŠ›èƒ½åŠ›æ¯”è¾ƒå¼±<br>&emsp;&emsp;å¯†é’¥å¯¹éªŒè¯ï¼šè¦æ±‚æä¾›ç›¸åŒ¹é…çš„å¯†é’¥ä¿¡æ¯æ‰èƒ½é€šè¿‡éªŒè¯  </p><p>ä½¿ç”¨sshå®¢æˆ·ç«¯ç¨‹åº<br>å®¢æˆ·ç«¯ç»„ä»¶ï¼š<br>å‘½ä»¤ç¨‹åºï¼šsshã€scpã€sftp<br>å›¾å½¢å·¥å…·ï¼šXshell  </p><p>sshè¿œç¨‹ç™»å½•å‘½ä»¤<br>&emsp;&emsp;æ ¼å¼ï¼š<code>ssh [user@]host [command]</code><br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<code>-p port</code>ï¼šè¿œç¨‹æœåŠ¡å™¨ç›‘å¬çš„ç«¯å£<br>&emsp;&emsp;ä¾‹å¦‚ï¼š<code>ssh test@192.168.0.10</code><br>&emsp;&emsp;&emsp;&emsp;ä½¿ç”¨testç”¨æˆ·ç™»å½•192.168.0.10è¿™å°æœåŠ¡å™¨ï¼Œæ³¨æ„ï¼štestç”¨æˆ·æ˜¯192.168.0.10è¿™å°æœåŠ¡å™¨ä¸Šçš„ç”¨æˆ·  </p><p>scpå‘½ä»¤ï¼š<br>scp [options] SRCâ€¦ DEST/<br>ä¸¤ç§æ–¹å¼ï¼š<br>&emsp;&emsp;<code>scp [options] [user@]host:/sourcefile /testdir</code><br>&emsp;&emsp;<code>scp [options] /sourcefile [user@]host:/testpath</code>  </p><p>å¸¸ç”¨é€‰é¡¹ï¼š<br>&emsp;&emsp;<code>-C</code>ï¼šå‹ç¼©æ•°æ®æµ<br>&emsp;&emsp;<code>-r</code>ï¼šé€’å½’å¤åˆ¶<br>&emsp;&emsp;<code>-p</code>ï¼šä¿æŒåŸæ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´ã€è®¿é—®æ—¶é—´ã€æƒé™<br>&emsp;&emsp;<code>-P PORT</code>ï¼šæŒ‡æ˜è¿œç¨‹ä¸»æœºç›‘å¬çš„ç«¯å£  </p><h1 id="è¿œç¨‹å¤åˆ¶å·¥å…·"><a href="#è¿œç¨‹å¤åˆ¶å·¥å…·" class="headerlink" title="è¿œç¨‹å¤åˆ¶å·¥å…·"></a>è¿œç¨‹å¤åˆ¶å·¥å…·</h1><p>rsyncå‘½ä»¤ï¼š<br>åŸºäºsshå’ŒrshæœåŠ¡å®ç°é«˜æ•ˆç‡çš„è¿œç¨‹ç³»ç»Ÿä¹‹é—´å¤åˆ¶æ–‡ä»¶<br>ä½¿ç”¨å®‰å…¨çš„shellè¿æ¥åšä¸ºä¼ è¾“æ–¹å¼<br>&emsp;&emsp;<code>rsync -av /etc/passwd server1:/tmp</code>å¤åˆ¶ç›®å½•å’Œç›®å½•ä¸‹æ–‡ä»¶<br>&emsp;&emsp;<code>rsync -av /etc/ server1:/tmp</code>åªå¤åˆ¶ç›®å½•ä¸‹æ–‡ä»¶  </p><p>æ¯”scpæ›´å¿«ï¼Œåªå¤åˆ¶ä¸åŒçš„æ–‡ä»¶<br>é€‰é¡¹ï¼š<br>&emsp;&emsp;<code>-n</code>æ¨¡æ‹Ÿå¤åˆ¶è¿‡ç¨‹<br>&emsp;&emsp;<code>-v</code>æ˜¾ç¤ºè¿‡ç¨‹<br>&emsp;&emsp;<code>-r</code>é€’å½’å¤åˆ¶ç›®å½•æ ‘<br>&emsp;&emsp;<code>-p</code>ä¿ç•™æƒé™<br>&emsp;&emsp;<code>-t</code>ä¿ç•™æ—¶é—´æˆ³<br>&emsp;&emsp;<code>-g</code>ä¿ç•™ç»„ä¿¡æ¯<br>&emsp;&emsp;<code>-o</code>ä¿ç•™æ‰€æœ‰è€…ä¿¡æ¯  </p><p>sshå®¢æˆ·ç«¯ï¼š<br>å…è®¸å®ç°å¯¹è¿œç¨‹ç³»ç»Ÿç»éªŒè¯åœ°åŠ å¯†å®‰å…¨è®¿é—®<br>å½“ç”¨æˆ·è¿œç¨‹è¿æ¥sshæœåŠ¡å™¨æ—¶ä¼šå¤åˆ¶sshæœåŠ¡å™¨<code>/etc/ssh/ssh_host*key.pub</code>æ–‡ä»¶ä¸­çš„å…¬é’¥åˆ°å®¢æˆ·æœºçš„<code>~./ssh/know_hosts</code>ä¸­ï¼Œä¸‹æ¬¡è¿æ¥æ—¶ï¼Œä¼šæ¯”è¾ƒä¸¤å¤„æ˜¯å¦æœ‰ä¸åŒ  </p><h1 id="åŸºäºkeyè®¤è¯"><a href="#åŸºäºkeyè®¤è¯" class="headerlink" title="åŸºäºkeyè®¤è¯"></a>åŸºäºkeyè®¤è¯</h1><p>åŸºäºkeyè®¤è¯ï¼š<br>åœ¨æœåŠ¡å™¨ã€å®¢æˆ·ç«¯ä¸­æ„å»ºå¯†é’¥å¯¹éªŒè¯sshçš„åŸºæœ¬è¿‡ç¨‹<br>&emsp;&emsp;ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºå¯†é’¥å¯¹ï¼š<br>&emsp;&emsp;&emsp;&emsp;å…¬é’¥æ–‡ä»¶ï¼šid_rsa.pub<br>&emsp;&emsp;&emsp;&emsp;ç§é’¥æ–‡ä»¶ï¼šid_rsa<br>&emsp;&emsp;ç¬¬äºŒæ­¥ï¼šä¸Šä¼ å…¬é’¥æ–‡ä»¶id_rsa.pubåˆ°æœåŠ¡å™¨ä¸­<br>&emsp;&emsp;ç¬¬ä¸‰æ­¥ï¼šå¯¼å…¥å…¬é’¥ä¿¡æ¯<br>&emsp;&emsp;&emsp;&emsp;å…¬é’¥åº“æ–‡ä»¶ï¼š~/.ssh/authorized_keyï¼ˆæ­¤æ–‡ä»¶çš„æƒé™å¿…é¡»ä¸º600ï¼‰<br>&emsp;&emsp;ç¬¬å››æ­¥ï¼šä½¿ç”¨å¯†é’¥å¯¹æ–¹å¼éªŒè¯<br>å…·ä½“å®ç°ä¸¤ç§æ–¹å¼ï¼š<br>ç¬¬ä¸€ç§æ–¹å¼ï¼ˆè¾ƒå¤æ‚ï¼‰ï¼š<br>&emsp;&emsp;ä½¿ç”¨<code>user</code>ç”¨æˆ·è¿æ¥<code>ssh</code>æœåŠ¡å™¨çš„<code>user1</code>ç”¨æˆ·<br>&emsp;&emsp;ç¬¬ä¸€æ­¥ï¼šåœ¨å®¢æˆ·ç«¯åˆ›å»ºå¯†é’¥å¯¹<br>&emsp;&emsp;<code>su - å®¢æˆ·ç«¯ç”¨æˆ·</code><br>&emsp;&emsp;<code>ssh-keygen -t rsa -b 2048</code>ï¼ˆä¸€è·¯å›è½¦ï¼‰<br>&emsp;&emsp;ç¬¬äºŒæ­¥ï¼šä¸Šä¼ å…¬é’¥<br>&emsp;&emsp;<code>cd /home/å®¢æˆ·ç«¯ç”¨æˆ·/.ssh</code><br>&emsp;&emsp;<code>scp id_rsa.pub root@æœåŠ¡ç«¯IP:/tmp</code><br>&emsp;&emsp;ç¬¬ä¸‰æ­¥ï¼šåœ¨sshæœåŠ¡å™¨ä¸­è®¾ç½®<br>&emsp;&emsp;<code>cd /tmp</code><br>&emsp;&emsp;<code>mkdir /home/æœåŠ¡ç«¯ç”¨æˆ·/.ssh</code><br>&emsp;&emsp;<code>cat id_rsa.pub &gt; /home/æœåŠ¡ç«¯ç”¨æˆ·/.ssh/authorized_keys</code>ï¼ˆç›¸å½“äºmv id_rsa.pub /home/æœåŠ¡ç«¯/.ssh/authorized_keysï¼‰<br>&emsp;&emsp;<code>chmod 600 /home/æœåŠ¡ç«¯ç”¨æˆ·/.ssh/authorized_keys</code><br>&emsp;&emsp;ç¬¬å››æ­¥ï¼šåœ¨å®¢æˆ·ç«¯ç™»å½•éªŒè¯  </p><p>ç¬¬äºŒç§æ–¹å¼ï¼ˆç®€å•ï¼‰<br>&emsp;&emsp;ä½¿ç”¨å®¢æˆ·ç«¯ç”¨æˆ·è¿æ¥sshæœåŠ¡å™¨çš„æœåŠ¡ç«¯ç”¨æˆ·<br>&emsp;&emsp;ç¬¬ä¸€æ­¥ï¼šåœ¨å®¢æˆ·æœºåˆ›å»ºå¯†é’¥å¯¹<br>&emsp;&emsp;<code>su - user</code><br>&emsp;&emsp;<code>ssh-keygen -t rsa -b 2048</code><br>&emsp;&emsp;ç¬¬äºŒæ­¥ï¼šç›´æ¥å¯¼å…¥å…¬é’¥åˆ°user1ç”¨æˆ·çš„å®¶ç›®å½•ä¸­<br>&emsp;&emsp;<code>ssh-copy-id -i id_rsa.pub user1@192.168.0.10</code>ï¼ˆcd åˆ°ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„.sshç›®å½•ä¸‹ï¼‰<br>&emsp;&emsp;è¾“å…¥user1ç”¨æˆ·çš„å¯†ç <br>&emsp;&emsp;æŸ¥çœ‹æ˜¯å¦æˆåŠŸ<br>&emsp;&emsp;ç¬¬ä¸‰æ­¥ï¼šåœ¨å®¢æˆ·ç«¯éªŒè¯&emsp;&emsp;&emsp;&emsp;<br>&emsp;&emsp;ssh <a href="mailto:&#x75;&#x73;&#x65;&#x72;&#x31;&#64;&#49;&#x39;&#50;&#46;&#x31;&#x36;&#x38;&#x2e;&#x30;&#46;&#49;&#48;">&#x75;&#x73;&#x65;&#x72;&#x31;&#64;&#49;&#x39;&#50;&#46;&#x31;&#x36;&#x38;&#x2e;&#x30;&#46;&#49;&#48;</a>ä»¥user1ç”¨æˆ·ç™»å½•çœ‹æ˜¯å¦å…å¯†  </p><p>sshæœåŠ¡æœ€ä½³å®è·µ<br>&emsp;&emsp;1ã€ä¸è¦ä½¿ç”¨é»˜è®¤ç«¯å£<br>&emsp;&emsp;2ã€ç¦æ­¢ä½¿ç”¨Protocol version 1<br>&emsp;&emsp;3ã€é™åˆ¶å¯ç™»å½•ç”¨æˆ·<br>&emsp;&emsp;4ã€è®¾å®šç©ºé—²ä¼šè¯è¶…æ—¶æ—¶é•¿<br>&emsp;&emsp;5ã€åˆ©ç”¨é˜²ç«å¢™è®¾ç½®sshè®¿é—®ç­–ç•¥<br>&emsp;&emsp;6ã€ä»…ç›‘å¬ç‰¹å®šçš„IPåœ°å€<br>&emsp;&emsp;7ã€åŸºäºå£ä»¤è®¤è¯æ—¶ï¼Œä½¿ç”¨å¼ºå¯†ç ç­–ç•¥<br>&emsp;&emsp;8ã€ä½¿ç”¨åŸºäºå¯†é’¥çš„è®¤è¯<br>&emsp;&emsp;9ã€ç¦æ­¢ä½¿ç”¨ç©ºå¯†ç <br>&emsp;&emsp;10ã€ç¦æ­¢rootç”¨æˆ·ç›´æ¥ç™»å½•<br>&emsp;&emsp;11ã€é™åˆ¶sshçš„è®¿é—®é¢‘åº¦å’Œå¹¶å‘åœ¨çº¿æ•°<br>&emsp;&emsp;12ã€åšå¥½æ—¥å¿—ï¼Œç»å¸¸åˆ†æ  </p><h1 id="sudoæå‡æƒé™"><a href="#sudoæå‡æƒé™" class="headerlink" title="sudoæå‡æƒé™"></a>sudoæå‡æƒé™</h1><p>sudoçš„ç”¨é€”ï¼š  </p><ol><li>sudo èƒ½å¤ŸæˆæƒæŒ‡å®šç”¨æˆ·åœ¨æŒ‡å®šä¸»æœºä¸Šè¿è¡ŒæŸäº›å‘½ä»¤ï¼Œå¦‚æœæœªæˆæƒç”¨æˆ·å°è¯•ä½¿ç”¨ï¼Œsudoä¼šæç¤ºè”ç³»ç®¡ç†å‘˜  </li><li>sudo å¯ä»¥æä¾›æ—¥å¿—ï¼Œè®°å½•æ¯ä¸ªç”¨æˆ·ä½¿ç”¨sudoæ“ä½œ  </li><li>sudo ä¸ºç³»ç»Ÿç®¡ç†å‘˜æä¾›é…ç½®æ–‡ä»¶ï¼Œå…è®¸ç³»ç»Ÿç®¡ç†å‘˜é›†ä¸­åœ°ç®¡ç†ç”¨æˆ·çš„ä½¿ç”¨æƒé™çš„ä½¿ç”¨çš„ä¸»æœº  </li><li>sudo ä½¿ç”¨æ—¶é—´æˆ³æ–‡ä»¶æ¥å®Œæˆç±»ä¼¼â€æ£€ç¥¨â€çš„ç³»ç»Ÿ é»˜è®¤å­˜æ´»æœŸä¸º5åˆ†é’Ÿçš„â€å…¥åœºåˆ¸â€<br>é€šè¿‡visudoå‘½ä»¤ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œå…·æœ‰æ–‡ä»¶ï¼Œå…·æœ‰è¯­æ³•æ£€æŸ¥åŠŸèƒ½<br>&emsp;&emsp;<code>visudo -c</code>æ£€æŸ¥è¯­æ³•  </li></ol><p>é…ç½®sudoæˆæƒ<br>é…ç½®æ–‡ä»¶ï¼š<code>/etc/sudoers</code>ï¼Œ<code>/etc/sudoers.d/</code><br>æ—¥å¿—æ–‡ä»¶ï¼š<code>/var/log/secure</code>  </p><p>é…ç½®æ–‡ä»¶æ”¯æŒä½¿ç”¨é€šé…ç¬¦<code>glob</code>ï¼š<br>&emsp;&emsp;<code>?</code>åŒ¹é…å•ä¸€å­—ç¬¦<br>&emsp;&emsp;<code>*</code>åŒ¹é…ä»»æ„é•¿åº¦å­—ç¬¦<br>&emsp;&emsp;<code>[wxc]</code>åŒ¹é…å…¶ä¸­ä¸€ä¸ªå­—ç¬¦<br>&emsp;&emsp;<code>[^wxc]</code>é™¤äº†ç»™å®šçš„å­—ç¬¦<br>&emsp;&emsp;<code>\x</code>è½¬ä¹‰<br>&emsp;&emsp;<code>[[:alpha:]]</code>å­—æ¯ ç¤ºä¾‹ï¼š<code>/bin/ls [[:alpha:]]*</code><br>&emsp;&emsp;<code>!</code>æ’é™¤  </p><p>ä½¿ç”¨æ–¹æ³•ï¼š<br>&emsp;&emsp;<code>sudo [å‚æ•°] [æˆæƒå‘½ä»¤]</code><br>&emsp;&emsp;å‚æ•°ï¼š<br>&emsp;&emsp;<code>-u user</code>ï¼šä»¥æŒ‡å®šç”¨æˆ·èº«ä»½è¿è¡Œå‘½ä»¤<br>&emsp;&emsp;<code>-l</code>ï¼šæŸ¥çœ‹å½“å‰ç”¨æˆ·å¯ä»¥æ‰§è¡Œçš„å‘½ä»¤<br>&emsp;&emsp;<code>-v</code>ï¼šæ›´æ–°ç”¨æˆ·çš„æ—¶é—´æˆ³è€Œä¸æ‰§è¡Œå‘½ä»¤<br>&emsp;&emsp;<code>-V</code>ï¼šæ˜¾ç¤ºsudoçš„ç‰ˆæœ¬ä¿¡æ¯  </p><p>é…ç½®æ–‡ä»¶æ ¼å¼ï¼š<br>ä½¿ç”¨visudoå‘½ä»¤æˆ–æ‰§è¡Œ<code>vi /etc/sudoers</code>æ‰“å¼€é…ç½®æ–‡ä»¶<br>&emsp;&emsp;æ–‡ä»¶ä¸­è®°å½•æ ¼å¼ï¼š<br>&emsp;&emsp;&emsp;&emsp;ç”¨æˆ·  ä¸»æœºååˆ—è¡¨=ï¼ˆä»£è¡¨ç”¨æˆ·ï¼‰å‘½ä»¤ç¨‹åºåˆ—è¡¨<br>&emsp;&emsp;&emsp;&emsp;ALLï¼š ä»£è¡¨æ‰€æœ‰<br>&emsp;&emsp;&emsp;&emsp;NOPASSWDï¼šå…å¯†<br>&emsp;&emsp;ç”¨æˆ·ï¼šè¿è¡Œå‘½ä»¤è€…çš„èº«ä»½<br>&emsp;&emsp;ä¸»æœºåˆ—è¡¨ï¼šé€šè¿‡å“ªäº›ä¸»æœº<br>&emsp;&emsp;ä»£è¡¨ç”¨æˆ·ï¼šä»¥å“ªä¸ªç”¨æˆ·çš„èº«ä»½<br>&emsp;&emsp;å‘½ä»¤ç¨‹åºåˆ—è¡¨ï¼šè¿è¡Œå“ªäº›å‘½ä»¤<br>&emsp;&emsp;æ³¨æ„ï¼šå¦‚æœåªæˆæƒç”¨æˆ·ç™»å½•æœ¬æœºæ‰§è¡Œå‘½ä»¤ï¼Œä¸»æœºå†™æœ¬åœ°ipå³å¯<br>ä¾‹å¦‚ï¼š<br>&emsp;&emsp;ç»™userè¿™ä¸ªç”¨æˆ·sudoæƒé™ï¼Œå…è®¸ä»–åœ¨testè¿™å°ä¸»æœºä¸­å¯æ‰§è¡Œ/bin/ä¸‹çš„æ‰€æœ‰å‘½ä»¤ï¼Œé™¤äº†/sbin/reboot/å¤–<br>&emsp;&emsp;&emsp;&emsp;<code>visudo</code><br>&emsp;&emsp;&emsp;&emsp;<code>user test=/sbin/*,!/sbin/reboot</code>  </p><p>ç°åœ¨userç”¨æˆ·å°±å¯ä»¥ä½¿ç”¨æˆæƒçš„å‘½ä»¤äº†<br>&emsp;&emsp;<code>su - user</code><br>&emsp;&emsp;sudoæˆæƒå‘½ä»¤ï¼ˆä¼šæç¤ºè¾“å…¥å¯†ç ï¼Œè¾“å…¥userç”¨æˆ·çš„å¯†ç å³å¯ï¼Œè¾“å…¥å¯†ç å5åˆ†é’Ÿå†…ä¸ç”¨å†è¾“å…¥å¯†ç ï¼‰  </p><p>sudoåˆ«å<br>åˆ«åè®¾ç½®ï¼š<br>&emsp;&emsp;åˆ«åæœ‰å››ç§ç±»å‹ï¼š<br>&emsp;&emsp;&emsp;&emsp;User_Aliasç”¨æˆ·åˆ«å<br>&emsp;&emsp;&emsp;&emsp;Runas_Aliasä»£è¡¨ç”¨æˆ·åˆ«åï¼ˆå¯ä»¥çœç•¥ï¼‰<br>&emsp;&emsp;&emsp;&emsp;Host_Aliasä¸»æœºåˆ«å<br>&emsp;&emsp;&emsp;&emsp;Cmnd_Aliaså‘½ä»¤åˆ«å<br>ï¼ˆUã€Hã€Cåé¢å¯ä»¥è·Ÿå¤šä¸ªç”¨ ï¼Œåˆ†å¼€ï¼‰  </p><pre class="line-numbers language-none"><code class="language-none">User_Alias U&#x3D;hahaHost_Alias H&#x3D;testCmnd_Alias C&#x3D;&#x2F;sbin&#x2F;*U H&#x3D;C<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>æ ¼å¼ï¼š<code>Alias_Type NAME1=item1,item2,item3â€¦</code><br>ä¾‹å¦‚ï¼šå®šä¹‰ç”¨æˆ·åˆ«åä¸ºUSERï¼ŒåŒ…æ‹¬user1ï¼Œuser2ï¼Œuser3ï¼Œuser4å››ä¸ªç”¨æˆ·<br>&emsp;&emsp;<code>User_Alias USER=user1,user2,user3,user4</code><br>è¿™æ¡åˆ«åå°±å¯ä»¥ç”¨æ¥å¼•ç”¨äº†<br>&emsp;&emsp;<code>USER test=/sbin/*</code>  </p><p>sudoåˆ«å<br>ä¹Ÿå¯ä»¥å°†ç”¨æˆ·åŠ å…¥åˆ°ç»„é‡Œè¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œä¾‹å¦‚wheelç»„ï¼Œç»„åå‰è¦åŠ % å°†ç”¨æˆ·åŠ å…¥åˆ°wheelç»„ä¸­ï¼Œç„¶åå¯¹wheelè¿›è¡Œæˆæƒ<br><code>%wheel test=ALL</code>  </p><pre class="line-numbers language-none"><code class="language-none">User_Alias U&#x3D;hahaHost_Alias H&#x3D;testCmnd_Alias C&#x3D;&#x2F;sbin&#x2F;*U H&#x3D;C%wheel H&#x3D;ALL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ ·wheelç»„é‡Œçš„æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥æ‰§è¡Œtestä¸»æœºé‡Œé¢çš„æ‰€æœ‰å‘½ä»¤äº†  </p><h1 id="sshç«¯å£è½¬å‘"><a href="#sshç«¯å£è½¬å‘" class="headerlink" title="sshç«¯å£è½¬å‘"></a>sshç«¯å£è½¬å‘</h1><p>è½¬å‘åˆ°è¿œç«¯ï¼š<code>ssh -C -f -N -g -L æœ¬åœ°ç«¯å£:ç›®æ ‡IP:ç›®æ ‡ç«¯å£ ç”¨æˆ·å@ç›®æ ‡IP</code><br>è½¬å‘åˆ°æœ¬åœ°ï¼š<code>ssh -C -f -N -g â€“R æœ¬åœ°ç«¯å£:ç›®æ ‡IP:ç›®æ ‡ç«¯å£ ç”¨æˆ·å@ç›®æ ‡IP</code>  </p><p>æœ¬åœ°sshä¸æ˜¯22ï¼Œéœ€è¦æœ€åæŒ‡å®šæœ¬åœ°ç«¯å£<br><code>ssh -C -f -N -g -L æœ¬æœºç«¯å£:è¿œç«¯IP:è¿œç«¯ç«¯å£ root@è¿œç«¯IP -p port</code>  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰å…¨å’ŒåŠ å¯†</title>
      <link href="/posts/1faa.html"/>
      <url>/posts/1faa.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="å®‰å…¨å’ŒåŠ å¯†"><a href="#å®‰å…¨å’ŒåŠ å¯†" class="headerlink" title="å®‰å…¨å’ŒåŠ å¯†"></a>å®‰å…¨å’ŒåŠ å¯†</h1><p>OpenSSLç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š<br>&emsp;&emsp;libencryptoåº“ï¼šåŠ å¯†è§£å¯†åº“<br>&emsp;&emsp;libsslåº“ï¼šå®ç°sslå®‰å…¨é€šä¿¡æœºåˆ¶çš„åº“<br>&emsp;&emsp;opensslï¼šå¤šç”¨é€”å‘½ä»¤è¡Œå·¥å…·  </p><p>TCPã€UDP ä¼ è¾“å±‚åè®®<br>&emsp;&emsp;TCPåè®®ï¼šåº”ç”¨å±‚,æ•°æ®ã€ä¼ è¾“å±‚,ï¼ˆå°è£…TCPé¦–éƒ¨ï¼‰æ®µã€ç½‘ç»œå±‚ï¼ˆå°è£…IPé¦–éƒ¨ï¼‰å«æŠ¥æ–‡ã€æ•°æ®é“¾è·¯å±‚ï¼ˆå°è£…MACé¦–éƒ¨ï¼‰ã€å‘é€<br>&emsp;&emsp;SSLå®‰å…¨å¥—æ¥å­—å±‚ï¼Œå°±æ˜¯IP+ç«¯å£ï¼Œå¯ä»¥ç¡®è®¤ä¸»æœºä¸Šçš„åº”ç”¨ç¨‹åºï¼Œä¸åŒçš„åº”ç”¨ç¨‹åºå°±æ˜¯IP+ä¸åŒçš„ç«¯å£å·ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ  </p><p>SSLæ˜¯åº”ç”¨å±‚å’Œä¼ è¾“å±‚ä¹‹é—´çš„ä¸€ä¸ªæ¨¡å—<br>&emsp;&emsp;http+è°ƒç”¨sslåº“â€”&gt;https<br>&emsp;&emsp;httpsè°ƒç”¨äº†SSLåè®®ï¼Œhttpdè°ƒç”¨äº†sslåº“å°±ä½¿ç”¨åŠ å¯†ä¼ è¾“ï¼Œåä¹‹ä¸åŠ å¯†ä¼ è¾“<br><strong>httpåè®®çš„å®ç°ï¼Œæ˜¯ç”±httpdç¨‹åºå®Œæˆçš„</strong>  </p><p>é€šä¿¡å®‰å…¨çš„ç›®æ ‡ï¼ˆåŠå—æ”»å‡»ç±»å‹ï¼‰ï¼š<br>&emsp;&emsp;ä¿å¯†æ€§ï¼ˆçªƒå¬ã€é€šä¿¡é‡åˆ†æï¼‰<br>&emsp;&emsp;å®Œæ•´æ€§ï¼ˆæ›´æ”¹ã€ä¼ªè£…ã€é‡æ”¾ã€å¦è®¤ï¼‰<br>&emsp;&emsp;å¯ç”¨æ€§ï¼ˆæ‹’ç»æœåŠ¡DoSï¼‰  </p><p>åŠ å¯†å®Œå…¨ä½“ï¼š<br>åŸå§‹æ•°æ®ï¼Œè·å–æ ¡éªŒç ï¼Œç”¨å‘ä»¶äººçš„ç§é’¥åŠ å¯†æ ¡éªŒç ã€å¯¹ç§°åŠ å¯†ï¼ŒåŠ å¯†æ ¡éªŒç å’ŒåŸå§‹æ•°æ®ï¼Œç”¨æ”¶ä»¶äººå…¬é’¥åŠ å¯†å¯¹ç§°åŠ å¯†å¯†ç ã€å‘é€  </p><p>æ ¡éªŒç ï¼šmd5ã€sha1ã€sha224ç­‰<br>ï¼ˆå¯¹ç§°åŠ å¯†ï¼šå¯¹è¾ƒå¤§æ–‡ä»¶åŠ å¯†æ—¶ï¼Œæ¯”éå¯¹ç§°åŠ å¯†è€—è´¹çš„æ—¶é—´å°‘ï¼‰  </p><p>CAè®¤è¯ï¼šï¼ˆCAæœ‰å¾ˆå¤šï¼Œå„ç§CAä¹‹é—´äº’ä¿¡ï¼‰<br>&emsp;&emsp;å°†å…¬é’¥é€åˆ°CAè¿›è¡Œè®¤è¯ï¼Œè·å¾—â€œCAè¯ä¹¦â€  </p><p>è¯ä¹¦ä¿¡æ¯ï¼šç‰ˆæœ¬å·ã€ç­¾åã€è¯ä¹¦å‘è¡Œè€…ã€æœ‰æ•ˆæœŸã€ä¸»ä½“å…¬é’¥ã€ç­‰ç­‰<br>CAï¼šå…¬é’¥è½¬å‘ä¿¡ä»»æœºæ„ï¼Œå®¢æˆ·æŠŠè‡ªå·±çš„å…¬é’¥é€å¾€CAè®¤è¯ï¼ŒCAä¼šå¯¹å…¬é’¥çš„ç‰¹å¾ç ç”¨CAçš„ç§é’¥åŠ å¯†ï¼ˆç­¾åï¼‰ï¼Œäº’æ¢å…¬é’¥çš„ä¸¤ä¸ªå®¢æˆ·ç«¯ï¼ŒæŠŠå…¬é’¥é€åˆ°CAè®¤è¯ï¼Œè®¤è¯å®Œæˆåç”¨å¯¹æ–¹çš„å…¬é’¥åŠ å¯†è¯ä¹¦ç‰¹å¾ç ï¼ˆä½¿ç”¨å¯¹æ–¹å…¬é’¥åŠ å¯†æ˜¯ä¸ºäº†ä¿è¯è¯ä¹¦å®Œæ•´æ€§ï¼‰åäº’æ¢è¯ä¹¦ï¼Œå¦‚æœå¯ä»¥ç”¨CAçš„å…¬é’¥è§£å¼€ï¼ˆéªŒè¯ç­¾åï¼‰åŒæ–¹å…¬é’¥çš„åŠ å¯†ç‰¹å¾ç ï¼Œè¯æ˜è¯ä¹¦æ˜¯CAé¢å¸ƒçš„ã€å¯ä¿¡ä»»çš„  </p><hr><p>åŠ å¯†ç®—æ³•å’Œåè®®ï¼š<br>å¯¹ç§°åŠ å¯†ï¼šåŠ å¯†å’Œè§£å¯†ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥<br>ç®—æ³•ï¼š3DESã€AESï¼ˆæ”¯æŒ128 bits ã€192bits ã€256bits ã€384bitsï¼‰<br>ç‰¹æ€§ï¼šåŠ å¯†è§£å¯†ä½¿ç”¨åŒä¸€ä¸ªå¯†é’¥ã€å°†åŸå§‹æ•°æ®åˆ†å‰²æˆå›ºå®šå¤§å°çš„å—ï¼Œé€ä¸ªè¿›è¡ŒåŠ å¯†<br>ç¼ºé™·ï¼šå¯†é’¥è¿‡å¤šï¼Œåˆ†å‘å›°éš¾  </p><p>å…¬é’¥åŠ å¯†ï¼šå¯†é’¥åˆ†ä¸ºå…¬é’¥å’Œä¸ä¹‹é…å¯¹çš„ç§é’¥<br>&emsp;&emsp;å…¬é’¥ï¼šä»ç§é’¥ä¸­æå–äº§ç”Ÿï¼Œå¯ä»¥å…¬å¼€ç»™æ‰€æœ‰äºº<br>&emsp;&emsp;ç§é’¥ï¼šé€šè¿‡ç®—æ³•åˆ›å»ºï¼Œä½¿ç”¨è€…è‡ªå·±ä¿ç•™ï¼Œä»¥ä¿è¯å…¶ç§å¯†æ€§<br>&emsp;&emsp;ç‰¹ç‚¹ï¼šä½¿ç”¨å…¬é’¥åŠ å¯†çš„æ•°æ®ï¼Œåªèƒ½ä½¿ç”¨å¯¹åº”çš„ç§é’¥è§£å¼€<br>&emsp;&emsp;ç”¨é€”ï¼šæ•°å­—ç­¾åï¼Œä¸»è¦ç”¨äºè®©æ¥æ”¶æ–¹ç¡®è®¤å‘é€æ–¹çš„èº«ä»½<br>&emsp;&emsp;å¯†é’¥äº¤æ¢ï¼šå‘é€æ–¹ç”¨å¯¹æ–¹çš„å…¬é’¥åŠ å¯†ä¸€ä¸ªå¯¹ç§°å¯†é’¥ï¼Œå¹¶å‘é€ç»™å¯¹æ–¹<br>&emsp;&emsp;ç®—æ³•ï¼šRSAï¼ˆåªèƒ½ç­¾åï¼Œä¸èƒ½åŠ è§£å¯†ï¼‰ï¼ŒDSAï¼ˆç­¾åå’ŒåŠ è§£å¯†ï¼‰ï¼ŒELGamalï¼ˆå•†ä¸šçš„ï¼‰  </p><p>å•å‘åŠ å¯†ï¼šå³æå–æ•°æ®ç‰¹å¾ç <br>&emsp;&emsp;ç‰¹æ€§ï¼šå®šé•¿è¾“å‡ºã€é›ªå´©æ•ˆåº”<br>&emsp;&emsp;åŠŸèƒ½ï¼šæ ¡éªŒæ•°æ®çš„å®Œæ•´æ€§<br>&emsp;&emsp;ç®—æ³•ï¼šmd5 ã€sha1 ã€sha224 ã€sha256ç­‰  </p><p>å¯†é’¥äº¤æ¢ï¼šIKE<br>&emsp;&emsp;å…¬é’¥åŠ å¯†DH<br>&emsp;&emsp;ECDHï¼ˆæ¤­åœ†æ›²çº¿DHï¼‰ï¼ŒECDHEï¼ˆä¸´æ—¶æ¤­åœ†æ›²çº¿DHï¼‰<br>&emsp;&emsp;DHç®—æ³•çš„å®ç°<br>&emsp;&emsp;&emsp;&emsp;Aï¼šp,g<br>&emsp;&emsp;&emsp;&emsp;Bï¼šp,g<br>&emsp;&emsp;&emsp;&emsp;Aï¼šx&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;ç”Ÿæˆå¯†é’¥x<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;â€”&gt;p^y%g==&gt;B  å°†ä¸xè®¡ç®—å‡ºçš„ç»“æœå‘é€ç»™B<br>&emsp;&emsp;&emsp;&emsp;   Aï¼š(p^y%g)^x=p^yx%g  è®¡ç®—å¾—åˆ°å¯†é’¥<br>&emsp;&emsp;&emsp;&emsp;Bï¼šy&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Bç”Ÿæˆå¯†é’¥y<br>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;â€”&gt;p^y%g==&gt;A  å°†ä¸yè®¡ç®—ç»“æœå‘é€ç»™A<br>&emsp;&emsp;&emsp;&emsp;   Bï¼š(p^x%g)^y=p^xy%g  è®¡ç®—å¾—åˆ°å¯†é’¥  </p><p>PKIï¼šï¼ˆå…¬é’¥åŸºç¡€è®¾æ–½ï¼‰<br>&emsp;&emsp;ç­¾è¯æœºæ„ï¼šCA<br>&emsp;&emsp;æ³¨å†Œæœºæ„ï¼šRA<br>&emsp;&emsp;è¯ä¹¦åŠé”€åˆ—è¡¨ï¼šCRL<br>&emsp;&emsp;è¯ä¹¦å­˜å–åº“ï¼šCB  </p><p>X.509v3ï¼šå®šä¹‰äº†è¯ä¹¦çš„ç»“æ„ä»¥åŠè®¤è¯åè®®æ ‡å‡†<br>&emsp;&emsp;ç‰ˆæœ¬å·<br>&emsp;&emsp;ç­¾åç®—æ³•ID<br>&emsp;&emsp;å‘è¡Œè€…åç§°<br>&emsp;&emsp;æœ‰æ•ˆæœŸã€ç­‰ç­‰  </p><p>SSLï¼šå®‰å…¨å¥—æ¥å­—å±‚<br>&emsp;&emsp;ç”±ç½‘æ™¯å…¬å¸äº1994å¹´å¼€å‘<br>&emsp;&emsp;ç‰ˆæœ¬ï¼šV1.0ï¼ŒV2.0ï¼ŒV3.0  </p><p>TLSï¼šä¼ è¾“å±‚å®‰å…¨ï¼ŒäºŒè€…åŸºæœ¬ä¸Šå…¼å®¹<br>&emsp;&emsp;IETFç»„ç»‡1999å¹´å‘è¡Œ<br>&emsp;&emsp;ç‰ˆæœ¬ï¼šV1.0ï¼ŒV1.1ï¼ŒV1.2ï¼ŒV1.3<br>&emsp;&emsp;ç›®å‰å»ºè®®ä½¿ç”¨çš„æ˜¯V1.2ç‰ˆ<br>&emsp;&emsp;TLSæœ¬èº«ä¹Ÿé‡‡ç”¨äº†åˆ†å±‚è®¾è®¡ï¼š<br>&emsp;&emsp;&emsp;&emsp;1ã€æœ€åº•å±‚ï¼šåŸºç¡€ç®—æ³•åŸè¯­çš„å®ç°ï¼Œaesï¼Œrsaï¼Œmd5<br>&emsp;&emsp;&emsp;&emsp;2ã€å‘ä¸Šä¸€å±‚ï¼šå„ç§ç®—æ³•çš„å®ç°<br>&emsp;&emsp;&emsp;&emsp;3ã€å†å‘ä¸Šä¸€å±‚ï¼šç»„åˆç®—æ³•å®ç°çš„åŠæˆå“<br>&emsp;&emsp;&emsp;&emsp;4ã€æœ€ä¸Šå±‚ï¼šç”¨å„ç§ç»„ä»¶æ‹¼è£…è€Œæˆçš„å„ç§æˆå“å¯†ç å­¦åè®®è½¯ä»¶  </p><p>æ­¤ä¸¤ç§åè®®çš„å¼€æºå®ç°æ–¹å¼ï¼šOpenSSL<br>&emsp;&emsp;OpenSSLåˆ†ä¸ºä¸‰ç§<br>&emsp;&emsp;&emsp;&emsp;libencryptoåº“ï¼šåŠ å¯†è§£å¯†åº“<br>&emsp;&emsp;&emsp;&emsp;libsslåº“ï¼šå®ç°sslå®‰å…¨é€šä¿¡æœºåˆ¶çš„åº“<br>&emsp;&emsp;&emsp;&emsp;opensslï¼šå¤šç”¨é€”å‘½ä»¤è¡Œå·¥å…·  </p><p>SSLä¼šè¯ä¸»è¦æœ‰ä¸‰æ­¥ï¼š<br>&emsp;&emsp;ä¸€ã€å®¢æˆ·ç«¯å‘æœåŠ¡ç«¯ç´¢è¦å¹¶éªŒè¯è¯ä¹¦<br>&emsp;&emsp;äºŒã€åŒæ–¹åå•†ç”Ÿæˆâ€œä¼šè¯å¯†é’¥â€<br>&emsp;&emsp;ä¸‰ã€åŒæ–¹é‡‡ç”¨â€œä¼šè¯å¯†é’¥â€è¿›è¡ŒåŠ å¯†é€šä¿¡  </p><p>SSLæ¡æ‰‹<br>&emsp;&emsp;ç¬¬ä¸€é˜¶æ®µï¼šå®¢æˆ·ç«¯è¯·æ±‚<br>&emsp;&emsp;&emsp;&emsp;æ”¯æŒçš„åè®®ç‰ˆæœ¬ï¼Œå¦‚tls1.2<br>&emsp;&emsp;&emsp;&emsp;å®¢æˆ·ç«¯ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œç¨åç”¨äºç”Ÿæˆâ€œä¼šè¯å¯†é’¥â€<br>&emsp;&emsp;&emsp;&emsp;æ”¯æŒçš„åŠ å¯†ç®—æ³•ï¼Œå¦‚AESã€3DESã€RSA<br>&emsp;&emsp;&emsp;&emsp;æ”¯æŒçš„å‹ç¼©ç®—æ³•<br>&emsp;&emsp;ç¬¬äºŒé˜¶æ®µï¼šæœåŠ¡ç«¯å›åº”<br>&emsp;&emsp;&emsp;&emsp;ç¡®è®¤ä½¿ç”¨çš„åŠ å¯†é€šä¿¡åè®®ç‰ˆæœ¬ï¼Œå¦‚tls1.2<br>&emsp;&emsp;&emsp;&emsp;æœåŠ¡å™¨ç«¯ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ï¼Œç¨åç”¨äºç”Ÿæˆâ€œä¼šè¯å¯†é’¥â€<br>&emsp;&emsp;&emsp;&emsp;ç¡®è®¤ä½¿ç”¨çš„åŠ å¯†æ–¹æ³•<br>&emsp;&emsp;&emsp;&emsp;æœåŠ¡å™¨è¯ä¹¦<br>&emsp;&emsp;ç¬¬ä¸‰é˜¶æ®µï¼š<br>&emsp;&emsp;&emsp;&emsp;éªŒè¯æœåŠ¡å™¨è¯ä¹¦ï¼Œåœ¨ç¡®è®¤æ— è¯¯åå–å‡ºå…¶å…¬é’¥ï¼ˆå‘è¯æœºæ„ã€è¯ä¹¦çš„å®Œæ•´æ€§ã€è¯ä¹¦æŒæœ‰è€…ã€æœ‰æ•ˆæœŸã€åŠé”€åˆ—è¡¨ï¼‰<br>&emsp;&emsp;&emsp;&emsp;éªŒè¯åå‘é€ä¸€ä¸‹ä¿¡æ¯ç»™æœåŠ¡ç«¯ä¸€ä¸ªéšæœºæ•°ï¼ˆç›®çš„æ˜¯ä¸ºäº†å®‰å…¨ï¼‰<br>&emsp;&emsp;&emsp;&emsp;ç¼–ç å˜æ›´é€šçŸ¥ï¼Œè¡¨ç¤ºéšåçš„ä¿¡æ¯éƒ½å°†ä½¿ç”¨åŒæ–¹å•†å®šçš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥å‘é€<br>&emsp;&emsp;&emsp;&emsp;å®¢æˆ·ç«¯æ¡æ‰‹ç»“æŸé€šçŸ¥&emsp;&emsp;<br>&emsp;&emsp;ç¬¬å››é˜¶æ®µï¼š<br>&emsp;&emsp;&emsp;&emsp;æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„ç¬¬ä¸‰ä¸ªéšæœºæ•°åï¼Œè®¡ç®—ç”Ÿæˆæœ¬æ¬¡ä¼šè¯æ‰€ç”¨åˆ°çš„â€œä¼šè¯å¯†é’¥â€<br>&emsp;&emsp;&emsp;&emsp;å‘å®¢æˆ·ç«¯å‘é€å¦‚ä¸‹ä¿¡æ¯ï¼š<br>&emsp;&emsp;&emsp;&emsp;ç¼–ç å˜æ›´é€šçŸ¥ï¼Œè¡¨ç¤ºéšåçš„ä¿¡æ¯éƒ½å°†ä½¿ç”¨åŒæ–¹å•†å®šçš„åŠ å¯†æ–¹æ³•å’Œå¯†é’¥å‘é€æœåŠ¡ç«¯æ¡æ‰‹ç»“æŸé€šçŸ¥  </p><p>å¯¹ç§°åŠ å¯†ï¼š<br>&emsp;&emsp;åŠ å¯†ï¼š<code>openssl enc [-e] -des3 [-a -salt] -in file -out file.m</code><br><img src="/medias/drawing-bed/openssl/0.png"><br>&emsp;&emsp;è§£å¯†ï¼š<code>openssl enc -d -des3 [-a -salt] -in file.m -out file1</code><br><img src="/medias/drawing-bed/openssl/1.png"><br>é€‰é¡¹ï¼š<br>&emsp;&emsp;<code>-e</code>ï¼šåŠ å¯†ä½¿ç”¨<br>&emsp;&emsp;<code>-d</code>ï¼šè§£å¯†ä½¿ç”¨<br>&emsp;&emsp;<code>-des3</code>ï¼šåŠ å¯†ç®—æ³•<br>&emsp;&emsp;<code>-a</code>ï¼šæ–‡æœ¬ç¼–ç æ ¼å¼<br>&emsp;&emsp;<code>-salt</code>ï¼šåŠ ç›  </p><p>å•å‘åŠ å¯†ï¼š<br>&emsp;&emsp;<code>openssl dgst -md5 file</code>ï¼ˆè·å–æ–‡ä»¶çš„md5ç‰¹å¾ç ï¼‰<br><img src="/medias/drawing-bed/openssl/2.png"><br>&emsp;&emsp;<code>md5sum file</code>ï¼ˆé‡Šä¹‰åŒä¸Šï¼‰<br><img src="/medias/drawing-bed/openssl/3.png"><br>&emsp;&emsp;ç®—æ³•md5ã€sha1ã€sha224ç­‰<br><img src="/medias/drawing-bed/openssl/4.png"></p><p>ç”Ÿæˆç”¨æˆ·å¯†ç ï¼š<br>&emsp;&emsp;<code>openssl passwd -1 [-salt az]</code>ï¼ˆ-1æŒ‡å®šmd5ï¼Œ-saltåŠ ç›ï¼Œå³éšæœºæ•°ï¼‰<br><img src="/medias/drawing-bed/openssl/5.png"><br><img src="/medias/drawing-bed/openssl/6.png"><br>ï¼ˆä¸åŠ ç›ï¼Œè¾“å…¥åŒæ ·çš„å¯†ç ï¼Œæ‰“å°å‡ºçš„ç»“æœä¸åŒï¼‰  </p><p>ç”Ÿæˆéšæœºæ•°ï¼š<br>&emsp;&emsp;<code>openssl rand -hex #</code>ï¼ˆç”Ÿæˆ16è¿›åˆ¶éšæœºæ•°ï¼Œæ‰“å°å­—èŠ‚æ•°æ˜¯ç»™å®šçš„æ•°å­—çš„2å€ï¼‰<br><img src="/medias/drawing-bed/openssl/7.png"><br>ï¼ˆç»™åŒæ ·çš„æ•°ï¼Œæ¯æ¬¡æ‰“å°å‡ºçš„ç»“æœä¸åŒï¼‰<br>&emsp;&emsp;<code>openssl rand -base64 #</code>ï¼ˆä½¿ç”¨base64ç¼–ç ï¼‰<br><img src="/medias/drawing-bed/openssl/8.png"><br>ï¼ˆæ‰“å°ç»“æœä¸º4Nï¼Œä¸è¶³4Nç”¨ = å·è¡¥ä½ï¼Œå‘½ä»¤è¡Œæ¯æŒ‰é¡ºåº+3æ¬¡ï¼Œæ‰“å°ç»“æœå¾ªç¯ä¸€æ¬¡ï¼Œå³æ‰“å°4(N+1ï¼‰ä½ï¼Œé‡Šä¹‰ï¼šå‘½ä»¤è¡Œç»™3N+1ï¼Œæ‰“å°ä¸¤ä¸ª = ï¼›å‘½ä»¤è¡Œç»™3N+2ï¼Œæ‰“å°ä¸€ä¸ª = ï¼›å‘½ä»¤è¡Œç»™3N+3ï¼Œæ‰“å°é›¶ä¸ª  = ï¼‰<br>ç”Ÿæˆç§é’¥ï¼š<br>&emsp;&emsp;<code>(umask 077;openssl genrsa -out file.s)</code>æˆ–<code>(umask 077;openssl genrsa -out file.s -des 1024)</code>åŠ å¯†çš„ç§é’¥ï¼ˆæ‹¬å·æ˜¯ä¸ºäº†å’Œå¤–è¾¹çš„shellç¯å¢ƒéš”ç¦»,ä½¿ç»™å®šçš„umaskå€¼æœ‰æ•ˆï¼‰<br><img src="/medias/drawing-bed/openssl/9.png"><br><img src="/medias/drawing-bed/openssl/10.png"><br>æå–å…¬é’¥ï¼š<br>&emsp;&emsp;<code>openssl rsa -in file.s -pubout -out file.g</code><br>é€‰é¡¹ï¼š<br>&emsp;&emsp;<code>-pubout</code>ï¼šæŒ‡æ˜æå–å…¬é’¥<br><img src="/medias/drawing-bed/openssl/11.png"></p><p>å…¬é’¥åŠ å¯†ï¼š<br>&emsp;&emsp;<code>openssl rsautl -encrypt -in testfile -inkey file.g -pubin -out tsetfile.m</code><br>ç§é’¥è§£å¯†ï¼š<br>&emsp;&emsp;<code>openssl rsautl -decrypt -in testfile.m -inkey file.s -out file2</code><br>é€‰é¡¹ï¼š<br>&emsp;&emsp;<code>rsautl</code>ï¼šç®—æ³•<br>&emsp;&emsp;<code>-encrypt</code>ï¼šåŠ å¯†ä½¿ç”¨<br>&emsp;&emsp;<code>-decrypt</code>ï¼šè§£å¯†ä½¿ç”¨<br>&emsp;&emsp;<code>-inkey</code>ï¼šæŒ‡å®šå¯†é’¥<br>&emsp;&emsp;<code>-pubin</code>ï¼šè¡¨æ˜æ˜¯çº¯å…¬é’¥åŠ å¯†<br><img src="/medias/drawing-bed/openssl/12.png"></p><p>CAï¼š<br>&emsp;&emsp;å…¬å…±ä¿¡ä»»çš„CAï¼Œç§æœ‰CA<br>&emsp;&emsp;å»ºç«‹ç§æœ‰CAï¼Œopensslå‘½ä»¤ï¼š<br>&emsp;&emsp;é…ç½®æ–‡ä»¶ï¼š<code>/etc/pki/tls/openssl.cnf</code><br>åœ¨ç¡®å®šé…ç½®ä¸ºCAçš„æœåŠ¡å™¨ä¸Šç”Ÿæˆä¸€ä¸ªè‡ªç­¾è¯ä¹¦ï¼Œå¹¶ä¸ºCAæä¾›æ‰€éœ€è¦çš„ç›®å½•åŠæ–‡ä»¶å³å¯<br>å®ç°æ­¥éª¤ï¼š<br>&emsp;&emsp;1.ç”Ÿæˆç§é’¥ï¼š<br>&emsp;&emsp;<code>(umask 077;openssl genrsa -out /etc/pki/CA/private/cakey.pem 4096)</code><br><img src="/medias/drawing-bed/openssl/13.png"><br>&emsp;&emsp;2.ç”Ÿæˆè‡ªç­¾è¯ä¹¦ï¼š<br>&emsp;&emsp;<code>openssl req -new -x509 -key /etc/pki/CA/private/cakey.pem -out /etc/pki/CA/cacert.pem -days 365</code><br><img src="/medias/drawing-bed/openssl/14.png"><br>&emsp;&emsp;é€‰é¡¹ï¼š<br>&emsp;&emsp;&emsp;&emsp;<code>req</code>ï¼šè¯ä¹¦è¯·æ±‚å³è¯ä¹¦ç”Ÿæˆå·¥å…·<br>&emsp;&emsp;&emsp;&emsp;<code>-new</code>ï¼šç”Ÿæˆæ–°è¯ä¹¦ç­¾ç½²è¯·æ±‚<br>&emsp;&emsp;&emsp;&emsp;<code>-x509</code>ï¼šç”Ÿæˆè‡ªç­¾æ ¼å¼çš„è¯ä¹¦ï¼Œä¸“ç”¨äºåˆ›å»ºç§æœ‰CAæ—¶<br>&emsp;&emsp;&emsp;&emsp;<code>-key</code>ï¼šç”Ÿæˆè¯·æ±‚æ—¶ç”¨åˆ°çš„ç§æœ‰æ–‡ä»¶è·¯å¾„<br>&emsp;&emsp;&emsp;&emsp;<code>-out</code>ï¼šç”Ÿæˆçš„è¯·æ±‚æ–‡ä»¶è·¯å¾„ï¼›å¦‚æœè‡ªç­¾æ“ä½œå°†ç›´æ¥ç”Ÿæˆç­¾ç½²è¿‡çš„è¯ä¹¦<br>&emsp;&emsp;&emsp;&emsp;<code>-days</code>ï¼šè¯ä¹¦çš„æœ‰æ•ˆæ—¶é•¿ï¼Œå•ä½ä¸ºå¤©<br>&emsp;&emsp;3.ä¸ºCAæä¾›æ‰€éœ€çš„ç›®å½•åŠæ–‡ä»¶<br>&emsp;&emsp;&emsp;&emsp;<code>mkdir -pv /etc/pki/CA/&#123;certs,crl,newcerts&#125;</code><br>&emsp;&emsp;&emsp;&emsp;<code>touch /etc/pki/CA/&#123;serial,index.txt&#125;</code><br>&emsp;&emsp;&emsp;&emsp;<code>echo 01 &gt; /etc/pki/CA/serial</code><br><img src="/medias/drawing-bed/openssl/15.png"></p><p>è¦ç”¨åˆ°è¯ä¹¦è¿›è¡Œå®‰å…¨é€šä¿¡çš„æœåŠ¡å™¨ï¼Œéœ€è¦å‘CAè¯·æ±‚ç­¾ç½²è¯ä¹¦<br>&emsp;&emsp;æ­¥éª¤ï¼šï¼ˆä»¥httpdä¸ºä¾‹ï¼‰<br>&emsp;&emsp;4.ç”¨åˆ°è¯ä¹¦çš„ä¸»æœºç”Ÿæˆç§é’¥ï¼ˆè¦è®¤è¯æœºæ„ï¼‰<br>&emsp;&emsp;<code>mkdir /etc/httpd/ssl;cd /etc/httpd/ssl</code><br>&emsp;&emsp;<code>(umask 077;openssl genrsa -out /etc/httpd/ssl/httpd.key 2048)</code><br><img src="/medias/drawing-bed/openssl/16.png"><br>&emsp;&emsp;5.ç”Ÿæˆè¯ä¹¦ç­¾ç½²è¯·æ±‚ï¼ˆè¦è®¤è¯æœºæ„ï¼‰<br>&emsp;&emsp;<code>openssl req -new -key /etc/httpd/ssl/httpd.key -out /etc/httpd/ssl/httpd.csr -days 365</code><br><img src="/medias/drawing-bed/openssl/17.png"><br>&emsp;&emsp;6.å°†è¯·æ±‚é€šè¿‡å¯é çš„æ–¹å¼å‘é€ç»™CAä¸»æœºï¼ˆè¦è®¤è¯æœºæ„ï¼‰<br>&emsp;&emsp;<code>scp /etc/httpd/ssl/httpd.csr root@ip:/tmp/</code><br><img src="/medias/drawing-bed/openssl/18.png"><br>&emsp;&emsp;7.åœ¨CAä¸»æœºä¸Šç­¾ç½²è¯ä¹¦<br>&emsp;&emsp;<code>openssl ca -in /tmp/httpd.csr -out /etc/pki/CA/certs/httpd.crt -days 365</code><br><img src="/medias/drawing-bed/openssl/19.png"><br><img src="/medias/drawing-bed/openssl/20.png"></p><p>æŸ¥çœ‹è¯ä¹¦ä¸­çš„ä¿¡æ¯ï¼š<br>&emsp;&emsp;<code>openssl x509 -in /etc/pki/CA/certs/httpd.crt/ -noout -subject</code><br><img src="/medias/drawing-bed/openssl/21.png"></p><p>åŠé”€è¯ä¹¦ï¼š<br>&emsp;&emsp;æ­¥éª¤ï¼š<br>&emsp;&emsp;1.å®¢æˆ·ç«¯è·å–è¦åŠé”€çš„è¯ä¹¦çš„seralï¼ˆåœ¨ä½¿ç”¨è¯ä¹¦çš„ä¸»æœºä¸Šæ‰§è¡Œï¼‰<br>&emsp;&emsp;<code>openssl x509 -in /etc/pki/CA/certs/httpd.crt -noout -serial -subject</code>ï¼ˆå¯çœç•¥ï¼‰<br>&emsp;&emsp;2.CAä¸»æœºåŠé”€è¯ä¹¦ï¼š<br>&emsp;&emsp;&emsp;&emsp;å…ˆæ ¹æ®å®¢æˆ·æäº¤çš„serialå’Œsubjectä¿¡æ¯ï¼Œå¯¹æ¯”å…¶ä¸æœ¬æœºæ•°æ®åº“index.txtä¸­å­˜å‚¨çš„æ˜¯å¦ä¸€è‡´<br>&emsp;&emsp;åŠé”€ï¼š<br>&emsp;&emsp;&emsp;&emsp;<code>openssl ca -revoke /etc/pki/CA/newcerts/è¯ä¹¦åºåˆ—å·.pem</code><br><img src="/medias/drawing-bed/openssl/22.png"><br>&emsp;&emsp;3.ç”ŸæˆåŠé”€è¯ä¹¦çš„åŠé”€ç¼–å·ï¼ˆåªåœ¨ç¬¬ä¸€æ¬¡åŠé”€è¯ä¹¦æ—¶æ‰§è¡Œï¼‰<br>&emsp;&emsp;&emsp;&emsp;<code>echo 01 &gt; /etc/pki/CA/crlnumber</code><br><img src="/medias/drawing-bed/openssl/23.png"><br>&emsp;&emsp;4.æ›´æ–°è¯ä¹¦åŠé”€åˆ—è¡¨<br>&emsp;&emsp;&emsp;&emsp;<code>openssl ca -gencrl -out thisca.crl</code><br><img src="/medias/drawing-bed/openssl/24.png"><br>&emsp;&emsp;&emsp;&emsp;æŸ¥çœ‹crlæ–‡ä»¶ï¼š<br>&emsp;&emsp;&emsp;&emsp;<code>openssl crl -in thisca.crl -noout -text</code><br><img src="/medias/drawing-bed/openssl/25.png"><br><code>$( )</code> å’Œ <code>``</code> å¯ä»¥è¯»å–é‡Œé¢çš„å‘½ä»¤ç»“æœ  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>awk</title>
      <link href="/posts/c137.html"/>
      <url>/posts/c137.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="awkä»‹ç»"><a href="#awkä»‹ç»" class="headerlink" title="awkä»‹ç»"></a>awkä»‹ç»</h1><p>awkæ˜¯ä¸€ç§å¤„ç†æ–‡æœ¬çš„ç¼–ç¨‹è¯­è¨€å·¥å…·ï¼ŒæŠ¥å‘Šç”Ÿæˆå™¨ï¼Œæ ¼å¼åŒ–æ–‡æœ¬è¾“å‡º<br>ç‰ˆæœ¬ï¼š<code>new awk</code>ï¼ˆ<code>nawk</code>ï¼‰ï¼Œ<code>GUN awk</code>ï¼ˆ<code>gawk</code>ï¼‰<br>gawk - æ¨¡å¼æ‰«æå’Œå¤„ç†è¯­è¨€  </p><h1 id="awkåŸºæœ¬ç”¨æ³•"><a href="#awkåŸºæœ¬ç”¨æ³•" class="headerlink" title="awkåŸºæœ¬ç”¨æ³•"></a>awkåŸºæœ¬ç”¨æ³•</h1><p><code>awk [é€‰é¡¹] &#39;program&#39; -v var=value file</code>ï¼ˆ<code>-v</code>é€‰é¡¹ï¼Œè‡ªå®šä¹‰å˜é‡varï¼‰<br><code>awk [é€‰é¡¹] -f programfile</code>ï¼ˆå°†<code>program</code>å†™å…¥æ–‡ä»¶ä¸­ï¼‰<code>var=value file</code><br><code>awk [é€‰é¡¹] &#39;BEGIN&#123;åŠ¨ä½œ;å¤„ç†å†…å®¹&#125; æ¨¡å¼&#123;åŠ¨ä½œ;å¤„ç†å†…å®¹&#125; END&#123;åŠ¨ä½œ;å¤„ç†å†…å®¹&#125;&#39; æ–‡ä»¶å</code>  </p><p>awkç¨‹åºé€šå¸¸ç”±ï¼š<code>BEGINè¯­å¥å—</code>ã€èƒ½å¤Ÿä½¿ç”¨æ¨¡å¼åŒ¹é…çš„<code>é€šç”¨è¯­å¥å—</code>ã€<code>ENDè¯­å¥å—</code>ï¼Œå…±ä¸‰éƒ¨åˆ†ç»„æˆ<br>programï¼ˆç¨‹åºï¼‰é€šå¸¸æ˜¯åœ¨å•å¼•å·æˆ–åŒå¼•å·ä¸­  </p><p>é€‰é¡¹ï¼š<br><code>-F</code>æŒ‡æ˜è¾“å…¥æ—¶ç”¨åˆ°çš„å­—æ®µåˆ†éš”ç¬¦<br><code>-v var=value</code>è‡ªå®šä¹‰å˜é‡  </p><p>åŸºæœ¬æ ¼å¼ï¼š<code>awk [options] &#39;program&#39; file</code><br>programï¼š<code>pattern&#123;action;è¦å¤„ç†çš„å†…å®¹&#125;</code>  </p><h2 id="patternå’Œaction"><a href="#patternå’Œaction" class="headerlink" title="patternå’Œaction"></a>patternå’Œaction</h2><p><code>pattern</code>éƒ¨åˆ†å†³å®šåŠ¨ä½œè¯­å¥ä½•æ—¶è§¦å‘äº‹ä»¶<code>BEGIN</code>ï¼Œ<code>END</code>ï¼Œ<code>æ­£åˆ™è¡¨è¾¾å¼</code>ï¼ˆæ¨¡å¼ï¼‰<br><code>action statements</code>å¯¹æ•°æ®è¿›è¡Œå¤„ç†ï¼Œæ”¾åœ¨ <code>&#123; &#125;</code> å†…æŒ‡æ˜<code>print</code>ï¼Œ<code>printf</code>  </p><h2 id="åˆ†éš”ç¬¦ã€åŸŸå’Œè®°å½•"><a href="#åˆ†éš”ç¬¦ã€åŸŸå’Œè®°å½•" class="headerlink" title="åˆ†éš”ç¬¦ã€åŸŸå’Œè®°å½•"></a>åˆ†éš”ç¬¦ã€åŸŸå’Œè®°å½•</h2><p>awkæ‰§è¡Œæ—¶ï¼Œç”±åˆ†éš”ç¬¦åˆ†éš”çš„å­—æ®µ<code>åŸŸ</code>æ ‡è®°<code>$1</code>,<code>$2</code>,<code>$3...</code> <code>$n</code>ç§°ä¸º<code>åŸŸæ ‡è¯†</code>ï¼Œ<code>$0</code>ä¸º<code>æ‰€æœ‰åŸŸ</code>ï¼Œæ³¨æ„ï¼šå’Œ<code>shell</code>ä¸­å˜é‡<code>$</code>ç¬¦å«ä¹‰ä¸åŒ<br>æ–‡ä»¶çš„æ¯ä¸€è¡Œç§°ä¸ºè®°å½•<br>çœç•¥<code>action</code>è¡Œï¼Œåˆ™é»˜è®¤æ‰§è¡Œ<code>print $0</code>ï¼ˆæ‰“å°æ‰€æœ‰ï¼‰çš„æ“ä½œ  </p><h2 id="awkå·¥ä½œåŸç†"><a href="#awkå·¥ä½œåŸç†" class="headerlink" title="awkå·¥ä½œåŸç†"></a>awkå·¥ä½œåŸç†</h2><p>ç¬¬ä¸€æ­¥ï¼šæ‰§è¡Œ<code>BEGIN&#123;action;å¤„ç†å†…å®¹&#125;</code>è¯­å¥å—ä¸­çš„è¯­å¥ï¼ˆå¯çœï¼‰<br>ç¬¬äºŒæ­¥ï¼šä»æ–‡ä»¶æˆ–æ ‡å‡†è¾“å…¥ï¼ˆ<code>stdin</code>ï¼‰è¯»å–ä¸€è¡Œï¼Œç„¶åæ‰§è¡Œ<code>pattern&#123;action;å¤„ç†å†…å®¹&#125;</code>è¯­å¥å—ï¼Œå®ƒé€è¡Œæ‰«ææ–‡ä»¶ï¼Œä»ç¬¬ä¸€è¡Œåˆ°æœ€åä¸€è¡Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œç›´åˆ°æ–‡ä»¶å…¨éƒ¨è¢«è¯»å–å®Œæ¯•<br>ç¬¬ä¸‰æ­¥ï¼šå½“è¯»è‡³è¾“å…¥æµæœ«å°¾æ—¶ï¼Œæ‰§è¡Œ<code>END&#123;action;å¤„ç†å†…å®¹&#125;</code>è¯­å¥å—<br><code>BEGIN</code>è¯­å¥å—åœ¨<code>awk</code>å¼€å§‹ä»è¾“å…¥æµä¸­è¯»å–ä¹‹å‰è¢«æ‰§è¡Œï¼Œè¿™æ˜¯ä¸€ä¸ªå¯é€‰çš„è¯­å¥å—ï¼Œæ¯”å¦‚å˜é‡åˆå§‹åŒ–ã€æ‰“å°è¾“å‡ºè¡¨æ ¼çš„è¡¨å¤´ç­‰è¯­å¥é€šå¸¸å†™åœ¨<code>BEGIN</code>è¯­å¥å—ä¸­<br><code>END</code>è¯­å¥å—åœ¨<code>awk</code>ä»è¾“å…¥æµä¸­è¯»å–å®Œæ‰€æœ‰çš„è¡Œä¹‹åå³å¯è¢«æ‰§è¡Œï¼Œæ¯”å¦‚æ‰“å°æ‰€æœ‰è¡Œçš„åˆ†æç»“æœè¿™ç±»ä¿¡æ¯æ±‡æ€»éƒ½æ˜¯åœ¨<code>END</code>è¯­å¥å—ä¸­å®Œæˆï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯é€‰è¯­å¥å—<br><code>pattern</code>è¯­å¥å—ä¸­çš„é€šç”¨å‘½ä»¤æ˜¯æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œä¹Ÿæ˜¯å¯é€‰çš„ï¼Œå¦‚æœæ²¡æœ‰æä¾›<code>pattern</code>è¯­å¥å—ï¼Œåˆ™é»˜è®¤æ‰§è¡Œ<code>&#123;print&#125;</code>ï¼Œå³æ‰“å°æ¯ä¸€ä¸ªè¯»å–åˆ°çš„è¡Œï¼Œ<code>awk</code>è¯»å–çš„æ¯ä¸€è¡Œéƒ½ä¼šæ‰§è¡Œè¯¥è¯­å¥å—<br><code>print</code>æ ¼å¼ï¼š<code>print item1ï¼Œitem2...</code>ï¼ˆ<code>item</code>ï¼šæ¡ç›®ï¼‰  </p><p>è¦ç‚¹ï¼š  </p><ol><li>é€—å·åˆ†éš”ç¬¦  </li><li>è¾“å‡ºçš„å„<code>item</code>å¯ä»¥æ˜¯<code>å­—ç¬¦ä¸²</code>ï¼Œä¹Ÿå¯ä»¥æ˜¯<code>æ•°å€¼</code>ï¼›å½“å‰è®°å½•çš„å­—æ®µã€å˜é‡æˆ–<code>awk</code>çš„è¡¨è¾¾å¼  </li><li>å¦‚çœç•¥<code>item</code>ï¼Œç›¸å½“äº<code>print $0</code>  </li></ol><p>ç¤ºä¾‹ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk '&#123;print "hello,awk"&#125;'</span>hello,awk<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk '&#123;print&#125;' /etc/passwd  </span>root:x:0:0:root:/root:/bin/bashbin:x:1:1:bin:/bin:/sbin/nologindaemon:x:2:2:daemon:/sbin:/sbin/nologin<span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk '&#123;print "###"&#125;' /etc/passwd  </span><span class="token comment">###</span><span class="token comment">###</span><span class="token comment">###</span><span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;print $1&#125;' /etc/passwd  </span>rootbindaemon<span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;print $0&#125;' /etc/passwd  </span>root:x:0:0:root:/root:/bin/bashbin:x:1:1:bin:/bin:/sbin/nologindaemon:x:2:2:daemon:/sbin:/sbin/nologin<span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;print $1"\t"$3&#125;' /etc/passwd  </span>root<span class="token number">0</span>bin<span class="token number">1</span>daemon<span class="token number">2</span><span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># tail -3 /etc/fstab | awk '&#123;print $2,$4&#125;' </span>/ defaults/boot defaultsswap defaults<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="awkå˜é‡"><a href="#awkå˜é‡" class="headerlink" title="awkå˜é‡"></a>awkå˜é‡</h1><p>å˜é‡ï¼šå†…ç½®å’Œè‡ªå®šä¹‰å˜é‡<br>FSï¼šæŒ‡å®šè¾“å…¥åˆ†éš”ç¬¦ï¼Œä¸æŒ‡å®šé»˜è®¤ä¸ºç©ºç™½å­—ç¬¦  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -v FS=':' '&#123;print $1,$3,$7&#125;' /etc/passwd  </span>root <span class="token number">0</span> /bin/bashbin <span class="token number">1</span> /sbin/nologindaemon <span class="token number">2</span> /sbin/nologin<span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;print $1,$3,$7&#125;' /etc/passwd  </span>root <span class="token number">0</span> /bin/bashbin <span class="token number">1</span> /sbin/nologindaemon <span class="token number">2</span> /sbin/nologin<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>OFSï¼šä¸ºè¾“å‡ºå­—æ®µæŒ‡å®šåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸ºç©ºç™½å­—ç¬¦  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -v FS=':' -v OFS=':' '&#123;print $1,$3,$7&#125;' /etc/passwd  </span>root:0:/bin/bashbin:1:/sbin/nologindaemon:2:/sbin/nologin<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>RSï¼šè¾“å…¥è¡Œåˆ†éš”ç¬¦ï¼ŒæŒ‡å®šè¾“å…¥æ—¶çš„æ¢è¡Œç¬¦ï¼ŒåŸæ¢è¡Œç¬¦ä»ç„¶æœ‰æ•ˆ  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -v RS='0' '&#123;print&#125;' /etc/passwd  </span>root:x:<span class="token builtin class-name">:</span>:root:/root:/bin/bash<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ORSï¼šè¾“å‡ºæ—¶ç”¨æŒ‡å®šç¬¦å·ä»£æ›¿æ¢è¡Œç¬¦  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -v RS=':' -v ORS='##' '&#123;print&#125;' /etc/passwd   # æŒ‡å®šï¼šä¸ºæ¢è¡Œç¬¦ï¼Œç”¨##æ›¿æ¢å‰é¢çš„æ¢è¡Œç¬¦</span>root<span class="token comment">##x##0##0##root##/root##/bin/bash</span>bin<span class="token comment">##x##1##1##bin##/bin##/sbin/nologin</span>daemon<span class="token comment">##x##2##2##daemon##/sbin##/sbin/nologin </span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>NFï¼šå­—æ®µæ•°é‡ï¼ˆæŒ‡æ˜åˆ†å‰²ç¬¦ï¼Œæ¯è¡Œåˆ†å‡ æ®µï¼‰  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;print NF&#125;' /etc/fstab   # å¼•ç”¨å†…ç½®å˜é‡ä¸ç”¨$  </span><span class="token number">0</span><span class="token number">1</span><span class="token number">1</span><span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;print $(NF-1)&#125;' /etc/passwd   # ä»¥ï¼šä¸ºåˆ†å‰²ç¬¦ï¼Œæ‰“å°å€’æ•°ç¬¬äºŒåŸŸ </span>/root/bin/sbin<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>NRï¼šæ‰“å°è¡Œå·  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk '&#123;print NR&#125;' /etc/fstab ; awk END'&#123;print NR&#125;' /etc/fstab  </span><span class="token number">1</span><span class="token number">2</span><span class="token number">3</span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>FNRï¼šå„æ–‡ä»¶åˆ†åˆ«è®¡æ•°ï¼Œè¡Œå·ï¼ˆç«–ç€æ˜¾ç¤ºè¡Œå·ï¼‰  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk '&#123;print FNR&#125;' /etc/fstab /etc/inittab   # å…ˆè®¡æ•°fstabå†ä»å¤´è®¡æ•°inittab  </span><span class="token number">1</span><span class="token number">2</span><span class="token number">3</span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>FILENAMEï¼šå½“å‰æ–‡ä»¶å  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk '&#123;print FILENAME&#125;' /etc/fstab  </span>/etc/fstab/etc/fstab/etc/fstab<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ARGCï¼šå‘½ä»¤è¡Œå‚æ•°çš„ä¸ªæ•°  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk '&#123;print ARGC&#125;' /etc/fstab /etc/inittab  </span><span class="token number">3</span><span class="token number">3</span><span class="token number">3</span><span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print ARGC&#125;' /etc/fstab /etc/inittab  </span><span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ARGVï¼šæ•°ç»„ï¼Œä¿å­˜çš„æ˜¯å‘½ä»¤è¡Œæ‰€ç»™å®šçš„å„å‚æ•°ï¼ˆ0ä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ1ä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨ï¼‰  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print ARGV[0]&#125;' /etc/fstab /etc/inittab  </span><span class="token function">awk</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print ARGV[1]&#125;' /etc/fstab /etc/inittab  </span>/etc/fstab<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è‡ªå®šä¹‰å˜é‡"><a href="#è‡ªå®šä¹‰å˜é‡" class="headerlink" title="è‡ªå®šä¹‰å˜é‡"></a>è‡ªå®šä¹‰å˜é‡</h2><ol><li><code>-v var=value</code>å˜é‡ååŒºåˆ†å¤§å°å†™  </li><li>åœ¨<code>program</code>ä¸­ç›´æ¥å®šä¹‰  </li></ol><p>ç¤ºä¾‹ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -v test='hello gawk' '&#123;print tast&#125;' /etc/fstab  </span><span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -v test='hello gawk' 'BEGIN&#123;print test&#125;'  </span>hello <span class="token function">gawk</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;test="hello gawk";print test&#125;'  </span>hello <span class="token function">gawk</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="awkæ ¼å¼åŒ–"><a href="#awkæ ¼å¼åŒ–" class="headerlink" title="awkæ ¼å¼åŒ–"></a>awkæ ¼å¼åŒ–</h1><p><code>printf</code>å‘½ä»¤<br>æ ¼å¼è¾“å‡ºï¼š<code>printf &quot;FORMAT&quot;,item1,item2â€¦</code><br>å¿…é¡»æŒ‡å®š<code>FORMAT</code>ï¼ˆæ ¼å¼ï¼‰<br>ä¸ä¼šè‡ªåŠ¨æ¢è¡Œï¼Œéœ€è¦æ˜¾ç¤ºç»™å‡ºæ¢è¡Œæ§åˆ¶ç¬¦ <code>\n</code><br><code>FORMAT</code>ä¸­éœ€è¦åˆ†åˆ«ä¸ºåé¢æ¯ä¸ª<code>item</code>æŒ‡å®šæ ¼å¼ç¬¦<br>æ ¼å¼ç¬¦ï¼šä¸<code>item</code>ä¸€ä¸€å¯¹åº”<br><code>%d</code>,<code>%i</code>ï¼šæ˜¾ç¤ºåè¿›åˆ¶æ•´æ•°<br><code>%s</code>ï¼šæ˜¾ç¤ºå­—ç¬¦ä¸²<br><code>%%</code>ï¼šæ˜¾ç¤º<code>%</code>è‡ªèº«  </p><p>ä¿®é¥°ç¬¦<br><code>#</code>ï¼šæ‰“å°<code>#</code>ä¸ªå­—ç¬¦å®½åº¦ï¼ˆå¯ä»¥ä¸ºå°æ•°ï¼‰<br><code>-</code>ï¼šå·¦å¯¹é½<code>%-15s</code>ï¼ˆé»˜è®¤ä¸å¸¦ <code>-</code> å³å¯¹é½ï¼‰<br><code>+</code>ï¼šæ˜¾ç¤ºæ•°å€¼çš„æ­£è´Ÿç¬¦å·<code>%+d</code>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;printf "%s",$1&#125;' /etc/passwd  </span>rootbindaemonadmlpsyncshutdownhaltmailoperatorgamesftpnobodydbussystemd-coredumpsystemd-resolvetsspolkitdlibstoragemgmtcockpit-wscockpit-wsinstancesssdsshdchronyrngdunboundnginx<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment">#   </span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;printf "USERNAME:%s\n",$1&#125;' /etc/passwd  </span>USERNAME:rootUSERNAME:binUSERNAME:daemon<span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;printf "USERNAME:%s UID:%d\n",$1,$3&#125;' /etc/passwd  </span>USERNAME:root <span class="token environment constant">UID</span>:0USERNAME:bin <span class="token environment constant">UID</span>:1USERNAME:daemon <span class="token environment constant">UID</span>:2<span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;printf "USERNAME:%15s UID:%d\n",$1,$3&#125;' /etc/passwd  </span>USERNAME:           root <span class="token environment constant">UID</span>:0USERNAME:            bin <span class="token environment constant">UID</span>:1USERNAME:         daemon <span class="token environment constant">UID</span>:2<span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;printf "USERNAME:%-15s UID:%d\n",$1,$3&#125;' /etc/passwd  </span>USERNAME:root            <span class="token environment constant">UID</span>:0USERNAME:bin             <span class="token environment constant">UID</span>:1USERNAME:daemon          <span class="token environment constant">UID</span>:2<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="awkæ“ä½œç¬¦"><a href="#awkæ“ä½œç¬¦" class="headerlink" title="awkæ“ä½œç¬¦"></a>awkæ“ä½œç¬¦</h1><h2 id="ç®—æ•°æ“ä½œç¬¦ï¼š"><a href="#ç®—æ•°æ“ä½œç¬¦ï¼š" class="headerlink" title="ç®—æ•°æ“ä½œç¬¦ï¼š"></a>ç®—æ•°æ“ä½œç¬¦ï¼š</h2><p><code>x+y</code>,<code>x-y</code>,<code>x*y</code>,<code>x/y</code>,<code>x^y</code>,<code>x%y</code>ï¼ˆ<code>x%y</code>ï¼Œå³<code>xÃ·y</code>å–ä½™æ•°ï¼‰  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print 1+2&#125;'</span><span class="token number">3</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print 1-2&#125;'</span>-1<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print 1*2&#125;'</span><span class="token number">2</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print 1/2&#125;'</span><span class="token number">0.5</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print 1^2&#125;'</span><span class="token number">1</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print 1%2&#125;'</span><span class="token number">1</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print 3%2&#125;'</span><span class="token number">1</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print 3%1&#125;'</span><span class="token number">0</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;print 5%3&#125;'</span><span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>-x</code>ï¼šè½¬æ¢ä¸ºè´Ÿæ•°ï¼ˆ<code>-</code>ç”¨åŒå¼•å·å¼•èµ·æ¥ï¼Œå¯ä»¥åœ¨0å‰é¢åŠ ä¸Š<code>-</code>å·ï¼‰  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;print -$3&#125;' /etc/passwd</span><span class="token number">0</span>-1-2<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>+x</code>ï¼šè½¬æ¢ä¸ºæ•°å€¼ï¼ˆåŒ<code>-</code>ï¼Œå¯ä»¥ç”¨<code>&quot; &quot;</code>å¼•èµ·æ¥ï¼‰  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '&#123;print +$3&#125;' /etc/passwd</span><span class="token number">0</span><span class="token number">1</span><span class="token number">2</span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­—ç¬¦ä¸²æ“ä½œç¬¦ï¼šæ²¡æœ‰ç¬¦å·çš„æ“ä½œç¬¦ï¼Œå­—ç¬¦ä¸²è¿æ¥"><a href="#å­—ç¬¦ä¸²æ“ä½œç¬¦ï¼šæ²¡æœ‰ç¬¦å·çš„æ“ä½œç¬¦ï¼Œå­—ç¬¦ä¸²è¿æ¥" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œç¬¦ï¼šæ²¡æœ‰ç¬¦å·çš„æ“ä½œç¬¦ï¼Œå­—ç¬¦ä¸²è¿æ¥"></a>å­—ç¬¦ä¸²æ“ä½œç¬¦ï¼šæ²¡æœ‰ç¬¦å·çš„æ“ä½œç¬¦ï¼Œå­—ç¬¦ä¸²è¿æ¥</h2><h2 id="èµ‹å€¼æ“ä½œç¬¦ï¼š"><a href="#èµ‹å€¼æ“ä½œç¬¦ï¼š" class="headerlink" title="èµ‹å€¼æ“ä½œç¬¦ï¼š"></a>èµ‹å€¼æ“ä½œç¬¦ï¼š</h2><p><code>=</code>ï¼Œ<code>+=</code>ï¼Œ<code>-=</code>ï¼Œ<code>*=</code>ï¼Œ<code>/=</code>ï¼Œ<code>%=</code>ï¼Œ<code>^=</code>ï¼Œ<code>++</code>ï¼Œ<code>--</code>ï¼ˆ<code>++</code>æ¯æ¬¡åŠ 1ï¼Œ<code>--</code>æ¯æ¬¡å‡1ï¼‰  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;a=1;print a++,a&#125;'</span><span class="token number">1</span> <span class="token number">2</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;a=1;print a--,a&#125;'</span><span class="token number">1</span> <span class="token number">0</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;a=1;print --a,a&#125;'</span><span class="token number">0</span> <span class="token number">0</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk 'BEGIN&#123;a=1;print ++a,a&#125;'</span><span class="token number">2</span> <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¯”è¾ƒæ“ä½œç¬¦ï¼š"><a href="#æ¯”è¾ƒæ“ä½œç¬¦ï¼š" class="headerlink" title="æ¯”è¾ƒæ“ä½œç¬¦ï¼š"></a>æ¯”è¾ƒæ“ä½œç¬¦ï¼š</h2><p><code>&gt;</code>ï¼Œ<code>&gt;=</code>ï¼Œ<code>&lt;</code>ï¼Œ<code>&lt;=</code>ï¼Œ<code>!=</code>ï¼Œ<code>==</code>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '$3 > 999&#123;print $3&#125;' /etc/passwd</span><span class="token number">65534</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '$3 >= 999&#123;print $3&#125;' /etc/passwd</span><span class="token number">65534</span><span class="token number">999</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '$3 &lt; 3&#123;print $3&#125;' /etc/passwd</span><span class="token number">0</span><span class="token number">1</span><span class="token number">2</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '$3 &lt;= 3&#123;print $3&#125;' /etc/passwd</span><span class="token number">0</span><span class="token number">1</span><span class="token number">2</span><span class="token number">3</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '$3 != 2&#123;print $3&#125;' /etc/passwd</span><span class="token number">0</span><span class="token number">1</span><span class="token number">3</span><span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '$3 == 2&#123;print $3&#125;' /etc/passwd</span><span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¨¡å¼åŒ¹é…ç¬¦ï¼š"><a href="#æ¨¡å¼åŒ¹é…ç¬¦ï¼š" class="headerlink" title="æ¨¡å¼åŒ¹é…ç¬¦ï¼š"></a>æ¨¡å¼åŒ¹é…ç¬¦ï¼š</h2><p><code>~</code>ï¼šå·¦è¾¹åŒ…å«å³è¾¹åŒ¹é…åˆ°çš„å†…å®¹<br><code>!~</code>ï¼šå·¦è¾¹ä¸åŒ…å«å³è¾¹åŒ¹é…åˆ°çš„å†…å®¹  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk '$0 ~ /root/&#123;print&#125;' /etc/passwd   # æ”¯æŒæ­£åˆ™è¡¨è¾¾å¼</span>root:x:0:0:root:/root:/bin/bashoperator:x:11:0:operator:/root:/sbin/nologin<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/passwd | awk '$0 !~ /^root/'</span>bin:x:1:1:bin:/bin:/sbin/nologindaemon:x:2:2:daemon:/sbin:/sbin/nologinadm:x:3:4:adm:/var/adm:/sbin/nologin<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é€»è¾‘æ“ä½œç¬¦"><a href="#é€»è¾‘æ“ä½œç¬¦" class="headerlink" title="é€»è¾‘æ“ä½œç¬¦"></a>é€»è¾‘æ“ä½œç¬¦</h2><p>æˆ– <code>||</code>ï¼Œä¸ <code>&amp;&amp;</code>ï¼Œé<code>!</code>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '$3>=0 &amp;&amp; $3&lt;=3&#123;print $1,$3&#125;' /etc/passwd</span>root <span class="token number">0</span>bin <span class="token number">1</span>daemon <span class="token number">2</span>adm <span class="token number">3</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '$3==0 || $3&lt;=3&#123;print $1,$3&#125;' /etc/passwd</span>root <span class="token number">0</span>bin <span class="token number">1</span>daemon <span class="token number">2</span>adm <span class="token number">3</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '!($3>=3)&#123;print $1,$3&#125;' /etc/passwd</span>root <span class="token number">0</span>bin <span class="token number">1</span>daemon <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>PATTERN</code>ï¼šæ ¹æ®<code>pattern</code>æ¡ä»¶ï¼Œè¿‡æ»¤åŒ¹é…çš„è¡Œï¼Œå†åšå¤„ç†<br>å¦‚æœæœªæŒ‡å®šï¼šç©ºæ¨¡å¼ï¼ŒåŒ¹é…æ¯ä¸€è¡Œ<br><code>/æ­£åˆ™è¡¨è¾¾å¼/</code>ï¼šä»…å¤„ç†èƒ½å¤Ÿè¢«æ¨¡å¼åŒ¹é…åˆ°çš„è¡Œï¼Œéœ€è¦ç”¨ <code>/ /</code> æ‹¬èµ·æ¥  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk '/^UUID/&#123;print $1&#125;' /etc/fstab</span><span class="token assign-left variable">UUID</span><span class="token operator">=</span>8b1f186e-ffcb-4b8e-a9e2-caba58a3a850<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk '!/^UUID/&#123;print $1&#125;' /etc/fstab</span><span class="token punctuation">..</span>./dev/mapper/cl-root/dev/mapper/cl-swap<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å…³ç³»è¡¨è¾¾å¼ï¼šç»“æœæœ‰â€çœŸâ€æœ‰â€å‡â€ï¼›ç»“æœä¸ºâ€çœŸâ€æ‰ä¼šè¢«å¤„ç†ï¼›<br>çœŸï¼šç»“æœä¸ºé0å€¼ï¼Œéç©ºå­—ç¬¦ä¸²<br>å‡ï¼šç»“æœä¸ºç©ºå­—ç¬¦ä¸²<br>ç¤ºä¾‹ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '$3>1000&#123;print $1,$3&#125;' /etc/passwd</span>nobody <span class="token number">65534</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '$NF~/bash$/&#123;print $1,$NF&#125;' /etc/passwd</span>root /bin/bash<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><code>line ranges</code>ï¼šè¡ŒèŒƒå›´<br><code>startline,endline</code>ï¼š<code>/pat1/,/pat2/</code>ä¸æ”¯æŒç›´æ¥ç»™å‡ºæ•°å­—æ ¼å¼  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '/^root/,/^lp/&#123;print $1&#125;' /etc/passwd</span>rootbindaemonadmlp<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: '(NR>=2&amp;&amp;NR&lt;=5)&#123;print $1&#125;' /etc/passwd</span>bindaemonadmlp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>BEGIN/END</code>æ¨¡å¼<br><code>BEGIN&#123;&#125;</code>ï¼šä»…åœ¨å¼€å§‹å¤„ç†æ–‡ä»¶ä¸­çš„æ–‡æœ¬ä¹‹å‰æ‰§è¡Œä¸€æ¬¡<br><code>END&#123;&#125;</code>ï¼šä»…åœ¨æ–‡æœ¬å¤„ç†å®Œæˆä¹‹åæ‰§è¡Œä¸€æ¬¡  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: 'BEGIN&#123;print "USER UID"&#125;(NR>=2&amp;&amp;NR&lt;=4)&#123;print $1":"$3&#125;END&#123;print "end file"&#125;' /etc/passwd</span><span class="token environment constant">USER</span> <span class="token environment constant">UID</span>bin:1daemon:2adm:3end <span class="token function">file</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/passwd | head -3 | awk -F: '&#123;print "USER UID";print $1":"$3&#125;END&#123;print "end file"&#125;'</span><span class="token environment constant">USER</span> <span class="token environment constant">UID</span>root:0<span class="token environment constant">USER</span> <span class="token environment constant">UID</span>bin:1<span class="token environment constant">USER</span> <span class="token environment constant">UID</span>daemon:2end <span class="token function">file</span><span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: 'BEGIN&#123;print "USER UID \n ---------"&#125;&#123;print $1,$3&#125;' /etc/passwd</span><span class="token environment constant">USER</span> <span class="token environment constant">UID</span>  ---------root <span class="token number">0</span>bin <span class="token number">1</span><span class="token punctuation">..</span>.<span class="token punctuation">[</span>root@docker ~<span class="token punctuation">]</span><span class="token comment"># awk -F: 'BEGIN&#123;print "USER UID \n ---------"&#125;&#123;print $1,$3&#125;'END'&#123;print "========="&#125;' /etc/passwd</span><span class="token environment constant">USER</span> <span class="token environment constant">UID</span>  ---------root <span class="token number">0</span><span class="token punctuation">..</span>.nginx <span class="token number">990</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç½‘ç»œ</title>
      <link href="/posts/9e95.html"/>
      <url>/posts/9e95.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="æŸ¥çœ‹åŠæµ‹è¯•ç½‘ç»œ"><a href="#æŸ¥çœ‹åŠæµ‹è¯•ç½‘ç»œ" class="headerlink" title="æŸ¥çœ‹åŠæµ‹è¯•ç½‘ç»œ"></a>æŸ¥çœ‹åŠæµ‹è¯•ç½‘ç»œ</h1><h2 id="æŸ¥çœ‹ç½‘ç»œï¼š"><a href="#æŸ¥çœ‹ç½‘ç»œï¼š" class="headerlink" title="æŸ¥çœ‹ç½‘ç»œï¼š"></a>æŸ¥çœ‹ç½‘ç»œï¼š</h2><p>ä½¿ç”¨ifconfigå‘½ä»¤æŸ¥çœ‹ç½‘ç»œæ¥å£<br>ï¼ˆ1ï¼‰æŸ¥çœ‹æ´»åŠ¨çš„ç½‘ç»œæ¥å£ä¿¡æ¯ï¼ˆ<code>ifconfig</code>ï¼‰<br>ï¼ˆ2ï¼‰æŸ¥çœ‹æ‰€æœ‰çš„ç½‘ç»œæ¥å£ä¿¡æ¯ï¼ˆ<code>ifconfig -a</code>ï¼‰<br>ï¼ˆ3ï¼‰ æŸ¥çœ‹æŒ‡å®šç½‘ç»œæ¥å£ä¿¡æ¯ï¼ˆ<code>ifconfig ç½‘ç»œæ¥å£å</code>ï¼‰  </p><p>ç›´æ¥ä½¿ç”¨ifconfigå‘½ä»¤ï¼ŒæŸ¥è¯¢å‡ºçš„æ˜¯å·²æ¿€æ´»çš„ç½‘å¡åˆ—è¡¨ä¿¡æ¯ï¼Œå‚æ•°<br>eth0ï¼šç¬¬ä¸€å—ç½‘å¡<br>loï¼šå›ç¯ï¼Œç”¨äºæŸäº›æœåŠ¡çš„æµ‹è¯•<br>Hwaddrï¼šç½‘ç»œæ¥å£çš„ç‰©ç†åœ°å€ï¼ˆMACåœ°å€ï¼‰<br>inet addrï¼šç½‘ç»œæ¥å£çš„ipåœ°å€<br>Bacastï¼šç½‘ç»œæ¥å£æ‰€åœ¨ç½‘ç»œçš„å¹¿æ’­åœ°å€<br>Maskï¼šç½‘ç»œæ¥å£çš„å­ç½‘æ©ç   </p><p>ä½¿ç”¨<code>ip</code>/<code>ethtool</code>å‘½ä»¤æŸ¥çœ‹ç½‘ç»œæ¥å£<br>ï¼ˆ1ï¼‰æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£çš„æ•°æ®é“¾è·¯å±‚ä¿¡æ¯<br>ï¼ˆ2ï¼‰æŸ¥çœ‹æ‰€æœ‰ç½‘ç»œæ¥å£çš„ç½‘ç»œå±‚ä¿¡æ¯<br>ï¼ˆ3ï¼‰æŸ¥çœ‹æŒ‡å®šç½‘ç»œæ¥å£çš„é€Ÿç‡ã€æ¨¡å¼ç­‰ä¿¡æ¯<br><code>ip link</code>æŸ¥çœ‹ç½‘ç»œæ¥å£ä¿¡æ¯ï¼Œä¸æ˜¾ç¤ºipåœ°å€<br><code>ip addr</code>æŸ¥çœ‹ç½‘ç»œæ¥å£çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥åŠ showé€‰é¡¹ï¼ŒæŸ¥çœ‹æŒ‡å®šç½‘ç»œæ¥å£ä¿¡æ¯<br><code>ethtoolç½‘ç»œæ¥å£å</code>ï¼šæŸ¥çœ‹æŒ‡å®šç½‘ç»œæ¥å£çš„é€Ÿç‡ã€æ¨¡å¼ç­‰ä¿¡æ¯  </p><h2 id="routeå‘½ä»¤"><a href="#routeå‘½ä»¤" class="headerlink" title="routeå‘½ä»¤"></a>routeå‘½ä»¤</h2><p>ä½¿ç”¨routeå‘½ä»¤æŸ¥çœ‹è·¯ç”±è¡¨æ¡ç›®<br>linuxç³»ç»Ÿä¸­çš„è·¯ç”±è¡¨å†³å®šç€æœ¬æœºå‘å…¶ä»–ä¸»æœºæˆ–å…¶ä»–ç½‘ç»œå‘é€æ•°æ®çš„å»å‘ï¼Œæ˜¯æ’é™¤ç½‘ç»œæ•…éšœçš„å…³é”®ä¿¡æ¯  </p><p>ç›´æ¥æ‰§è¡Œrouteå‘½ä»¤<br>æŸ¥çœ‹ä¸»æœºçš„è·¯ç”±è¡¨ä¿¡æ¯ï¼š<br>ç›®æ ‡ç½‘æ®µçš„åœ°å€<br>Gatewayï¼šä¸‹ä¸€è·³è·¯ç”±çš„åœ°å€<br>Genmaskï¼šå­ç½‘æ©ç <br>Flagsï¼šæ ‡è®°å½“å‰ç½‘ç»œèŠ‚ç‚¹çŠ¶æ€<br>Metricï¼šè·¯ç”±è·ç¦»ã€è·³æ•°ï¼ˆlinuxå†…æ ¸ä¸­æ²¡æœ‰ä½¿ç”¨ï¼‰<br>Refï¼šè·¯ç”±é¡¹å¼•ç”¨æ¬¡æ•°ï¼ˆlinuxå†…æ ¸ä¸­æ²¡æœ‰ä½¿ç”¨ï¼‰<br>Useï¼šè¯¥è·¯ç”±è¢«ä½¿ç”¨çš„æ¬¡æ•°ï¼Œå¯ä»¥ç²—ç•¥ä¼°è®¡é€šå‘æŒ‡å®šç½‘ç»œåœ°å€çš„ç½‘ç»œæµé‡<br>Ifaceï¼šå‘é€æ•°æ®çš„ç½‘ç»œæ¥å£ï¼Œå¦‚eth0  </p><p>å½“ç›®æ ‡ç½‘æ®µä¸ºâ€œDefaultâ€æ—¶ï¼Œè¡¨ç¤ºæ­¤è¡Œæ—¶é»˜è®¤ç½‘å…³è®°å½•ï¼›å½“ä¸‹ä¸€è·³ä¸ºâ€œ*â€æ—¶ï¼Œè¡¨ç¤ºç›®æ ‡ç½‘æ®µä¸æœ¬æœºç›¸è¿çš„æ—¶å€™ï¼Œä¸éœ€è¦è·¯ç”±å™¨<br>é€‰é¡¹ï¼š<br><code>-n</code>ï¼šå¯ä»¥å°†è·¯ç”±è®°å½•ä¸­çš„åœ°å€æ˜¾ç¤ºä¸ºæ•°å­—å½¢å¼ï¼Œè¿™æ ·å¯ä»¥è·³è¿‡è§£æä¸»æœºåçš„è¿‡ç¨‹ï¼Œåœ¨è·¯ç”±è¡¨æ¡ç›®è¾ƒå¤šæ—¶èƒ½å¤ŸåŠ å¿«æ‰§è¡Œé€Ÿåº¦ã€‚  </p><h2 id="netstatå‘½ä»¤"><a href="#netstatå‘½ä»¤" class="headerlink" title="netstatå‘½ä»¤"></a>netstatå‘½ä»¤</h2><p>ä½¿ç”¨<code>netstat</code>å‘½ä»¤æŸ¥çœ‹ç½‘ç»œè¿æ¥æƒ…å†µ<br>é€‰é¡¹ï¼š<br><code>-a</code>æ˜¾ç¤ºå½“å‰ä¸»æœºä¸­æ‰€æœ‰æ´»åŠ¨çš„ç½‘ç»œè¿æ¥ä¿¡æ¯<br><code>-n</code>ä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºç›¸å…³ä¿¡æ¯<br><code>-r</code>æ˜¾ç¤ºè·¯ç”±è¡¨ä¿¡æ¯<br><code>-t</code>æ˜¾ç¤ºTCPåè®®ç›¸å…³ä¿¡æ¯<br><code>-u</code>æ˜¾ç¤ºUDPåè®®ç›¸å…³ä¿¡æ¯<br><code>-p</code>æ˜¾ç¤ºä¸ç½‘ç»œè¿æ¥ç›¸å…³çš„è¿›ç¨‹å·ã€è¿›ç¨‹åç§°ä¿¡æ¯ï¼ˆè¦rootæƒé™ï¼‰<br><code>-l</code>æ˜¾ç¤ºå¤„äºç›‘å¬çŠ¶æ€çš„ç½‘ç»œè¿æ¥åŠç«¯å£ä¿¡æ¯  </p><p>å¸¸ç”¨ç»„åˆï¼š<br><code>-anpt</code>ä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºå½“å‰ç³»ç»Ÿä¸­çš„æ‰€æœ‰çš„TCPè¿æ¥ä¿¡æ¯ï¼ŒåŒæ—¶æ˜¾ç¤ºå¯¹åº”çš„è¿›ç¨‹å·  </p><p>æŸ¥çœ‹æŸä¸€ä¸ªæœåŠ¡ï¼Œä½¿ç”¨grepè¿‡æ»¤<br><code>netstat -anpt|grep sshd</code>ï¼ˆå¯ä»¥æ˜¯æœåŠ¡åæˆ–è¿›ç¨‹å·ï¼‰  </p><p>æŸ¥è¯¢ç»“æœä¸­å„é¡¹çš„æ„æ€ï¼š<br>protoï¼šåè®®<br>Recv-Qï¼šæ¥æ”¶çš„åŒ…çš„ä¸ªæ•°<br>Send-Qï¼šå‘é€çš„åŒ…çš„ä¸ªæ•°<br>local Addressï¼šæœ¬åœ°ipåœ°å€<br>Foreign Addressï¼šè¿œç«¯ipåœ°å€<br>stateï¼šçŠ¶æ€<br>PID/program nameï¼šPIDå·/è¿›ç¨‹åç§°<br>åœ¨stateåˆ—ä¸­ï¼š<br>LISTENï¼šç›‘å¬çŠ¶æ€<br>BSTABLISHEDï¼šå·²è¿æ¥çŠ¶æ€  </p><h2 id="sså‘½ä»¤"><a href="#sså‘½ä»¤" class="headerlink" title="sså‘½ä»¤"></a>sså‘½ä»¤</h2><p><code>ss</code>å‘½ä»¤ï¼šç±»ä¼¼<code>netstat</code><br>å¸¸è§ç”¨æ³•ï¼š<br><code>-l</code>æ˜¾ç¤ºæœ¬åœ°æ‰“å¼€çš„æ‰€æœ‰ç«¯å£<br><code>-pl</code>æ˜¾ç¤ºæ¯ä¸ªè¿›ç¨‹æ‰“å¼€çš„socket<br><code>-atu</code>æ˜¾ç¤ºæ‰€æœ‰çš„TCPã€UDPåè®®çš„socket<br><code>-atpl</code>æ˜¾ç¤ºæ‰€æœ‰å¤„äºç›‘å¬çŠ¶æ€çš„TCPåè®®socket  </p><p>ï¼ˆè¡¥å……ï¼šnä»¥æ•°å­—æ ¼å¼æ˜¾ç¤ºï¼Œpæ˜¾ç¤ºç«¯å£ï¼‰  </p><h2 id="æµ‹è¯•ç½‘ç»œè¿æ¥"><a href="#æµ‹è¯•ç½‘ç»œè¿æ¥" class="headerlink" title="æµ‹è¯•ç½‘ç»œè¿æ¥"></a>æµ‹è¯•ç½‘ç»œè¿æ¥</h2><p>tracerouteå‘½ä»¤çš„æ ¼å¼<br><code>traceroute ip|ç½‘å€</code>  </p><p>nslookupå‘½ä»¤çš„æ ¼å¼<br><code>nslookup ç½‘å€</code> [DNSæœåŠ¡å™¨åœ°å€]  </p><h1 id="è®¾ç½®ç½‘ç»œåœ°å€å‚æ•°"><a href="#è®¾ç½®ç½‘ç»œåœ°å€å‚æ•°" class="headerlink" title="è®¾ç½®ç½‘ç»œåœ°å€å‚æ•°"></a>è®¾ç½®ç½‘ç»œåœ°å€å‚æ•°</h1><h2 id="ä½¿ç”¨ifconfigå‘½ä»¤ä¿®æ”¹ç½‘å¡çš„åœ°å€ã€çŠ¶æ€"><a href="#ä½¿ç”¨ifconfigå‘½ä»¤ä¿®æ”¹ç½‘å¡çš„åœ°å€ã€çŠ¶æ€" class="headerlink" title="ä½¿ç”¨ifconfigå‘½ä»¤ä¿®æ”¹ç½‘å¡çš„åœ°å€ã€çŠ¶æ€"></a>ä½¿ç”¨ifconfigå‘½ä»¤ä¿®æ”¹ç½‘å¡çš„åœ°å€ã€çŠ¶æ€</h2><p>åœ¨linuxä¸»æœºä¸­ï¼Œæ‰‹åŠ¨ä¿®æ”¹ç½‘ç»œé…ç½®åŒ…æ‹¬ä¸¤ç§æœ€åŸºæœ¬çš„æ–¹æ³•ï¼š<br>ä¸´æ—¶ä¿®æ”¹ï¼šé€šè¿‡å‘½ä»¤è¡Œç›´æ¥ä¿®æ”¹å½“å‰æ­£åœ¨ä½¿ç”¨çš„ç½‘ç»œåœ°å€ï¼Œä¿®æ”¹åç«‹å³ç”Ÿæ•ˆï¼Œè¿™ç§æ–¹å¼ç®€å•å¿«æ·ï¼Œä¸€èˆ¬åœ¨è°ƒè¯•ç½‘ç»œçš„è¿‡ç¨‹ä¸­ä½¿ç”¨ï¼Œä½†ç”±äºæ‰€åšçš„ä¿®æ”¹å¹¶æ²¡æœ‰å›ºå®šçš„å­˜æ”¾åœ¨é™æ€çš„æ–‡ä»¶ä¸­ï¼Œå› æ­¤å½“é‡å¯networkæœåŠ¡æˆ–é‡å¯ä¸»æœºåå°†å¤±æ•ˆ<br><code>ifconfig eth0 192.168.0.1/24</code>ï¼ˆæˆ–<code>ifconfig eth0 192.168.0.4 netmask 255.255.255.0</code>ï¼‰  </p><p><code>ifconfig eth0 up</code> å¼€å¯eth0ï¼ˆifdown eth0ï¼‰<br><code>ifconfig eth0 down</code> å…³é—­eth0ï¼ˆifup eth0ï¼‰<br><code>ifconfig eth0:0 192.168.0.2</code> ä¸ºç½‘å¡ç»‘å®šè™šæ‹Ÿæ¥å£ï¼ˆå¤šç”¨äºè°ƒè¯•ï¼‰  </p><p>å›ºå®šé…ç½®ï¼šé€šè¿‡é…ç½®æ–‡ä»¶æ¥å­˜æ”¾å›ºå®šçš„å„ç§ç½‘ç»œåœ°å€ï¼Œéœ€è¦é‡å¯networkæœåŠ¡æˆ–é‡å¯ä¸»æœºåæ‰ä¼šç”Ÿæ•ˆï¼Œè¿™ç§æ–¹å¼æ˜¯æ°¸ä¹…é…ç½®ï¼Œä¸€èˆ¬åœ¨éœ€è¦ä¸ºæœåŠ¡å™¨è®¾ç½®å›ºå®šçš„ç½‘ç»œåœ°å€æ—¶ä½¿ç”¨  </p><h2 id="ä½¿ç”¨routeå‘½ä»¤æ·»åŠ ã€åˆ é™¤é™æ€è·¯ç”±"><a href="#ä½¿ç”¨routeå‘½ä»¤æ·»åŠ ã€åˆ é™¤é™æ€è·¯ç”±" class="headerlink" title="ä½¿ç”¨routeå‘½ä»¤æ·»åŠ ã€åˆ é™¤é™æ€è·¯ç”±"></a>ä½¿ç”¨routeå‘½ä»¤æ·»åŠ ã€åˆ é™¤é™æ€è·¯ç”±</h2><p>é€šè¿‡route addæ“ä½œå¯ä»¥æ·»åŠ è·¯ç”±è®°å½•ï¼Œç»“åˆâ€œ-netâ€é€‰é¡¹æŒ‡å®šç›®æ ‡ç½‘æ®µçš„åœ°å€ï¼Œç»“åˆâ€œgwâ€é€‰é¡¹æŒ‡å®šä¸‹ä¸€è·³è·¯ç”±å™¨çš„ipåœ°å€<br>æ·»åŠ æ ¼å¼ï¼šroute add -net ç›®æ ‡ç½‘æ®µåœ°å€ gw ä¸‹ä¸€è·³è·¯ç”±ip/æœ¬æœºè·³å‡ºip<br>ä¾‹å¦‚ï¼š<code>route add -net 172.18.16.0/24 gw 192.168.0.2</code>  </p><p>åˆ é™¤æ ¼å¼ï¼šroute del -net ç›®æ ‡ç½‘æ®µåœ°å€<br>ä¾‹å¦‚ï¼š<code>route del -net 172.18.16.0/24</code>  </p><p>æ·»åŠ ã€åˆ é™¤é»˜è®¤ç½‘å…³è®°å½•ï¼ˆé»˜è®¤ç½‘å…³æ˜¯ä¸€æ¡ç‰¹æ®Šçš„é™æ€è·¯ç”±ï¼‰<br>ä¸æ·»åŠ ã€åˆ é™¤é™æ€è·¯ç”±ç±»ä¼¼ï¼Œä½†æŒ‡å®šç›®æ ‡ç½‘æ®µæ—¶åªéœ€è¦ç®€å•çš„ä½¿ç”¨â€œdefaultâ€è¡¨ç¤ºå³å¯ï¼Œæ— é¡»å†ä½¿ç”¨â€œ-netâ€é€‰é¡¹æŒ‡æ˜ç½‘æ®µåœ°å€<br>æ ¼å¼ï¼š<code>route|grep default</code>å…ˆæŸ¥çœ‹åŸè·¯ç”±è¡¨ä¸­çš„é»˜è®¤ç½‘å…³åœ°å€  </p><p>åˆ é™¤ï¼š<code>route del default [gw 192.168.0.1]</code>ï¼ˆæˆ–<code>route del -net 192.168.0.1</code>ï¼‰  </p><p>ç½‘ç»œæ¥å£çš„é…ç½®æ–‡ä»¶é»˜è®¤ä½äº<code>/etc/sysconfig/network-srcipts/</code>ç›®å½•ä¸­ï¼Œæ–‡ä»¶åå‘½åæ–¹å¼ä¸ºâ€œifcfg-xxxâ€å…¶ä¸­â€œxxxâ€æ˜¯ç½‘ç»œæ¥å£çš„åç§°<br>ä¾‹å¦‚ï¼šç½‘å¡eth0çš„é…ç½®æ–‡ä»¶æ˜¯â€œifcfg-eth0â€ï¼Œå›ç¯æ¥å£loçš„é…ç½®æ–‡ä»¶æ˜¯â€œifcfg-loâ€  </p><p>ifcfg-xxxæ–‡ä»¶ä¸­å¸¸ç”¨é…ç½®é¡¹çš„å«ä¹‰åŠä½œç”¨<br>DEVICEï¼šè®¾ç½®ç½‘ç»œæ¥å£çš„åç§°<br>ONBOOTï¼šè®¾ç½®ç½‘ç»œæ¥å£æ˜¯å¦åœ¨linuxç³»ç»Ÿå¯åŠ¨æ—¶æ¿€æ´»<br>BOOTPROTOï¼šè®¾ç½®ç½‘ç»œæ¥å£çš„é…ç½®æ–¹å¼ï¼Œåˆ†ä¸ºâ€œstaticï¼ˆé™æ€ï¼‰â€å’Œâ€œdhcpï¼ˆåŠ¨æ€ï¼‰â€<br>IPADDRï¼šè®¾ç½®ç½‘ç»œæ¥å£çš„ipåœ°å€<br>NETMASKï¼šè®¾ç½®ç½‘ç»œæ¥å£çš„å­ç½‘æ©ç <br>GATEWAYï¼šè®¾ç½®ç½‘ç»œæ¥å£çš„é»˜è®¤ç½‘å…³åœ°å€<br>UUIDï¼šç½‘å…³çš„UUIDç¼–å·<br>HWADDRï¼šç½‘å¡çš„MACåœ°å€  </p><p>è®¾ç½®å®Œé‡å¯ç½‘å¡<br>å¯ç”¨ã€ç¦ç”¨ç½‘ç»œæ¥å£é…ç½®ï¼š<br>é‡å¯networkæœåŠ¡ä½¿æ–°çš„é…ç½®ç”Ÿæ•ˆ  </p><p>å¦‚æœåªç¦ç”¨æŸä¸€ä¸ªç½‘ç»œæ¥å£<br><code>ifup ç½‘å¡å</code><br><code>ifdown ç½‘å¡å</code>  </p><p>ä¸»æœºåç§°é…ç½®æ–‡ä»¶<br>è‹¥è¦ä¿®æ”¹ä¸»æœºåå¯ä»¥ä½¿ç”¨<code>hostname</code>å‘½ä»¤ï¼Œä¸´æ—¶ä¿®æ”¹ï¼Œé‡å¯å¤±æ•ˆ<br>æ°¸ä¹…é…ç½®ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶<br><code>/etc/sysconfig/network</code><br>NETWORKINGï¼šç”¨äºè®¾ç½®IPV4ç½‘ç»œé»˜è®¤å¯ç”¨çŠ¶æ€<br>HOSTNAMEï¼šç”¨äºè®¾ç½®ä¸»æœºå  </p><p>åŸŸåè§£æé…ç½®æ–‡ä»¶<br>ï¼ˆ1ï¼‰æŒ‡å®šä¸ºæœ¬æœºæä¾›DNSè§£æçš„æœåŠ¡å™¨åœ°å€çš„æ–‡ä»¶<br>ç¼–è¾‘<code>/etc/resolv.conf</code>æ–‡ä»¶ï¼ŒæŒ‡å®šä¸‰ä¸ªä¸åŒçš„DNSæœåŠ¡å™¨ï¼Œä¼˜å…ˆä½¿ç”¨ç¬¬ä¸€ä¸ªDNSæœåŠ¡å™¨<br>æ·»åŠ <code>nameserver 114.114.114.114</code>  </p><p>ï¼ˆ2ï¼‰æœ¬åœ°ä¸»æœºæ˜ å°„æ–‡ä»¶<br><code>/etc/hosts</code>æ–‡ä»¶ä¸­è®°å½•ç€ä¸€ä»½ä¸»æœºåä¸ipåœ°å€çš„æ˜ å°„å…³ç³»è¡¨ï¼Œå½“è®¿é—®ä¸€ä¸ªæœªçŸ¥åŸŸåæ—¶ï¼Œå…ˆæŸ¥è¯¢hostsæ–‡ä»¶ä¸­æ˜¯å¦æœ‰ç›¸åº”çš„æ˜ å°„è®°å½•ï¼Œå¦‚æœæœ‰å°±ä½¿ç”¨ï¼Œæ²¡æœ‰å†å»æ‰¾DNSæœåŠ¡å™¨è¿›è¡ŒæŸ¥è¯¢ï¼ˆçœå»å»DNSæœåŠ¡å™¨è§£æåŸŸåï¼‰<br>è®¾ç½®æ–¹å¼ï¼š<br>æ‰“å¼€<code>/etc/hosts</code>æ–‡ä»¶ï¼Œæ·»åŠ ï¼š<code>123.125.114.144 www.baidu.com</code><br>ï¼ˆåŸŸåå¯ä»¥è®¾ç½®åˆ«åï¼‰  </p><h2 id="ç½‘å¡æ¥å£é…ç½®ï¼šbonding"><a href="#ç½‘å¡æ¥å£é…ç½®ï¼šbonding" class="headerlink" title="ç½‘å¡æ¥å£é…ç½®ï¼šbonding"></a>ç½‘å¡æ¥å£é…ç½®ï¼šbonding</h2><p>bondingæ˜¯ä¸€ç§linuxç³»ç»Ÿä¸‹çš„ç½‘å¡ç»‘å®šæŠ€æœ¯ï¼Œå¯ä»¥æŠŠæœåŠ¡å™¨ä¸Šnä¸ªç‰©ç†ç½‘å¡åœ¨ç³»ç»Ÿå†…éƒ¨æŠ½è±¡æˆä¸€ä¸ªé€»è¾‘ä¸Šçš„ç½‘å¡ï¼Œèƒ½å¤Ÿæå‡ç½‘ç»œååé‡ã€å®ç°ç½‘ç»œå†—ä½™ã€è´Ÿè½½ç­‰åŠŸèƒ½ï¼Œæœ‰å¾ˆå¤šä¼˜åŠ¿ã€‚<br>bondingæŠ€æœ¯æ˜¯æ˜¯linuxç³»ç»Ÿå†…æ ¸å±‚é¢å®ç°çš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªå†…æ ¸æ¨¡å—ï¼ˆé©±åŠ¨ï¼‰ã€‚ä½¿ç”¨å®ƒéœ€è¦ç³»ç»Ÿæœ‰è¿™ä¸ªæ¨¡å—ã€‚<br><code>modinfo bonding</code>æŸ¥çœ‹bondingçš„ä¿¡<br><code>modprobe bonding</code>å°†bondingæ¨¡å—åŠ è½½åˆ°linuxå†…æ ¸  </p><p>bondingçš„å·¥ä½œæ¨¡å¼ï¼š<br>mode0<br>è½®è½¬ï¼Œä»å¤´åˆ°å°¾çš„é¡ºåºåœ¨æ¯ä¸€ä¸ªslaveæ¥å£ä¸Šå‘é€æ•°æ®åŒ…ï¼ˆbondçš„ç½‘å¡æœ‰ä¸€ä¸ªæŸåï¼Œbondå°±æŸåï¼‰<br>mode1<br>ä¸»å¤‡ï¼Œbondçš„æ‰€æœ‰ç½‘å¡ä¸­ï¼Œåªæœ‰ä¸€ä¸ªslaveè¢«æ¿€æ´»ï¼ˆè¢«æ¿€æ´»çš„slaveæŸåï¼Œä¸‹ä¸€ä¸ªslaveé¡¶ä¸Šï¼‰<br>mode3<br>å¹¿æ’­ï¼Œåœ¨æ‰€æœ‰çš„slaveæ¥å£ä¸Šä¼ é€æ‰€æœ‰çš„æŠ¥æ–‡ã€‚æœ‰å®¹é”™èƒ½åŠ›  </p><p>bondingé…ç½®<br>1ã€æ·»åŠ bondingæ¨¡å—ï¼ˆxshellè¿æ¥ä¸ä¸Šè™šæ‹Ÿæœºï¼Œéœ€è¦æ‰§è¡Œ<code>modprobe -r bonding</code>å°†bondingæ¨¡å—ç§»é™¤ï¼‰<br><code>modprobe bonding</code><br>2ã€å…³é—­NetworkManageræœåŠ¡<br><code>service NetworkManager stop</code><br>3ã€åˆ›å»ºbond0<br><code>vim /etc/sysconfig/network-scripts/ifcfg-bond0</code><br>ï¼ˆmiimonæ˜¯ç”¨æ¥è¿›è¡Œé“¾è·¯æ£€æµ‹çš„ï¼Œå¦‚æœmiimon=100ï¼Œé‚£ä¹ˆç³»ç»Ÿæ¯100msæ£€æµ‹ä¸€æ¬¡é“¾è·¯è¿æ¥çŠ¶æ€ï¼Œå¦‚æœæœ‰ä¸€æ¡çº¿è·¯ä¸é€šå°±è½¬å…¥å¦ä¸€æ¡çº¿è·¯ï¼‰<br>4ã€é…ç½®çœŸå®ç½‘å¡ <code>eth0</code> <code>eth1</code> æ·»åŠ ä»¥ä¸‹å†…å®¹  </p><pre class="line-numbers language-none"><code class="language-none">DEVICE&#x3D;eth0TYPE&#x3D;EthernetONBOOT&#x3D;yesBOOTPROTO&#x3D;noneMASTER&#x3D;bond0SLAVE&#x3D;yes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">DEVICE&#x3D;eth1TYPE&#x3D;EthernetONBOOT&#x3D;yesBOOTPROTO&#x3D;noneMASTER&#x3D;bond0SLAVE&#x3D;yes<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>5ã€æ·»åŠ ç½‘å¡é©±åŠ¨  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> /etc/modprobe.d/bonding.conf<span class="token builtin class-name">alias</span> bond0 bonding<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>6ã€å¯åŠ¨ç½‘ç»œæœåŠ¡<br><code>service network start</code><br>åˆ é™¤bond0  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ifconfig</span> bond0 downrmmod bonding<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å¼•å¯¼ç¨‹åº</title>
      <link href="/posts/b24e.html"/>
      <url>/posts/b24e.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="å¼•å¯¼ç¨‹åºä¸æœåŠ¡æ§åˆ¶"><a href="#å¼•å¯¼ç¨‹åºä¸æœåŠ¡æ§åˆ¶" class="headerlink" title="å¼•å¯¼ç¨‹åºä¸æœåŠ¡æ§åˆ¶"></a>å¼•å¯¼ç¨‹åºä¸æœåŠ¡æ§åˆ¶</h1><p>Linuxç»„æˆï¼škernel+rootfs<br>kernelå†…æ ¸ï¼šåŠŸèƒ½ï¼šè¿›ç¨‹ç®¡ç†ã€å†…å­˜ç®¡ç†ã€ç½‘ç»œç®¡ç†ã€é©±åŠ¨ç¨‹åºã€æ–‡ä»¶ç³»ç»Ÿã€å®‰å…¨åŠŸèƒ½  </p><p>rootfsæ ¹æ–‡ä»¶ç³»ç»Ÿï¼šåŒ…æ‹¬ç¨‹åºå’Œglibc<br>ï¼ˆglibcï¼šæ˜¯GUNå‘å¸ƒçš„libcåº“ï¼Œå³cè¿è¡Œåº“ã€‚å‡ ä¹å…¶å®ƒä»»ä½•è¿è¡Œåº“éƒ½ä¼šä¾èµ–äºglibcï¼‰  </p><p>åº“ï¼šå‡½æ•°é›†åˆï¼Œfunctionï¼Œè°ƒç”¨æ¥å£ï¼ˆå¤´æ–‡ä»¶è´Ÿè´£æè¿°ï¼‰<br>è¿‡ç¨‹è°ƒç”¨ï¼šprocedureï¼Œæ— è¿”å›å€¼<br>å‡½æ•°è°ƒç”¨ï¼šfunction  </p><p>ç¨‹åºï¼šäºŒè¿›åˆ¶æ‰§è¡Œæ–‡ä»¶  </p><p>å†…æ ¸è®¾è®¡æµæ´¾ï¼š<br>å•å†…æ ¸ï¼šLinux<br>æŠŠæ‰€æœ‰åŠŸèƒ½é›†æˆäºåŒä¸€ä¸ªç¨‹åº<br>å¾®å†…æ ¸ï¼šWindows<br>æ¯ç§åŠŸèƒ½ä½¿ç”¨ä¸€ä¸ªå•ç‹¬å­ç³»ç»Ÿå®ç°  </p><p>Linuxå†…æ ¸ç‰¹ç‚¹ï¼š<br>æ”¯æŒæ¨¡å—åŒ–ï¼š*.koï¼ˆå†…æ ¸å¯¹è±¡ï¼‰ï¼ˆåœ¨/lib/modules/å‘å¸ƒç‰ˆæœ¬/kernel/ç›®å½•ä¸‹å­˜æ”¾ï¼‰  </p><p>å¦‚ï¼šæ–‡ä»¶ç³»ç»Ÿï¼Œç¡¬ä»¶é©±åŠ¨ï¼Œç½‘ç»œåè®®ç­‰<br>æ”¯æŒå†…æ ¸æ¨¡å—çš„åŠ¨æ€è£…è½½å’Œå¸è½½<br><img src="/medias/drawing-bed/bootstrap/0.png"></p><p>Linuxå†…æ ¸ç»„æˆéƒ¨åˆ†ï¼šæ ¸å¿ƒæ–‡ä»¶å’Œramdisk<br>æ ¸å¿ƒæ–‡ä»¶ï¼š/boot/vmlinuz-å‘å¸ƒç‰ˆæœ¬ï¼ˆversion-releaseå‘å¸ƒç‰ˆæœ¬ï¼‰<br><img src="/medias/drawing-bed/bootstrap/1.png"></p><p>ramdiskï¼šè¾…åŠ©çš„ä¼ªæ ¹ç³»ç»Ÿ<br>CentOS 5ï¼š/boot/initrd-version-release.img<br>CentOS 6ï¼Œ7ï¼š/boot/initramfs-version-release.img ï¼ˆ6ï¼Œ7ä¸Šçš„ä¼ªæ ¹ç³»ç»Ÿï¼‰<br><img src="/medias/drawing-bed/bootstrap/2.png"></p><h1 id="CentOS-6çš„å¯åŠ¨æµç¨‹"><a href="#CentOS-6çš„å¯åŠ¨æµç¨‹" class="headerlink" title="CentOS 6çš„å¯åŠ¨æµç¨‹"></a>CentOS 6çš„å¯åŠ¨æµç¨‹</h1><ol><li>åŠ è½½BIOSçš„ç¡¬ä»¶ä¿¡æ¯ï¼Œè·å–ç¬¬ä¸€ä¸ªå¯åŠ¨è®¾å¤‡  </li><li>è¯»å–ç¬¬ä¸€ä¸ªå¯åŠ¨è®¾å¤‡MBRçš„å¼•å¯¼åŠ è½½ç¨‹åºï¼ˆgrubï¼‰çš„å¯åŠ¨ä¿¡æ¯  </li><li>åŠ è½½æ ¸å¿ƒæ“ä½œç³»ç»Ÿçš„æ ¸å¿ƒä¿¡æ¯ï¼Œæ ¸å¿ƒå¼€å§‹è§£å‹ç¼©ï¼Œå¹¶å°è¯•é©±åŠ¨æ‰€æœ‰çš„ç¡¬ä»¶è®¾å¤‡  </li><li>æ ¸å¿ƒæ‰§è¡Œinitç¨‹åºï¼Œå¹¶è·å–é»˜è®¤çš„è¿è¡Œä¿¡æ¯  </li><li>initç¨‹åºæ‰§è¡Œ/etc/rc.d/rc.sysinitæ–‡ä»¶  </li><li>å¯åŠ¨æ ¸å¿ƒçš„å¤–æŒ‚æ¨¡å—  </li><li>initæ‰§è¡Œè¿è¡Œçš„å„ä¸ªæ‰¹å¤„ç†æ–‡ä»¶ï¼ˆscriptsï¼‰  </li><li>initæ‰§è¡Œ/etc/rc.d/rc.local  </li><li>æ‰§è¡Œ/bin/loginç¨‹åºï¼Œç­‰å¾…ç”¨æˆ·ç™»å½•  </li><li>ç™»å½•ä¹‹åå¼€å§‹ä»¥shellæ§åˆ¶ä¸»æœº  </li></ol><h2 id="å…·ä½“æµç¨‹ï¼š"><a href="#å…·ä½“æµç¨‹ï¼š" class="headerlink" title="å…·ä½“æµç¨‹ï¼š"></a>å…·ä½“æµç¨‹ï¼š</h2><h3 id="1-POSTåŠ ç”µè‡ªæ£€"><a href="#1-POSTåŠ ç”µè‡ªæ£€" class="headerlink" title="1. POSTåŠ ç”µè‡ªæ£€"></a>1. POSTåŠ ç”µè‡ªæ£€</h3><p>æŒ‰ä¸‹ç”µæºé”®åROMèŠ¯ç‰‡ä¸­çš„CMOSç¨‹åºæ‰§è¡Œå¹¶æ£€æµ‹CPUã€å†…å­˜ç­‰è®¾å¤‡æ˜¯å¦å­˜åœ¨å¹¶æ­£å¸¸è¿è¡Œï¼ŒCMOSä¸­çš„ç¨‹åºå«BIOSï¼Œå¯ä»¥è®¾ç½®ç¡¬ç›˜æ¥å£ï¼Œç½‘å¡å£°å¡å¼€å…³ä¹‹ç±»çš„ç®€å•è®¾ç½®ã€‚ä¸€èˆ¬ä¸»æ¿ä¸Šæœ‰ä¸€ä¸ªçº½æ‰£ç”µæ± ï¼Œè¿™ä¸ªç”µæ± å°±æ˜¯ç»™ROMä¾›ç”µçš„ï¼Œå¯ä»¥ä¿è¯ä¸»æ¿æ–­ç”µåBIOSçš„ä¸€äº›åŸºæœ¬è®¾ç½®ä¸ä¼šé‡ç½®ã€‚  </p><h3 id="2-å¼•å¯¼åŠ è½½æ¬¡åºBoot-Sequence"><a href="#2-å¼•å¯¼åŠ è½½æ¬¡åºBoot-Sequence" class="headerlink" title="2. å¼•å¯¼åŠ è½½æ¬¡åºBoot Sequence"></a>2. å¼•å¯¼åŠ è½½æ¬¡åºBoot Sequence</h3><p>åœ¨ç³»ç»Ÿå¯åŠ¨å‰è®¡ç®—æœºæ˜¯ä¸çŸ¥é“ä½ ç³»ç»Ÿæ˜¯åœ¨å“ªé‡Œçš„ï¼Œéœ€è¦æŒ‰ç…§è®¾å¤‡å¯åŠ¨é¡ºåºä¸€æ¬¡æŸ¥æ‰¾å¼•å¯¼åŠ è½½å™¨BootLoaderï¼Œè¿™ä¸ªæŸ¥æ‰¾æ¬¡åºå¯ä»¥è‡ªå·±åœ¨BIOSä¸­è®¾å®šï¼Œä¸€èˆ¬åœ¨booté€‰é¡¹ä¸­è®¾ç½®ã€‚  </p><h3 id="3-å¼•å¯¼åŠ è½½å™¨BootLoader"><a href="#3-å¼•å¯¼åŠ è½½å™¨BootLoader" class="headerlink" title="3. å¼•å¯¼åŠ è½½å™¨BootLoader"></a>3. å¼•å¯¼åŠ è½½å™¨BootLoader</h3><p>å‰é¢è¯´äº†è®¡ç®—æœºæ˜¯ä¸çŸ¥é“ç³»ç»Ÿåœ¨å“ªé‡Œçš„ï¼Œæ‰€ä»¥éœ€è¦ç¨‹åºè¿›è¡Œå¼•å¯¼ï¼Œè¿™ä¸ªå¼•å¯¼çš„ç¨‹åºå°±å«BootLoaderï¼Œä¸åŒæ“ä½œç³»ç»Ÿçš„BootLoaderæ˜¯ä¸åŒçš„ï¼ŒWindowsä½¿ç”¨çš„BootLoaderç¨‹åºæ˜¯ntloaderï¼Œåªèƒ½å¯¹Windowsè¿›è¡Œå¼•å¯¼ä¸èƒ½å¯¹å…¶å®ƒç³»ç»Ÿè¿›è¡Œå¼•å¯¼ï¼Œè€ŒLinuxçš„BootLoaderå«GRUBï¼Œå¯ä»¥å¯¹å…¶å®ƒæ“ä½œç³»ç»Ÿè¿›è¡Œå¼•å¯¼ï¼ˆåŒ…æ‹¬Windowsï¼‰ï¼Œæ­£æ˜¯å› ä¸ºè¿™æ ·ï¼Œæ‰€ä»¥åœ¨è£…æœ‰Windowsåˆæœ‰Linuxçš„åŒç³»ç»Ÿçš„æ—¶å€™ï¼Œéœ€è¦å…ˆè£…Windowsï¼Œå†è£…Linuxã€‚<br>åŠŸèƒ½ï¼šæä¾›ä¸€ä¸ªèœå•ï¼Œå…è®¸ç”¨æˆ·é€‰æ‹©è¦å¯åŠ¨ç³»ç»Ÿæˆ–ä¸åŒå†…æ ¸ç‰ˆæœ¬ï¼›æŠŠç”¨æˆ·é€‰å®šçš„å†…æ ¸è£…è½½åˆ°å†…å­˜ä¸­çš„ç‰¹å®šç©ºé—´ä¸­ï¼Œè§£å‹ã€å±•å¼€ï¼Œå¹¶æŠŠç³»ç»Ÿæ§åˆ¶æƒç§»äº¤ç»™å†…æ ¸ã€‚<br>BootLoaderçš„å¼•å¯¼ç¨‹åºGRUBæ”¾åœ¨MBRä¸­ã€‚<br>GRUBï¼šåˆ†ä¸‰ä¸ªé˜¶æ®µï¼ˆ1å’Œ1.5å’Œ2ï¼‰<br>1ã€è¿è¡ŒBootLoaderä¸»ç¨‹åºï¼ŒMBRçš„å‰446å­—èŠ‚ï¼›<br>1.5ã€æ–‡ä»¶ç³»ç»Ÿè¯†åˆ«ç¨‹åºæ”¾åœ¨MBRåé¢çš„æ‰‡åŒºä¸­ï¼Œç”¨äºè¯†åˆ«2æ‰€åœ¨åˆ†åŒºçš„æ–‡ä»¶ç³»ç»Ÿï¼›<br>2ã€é€šè¿‡BootLoaderåŠ è½½æ‰€æœ‰é…ç½®æ–‡ä»¶åŠç›¸å…³çš„ç¯å¢ƒå‚æ•°ä¿¡æ¯ï¼Œè¿™äº›é…ç½®æ–‡ä»¶åŠç›¸å…³çš„ç¯å¢ƒå‚æ•°éƒ½å­˜æ”¾äºç£ç›˜åˆ†åŒºä¸Šçš„/bootç›®å½•ä¸‹  </p><h3 id="4-å¼•å¯¼åŠ è½½å™¨ç¨‹åºGRUB"><a href="#4-å¼•å¯¼åŠ è½½å™¨ç¨‹åºGRUB" class="headerlink" title="4. å¼•å¯¼åŠ è½½å™¨ç¨‹åºGRUB"></a>4. å¼•å¯¼åŠ è½½å™¨ç¨‹åºGRUB</h3><p><code>grub legacy</code><br>å‰é¢æåˆ°çš„GRUBæ˜¯BootLoaderé˜¶æ®µçš„ä¸€ä¸ªç¨‹åºï¼Œè¿™æ˜¯CentOSä¸­æœ€å¸¸è§çš„å¼•å¯¼ç¨‹åºï¼ŒCentOS 6å®‰è£…çš„æ˜¯<code>grub legacy</code><br><img src="/medias/drawing-bed/bootstrap/3.png"></p><p>æŒ‰eï¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œç”¨äºç¼–è¾‘èœå•<br><img src="/medias/drawing-bed/bootstrap/4.png"></p><p>æŒ‰cï¼šè¿›å…¥å‘½ä»¤æ¨¡å¼ï¼Œäº¤äº’å¼æ¥å£<br><img src="/medias/drawing-bed/bootstrap/5.png"></p><p>å¸¸ç”¨é…ç½®ï¼š<br><code>default=#</code>ï¼šè®¾å®šé»˜è®¤å¯åŠ¨çš„èœå•é¡¹ï¼›è½å•é¡¹titleç¼–å·ä»0å¼€å§‹<br><code>timeout=#</code>ï¼šæŒ‡å®šèœå•é¡¹ç­‰å¾…é€‰é¡¹é€‰æ‹©çš„æ—¶é•¿<br><code>kernel /PATH/TO/VMLINUZ_FILE</code>ï¼šå¯åŠ¨çš„å†…æ ¸<br><code>password --md5 STRING</code>ï¼šå¯åŠ¨é€‰å®šçš„å†…æ ¸æˆ–æ“ä½œç³»ç»Ÿæ—¶è¿›è¡Œè®¤è¯  </p><h3 id="5-è¿›å…¥kernel"><a href="#5-è¿›å…¥kernel" class="headerlink" title="5. è¿›å…¥kernel"></a>5. è¿›å…¥kernel</h3><p>åœ¨GRUBä¸­é€‰æ‹©å¯¹åº”çš„kernelè¿›å…¥ï¼Œç„¶åkernelä¼šå¯¹è‡ªèº«è¿›è¡Œåˆå§‹åŒ–<br>æ¢æµ‹å¯è¯†åˆ«åˆ°çš„æ‰€æœ‰ç¡¬ä»¶è®¾å¤‡<br>åŠ è½½ç¡¬ä»¶é©±åŠ¨ç¨‹åº<br>ä»¥åªè¯»æ–¹å¼æŒ‚è½½æ ¹æ–‡ä»¶ç³»ç»Ÿ<br>è¿è¡Œç”¨æˆ·ç©ºé—´çš„ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œåœ¨CentOS 6ä¸Šæ˜¯initï¼Œåœ¨CentOS 7ä¸Šæ˜¯systemd<br>kernelï¼šå†…æ ¸æ ¸å¿ƒï¼Œä¸€èˆ¬ä¸ºbzimageï¼Œé€šå¸¸åœ¨/bootç›®å½•ä¸‹ï¼Œåç§°ä¸ºvmlinuz-version-release<br>kernel objectï¼šå†…æ ¸å¯¹è±¡ï¼Œä¸€èˆ¬æ”¾ç½®äº<code>/lib/modules/version-release/</code>  </p><h3 id="6-è¿è¡Œinit"><a href="#6-è¿è¡Œinit" class="headerlink" title="6. è¿è¡Œinit"></a>6. è¿è¡Œinit</h3><p>CentOS 6ä¸Šinitæ‰€åœ¨çš„ä½ç½®æ˜¯åœ¨/sbin/initï¼Œinitå…±åˆ†ä¸º7ä¸ªçº§åˆ«<br>0å…³æœº<br>1å•ç”¨æˆ·æ¨¡å¼ï¼ˆrootæ— é¡»ç™»å½•ï¼‰ï¼Œsingleï¼Œç»´æŠ¤æ¨¡å¼<br>2å¤šç”¨æˆ·æ¨¡å¼ï¼Œä¼šå¯åŠ¨ç½‘ç»œåŠŸèƒ½ï¼Œä½†ä¸ä¼šå¯åŠ¨NFSï¼Œç»´æŠ¤æ¨¡å¼<br>3å¤šç”¨æˆ·æ¨¡å¼ï¼Œæ­£å¸¸æ¨¡å¼ï¼Œå­—ç¬¦ç»ˆç«¯<br>4é¢„ç•™çº§åˆ«ï¼Œå¯åŒ3çº§<br>5å¤šç”¨æˆ·æ¨¡å¼ï¼Œæ­£å¸¸æ¨¡å¼ï¼Œå›¾å½¢ç•Œé¢<br>6é‡å¯  </p><p><code>runlevel</code>å’Œ<code>who -r</code> å¯ä»¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿè¿è¡Œçš„initçº§åˆ«<br><code>runlevel</code>å‘½ä»¤ï¼šç¬¬ä¸€ä¸ªå­—ç¬¦ï¼Œä¸Šæ¬¡æ‰€åœ¨çº§åˆ«ï¼›ç¬¬äºŒä¸ªå­—ç¬¦ï¼Œå½“å‰æ‰€åœ¨çº§åˆ«<br><img src="/medias/drawing-bed/bootstrap/6.png"></p><p><code>vim /etc/inittab</code>ï¼ˆæœ€åä¸€è¡Œï¼Œä¿®æ”¹è¿è¡Œçº§åˆ«ï¼Œé‡å¯åè¿è¡Œä¿®æ”¹åçš„çº§åˆ«ï¼‰<br><img src="/medias/drawing-bed/bootstrap/7.png"><br><img src="/medias/drawing-bed/bootstrap/8.png"></p><h3 id="7-è¿è¡Œç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬"><a href="#7-è¿è¡Œç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬" class="headerlink" title="7. è¿è¡Œç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬"></a>7. è¿è¡Œç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬</h3><p>ç³»ç»Ÿåˆå§‹åŒ–è„šæœ¬å¯¹åº”çš„æ–‡ä»¶æ˜¯<code>/etc/rc.d/rc.sysinit</code><br><img src="/medias/drawing-bed/bootstrap/9.png"></p><h3 id="8-å¯åŠ¨ç³»ç»ŸæœåŠ¡"><a href="#8-å¯åŠ¨ç³»ç»ŸæœåŠ¡" class="headerlink" title="8. å¯åŠ¨ç³»ç»ŸæœåŠ¡"></a>8. å¯åŠ¨ç³»ç»ŸæœåŠ¡</h3><p>CentOS 6ä¸‹çš„ç³»ç»ŸæœåŠ¡è„šæœ¬éƒ½æ”¾åœ¨/etc/init.dä¸­ï¼Œå¯ä»¥çœ‹åˆ°ä¸¤ä¸ªæ–‡ä»¶ä¸­çš„å†…å®¹æ˜¯ä¸€æ ·çš„ï¼Œå› ä¸º/etc/init.dé“¾æ¥åˆ°äº†/etc/rc.d/init.dä¸­<br><img src="/medias/drawing-bed/bootstrap/10.png"><br><img src="/medias/drawing-bed/bootstrap/11.png"></p><p>é€šè¿‡chkconfigå‘½ä»¤å¯ä»¥æŸ¥çœ‹ä»€ä¹ˆç³»ç»Ÿçº§åˆ«ä¸‹å¼€å¯äº†å“ªäº›æœåŠ¡ï¼Œä»¥åŠæ·»åŠ æœåŠ¡åˆ°ç³»ç»Ÿä¸­å¹¶åœ¨æŒ‡å®šçº§åˆ«ä¸‹å¯åŠ¨<br><code>chkconfig --list</code>ï¼šæŸ¥çœ‹ä»€ä¹ˆç³»ç»Ÿçº§åˆ«ä¸‹å¼€å¯äº†å“ªäº›æœåŠ¡<br><img src="/medias/drawing-bed/bootstrap/12.png"></p><p><code>chkconfig --add æœåŠ¡å</code>ï¼šæ·»åŠ æœåŠ¡åˆ°ç³»ç»Ÿä¸­å¹¶åœ¨æŒ‡å®šçº§åˆ«ä¸‹å¯åŠ¨ï¼ˆï¼Ÿï¼Ÿåœ¨æ·»åŠ çš„æ—¶å€™éœ€è¦å°†å¯¹åº”çš„æœåŠ¡æ”¾å…¥æ”¾å…¥/etc/init.dä¸­ï¼Œå¹¶åœ¨æœåŠ¡è„šæœ¬ä¸­åŠ å…¥chkconfigï¼šLLLL nn nnï¼‰<br>å†™åˆ°LLLLçš„initçº§åˆ«å°±æ˜¯Sçš„ï¼Œæ²¡å†™çš„å°±æ˜¯Kçš„ï¼Œç¬¬ä¸€ä¸ªnnä»£è¡¨Sçš„æ•°å­—ï¼Œç¬¬äºŒä¸ªnnä»£è¡¨Kçš„æ•°å­—ï¼Ÿï¼Ÿï¼Ÿ<br><code>chkconfig --del æœåŠ¡å</code>ï¼šåˆ é™¤æœåŠ¡<br><img src="/medias/drawing-bed/bootstrap/13.png"></p><p>ï¼ˆæ³¨æ„ï¼šæ­£å¸¸çº§åˆ«ä¸‹ï¼Œæœ€åå¯åŠ¨ä¸€ä¸ªæœåŠ¡<code>S99local</code>æ²¡æœ‰é“¾æ¥è‡³<code>/etc/rc.d/init.d</code>ä¸€ä¸ªæœåŠ¡è„šæœ¬ï¼Œè€Œæ˜¯æŒ‡å‘äº†<code>/etc/rc.d/rc.local</code>è„šæœ¬ï¼›å› æ­¤ï¼Œä¸ä¾¿æˆ–ä¸éœ€è¦å†™ä¸ºæœåŠ¡è„šæœ¬æ”¾ç½®äº<code>/etc/rc.d/init.d/</code>ç›®å½•ï¼Œä¸”åˆæƒ³å¼€æœºæ—¶è‡ªåŠ¨è¿è¡Œçš„å‘½ä»¤ï¼Œå¯ç›´æ¥æ”¾ç½®äº<code>/etc/rc.d/rc.local</code>æ–‡ä»¶ä¸­ï¼‰  </p><h3 id="9-ç³»ç»Ÿåœ¨å¯åŠ¨å®ŒæœåŠ¡åä¼šæ‰“å°ç™»å½•æç¤ºç¬¦ï¼Œç„¶åè¾“å…¥è´¦å·å¯†ç ï¼Œè¿›å…¥å¯¹åº”çš„å‘½ä»¤è¡Œç•Œé¢æˆ–å›¾è¡Œç•Œé¢ã€‚"><a href="#9-ç³»ç»Ÿåœ¨å¯åŠ¨å®ŒæœåŠ¡åä¼šæ‰“å°ç™»å½•æç¤ºç¬¦ï¼Œç„¶åè¾“å…¥è´¦å·å¯†ç ï¼Œè¿›å…¥å¯¹åº”çš„å‘½ä»¤è¡Œç•Œé¢æˆ–å›¾è¡Œç•Œé¢ã€‚" class="headerlink" title="9. ç³»ç»Ÿåœ¨å¯åŠ¨å®ŒæœåŠ¡åä¼šæ‰“å°ç™»å½•æç¤ºç¬¦ï¼Œç„¶åè¾“å…¥è´¦å·å¯†ç ï¼Œè¿›å…¥å¯¹åº”çš„å‘½ä»¤è¡Œç•Œé¢æˆ–å›¾è¡Œç•Œé¢ã€‚"></a>9. ç³»ç»Ÿåœ¨å¯åŠ¨å®ŒæœåŠ¡åä¼šæ‰“å°ç™»å½•æç¤ºç¬¦ï¼Œç„¶åè¾“å…¥è´¦å·å¯†ç ï¼Œè¿›å…¥å¯¹åº”çš„å‘½ä»¤è¡Œç•Œé¢æˆ–å›¾è¡Œç•Œé¢ã€‚</h3><p>initè¿›ç¨‹<br>ç”±Linuxå†…æ ¸åŠ è½½è¿è¡Œ<code>/sbin/init</code>ç¨‹åºå®Œæˆçš„ï¼Œæ˜¯ç³»ç»Ÿä¸­çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œæ‰€æœ‰è¿›ç¨‹çš„çˆ¶è¿›ç¨‹ï¼ŒPIDå·æ°¸è¿œä¸º1<br><code>upstart</code> å¯åŠ¨æ–¹å¼<br>å°†åˆå§‹åŒ–é…ç½®åˆ†æ•£å­˜æ”¾ï¼Œå“åº”ä¸åŒçš„å¯åŠ¨äº‹ä»¶ï¼ˆå°±æ˜¯ä¸ä¼šå†å»è¯»å–æ‰€æœ‰çš„åˆå§‹åŒ–é…ç½®æ–‡ä»¶ï¼Œè€Œæ˜¯æœ‰ä»€ä¹ˆæ ·çš„äº‹ä»¶ï¼Œå°±æŠŠå“åº”çš„é…ç½®æ–‡ä»¶è¯»å–å‡ºæ¥ç”Ÿæ•ˆï¼‰<br>é…ç½®æ–‡ä»¶ï¼š<code>/etc/inittab</code>ï¼Œ<code>/etc/init/*.conf</code><br>CentOS 6 <code>/etc/inittab</code>å’Œç›¸å…³æ–‡ä»¶<br><code>/etc/inittab</code><br>è®¾ç½®ç³»ç»Ÿé»˜è®¤çš„è¿è¡Œçº§åˆ«<br>idï¼šçº§åˆ«ï¼šinitdefaultï¼š  </p><p><code>/etc/init/control-alt-delete.conf</code><br>æ§åˆ¶ç»ˆç«¯ä¸‹çš„Ctrl+Alt+Delçƒ­é”®æ“ä½œ  </p><p><code>/etc/init/tty.conf</code><br>æ§åˆ¶ttyç»ˆç«¯çš„å¼€å¯  </p><p><code>/etc/init/start-ttys.conf</code><br>é…ç½®ttyç»ˆç«¯çš„å¼€å¯æ•°é‡ï¼Œè®¾å¤‡æ–‡ä»¶  </p><p><code>/etc/init/rc.conf</code><br>å…¼å®¹è„šæœ¬ï¼Œè´Ÿè´£å„è¿è¡Œçº§åˆ«çš„è°ƒç”¨å¤„ç†  </p><p><code>/etc/inittab</code>æ–‡ä»¶ç»“æ„<br>å­—æ®µï¼šè¯´æ˜ï¼ˆæœ€åä¸€è¡Œï¼‰<br>idï¼šä¸€ä¸ªä»»åŠ¡çš„æ ‡è¯†ç¬¦<br>runlevelsï¼šåœ¨å“ªäº›çº§åˆ«å¯åŠ¨æ­¤æœåŠ¡ï¼Œä¹Ÿå¯ä»¥ä¸ºç©ºï¼Œè¡¨ç¤ºæ‰€æœ‰çº§åˆ«<br>actionï¼šç”¨äºæè¿°åœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹å¯åŠ¨<br>processï¼šç”¨äºè®¾ç½®å¯åŠ¨è¿›ç¨‹æ‰€æ‰§è¡Œçš„å‘½ä»¤<br>æœåŠ¡æ§åˆ¶åŠåˆ‡æ¢è¿è¡Œçº§åˆ«<br>æœåŠ¡çš„å¯åŠ¨åœæ­¢æ˜¯é€šè¿‡<code>/etc/rc.d/rc3.d/</code>ä¸‹çš„æ‰€æœ‰é“¾æ¥æ–‡ä»¶æ¥å†³å®šå¦‚ä½•å¯åŠ¨æˆ–å…³é—­æœåŠ¡çš„  </p><p><code>/etc/rc.d/rc3.d</code>ä¸‹çš„æ‰€æœ‰é“¾æ¥æ–‡ä»¶å…¶å®éƒ½æ˜¯åœ¨<code>/etc/init.d/</code>ä¸‹é¢çš„æ‰€æœ‰è„šæœ¬ï¼Œè¿™äº›è„šæœ¬æ¥å—è‡³å°‘å››ä¸ªåŸºæœ¬å‚æ•°ï¼ˆå¯åŠ¨startã€å…³é—­stopã€é‡å¯restartã€æœåŠ¡çŠ¶æ€statusã€é‡æ–°åŠ è½½reloadï¼‰  </p><h1 id="æœåŠ¡ç®¡ç†"><a href="#æœåŠ¡ç®¡ç†" class="headerlink" title="æœåŠ¡ç®¡ç†"></a>æœåŠ¡ç®¡ç†</h1><p>service æœåŠ¡å å‚æ•°<br>ä¾‹ï¼š<code>service httpd stop</code>  </p><p>æŸ¥çœ‹åŠåˆ‡æ¢è¿è¡Œçº§åˆ«<br>æŸ¥çœ‹è¿è¡Œçº§åˆ«ï¼š<br><code>runlevel</code>  </p><p>ä¸´æ—¶åˆ‡æ¢è¿è¡Œçº§åˆ«ï¼š<br><code>init #</code>ï¼ˆ0-6ï¼‰  </p><p>chkconfigå·¥å…·<br>é€šè¿‡chkconfigå‘½ä»¤æ¥ç®¡ç†æœåŠ¡<br>æ§åˆ¶æŸæœåŠ¡åœ¨æŸæœåŠ¡åœ¨æŸç§è¿è¡Œçº§åˆ«ä¸­çš„å¼€å¯/å…³é—­çŠ¶æ€<br><code>chkconfig --level çº§åˆ« æœåŠ¡ on|off</code> ï¼ˆé»˜è®¤çº§åˆ«ä¸º2345ï¼‰   </p><p>æŸ¥çœ‹æœåŠ¡åœ¨å¯¹åº”çº§åˆ«çš„çŠ¶æ€ï¼š<br><code>chkconfig --list æœåŠ¡</code>  </p><p>æ·»åŠ æœåŠ¡ï¼š<br><code>chkconfig --add æœåŠ¡</code>  </p><p>åˆ é™¤æœåŠ¡ï¼š<br><code>chkconfig --del æœåŠ¡</code>  </p><h1 id="Grubç®¡ç†"><a href="#Grubç®¡ç†" class="headerlink" title="Grubç®¡ç†"></a>Grubç®¡ç†</h1><p>GRUBé…ç½®æ–‡ä»¶ï¼š<code>/boot/grub/grub.conf</code>   </p><p>æ¯è¡Œå†…å®¹ï¼š<br>Defaultï¼šè®¾å®šé»˜è®¤å¯åŠ¨çš„å†…æ ¸å’Œæ“ä½œç³»ç»Ÿï¼Œå¦‚æœåŒæ—¶æŒ‰è£…äº†å¤šä¸ªæ“ä½œç³»ç»Ÿæˆ–å†…æ ¸ï¼Œ0è¡¨ç¤ºå®šä¹‰çš„ç¬¬ä¸€ä¸ªtitleç³»ç»Ÿï¼Œ1è¡¨ç¤ºå®šä¹‰çš„ç¬¬äºŒä¸ªtitleç³»ç»Ÿï¼Œä¾æ¬¡ç±»æ¨  </p><p>Timeoutï¼šè®¾å®šç³»ç»Ÿå¯åŠ¨æ—¶é€‰æ‹©æ“ä½œç³»ç»Ÿèœå•çš„ç­‰å¾…æ—¶é—´ï¼ˆç§’ï¼‰<br>Splashimageï¼šè®¾å®šç³»ç»Ÿå¯åŠ¨æ—¶grubèœå•çš„èƒŒæ™¯å›¾ç‰‡ã€‚å›¾ç‰‡æ ¼å¼ä¸ºxpmï¼Œ14bitsé¢œè‰²ï¼Œå¤§å°ä¸º640x480ï¼Œéœ€è¦gzipå‹ç¼©<br>Hiddenmenuï¼šéšè—é€‰æ‹©èœå•ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸æ˜¾ç¤ºèœå•ä¿¡æ¯ï¼Œå¦‚æœæƒ³è¦æ˜¾ç¤ºèœå•ï¼Œå°†è¯¥é…ç½®æ³¨é‡Šå³å¯<br>Titleï¼šå®šä¹‰ä¸€ä¸ªæ“ä½œç³»ç»Ÿæˆ–ç³»ç»Ÿå†…æ ¸<br>Rootï¼šæŒ‡æ˜å¼•å¯¼å½“å‰æ“ä½œç³»ç»Ÿæˆ–å†…æ ¸æ–‡ä»¶æ‰€åœ¨çš„åˆ†åŒº<br>Kernelï¼šæŒ‡å®šæ–‡ä»¶è·¯å¾„ã€æ ¹æ–‡ä»¶ç³»ç»Ÿæ‰€åœ¨è®¾å¤‡ï¼Œä»¥åŠä¼ é€’ç»™å†…æ ¸çš„å‚æ•°ã€‚ç”±äºå¯åŠ¨è¿‡ç¨‹ä¸­éœ€è¦æŒ‚è½½æ ¹ç›®å½•ï¼Œå› æ­¤éœ€è¦æŒ‡å®šæ ¹ç›®å½•æ‰€åœ¨çš„åˆ†åŒºã€‚å†…æ ¸å‚æ•°rhgbè¡¨ç¤ºè‰²å½©æ˜¾ç¤ºï¼Œquietè¡¨ç¤ºé™é»˜æ¨¡å¼åŠ è½½å†…æ ¸<br>Initrdï¼šæŒ‡å®šç”¨äºè¾…åŠ©å†…æ ¸å®Œæˆç³»ç»Ÿå¯åŠ¨çš„ramdiskæ–‡ä»¶è·¯å¾„  </p><p>GRUBèœå•åŠ å¯†ä¿æŠ¤<br>é»˜è®¤è¿›å…¥GRUBèœå•åä¸éœ€è¦å¯†ç å°±å¯ä»¥è¿›è¡Œç¼–è¾‘ï¼Œç›¸å¯¹æ¥è¯´æ¯”è¾ƒå±é™©ï¼Œä¿®æ”¹grub.confé…ç½®æ–‡ä»¶ä¸ºGRUBèœå•è®¾ç½®å¯†ç ä¿æŠ¤ï¼Œåœ¨grub.confæ–‡ä»¶ä¸­çš„titleå­—æ®µä¸Šé¢æ–°å¢ä¸€è¡Œ<code>password --md5 ****</code>ï¼ˆmd5åŠ å¯†ï¼‰  </p><p>å¯ä»¥ä½¿ç”¨<code>grub-md5-crypt</code>ç”Ÿæˆmd5åŠ å¯†çš„å¯†ç   </p><p>åŠ å¯†åå†æ¬¡è¿›å…¥GRUBèœå•æ—¶ç¼–è¾‘é¡»æŒ‰â€œpâ€è¾“å…¥GRUBå¯†ç ï¼Œæ‰èƒ½ç¼–è¾‘<br><img src="/medias/drawing-bed/bootstrap/14.png"><br>ï¼ˆæŒ‰â€œpâ€è¾“å…¥å¯†ç ï¼‰<br><img src="/medias/drawing-bed/bootstrap/15.png"></p><h1 id="å¯åŠ¨æ’é”™"><a href="#å¯åŠ¨æ’é”™" class="headerlink" title="å¯åŠ¨æ’é”™"></a>å¯åŠ¨æ’é”™</h1><p>ç ´è§£rootå£ä»¤<br>ä¸¤ç§æ–¹æ³•ï¼š<br>æ–¹æ³•ä¸€ï¼šé€šè¿‡å•ç”¨æˆ·æ¨¡å¼ï¼ˆinit 1|sï¼‰è¿›è¡Œç ´è§£<br>GRUBèœå•æ—¶æŒ‰eâ†’sæˆ–1â†’å›è½¦ï¼ŒæŒ‰b<br><img src="/medias/drawing-bed/bootstrap/16.png"><br>ï¼ˆæŒ‰eï¼‰<br><img src="/medias/drawing-bed/bootstrap/17.png"><br>ï¼ˆæŒ‰eï¼‰<br><img src="/medias/drawing-bed/bootstrap/18.png"><br>ï¼ˆæŒ‰ç©ºæ ¼ï¼Œè¾“å…¥sæˆ–1å›è½¦ï¼‰<br><img src="/medias/drawing-bed/bootstrap/19.png"><br>ï¼ˆæŒ‰bè¿›å…¥å•ç”¨æˆ·æ¨¡å¼ï¼Œé»˜è®¤rootç™»å½•ï¼‰<br><img src="/medias/drawing-bed/bootstrap/20.png"><br><img src="/medias/drawing-bed/bootstrap/21.png"><br>ï¼ˆè¾“å…¥passwdæ›´æ”¹rootå¯†ç ï¼‰<br>æ–¹æ³•äºŒï¼šé€šè¿‡æ•‘æ´æ¨¡å¼ç ´è§£<br>è¿›å…¥æ•‘æ´æ¨¡å¼åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤<br><img src="/medias/drawing-bed/bootstrap/22.png"><br>ï¼ˆå¼€æœºæŒ‰F2è¿›å…¥BIOSï¼‰<br><img src="/medias/drawing-bed/bootstrap/23.png"><br>ï¼ˆé€šè¿‡å·¦å³é”®é€‰æ‹©bootç›®å½•ï¼‰<br><img src="/medias/drawing-bed/bootstrap/24.png"><br>ï¼ˆé€šè¿‡+/-å°†CD-ROMç§»åˆ°ç¬¬ä¸€ä¸ªï¼‰<br><img src="/medias/drawing-bed/bootstrap/25.png"><br>ï¼ˆæŒ‰F10ä¿å­˜é€€å‡ºï¼‰<br><img src="/medias/drawing-bed/bootstrap/26.png"><br>ï¼ˆé€‰æ‹©Rescue installed systemå›è½¦ï¼‰<br><img src="/medias/drawing-bed/bootstrap/27.png"><br>ï¼ˆä¸€è·¯å›è½¦ï¼Œé‡åˆ°Setup networkingé€‰Noå›è½¦ï¼‰<br><img src="/medias/drawing-bed/bootstrap/28.png"><br>ï¼ˆæ¥ç€ä¸€è·¯å›è½¦ï¼Œè¿›å…¥bash-4.1#ï¼‰<br>chroot /mnt/sysimage å°†ç›®å½•ç»“æ„åˆ‡æ¢åˆ°å¾…ä¿®å¤çš„Linuxç³»ç»Ÿä¸­<br><img src="/medias/drawing-bed/bootstrap/29.png"><br>ï¼ˆè¿›å…¥sh-4.1#ï¼‰<br>passwd rootæ›´æ”¹rootå¯†ç ï¼ˆè¾“å…¥æ–°å¯†ç ï¼‰<br><img src="/medias/drawing-bed/bootstrap/30.png"><br>exité€€å‡ºåˆ°bash-4.1#<br><img src="/medias/drawing-bed/bootstrap/31.png"><br>rebooté‡å¯<br><img src="/medias/drawing-bed/bootstrap/32.png"><br>æ›´æ”¹å¼•å¯¼æ–¹å¼å¯åŠ¨å³å¯ï¼ˆå°†CD-ROMç§»åˆ°ä¸‹é¢å³å¯ï¼Œé‡å¯ï¼‰<br><img src="/medias/drawing-bed/bootstrap/33.png"><br>ä¿®å¤MBRæ‰‡åŒºæ•…éšœ<br>å¦‚æœå¼•å¯¼è¿‡ç¨‹å‡ºç°æ•…éšœï¼ŒLinuxæ˜¯æ— æ³•å¯åŠ¨çš„<br>ç¬¬ä¸€ä¸ªMBRæ‰‡åŒºä¸­æ”¾ç½®äº†grubå¼•å¯¼ç¨‹åºå’Œåˆ†åŒºè¡¨<br>æ•…éšœåŸå› ï¼šç—…æ¯’ã€æœ¨é©¬ç­‰é€ æˆçš„ç ´åï¼›ä¸æ­£ç¡®çš„åˆ†åŒºæ“ä½œã€ç£ç›˜è¯»å†™è¯¯æ“ä½œ<br>æ•…éšœç°è±¡ï¼šæ‰¾ä¸åˆ°å¼•å¯¼ç¨‹åºï¼Œå¯åŠ¨ä¸­æ–­ï¼›æ— æ³•åŠ è½½æ“ä½œç³»ç»Ÿã€å¼€æœºåé»‘å±ï¼›æç¤ºâ€œOperating System not foundâ€<br>è§£å†³æ€è·¯ï¼šåº”æå‰åšå¥½å¤‡ä»½æ–‡ä»¶ï¼›ä»¥å…‰ç›˜å¼•å¯¼è¿›å…¥æ€¥æ•‘æ¨¡å¼ï¼›ä»å¤‡ä»½æ–‡ä»¶ä¸­æ¢å¤<br>å®ä¾‹ï¼š<br>1ã€å¤‡ä»½MBRæ‰‡åŒºæ•°æ®ï¼ˆæ³¨æ„ï¼šè¦å¤‡ä»½åˆ°å¦ä¸€å—ç¡¬ç›˜ä¸­ï¼‰<br><code>mkdir /backup</code> åˆ›å»ºæŒ‚è½½ç‚¹<br><code>mount /dev/sdb /backup</code> æŒ‚è½½/dev/sdbåˆ°/backup<br>ä½¿ç”¨ddå‘½ä»¤å¤‡ä»½<br><code>dd if=/dev/sda of=/backup/mbr.bak bs=512æˆ–446 count=1</code><br>2ã€æ¨¡æ‹ŸMBRæ‰‡åŒºæ•…éšœ<br><code>dd if=/dev/zero of=/dev/sda bs=512æˆ–446 count=1</code>  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿›ç¨‹ç®¡ç†</title>
      <link href="/posts/2b2d.html"/>
      <url>/posts/2b2d.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="è¿›ç¨‹æ¦‚å¿µ"><a href="#è¿›ç¨‹æ¦‚å¿µ" class="headerlink" title="è¿›ç¨‹æ¦‚å¿µ"></a>è¿›ç¨‹æ¦‚å¿µ</h1><p>å†…æ ¸çš„ä½œç”¨ï¼šè¿›ç¨‹ç®¡ç†ã€æ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œåŠŸèƒ½ã€å†…å­˜ç®¡ç†ã€é©±åŠ¨ç¨‹åºã€å®‰å…¨åŠŸèƒ½ç­‰<br>Processï¼ˆè¿›ç¨‹ï¼‰ï¼šè¿è¡Œä¸­çš„ç¨‹åºçš„ä¸€ä¸ªå‰¯æœ¬ï¼Œæ˜¯è¢«è½½å…¥å†…å­˜çš„ä¸€ä¸ªæŒ‡ä»¤é›†åˆ<br>ç¨‹åºè¢«è§¦å‘åï¼Œæ‰§è¡Œè€…çš„æƒé™ä¸å±æ€§ã€ç¨‹åºçš„ä»£ç æ‰€éœ€èµ„æ–™éƒ½ä¼šè¢«è½½å…¥åˆ°å†…å­˜ä¸­ï¼Œæ“ä½œç³»ç»Ÿç»™äºˆè¿™äº›å†…å­˜å•å…ƒä¸€ä¸ªè¯†åˆ«ç ï¼ˆpidï¼‰ï¼Œå¯ä»¥è¯´ï¼Œè¿›ç¨‹å°±æ˜¯ä¸€ä¸ªæ­£åœ¨è¿ä½œçš„ç¨‹åºã€‚  </p><h2 id="è¿›ç¨‹å­˜åœ¨ç”Ÿå‘½å‘¨æœŸ"><a href="#è¿›ç¨‹å­˜åœ¨ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="è¿›ç¨‹å­˜åœ¨ç”Ÿå‘½å‘¨æœŸ"></a>è¿›ç¨‹å­˜åœ¨ç”Ÿå‘½å‘¨æœŸ</h2><p>Programï¼ˆç¨‹åºï¼‰ï¼šé€šå¸¸ä¸ºbinary program , æ”¾ç½®åœ¨å­˜å‚¨åª’ä»‹ä¸­ï¼Œï¼ˆå¦‚ç¡¬ç›˜ï¼Œå…‰ç›˜ç­‰ï¼‰ï¼Œä»¥å®ä½“æ–‡ä»¶çš„å½¢æ€å­˜åœ¨ã€‚<br>Threadï¼ˆçº¿ç¨‹ï¼‰ï¼šæ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ã€‚å®ƒè¢«åŒ…å«åœ¨è¿›ç¨‹ä¹‹ä¸­ï¼Œæ˜¯è¡Œç¨‹ä¸­çš„å®é™…è¿ä½œå•ä½ã€‚ä¸€æ¡çº¿ç¨‹æŒ‡çš„æ˜¯è¿›ç¨‹ä¸­ä¸€ä¸ªå•ä¸€é¡ºåºçš„æ§åˆ¶æµï¼Œä¸€ä¸ªè¿›ç¨‹ä¸­å¯ä»¥å¹¶è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œæ¯æ¡çº¿ç¨‹å¹¶è¡Œæ‰§è¡Œä¸åŒçš„ä»»åŠ¡ã€‚<br>ä¸€èˆ¬ï¼Œçº¿ç¨‹å…·æœ‰å°±ç»ªã€é˜»å¡å’Œè¿è¡Œä¸‰ç§åŸºæœ¬çŠ¶æ€  </p><h2 id="è¿›ç¨‹åˆ›å»ºï¼š"><a href="#è¿›ç¨‹åˆ›å»ºï¼š" class="headerlink" title="è¿›ç¨‹åˆ›å»ºï¼š"></a>è¿›ç¨‹åˆ›å»ºï¼š</h2><p>init ï¼šç¬¬ä¸€ä¸ªè¿›ç¨‹<br>â€œçˆ¶å­å…³ç³»â€<br>è¿›ç¨‹éƒ½æ˜¯ç”±å…¶çˆ¶è¿›ç¨‹åˆ›å»ºï¼Œç”±COWæŠ€æœ¯å®ç°ï¼ˆå†™æ—¶å¤åˆ¶ï¼‰ï¼ˆå³ç¨‹åºä¸ºâ€œçˆ¶å­å…³ç³»â€æ—¶ï¼Œå…¶å­è¿›ç¨‹æœªè¿è¡Œæ—¶ï¼Œçˆ¶è¿›ç¨‹åªå¯¹å­è¿›ç¨‹æ ‡è®°ï¼Œå­è¿›ç¨‹è¿è¡Œæ—¶ï¼Œæ‰ä¼šå¤åˆ¶å­è¿›ç¨‹æ‰€éœ€çš„è¿è¡Œæ–‡ä»¶åˆ°/porc/PIDä¸‹ï¼‰  </p><h2 id="è¿›ç¨‹ä¼˜å…ˆçº§ï¼š"><a href="#è¿›ç¨‹ä¼˜å…ˆçº§ï¼š" class="headerlink" title="è¿›ç¨‹ä¼˜å…ˆçº§ï¼š"></a>è¿›ç¨‹ä¼˜å…ˆçº§ï¼š</h2><p>ç³»ç»Ÿä¼˜å…ˆçº§ï¼šæ•°å­—è¶Šå°ï¼Œä¼˜å…ˆçº§è¶Šé«˜<br>0-139ï¼ˆCentOS4,5ï¼‰ï¼šå„æœ‰140ä¸ªè¿è¡Œé˜Ÿåˆ—å’Œè¿‡æœŸé˜Ÿåˆ—<br>0-98,99ï¼ˆCentOS6ï¼‰<br>å®æ—¶ä¼˜å…ˆçº§ï¼š99-0ï¼šå€¼æœ€å¤§ä¼˜å…ˆçº§æœ€é«˜<br>Niceå€¼ï¼š-20åˆ°19å¯¹åº”ç³»ç»Ÿä¼˜å…ˆçº§100-139ï¼ˆCentOS4,5ï¼‰æˆ–99ï¼ˆCentOS6ï¼‰  </p><h2 id="è¿›ç¨‹ç›¸å…³æ¦‚å¿µ"><a href="#è¿›ç¨‹ç›¸å…³æ¦‚å¿µ" class="headerlink" title="è¿›ç¨‹ç›¸å…³æ¦‚å¿µ"></a>è¿›ç¨‹ç›¸å…³æ¦‚å¿µ</h2><h3 id="è¿›ç¨‹å†…å­˜ï¼š"><a href="#è¿›ç¨‹å†…å­˜ï¼š" class="headerlink" title="è¿›ç¨‹å†…å­˜ï¼š"></a>è¿›ç¨‹å†…å­˜ï¼š</h3><p>Page Frame ï¼šé¡µæ¡†ï¼Œç”¨äºå­˜å‚¨é¡µé¢æ•°æ®ï¼Œå­˜å‚¨Page 4Kï¼ˆå†…å­˜æœ‰å¤§å°ï¼Œæœ€å°çš„å­˜å‚¨ä¸ºPage 4Kï¼‰<br>LRU ï¼šè¿‘æœŸæœ€å°‘ä½¿ç”¨ç®—æ³•ï¼šé‡Šæ”¾å†…å­˜ç‰©ç†åœ°å€ç©ºé—´ï¼ˆå®é™…ä½¿ç”¨çš„å†…å­˜ç©ºé—´RSSï¼‰å’Œçº¿æ€§åœ°å€ç©ºé—´ï¼ˆå…è®¸ä½¿ç”¨çš„å†…å­˜ç©ºé—´VSZï¼‰ï¼ˆé€šè¿‡LRUç®—æ³•å°†ä¸ç»å¸¸ä½¿ç”¨çš„ã€è€çš„è¿›ç¨‹æ”¾åˆ°swapåˆ†åŒºï¼‰<br>MMUï¼šè´Ÿè´£è½¬æ¢çº¿æ€§åœ°å€å’Œç‰©ç†åœ°å€ï¼ˆè®°å½•äº†è¿›ç¨‹çš„çº¿æ€§ç©ºé—´å’Œç‰©ç†ç©ºé—´å¤§å°ï¼‰<br>IPCï¼šè¿›ç¨‹é—´é€šè®¯<br>åŒä¸€ä¸»æœºä¸Šï¼š<br>signalï¼šå‘ä¿¡å·<br>shmï¼šå…±äº«å†…å­˜ï¼ˆè¿›ç¨‹åŒæ—¶ä½¿ç”¨ä¸€å—å†…å­˜ï¼‰<br>semophoreï¼šä¿¡å·é‡ï¼Œä¸€ç§è®¡æ•°å™¨ï¼ˆå¯ä»¥å¯¹è®¿é—®çš„èµ„æºåŠ é”ï¼‰ï¼šå¤šä¸ªè¿›ç¨‹è®¿é—®æ–‡ä»¶æ—¶ï¼Œè¿›ç¨‹å¯ä»¥å¯¹è®¿é—®çš„æ–‡ä»¶åŠ é”ï¼Œå…¶å®ƒè¿›ç¨‹ä¸èƒ½è®¿é—®è¯¥æ–‡ä»¶ã€‚<br>ä¸åŒä¸»æœºä¸Šï¼š<br>rpcï¼šè¿›ç¨‹é—´è¿œç¨‹è°ƒç”¨ï¼ˆunixï¼‰<br>socketï¼šIPå’Œç«¯å£å·<br><code>netstat -ntpl</code>ï¼ˆnetstatç”¨äºæ˜¾ç¤ºç½‘ç»œçŠ¶æ€ï¼‰ï¼ˆ-aå¯ä»¥æŸ¥çœ‹æ‰€æœ‰è¿çº¿ä¸­çš„socketï¼‰  </p><h3 id="è¿›ç¨‹çŠ¶æ€"><a href="#è¿›ç¨‹çŠ¶æ€" class="headerlink" title="è¿›ç¨‹çŠ¶æ€"></a>è¿›ç¨‹çŠ¶æ€</h3><p>Linuxå†…æ ¸ï¼šæŠ¢å å¼å¤šä»»åŠ¡ï¼ˆè¿›ç¨‹åœ¨å†…å­˜ä¸­â€œæ’é˜Ÿâ€ï¼Œå‰é¢çš„è¿›ç¨‹è¿è¡Œå®Œï¼Œåé¢çš„è¿›ç¨‹ä¼šç«‹åˆ»è¿è¡Œï¼‰  </p><h3 id="è¿›ç¨‹ç±»å‹ï¼š"><a href="#è¿›ç¨‹ç±»å‹ï¼š" class="headerlink" title="è¿›ç¨‹ç±»å‹ï¼š"></a>è¿›ç¨‹ç±»å‹ï¼š</h3><p>å®ˆæŠ¤è¿›ç¨‹ï¼ˆdaemonï¼‰ï¼šåœ¨ç³»ç»Ÿå¼•å¯¼è¿‡ç¨‹ä¸­å¯åŠ¨çš„è¿›ç¨‹ï¼Œå’Œç»ˆç«¯æ— å…³<br>å‰å°è¿›ç¨‹ï¼šè·Ÿç»ˆç«¯ç›¸å…³ï¼Œé€šè¿‡ç»ˆç«¯å¯åŠ¨çš„è¿›ç¨‹<br>æ³¨æ„ï¼šä¸¤è€…å¯ä»¥ç›¸äº’è½¬åŒ–ï¼ˆé€šè¿‡å‘½ä»¤ï¼Œå¯ä»¥å°†å‰å°è¿›ç¨‹æ”¾åˆ°åå°ï¼‰  </p><h3 id="è¿›ç¨‹çŠ¶æ€ï¼š"><a href="#è¿›ç¨‹çŠ¶æ€ï¼š" class="headerlink" title="è¿›ç¨‹çŠ¶æ€ï¼š"></a>è¿›ç¨‹çŠ¶æ€ï¼š</h3><p>æ‰§è¡Œ<code>ps aux</code>å‘½ä»¤STATæ å¯æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€  </p><p>Rï¼šè¿è¡Œæ€ï¼šrunningï¼Œæ­£åœ¨è¿è¡Œ<br>&emsp;&emsp;å°±ç»ªæ€ï¼šready<br>&emsp;&emsp;ç¡çœ æ€ï¼š<br>Sï¼šå¯ä¸­æ–­ï¼šinterruptable<br>Dï¼šä¸å¯ä¸­æ–­ï¼šuninterruptable<br>Tï¼šåœæ­¢æ€ï¼šstoppedï¼Œæš‚åœäºå†…å­˜ä¸­ï¼Œä½†ä¸ä¼šè¢«è°ƒç”¨ï¼Œé™¤éæ‰‹åŠ¨å¯åŠ¨<br>Zï¼šåƒµæ­»æ€ï¼šzombieï¼Œç»“æŸè¿›ç¨‹ï¼Œçˆ¶è¿›ç¨‹ç»“æŸå‰ï¼Œå­è¿›ç¨‹ä¸å…³é—­ï¼ˆçˆ¶è¿›ç¨‹å…³é—­å­è¿›ç¨‹æœªå…³ï¼‰  </p><h2 id="ç³»ç»Ÿç®¡ç†å·¥å…·"><a href="#ç³»ç»Ÿç®¡ç†å·¥å…·" class="headerlink" title="ç³»ç»Ÿç®¡ç†å·¥å…·"></a>ç³»ç»Ÿç®¡ç†å·¥å…·</h2><p>è¿›ç¨‹çš„åˆ†ç±»ï¼š<br>&emsp;&emsp;CPU-Bound ï¼šCPUå¯†é›†å‹ï¼Œéäº¤äº’<br>&emsp;&emsp;IO-Bound ï¼šIOå¯†é›†å‹ï¼Œäº¤äº’<br>Linuxç³»ç»ŸçŠ¶æ€çš„æŸ¥çœ‹åŠç®¡ç†å·¥å…·ï¼š<code>pstree</code>ã€<code>ps</code>ã€<code>pidof</code>ã€<code>pgrep</code>ã€<code>top</code>ã€<code>pmap</code>ã€<code>vmstat</code>ã€<code>dstat</code>ã€<code>kill</code>ã€<code>pkill</code>ã€<code>job</code>ã€<code>bg</code>ã€<code>fg</code>ã€<code>nohup</code><br><code>pstree</code>ï¼šå‘½ä»¤ï¼Œæ˜¾ç¤ºæ­£åœ¨è¿è¡Œçš„ç¨‹åºæ ‘ï¼ˆçˆ¶å­å…³ç³»å›¾ï¼‰<br><code>pstree -p</code>ï¼šæ˜¾ç¤ºè¿›ç¨‹çš„pid  </p><p>psï¼šæ˜¾ç¤ºè¿›ç¨‹çŠ¶æ€<br><code>ps é€‰é¡¹</code><br>Linuxç³»ç»Ÿå„è¿›ç¨‹çš„ç›¸å…³ä¿¡æ¯å‡ä¿å­˜åœ¨/proc/PIDç›®å½•ä¸‹çš„å„æ–‡ä»¶ä¸­<br>åˆ—ä¸¾è¿›ç¨‹ps<br>é€‚ç”¨psæ¥æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ï¼ˆå›è½¦æ—¶åˆ»ï¼Œç¬é—´ï¼‰<br>æ”¯æŒé€‰é¡¹ï¼šUNIXé€‰é¡¹ å¦‚-A -e<br>é»˜è®¤æ˜¾ç¤ºå½“å‰ç»ˆç«¯ä¸­çš„è¿›ç¨‹<br><code>a</code>ï¼šæ‰€æœ‰ç»ˆç«¯ä¸­çš„è¿›ç¨‹<br><code>x</code>ï¼šåŒ…æ‹¬ä¸é“¾æ¥ç»ˆç«¯çš„è¿›ç¨‹ï¼ˆå®ˆæŠ¤è¿›ç¨‹ï¼‰<br><code>u</code>ï¼šæ˜¾ç¤ºæ‰€æœ‰è€…ä¿¡æ¯<br><code>f</code>ï¼šæ˜¾ç¤ºè¿›ç¨‹çš„çˆ¶è¿›ç¨‹<br><code>o</code>ï¼šå±æ€§â€¦ï¼šæ˜¾ç¤ºå®šåˆ¶ä¿¡æ¯ï¼ˆå¦‚pidã€commã€%cpuã€%memã€stateã€ttyã€euserã€ruserã€niceï¼‰  </p><p><code>ps aux</code> æ¯ä¸ªå­—æ®µçš„æ„æ€<br>| USER           | PID             | %CPU          | %MEM           | VSZ                   | RSS                   | TTY     | STAT         | START               | TIME           | COMMAND             |<br>| :â€”â€”â€”â€”- | :â€”â€”â€”â€”â€“ | :â€”â€”â€”â€” | :â€”â€”â€”â€”- | :â€”â€”â€”â€”â€”â€”â€“ | :â€”â€”â€”â€”â€”â€”â€“ | :â€”â€” | :â€”â€”â€”â€“ | :â€”â€”â€”â€”â€”â€” | :â€”â€”â€”â€”- | :â€”â€”â€”â€”â€”â€” |<br>| è¿›ç¨‹æ‹¥æœ‰è€…user | ä»»åŠ¡è¿›ç¨‹çš„IDpid | CPUå ç”¨ç‡%cpu | å†…å­˜ä½¿ç”¨ç‡%mem | è®¸è¯ºçš„è¿è¡Œå†…å­˜å¤§å°vsz | å®é™…ä½¿ç”¨çš„å†…å­˜å¤§å°rss | ç»ˆç«¯tty | è¿›ç¨‹çŠ¶æ€stat | è¿›ç¨‹å¼€å§‹çš„æ—¶é—´start | æ‰§è¡Œçš„æ—¶é—´time | æ‰€æ‰§è¡Œçš„æŒ‡ä»¤command |</p><p>è¿›ç¨‹çŠ¶æ€statï¼šè¯¦ç»†ï¼š<br>Rï¼šæ­£åœ¨è¿è¡Œ<br>Sï¼šå¯ä¸­æ–­çš„ç¡çœ <br>Dï¼šä¸å¯ä¸­æ–­çš„ç¡çœ <br>Tï¼šåœæ­¢æ€<br>Zï¼šåƒµæ­»æ€<br>+ï¼šå‰å°è¿›ç¨‹<br>lï¼šå¤šçº¿ç¨‹è¿›ç¨‹<br>Nï¼šä½ä¼˜å…ˆçº§è¿›ç¨‹<br>&lt;ï¼šé«˜ä¼˜å…ˆçº§è¿›ç¨‹<br>sï¼šsession leaderï¼Œä¼šè¯ï¼ˆå­è¿›ç¨‹ï¼‰å‘èµ·è€…<br>å¸¸ç”¨ç»„åˆï¼š<code>-ef</code><br>| UID    | PID    | PPID     | C               | STIME                | TTY                                        | TIME            | CMD          |<br>| :â€”â€“ | :â€”â€“ | :â€”â€”- | :â€”â€”â€”â€”â€“ | :â€”â€”â€”â€”â€”â€”- | :â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ | :â€”â€”â€”â€”â€“ | :â€”â€”â€”â€“ |<br>| ç”¨æˆ·å | è¿›ç¨‹ID | çˆ¶è¿›ç¨‹ID | è¿›ç¨‹å CPUç™¾åˆ†æ¯” | è¿›ç¨‹å¯åŠ¨åˆ°ç°åœ¨çš„æ—¶é—´ | è¯¥è¿›ç¨‹åœ¨å“ªä¸ªç»ˆç«¯ä¸Šè¿è¡Œï¼ˆï¼Ÿä»£è¡¨ä¸ç»ˆç«¯æ— å…³ï¼‰ | ä½¿ç”¨æ‰çš„CPUæ—¶é—´ | å‘½ä»¤åå’Œå‚æ•° |</p><p><code>-e</code>ï¼šæ˜¾ç¤ºæ‰€æœ‰è¿›ç¨‹<br><code>-f</code>ï¼šæ˜¾ç¤ºå®Œæ•´æ ¼å¼ç¨‹åºä¿¡æ¯<br>å¸¸ç”¨ç»„åˆï¼š<code>-eFH</code><br>| UID    | PID    | PPID     | C               | SZ                       | RSS                    | PSR                                | STIME                | TTY                                        | TIME            | CMD          |<br>| :â€”â€“ | :â€”â€“ | :â€”â€”- | :â€”â€”â€”â€”â€“ | :â€”â€”â€”â€”â€”â€”â€”â€“ | :â€”â€”â€”â€”â€”â€”â€” | :â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” | :â€”â€”â€”â€”â€”â€”- | :â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€“ | :â€”â€”â€”â€”â€“ | :â€”â€”â€”â€“ |<br>| ç”¨æˆ·å | è¿›ç¨‹ID | çˆ¶è¿›ç¨‹ID | è¿›ç¨‹å CPUç™¾åˆ†æ¯” | è¿›ç¨‹çš„æ ¸å¿ƒå°è±¡çš„é¡µé¢å¤§å° | è¿›ç¨‹å®é™…ä½¿ç”¨çš„å†…å­˜å¤§å° | ç»‘å®šå†…æ ¸çº¿ç¨‹çš„å¤„ç†å™¨çš„é€»è¾‘å¤„ç†å™¨å· | è¿›ç¨‹å¯åŠ¨åˆ°ç°åœ¨çš„æ—¶é—´ | è¯¥è¿›ç¨‹åœ¨å“ªä¸ªç»ˆç«¯ä¸Šè¿è¡Œï¼ˆï¼Ÿä»£è¡¨ä¸ç»ˆç«¯æ— å…³ï¼‰ | ä½¿ç”¨æ‰çš„CPUæ—¶é—´ | å‘½ä»¤åå’Œå‚æ•° |</p><p><code>-F</code>ï¼šæ˜¾ç¤ºæ›´å®Œæ•´æ ¼å¼çš„è¿›ç¨‹ä¿¡æ¯<br><code>-H</code>ï¼šä»¥è¿›ç¨‹å±‚çº§æ ¼å¼æ˜¾ç¤ºè¿›ç¨‹ç›¸å…³ä¿¡æ¯<br>å¸¸ç”¨ç»„åˆï¼š<code>aux</code> ã€<code>axo</code>ï¼ˆæœ‰oé€‰é¡¹éœ€è¦åœ¨åé¢æŒ‡æ˜å‚æ•°ï¼‰  </p><h1 id="è¿›ç¨‹åŠç³»ç»Ÿç›¸å…³å·¥å…·"><a href="#è¿›ç¨‹åŠç³»ç»Ÿç›¸å…³å·¥å…·" class="headerlink" title="è¿›ç¨‹åŠç³»ç»Ÿç›¸å…³å·¥å…·"></a>è¿›ç¨‹åŠç³»ç»Ÿç›¸å…³å·¥å…·</h1><p>niï¼šniceå€¼<br>priï¼špriorityä¼˜å…ˆçº§<br>psrï¼šprocessor CPUç¼–å·<br>rtprioï¼šå®æ—¶ä¼˜å…ˆçº§  </p><h2 id="æœç´¢è¿›ç¨‹"><a href="#æœç´¢è¿›ç¨‹" class="headerlink" title="æœç´¢è¿›ç¨‹"></a>æœç´¢è¿›ç¨‹</h2><p>æœ€çµæ´»ï¼š<code>ps é€‰é¡¹ | å…¶å®ƒå‘½ä»¤</code><br>æŒ‰é¢„å®šä¹‰çš„æ¨¡å¼ï¼š<code>pgrep</code><br><code>pgrep é€‰é¡¹ æ¨¡å¼</code><br><code>-u</code>ï¼šç”¨æˆ·å/ID ï¼šç”Ÿæ•ˆç”¨æˆ·<br><code>-U</code>ï¼šç”¨æˆ·å/ID ï¼šå‘½ä»¤å‘èµ·è€…<br><code>-t</code>ï¼šç»ˆç«¯ï¼šä¸æŒ‡å®šç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹<br><code>-l</code>ï¼šæ˜¾ç¤ºè¿›ç¨‹å<br><code>-a</code>ï¼šæ˜¾ç¤ºå®Œæ•´æ ¼å¼çš„è¿›ç¨‹åï¼ˆCentOS7ï¼‰<br><code>-P pid</code>ï¼šæ˜¾ç¤ºæŒ‡å®šè¿›ç¨‹çš„å­è¿›ç¨‹  </p><h2 id="ç³»ç»Ÿå·¥å…·"><a href="#ç³»ç»Ÿå·¥å…·" class="headerlink" title="ç³»ç»Ÿå·¥å…·"></a>ç³»ç»Ÿå·¥å…·</h2><p><code>uptime</code>ï¼šæ˜¾ç¤ºå½“å‰æ—¶é—´ï¼Œç³»ç»Ÿå·²å¯åŠ¨çš„æ—¶é—´ã€å½“å‰ä¸Šçº¿äººæ•°ï¼Œç³»ç»Ÿå¹³å‡è´Ÿè½½ï¼ˆ1ã€5ã€15åˆ†é’Ÿçš„å¹³å‡è´Ÿè½½ï¼Œä¸€èˆ¬ä¸ä¼šè¶…è¿‡1ï¼‰<br>ç³»ç»Ÿå¹³å‡è´Ÿè½½ï¼šæŒ‡å®šåœ¨ç‰¹å®šæ—¶é—´é—´éš”å†…è¿è¡Œé˜Ÿåˆ—ä¸­çš„å¹³å‡è¿›ç¨‹æ•°<br>å¦‚æœæ¯ä¸ªCPUå†…æ ¸çš„å½“å‰æ´»åŠ¨è¿›ç¨‹æ•°ä¸å¤§äº3çš„è¯ï¼Œé‚£ä¹ˆç³»ç»Ÿçš„æ€§èƒ½è‰¯å¥½ã€‚<br>å¦‚æœæ¯ä¸ªCPUå†…æ ¸çš„ä»»åŠ¡æ•°å¤§äº5ï¼Œé‚£ä¹ˆè¿™å°æœºå™¨çš„æ€§èƒ½æœ‰ä¸¥é‡é—®é¢˜ã€‚<br>å¦‚æœLinuxä¸»æœºæ˜¯1ä¸ªåŒæ ¸CPUçš„è¯ï¼Œå½“load averageä¸º6çš„æ—¶å€™è¯´æ˜æœºå™¨å·²ç»è¢«å……åˆ†ä½¿ç”¨äº†ã€‚  </p><h2 id="è¿›ç¨‹ç®¡ç†å·¥å…·"><a href="#è¿›ç¨‹ç®¡ç†å·¥å…·" class="headerlink" title="è¿›ç¨‹ç®¡ç†å·¥å…·"></a>è¿›ç¨‹ç®¡ç†å·¥å…·</h2><p><code>top</code>ï¼šæœ‰è®¸å¤šå†…ç½®å‘½ä»¤ï¼š<br>æ’åºï¼š<br><code>P</code>ï¼šä»¥å æ®çš„CPUç™¾åˆ†æ¯”ï¼Œ%CPU<br><code>M</code>ï¼šå æ®å†…å­˜ç™¾åˆ†æ¯”ï¼Œ%MEM<br><code>T</code>ï¼šç´¯ç§¯å æ®CPUæ—¶é•¿ï¼ŒTIME+  </p><p>é¦–éƒ¨ä¿¡æ¯æ˜¾ç¤ºï¼š<br><code>uptime</code>ä¿¡æ¯ï¼š<code>l</code>å‘½ä»¤<br>tasksåŠcpuä¿¡æ¯ï¼š<code>t</code>å‘½ä»¤<br>cpuåˆ†åˆ«æ˜¾ç¤º1ï¼ˆæ•°å­—ï¼‰<br>memoryä¿¡æ¯ï¼š<code>m</code>å‘½ä»¤<br>é€€å‡ºå‘½ä»¤ï¼š<code>q</code><br>ä¿®æ”¹åˆ·æ–°æ—¶é—´é—´éš”ï¼š<code>s</code><br>ç»ˆæ­¢æŒ‡å®šè¿›ç¨‹ï¼š<code>k</code><br>ä¿å­˜æ–‡ä»¶ï¼š<code>w</code>  </p><h3 id="topæ ä½ä¿¡æ¯ç®€ä»‹"><a href="#topæ ä½ä¿¡æ¯ç®€ä»‹" class="headerlink" title="topæ ä½ä¿¡æ¯ç®€ä»‹"></a>topæ ä½ä¿¡æ¯ç®€ä»‹</h3><p>ç¬¬ä¸€è¡Œï¼šç³»ç»Ÿè¿è¡Œæ—¶é—´<br>ç³»ç»Ÿå½“å‰æ—¶é—´ã€ç³»ç»Ÿå·²è¿è¡Œæ—¶é—´ã€å½“å‰ç™»å½•ç³»ç»Ÿçš„ç”¨æˆ·æ•°é‡ã€ç³»ç»Ÿè´Ÿè½½ï¼ˆ1,5,15åˆ†é’Ÿçš„å¹³å‡å€¼ï¼‰  </p><p>ç¬¬äºŒè¡Œï¼šè¿è¡Œè¿›ç¨‹ç›¸å…³<br>æ‰€æœ‰å¯åŠ¨çš„è¿›ç¨‹æ•°ã€æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æ•°ã€æŒ‚èµ·çš„è¿›ç¨‹æ•°ã€åœæ­¢çš„è¿›ç¨‹æ•°ã€åƒµæ­»è¿›ç¨‹æ•°  </p><p>ç¬¬ä¸‰è¡Œï¼šCPUç›¸å…³<br>ç”¨æˆ·ç©ºé—´å CPUç™¾åˆ†æ¯”ã€å†…æ ¸ç©ºé—´å CPUç™¾åˆ†æ¯”ã€è°ƒæ•´è¿‡niceæ—¶é—´çš„è¿›ç¨‹å CPUç™¾åˆ†æ¯”ã€ç©ºé—²CPUç™¾åˆ†æ¯”ã€ç­‰å¾…IOå CPUçš„ç™¾åˆ†æ¯”ã€CPUæœåŠ¡äºç¡¬ä¸­æ–­æ—¶é—´æ‰€å ç™¾åˆ†æ¯”ã€CPUæœåŠ¡äºè½¯ä¸­æ–­æ—¶é—´æ‰€å ç™¾åˆ†æ¯”ã€è¢«è™šæ‹Ÿæœºå·èµ°æ—¶é—´çš„ç™¾åˆ†æ¯”  </p><p>ç¬¬å››è¡Œï¼šå†…å­˜ç›¸å…³<br>ç‰©ç†å†…å­˜æ€»é‡ã€å·²ç”¨ç‰©ç†å†…å­˜ã€ç©ºé—²ç‰©ç†å†…å­˜ã€å†…æ ¸ç¼“å­˜å†…å­˜é‡  </p><p>ç¬¬äº”è¡Œï¼šäº¤æ¢åˆ†åŒºç›¸å…³<br>äº¤æ¢åˆ†åŒºæ€»é‡ã€å·²ä½¿ç”¨äº¤æ¢åˆ†åŒºæ€»é‡ã€ç©ºé—²äº¤æ¢åˆ†åŒºæ€»é‡ã€ç¼“å†²çš„äº¤æ¢åˆ†åŒºæ€»é‡ç™½è‰²å—ï¼šå…·ä½“è¿›ç¨‹ä¿¡æ¯  </p><table><thead><tr><th align="left">PID</th><th align="left">USER</th><th align="left">PR</th><th align="left">NI</th><th align="left">VIRT</th><th align="left">RES</th><th align="left">SHR</th><th align="left">S</th><th align="left">%CPU</th><th align="left">%MEM</th><th align="left">TIME+</th><th align="left">COMMAND</th></tr></thead><tbody><tr><td align="left">è¿›ç¨‹ID</td><td align="left">è¿›ç¨‹æ‰€æœ‰è€…user</td><td align="left">ä¼˜å…ˆçº§pr</td><td align="left">niceå€¼</td><td align="left">è¿›ç¨‹ä½¿ç”¨çš„è™šæ‹Ÿå†…å­˜æ€»é‡virt</td><td align="left">è¿›ç¨‹ä½¿ç”¨çš„,æœªè¢«æ¢å‡ºçš„ç‰©ç†å†…å­˜å¤§å°res</td><td align="left">å…±äº«å†…å­˜å¤§å°shr</td><td align="left">è¿›ç¨‹çŠ¶æ€s</td><td align="left">ä¸Šæ¬¡æ›´æ–°åˆ°ç°åœ¨çš„CPUæ—¶é—´å ç”¨ç™¾åˆ†æ¯”%cpu</td><td align="left">è¿›ç¨‹ä½¿ç”¨çš„ç‰©ç†å†…å­˜ç™¾åˆ†æ¯”%mem</td><td align="left">è¿›ç¨‹ä½¿ç”¨CPUæ€»æ—¶é—´time+</td><td align="left">å‘½ä»¤åï¼Œå‘½ä»¤è¡Œcommand</td></tr></tbody></table><h3 id="å†…å­˜å·¥å…·"><a href="#å†…å­˜å·¥å…·" class="headerlink" title="å†…å­˜å·¥å…·"></a>å†…å­˜å·¥å…·</h3><p>vmstat å‘½ä»¤ï¼šè™šæ‹Ÿå†…å­˜ä¿¡æ¯<br><code>vmstat -s</code>ï¼šæ˜¾ç¤ºå†…å­˜çš„ç»Ÿè®¡æ•°æ®<br><code>vmstat 2 5</code>ï¼šé—´éš”2ç§’ï¼Œä¿¡æ¯åˆ·æ–°5æ¬¡  </p><p>procsï¼š<br>rï¼šç­‰å¾…è¿è¡Œçš„è¿›ç¨‹çš„ä¸ªæ•°ï¼Œå’Œæ ¸å¿ƒæ•°æœ‰å…³<br>bï¼šå¤„äºä¸å¯ä¸­æ–­ç¡çœ æ€çš„è¿›ç¨‹ä¸ªæ•°ï¼ˆè¢«é˜»å¡çš„é˜Ÿåˆ—çš„é•¿åº¦ï¼‰  </p><p>memoryï¼š<br>swpdï¼šäº¤æ¢å†…å­˜çš„ä½¿ç”¨æ€»é‡<br>freeï¼šç©ºé—²ç‰©ç†å†…å­˜æ€»é‡<br>bufferï¼šç”¨äºbufferçš„å†…å­˜æ€»é‡<br>cacheï¼šç”¨äºcacheçš„å†…å­˜æ€»é‡  </p><p>swapï¼š<br>siï¼šä»ç£ç›˜äº¤æ¢è¿›å†…å­˜çš„æ•°æ®é€Ÿç‡kb/s<br>soï¼šä»å†…å­˜äº¤æ¢è‡³ç£ç›˜çš„æ•°æ®é€Ÿç‡kb/s  </p><p>ioï¼š<br>biï¼šä»å—è®¾å¤‡è¯»å…¥æ•°æ®åˆ°ç³»ç»Ÿçš„é€Ÿç‡kb/s<br>boï¼šä¿å­˜æ•°æ®è‡³å—è®¾å¤‡çš„é€Ÿç‡kb/s  </p><p>systemï¼š<br>inï¼šä¸­æ–­é€Ÿç‡ï¼ŒåŒ…æ‹¬æ—¶é’Ÿ<br>csï¼šè¿›ç¨‹åˆ‡æ¢é€Ÿç‡  </p><p>cpuï¼š<br>usï¼šç”¨æˆ·è¿›ç¨‹æ‰§è¡Œæ—¶é—´ç™¾åˆ†æ¯”<br>syï¼šå†…æ ¸ç³»ç»Ÿè¿›ç¨‹æ‰§è¡Œæ—¶é—´ç™¾åˆ†æ¯”<br>idï¼šç©ºé—²æ—¶é—´ç™¾åˆ†æ¯”<br>waï¼šIOç­‰å¾…æ—¶é—´ç™¾åˆ†æ¯”<br>stï¼šè™šæ‹Ÿå†…å­˜å·èµ°æ—¶é—´ç™¾åˆ†æ¯”  </p><h3 id="è¿›ç¨‹ç®¡ç†å·¥å…·-1"><a href="#è¿›ç¨‹ç®¡ç†å·¥å…·-1" class="headerlink" title="è¿›ç¨‹ç®¡ç†å·¥å…·"></a>è¿›ç¨‹ç®¡ç†å·¥å…·</h3><p>æŒ‰PIDï¼š<code>kill pid</code><br>æŒ‰åç§°ï¼š<code>killall è¿›ç¨‹å</code><br>æŒ‰æ¨¡å¼ï¼š<code>pkill é€‰é¡¹ æ¨¡å¼</code><br><code>pkill -u ç”¨æˆ·å/uid</code>ï¼šç”Ÿæ•ˆè€…<br><code>pkill -U ç”¨æˆ·å/uid</code>ï¼šè¿›ç¨‹å‘èµ·è€…<br><code>pkill -t ç»ˆç«¯</code>ï¼šä¸æŒ‡å®šç»ˆç«¯ç›¸å…³çš„è¿›ç¨‹  </p><h3 id="ä½œä¸šç®¡ç†"><a href="#ä½œä¸šç®¡ç†" class="headerlink" title="ä½œä¸šç®¡ç†"></a>ä½œä¸šç®¡ç†</h3><p>Linuxçš„ä½œä¸šæ§åˆ¶<br>å‰å°ä½œä¸šï¼šé€šè¿‡ç»ˆç«¯å¯åŠ¨ï¼Œä¸”å¯åŠ¨åä¸€ç›´å æ®ç»ˆç«¯<br>åå°ä½œä¸šï¼šå¯é€šè¿‡ç»ˆç«¯å¯åŠ¨ï¼Œä½†å¯åŠ¨åå³è½¬å…¥åå°è¿è¡Œï¼ˆé‡Šæ”¾ç»ˆç«¯ï¼‰<br>Ctrl+z ï¼šè¿è¡Œä¸­çš„ä½œä¸šæ”¾åˆ°åå°ï¼ˆåœæ­¢æ€ï¼‰<br>å‘½ä»¤ &amp; ï¼šæœªå¯åŠ¨çš„ä½œä¸šæ”¾åˆ°åå°è¿è¡Œï¼ˆå’ŒCtrl+zæœ‰åŒºåˆ«ï¼‰  </p><p>ï¼ˆ[1] ddå‘½ä»¤Ctrl+z [2] ddå‘½ä»¤ &amp; [3] cat å‘½ä»¤Ctrl+z [4] catå‘½ä»¤ &amp; ï¼‰<br>åå°ä½œä¸šè™½ç„¶è¢«é€å¾€åå°è¿è¡Œï¼Œä½†å…¶ä¾ç„¶ä¸ç»ˆç«¯ç›¸å…³ï¼›é€€å‡ºç»ˆç«¯ï¼Œå°†å…³é—­åå°ä½œä¸šã€‚å¦‚æœå¸Œæœ›é€å¾€åå°åï¼Œå‰¥ç¦»ä¸ç»ˆç«¯çš„å…³ç³»ä½¿ç”¨<br>nohup å‘½ä»¤ &amp;  </p><h3 id="æŸ¥çœ‹æ‰€æœ‰ä½œä¸šï¼š"><a href="#æŸ¥çœ‹æ‰€æœ‰ä½œä¸šï¼š" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰ä½œä¸šï¼š"></a>æŸ¥çœ‹æ‰€æœ‰ä½œä¸šï¼š</h3><p><code>jobs</code>ã€<code>jobs -l</code>æ˜¾ç¤ºæ›´è¯¦ç»†<br>ä½œä¸šæ§åˆ¶ï¼š<br><code>fg #</code>ï¼šæŠŠæŒ‡å®šçš„åå°ä½œä¸šè°ƒå›å‰å°<br><code>bg #</code>ï¼šé€å¾€åå°çš„ä½œä¸šç»§ç»­è¿è¡Œ<br><code>kill %#</code>ï¼šç»ˆæ­¢æŒ‡å®šçš„ä½œä¸š  </p><p>è¿›ç¨‹ä¼˜å…ˆçº§<br>è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´ï¼š<br>é™æ€ä¼˜å…ˆçº§ï¼š100-139<br>è¿›ç¨‹é»˜è®¤å¯åŠ¨æ—¶çš„niceå€¼ä¸º0ï¼Œä¼˜å…ˆçº§ä¸º120<br>åªæœ‰æ ¹ç”¨æˆ·æ‰èƒ½è°ƒä½niceå€¼ï¼ˆæé«˜ä¼˜å…ˆçº§ï¼‰  </p><p><code>nice</code>å‘½ä»¤ï¼š<br><code>nice é€‰é¡¹ å‘½ä»¤</code> ï¼ˆæœªè¿è¡Œçš„å‘½ä»¤ï¼‰<br>ä¾‹ï¼š<code>nice -n -5 ping 127.0.0.1</code>ï¼ˆå°†å‘½ä»¤ping 127.0.0.1çš„niceå€¼è°ƒä¸º-5ï¼‰  </p><p><code>renice</code>å‘½ä»¤ï¼š<br><code>renice</code>é€‰é¡¹ PIDï¼ˆè¿è¡Œä¸­çš„å‘½ä»¤ï¼‰<br>ä¾‹ï¼š<code>renice -n -20 1234</code>ï¼ˆå°†æŒ‡å®šPIDå·çš„è¿›ç¨‹ï¼Œniceå€¼è°ƒæ•´ä¸º-20ï¼‰  </p><p><code>ps axo pid,comm,ni</code> ï¼šæŸ¥çœ‹pidï¼Œå‘½ä»¤ï¼Œniceå€¼  </p><h1 id="è®¡åˆ’ä»»åŠ¡"><a href="#è®¡åˆ’ä»»åŠ¡" class="headerlink" title="è®¡åˆ’ä»»åŠ¡"></a>è®¡åˆ’ä»»åŠ¡</h1><p>linux ä»»åŠ¡è®¡åˆ’ã€å‘¨æœŸæ€§ä»»åŠ¡æ‰§è¡Œ<br>æœªæ¥çš„æŸæ—¶é—´ç‚¹æ‰§è¡Œä»»åŠ¡ï¼š<code>at</code><br>å‘¨æœŸæ€§è¿è¡ŒæŸä»»åŠ¡ï¼š<code>cron</code>  </p><h2 id="atä»»åŠ¡"><a href="#atä»»åŠ¡" class="headerlink" title="atä»»åŠ¡"></a>atä»»åŠ¡</h2><p><code>atå‘½ä»¤ï¼šat [option] TIME</code><br>å¸¸ç”¨é€‰é¡¹ï¼š<br><code>-V</code>ï¼šæ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯<br><code>-l</code>ï¼šåˆ—å‡ºæŒ‡å®šé˜Ÿåˆ—ä¸­ç­‰å¾…è¿ä½œçš„ä½œä¸šï¼Œç›¸å½“äº<code>atq</code><br><code>-d</code>ï¼šåˆ é™¤æŒ‡å®šçš„ä½œä¸šï¼Œç›¸å½“äº<code>atrm</code><br><code>-c</code>ï¼šæŸ¥çœ‹å…·ä½“ä½œä¸šä»»åŠ¡<br><code>-f file</code>ï¼šä»æŒ‡å®šæ–‡ä»¶ä¸­è¯»å–ä»»åŠ¡<br><code>-m</code>ï¼šå½“ä»»åŠ¡è¢«å®Œæˆä¹‹åï¼Œå°†ç»™ç”¨æˆ·å‘é€é‚®ä»¶ï¼Œå³ä½¿æ²¡æœ‰æ ‡å‡†è¾“å‡º  </p><p>æ³¨æ„ï¼šä½œä¸šæ‰§è¡Œå‘½ä»¤çš„ç»“æœä¸­çš„æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯ä»¥é‚®ä»¶é€šçŸ¥ç»™ç›¸å…³ç”¨æˆ·<br>TIMEï¼šå®šä¹‰å‡ºä»€ä¹ˆæ—¶å€™è¿›è¡Œ<code>at</code>è¿™é¡¹ä»»åŠ¡çš„æ—¶é—´<br><code>HH:MM [YYYY-mm-dd]</code><br><code>noon,midnight,teatime(4pm)</code><br><code>tomorrow</code><br><code>now+#&#123;minutes,hours,days,OR weeks&#125;</code>  </p><p><code>at</code>æ—¶é—´æ ¼å¼<br><code>HH:MM 02:00</code><br>åœ¨ä»Šæ—¥çš„<code>HH:MM</code>è¿›è¡Œï¼Œè‹¥æ—¶åˆ»å·²è¿‡ï¼Œåˆ™æ˜å¤©æ­¤æ—¶æ‰§è¡Œä»»åŠ¡<br><code>HH:MM YYYY-MM-DD 04:00 2016-09-20</code><br>è§„å®šåœ¨æŸå¹´æŸæœˆçš„æŸä¸€å¤©çš„ç‰¹æ®Šæ—¶åˆ»è¿›è¡Œè¯¥é¡¹ä»»åŠ¡<br><code>HH:MM[am|pm] [month] [date]</code><br><code>04pm march 17</code><br><code>17:20 tomorrow</code>  </p><p><code>HH:MM[am|pm] + number [minutes|hours|days|weeks]</code><br>åœ¨æŸä¸ªæ—¶é—´ç‚¹å†åŠ å‡ ä¸ªæ—¶é—´åæ‰è¿›è¡Œè¯¥é¡¹ä»»åŠ¡<br><code>now + 5 minutes</code><br><code>04pm + 3 days</code>  </p><p>æ‰§è¡Œæ–¹å¼ï¼š  </p><ol><li>äº¤äº’å¼  </li><li>è¾“å…¥é‡å®šå‘  </li><li><code>at -f æ–‡ä»¶</code>  </li></ol><p>ä¾èµ–ä¸<code>atd</code>æœåŠ¡ï¼Œéœ€è¦å¯åŠ¨æ‰èƒ½å®ç°<code>at</code>ä»»åŠ¡<br>é€šè¿‡<code>/etc/at.&#123;allow,deny&#125;</code>æ§åˆ¶ç”¨æˆ·æ˜¯å¦èƒ½æ‰§è¡Œ<code>at</code>ä»»åŠ¡ï¼Œå…ˆå¯»æ‰¾<code>/etc/at.allow</code>æ‰¾ï¼Œä¸å­˜åœ¨å°±å¯»æ‰¾<code>/etc/at.deny</code>è¿™ä¸ªæ–‡ä»¶ï¼Œè‹¥å†™åœ¨è¿™ä¸ª<code>at.deny</code>ç”¨çš„ä½¿ç”¨è€…åˆ™ä¸èƒ½ä½¿ç”¨<code>at</code>ï¼Œè€Œæ²¡æœ‰åœ¨è¿™ä¸ª<code>at.deny</code>æ–‡ä»¶çš„ä½¿ç”¨è€…åˆ™å¯ä½¿ç”¨<code>at</code>å‘½ä»¤ï¼Œå¦‚æœä¸¤ä¸ªæ–‡ä»¶éƒ½ä¸å­˜åœ¨ï¼Œåˆ™åªæœ‰<code>root</code>å¯ä»¥ä½¿ç”¨<code>at</code>è¿™ä¸ªå‘½ä»¤  </p><h2 id="å‘¨æœŸæ€§è®¡åˆ’ä»»åŠ¡cron"><a href="#å‘¨æœŸæ€§è®¡åˆ’ä»»åŠ¡cron" class="headerlink" title="å‘¨æœŸæ€§è®¡åˆ’ä»»åŠ¡cron"></a>å‘¨æœŸæ€§è®¡åˆ’ä»»åŠ¡cron</h2><p>ç›¸å…³çš„ç¨‹åºåŒ…ï¼š<br><code>cronie</code>ï¼šä¸»ç¨‹åºåŒ…ï¼Œæä¾›<code>crond</code>å®ˆæŠ¤è¿›ç¨‹åŠç›¸å…³è¾…åŠ©å·¥å…·<br><code>cronie-anacron</code>ï¼š<code>cronie</code>çš„è¡¥å……ç¨‹åºï¼Œç”¨äºç›‘æ§<code>cronie</code>ä»»åŠ¡æ‰§è¡ŒçŠ¶å†µï¼Œå¦‚<code>cronie</code>ä¸­çš„ä»»åŠ¡åœ¨è¿‡å»è¯¥è¿è¡Œçš„æ—¶é—´ç‚¹æœªèƒ½æ­£å¸¸è¿è¡Œï¼Œåˆ™<code>anacron</code>ä¼šéšåå¯åŠ¨ä¸€æ¬¡æ­¤ä»»åŠ¡<br><code>crontabs</code>ï¼šåŒ…å«<code>CentOS</code>æä¾›ç³»ç»Ÿç»´æŠ¤ä»»åŠ¡<br>ç¡®ä¿<code>crond</code>å®ˆæŠ¤å¤„äºè¿è¡ŒçŠ¶æ€<br><code>service crond status</code><br>è®¡åˆ’å‘¨æœŸæ€§æ‰§è¡Œçš„ä»»åŠ¡äº¤ç»™<code>crond</code>ï¼Œåˆ°æŒ‡å®šæ—¶é—´ä¼šè‡ªåŠ¨è¿è¡Œ<br>ç³»ç»Ÿ<code>cron</code>ä»»åŠ¡ï¼šç³»ç»Ÿç»´æŠ¤ä½œä¸š<br><code>/etc/crontab</code><br>ç”¨æˆ·<code>cron</code>ä»»åŠ¡ï¼š<br><code>crontab</code>å‘½ä»¤<br>æ—¥å¿—ï¼š<code>/var/log/cron</code><br>ç³»ç»Ÿ<code>cron</code>ä»»åŠ¡ï¼š<code>/etc/crontab</code><br>æ³¨é‡Šè¡Œä»¥<code>#</code>å¼€å¤´  </p><p><code>* * * * *ï¼ˆåˆ†æ—¶æ—¥æœˆå‘¨ï¼‰</code><br><code>*</code>è¡¨ç¤ºâ€æ¯â€<br><code>* * * * *</code>æ¯ä¸€åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘¨æœŸä»»åŠ¡<br><code>2 * * * *</code>æ¯å°æ—¶02åˆ†æ‰§è¡Œä¸€æ¬¡å‘¨æœŸä»»åŠ¡<br><code>0 2 * * *</code>æ¯å¤©2ç‚¹0åˆ†æ‰§è¡Œä¸€æ¬¡å‘¨æœŸä»»åŠ¡<br><code>0 0 */3 * *</code>æ¯3å¤©æ•´æ‰§è¡Œä¸€æ¬¡å‘¨æœŸä»»åŠ¡<br><code>*/3 */2 */3 * *</code>æ¯éš”3å¤©çš„æ¯éš”2å°æ—¶çš„æ¯éš”3åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘¨æœŸä»»åŠ¡<br><code>0 0 1 6 *</code>æ¯åˆ°6æœˆ1æ—¥0æ—¶0åˆ†æ‰§è¡Œä¸€æ¬¡å‘¨æœŸä»»åŠ¡<br><code>* 3-8 * * */3</code>æ¯éš”3å‘¨çš„3åˆ°8ç‚¹æ•´æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘¨æœŸä»»åŠ¡<br><code>0 0 * * 0,3,5</code>æ¯ä¸ªå‘¨æ—¥ï¼Œå‘¨ä¸‰ï¼Œå‘¨äº”0æ—¶0åˆ†æ‰§è¡Œä¸€æ¬¡å‘¨æœŸä»»åŠ¡<br>åˆ†ï¼ˆ0-59ï¼‰ï¼Œæ—¶ï¼ˆ0-23ï¼‰ï¼Œæ—¥ï¼ˆ1-31ï¼‰ï¼Œæœˆï¼ˆ1-12ï¼‰ï¼Œå‘¨ï¼ˆ0-6ï¼‰<br>ç³»ç»Ÿçš„è®¡åˆ’ä»»åŠ¡ï¼š  </p><pre class="line-numbers language-none"><code class="language-none">&#x2F;etc&#x2F;crontab  &#x2F;etc&#x2F;cron.d&#x2F;  &#x2F;etc&#x2F;cron.hourly&#x2F;  &#x2F;etc&#x2F;cron.daily&#x2F;  &#x2F;etc&#x2F;cron.weekly&#x2F;  &#x2F;etc&#x2F;cron.monthly&#x2F;  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç”¨æˆ·<code>cron</code>ï¼š<br><code>crontab</code>å‘½ä»¤å®šä¹‰ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸“ç”¨çš„<code>cron</code>ä»»åŠ¡æ–‡ä»¶ï¼š<br><code>/var/spool/cron/USERNAME</code><br><code>crontab</code>å‘½ä»¤ï¼š<br><code>crontab [-u user] [-l | -r | -e] [-i]</code><br><code>-l</code>åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡<br><code>-e</code>ç¼–è¾‘ä»»åŠ¡<br><code>-r</code>ç§»é™¤æ‰€æœ‰ä»»åŠ¡<br><code>-i</code>åŒ<code>-r</code>ä¸€åŒä½¿ç”¨ï¼Œä»¥äº¤äº’æ¨¡å¼ç§»é™¤æŒ‡å®šä»»åŠ¡<br><code>-u user</code>ä»…<code>root</code>å¯è¿è¡Œï¼ŒæŒ‡å®šç”¨æˆ·ç®¡ç†<code>cron</code>ä»»åŠ¡<br>æ§åˆ¶ç”¨æˆ·æ‰§è¡Œè®¡åˆ’ä»»åŠ¡ï¼š<br><code>/etc/cron.&#123;allow,deny&#125;</code><br>æ³¨æ„ï¼šè¿è¡Œç»“æœçš„æ ‡å‡†è¾“å‡ºå’Œé”™è¯¯ä»¥é‚®ä»¶é€šçŸ¥ç»™ç›¸å…³ç”¨æˆ·  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">command</span> <span class="token operator">></span> /dev/null  <span class="token builtin class-name">command</span> <span class="token number">2</span><span class="token operator">&amp;></span><span class="token number">1</span> /dev/null  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¯¹äº<code>cron</code>ä»»åŠ¡æ¥è®²ï¼Œ<code>%</code>å·æœ‰ç‰¹æ®Šç”¨é€”ï¼Œå¦‚æœåœ¨å‘½ä»¤ä¸­è¦ä½¿ç”¨<code>%</code>ï¼Œåˆ™éœ€è¦è½¬ä¹‰ï¼Œä¸è¿‡ï¼Œå¦‚æœæŠŠ<code>%</code>å·æ”¾ç½®äºå•å¼•å·ä¸­ï¼Œä¹Ÿå¯ä»¥ä¸ç”¨è½¬ä¹‰  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶ç®¡ç†</title>
      <link href="/posts/2039.html"/>
      <url>/posts/2039.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ç³»ç»Ÿé…é¢"><a href="#ç³»ç»Ÿé…é¢" class="headerlink" title="ç³»ç»Ÿé…é¢"></a>ç³»ç»Ÿé…é¢</h1><ol><li>é…é¢çš„ä½œç”¨ï¼šå½“Linuxæ ¹åˆ†åŒºçš„ç£ç›˜ç©ºé—´è€—å°½æ—¶ï¼ŒLinuxç³»ç»Ÿå°†æ— æ³•å†å»ºç«‹æ–°çš„æ–‡ä»¶ï¼ˆåŒ…æ‹¬ç¨‹åºè¿è¡Œçš„ä¸´æ—¶æ–‡ä»¶ï¼‰ï¼Œä»è€Œå‡ºç°æœåŠ¡ç¨‹åºå´©æºƒï¼Œç³»ç»Ÿæ— æ³•å¯åŠ¨ç­‰æ•…éšœç°è±¡ã€‚<br>ä¸ºäº†é¿å…åœ¨æœåŠ¡å™¨ä¸­å‡ºç°ç±»ä¼¼çš„ç£ç›˜ç©ºé—´ä¸è¶³çš„é—®é¢˜ï¼Œå¯ä»¥è®¾ç½®å¯ç”¨ç£ç›˜é…é¢åŠŸèƒ½ï¼Œå¯¹ç”¨æˆ·åœ¨æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿï¼ˆåˆ†åŒºï¼‰ä¸­ä½¿ç”¨çš„ç£ç›˜ç©ºé—´ã€æ–‡ä»¶æ•°é‡è¿›è¡Œé™åˆ¶ï¼Œä»¥é˜²ä¸ªåˆ«ç”¨æˆ·æ¶æ„æˆ–æ— æ„é—´å ç”¨å¤§é‡ç£ç›˜ç©ºé—´ã€‚æ˜¯ä¸ºäº†å­˜å‚¨ç©ºé—´çš„ç¨³å®šæ€§å’Œå¯æŒç»­æ€§ã€‚  </li><li>é…é¢ç³»ç»Ÿç»¼è¿°ï¼š  <blockquote><p>åœ¨å†…æ ¸ä¸­æ‰§è¡Œ<br>ä½œç”¨èŒƒå›´ï¼šä»¥æ–‡ä»¶ç³»ç»Ÿï¼ˆåˆ†åŒºï¼‰ä¸ºå•ä½å¯ç”¨<br>é™åˆ¶å¯¹è±¡ï¼šå¯¹ä¸åŒç»„ã€ç”¨æˆ·é™åˆ¶<br>é™åˆ¶ç±»å‹ï¼šæ ¹æ®ç£ç›˜å®¹é‡æˆ–è€…æ–‡ä»¶æ•°é‡ï¼ˆé…ç½®æ–‡ä»¶ä¸­å®¹é‡å•ä½é»˜è®¤ä¸ºKï¼‰<br>é™åˆ¶æ–¹æ³•ï¼š  </p><blockquote><p>è½¯é™åˆ¶ï¼ˆsoftï¼‰ï¼šæŒ‡å®šä¸€ä¸ªè½¯æ€§çš„é…é¢æ•°å€¼ï¼Œåœ¨å›ºå®šçš„å®½é™æœŸå†…ï¼ˆé»˜è®¤7å¤©ï¼‰ï¼Œå…è®¸è¶…è¿‡è¿™ä¸ªé™åˆ¶ï¼Œä½†æ–‡ä»¶ç³»ç»Ÿä¼šç»™å‡ºè­¦å‘Šä¿¡æ¯ã€‚<br>ç¡¬é™åˆ¶ï¼ˆhardï¼‰ï¼šæŒ‡å®šä¸€ä¸ªç¡¬æ€§çš„é…é¢æ•°å€¼ï¼Œç»å¯¹ç¦æ­¢ç”¨æˆ·è¶…è¿‡çš„é™åˆ¶å€¼ï¼Œå½“è¾¾åˆ°ç¡¬é™åˆ¶å€¼æ—¶ç³»ç»Ÿä¹Ÿä¼šç»™å‡ºè­¦å‘Šå¹¶ç¦æ­¢ç»§ç»­å†™å…¥æ•°æ®ï¼Œç¡¬é™åˆ¶çš„é…é¢å€¼åº”å¤§äºç›¸åº”çš„è½¯é™åˆ¶å€¼ï¼Œå¦åˆ™è½¯é™åˆ¶å°†å¤±æ•ˆã€‚<br>ç»¼ä¸Šï¼Œåªæœ‰å½“ç”¨æˆ·æˆ–ç»„ã€æ–‡ä»¶ç³»ç»Ÿï¼ˆåˆ†åŒºï¼‰åŠé…é¢æ•°å€¼éƒ½æ»¡è¶³é™é¢æ¡ä»¶æ—¶ï¼Œæ‰ä¼šå¯¹æ“ä½œè¿›è¡Œé™åˆ¶ã€‚  </p></blockquote></blockquote></li><li>é…é¢ç®¡ç†ï¼šæ­¥éª¤ï¼šä»¥æ”¯æŒé…é¢åŠŸèƒ½çš„æ–¹å¼æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿâ†’æ£€æµ‹ç£ç›˜é…é¢å¹¶ç”Ÿæˆé…é¢æ–‡ä»¶â†’ç¼–è¾‘ç”¨æˆ·å’Œç»„è¡Œå·çš„é…é¢è®¾ç½®â†’å¼€å¯æ–‡ä»¶ç³»ç»Ÿé…é¢åŠŸèƒ½â†’éªŒè¯ç£ç›˜é…é¢åŠŸèƒ½â†’æŸ¥çœ‹é…é¢ä½¿ç”¨æƒ…å†µã€‚<br>ä»¥æ”¯æŒé…é¢åŠŸèƒ½çš„æ–¹å¼æŒ‚è½½<br><code>mount -o usrquota,grpquota è®¾å¤‡åˆ†åŒºå æŒ‚è½½ç‚¹</code>  </li></ol><p>ä»¥æ”¯æŒé…é¢åŠŸèƒ½çš„æ–¹å¼é‡æ–°æŒ‚è½½<br><code>mount -o remount,usrquota,grpquota è®¾å¤‡åˆ†åŒºå æŒ‚è½½ç‚¹</code>  </p><p>å¼€æœºè‡ªåŠ¨æŒ‚è½½æ”¯æŒç£ç›˜é…é¢åŠŸèƒ½<br><code>vim /etc/fstab</code><br><code>è®¾å¤‡åˆ†åŒºå æŒ‚è½½ç‚¹ æ–‡ä»¶ç³»ç»Ÿç±»å‹ usrquota,grpquota 0 0</code>  </p><p>æ£€æµ‹ç£ç›˜é…é¢å¹¶ç”Ÿæˆé…é¢æ–‡ä»¶<br><code>quotacheck -augcv</code>  </p><blockquote><p>é€‰é¡¹  </p><blockquote><p>-aï¼šæ£€æµ‹æ‰€æœ‰åˆ†åŒºï¼ˆå¦‚ä¸ä½¿ç”¨-aï¼Œåˆ™å¿…é¡»æŒ‡å®šä¸€ä¸ªè®¾å¤‡åˆ†åŒºåæˆ–æŒ‚è½½ç‚¹ï¼Œä½œä¸ºå‘½ä»¤å‚æ•°ï¼‰<br>-uï¼šæ£€æµ‹ç”¨æˆ·é…é¢ä¿¡æ¯<br>-gï¼šæ£€æµ‹ç»„é…é¢ä¿¡æ¯<br>-cï¼šåˆ›å»ºæ–°çš„é…é¢æ–‡ä»¶<br>-vï¼šæ˜¾ç¤ºå‘½ä»¤æ‰§è¡Œè¿‡ç¨‹  </p></blockquote></blockquote><p>è®¾å®šé…é¢ï¼šç¼–è¾‘ç”¨æˆ·å’Œç»„çš„é…é¢è®¾ç½®<br><code>edquota -u ç”¨æˆ·å</code><br>ï¼ˆblocksè®¾ç½®soft 5æ–‡ä»¶å¤§å°è½¯é™åˆ¶ä¸º5kï¼Œè®¾ç½®hard 9æ–‡ä»¶å¤§å°ç¡¬é™åˆ¶ä¸º9kï¼›inodesè®¾ç½®soft 2æ–‡ä»¶æ•°é‡è½¯é™åˆ¶ä¸º2ä¸ªï¼Œè®¾ç½®hard 5æ–‡ä»¶æ•°é‡ç¡¬é™åˆ¶ä¸º5ä¸ªï¼‰<br><code>edquota -g ç»„å</code><br>æ‰“å¼€é…é¢æ–‡ä»¶ç¼–è¾‘  </p><pre class="line-numbers language-none"><code class="language-none">block soft hard inode soft hard        1   2           1   2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>é‡Šä¹‰ï¼šæ–‡ä»¶å¤§å° è½¯é™åˆ¶1K ç¡¬é™åˆ¶2K æ–‡ä»¶ä¸ªæ•° è½¯é™åˆ¶1ä¸ª ç¡¬é™åˆ¶2ä¸ª<br>ä¿®æ”¹å®½é™æœŸ<br><code>edquota -t</code><br>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>#days</code><br>å¯åŠ¨é…é¢åŠŸèƒ½<br><code>quotaon -u è®¾å¤‡åˆ†åŒºåï¼ˆæŒ‚è½½ç‚¹ï¼‰</code><br><code>quotaon -g è®¾å¤‡åˆ†åŒºåï¼ˆæŒ‚è½½ç‚¹ï¼‰</code><br><code>-v</code> æ˜¾ç¤ºå‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹  </p><p>å…³é—­ç£ç›˜é…é¢<br><code>quotaoff -u/g -v è®¾å¤‡åˆ†åŒºåï¼ˆæŒ‚è½½ç‚¹ï¼‰</code>  </p><p>æŸ¥çœ‹é…é¢çŠ¶æ€<br><code>quota -u ç”¨æˆ·å</code><br><code>quota -g ç»„å</code><br>æŸ¥çœ‹æŒ‡å®šæ–‡ä»¶ç³»ç»Ÿè¾“å‡ºé…é¢ä½¿ç”¨æƒ…å†µ<br><code>repquota è®¾å¤‡åˆ†åŒºå</code>  </p><p>æŸ¥çœ‹æ‰€æœ‰å¯ç”¨åˆ†åŒºçš„é…é¢ä½¿ç”¨æŠ¥å‘Š<br><code>repquota -a</code>   </p><h1 id="è½¯RAIDè®¾å¤‡"><a href="#è½¯RAIDè®¾å¤‡" class="headerlink" title="è½¯RAIDè®¾å¤‡"></a>è½¯RAIDè®¾å¤‡</h1><p>RAIDï¼šç£ç›˜é˜µåˆ—<br>ç®€å•çš„è¯´ï¼ŒRAIDæ˜¯æŠŠå¤šå—ç‹¬ç«‹çš„ç‰©ç†ç¡¬ç›˜ç»„åˆèµ·æ¥ï¼Œå½¢æˆä¸€ä¸ªç¡¬ç›˜ç»„å³é€»è¾‘ç¡¬ç›˜ï¼Œä»è€Œæä¾›æ¯”å•ä¸ªç¡¬ç›˜æ›´é«˜çš„å­˜å‚¨æ€§èƒ½å’Œæä¾›æ•°æ®å¤‡ä»½æŠ€æœ¯ã€‚<br>ç»„æˆç£ç›˜é˜µåˆ—çš„ä¸åŒæ–¹å¼ç§°ä¸ºRAIDçº§åˆ«ï¼Œæ ¹æ®ä¸åŒçº§åˆ«ï¼Œåˆ†åˆ«å¯ä»¥æä¾›ä¸åŒçš„é€Ÿåº¦ã€å®‰å…¨å’Œæ€§ä»·æ¯”ï¼Œæ ¹æ®å®é™…æƒ…å†µé€‰æ‹©é€‚å½“çš„RAIDçº§åˆ«å¯ä»¥æ»¡è¶³ç”¨æˆ·å¯¹å­˜å‚¨ç³»ç»Ÿå¯ç”¨æ€§èƒ½å’Œå®¹é‡çš„è¦æ±‚ã€‚  </p><h2 id="RAIDå®ç°æ–¹å¼ï¼š"><a href="#RAIDå®ç°æ–¹å¼ï¼š" class="headerlink" title="RAIDå®ç°æ–¹å¼ï¼š"></a>RAIDå®ç°æ–¹å¼ï¼š</h2><p>å¤–æ¥å¼ç£ç›˜é˜µåˆ—ï¼šé€šè¿‡æ‰©å±•å¡æä¾›é€‚é…èƒ½åŠ›<br>å†…æ¥å¼RAIDï¼šä¸»æ¿é›†æˆRAIDæ§åˆ¶å™¨ï¼›å®‰è£…OSå‰åœ¨BIOSé‡Œé…ç½®<br>è½¯ä»¶RAIDï¼šé€šè¿‡OSå®ç°  </p><p>RAIDçº§åˆ«ï¼š0ï¼šæ¡å¸¦å· 1ï¼šé•œåƒå· 5ã€6ã€1 0ã€0 1ã€  </p><h3 id="RAID-0ï¼šæ¡å¸¦å·"><a href="#RAID-0ï¼šæ¡å¸¦å·" class="headerlink" title="RAID-0ï¼šæ¡å¸¦å·"></a>RAID-0ï¼šæ¡å¸¦å·</h3><p>æ•°æ®åˆ†å‰²ä¹‹åå¹¶è¡Œå­˜å‚¨<br>è¯»å†™æ€§èƒ½æå‡<br>å¯ç”¨ç©ºé—´N x minï¼ˆNç£ç›˜æ•°é‡ï¼Œminæœ€å°ç£ç›˜å®¹é‡ï¼‰<br>æ— å®¹é”™èƒ½åŠ›ï¼ˆæŸåä¸€å—å°±ä¸èƒ½ç”¨ï¼‰ï¼Œé€‚åˆå¯¹æ•°æ®è¯»å†™è¦æ±‚é«˜ï¼Œè€Œå¯¹å®‰å…¨æ— è¦æ±‚çš„ç¯å¢ƒ<br>è‡³å°‘ç£ç›˜æ•°ï¼š2  </p><h3 id="RAID-1ï¼šé•œåƒå·"><a href="#RAID-1ï¼šé•œåƒå·" class="headerlink" title="RAID-1ï¼šé•œåƒå·"></a>RAID-1ï¼šé•œåƒå·</h3><p>æ•°æ®åˆ†å‰²åï¼Œè¿›è¡Œé•œåƒå¤‡ä»½å­˜å‚¨<br>è¯»å–æ€§èƒ½æå‡ï¼Œå†™å…¥æ€§èƒ½ä¸‹é™<br>å¯ç”¨ç©ºé—´min<br>æœ‰å†—ä½™èƒ½åŠ›ï¼ˆæœ‰ä¸€å—ç£ç›˜å®Œå¥½å°±è¡Œï¼‰ï¼Œé€‚åˆå¯¹å®‰å…¨è¦æ±‚é«˜çš„ç¯å¢ƒ<br>è‡³å°‘ç£ç›˜æ•°ï¼š2æˆ–2çš„å€æ•°  </p><h3 id="RAID-5ï¼š"><a href="#RAID-5ï¼š" class="headerlink" title="RAID-5ï¼š"></a>RAID-5ï¼š</h3><p>3å—ä»¥ä¸Šçš„ç›˜ç»„æˆé˜µåˆ—ï¼Œä¸€ä¸ªæ•°æ®åˆ†æˆN-1ä»½ï¼ŒåŒæ—¶ç”Ÿæˆä¸€ä»½æ ¡éªŒæ•°æ®ï¼Œå…±Nä»½æ•°æ®åœ¨Nå—ç›˜ä¸Šå¾ªç¯å‡è¡¡å­˜å‚¨<br>æ ¡éªŒæ•°æ®ä½œç”¨ï¼šåœ¨æŸä¸€å—ç›˜æŸåæ—¶ï¼Œå¯ä»¥é€šè¿‡å…¶å®ƒç›˜å’Œæ ¡éªŒæ•°æ®ï¼ŒæŠŠæ•°æ®å†…å®¹ç®—å‡ºæ¥<br>Nå—ç›˜åŒæ—¶è¯»å†™ï¼Œç”±äºæ ¡éªŒæœºåˆ¶ï¼Œå†™æ€§èƒ½ç›¸å¯¹ä¸é«˜ï¼Œä½†ç»¼åˆæ€§èƒ½å¾ˆå¥½<br>å¯ç”¨ç©ºé—´N-1 x min<br>æœ‰å®¹é”™èƒ½åŠ›ï¼šå…è®¸åä¸€å—ï¼Œä¸å½±å“æ•°æ®<br>æœ€å°‘ç£ç›˜æ•°ï¼š3  </p><h3 id="RAID-6ï¼šï¼ˆç±»ä¼¼5ï¼‰"><a href="#RAID-6ï¼šï¼ˆç±»ä¼¼5ï¼‰" class="headerlink" title="RAID-6ï¼šï¼ˆç±»ä¼¼5ï¼‰"></a>RAID-6ï¼šï¼ˆç±»ä¼¼5ï¼‰</h3><p>ç”±4å—ä»¥ä¸Šçš„ç›˜ç»„æˆé˜µåˆ—ï¼Œæ•°æ®åˆ†æˆN-2ä»½ï¼Œå¹¶ç”Ÿæˆ2ä»½ç‹¬ç«‹çš„å¥‡å¶æ ¡éªŒæ•°æ®ï¼ŒNä»½æ•°æ®åœ¨ç£ç›˜ä¸Šå¾ªç¯å‡è¡¡å­˜å‚¨<br>ç”±äºå­˜åœ¨2ä¸ªç‹¬ç«‹çš„å¥‡å¶æ ¡éªŒæ•°æ®ï¼Œæ‰€ä»¥å†™å…¥æ€§èƒ½è¾ƒå·®ï¼Œä½†æ•°æ®å¯é æ€§éå¸¸é«˜<br>æœ‰å®¹é”™èƒ½åŠ›ï¼šæœ€å¤šå…è®¸å2å—ç›˜<br>æœ€å°‘ç£ç›˜æ•°ï¼š4  </p><p>RAID-10ï¼šå…ˆè¿›è¡ŒRAID-1å†è¿›è¡ŒRAID-0<br>RAID-01ï¼šå…ˆè¿›è¡ŒRAID-0å†è¿›è¡ŒRAID-1<br>å…¶å®ƒRAID-50ç­‰  </p><p>æ­¥éª¤ï¼šå®‰è£…mdadmâ†’å‡†å¤‡ç”¨äºRAIDé˜µåˆ—çš„åˆ†åŒºâ†’åˆ›å»ºRAIDè®¾å¤‡â†’åœ¨RAIDè®¾å¤‡ä¸­å»ºç«‹æ–‡ä»¶ç³»ç»Ÿâ†’æŒ‚è½½å¹¶ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿ<br><code>fdisk /dev/sd*</code>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mdadm</span> <span class="token punctuation">[</span>æ¨¡å¼<span class="token punctuation">]</span> <span class="token operator">&lt;</span>è®¾å¤‡åç§°<span class="token operator">></span> <span class="token punctuation">[</span>é€‰é¡¹<span class="token punctuation">]</span> <span class="token operator">&lt;</span>ç£ç›˜åˆ†åŒº<span class="token operator">></span>  æ¨¡å¼ï¼š  -Cï¼šåˆ›å»º  -n <span class="token comment">#ï¼šä½¿ç”¨#å—è®¾å¤‡åˆ›å»ºæ­¤RAID  </span>-l <span class="token comment">#ï¼šæŒ‡æ˜è¦åˆ›å»ºçš„RAIDçº§åˆ«  </span>-a yesï¼šè‡ªåŠ¨åˆ›å»ºç›®æ ‡RAIDè®¾å¤‡æ–‡ä»¶  -c <span class="token comment">#[KMG]ï¼šæŒ‡æ˜å—å¤§å°  </span>-x <span class="token comment">#ï¼šæŒ‡æ˜ç©ºé—²ç›˜çš„ä¸ªæ•°  </span>-Aï¼šè£…é…ã€æ¿€æ´»  -sï¼šæ‰«æè®¾å¤‡ä¿¡æ¯    -Dï¼ˆ--detailï¼‰ï¼šæ˜¾ç¤ºRAIDçš„è¯¦ç»†ä¿¡æ¯  <span class="token function">mdadm</span> -D /dev/md<span class="token comment">#  </span>  ç®¡ç†æ¨¡å¼ï¼š  -fï¼šæ ‡è®°æŒ‡å®šç£ç›˜ä¸ºæŸå  -aï¼šæ·»åŠ ç£ç›˜  -rï¼šç§»é™¤ç£ç›˜  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è§‚å¯Ÿmdçš„çŠ¶æ€ï¼š<br><code>cat /proc/mdstat</code>  </p><p>åˆ›å»ºRAIDè®¾å¤‡ï¼š<br><code>mdadm -C /dev/md0 -a yes -l 5 -n 3 -x 1 /dev/sdb&#123;1,2,3,4&#125;</code>  </p><p>åœ¨RAIDä¸­å»ºç«‹æ–‡ä»¶ç³»ç»Ÿï¼š<br><code>mkfs.ext4 /dev/md0</code>  </p><p>æŒ‚è½½ä½¿ç”¨<br><code>mount /dev/md0 /testdir</code>  </p><p>ç”ŸæˆRAIDé…ç½®æ–‡ä»¶ï¼š<code>/etc/mdadm.conf</code>ï¼ˆé»˜è®¤ä¸å­˜åœ¨ï¼‰<br>æ‰§è¡Œ<code>mdadm -D -s &gt;&gt; /etc/mdadm.conf</code>  </p><p><code>vim /etc/mdadm.conf</code><br>ä¿®æ”¹å…¶å†…å®¹ï¼šåœ¨æœ€ä¸Šé¢æ·»åŠ ä¸€è¡Œï¼š<code>DEVICE /dev/sd*</code> ï¼›ç¬¬äºŒè¡Œåˆ é™¤<code>metadata=â€¦</code>,<code>name=â€¦</code>ä¸¤é¡¹ï¼›ä¿å­˜é€€å‡º  </p><p>æ£€æµ‹é…ç½®æ–‡ä»¶æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯ï¼š<br>ä½¿ç”¨å¯åŠ¨/åœæ­¢æœåŠ¡çš„æ–¹å¼ï¼š<br>    åœæœåŠ¡ï¼š<code>mdadm -S /dev/md0</code><br>    æ¿€æ´»/å¯åŠ¨ï¼š<code>mdadm -As /dev/md0</code><br>    å¼ºåˆ¶å¯åŠ¨ï¼š<code>mdadm -R /dev/md0</code>  </p><p>æŸ¥çœ‹<code>df -hT</code>  </p><p>è‡ªåŠ¨æŒ‚è½½ï¼šæ·»åŠ åˆ°<code>/etc/fstab</code>æ–‡ä»¶ä¸­å»<br>æ¨¡æ‹Ÿç£ç›˜æ•…éšœ<br><code>mdadm /dev/md0 -f /dev/sdb1</code>  </p><p>ç§»é™¤ç£ç›˜<br><code>mdadm /dev/md0 -r /dev/sdb1</code>  </p><p>æ·»åŠ æ–°æˆå‘˜<br><code>mdadm -G /dev/md0 -n 4 -a /dev/sdb1</code>  </p><p>ä»è½¯ä»¶RAIDç£ç›˜ä¿®å¤ç£ç›˜æ•…éšœï¼š<br>æ›¿æ¢å‡ºæ•…éšœçš„ç£ç›˜ç„¶åå¼€æœºï¼›åœ¨å¤‡ç”¨é©±åŠ¨å™¨ä¸Šé‡å»ºåˆ†åŒºï¼›<br><code>mdadm /dev/md0 -a /dev/sdb1</code><br>æŸ¥çœ‹çŠ¶æ€ï¼š<br><code>mdadm --queryæˆ–cat /proc/mdstat</code>  </p><p>åˆ é™¤RAIDä¿¡æ¯ï¼š<code>mdadm --zero-superblock /dev/sdb1</code>  </p><h1 id="LVMé€»è¾‘å·"><a href="#LVMé€»è¾‘å·" class="headerlink" title="LVMé€»è¾‘å·"></a>LVMé€»è¾‘å·</h1><p>å…è®¸å¯¹å·è¿›è¡Œæ–¹ä¾¿æ“ä½œçš„æŠ½è±¡å±‚ï¼ŒåŒ…æ‹¬é‡æ–°è®¾å®šæ–‡ä»¶ç³»ç»Ÿçš„å¤§å°ï¼Œå…è®¸åœ¨å¤šä¸ªç‰©ç†è®¾å¤‡é—´é‡æ–°ç»„ç»‡æ–‡ä»¶ç³»ç»Ÿ<br>å°†è®¾å¤‡æŒ‡å®šä¸ºç‰©ç†å·PV<br>ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†å·æ¥åˆ›å»ºä¸€ä¸ªå·ç»„VG<br>ç‰©ç†å·æ˜¯ç”¨å›ºå®šå¤§å°çš„ç‰©ç†åŒºåŸŸPEæ¥å®šä¹‰çš„<br>åœ¨ç‰©ç†å·ä¸Šåˆ©ç”¨ç‰©ç†åŒºåŸŸåˆ›å»ºé€»è¾‘å·LV<br>å¯ä»¥åœ¨é€»è¾‘å·ä¸Šåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ<br>LVMä»‹ç»ï¼šLVMï¼šé€»è¾‘å·ç®¡ç†å™¨ï¼›è®¾å¤‡åï¼š<code>/dev/dm-#</code><br>LVMå¯ä»¥å¼¹æ€§çš„æ›´æ”¹LVMçš„å®¹é‡ï¼šé€šè¿‡äº¤æ¢PEæ¥è¿›è¡Œèµ„æ–™çš„è½¬æ¢ï¼Œå°†åŸæ¥LVå†…çš„PEè½¬ç§»åˆ°å…¶ä»–çš„è®¾å¤‡ä¸­ä»¥LVçš„å®¹é‡ï¼Œæˆ–å°†å…¶ä»–è®¾å¤‡ä¸­çš„PEåŠ åˆ°LVä¸­ä»¥åŠ å¤§å®¹é‡  </p><table><thead><tr><th align="left">åŠŸèƒ½</th><th align="left">ç‰©ç†å·ç®¡ç†PV</th><th align="left">å·ç®¡ç†VG</th><th align="left">é€»è¾‘å·ç®¡ç†LV</th></tr></thead><tbody><tr><td align="left">scan æ‰«æ</td><td align="left">pvscan</td><td align="left">vgscan</td><td align="left">lvscan</td></tr><tr><td align="left">create å»ºç«‹</td><td align="left">pvcreate</td><td align="left">vgcreate</td><td align="left">lvcreate</td></tr><tr><td align="left">display æ˜¾ç¤º</td><td align="left">pvdiaplay</td><td align="left">vgdiaplay</td><td align="left">lvdiaplay</td></tr><tr><td align="left">remove åˆ é™¤</td><td align="left">pvremove</td><td align="left">vgremove</td><td align="left">lvremove</td></tr><tr><td align="left">reduce ç¼©å‡</td><td align="left">-</td><td align="left">vgreduce</td><td align="left">lvreduce</td></tr><tr><td align="left">extend æ‰©å±•</td><td align="left">-</td><td align="left">vgextend</td><td align="left">lvestend</td></tr></tbody></table><h2 id="PVç®¡ç†å·¥å…·ï¼š"><a href="#PVç®¡ç†å·¥å…·ï¼š" class="headerlink" title="PVç®¡ç†å·¥å…·ï¼š"></a>PVç®¡ç†å·¥å…·ï¼š</h2><p>PVï¼šç‰©ç†å·ï¼šæ•´ä¸ªç¡¬ç›˜ï¼Œæˆ–ä½¿ç”¨fdiskå·¥å…·å»ºç«‹çš„æ™®é€šåˆ†åŒºï¼ˆ8eï¼‰ï¼ŒåŒ…æ‹¬è®¸å¤šé»˜è®¤çš„4MBå¤§å°çš„PEå•å…ƒ<br>åˆ›å»ºPVç‰©ç†å·<br><code>pvcreate /dev/sdb&#123;1,2,3&#125;</code><br>pvsï¼šæ˜¾ç¤ºç®€è¦pvä¿¡æ¯ï¼ˆpvdisplayæ˜¾ç¤ºçš„æ›´è¯¦ç»†ï¼‰  </p><h2 id="VGç®¡ç†å·¥å…·"><a href="#VGç®¡ç†å·¥å…·" class="headerlink" title="VGç®¡ç†å·¥å…·"></a>VGç®¡ç†å·¥å…·</h2><p>VGï¼šå·ç»„ï¼šä¸€ä¸ªæˆ–å¤šä¸ªç‰©ç†å·ç»„åˆè€Œæˆçš„æ•´ä½“ï¼ˆç›¸å½“äºé€»è¾‘ä¸Šçš„ä¸€ä¸ªç¡¬ç›˜ï¼‰<br>åˆ›å»ºå·ç»„ï¼ˆ-sæŒ‡å®šPEå¤§å°8Mï¼‰<br><code>vgcreate -s 8m vgå pvå</code><br>vgsï¼šæ˜¾ç¤ºç®€è¦vgä¿¡æ¯ï¼ˆvgdisplayæ˜¾ç¤ºçš„æ›´è¯¦ç»†ï¼‰<br><code>vgextend vgå pvåï¼ˆæ‰©å®¹vgï¼‰</code><br><code>vgreduce vgå pvåï¼ˆå‡å®¹vgï¼‰</code><br><code>vgremove /dev/vgåï¼ˆåˆ é™¤vgï¼‰</code>ï¼Œå…ˆåš<code>pvmove /dev/pv1 /dev/pv2</code>ï¼ˆå°†pv1ä¸­çš„å†…å®¹ç§»åŠ¨åˆ°pv2ä¸­ï¼‰ï¼Œä¸éœ€è¦ä¿ç•™æ•°æ®åˆ™ä¸åšpvmove  </p><h2 id="LVç®¡ç†å·¥å…·"><a href="#LVç®¡ç†å·¥å…·" class="headerlink" title="LVç®¡ç†å·¥å…·"></a>LVç®¡ç†å·¥å…·</h2><p>LVï¼šé€»è¾‘å·ï¼šä»å·ç»„ä¸­å‰²å‡ºçš„ä¸€å—ç©ºé—´ï¼Œå¯ä»¥æ ¼å¼åŒ–æŒ‚è½½ä½¿ç”¨<br>åˆ›å»ºé€»è¾‘å·<br><code>lvcreate -L 5G -n lvå vgå</code>ï¼ˆ-LæŒ‡å®šlvå¤§å°5gï¼‰<br>lvsï¼šæ˜¾ç¤ºlvç®€è¦ä¿¡æ¯ï¼ˆlvdisplayæ˜¾ç¤ºçš„æ›´è¯¦ç»†ï¼‰  </p><h3 id="æ‰©å±•é€»è¾‘å·LV"><a href="#æ‰©å±•é€»è¾‘å·LV" class="headerlink" title="æ‰©å±•é€»è¾‘å·LV"></a>æ‰©å±•é€»è¾‘å·LV</h3><p><code>lvextend -L 7G /dev/vgå/lvå</code>ï¼ˆæ‰©å±•é€»è¾‘å·åˆ°7Gï¼‰ï¼Œ<br>æ‰§è¡Œ<code>resize2fs /dev/vgå/lvå</code>ï¼Œè®©æ–‡ä»¶ç³»ç»Ÿ<code>df -h</code>è¯†åˆ«æ‰©å±•åçš„é€»è¾‘å·å¤§å°  </p><h3 id="ç¼©å‡é€»è¾‘å·"><a href="#ç¼©å‡é€»è¾‘å·" class="headerlink" title="ç¼©å‡é€»è¾‘å·"></a>ç¼©å‡é€»è¾‘å·</h3><p><code>umount /dev/vgå/lvå</code>ï¼šå¸è½½<br><code>e2fsck -f /dev/vgå/lvå</code>ï¼šç£ç›˜æ£€æŸ¥<br><code>resize2fs /dev/vgå/lvå 3G</code>ï¼šæŒ‡å®šç¼©å‡åçš„é€»è¾‘å·å¤§å°ä¸º3Gï¼ˆå°†åˆ†æ•£çš„æ•°æ®æ•´ç†åˆ°è¦ä¿ç•™çš„3Gé€»è¾‘å·ç©ºé—´é‡Œï¼‰<br><code>lvreduce -L 3G /dev/vgå/lvå</code>ï¼šç¼©å‡é€»è¾‘å·ä¸º3G<br><code>mount /dev/vgå/lvå /åŸæŒ‚è½½ç‚¹</code>ï¼ˆç”±äºæ‰§è¡Œ<code>resize2fs</code>å‘½ä»¤ï¼Œæ‰€ä»¥åŸæŒ‚è½½çš„å†…å®¹ä¼šè¢«ä¿ç•™ï¼ŒåŸæŒ‚è½½ç‚¹æ•°æ®&lt;3Gï¼‰  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç£ç›˜ç®¡ç†</title>
      <link href="/posts/da12.html"/>
      <url>/posts/da12.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ç£ç›˜ç®¡ç†"><a href="#ç£ç›˜ç®¡ç†" class="headerlink" title="ç£ç›˜ç®¡ç†"></a>ç£ç›˜ç®¡ç†</h1><p>I/Oè®¾å¤‡åœ°å€    </p><h2 id="è®¾å¤‡ç±»å‹ï¼š"><a href="#è®¾å¤‡ç±»å‹ï¼š" class="headerlink" title="è®¾å¤‡ç±»å‹ï¼š"></a>è®¾å¤‡ç±»å‹ï¼š</h2><p>å—è®¾å¤‡ï¼šblockï¼Œå­˜å–å•ä½â€å—â€ï¼Œç£ç›˜<br>å­—ç¬¦è®¾å¤‡ï¼šcharï¼Œå­˜å–å•ä½â€å­—ç¬¦â€ï¼Œé”®ç›˜<br>è®¾å¤‡æ–‡ä»¶ï¼šå…³è”è‡³ä¸€ä¸ªè®¾å¤‡é©±åŠ¨ç¨‹åºï¼Œè¿›è€Œèƒ½å¤Ÿè·Ÿä¸ä¹‹å¯¹åº”ç¡¬ä»¶è®¾å¤‡è¿›è¡Œé€šä¿¡  </p><h2 id="è®¾å¤‡å·ç ï¼š"><a href="#è®¾å¤‡å·ç ï¼š" class="headerlink" title="è®¾å¤‡å·ç ï¼š"></a>è®¾å¤‡å·ç ï¼š</h2><p>ä¸»è®¾å¤‡å·ï¼šæ ‡è¯†è®¾å¤‡ç±»å‹<br>æ¬¡è®¾å¤‡å·ï¼šæ ‡è¯†åŒä¸€ç±»å‹ä¸‹çš„ä¸åŒè®¾å¤‡  </p><h2 id="ç¡¬ç›˜æ¥å£ç±»å‹ï¼š"><a href="#ç¡¬ç›˜æ¥å£ç±»å‹ï¼š" class="headerlink" title="ç¡¬ç›˜æ¥å£ç±»å‹ï¼š"></a>ç¡¬ç›˜æ¥å£ç±»å‹ï¼š</h2><p>å¹¶è¡Œï¼šä¸²å£ï¼š<br>è®¾å¤‡æ–‡ä»¶ï¼šç£ç›˜è®¾å¤‡å‘½åï¼š<code>/dev/sd[a-z]</code><br>ä¸åŒè®¾å¤‡ï¼š<code>a-z</code><br>åŒä¸€è®¾å¤‡ä¸åŒåˆ†åŒº<code>/dev/sda[1-4]</code>ï¼ˆä¸»åˆ†åŒºæœ€å¤š4ä¸ªï¼Œæ‰©å±•åˆ†åŒºåª1ä¸ªï¼Œå¤šä¸ªæ— æ„ä¹‰å³3ä¸»åˆ†åŒº+1æ‰©å±•åˆ†åŒºï¼‰  </p><h2 id="ç£ç›˜ç»“æ„ï¼š"><a href="#ç£ç›˜ç»“æ„ï¼š" class="headerlink" title="ç£ç›˜ç»“æ„ï¼š"></a>ç£ç›˜ç»“æ„ï¼š</h2><p>ç£è‡‚ã€ç£å¤´headã€ä¸»è½´ã€ç”µæœºã€ç£é“trackã€æ‰‡åŒºsecotrï¼ˆå¤§å°512bytesï¼‰ã€ç°‡ï¼ˆåŒä¸€ç£é“çš„è¿ç»­å¤šä¸ªæ‰‡åŒºï¼‰ã€ç›˜é¢ã€ç›˜ç‰‡ã€æŸ±é¢cylinder  </p><h3 id="ç£ç›˜åˆ†åŒºï¼šä¸ºä»€ä¹ˆåˆ†åŒºï¼Ÿ"><a href="#ç£ç›˜åˆ†åŒºï¼šä¸ºä»€ä¹ˆåˆ†åŒºï¼Ÿ" class="headerlink" title="ç£ç›˜åˆ†åŒºï¼šä¸ºä»€ä¹ˆåˆ†åŒºï¼Ÿ"></a>ç£ç›˜åˆ†åŒºï¼šä¸ºä»€ä¹ˆåˆ†åŒºï¼Ÿ</h3><ol><li>ä¼˜åŒ–I/Oæ€§èƒ½  </li><li>å®ç°ç£ç›˜ç©ºé—´é…é¢é™åˆ¶  </li><li>æé«˜ä¿®å¤é€Ÿåº¦  </li><li>éš”ç¦»ç³»ç»Ÿå’Œç¨‹åº  </li><li>å®‰è£…å¤šä¸ªOS  </li><li>é‡‡ç”¨ä¸åŒæ–‡ä»¶ç³»ç»Ÿ<br>åˆ†åŒºï¼šä¸¤ç§åˆ†åŒºæ–¹å¼ï¼š<code>MBR</code>ï¼Œ<code>GPT</code><br>MBRï¼š1982å¹´ï¼Œä½¿ç”¨32ä½è¡¨ç¤ºæ‰‡åŒºæ•°ï¼Œåˆ†åŒºä¸è¶…è¿‡2T  </li></ol><h3 id="å¦‚ä½•åˆ†åŒºï¼šæŒ‰æŸ±é¢åˆ†åŒº"><a href="#å¦‚ä½•åˆ†åŒºï¼šæŒ‰æŸ±é¢åˆ†åŒº" class="headerlink" title="å¦‚ä½•åˆ†åŒºï¼šæŒ‰æŸ±é¢åˆ†åŒº"></a>å¦‚ä½•åˆ†åŒºï¼šæŒ‰æŸ±é¢åˆ†åŒº</h3><p>0ç£é“0æ‰‡åŒºï¼š512bytesï¼ˆå…¶ä¸­446å­—èŠ‚ä¸ºå¼•å¯¼ç¨‹åºboot loaderï¼Œ64å­—èŠ‚æ˜¯åˆ†åŒºè¡¨ï¼Œå…¶ä¸­16å­—èŠ‚æ ‡è¯†ä¸€ä¸ªåˆ†åŒºï¼Œ2å­—èŠ‚ï¼š55AAåˆ†åŒºæ ‡å¿—ï¼‰<br>æœ€å¤šæ‹¥æœ‰64Ã·16=4ä¸ªä¸»åˆ†åŒºï¼ˆä¹Ÿå¯ä»¥&lt;4ä¸ªä¸»åˆ†åŒº+1ä¸ªæ‰©å±•åˆ†åŒºï¼Œåœ¨æ‰©å±•åˆ†åŒºä¸Šå¯åˆ’åˆ†å¤šä¸ªé€»è¾‘åˆ†åŒºï¼‰  </p><h4 id="ç®¡ç†åˆ†åŒºï¼š"><a href="#ç®¡ç†åˆ†åŒºï¼š" class="headerlink" title="ç®¡ç†åˆ†åŒºï¼š"></a>ç®¡ç†åˆ†åŒºï¼š</h4><p><code>lsblk</code>ï¼šåˆ—å‡ºå—è®¾å¤‡<br><code>partx -a /dev/sd*</code>ï¼šé‡æ–°è®¾ç½®å†…å­˜ä¸­çš„å†…æ ¸åˆ†åŒºè¡¨ç‰ˆæœ¬ï¼ˆä½¿ç¡¬ç›˜åˆ†åŒºè¡¨ç”Ÿæ•ˆ    centos5,7ä½¿ç”¨partprobeï¼‰ï¼ˆå¤šæ‰§è¡Œå‡ æ¬¡ï¼Œä¸è¡Œå°±rebootï¼‰<br><code>blkid /dev/sda#</code>ï¼šæŸ¥çœ‹åˆ†åŒºè®¾å¤‡çš„UUID  </p><h4 id="fdisk-åˆ†åŒºå·¥å…·"><a href="#fdisk-åˆ†åŒºå·¥å…·" class="headerlink" title="fdisk åˆ†åŒºå·¥å…·"></a>fdisk åˆ†åŒºå·¥å…·</h4><p><code>fdisk /dev/sdb</code>ï¼šå¯¹sdbè¿›è¡Œåˆ†åŒº<br>å­å‘½ä»¤ï¼š<br><code>m</code>ï¼šå¸®åŠ©<br><code>p</code>ï¼šåˆ—è¡¨åˆ†åŒºæƒ…å†µ<br><code>t</code>ï¼šæ›´æ”¹åˆ†åŒºç³»ç»Ÿç±»å‹å¯¹åº”ç¼–å·<br><code>l</code>ï¼šæŸ¥çœ‹åˆ†åŒºç³»ç»Ÿç±»å‹å¯¹åº”ç¼–å·<br><code>d</code>ï¼šåˆ é™¤åˆ†åŒº<br><code>w</code>ï¼šä¿å­˜é€€å‡º<br><code>q</code>ï¼šä¸ä¿å­˜é€€å‡º<br><code>n</code>ï¼šåˆ›å»ºåˆ†åŒº<br>â€‹      <code>e</code>ï¼šæŒ‡å®šåˆ›å»ºæ‰©å±•åˆ†åŒº<br>â€‹      <code>p</code>ï¼šæŒ‡å®šåˆ›å»ºä¸»åˆ†åŒº<br>â€‹      <code>l</code>ï¼šæŒ‡å®šåˆ›å»ºé€»è¾‘åˆ†åŒº<br><code>fdisk -l</code>ï¼šæ˜¾ç¤ºç¡¬ç›˜ä½¿ç”¨æƒ…å†µï¼ˆæŒ‰æŸ±é¢ã€ç£é“æ˜¾ç¤ºï¼‰<br><code>fdisk -lu</code>ï¼šæŒ‰æ‰‡åŒºæ˜¾ç¤ºä¿¡æ¯<br><code>cat /proc/partitions</code>ï¼šæŸ¥çœ‹å†…æ ¸æ˜¯å¦å·²ç»è¯†åˆ«æ–°çš„åˆ†åŒº<br><code>partx -a /dev/sd*</code>ï¼šé€šçŸ¥å†…æ ¸é‡æ–°è¯»å–ç¡¬ç›˜åˆ†åŒºè¡¨<br><code>partx -d --nr 5-6 /dev/sd*</code>ï¼šfdiskåˆ é™¤åˆ†åŒºï¼Œå†…å­˜æœªè¯†åˆ«æƒ…å†µä¸‹ï¼Œä½¿ç”¨partx -dä½¿å…¶è¯†åˆ«ï¼ˆèŒƒå›´åˆ é™¤5-6ï¼‰<br><code>lsmod</code> æŸ¥çœ‹ç³»ç»Ÿä¸­å¯ç”¨çš„æ¨¡å—  </p><h1 id="æ–‡ä»¶ç³»ç»Ÿï¼š"><a href="#æ–‡ä»¶ç³»ç»Ÿï¼š" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿï¼š"></a>æ–‡ä»¶ç³»ç»Ÿï¼š</h1><p>æ–‡ä»¶ç³»ç»Ÿæ˜¯æ“ä½œç³»ç»Ÿç”¨äºæ˜ç¡®å­˜å‚¨è®¾å¤‡æˆ–åˆ†åŒºä¸Šçš„æ–‡ä»¶çš„æ–¹æ³•å’Œæ•°æ®ç»“æ„ï¼›å³åœ¨å­˜å‚¨è®¾å¤‡ä¸Šç»„ç»‡æ–‡ä»¶çš„æ–¹æ³•ã€‚æ“ä½œç³»ç»Ÿä¸­è´Ÿè´£ç®¡ç†å’Œå­˜å‚¨æ–‡ä»¶ä¿¡æ¯çš„è½¯ä»¶ç»“æ„ç§°ä¸ºæ–‡ä»¶ç®¡ç†ç³»ç»Ÿï¼Œç®€ç§°æ–‡ä»¶ç³»ç»Ÿã€‚ä»ç³»ç»Ÿè§’åº¦æ¥çœ‹ï¼Œæ–‡ä»¶ç³»ç»Ÿæ˜¯å¯¹æ–‡ä»¶å­˜å‚¨è®¾å¤‡çš„ç©ºé—´è¿›è¡Œç»„ç»‡å’Œåˆ†é…ï¼Œè´Ÿè´£æ–‡ä»¶å­˜å‚¨å¹¶å¯¹å­˜å…¥çš„æ–‡ä»¶è¿›è¡Œä¿æŠ¤å’Œæ£€ç´¢çš„ç³»ç»Ÿã€‚å…·ä½“åœ°è¯´ï¼Œå®ƒè´Ÿè´£ä¸ºç”¨æˆ·å»ºç«‹æ–‡ä»¶ï¼Œå­˜å…¥ã€è¯»å‡ºã€ä¿®æ”¹ã€è½¬å‚¨æ–‡ä»¶ï¼Œæ§åˆ¶æ–‡ä»¶çš„å­˜å–ï¼Œå®‰å…¨æ§åˆ¶ï¼Œæ—¥å¿—ï¼Œå‹ç¼©ï¼ŒåŠ å¯†ç­‰ã€‚  </p><h2 id="æ–‡ä»¶ç³»ç»Ÿåˆ†ç±»ï¼š"><a href="#æ–‡ä»¶ç³»ç»Ÿåˆ†ç±»ï¼š" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿåˆ†ç±»ï¼š"></a>æ–‡ä»¶ç³»ç»Ÿåˆ†ç±»ï¼š</h2><ol><li>æ ¹æ®å…¶æ˜¯å¦æ”¯æŒâ€æ—¥å¿—â€åŠŸèƒ½  </li><li>æ—¥å¿—å‹æ–‡ä»¶ç³»ç»Ÿï¼šext3ï¼Œext4ï¼Œxfs  </li><li>éæ—¥å¿—å‹æ–‡ä»¶ç³»ç»Ÿï¼šext2ï¼Œvfat<br><code>cat /proc/filesystems</code>ï¼šæŸ¥çœ‹æ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿ<br><code>mkfs.ext4 /dev/sd*#</code>ï¼šï¼ˆ.xfs .btrfs .vfatï¼‰<br><code>mkfs -t æ–‡ä»¶ç³»ç»Ÿç±»å‹ /dev/sd*#</code><br>æ‰©å±•åˆ†åŒºä¸å¯ä»¥æ ¼å¼åŒ–ä½¿ç”¨ï¼Œå› ä¸ºæ‰©å±•åˆ†åŒºæ˜¯ä¸ªé€»è¾‘æ€§çš„ç¡¬ç›˜ï¼Œåªæœ‰åˆ†åŒºåï¼Œå¯¹é€»è¾‘åˆ†åŒºæ ¼å¼åŒ–åæ‰èƒ½ä½¿ç”¨  </li></ol><h2 id="æ–‡ä»¶ç³»ç»Ÿæ£€æµ‹å’Œä¿®å¤"><a href="#æ–‡ä»¶ç³»ç»Ÿæ£€æµ‹å’Œä¿®å¤" class="headerlink" title="æ–‡ä»¶ç³»ç»Ÿæ£€æµ‹å’Œä¿®å¤"></a>æ–‡ä»¶ç³»ç»Ÿæ£€æµ‹å’Œä¿®å¤</h2><p>éå¸¸å‘ç”Ÿäºæ­»æœºæˆ–è€…éæ­£å¸¸å…³æœºä¹‹å<br>æŒ‚è½½ä¸ºæ–‡ä»¶ç³»ç»Ÿæ ‡è®°ä¸ºâ€no cleanâ€<br>æ³¨æ„ï¼šä¸€å®šä¸è¦åœ¨æŒ‚è½½çŠ¶æ€ä¸‹ä¿®å¤<br><code>fsck.ext4 /dev/sd*#</code>ï¼šå¯¹åˆ†åŒºæ£€æµ‹å’Œä¿®å¤ï¼ˆ.ext4 .xfsç­‰è¦ä¸åˆ†åŒºå·²å­˜åœ¨çš„æ–‡ä»¶ç±»å‹ç›¸åŒï¼‰ï¼ˆç­‰åŒäºfsck -t ext4 -ar /dev/sd*#ï¼‰<br><code>e2fsck -y -f /dev/sd*#</code> ï¼ˆä¸“ç”¨äºextç³»åˆ—æ–‡ä»¶çš„æ£€æµ‹ä¿®å¤å·¥å…·ï¼‰<br><code>-y</code>ï¼šè‡ªåŠ¨å›ç­”ä¸ºyes<br><code>-f</code>ï¼šå¼ºåˆ¶ä¿®å¤  </p><h2 id="æŒ‚è½½mount"><a href="#æŒ‚è½½mount" class="headerlink" title="æŒ‚è½½mount"></a>æŒ‚è½½mount</h2><p>æŒ‚è½½<code>mount</code>ï¼šå°†é¢å¤–çš„æ–‡ä»¶ç³»ç»Ÿä¸æ–‡ä»¶ç³»ç»ŸæŸç°å­˜çš„ç›®å½•å»ºç«‹èµ·å…³è”å…³ç³»ï¼Œè¿›è€Œä½¿å¾—æ­¤ç›®å½•åšä¸ºå…¶å®ƒæ–‡ä»¶è®¿é—®å…¥å£çš„è¡Œä¸º<br>å¸è½½ï¼šä¸ºè§£é™¤æ­¤å…³è”å…³ç³»çš„è¿‡ç¨‹<br><code>mount [é€‰é¡¹] è®¾å¤‡åˆ†åŒºå æŒ‚è½½ç›®å½•</code>ï¼šæŠŠè®¾å¤‡å…³è”åˆ°æŒ‚è½½ç‚¹  </p><p>é€‰é¡¹ï¼š<br><code>-t ext4</code> æŒ‡æ˜æ–‡ä»¶ç±»å‹æ˜¯ext4<br><code>-r</code> åªè¯»æŒ‚è½½<br><code>-a</code> è‡ªåŠ¨æŒ‚è½½ï¼ˆå®šä¹‰åœ¨/etc/fstabæ–‡ä»¶ä¸­ï¼‰<br>ï¼ˆumount -a æŠ¥é”™æ˜¯/dev/sdb1æŒ‚è½½åˆ°/testdirç›®å½•æ—¶ï¼Œ/dev/sdb1åˆ†åŒºè¢«åšæˆäº†RAIDï¼‰<br><code>-o [é€‰é¡¹]</code>ï¼ˆremountï¼Œusrquotaï¼Œgrpquotaå³ï¼šé‡æ–°æŒ‚è½½ï¼Œå¯¹ç”¨æˆ·çš„é…é¢æ–‡ä»¶ï¼Œå¯¹ç»„çš„é…é¢æ–‡ä»¶ï¼‰<br>å¦‚æœæŒ‚è½½ç›®å½•ä¸‹æœ‰æ–‡ä»¶ï¼Œé‚£ä¹ˆæŒ‚è½½ååŸæœ‰æ–‡ä»¶ä¼šè¢«ä¸´æ—¶éšè—ï¼Œè§£é™¤æŒ‚è½½å…³ç³»ååŸæœ‰æ–‡ä»¶è¿˜åŸã€‚ï¼ˆæŒ‚è½½ç‚¹ç›®å½•ä¸€èˆ¬ä¸ºç©ºï¼‰<br><code>cat /etc/mtab</code>ï¼šæ˜¾ç¤ºå½“å‰å·²æŒ‚è½½çš„æ‰€æœ‰è®¾å¤‡<br><code>findmnt æŒ‚è½½ç‚¹</code>ï¼šæŸ¥çœ‹æŒ‚è½½ç‚¹çš„æŒ‚è½½æƒ…å†µ<br><code>umount è®¾å¤‡åˆ†åŒºåï¼ˆæˆ–è€…æŒ‚è½½ç›®å½•ï¼‰</code>ï¼šå¸è½½ï¼Œå³è§£é™¤å…³è”å…³ç³»  </p><p>æŒ‚è½½ç‚¹å’Œ<code>/etc/fstab</code>ï¼š  </p><ol><li>æ–‡ä»¶ç³»ç»Ÿä½“ç³»  </li><li>è¢«mountã€fsckå’Œå…¶å®ƒç¨‹åºä½¿ç”¨  </li><li>ç³»ç»Ÿé‡å¯æ—¶ä¿ç•™æ–‡ä»¶ç³»ç»Ÿä½“ç³»  </li><li>ä½¿ç”¨<code>mount -a</code>å‘½ä»¤ æŒ‚è½½/etc/fstabæ–‡ä»¶é‡Œçš„é…ç½®ä¿¡æ¯  </li></ol><p>/etc/fstabæ¯è¡Œçš„å®šä¹‰ï¼š  </p><ol><li>è¦æŒ‚è½½çš„è®¾å¤‡ æŒ‚è½½ç‚¹ æ–‡ä»¶ç³»ç»Ÿç±»å‹ æŒ‚è½½é€‰é¡¹ è½¬å‚¨é¢‘ç‡ è‡ªæ£€æ¬¡åº  </li><li>è¦æŒ‚è½½çš„è®¾å¤‡ï¼šï¼ˆè®¾å¤‡æ–‡ä»¶ã€UUIDã€ä¼ªæ–‡ä»¶ç³»ç»Ÿåç§°ï¼‰  </li><li>æŒ‚è½½é€‰é¡¹ï¼šdefaultsï¼ˆusrquotaï¼Œgrpquotaï¼‰  </li><li>è½¬å‚¨é¢‘ç‡ï¼š  <blockquote><p>0ï¼šä¸åšå¤‡ä»½<br>1ï¼šæ¯å¤©è½¬å‚¨<br>2ï¼šæ¯éš”ä¸€å¤©è½¬å‚¨  </p></blockquote></li><li>è‡ªæ£€æ¬¡åºï¼š  <blockquote><p>0ï¼šä¸è‡ªæ£€<br>1ï¼šé¦–å…ˆè‡ªæ£€ï¼›ä¸€èˆ¬åªæœ‰rootfsæ‰ç”¨1  </p></blockquote></li></ol><h2 id="å¤„ç†äº¤æ¢æ–‡ä»¶å’Œåˆ†åŒº"><a href="#å¤„ç†äº¤æ¢æ–‡ä»¶å’Œåˆ†åŒº" class="headerlink" title="å¤„ç†äº¤æ¢æ–‡ä»¶å’Œåˆ†åŒº"></a>å¤„ç†äº¤æ¢æ–‡ä»¶å’Œåˆ†åŒº</h2><p>äº¤æ¢åˆ†åŒºæ˜¯ç³»ç»ŸRAMï¼ˆå†…å­˜ï¼‰çš„è¡¥å……<br>åŸºæœ¬è®¾ç½®åŒ…æ‹¬ï¼š  </p><ol><li>åˆ›å»ºäº¤æ¢åˆ†åŒºæˆ–è€…æ–‡ä»¶  </li><li>ä½¿ç”¨mkswapåˆ›å»ºäº¤æ¢æ–‡ä»¶ç³»ç»Ÿ  </li><li>åœ¨/etc/fstabæ–‡ä»¶ä¸­æ·»åŠ é€‚å½“çš„æ¡ç›®<br>æŒ‚è½½äº¤æ¢åˆ†åŒºï¼š  </li><li><code>mkswap /dev/sdb1</code>åˆ›å»ºäº¤æ¢æ–‡ä»¶ç³»ç»Ÿ  </li><li><code>swapon /dev/sdb1</code>æ¿€æ´»æ–°å¢çš„äº¤æ¢åˆ†åŒº  </li><li><code>swapon -a</code> æ¿€æ´»æ‰€æœ‰çš„äº¤æ¢åˆ†åŒº  </li><li><code>swapon -s</code>æŸ¥çœ‹äº¤æ¢åˆ†åŒºæƒ…å†µã€æ•°é‡  </li><li><code>swapoff /dev/sdb1</code>ç¦ç”¨äº¤æ¢åˆ†åŒº<br><code>cat /proc/meminfo|grep &quot;SwapTotal&quot;</code> æŸ¥çœ‹äº¤æ¢åˆ†åŒºå¤§å°ï¼ˆgrep -i ä¸åŒºåˆ†å¤§å°å†™ï¼‰  </li></ol><h1 id="ç§»åŠ¨ä»‹è´¨ï¼š"><a href="#ç§»åŠ¨ä»‹è´¨ï¼š" class="headerlink" title="ç§»åŠ¨ä»‹è´¨ï¼š"></a>ç§»åŠ¨ä»‹è´¨ï¼š</h1><p>æŒ‚è½½æ„å‘³ç€ä½¿ç”¨å¤–æ¥çš„æ–‡ä»¶ç³»ç»Ÿçœ‹èµ·æ¥å¦‚åŒæ˜¯ä¸»ç›®å½•æ ‘çš„ä¸€éƒ¨åˆ†<br>è®¿é—®å‰ã€ä»‹è´¨å¿…é¡»è¢«æŒ‚è½½<br>æ‘˜é™¤æ—¶ã€ä»‹è´¨å¿…é¡»è¢«å¸è½½<br>æŒ‰ç…§é»˜è®¤ä½ç½®ï¼Œéæ ¹ç”¨æˆ·åªèƒ½æŒ‚è½½æŸäº›è®¾å¤‡ï¼ˆå…‰ç›˜ã€USBç­‰ç­‰ï¼‰<br>æŒ‚è½½ç‚¹é€šå¸¸åœ¨/mediaæˆ–/mntä¸‹<br>åœ¨å›¾å½¢ç¯å¢ƒä¸‹è‡ªåŠ¨å¯åŠ¨æŒ‚è½½/media/CentOS_6.9_Final/Packages<br>å¦åˆ™å°±å¿…é¡»è¢«æ‰‹å·¥æŒ‚è½½<br><code>mount /dev/sr0 /media/</code>  </p><h1 id="å¸¸è§å·¥å…·"><a href="#å¸¸è§å·¥å…·" class="headerlink" title="å¸¸è§å·¥å…·"></a>å¸¸è§å·¥å…·</h1><p><code>free -m</code>ï¼šä»¥MBä¸ºå•ä½<br><code>free -g</code>ï¼šä»¥GBä¸ºå•ä½<br><code>df -H è®¾å¤‡åˆ†åŒº</code>ï¼šä»¥1000ä¸ºå•ä½<br><code>df -h è®¾å¤‡åˆ†åŒº</code>ï¼šæ˜“è¯»æ ¼å¼æ˜¾ç¤ºï¼ˆä»¥1024ä¸ºå•ä½ï¼‰<br><code>df -T è®¾å¤‡åˆ†åŒº</code>ï¼šæ–‡ä»¶ç³»ç»Ÿç±»å‹<br><code>df -i è®¾å¤‡åˆ†åŒº</code>ï¼šæ˜¾ç¤ºç´¢å¼•èŠ‚ç‚¹<br><code>du -h ç›®å½•</code>ï¼šæ˜“è¯»æ ¼å¼æ˜¾ç¤º<br><code>du -s ç›®å½•</code>ï¼šæ€»çš„<br>ddå‘½ä»¤ï¼šè½¬æ¢å’Œå¤åˆ¶æ–‡ä»¶  </p><h2 id="ç”¨æ³•ï¼š"><a href="#ç”¨æ³•ï¼š" class="headerlink" title="ç”¨æ³•ï¼š"></a>ç”¨æ³•ï¼š</h2><p><code>dd if=/æ–‡ä»¶ of=/æ–‡ä»¶ bs= count=â€¦</code><br><code>bs</code>ï¼šå¤åˆ¶å•å…ƒå¤§å°ï¼Œé»˜è®¤å•ä½æ˜¯å­—èŠ‚ï¼ˆä¾‹å¦‚ï¼šbs=6Kï¼‰<br><code>count</code>ï¼šå¤åˆ¶å¤šå°‘ä¸ªå•å…ƒï¼ˆä¾‹å¦‚ï¼šcount=2ï¼‰<br><code>if=file</code>ï¼šä»æ–‡ä»¶ä¸­è¯»å–å†…å®¹<br><code>of=file</code>ï¼šå†™å…¥åˆ°ç›®æ ‡æ–‡ä»¶ä¸­<br><code>skip</code>ï¼šä»å¼€å¤´å¿½ç•¥nä¸ªibså¤§å°çš„å—ï¼ˆä¾‹å¦‚ï¼šskip=6 bs=3K ä»å¼€å¤´å¿½ç•¥18kçš„æ•°æ®å¼€å§‹å¤åˆ¶ï¼‰<br><code>seek</code>ï¼šä»å¼€å¤´å¿½ç•¥nä¸ªobså¤§å°çš„å—ï¼ˆä¾‹å¦‚ï¼šseek=2 bs=2k ä»å¼€å¤´å¿½ç•¥4Kçš„æ•°æ®å¼€å§‹å†™å…¥ï¼‰<br>å¤‡ä»½MBRï¼š<code>dd if=/dev/sda of=/tmp/mbr.bak bs=512 count=1</code>  </p><h2 id="å¤‡ä»½"><a href="#å¤‡ä»½" class="headerlink" title="å¤‡ä»½"></a>å¤‡ä»½</h2><p><code>dd if=/dev/sdb of=/dev/sdc</code>ï¼šå°†/dev/sdbæ•´ç›˜å¤‡ä»½åˆ°/dev/sdc<br><code>dd if=/dev/sdb | gzip &gt; /path/sdb.gz</code>ï¼šè¯»sdbå…¨ç›˜æ•°æ®å‹ç¼©åˆ°æŒ‡å®šè·¯å¾„ä¸‹çš„sdb.gz<br><code>dd if=/dev/mem of=/root/mem.bin bs=1024</code>ï¼šå°†å†…å­˜é‡Œçš„æ•°æ®æ‹·è´åˆ°rootç›®å½•ä¸‹çš„mem.binæ–‡ä»¶<br><code>dd if=/dev/sr0 of=/root/cd.iso</code>ï¼šæ‹·è´åˆ°å…‰ç›˜æ•°æ®åˆ°rootæ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶ä¿å­˜ä¸ºcd.isoæ–‡ä»¶  </p><h1 id="å¤§äº2Tçš„ç£ç›˜åˆ†åŒº"><a href="#å¤§äº2Tçš„ç£ç›˜åˆ†åŒº" class="headerlink" title="å¤§äº2Tçš„ç£ç›˜åˆ†åŒº"></a>å¤§äº2Tçš„ç£ç›˜åˆ†åŒº</h1><p>ä»¥åœ¨<code>CentOS 7.5</code>æ“ä½œç³»ç»Ÿä¸­ä½¿ç”¨<code>parted</code>åˆ†åŒºå·¥å…·å°†æ•°æ®ç›˜<code>/dev/vdc</code>è®¾ç½®ä¸ºä¸»åˆ†åŒºï¼ˆ<code>yum install parted</code>ï¼‰ï¼Œåˆ†åŒºå½¢å¼é»˜è®¤è®¾ç½®ä¸º<code>GPT</code>ï¼Œæ–‡ä»¶ç³»ç»Ÿè®¾ç½®ä¸º<code>EXT4</code>æ ¼å¼ï¼ŒæŒ‚è½½åœ¨<code>/data/newpart2</code>ä¸‹ï¼Œå¹¶è®¾ç½®<code>å¼€æœºå¯åŠ¨è‡ªåŠ¨æŒ‚è½½</code>ä¸ºä¾‹ï¼Œä¸åŒæ“ä½œç³»ç»Ÿçš„æ ¼å¼åŒ–æ“ä½œå¯èƒ½ä¸åŒï¼Œä»…ä¾›å‚è€ƒã€‚</p><ol><li><p>ä»¥<code>root</code>ç”¨æˆ·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹ç£ç›˜åç§°ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">lsblk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å›æ˜¾ä¿¡æ¯ç±»ä¼¼å¦‚ä¸‹å›¾ï¼Œè¡¨ç¤ºå½“å‰çš„äº‘æœåŠ¡å™¨æœ‰ä¸¤å—ç£ç›˜ï¼Œ<code>/dev/vda</code>æ˜¯ç³»ç»Ÿç›˜ï¼Œ<code>/dev/vdc</code>æ˜¯æ–°å¢æ•°æ®ç›˜ã€‚<br><img src="/medias/drawing-bed/linux/0.png"></p></li><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿›å…¥<code>parted</code>åˆ†åŒºå·¥å…·ï¼Œå¼€å§‹å¯¹æ–°å¢æ•°æ®ç›˜æ‰§è¡Œåˆ†åŒºæ“ä½œã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">parted</span> <span class="token operator">&lt;</span>æ–°å¢æ•°æ®ç›˜<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä»¥æ–°æŒ‚è½½çš„æ•°æ®ç›˜<code>/dev/vdc</code>ä¸ºä¾‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">parted</span> /dev/vdc<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å›æ˜¾ä¿¡æ¯ç±»ä¼¼å¦‚ä¸‹å›¾ï¼š<br><img src="/medias/drawing-bed/linux/1.png"></p></li><li><p>è¾“å…¥<code>p</code>ï¼ŒæŒ‰<code>Enter</code>ï¼ŒæŸ¥çœ‹å½“å‰ç£ç›˜åˆ†åŒºå½¢å¼ã€‚<br>å›æ˜¾ä¿¡æ¯ç±»ä¼¼å¦‚ä¸‹å›¾ï¼š<br><img src="/medias/drawing-bed/linux/2.png"><br>ã€Partition Table: unknownã€‘è¡¨ç¤ºç£ç›˜åˆ†åŒºå½¢å¼æœªçŸ¥ã€‚</p></li><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè®¾ç½®ç£ç›˜åˆ†åŒºå½¢å¼ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mklabel <span class="token operator">&lt;</span>ç£ç›˜åˆ†åŒºæ–¹å¼<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ç£ç›˜å®¹é‡å¤§äºç­‰äº<code>2TB</code>æ—¶ï¼Œåªèƒ½ä½¿ç”¨<code>GPT</code>åˆ†åŒºæ–¹å¼ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">mklabel gpt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>è¾“å…¥<code>p</code>ï¼ŒæŒ‰<code>Enter</code>ï¼ŒæŸ¥çœ‹ç£ç›˜åˆ†åŒºå½¢å¼æ˜¯å¦è®¾ç½®æˆåŠŸã€‚<br>å›æ˜¾ä¿¡æ¯ç±»ä¼¼å¦‚ä¸‹å›¾ï¼š<br><img src="/medias/drawing-bed/linux/3.png"><br>ã€Partition Table: gptã€‘è¡¨ç¤ºç£ç›˜åˆ†åŒºå½¢å¼ä¸º GPTã€‚</p></li><li><p>è¾“å…¥<code>unit s</code>ï¼ŒæŒ‰<code>Enter</code>ï¼Œè®¾ç½®ç£ç›˜çš„è®¡é‡å•ä½ä¸ºç£æŸ±ã€‚  </p></li><li><p>ä»¥ä¸ºæ•´ä¸ªç£ç›˜åˆ›å»ºä¸€ä¸ªåˆ†åŒºä¸ºä¾‹ï¼Œè¾“å…¥<code>mkpart opt 2048s 100%</code>ï¼ŒæŒ‰<code>Enter</code>ã€‚<br><code>2048s</code>è¡¨ç¤ºç£ç›˜èµ·å§‹å®¹é‡ï¼Œ<code>100%</code>è¡¨ç¤ºç£ç›˜æˆªæ­¢å®¹é‡ï¼Œæ­¤å¤„ä»…ä¾›å‚è€ƒï¼Œæ‚¨å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦è‡ªè¡Œè§„åˆ’ç£ç›˜åˆ†åŒºæ•°é‡åŠå®¹é‡ã€‚</p></li><li><p>è¾“å…¥pï¼ŒæŒ‰ Enterï¼ŒæŸ¥çœ‹æ–°å»ºåˆ†åŒºçš„è¯¦ç»†ä¿¡æ¯ã€‚<br>å›æ˜¾ä¿¡æ¯ç±»ä¼¼å¦‚ä¸‹å›¾ï¼š<br><img src="/medias/drawing-bed/linux/4.png"><br>è¡¨ç¤ºæ–°å»ºåˆ†åŒº/dev/vdc1çš„è¯¦ç»†ä¿¡æ¯ã€‚</p></li><li><p>è¾“å…¥<code>q</code>ï¼ŒæŒ‰<code>Enter</code>ï¼Œé€€å‡º<code>parted</code>åˆ†åŒºå·¥å…·  </p></li><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹ç£ç›˜åç§°ã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">lsblk<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å›æ˜¾ä¿¡æ¯ç±»ä¼¼å¦‚ä¸‹å›¾ï¼Œæ­¤æ—¶å¯çœ‹åˆ°æ–°åˆ†åŒº<code>/dev/vdc1</code>ã€‚<br><img src="/medias/drawing-bed/linux/5.png"></p></li><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†æ–°å»ºåˆ†åŒºæ–‡ä»¶ç³»ç»Ÿè®¾ç½®ä¸ºç³»ç»Ÿæ‰€éœ€æ ¼å¼ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkfs</span> -t <span class="token operator">&lt;</span>æ–‡ä»¶ç³»ç»Ÿæ ¼å¼<span class="token operator">></span> /dev/vdc1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸åŒæ–‡ä»¶ç³»ç»Ÿæ”¯æŒçš„åˆ†åŒºå¤§å°ä¸åŒï¼Œè¯·æ ¹æ®å®é™…éœ€æ±‚åˆç†é€‰æ‹©æ–‡ä»¶ç³»ç»Ÿã€‚ä»¥è®¾ç½®æ–‡ä»¶ç³»ç»Ÿä¸º EXT4 ä¸ºä¾‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkfs</span> -t ext4 /dev/vdc1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å›æ˜¾ä¿¡æ¯ç±»ä¼¼å¦‚ä¸‹å›¾ï¼š<br><img src="/medias/drawing-bed/linux/6.png"><br>æ ¼å¼åŒ–éœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œè¯·è§‚å¯Ÿç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼Œä¸è¦é€€å‡ºã€‚</p></li><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ–°å»ºæŒ‚è½½ç‚¹ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token operator">&lt;</span>æŒ‚è½½ç‚¹<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä»¥æ–°å»ºæŒ‚è½½ç‚¹/data/newpart2ä¸ºä¾‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> /data/newpart2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå°†æ–°å»ºåˆ†åŒºæŒ‚è½½è‡³æ–°å»ºçš„æŒ‚è½½ç‚¹ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mount</span> /dev/vdc1 <span class="token operator">&lt;</span>æŒ‚è½½ç‚¹<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä»¥æ–°å»ºæŒ‚è½½ç‚¹/data/newpart2ä¸ºä¾‹ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mount</span> /dev/vdc1 /data/newpart2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹æŒ‚è½½ç»“æœã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">df</span> -TH<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å›æ˜¾ä¿¡æ¯ç±»ä¼¼å¦‚ä¸‹å›¾ï¼š<br><img src="/medias/drawing-bed/linux/7.png"><br>è¡¨ç¤ºæ–°å»ºåˆ†åŒº/dev/vdc1å·²æŒ‚è½½è‡³/data/newpart2ã€‚</p></li><li><p>ç¡®è®¤æŒ‚è½½æ–¹å¼å¹¶è·å–å¯¹åº”ä¿¡æ¯ã€‚<br>æ‚¨å¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€æ±‚é€‰æ‹©ä½¿ç”¨å¼¹æ€§äº‘ç¡¬ç›˜çš„è½¯é“¾æ¥ã€æ–‡ä»¶ç³»ç»Ÿçš„<code>UUID</code>ï¼ˆuniversally unique identifierï¼‰æˆ–è®¾å¤‡åç§°è‡ªåŠ¨æŒ‚è½½ç£ç›˜ï¼Œç›¸å…³è¯´æ˜å’Œä¿¡æ¯è·å–æ–¹å¼å¦‚ä¸‹ï¼š</p></li></ol><table><thead><tr><th align="left">æŒ‚è½½æ–¹å¼</th><th align="left">ä¼˜ç¼ºç‚¹</th><th align="left">ä¿¡æ¯è·å–æ–¹å¼</th></tr></thead><tbody><tr><td align="left">ä½¿ç”¨å¼¹æ€§äº‘ç¡¬ç›˜çš„è½¯é“¾æ¥ï¼ˆæ¨èï¼‰</td><td align="left">ä¼˜ç‚¹ï¼šæ¯ä¸ªå¼¹æ€§äº‘ç¡¬ç›˜çš„è½¯é“¾æ¥å›ºå®šä¸”å”¯ä¸€ï¼Œä¸ä¼šéšå¸è½½æŒ‚è½½ã€æ ¼å¼åŒ–åˆ†åŒºç­‰æ“ä½œè€Œæ”¹å˜ã€‚ç¼ºç‚¹ï¼šåªæœ‰å¼¹æ€§äº‘ç¡¬ç›˜æ‰æœ‰è½¯é“¾æ¥ã€‚æ— æ³•æ„ŸçŸ¥åˆ†åŒºçš„æ ¼å¼åŒ–æ“ä½œã€‚</td><td align="left">æŸ¥çœ‹å¼¹æ€§äº‘ç¡¬ç›˜çš„è½¯é“¾æ¥ã€‚<code>ls -l /dev/disk/by-id</code></td></tr><tr><td align="left">ä½¿ç”¨æ–‡ä»¶ç³»ç»Ÿçš„ UUID</td><td align="left">å¯èƒ½ä¼šå› æ–‡ä»¶ç³»ç»Ÿçš„ UUID å˜åŒ–è€Œå¯¼è‡´è‡ªåŠ¨æŒ‚è½½è®¾ç½®å¤±æ•ˆã€‚ä¾‹å¦‚ï¼Œé‡æ–°æ ¼å¼åŒ–æ–‡ä»¶ç³»ç»Ÿåï¼Œæ–‡ä»¶ç³»ç»Ÿçš„ UUID å°†ä¼šå‘ç”Ÿå˜åŒ–ã€‚</td><td align="left">æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿçš„ UUIDã€‚<code>blkid /dev/vdc1</code></td></tr><tr><td align="left">ä½¿ç”¨è®¾å¤‡åç§°</td><td align="left">å¯èƒ½ä¼šå› è®¾å¤‡åç§°å˜åŒ–è€Œå¯¼è‡´è‡ªåŠ¨æŒ‚è½½è®¾ç½®å¤±æ•ˆã€‚ä¾‹å¦‚ï¼Œè¿ç§»æ•°æ®æ—¶å°†äº‘æœåŠ¡å™¨ä¸Šçš„å¼¹æ€§äº‘ç¡¬ç›˜å¸è½½åå†æ¬¡æŒ‚è½½ï¼Œæ“ä½œç³»ç»Ÿå†æ¬¡è¯†åˆ«åˆ°è¯¥æ–‡ä»¶ç³»ç»Ÿæ—¶ï¼Œåç§°å¯èƒ½ä¼šå˜åŒ–ã€‚</td><td align="left">æŸ¥çœ‹è®¾å¤‡åç§°ã€‚<code>fdisk -l</code></td></tr></tbody></table><ol start="16"><li>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå¤‡ä»½<code>/etc/fstab</code>æ–‡ä»¶ã€‚ä»¥å¤‡ä»½åˆ°<code>/home</code>ç›®å½•ä¸‹ä¸ºä¾‹ï¼š<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> -r /etc/fstab /home<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œä½¿ç”¨<code>VI</code>ç¼–è¾‘å™¨æ‰“å¼€<code>/etc/fstab</code>æ–‡ä»¶ã€‚<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> /etc/fstab<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>æŒ‰<code>i</code>ï¼Œè¿›å…¥ç¼–è¾‘æ¨¡å¼ã€‚  </li><li>å°†<code>å…‰æ ‡ç§»è‡³æ–‡ä»¶æœ«å°¾</code>ï¼ŒæŒ‰<code>Enter</code>ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ã€‚  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span>è®¾å¤‡ä¿¡æ¯<span class="token operator">></span> <span class="token operator">&lt;</span>æŒ‚è½½ç‚¹<span class="token operator">></span> <span class="token operator">&lt;</span>æ–‡ä»¶ç³»ç»Ÿæ ¼å¼<span class="token operator">></span> <span class="token operator">&lt;</span>æ–‡ä»¶ç³»ç»Ÿå®‰è£…é€‰é¡¹<span class="token operator">></span> <span class="token operator">&lt;</span>æ–‡ä»¶ç³»ç»Ÿè½¬å‚¨é¢‘ç‡<span class="token operator">></span> <span class="token operator">&lt;</span>å¯åŠ¨æ—¶çš„æ–‡ä»¶ç³»ç»Ÿæ£€æŸ¥é¡ºåº<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><ul><li>ï¼ˆæ¨èï¼‰ä»¥ä½¿ç”¨å¼¹æ€§äº‘ç¡¬ç›˜çš„è½¯é“¾æ¥è‡ªåŠ¨æŒ‚è½½ä¸ºä¾‹ï¼Œç»“åˆå‰æ–‡ç¤ºä¾‹åˆ™æ·»åŠ ï¼š<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/dev/disk/by-id/virtio-disk-bm42ztpm-part1 /data/newpart2   ext4 defaults     <span class="token number">0</span>   <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>ä»¥ä½¿ç”¨ç£ç›˜åˆ†åŒºçš„ UUID è‡ªåŠ¨æŒ‚è½½ä¸ºä¾‹ï¼Œç»“åˆå‰æ–‡ç¤ºä¾‹åˆ™æ·»åŠ ï¼š<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">UUID</span><span class="token operator">=</span>fc3f42cc-2093-49c7-b4fd-c616ba6165f4 /data/newpart2   ext4 defaults     <span class="token number">0</span>   <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li>ä»¥ä½¿ç”¨è®¾å¤‡åç§°è‡ªåŠ¨æŒ‚è½½ä¸ºä¾‹ï¼Œç»“åˆå‰æ–‡ç¤ºä¾‹åˆ™æ·»åŠ ï¼š<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/dev/vdc1 /data/newpart2   ext4 defaults     <span class="token number">0</span>   <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul><ol start="20"><li>æŒ‰<code>Esc</code>ï¼Œè¾“å…¥<code>:wq</code>ï¼ŒæŒ‰<code>Enter</code>ã€‚<br>ä¿å­˜è®¾ç½®å¹¶é€€å‡ºç¼–è¾‘å™¨ã€‚</li><li>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ£€æŸ¥<code>/etc/fstab</code>æ–‡ä»¶æ˜¯å¦å†™å…¥æˆåŠŸã€‚<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mount</span> -a <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>å¦‚æœè¿è¡Œé€šè¿‡åˆ™è¯´æ˜æ–‡ä»¶å†™å…¥æˆåŠŸï¼Œæ–°å»ºçš„æ–‡ä»¶ç³»ç»Ÿä¼šåœ¨æ“ä½œç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æŒ‚è½½ã€‚  </li></ol><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pod</title>
      <link href="/posts/c02d.html"/>
      <url>/posts/c02d.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>å£°æ˜ï¼šæœ¬åœ°é•œåƒä»“åº“<code>192.168.1.40 docker.registry.com</code>ï¼Œk8sé›†ç¾¤<code>192.168.1.15&#123;0,1,2&#125;</code></p><h1 id="åˆ›å»ºpod"><a href="#åˆ›å»ºpod" class="headerlink" title="åˆ›å»ºpod"></a>åˆ›å»ºpod</h1><p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæ¨èä½¿ç”¨è¯¸å¦‚Deploymentï¼ŒStatefulSetï¼ŒJobæˆ–è€…CronJobç­‰æ§åˆ¶å™¨æ¥åˆ›å»ºPodï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ›å»ºã€‚  </p><h2 id="Deployment-æ¨¡æ¿"><a href="#Deployment-æ¨¡æ¿" class="headerlink" title="Deployment æ¨¡æ¿"></a>Deployment æ¨¡æ¿</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl explain deployment.spec.template   <span class="token comment"># å…¶å®ƒæ¨¡æ¿ï¼šjob.spec.template/statefulset.spec.template/daemonset.spec.template</span>KIND:     DeploymentVERSION:  apps/v1RESOURCE: template <span class="token operator">&lt;</span>Object<span class="token operator">></span>DESCRIPTION:     Template describes the pods that will be created.     PodTemplateSpec describes the data a pod should have when created from a     templateFIELDS:   metadata<span class="token operator">&lt;</span>Object<span class="token operator">></span>     Standard object's metadata. More info:     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md<span class="token comment">#metadata</span>   spec<span class="token operator">&lt;</span>Object<span class="token operator">></span>     Specification of the desired behavior of the pod. More info:     https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md<span class="token comment">#spec-and-status</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é€šè¿‡Dockerfileåˆ›å»ºé•œåƒ"><a href="#é€šè¿‡Dockerfileåˆ›å»ºé•œåƒ" class="headerlink" title="é€šè¿‡Dockerfileåˆ›å»ºé•œåƒ"></a>é€šè¿‡Dockerfileåˆ›å»ºé•œåƒ</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> <span class="token operator">></span> mail.dockerfile <span class="token operator">&lt;&lt;</span> <span class="token string">EOFFROM openjdk:8-jre-alpineMAINTAINER wangjunCOPY mail-demo-0.0.1-SNAPSHOT.jar /app.jarCMD java -jar /app.jarEXPOSE 8085EOF</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åˆ›å»ºé•œåƒï¼Œä¸Šä¼ åˆ°æœ¬åœ°é•œåƒåº“"><a href="#åˆ›å»ºé•œåƒï¼Œä¸Šä¼ åˆ°æœ¬åœ°é•œåƒåº“" class="headerlink" title="åˆ›å»ºé•œåƒï¼Œä¸Šä¼ åˆ°æœ¬åœ°é•œåƒåº“"></a>åˆ›å»ºé•œåƒï¼Œä¸Šä¼ åˆ°æœ¬åœ°é•œåƒåº“</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker build -f mail.dockerfile -t maildemo <span class="token builtin class-name">.</span>docker tag maildemo docker.registry.com/maildemodocker push docker.registry.com/maildemo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="é€šè¿‡yamlæ–‡ä»¶åˆ›å»ºpod"><a href="#é€šè¿‡yamlæ–‡ä»¶åˆ›å»ºpod" class="headerlink" title="é€šè¿‡yamlæ–‡ä»¶åˆ›å»ºpod"></a>é€šè¿‡yamlæ–‡ä»¶åˆ›å»ºpod</h1><p>mail-pod.yaml  </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> apps/v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Deployment<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> maildemo<span class="token punctuation">-</span>pod<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>    <span class="token key atrule">matchLabels</span><span class="token punctuation">:</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span> maildemo<span class="token punctuation">-</span>pod  <span class="token key atrule">replicas</span><span class="token punctuation">:</span> <span class="token number">2</span>  <span class="token key atrule">template</span><span class="token punctuation">:</span>    <span class="token key atrule">metadata</span><span class="token punctuation">:</span>      <span class="token key atrule">labels</span><span class="token punctuation">:</span>        <span class="token key atrule">app</span><span class="token punctuation">:</span> maildemo<span class="token punctuation">-</span>pod    <span class="token key atrule">spec</span><span class="token punctuation">:</span>      <span class="token key atrule">containers</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> maildemo        <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.registry.com/maildemo        <span class="token key atrule">imagePullPolicy</span><span class="token punctuation">:</span> Always        <span class="token key atrule">ports</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">containerPort</span><span class="token punctuation">:</span> <span class="token number">8085</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é€šè¿‡yamlæ–‡ä»¶åˆ›å»ºsvc-service"><a href="#é€šè¿‡yamlæ–‡ä»¶åˆ›å»ºsvc-service" class="headerlink" title="é€šè¿‡yamlæ–‡ä»¶åˆ›å»ºsvc(service)"></a>é€šè¿‡yamlæ–‡ä»¶åˆ›å»º<code>svc</code>(service)</h1><p>mailsvc.yaml  </p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">apiVersion</span><span class="token punctuation">:</span> v1<span class="token key atrule">kind</span><span class="token punctuation">:</span> Service<span class="token key atrule">metadata</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> maildemo<span class="token punctuation">-</span>svc<span class="token key atrule">spec</span><span class="token punctuation">:</span>  <span class="token key atrule">selector</span><span class="token punctuation">:</span>      <span class="token key atrule">app</span><span class="token punctuation">:</span> maildemo<span class="token punctuation">-</span>pod  <span class="token key atrule">ports</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> http      <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8000</span>      <span class="token key atrule">protocol</span><span class="token punctuation">:</span> TCP      <span class="token key atrule">targetPort</span><span class="token punctuation">:</span> <span class="token number">8085</span>      <span class="token key atrule">nodePort</span><span class="token punctuation">:</span> <span class="token number">31000</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> NodePort<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none"># nodePortã€€å¤–éƒ¨æœºå™¨å¯è®¿é—®çš„ç«¯å£ã€‚æ¯”å¦‚ä¸€ä¸ªWebåº”ç”¨éœ€è¦è¢«å…¶ä»–ç”¨æˆ·è®¿é—®ï¼Œé‚£ä¹ˆéœ€è¦é…ç½®type&#x3D;NodePortï¼Œè€Œä¸”é…ç½®nodePort&#x3D;30001ï¼Œé‚£ä¹ˆå…¶ä»–æœºå™¨å°±å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®scheme:&#x2F;&#x2F;node:30001è®¿é—®åˆ°è¯¥æœåŠ¡ï¼Œä¾‹å¦‚http:&#x2F;&#x2F;node:30001ã€‚ã€€ä¾‹å¦‚MySQLæ•°æ®åº“å¯èƒ½ä¸éœ€è¦è¢«å¤–ç•Œè®¿é—®ï¼Œåªéœ€è¢«å†…éƒ¨æœåŠ¡è®¿é—®ï¼Œé‚£ä¹ˆä¸å¿…è®¾ç½®NodePort# targetPortã€€å®¹å™¨çš„ç«¯å£ï¼ˆæœ€æ ¹æœ¬çš„ç«¯å£å…¥å£ï¼‰ï¼Œä¸åˆ¶ä½œå®¹å™¨æ—¶æš´éœ²çš„ç«¯å£ä¸€è‡´ï¼ˆDockerFileä¸­EXPOSEï¼‰ï¼Œä¾‹å¦‚docker.ioå®˜æ–¹çš„nginxæš´éœ²çš„æ˜¯80ç«¯å£ã€‚ã€€docker.ioå®˜æ–¹çš„nginxå®¹å™¨çš„DockerFileå‚è€ƒhttps:&#x2F;&#x2F;github.com&#x2F;nginxinc&#x2F;docker-nginx# portã€€kubernetesä¸­çš„æœåŠ¡ä¹‹é—´è®¿é—®çš„ç«¯å£ï¼Œå°½ç®¡mysqlå®¹å™¨æš´éœ²äº†3306ç«¯å£ï¼ˆå‚è€ƒhttps:&#x2F;&#x2F;github.com&#x2F;docker-library&#x2F;mysql&#x2F;çš„DockerFileï¼‰ï¼Œä½†æ˜¯é›†ç¾¤å†…å…¶ä»–å®¹å™¨éœ€è¦é€šè¿‡33306ç«¯å£è®¿é—®è¯¥æœåŠ¡ï¼Œå¤–éƒ¨æœºå™¨ä¸èƒ½è®¿é—®mysqlæœåŠ¡ï¼Œå› ä¸ºä»–æ²¡æœ‰é…ç½®NodePortç±»å‹---åˆ†å‰²çº¿---NodePort æœåŠ¡ä¸»è¦æœ‰ä¸¤ç‚¹åŒºåˆ«äºæ™®é€šçš„&quot;ClusterIP&quot;æœåŠ¡ã€‚ç¬¬ä¸€ï¼Œå®ƒçš„ç±»å‹æ˜¯&quot;NodePort&quot;ã€‚æœ‰ä¸€ä¸ªé¢å¤–çš„ç«¯å£ï¼Œç§°ä¸º nodePortï¼Œå®ƒæŒ‡å®šèŠ‚ç‚¹ä¸Šå¼€æ”¾çš„ç«¯å£å€¼ ã€‚å¦‚æœä½ ä¸æŒ‡å®šè¿™ä¸ªç«¯å£ï¼Œç³»ç»Ÿå°†é€‰æ‹©ä¸€ä¸ªéšæœºç«¯å£ã€‚å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬åº”è¯¥è®© Kubernetes æ¥é€‰æ‹©ç«¯å£ï¼Œç”¨æˆ·è‡ªå·±æ¥é€‰æ‹©å¯ç”¨ç«¯å£ä»£ä»·å¤ªå¤§ã€‚è¿™ç§æ–¹æ³•æœ‰è®¸å¤šç¼ºç‚¹ï¼š1.æ¯ä¸ªç«¯å£åªèƒ½æ˜¯ä¸€ç§æœåŠ¡2.ç«¯å£èŒƒå›´åªèƒ½æ˜¯ 30000-327673.å¦‚æœèŠ‚ç‚¹&#x2F;VM çš„ IP åœ°å€å‘ç”Ÿå˜åŒ–ï¼Œä½ éœ€è¦èƒ½å¤„ç†è¿™ç§æƒ…å†µåŸºäºä»¥ä¸ŠåŸå› ï¼Œä¸å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸Šç”¨è¿™ç§æ–¹å¼æš´éœ²æœåŠ¡ã€‚å¦‚æœè¿è¡Œçš„æœåŠ¡ä¸è¦æ±‚ä¸€ç›´å¯ç”¨ï¼Œæˆ–è€…å¯¹æˆæœ¬æ¯”è¾ƒæ•æ„Ÿï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹æ³•ã€‚è¿™æ ·çš„åº”ç”¨çš„æœ€ä½³ä¾‹å­æ˜¯ demo åº”ç”¨ï¼Œæˆ–è€…æŸäº›ä¸´æ—¶åº”ç”¨ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é€šè¿‡yamlæ–‡ä»¶åˆ›å»ºpodå’Œservice"><a href="#é€šè¿‡yamlæ–‡ä»¶åˆ›å»ºpodå’Œservice" class="headerlink" title="é€šè¿‡yamlæ–‡ä»¶åˆ›å»ºpodå’Œservice"></a>é€šè¿‡yamlæ–‡ä»¶åˆ›å»ºpodå’Œservice</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kubectl apply -f mail-pod.yamlkubectl apply -f mailsvc.yaml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="åˆ é™¤podå’Œservice"><a href="#åˆ é™¤podå’Œservice" class="headerlink" title="åˆ é™¤podå’Œservice"></a>åˆ é™¤podå’Œservice</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kubectl get podkubectl delete pod maildemo-pod-6b68c9c9b8-7svd9kubectl delete pod maildemo-pod-6b68c9c9b8-48mjzkubectl get deploymentkubectl delete deployment maildemo-podkubectl get svckubectl delete svc maildemo-podkubectl delete svc maildemo-svc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å®‰è£…</title>
      <link href="/posts/d6ec.html"/>
      <url>/posts/d6ec.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="å‡†å¤‡3å°æœºå™¨æœ€å°2C2G"><a href="#å‡†å¤‡3å°æœºå™¨æœ€å°2C2G" class="headerlink" title="å‡†å¤‡3å°æœºå™¨æœ€å°2C2G"></a>å‡†å¤‡3å°æœºå™¨æœ€å°2C2G</h1><p>èµ„æºä¸å¤ŸæŠ¥é”™ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> Running pre-flight checks<span class="token punctuation">[</span>WARNING IsDockerSystemdCheck<span class="token punctuation">]</span>: detected <span class="token string">"cgroupfs"</span> as the Docker cgroup driver. The recommended driver is <span class="token string">"systemd"</span><span class="token builtin class-name">.</span> Please follow the guide at https://kubernetes.io/docs/setup/cri/error execution phase preflight: <span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> Some fatal errors occurred:<span class="token punctuation">[</span>ERROR NumCPU<span class="token punctuation">]</span>: the number of available CPUs <span class="token number">1</span> is <span class="token function">less</span> than the required <span class="token number">2</span><span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> If you know what you are doing, you can <span class="token function">make</span> a check non-fatal with <span class="token variable"><span class="token variable">`</span>--ignore-preflight-errors<span class="token operator">=</span><span class="token punctuation">..</span>.<span class="token variable">`</span></span>To see the stack trace of this error execute with --v<span class="token operator">=</span><span class="token number">5</span> or higher---<span class="token comment"># è°ƒæ•´CPUæ ¸å¿ƒæ•°</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä¿®æ”¹ä¸»æœºåï¼š"><a href="#ä¿®æ”¹ä¸»æœºåï¼š" class="headerlink" title="ä¿®æ”¹ä¸»æœºåï¼š"></a>ä¿®æ”¹ä¸»æœºåï¼š</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hostnamectl set-hostname k8s-master   <span class="token comment"># masterèŠ‚ç‚¹</span>hostnamectl set-hostname k8s-node1   <span class="token comment"># node1èŠ‚ç‚¹</span>hostnamectl set-hostname k8s-node2   <span class="token comment"># node2èŠ‚ç‚¹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="åŸºæœ¬é…ç½®ï¼š"><a href="#åŸºæœ¬é…ç½®ï¼š" class="headerlink" title="åŸºæœ¬é…ç½®ï¼š"></a>åŸºæœ¬é…ç½®ï¼š</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ä¿®æ”¹/etc/hostsæ–‡ä»¶</span><span class="token function">cat</span> <span class="token operator">>></span> /etc/hosts <span class="token operator">&lt;&lt;</span> <span class="token string">EOF192.168.1.150 k8s-master192.168.1.151 k8s-node1192.168.1.152 k8s-node2192.168.1.40 docker.registry.comEOF</span><span class="token comment"># å…³é—­é˜²ç«å¢™å’Œselinux</span>systemctl stop firewalld <span class="token operator">&amp;&amp;</span> systemctl disable firewalld<span class="token function">sed</span> -i <span class="token string">'s/^SELINUX=enforcing$/SELINUX=disabled/'</span> /etc/selinux/config <span class="token operator">&amp;&amp;</span> setenforce <span class="token number">0</span><span class="token comment"># å…³é—­swap</span>swapoff -a<span class="token function">yes</span> <span class="token operator">|</span> <span class="token function">cp</span> /etc/fstab /etc/fstab_bak<span class="token function">cat</span> /etc/fstab_bak <span class="token operator">|</span><span class="token function">grep</span> -v swap <span class="token operator">></span> /etc/fstab<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é…ç½®æ—¶é—´åŒæ­¥"><a href="#é…ç½®æ—¶é—´åŒæ­¥" class="headerlink" title="é…ç½®æ—¶é—´åŒæ­¥"></a>é…ç½®æ—¶é—´åŒæ­¥</h1><p>ä½¿ç”¨chronyåŒæ­¥æ—¶é—´ï¼Œé…ç½®masterèŠ‚ç‚¹ä¸ç½‘ç»œNTPæœåŠ¡å™¨åŒæ­¥æ—¶é—´ï¼Œæ‰€æœ‰nodeèŠ‚ç‚¹ä¸masterèŠ‚ç‚¹åŒæ­¥æ—¶é—´ã€‚</p><h2 id="é…ç½®masterèŠ‚ç‚¹ï¼š"><a href="#é…ç½®masterèŠ‚ç‚¹ï¼š" class="headerlink" title="é…ç½®masterèŠ‚ç‚¹ï¼š"></a>é…ç½®masterèŠ‚ç‚¹ï¼š</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å®‰è£…chronyï¼š</span>yum <span class="token function">install</span> -y chrony<span class="token comment"># æ³¨é‡Šé»˜è®¤ntpæœåŠ¡å™¨</span><span class="token function">sed</span> -i <span class="token string">'s/^server/#&amp;/'</span> /etc/chrony.conf<span class="token comment"># æŒ‡å®šä¸Šæ¸¸å…¬å…± ntp æœåŠ¡å™¨ï¼Œå¹¶å…è®¸å…¶ä»–èŠ‚ç‚¹åŒæ­¥æ—¶é—´</span><span class="token function">cat</span> <span class="token operator">>></span> /etc/chrony.conf <span class="token operator">&lt;&lt;</span> <span class="token string">EOFserver ntp1.aliyun.com iburstserver ns.cn.net iburstallow allEOF</span><span class="token comment"># é‡å¯chronydæœåŠ¡å¹¶è®¾ä¸ºå¼€æœºå¯åŠ¨ï¼š</span>systemctl <span class="token builtin class-name">enable</span> chronyd <span class="token operator">&amp;&amp;</span> systemctl restart chronyd<span class="token comment"># å¼€å¯ç½‘ç»œæ—¶é—´åŒæ­¥åŠŸèƒ½</span>timedatectl set-ntp <span class="token boolean">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é…ç½®nodeèŠ‚ç‚¹ï¼š"><a href="#é…ç½®nodeèŠ‚ç‚¹ï¼š" class="headerlink" title="é…ç½®nodeèŠ‚ç‚¹ï¼š"></a>é…ç½®nodeèŠ‚ç‚¹ï¼š</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å®‰è£…chronyï¼š</span>yum <span class="token function">install</span> -y chrony<span class="token comment"># æ³¨é‡Šé»˜è®¤æœåŠ¡å™¨</span><span class="token function">sed</span> -i <span class="token string">'s/^server/#&amp;/'</span> /etc/chrony.conf<span class="token comment"># æŒ‡å®šå†…ç½‘ master èŠ‚ç‚¹ä¸ºä¸Šæ¸¸NTPæœåŠ¡å™¨</span><span class="token builtin class-name">echo</span> server <span class="token number">192.168</span>.1.150 iburst <span class="token operator">>></span> /etc/chrony.conf<span class="token comment"># é‡å¯æœåŠ¡å¹¶è®¾ä¸ºå¼€æœºå¯åŠ¨ï¼š</span>systemctl <span class="token builtin class-name">enable</span> chronyd <span class="token operator">&amp;&amp;</span> systemctl restart chronyd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä¿®æ”¹iptablesç›¸å…³å‚æ•°"><a href="#ä¿®æ”¹iptablesç›¸å…³å‚æ•°" class="headerlink" title="ä¿®æ”¹iptablesç›¸å…³å‚æ•°"></a>ä¿®æ”¹iptablesç›¸å…³å‚æ•°</h1><p>RHEL / CentOS 7ä¸Šçš„ä¸€äº›ç”¨æˆ·æŠ¥å‘Šäº†ç”±äºiptablesè¢«ç»•è¿‡è€Œå¯¼è‡´æµé‡è·¯ç”±ä¸æ­£ç¡®çš„é—®é¢˜ã€‚åˆ›å»º/etc/sysctl.d/k8s.confæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">></span>  /etc/sysctl.d/k8s.conf</span>vm.swappiness = 0net.bridge.bridge-nf-call-ip6tables = 1net.bridge.bridge-nf-call-iptables = 1net.ipv4.ip_forward = 1EOF</span><span class="token comment"># ä½¿é…ç½®ç”Ÿæ•ˆ</span>modprobe br_netfiltersysctl -p /etc/sysctl.d/k8s.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="åŠ è½½ipvsç›¸å…³æ¨¡å—"><a href="#åŠ è½½ipvsç›¸å…³æ¨¡å—" class="headerlink" title="åŠ è½½ipvsç›¸å…³æ¨¡å—"></a>åŠ è½½ipvsç›¸å…³æ¨¡å—</h1><p>ç”±äºipvså·²ç»åŠ å…¥åˆ°äº†å†…æ ¸çš„ä¸»å¹²ï¼Œæ‰€ä»¥ä¸ºkube-proxyå¼€å¯ipvsçš„å‰æéœ€è¦åŠ è½½ä»¥ä¸‹çš„å†…æ ¸æ¨¡å—ï¼š<br>åœ¨æ‰€æœ‰çš„KubernetesèŠ‚ç‚¹æ‰§è¡Œä»¥ä¸‹è„šæœ¬:</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> <span class="token operator">></span> /etc/sysconfig/modules/ipvs.modules <span class="token operator">&lt;&lt;</span><span class="token string">EOF#!/bin/bashmodprobe -- ip_vsmodprobe -- ip_vs_rrmodprobe -- ip_vs_wrrmodprobe -- ip_vs_shmodprobe -- nf_conntrack_ipv4EOF</span><span class="token comment"># æ‰§è¡Œè„šæœ¬</span><span class="token function">chmod</span> <span class="token number">755</span> /etc/sysconfig/modules/ipvs.modules <span class="token operator">&amp;&amp;</span> <span class="token function">bash</span> /etc/sysconfig/modules/ipvs.modules <span class="token operator">&amp;&amp;</span> lsmod <span class="token operator">|</span> <span class="token function">grep</span> -e ip_vs -e nf_conntrack_ipv4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢è„šæœ¬åˆ›å»ºäº†/etc/sysconfig/modules/ipvs.modulesæ–‡ä»¶ï¼Œä¿è¯åœ¨èŠ‚ç‚¹é‡å¯åèƒ½è‡ªåŠ¨åŠ è½½æ‰€éœ€æ¨¡å—ã€‚ ä½¿ç”¨lsmod | grep -e ip_vs -e nf_conntrack_ipv4å‘½ä»¤æŸ¥çœ‹æ˜¯å¦å·²ç»æ­£ç¡®åŠ è½½æ‰€éœ€çš„å†…æ ¸æ¨¡å—ã€‚<br>æ¥ä¸‹æ¥è¿˜éœ€è¦ç¡®ä¿å„ä¸ªèŠ‚ç‚¹ä¸Šå·²ç»å®‰è£…äº†ipsetè½¯ä»¶åŒ…ã€‚ ä¸ºäº†ä¾¿äºæŸ¥çœ‹ipvsçš„ä»£ç†è§„åˆ™ï¼Œæœ€å¥½å®‰è£…ä¸€ä¸‹ç®¡ç†å·¥å…·ipvsadmã€‚<br><code>yum install ipset ipvsadm -y</code>  </p><h1 id="å®‰è£…Docker"><a href="#å®‰è£…Docker" class="headerlink" title="å®‰è£…Docker"></a>å®‰è£…Docker</h1><p>Kubernetesé»˜è®¤çš„å®¹å™¨è¿è¡Œæ—¶ä»ç„¶æ˜¯Dockerï¼Œä½¿ç”¨çš„æ˜¯kubeletä¸­å†…ç½®dockershim CRIå®ç°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒKubernetes 1.13æœ€ä½æ”¯æŒçš„Dockerç‰ˆæœ¬æ˜¯1.11.1ï¼Œæœ€é«˜æ”¯æŒæ˜¯18.06ï¼Œè€ŒDockeræœ€æ–°ç‰ˆæœ¬å·²ç»æ˜¯18.09äº†ï¼Œæ•…æˆ‘ä»¬å®‰è£…æ—¶éœ€è¦æŒ‡å®šç‰ˆæœ¬ä¸º18.06.1-ceã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># é…ç½®docker yumæº</span>yum <span class="token function">install</span> -y yum-utilsyum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repoyum <span class="token function">install</span> -y docker-ce<span class="token function">mkdir</span> -p /etc/docker<span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'&#123;  "registry-mirrors": ["https://******.mirror.aliyuncs.com"],  "exec-opts":["native.cgroupdriver=systemd"],  "insecure-registries": ["docker.registry.com"]&#125;EOF</span>systemctl daemon-reloadsystemctl start dockersystemctl <span class="token builtin class-name">enable</span> docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>&quot;exec-opts&quot;:[&quot;native.cgroupdriver=systemd&quot;]</code>è§£å†³(å¯ä»¥ä¸å¿…ç®¡å®ƒ)ï¼š<br><code>[WARNING IsDockerSystemdCheck]: detected &quot;cgroupfs&quot; as the Docker cgroup driver. The recommended driver is &quot;systemd&quot;.</code><br><code>&quot;insecure-registries&quot;: [&quot;docker.registry.com&quot;]</code>æ˜¯æœ¬åœ°ç§æœ‰é•œåƒåœ°å€<br><code>&quot;registry-mirrors&quot;: [&quot;https://******.mirror.aliyuncs.com&quot;]</code>æ˜¯é˜¿é‡Œäº‘çš„é•œåƒåŠ é€ŸæœåŠ¡  </p><h1 id="å®‰è£…kubeadmã€kubeletã€kubectl"><a href="#å®‰è£…kubeadmã€kubeletã€kubectl" class="headerlink" title="å®‰è£…kubeadmã€kubeletã€kubectl"></a>å®‰è£…kubeadmã€kubeletã€kubectl</h1><ul><li>kubelet åœ¨ç¾¤é›†ä¸­æ‰€æœ‰èŠ‚ç‚¹ä¸Šè¿è¡Œçš„æ ¸å¿ƒç»„ä»¶, ç”¨æ¥æ‰§è¡Œå¦‚å¯åŠ¨podså’Œcontainersç­‰æ“ä½œã€‚  </li><li>ubeadm å¼•å¯¼å¯åŠ¨k8sé›†ç¾¤çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºåˆå§‹åŒ– Clusterã€‚  </li><li>kubectl æ˜¯ Kubernetes å‘½ä»¤è¡Œå·¥å…·ã€‚é€šè¿‡ kubectl å¯ä»¥éƒ¨ç½²å’Œç®¡ç†åº”ç”¨ï¼ŒæŸ¥çœ‹å„ç§èµ„æºï¼Œåˆ›å»ºã€åˆ é™¤å’Œæ›´æ–°å„ç§ç»„ä»¶ã€‚  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># é…ç½®kubernetes.repoçš„æºï¼Œç”±äºå®˜æ–¹æºå›½å†…æ— æ³•è®¿é—®ï¼Œè¿™é‡Œä½¿ç”¨é˜¿é‡Œäº‘yumæº</span><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">></span> /etc/yum.repos.d/kubernetes.repo</span>[kubernetes]name=Kubernetesbaseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64/enabled=1gpgcheck=1repo_gpgcheck=1gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpgEOF</span><span class="token comment"># åœ¨æ‰€æœ‰èŠ‚ç‚¹ä¸Šå®‰è£… kubeletã€kubeadm å’Œ kubectl</span>yum <span class="token function">install</span> -y kubelet kubeadm kubectl<span class="token comment"># å¯åŠ¨kubeletæœåŠ¡</span>systemctl <span class="token builtin class-name">enable</span> kubelet <span class="token operator">&amp;&amp;</span> systemctl start kubelet<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h1 id="éƒ¨ç½²masterèŠ‚ç‚¹"><a href="#éƒ¨ç½²masterèŠ‚ç‚¹" class="headerlink" title="éƒ¨ç½²masterèŠ‚ç‚¹"></a>éƒ¨ç½²masterèŠ‚ç‚¹</h1><h2 id="MasterèŠ‚ç‚¹æ‰§è¡Œåˆå§‹åŒ–ï¼š"><a href="#MasterèŠ‚ç‚¹æ‰§è¡Œåˆå§‹åŒ–ï¼š" class="headerlink" title="MasterèŠ‚ç‚¹æ‰§è¡Œåˆå§‹åŒ–ï¼š"></a>MasterèŠ‚ç‚¹æ‰§è¡Œåˆå§‹åŒ–ï¼š</h2><p>æ³¨æ„è¿™é‡Œæ‰§è¡Œåˆå§‹åŒ–ç”¨åˆ°äº†â€“image-repositoryé€‰é¡¹ï¼ŒæŒ‡å®šåˆå§‹åŒ–éœ€è¦çš„é•œåƒæºä»é˜¿é‡Œäº‘é•œåƒä»“åº“æ‹‰å–ã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kubeadm init <span class="token punctuation">\</span>    --apiserver-advertise-address<span class="token operator">=</span><span class="token number">192.168</span>.1.150 <span class="token punctuation">\</span>    --image-repository registry.aliyuncs.com/google_containers <span class="token punctuation">\</span>    --kubernetes-version v1.18.3 <span class="token punctuation">\</span>    --pod-network-cidr<span class="token operator">=</span><span class="token number">10.244</span>.0.0/16<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆå§‹åŒ–å‘½ä»¤è¯´æ˜ï¼š  </p><pre class="line-numbers language-none"><code class="language-none">--apiserver-advertise-addressæŒ‡æ˜ç”¨ Master çš„å“ªä¸ª interface ä¸ Cluster çš„å…¶ä»–èŠ‚ç‚¹é€šä¿¡ã€‚å¦‚æœ Master æœ‰å¤šä¸ª interfaceï¼Œå»ºè®®æ˜ç¡®æŒ‡å®šï¼Œå¦‚æœä¸æŒ‡å®šï¼Œkubeadm ä¼šè‡ªåŠ¨é€‰æ‹©æœ‰é»˜è®¤ç½‘å…³çš„ interfaceã€‚--pod-network-cidræŒ‡å®š Pod ç½‘ç»œçš„èŒƒå›´ã€‚Kubernetes æ”¯æŒå¤šç§ç½‘ç»œæ–¹æ¡ˆï¼Œè€Œä¸”ä¸åŒç½‘ç»œæ–¹æ¡ˆå¯¹ --pod-network-cidr æœ‰è‡ªå·±çš„è¦æ±‚ï¼Œè¿™é‡Œè®¾ç½®ä¸º 10.244.0.0&#x2F;16 æ˜¯å› ä¸ºæˆ‘ä»¬å°†ä½¿ç”¨ flannel ç½‘ç»œæ–¹æ¡ˆï¼Œå¿…é¡»è®¾ç½®æˆè¿™ä¸ª CIDRã€‚--image-repositoryKubenetesé»˜è®¤Registriesåœ°å€æ˜¯ k8s.gcr.ioï¼Œåœ¨å›½å†…å¹¶ä¸èƒ½è®¿é—® gcr.ioï¼Œåœ¨1.13ç‰ˆæœ¬ä¸­æˆ‘ä»¬å¯ä»¥å¢åŠ â€“image-repositoryå‚æ•°ï¼Œé»˜è®¤å€¼æ˜¯ k8s.gcr.ioï¼Œå°†å…¶æŒ‡å®šä¸ºé˜¿é‡Œäº‘é•œåƒåœ°å€ï¼šregistry.aliyuncs.com&#x2F;google_containersã€‚--kubernetes-version&#x3D;v1.18.3å…³é—­ç‰ˆæœ¬æ¢æµ‹ï¼Œå› ä¸ºå®ƒçš„é»˜è®¤å€¼æ˜¯stable-1ï¼Œä¼šå¯¼è‡´ä»https:&#x2F;&#x2F;dl.k8s.io&#x2F;release&#x2F;stable-1.txtä¸‹è½½æœ€æ–°çš„ç‰ˆæœ¬å·ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶æŒ‡å®šä¸ºå›ºå®šç‰ˆæœ¬ï¼ˆæˆªè‡³2020.06.28æœ€æ–°ç‰ˆï¼šv1.18.3ï¼‰æ¥è·³è¿‡ç½‘ç»œè¯·æ±‚ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><em><strong>(æ³¨æ„è®°å½•ä¸‹åˆå§‹åŒ–ç»“æœä¸­çš„kubeadm joinå‘½ä»¤ï¼Œéƒ¨ç½²workerèŠ‚ç‚¹æ—¶ä¼šç”¨åˆ°)</strong></em>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kubeadm <span class="token function">join</span> <span class="token number">192.168</span>.1.150:6443 --token snllb2.u0jdzy8295owjg8s <span class="token punctuation">\</span>    --discovery-token-ca-cert-hash sha256:1dbb688b15c24740b288d300a5b2934828462f85f15599e047a7b5d91f0a4e1e <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åˆå§‹åŒ–è¿‡ç¨‹è¯´æ˜ï¼š  </p><pre class="line-numbers language-none"><code class="language-none">[preflight] kubeadm æ‰§è¡Œåˆå§‹åŒ–å‰çš„æ£€æŸ¥ã€‚[kubelet-start] ç”Ÿæˆkubeletçš„é…ç½®æ–‡ä»¶&quot;&#x2F;var&#x2F;lib&#x2F;kubelet&#x2F;config.yaml&quot;[certificates] ç”Ÿæˆç›¸å…³çš„å„ç§tokenå’Œè¯ä¹¦[kubeconfig] ç”Ÿæˆ KubeConfig æ–‡ä»¶ï¼Œkubelet éœ€è¦è¿™ä¸ªæ–‡ä»¶ä¸ Master é€šä¿¡[control-plane] å®‰è£… Master ç»„ä»¶ï¼Œä¼šä»æŒ‡å®šçš„ Registry ä¸‹è½½ç»„ä»¶çš„ Docker é•œåƒã€‚[bootstraptoken] ç”Ÿæˆtokenè®°å½•ä¸‹æ¥ï¼Œåè¾¹ä½¿ç”¨kubeadm joinå¾€é›†ç¾¤ä¸­æ·»åŠ èŠ‚ç‚¹æ—¶ä¼šç”¨åˆ°[addons] å®‰è£…é™„åŠ ç»„ä»¶ kube-proxy å’Œ kube-dnsã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Kubernetes Master åˆå§‹åŒ–æˆåŠŸï¼Œæç¤ºå¦‚ä½•é…ç½®å¸¸è§„ç”¨æˆ·ä½¿ç”¨kubectlè®¿é—®é›†ç¾¤ã€‚<br>æç¤ºå¦‚ä½•å®‰è£… Pod ç½‘ç»œã€‚<br>æç¤ºå¦‚ä½•æ³¨å†Œå…¶ä»–èŠ‚ç‚¹åˆ° Clusterã€‚  </p><h2 id="é…ç½®-kubectl"><a href="#é…ç½®-kubectl" class="headerlink" title="é…ç½® kubectl"></a>é…ç½® kubectl</h2><p>kubectl æ˜¯ç®¡ç† Kubernetes Cluster çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå‰é¢æˆ‘ä»¬å·²ç»åœ¨æ‰€æœ‰çš„èŠ‚ç‚¹å®‰è£…äº† kubectlã€‚Master åˆå§‹åŒ–å®Œæˆåéœ€è¦åšä¸€äº›é…ç½®å·¥ä½œï¼Œç„¶å kubectl å°±èƒ½ä½¿ç”¨äº†ã€‚<br>ä¾ç…§ kubeadm init è¾“å‡ºçš„æœ€åæç¤ºï¼Œæ¨èç”¨ Linux æ™®é€šç”¨æˆ·æ‰§è¡Œ kubectlã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆ›å»ºæ™®é€šç”¨æˆ·å¹¶è®¾ç½®å¯†ç 123456</span><span class="token function">useradd</span> centos <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">echo</span> <span class="token string">"centos:123456"</span> <span class="token operator">|</span> chpasswd centos<span class="token comment"># è¿½åŠ sudoæƒé™,å¹¶é…ç½®sudoå…å¯†</span><span class="token function">sed</span> -i <span class="token string">'/^root/a\centos  ALL=(ALL)       NOPASSWD:ALL'</span> /etc/sudoers<span class="token comment"># ä¿å­˜é›†ç¾¤å®‰å…¨é…ç½®æ–‡ä»¶åˆ°å½“å‰ç”¨æˆ·.kubeç›®å½•</span><span class="token function">su</span> - centos<span class="token function">mkdir</span> -p <span class="token environment constant">$HOME</span>/.kube<span class="token function">sudo</span> <span class="token function">cp</span> -i /etc/kubernetes/admin.conf <span class="token environment constant">$HOME</span>/.kube/config<span class="token function">sudo</span> <span class="token function">chown</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -u<span class="token variable">)</span></span><span class="token builtin class-name">:</span><span class="token variable"><span class="token variable">$(</span><span class="token function">id</span> -g<span class="token variable">)</span></span> <span class="token environment constant">$HOME</span>/.kube/config<span class="token comment"># å¯ç”¨ kubectl å‘½ä»¤è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼ˆæ³¨é”€é‡æ–°ç™»å½•ç”Ÿæ•ˆï¼‰</span><span class="token builtin class-name">echo</span> <span class="token string">"source &lt;(kubectl completion bash)"</span> <span class="token operator">>></span> ~/.bashrc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éœ€è¦è¿™äº›é…ç½®å‘½ä»¤çš„åŸå› æ˜¯ï¼šKubernetes é›†ç¾¤é»˜è®¤éœ€è¦åŠ å¯†æ–¹å¼è®¿é—®ã€‚æ‰€ä»¥ï¼Œè¿™å‡ æ¡å‘½ä»¤ï¼Œå°±æ˜¯å°†åˆšåˆšéƒ¨ç½²ç”Ÿæˆçš„ Kubernetes é›†ç¾¤çš„å®‰å…¨é…ç½®æ–‡ä»¶ï¼Œä¿å­˜åˆ°å½“å‰ç”¨æˆ·çš„.kube ç›®å½•ä¸‹ï¼Œkubectl é»˜è®¤ä¼šä½¿ç”¨è¿™ä¸ªç›®å½•ä¸‹çš„æˆæƒä¿¡æ¯è®¿é—® Kubernetes é›†ç¾¤ã€‚<br>å¦‚æœä¸è¿™ä¹ˆåšçš„è¯ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½éœ€è¦é€šè¿‡ export KUBECONFIG ç¯å¢ƒå˜é‡å‘Šè¯‰ kubectl è¿™ä¸ªå®‰å…¨é…ç½®æ–‡ä»¶çš„ä½ç½®ã€‚<br>é…ç½®å®Œæˆåcentosç”¨æˆ·å°±å¯ä»¥ä½¿ç”¨ kubectl å‘½ä»¤ç®¡ç†é›†ç¾¤äº†ã€‚  </p><p>æŸ¥çœ‹é›†ç¾¤çŠ¶æ€ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get csNAME                 STATUS      MESSAGE                                                                                     ERRORscheduler            Unhealthy   Get http://127.0.0.1:10251/healthz: dial tcp <span class="token number">127.0</span>.0.1:10251: connect: connection refused   controller-manager   Healthy     ok                                                                                          etcd-0               Healthy     <span class="token punctuation">&#123;</span><span class="token string">"health"</span><span class="token builtin class-name">:</span><span class="token string">"true"</span><span class="token punctuation">&#125;</span>                                                                           <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç¡®è®¤å„ä¸ªç»„ä»¶éƒ½å¤„äºhealthyçŠ¶æ€ã€‚<br>æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get nodeNAME         STATUS     ROLES    AGE    VERSIONk8s-master   NotReady   master   105s   v1.18.5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œå½“å‰åªå­˜åœ¨1ä¸ªmasterèŠ‚ç‚¹ï¼Œå¹¶ä¸”è¿™ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€æ˜¯ NotReadyã€‚<br>ä½¿ç”¨ kubectl describe å‘½ä»¤æ¥æŸ¥çœ‹è¿™ä¸ªèŠ‚ç‚¹ï¼ˆNodeï¼‰å¯¹è±¡çš„è¯¦ç»†ä¿¡æ¯ã€çŠ¶æ€å’Œäº‹ä»¶ï¼ˆEventï¼‰ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl describe node k8s-master<span class="token punctuation">..</span>.Events:  Type    Reason                   Age                    From                 Message  ----    ------                   ----                   ----                 -------  Normal  NodeHasNoDiskPressure    2m50s <span class="token punctuation">(</span>x4 over 2m51s<span class="token punctuation">)</span>  kubelet, k8s-master  Node k8s-master status is now: NodeHasNoDiskPressure  Normal  NodeHasSufficientPID     2m50s <span class="token punctuation">(</span>x4 over 2m51s<span class="token punctuation">)</span>  kubelet, k8s-master  Node k8s-master status is now: NodeHasSufficientPID  Normal  NodeHasSufficientMemory  2m49s <span class="token punctuation">(</span>x5 over 2m51s<span class="token punctuation">)</span>  kubelet, k8s-master  Node k8s-master status is now: NodeHasSufficientMemory  Normal  Starting                 102s                   kubelet, k8s-master  Starting kubelet.  Normal  NodeHasSufficientMemory  97s                    kubelet, k8s-master  Node k8s-master status is now: NodeHasSufficientMemory  Normal  NodeHasNoDiskPressure    97s                    kubelet, k8s-master  Node k8s-master status is now: NodeHasNoDiskPressure  Normal  NodeHasSufficientPID     97s                    kubelet, k8s-master  Node k8s-master status is now: NodeHasSufficientPID  Normal  NodeAllocatableEnforced  96s                    kubelet, k8s-master  Updated Node Allocatable limit across pods<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡ kubectl describe æŒ‡ä»¤çš„è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° NodeNotReady çš„åŸå› åœ¨äºï¼Œæˆ‘ä»¬å°šæœªéƒ¨ç½²ä»»ä½•ç½‘ç»œæ’ä»¶ï¼Œkube-proxyç­‰ç»„ä»¶è¿˜å¤„äºstartingçŠ¶æ€ã€‚<br>å¦å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ kubectl æ£€æŸ¥è¿™ä¸ªèŠ‚ç‚¹ä¸Šå„ä¸ªç³»ç»Ÿ Pod çš„çŠ¶æ€ï¼Œå…¶ä¸­ï¼Œkube-system æ˜¯ Kubernetes é¡¹ç›®é¢„ç•™çš„ç³»ç»Ÿ Pod çš„å·¥ä½œç©ºé—´ï¼ˆNamepsaceï¼Œæ³¨æ„å®ƒå¹¶ä¸æ˜¯ Linux Namespaceï¼Œå®ƒåªæ˜¯ Kubernetes åˆ’åˆ†ä¸åŒå·¥ä½œç©ºé—´çš„å•ä½ï¼‰ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get pod -n kube-system -o wideNAME                                 READY   STATUS    RESTARTS   AGE    IP              NODE         NOMINATED NODE   READINESS GATEScoredns-7ff77c879f-5kmsp             <span class="token number">0</span>/1     Pending   <span class="token number">0</span>          58s    <span class="token operator">&lt;</span>none<span class="token operator">></span>          <span class="token operator">&lt;</span>none<span class="token operator">></span>       <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>coredns-7ff77c879f-z5v6h             <span class="token number">0</span>/1     Pending   <span class="token number">0</span>          58s    <span class="token operator">&lt;</span>none<span class="token operator">></span>          <span class="token operator">&lt;</span>none<span class="token operator">></span>       <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>etcd-k8s-master                      <span class="token number">1</span>/1     Running   <span class="token number">0</span>          101s   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-apiserver-k8s-master            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          101s   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-controller-manager-k8s-master   <span class="token number">1</span>/1     Running   <span class="token number">1</span>          101s   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-proxy-nsj4g                     <span class="token number">0</span>/1     Pending   <span class="token number">0</span>          58s    <span class="token operator">&lt;</span>none<span class="token operator">></span>          <span class="token operator">&lt;</span>none<span class="token operator">></span>       <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-scheduler-k8s-master            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          101s   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼ŒCoreDNSä¾èµ–äºç½‘ç»œçš„ Pod éƒ½å¤„äº Pending çŠ¶æ€ï¼Œå³è°ƒåº¦å¤±è´¥ã€‚è¿™å½“ç„¶æ˜¯ç¬¦åˆé¢„æœŸçš„ï¼šå› ä¸ºè¿™ä¸ª Master èŠ‚ç‚¹çš„ç½‘ç»œå°šæœªå°±ç»ªã€‚<br>é›†ç¾¤åˆå§‹åŒ–å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨kubeadm resetå‘½ä»¤è¿›è¡Œæ¸…ç†ç„¶åé‡æ–°æ‰§è¡Œåˆå§‹åŒ–ã€‚  </p><p>éƒ¨ç½²ç½‘ç»œæ’ä»¶<br>è¦è®© Kubernetes Cluster èƒ½å¤Ÿå·¥ä½œï¼Œå¿…é¡»å®‰è£… Pod ç½‘ç»œï¼Œå¦åˆ™ Pod ä¹‹é—´æ— æ³•é€šä¿¡ã€‚<br>Kubernetes æ”¯æŒå¤šç§ç½‘ç»œæ–¹æ¡ˆï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ flannel<br>æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤éƒ¨ç½² flannelï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.ymlThe connection to the server raw.githubusercontent.com was refused - did you specify the right <span class="token function">host</span> or port?<span class="token comment"># æŠ¥é”™äº†ï¼Œä½ å¯ä»¥ä½¿ç”¨wgetä¸‹è½½ï¼Œæˆ–è€…è®¿é—®è®¿é—®ç½‘é¡µæŠŠkube-flannel.ymlæ–‡ä»¶å†…å®¹å¤åˆ¶å‡ºæ¥</span><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl apply -f kube-flannel.yml podsecuritypolicy.policy/psp.flannel.unprivileged createdclusterrole.rbac.authorization.k8s.io/flannel configuredclusterrolebinding.rbac.authorization.k8s.io/flannel unchangedserviceaccount/flannel unchangedconfigmap/kube-flannel-cfg configureddaemonset.apps/kube-flannel-ds-amd64 createddaemonset.apps/kube-flannel-ds-arm64 createddaemonset.apps/kube-flannel-ds-arm createddaemonset.apps/kube-flannel-ds-ppc64le createddaemonset.apps/kube-flannel-ds-s390x created<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>éƒ¨ç½²å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ kubectl get é‡æ–°æ£€æŸ¥ Pod çš„çŠ¶æ€ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get pod -n kube-system -o wideNAME                                 READY   STATUS     RESTARTS   AGE   IP              NODE         NOMINATED NODE   READINESS GATEScoredns-7ff77c879f-5kmsp             <span class="token number">0</span>/1     Pending    <span class="token number">0</span>          16m   <span class="token operator">&lt;</span>none<span class="token operator">></span>          <span class="token operator">&lt;</span>none<span class="token operator">></span>       <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>coredns-7ff77c879f-z5v6h             <span class="token number">0</span>/1     Pending    <span class="token number">0</span>          16m   <span class="token operator">&lt;</span>none<span class="token operator">></span>          <span class="token operator">&lt;</span>none<span class="token operator">></span>       <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>etcd-k8s-master                      <span class="token number">1</span>/1     Running    <span class="token number">0</span>          17m   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-apiserver-k8s-master            <span class="token number">1</span>/1     Running    <span class="token number">0</span>          17m   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-controller-manager-k8s-master   <span class="token number">1</span>/1     Running    <span class="token number">1</span>          17m   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-flannel-ds-amd64-vn6sj          <span class="token number">0</span>/1     Init:0/1   <span class="token number">0</span>          15s   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-proxy-nsj4g                     <span class="token number">1</span>/1     Running    <span class="token number">0</span>          16m   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-scheduler-k8s-master            <span class="token number">1</span>/1     Running    <span class="token number">1</span>          17m   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰çš„ç³»ç»Ÿ Pod éƒ½æˆåŠŸå¯åŠ¨äº†ï¼Œè€Œåˆšåˆšéƒ¨ç½²çš„flannelç½‘ç»œæ’ä»¶åˆ™åœ¨ kube-system ä¸‹é¢æ–°å»ºäº†ä¸€ä¸ªåå«kube-flannel-ds-amd64-vn6sjçš„ Podï¼Œä¸€èˆ¬æ¥è¯´ï¼Œè¿™äº› Pod å°±æ˜¯å®¹å™¨ç½‘ç»œæ’ä»¶åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æ§åˆ¶ç»„ä»¶ã€‚<br>Kubernetes æ”¯æŒå®¹å™¨ç½‘ç»œæ’ä»¶ï¼Œä½¿ç”¨çš„æ˜¯ä¸€ä¸ªåå« CNI çš„é€šç”¨æ¥å£ï¼Œå®ƒä¹Ÿæ˜¯å½“å‰å®¹å™¨ç½‘ç»œçš„äº‹å®æ ‡å‡†ï¼Œå¸‚é¢ä¸Šçš„æ‰€æœ‰å®¹å™¨ç½‘ç»œå¼€æºé¡¹ç›®éƒ½å¯ä»¥é€šè¿‡ CNI æ¥å…¥ Kubernetesï¼Œæ¯”å¦‚ Flannelã€Calicoã€Canalã€Romana ç­‰ç­‰ï¼Œå®ƒä»¬çš„éƒ¨ç½²æ–¹å¼ä¹Ÿéƒ½æ˜¯ç±»ä¼¼çš„â€ä¸€é”®éƒ¨ç½²â€ã€‚<br>å¤§æ¦‚ç­‰å¾…2åˆ†é’Ÿï¼Œå†æ¬¡æŸ¥çœ‹masterèŠ‚ç‚¹çŠ¶æ€å·²ç»ä¸ºreadyçŠ¶æ€ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get nodesNAME         STATUS   ROLES    AGE   VERSIONk8s-master   Ready    master   86m   v1.18.5<span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get csNAME                 STATUS    MESSAGE             ERRORcontroller-manager   Healthy   ok                  scheduler            Healthy   ok                  etcd-0               Healthy   <span class="token punctuation">&#123;</span><span class="token string">"health"</span><span class="token builtin class-name">:</span><span class="token string">"true"</span><span class="token punctuation">&#125;</span>  <span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get pod -n kube-system -o wideNAME                                 READY   STATUS    RESTARTS   AGE     IP              NODE         NOMINATED NODE   READINESS GATEScoredns-7ff77c879f-5kmsp             <span class="token number">1</span>/1     Running   <span class="token number">0</span>          20m     <span class="token number">10.244</span>.0.2      k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>coredns-7ff77c879f-z5v6h             <span class="token number">1</span>/1     Running   <span class="token number">0</span>          20m     <span class="token number">10.244</span>.0.3      k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>etcd-k8s-master                      <span class="token number">1</span>/1     Running   <span class="token number">0</span>          21m     <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-apiserver-k8s-master            <span class="token number">1</span>/1     Running   <span class="token number">0</span>          21m     <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-controller-manager-k8s-master   <span class="token number">1</span>/1     Running   <span class="token number">1</span>          21m     <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-flannel-ds-amd64-vn6sj          <span class="token number">1</span>/1     Running   <span class="token number">0</span>          4m24s   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-proxy-nsj4g                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          20m     <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-scheduler-k8s-master            <span class="token number">1</span>/1     Running   <span class="token number">1</span>          21m     <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è‡³æ­¤ï¼ŒKubernetes çš„ Master èŠ‚ç‚¹å°±éƒ¨ç½²å®Œæˆäº†ã€‚å¦‚æœä½ åªéœ€è¦ä¸€ä¸ªå•èŠ‚ç‚¹çš„ Kubernetesï¼Œç°åœ¨ä½ å°±å¯ä»¥ä½¿ç”¨äº†ã€‚ä¸è¿‡ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒKubernetes çš„ Master èŠ‚ç‚¹æ˜¯ä¸èƒ½è¿è¡Œç”¨æˆ· Pod çš„ã€‚ </p><h1 id="éƒ¨ç½²workerèŠ‚ç‚¹"><a href="#éƒ¨ç½²workerèŠ‚ç‚¹" class="headerlink" title="éƒ¨ç½²workerèŠ‚ç‚¹"></a>éƒ¨ç½²workerèŠ‚ç‚¹</h1><p>Kubernetes çš„ Worker èŠ‚ç‚¹è·Ÿ Master èŠ‚ç‚¹å‡ ä¹æ˜¯ç›¸åŒçš„ï¼Œå®ƒä»¬è¿è¡Œç€çš„éƒ½æ˜¯ä¸€ä¸ª kubelet ç»„ä»¶ã€‚å”¯ä¸€çš„åŒºåˆ«åœ¨äºï¼Œåœ¨ kubeadm init çš„è¿‡ç¨‹ä¸­ï¼Œkubelet å¯åŠ¨åï¼ŒMaster èŠ‚ç‚¹ä¸Šè¿˜ä¼šè‡ªåŠ¨è¿è¡Œ kube-apiserverã€kube-schedulerã€kube-controller-manger è¿™ä¸‰ä¸ªç³»ç»Ÿ Podã€‚<br>åœ¨ k8s-node1 å’Œ k8s-node2 ä¸Šåˆ†åˆ«æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œå°†å…¶æ³¨å†Œåˆ° Cluster ä¸­ï¼š<br>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†èŠ‚ç‚¹æ¥å…¥é›†ç¾¤<br><code>kubeadm join 192.168.1.150:6443 --token snllb2.u0jdzy8295owjg8s --discovery-token-ca-cert-hash sha256:1dbb688b15c24740b288d300a5b2934828462f85f15599e047a7b5d91f0a4e1e</code><br>å¦‚æœæ‰§è¡Œkubeadm initæ—¶æ²¡æœ‰è®°å½•ä¸‹åŠ å…¥é›†ç¾¤çš„å‘½ä»¤ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤é‡æ–°åˆ›å»º<br><code>kubeadm token create --print-join-command</code>  </p><p>åœ¨k8s-node1ä¸Šæ‰§è¡Œkubeadm join ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@k8s-node1 ~<span class="token punctuation">]</span><span class="token comment"># kubeadm join 192.168.1.150:6443 --token snllb2.u0jdzy8295owjg8s --discovery-token-ca-cert-hash sha256:1dbb688b15c24740b288d300a5b2934828462f85f15599e047a7b5d91f0a4e1e </span>W0628 <span class="token number">13</span>:05:26.974118   <span class="token number">17888</span> join.go:346<span class="token punctuation">]</span> <span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> WARNING: JoinControlPane.controlPlane settings will be ignored when control-plane flag is not set.<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> Running pre-flight checks<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> Reading configuration from the cluster<span class="token punctuation">..</span>.<span class="token punctuation">[</span>preflight<span class="token punctuation">]</span> FYI: You can <span class="token function">look</span> at this config <span class="token function">file</span> with <span class="token string">'kubectl -n kube-system get cm kubeadm-config -oyaml'</span><span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> Downloading configuration <span class="token keyword">for</span> the kubelet from the <span class="token string">"kubelet-config-1.18"</span> ConfigMap <span class="token keyword">in</span> the kube-system namespace<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> Writing kubelet configuration to <span class="token function">file</span> <span class="token string">"/var/lib/kubelet/config.yaml"</span><span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> Writing kubelet environment <span class="token function">file</span> with flags to <span class="token function">file</span> <span class="token string">"/var/lib/kubelet/kubeadm-flags.env"</span><span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> Starting the kubelet<span class="token punctuation">[</span>kubelet-start<span class="token punctuation">]</span> Waiting <span class="token keyword">for</span> the kubelet to perform the TLS Bootstrap<span class="token punctuation">..</span>.This node has joined the cluster:* Certificate signing request was sent to apiserver and a response was received.* The Kubelet was informed of the new secure connection details.Run <span class="token string">'kubectl get nodes'</span> on the control-plane to see this node <span class="token function">join</span> the cluster.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é‡å¤æ‰§è¡Œä»¥ä¸Šæ“ä½œå°†k8s-node2ä¹ŸåŠ è¿›å»ï¼ˆæ³¨æ„é‡æ–°æ‰§è¡Œkubeadm token create â€“print-join-commandï¼‰ã€‚<br>ç„¶åæ ¹æ®æç¤ºï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ kubectl get nodes æŸ¥çœ‹èŠ‚ç‚¹çš„çŠ¶æ€ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get nodesNAME         STATUS     ROLES    AGE   VERSIONk8s-master   Ready      master   87m   v1.18.5k8s-node1    NotReady   <span class="token operator">&lt;</span>none<span class="token operator">></span>   33s   v1.18.5k8s-node2    NotReady   <span class="token operator">&lt;</span>none<span class="token operator">></span>   29s   v1.18.5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>nodesçŠ¶æ€å…¨éƒ¨ä¸ºreadyï¼Œç”±äºæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦å¯åŠ¨è‹¥å¹²ç»„ä»¶ï¼Œå¦‚æœnodeèŠ‚ç‚¹çš„çŠ¶æ€æ˜¯ NotReadyï¼Œå¯ä»¥æŸ¥çœ‹æ‰€æœ‰èŠ‚ç‚¹podçŠ¶æ€ï¼Œç¡®ä¿æ‰€æœ‰podæˆåŠŸæ‹‰å–åˆ°é•œåƒå¹¶å¤„äºrunningçŠ¶æ€ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get pod --all-namespaces -o wideNAMESPACE     NAME                                 READY   STATUS    RESTARTS   AGE     IP              NODE         NOMINATED NODE   READINESS GATESkube-system   coredns-7ff77c879f-5kmsp             <span class="token number">1</span>/1     Running   <span class="token number">1</span>          3h11m   <span class="token number">10.244</span>.0.4      k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-system   coredns-7ff77c879f-z5v6h             <span class="token number">1</span>/1     Running   <span class="token number">1</span>          3h11m   <span class="token number">10.244</span>.0.5      k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-system   etcd-k8s-master                      <span class="token number">1</span>/1     Running   <span class="token number">1</span>          3h11m   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-system   kube-apiserver-k8s-master            <span class="token number">1</span>/1     Running   <span class="token number">1</span>          3h11m   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-system   kube-controller-manager-k8s-master   <span class="token number">1</span>/1     Running   <span class="token number">2</span>          3h11m   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-system   kube-flannel-ds-amd64-22jwb          <span class="token number">1</span>/1     Running   <span class="token number">2</span>          105m    <span class="token number">192.168</span>.1.151   k8s-node1    <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-system   kube-flannel-ds-amd64-vn6sj          <span class="token number">1</span>/1     Running   <span class="token number">1</span>          174m    <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-system   kube-flannel-ds-amd64-vtdqd          <span class="token number">1</span>/1     Running   <span class="token number">0</span>          105m    <span class="token number">192.168</span>.1.152   k8s-node2    <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-system   kube-proxy-gb7qj                     <span class="token number">1</span>/1     Running   <span class="token number">1</span>          105m    <span class="token number">192.168</span>.1.151   k8s-node1    <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-system   kube-proxy-kfnmb                     <span class="token number">1</span>/1     Running   <span class="token number">1</span>          105m    <span class="token number">192.168</span>.1.152   k8s-node2    <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-system   kube-proxy-nsj4g                     <span class="token number">1</span>/1     Running   <span class="token number">1</span>          3h11m   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>kube-system   kube-scheduler-k8s-master            <span class="token number">1</span>/1     Running   <span class="token number">2</span>          3h11m   <span class="token number">192.168</span>.1.150   k8s-master   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™æ—¶ï¼Œæ‰€æœ‰çš„èŠ‚ç‚¹éƒ½å·²ç» Readyï¼ŒKubernetes Cluster åˆ›å»ºæˆåŠŸï¼Œä¸€åˆ‡å‡†å¤‡å°±ç»ªã€‚<br>å¦‚æœpodçŠ¶æ€ä¸ºPendingã€ContainerCreatingã€ImagePullBackOff éƒ½è¡¨æ˜ Pod æ²¡æœ‰å°±ç»ªï¼ŒRunning æ‰æ˜¯å°±ç»ªçŠ¶æ€ã€‚<br>å¦‚æœæœ‰podæç¤ºInit:ImagePullBackOffï¼Œè¯´æ˜è¿™ä¸ªpodçš„é•œåƒåœ¨å¯¹åº”èŠ‚ç‚¹ä¸Šæ‹‰å–å¤±è´¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ kubectl describe pod æŸ¥çœ‹ Pod å…·ä½“æƒ…å†µï¼Œä»¥ç¡®è®¤æ‹‰å–å¤±è´¥çš„é•œåƒï¼š<br><code>kubectl describe pod åæ‰çš„podå --namespace=kube-system</code></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl describe pod kube-flannel-ds-amd64-vtdqd --namespace<span class="token operator">=</span>kube-system<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>Events:  Type     Reason     Age                 From                Message  ----     ------     ----                ----                -------  Normal   Scheduled  2m14s               default-scheduler   Successfully assigned kube-system/kube-flannel-ds-amd64-lzx5v to k8s-node2  Warning  Failed     109s                kubelet, k8s-node2  Failed to pull image <span class="token string">"quay.io/coreos/flannel:v0.12.0-amd64"</span><span class="token builtin class-name">:</span> rpc error: code <span class="token operator">=</span> Unknown desc <span class="token operator">=</span> Error response from daemon: Get https://quay.io/v2/: net/http: TLS handshake <span class="token function">timeout</span>  Warning  Failed     109s                kubelet, k8s-node2  Error: ErrImagePull  Normal   BackOff    108s                kubelet, k8s-node2  Back-off pulling image <span class="token string">"quay.io/coreos/flannel:v0.12.0-amd64"</span>  Warning  Failed     108s                kubelet, k8s-node2  Error: ImagePullBackOff  Normal   Pulling    94s <span class="token punctuation">(</span>x2 over 2m6s<span class="token punctuation">)</span>  kubelet, k8s-node2  pulling image <span class="token string">"quay.io/coreos/flannel:v0.12.0-amd64"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿™é‡Œçœ‹æœ€åeventsè¾“å‡ºå†…å®¹ï¼Œå¯ä»¥çœ‹åˆ°åœ¨ä¸‹è½½ image æ—¶å¤±è´¥ï¼Œå¦‚æœç½‘ç»œè´¨é‡ä¸å¥½ï¼Œè¿™ç§æƒ…å†µæ˜¯å¾ˆå¸¸è§çš„ã€‚æˆ‘ä»¬å¯ä»¥è€å¿ƒç­‰å¾…ï¼Œå› ä¸º Kubernetes ä¼šé‡è¯•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±æ‰‹å·¥æ‰§è¡Œ docker pull å»ä¸‹è½½è¿™ä¸ªé•œåƒã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@k8s-node2 ~<span class="token punctuation">]</span><span class="token comment"># docker pull quay.io/coreos/flannel:v0.12.0-amd64</span>v0.12.0-amd64: Pulling from coreos/flannelff3a5c916c92: Already exists8a8433d1d437: Already exists306dc0ee491a: Already exists856cbd0b7b9c: Already existsaf6d1e4decc6: Already existsDigest: sha256:88f2b4d96fae34bfff3d46293f7f18d1f9f3ca026b4a4d288f28347fcb6580acStatus: Image is up to <span class="token function">date</span> <span class="token keyword">for</span> quay.io/coreos/flannel:v0.12.0-amd64<span class="token punctuation">[</span>root@k8s-node2 ~<span class="token punctuation">]</span><span class="token comment">#</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ— æ³•ä» quay.io/coreos/flannel:v0.12.0-amd64 ä¸‹è½½é•œåƒï¼Œå¯ä»¥ä»é˜¿é‡Œäº‘æˆ–è€…dockerhubé•œåƒä»“åº“ä¸‹è½½ï¼Œç„¶åæ”¹å›åŸæ¥çš„tagå³å¯ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker pull registry.cn-hangzhou.aliyuncs.com/kubernetes_containers/flannel:v0.12.0-amd64docker tag registry.cn-hangzhou.aliyuncs.com/kubernetes_containers/flannel:v0.12.0-amd64 quay.io/coreos/flannel:v0.12.0-amd64docker rmi registry.cn-hangzhou.aliyuncs.com/kubernetes_containers/flannel:v0.12.0-amd64<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æŸ¥çœ‹masterèŠ‚ç‚¹ä¸‹è½½äº†å“ªäº›é•œåƒ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ <span class="token function">sudo</span> docker imagesREPOSITORY                                                        TAG                 IMAGE ID            CREATED             SIZEregistry.aliyuncs.com/google_containers/kube-proxy                v1.18.3             3439b7546f29        <span class="token number">5</span> weeks ago         117MBregistry.aliyuncs.com/google_containers/kube-scheduler            v1.18.3             76216c34ed0c        <span class="token number">5</span> weeks ago         <span class="token number">95</span>.3MBregistry.aliyuncs.com/google_containers/kube-apiserver            v1.18.3             7e28efa976bd        <span class="token number">5</span> weeks ago         173MBregistry.aliyuncs.com/google_containers/kube-controller-manager   v1.18.3             da26705ccb4b        <span class="token number">5</span> weeks ago         162MBquay.io/coreos/flannel                                            v0.12.0-amd64       4e9f801d2217        <span class="token number">3</span> months ago        <span class="token number">52</span>.8MBregistry.aliyuncs.com/google_containers/pause                     <span class="token number">3.2</span>                 80d28bedfe5d        <span class="token number">4</span> months ago        683kBregistry.aliyuncs.com/google_containers/coredns                   <span class="token number">1.6</span>.7               67da37a9a360        <span class="token number">5</span> months ago        <span class="token number">43</span>.8MBregistry.aliyuncs.com/google_containers/etcd                      <span class="token number">3.4</span>.3-0             303ce5db0e90        <span class="token number">8</span> months ago        288MB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŸ¥çœ‹nodeèŠ‚ç‚¹ä¸‹è½½äº†å“ªäº›é•œåƒï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@k8s-node1 ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>REPOSITORY                                           TAG                 IMAGE ID            CREATED             SIZEregistry.aliyuncs.com/google_containers/kube-proxy   v1.18.3             3439b7546f29        <span class="token number">5</span> weeks ago         117MBquay.io/coreos/flannel                               v0.12.0-amd64       4e9f801d2217        <span class="token number">3</span> months ago        <span class="token number">52</span>.8MBregistry.aliyuncs.com/google_containers/pause        <span class="token number">3.2</span>                 80d28bedfe5d        <span class="token number">4</span> months ago        683kB<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æµ‹è¯•é›†ç¾¤å„ä¸ªç»„ä»¶"><a href="#æµ‹è¯•é›†ç¾¤å„ä¸ªç»„ä»¶" class="headerlink" title="æµ‹è¯•é›†ç¾¤å„ä¸ªç»„ä»¶"></a>æµ‹è¯•é›†ç¾¤å„ä¸ªç»„ä»¶</h2><p>é¦–å…ˆéªŒè¯kube-apiserver, kube-controller-manager, kube-scheduler, pod network æ˜¯å¦æ­£å¸¸ï¼š<br>éƒ¨ç½²ä¸€ä¸ª Nginx Deploymentï¼ŒåŒ…å«2ä¸ªPod  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl create deployment nginx --image<span class="token operator">=</span>nginx:alpinedeployment.apps/nginx created<span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl scale deployment nginx --replicas<span class="token operator">=</span><span class="token number">2</span>deployment.apps/nginx scaled<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>éªŒè¯Nginx Podæ˜¯å¦æ­£ç¡®è¿è¡Œï¼Œå¹¶ä¸”ä¼šåˆ†é…10.244.å¼€å¤´çš„é›†ç¾¤IP</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get pods -l <span class="token assign-left variable">app</span><span class="token operator">=</span>nginx -o wideNAME                     READY   STATUS    RESTARTS   AGE   IP           NODE        NOMINATED NODE   READINESS GATESnginx-745b4df97d-cgdlt   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          50s   <span class="token number">10.244</span>.2.2   k8s-node2   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span>nginx-745b4df97d-qn6rm   <span class="token number">1</span>/1     Running   <span class="token number">0</span>          40s   <span class="token number">10.244</span>.1.2   k8s-node1   <span class="token operator">&lt;</span>none<span class="token operator">></span>           <span class="token operator">&lt;</span>none<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>å†éªŒè¯ä¸€ä¸‹kube-proxyæ˜¯å¦æ­£å¸¸ï¼š<br>ä»¥ NodePort æ–¹å¼å¯¹å¤–æä¾›æœåŠ¡  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl expose deployment nginx --port<span class="token operator">=</span><span class="token number">80</span> --type<span class="token operator">=</span>NodePortservice/nginx exposed<span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get services nginxNAME    TYPE       CLUSTER-IP   EXTERNAL-IP   PORT<span class="token punctuation">(</span>S<span class="token punctuation">)</span>        AGEnginx   NodePort   <span class="token number">10.99</span>.83.4   <span class="token operator">&lt;</span>none<span class="token operator">></span>        <span class="token number">80</span>:30507/TCP   8s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯ä»¥é€šè¿‡ä»»æ„ NodeIP:Port åœ¨é›†ç¾¤å¤–éƒ¨è®¿é—®è¿™ä¸ªæœåŠ¡ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ <span class="token function">curl</span> <span class="token number">192.168</span>.1.150:30507<span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ <span class="token function">curl</span> <span class="token number">192.168</span>.1.151:30507<span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ <span class="token function">curl</span> <span class="token number">192.168</span>.1.152:30507<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>æœ€åéªŒè¯ä¸€ä¸‹dns, pod networkæ˜¯å¦æ­£å¸¸ï¼š<br>è¿è¡ŒBusyboxå¹¶è¿›å…¥äº¤äº’æ¨¡å¼  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl run -it <span class="token function">curl</span> --image<span class="token operator">=</span>radial/busyboxplus:curlIf you don't see a <span class="token builtin class-name">command</span> prompt, try pressing enter.<span class="token punctuation">[</span> root@curl:/ <span class="token punctuation">]</span>$ <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>è¾“å…¥nslookup nginxæŸ¥çœ‹æ˜¯å¦å¯ä»¥æ­£ç¡®è§£æå‡ºé›†ç¾¤å†…çš„IPï¼Œä»¥éªŒè¯DNSæ˜¯å¦æ­£å¸¸  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span> root@curl:/ <span class="token punctuation">]</span>$ <span class="token function">nslookup</span> nginxServer:    <span class="token number">10.96</span>.0.10Address <span class="token number">1</span>: <span class="token number">10.96</span>.0.10 kube-dns.kube-system.svc.cluster.localName:      nginxAddress <span class="token number">1</span>: <span class="token number">10.99</span>.83.4 nginx.default.svc.cluster.local<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡æœåŠ¡åè¿›è¡Œè®¿é—®ï¼ŒéªŒè¯kube-proxyæ˜¯å¦æ­£å¸¸  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span> root@curl:/ <span class="token punctuation">]</span>$ <span class="token function">curl</span> http://nginx/<span class="token punctuation">..</span>.<span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>></span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>></span><span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ†åˆ«è®¿é—®ä¸€ä¸‹2ä¸ªPodçš„å†…ç½‘IPï¼ŒéªŒè¯è·¨Nodeçš„ç½‘ç»œé€šä¿¡æ˜¯å¦æ­£å¸¸  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span> root@curl:/ <span class="token punctuation">]</span>$ <span class="token function">curl</span> <span class="token number">10.244</span>.1.2<span class="token punctuation">..</span>.<span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>></span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>></span><span class="token punctuation">..</span>.<span class="token punctuation">[</span> root@curl:/ <span class="token punctuation">]</span>$ <span class="token function">curl</span> <span class="token number">10.244</span>.2.2<span class="token punctuation">..</span>.<span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>></span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>></span><span class="token punctuation">..</span>.<span class="token comment"># é€€å‡ºpod</span>Ctrl+P+Q<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Podè°ƒåº¦åˆ°MasterèŠ‚ç‚¹"><a href="#Podè°ƒåº¦åˆ°MasterèŠ‚ç‚¹" class="headerlink" title="Podè°ƒåº¦åˆ°MasterèŠ‚ç‚¹"></a>Podè°ƒåº¦åˆ°MasterèŠ‚ç‚¹</h2><p>å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œé»˜è®¤é…ç½®ä¸‹Kubernetesä¸ä¼šå°†Podè°ƒåº¦åˆ°MasterèŠ‚ç‚¹ã€‚æŸ¥çœ‹Taintså­—æ®µé»˜è®¤é…ç½®ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl describe node k8s-master <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>Taints:             node-role.kubernetes.io/master:NoSchedule<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœå¸Œæœ›å°†k8s-masterä¹Ÿå½“ä½œNodeèŠ‚ç‚¹ä½¿ç”¨ï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤,å…¶ä¸­k8s-masteræ˜¯ä¸»æœºèŠ‚ç‚¹hostnameï¼š<br><code>kubectl taint node k8s-master node-role.kubernetes.io/master-</code><br>ä¿®æ”¹åTaintså­—æ®µçŠ¶æ€ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl describe node k8s-master                             <span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>Taints:             <span class="token operator">&lt;</span>none<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœè¦æ¢å¤Master OnlyçŠ¶æ€ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š<br><code>kubectl taint node k8s-master node-role.kubernetes.io/master=:NoSchedule</code>  </p><h2 id="kube-proxyå¼€å¯ipvs"><a href="#kube-proxyå¼€å¯ipvs" class="headerlink" title="kube-proxyå¼€å¯ipvs"></a>kube-proxyå¼€å¯ipvs</h2><p>ä¿®æ”¹ConfigMapçš„kube-system/kube-proxyä¸­çš„config.confï¼Œ<code>mode: &quot;ipvs&quot;</code>ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl edit cm kube-proxy -n kube-systemconfigmap/kube-proxy edited<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¹‹åé‡å¯å„ä¸ªèŠ‚ç‚¹ä¸Šçš„kube-proxy podï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get pod -n kube-system <span class="token operator">|</span> <span class="token function">grep</span> kube-proxy <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;system("kubectl delete pod "$1" -n kube-system")&#125;'</span>pod <span class="token string">"kube-proxy-gb7qj"</span> deletedpod <span class="token string">"kube-proxy-kfnmb"</span> deletedpod <span class="token string">"kube-proxy-nsj4g"</span> deleted<span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl get pod -n kube-system <span class="token operator">|</span> <span class="token function">grep</span> kube-proxykube-proxy-469fj                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          6skube-proxy-cwszg                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          3skube-proxy-l7qzg                     <span class="token number">1</span>/1     Running   <span class="token number">0</span>          19s<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŸ¥çœ‹æ—¥å¿—ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>centos@k8s-master ~<span class="token punctuation">]</span>$ kubectl logs kube-proxy-469fj -n kube-systemI0628 07:17:58.726825       <span class="token number">1</span> node.go:136<span class="token punctuation">]</span> Successfully retrieved node IP: <span class="token number">192.168</span>.1.152I0628 07:17:58.726979       <span class="token number">1</span> server_others.go:259<span class="token punctuation">]</span> Using ipvs Proxier.W0628 07:17:58.738693       <span class="token number">1</span> proxier.go:429<span class="token punctuation">]</span> IPVS scheduler not specified, use rr by defaultI0628 07:17:58.739315       <span class="token number">1</span> server.go:583<span class="token punctuation">]</span> Version: v1.18.3I0628 07:17:58.761164       <span class="token number">1</span> conntrack.go:52<span class="token punctuation">]</span> Setting nf_conntrack_max to <span class="token number">131072</span>I0628 07:17:58.763090       <span class="token number">1</span> config.go:133<span class="token punctuation">]</span> Starting endpoints config controllerI0628 07:17:58.763140       <span class="token number">1</span> shared_informer.go:223<span class="token punctuation">]</span> Waiting <span class="token keyword">for</span> caches to <span class="token function">sync</span> <span class="token keyword">for</span> endpoints configI0628 07:17:58.763180       <span class="token number">1</span> config.go:315<span class="token punctuation">]</span> Starting <span class="token function">service</span> config controllerI0628 07:17:58.763187       <span class="token number">1</span> shared_informer.go:223<span class="token punctuation">]</span> Waiting <span class="token keyword">for</span> caches to <span class="token function">sync</span> <span class="token keyword">for</span> <span class="token function">service</span> configI0628 07:17:58.864362       <span class="token number">1</span> shared_informer.go:230<span class="token punctuation">]</span> Caches are synced <span class="token keyword">for</span> endpoints config I0628 07:17:58.880011       <span class="token number">1</span> shared_informer.go:230<span class="token punctuation">]</span> Caches are synced <span class="token keyword">for</span> <span class="token function">service</span> config <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ—¥å¿—ä¸­æ‰“å°å‡ºäº†<code>Using ipvs Proxier</code>ï¼Œè¯´æ˜ipvsæ¨¡å¼å·²ç»å¼€å¯ã€‚  </p><h2 id="ç§»é™¤èŠ‚ç‚¹å’Œé›†ç¾¤"><a href="#ç§»é™¤èŠ‚ç‚¹å’Œé›†ç¾¤" class="headerlink" title="ç§»é™¤èŠ‚ç‚¹å’Œé›†ç¾¤"></a>ç§»é™¤èŠ‚ç‚¹å’Œé›†ç¾¤</h2><p>kubernetesé›†ç¾¤ç§»é™¤èŠ‚ç‚¹<br>ä»¥ç§»é™¤k8s-node2èŠ‚ç‚¹ä¸ºä¾‹ï¼Œåœ¨MasterèŠ‚ç‚¹ä¸Šè¿è¡Œï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">kubectl drain k8s-node2 --delete-local-data --force --ignore-daemonsetskubectl delete node k8s-node2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>ä¸Šé¢ä¸¤æ¡å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œåœ¨k8s-node2èŠ‚ç‚¹æ‰§è¡Œæ¸…ç†å‘½ä»¤ï¼Œé‡ç½®kubeadmçš„å®‰è£…çŠ¶æ€ï¼š<br><code>kubeadm reset</code><br>åœ¨masterä¸Šåˆ é™¤nodeå¹¶ä¸ä¼šæ¸…ç†k8s-node2è¿è¡Œçš„å®¹å™¨ï¼Œéœ€è¦åœ¨åˆ é™¤èŠ‚ç‚¹ä¸Šé¢æ‰‹åŠ¨è¿è¡Œæ¸…ç†å‘½ä»¤ã€‚<br>å¦‚æœä½ æƒ³é‡æ–°é…ç½®é›†ç¾¤ï¼Œä½¿ç”¨æ–°çš„å‚æ•°é‡æ–°è¿è¡Œkubeadm initæˆ–è€…kubeadm joinå³å¯ã€‚  </p><p>è‡³æ­¤3ä¸ªèŠ‚ç‚¹çš„é›†ç¾¤æ­å»ºå®Œæˆï¼Œåç»­å¯ä»¥ç»§ç»­æ·»åŠ nodeèŠ‚ç‚¹ï¼Œæˆ–è€…éƒ¨ç½²dashboardã€helmåŒ…ç®¡ç†å·¥å…·ã€EFKæ—¥å¿—ç³»ç»Ÿã€Prometheus Operatorç›‘æ§ç³»ç»Ÿã€rook+cephå­˜å‚¨ç³»ç»Ÿç­‰ç»„ä»¶ã€‚  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> kubernetes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> Kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DNS</title>
      <link href="/posts/8835.html"/>
      <url>/posts/8835.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® -->  <h1 id="åŒ—äº¬"><a href="#åŒ—äº¬" class="headerlink" title="åŒ—äº¬:"></a>åŒ—äº¬:</h1><p><code>202.96.0.133</code>     (ns.bta.net.cn)<br><code>202.96.199.133</code>   (ns.spt.net.cn)<br><code>202.97.16.195</code>    (ns.cn.net)<br><code>202.106.0.20</code>     (gjjline.bta.net.cn)<br><code>202.106.196.115</code>  (linedns.bta.net.cn)  </p><h1 id="å¹¿ä¸œ"><a href="#å¹¿ä¸œ" class="headerlink" title="å¹¿ä¸œ:"></a>å¹¿ä¸œ:</h1><p><code>202.96.128.143</code>   (ns.guangzhou.gd.cn)<br><code>202.96.128.68</code>    (dns.guangzhou.gd.cn)  </p><h1 id="ä¸Šæµ·"><a href="#ä¸Šæµ·" class="headerlink" title="ä¸Šæµ·:"></a>ä¸Šæµ·:</h1><p><code>202.96.199.132</code>    (ns.sta.net.cn)<br><code>202.96.209.133</code>    (ns-pd.online.sh.cn)  </p><h1 id="æ¹–åŒ—æ­¦æ±‰"><a href="#æ¹–åŒ—æ­¦æ±‰" class="headerlink" title="æ¹–åŒ—æ­¦æ±‰:"></a>æ¹–åŒ—æ­¦æ±‰:</h1><p><code>202.103.24.68</code>    (ns.wuhan.net.cn)<br><code>202.103.0.117</code>    (ns1.hbwhptt.net.cn)  </p><h1 id="æµ™æ±Ÿ"><a href="#æµ™æ±Ÿ" class="headerlink" title="æµ™æ±Ÿ:"></a>æµ™æ±Ÿ:</h1><p><code>202.96.102.3</code>     (dns.zj.cninfo.net)<br><code>202.96.96.68</code>     (ns.wuhan.net.cn)<br><code>202.96.104.18</code>    (ns.zjnbptt.net.cn)  </p><h1 id="é™•è¥¿"><a href="#é™•è¥¿" class="headerlink" title="é™•è¥¿:"></a>é™•è¥¿:</h1><p><code>202.100.13.11</code>    (ns.snnic.com)  </p><h1 id="è¥¿å®‰"><a href="#è¥¿å®‰" class="headerlink" title="è¥¿å®‰:"></a>è¥¿å®‰:</h1><p><code>202.100.4.15</code>     (ns1.xaonline.com)  </p><h1 id="å¤©æ´¥"><a href="#å¤©æ´¥" class="headerlink" title="å¤©æ´¥:"></a>å¤©æ´¥:</h1><p><code>202.99.96.68</code>     (ns.tpt.net.cn)  </p><h1 id="è¾½å®"><a href="#è¾½å®" class="headerlink" title="è¾½å®:"></a>è¾½å®:</h1><p><code>202.96.75.68</code>     (ns.dcb.ln.cn)<br><code>202.96.64.68</code>     (ns.lnpta.net.cn)<br><code>202.96.69.38</code>     (dns.dl.lnpta.net.cn)   </p><h1 id="æ±Ÿè‹"><a href="#æ±Ÿè‹" class="headerlink" title="æ±Ÿè‹:"></a>æ±Ÿè‹:</h1><p><code>202.102.29.3</code>     (pub.jsinfo.net)<br><code>202.102.13.141</code>   (info.ptt.js.cn)<br><code>202.102.24.35</code>    (dns.nj-online.nj.js.cn)  </p><h1 id="å®‰å¾½ï¼š"><a href="#å®‰å¾½ï¼š" class="headerlink" title="å®‰å¾½ï¼š"></a>å®‰å¾½ï¼š</h1><p><code>202.102.199.68</code>   (ns.ahwhtel.net.cn)  </p><h1 id="å››å·"><a href="#å››å·" class="headerlink" title="å››å·:"></a>å››å·:</h1><p><code>61.139.2.69</code>      (ns.sc.cninfo.net)  </p><h1 id="é‡åº†"><a href="#é‡åº†" class="headerlink" title="é‡åº†:"></a>é‡åº†:</h1><p><code>61.128.128.68</code>    (cq.cta.net.cn)<br><code>61.128.192.4</code>     (cq.cta.net.cn)  </p><h1 id="æˆéƒ½"><a href="#æˆéƒ½" class="headerlink" title="æˆéƒ½:"></a>æˆéƒ½:</h1><p><code>202.98.96.68</code>      (ns.sccdppt.net.cn)  </p><h1 id="æ²³åŒ—"><a href="#æ²³åŒ—" class="headerlink" title="æ²³åŒ—:"></a>æ²³åŒ—:</h1><p><code>202.99.160.68</code>     (ns.hesjptt.net.cn)  </p><h1 id="ä¿å®š"><a href="#ä¿å®š" class="headerlink" title="ä¿å®š:"></a>ä¿å®š:</h1><p><code>202.99.160.68</code>     (sjzdns.heinfo.net)<br><code>202.99.166.4</code>      (tsdns.heinfo.net)  </p><h1 id="å±±è¥¿"><a href="#å±±è¥¿" class="headerlink" title="å±±è¥¿:"></a>å±±è¥¿:</h1><p><code>202.99.198.6</code>      (ns.sxyzptt.net.cn)  </p><h1 id="å‰æ—"><a href="#å‰æ—" class="headerlink" title="å‰æ—:"></a>å‰æ—:</h1><p><code>202.98.5.68</code>       (ns.jlccptt.net.cn)  </p><h1 id="å±±ä¸œ"><a href="#å±±ä¸œ" class="headerlink" title="å±±ä¸œ:"></a>å±±ä¸œ:</h1><p><code>202.102.152.3</code>     (dns1.sdjnptt.net.cn)<br><code>202.102.128.68</code>    (ns.sdjnptt.net.cn)  </p><h1 id="ç¦å»º"><a href="#ç¦å»º" class="headerlink" title="ç¦å»º:"></a>ç¦å»º:</h1><p><code>202.101.98.55</code>     (dns.fz.fj.cn)  </p><h1 id="æ¹–å—"><a href="#æ¹–å—" class="headerlink" title="æ¹–å—:"></a>æ¹–å—:</h1><p><code>202.103.100.206</code>    </p><h1 id="å¹¿è¥¿"><a href="#å¹¿è¥¿" class="headerlink" title="å¹¿è¥¿:"></a>å¹¿è¥¿:</h1><p><code>202.103.224.68</code>    (nsc0.gxnnptt.net.cn)<br><code>202.103.225.68</code>    (nsc.lzptt.gx.cn)  </p><h1 id="æ±Ÿè¥¿"><a href="#æ±Ÿè¥¿" class="headerlink" title="æ±Ÿè¥¿:"></a>æ±Ÿè¥¿:</h1><p><code>202.101.224.68</code>    (ns.jxncptt.net.cn)<br><code>202.101.226.68</code>    (ns.jxjjptt.net.cn)  </p><h1 id="äº‘å—"><a href="#äº‘å—" class="headerlink" title="äº‘å—:"></a>äº‘å—:</h1><p><code>202.98.160.68</code>      (ns.ynkmptt.net.cn)  </p><h1 id="æ²³å—"><a href="#æ²³å—" class="headerlink" title="æ²³å—:"></a>æ²³å—:</h1><p><code>202.102.227.68</code>     (zz.163.ppp)<br><code>202.102.224.68</code>     (ns1.hazzptt.net.cn)  </p><h1 id="æ–°ç–†"><a href="#æ–°ç–†" class="headerlink" title="æ–°ç–†:"></a>æ–°ç–†:</h1><p><code>61.128.97.73</code>   </p><h1 id="å¦é—¨"><a href="#å¦é—¨" class="headerlink" title="å¦é—¨:"></a>å¦é—¨:</h1><p><code>202.101.103.55</code>     (dns.xm.fj.cn)<br><code>202.101.103.54</code>     (dns2.xm.fj.cn)  </p><h1 id="å±±ä¸œ-1"><a href="#å±±ä¸œ-1" class="headerlink" title="å±±ä¸œ:"></a>å±±ä¸œ:</h1><p><code>202.102.134.68</code>     (ns1.sdqdptt.net.cn)  </p><h1 id="é•¿æ²™"><a href="#é•¿æ²™" class="headerlink" title="é•¿æ²™:"></a>é•¿æ²™:</h1><p><code>202.103.96.68</code>      (dns1.cs.hn.cn)  </p><h1 id="å„å¤§ç½‘ç«™DNSåˆ—è¡¨"><a href="#å„å¤§ç½‘ç«™DNSåˆ—è¡¨" class="headerlink" title="å„å¤§ç½‘ç«™DNSåˆ—è¡¨:"></a>å„å¤§ç½‘ç«™DNSåˆ—è¡¨:</h1><p>å¤©åºœçƒ­çº¿:          <code>61.139.2.69</code><br>é•¿æ˜¥163ï¼š          <code>202.98.0.68</code>      <code>202.98.3.68</code><br>263åœ¨çº¿ï¼š          <code>211.100.2.130</code>    <code>211.100.1.10</code>  </p><h1 id="ä¸­å›½ä¸‡ç½‘ï¼š"><a href="#ä¸­å›½ä¸‡ç½‘ï¼š" class="headerlink" title="ä¸­å›½ä¸‡ç½‘ï¼š"></a>ä¸­å›½ä¸‡ç½‘ï¼š</h1><p><code>218.244.147.40</code>    (dns1.hichina.com)<br><code>218.244.147.69</code>    (dns2.hichina.com)  </p><h1 id="æ–°ç½‘ï¼š"><a href="#æ–°ç½‘ï¼š" class="headerlink" title="æ–°ç½‘ï¼š"></a>æ–°ç½‘ï¼š</h1><p><code>211.99.199.194</code><br><code>211.99.199.195</code>   </p><h1 id="263IDCï¼š"><a href="#263IDCï¼š" class="headerlink" title="263IDCï¼š"></a>263IDCï¼š</h1><p><code>211.100.2.130</code>    (NS.263IDC.COM)<br><code>211.100.1.10</code>     (NSB.263IDC.COM)  </p><h1 id="æ•™è‚²ç½‘DNSæœåŠ¡å™¨"><a href="#æ•™è‚²ç½‘DNSæœåŠ¡å™¨" class="headerlink" title="æ•™è‚²ç½‘DNSæœåŠ¡å™¨:"></a>æ•™è‚²ç½‘DNSæœåŠ¡å™¨:</h1><p><code>202.114.64.2</code>     æ­¦å¤§DNS1 (ä¸€åŒº)<br><code>202.114.96.1</code>     æ­¦å¤§DNS2 (äºŒåŒº)<br><code>202.114.96.2</code>     æ­¦å¤§DNS3 (äºŒåŒº)<br><code>202.114.112.13</code>   æ­¦å¤§DNS4 (ä¸‰åŒº)  </p><p><code>202.114.0.242</code>    (server20.hust.edu.cn)    åå·¥DNS<br><code>202.112.0.35</code>     (dns.hust.edu.cn)         åå·¥DNS2<br><code>202.112.20.131</code>   (dns.whnet.edu.cn)        åä¸­åœ°åŒºç½‘ç»œä¸­å¿ƒDNS<br><code>166.111.8.28</code>     (dns-a.tsinghua.edu.cn)   æ¸…åDNS1<br><code>166.111.8.29</code>     (dns-b.tsinghua.edu.cn)   æ¸…åDNS2<br><code>166.111.8.30</code>     (dns.tsinghua.edu.cn)     æ¸…åDNS<br><code>202.117.0.20</code>     (dec3000.xjtu.edu.cn)     è¥¿äº¤DNS1<br><code>202.117.0.21</code>     (ns2.xjtu.edu.cn)         è¥¿äº¤DNS2<br><code>202.112.26.34</code>    (ä¸Šäº¤)<br><code>202.112.112.100</code>  (äººå¤§)<br><code>162.105.129.27</code>   (åŒ—å¤§)<br><code>202.203.128.33</code>   (cernetäº‘å—ä¸­å¿ƒä¸»dns)<br><code>202.115.64.33</code>    (è¥¿å—äº¤å¤§)<br><code>210.33.116.112</code>   (æµ™æ±Ÿç”µå¤§)<br><code>202.116.160.33</code>   (åå—å†œä¸š)<br><code>202.112.0.33</code>     (ååŒ—ç½‘)  </p><h1 id="é¦™æ¸¯"><a href="#é¦™æ¸¯" class="headerlink" title="é¦™æ¸¯:"></a>é¦™æ¸¯:</h1><p><code>205.252.144.228</code>  (ns1.netvigator.com)  </p><h1 id="æ¾³é—¨"><a href="#æ¾³é—¨" class="headerlink" title="æ¾³é—¨:"></a>æ¾³é—¨:</h1><p><code>202.175.3.8</code>      (vassun2.macau.ctm.net)  </p><h1 id="æ·±åœ³"><a href="#æ·±åœ³" class="headerlink" title="æ·±åœ³:"></a>æ·±åœ³:</h1><p><code>202.96.134.133</code>   (ns.shenzhen.gd.cn)<br><code>202.96.154.8</code>     (public.szonline.net)<br><code>202.96.154.15</code>    (ns.szonline.net)  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> DNS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…äº¤äº’æ“ä½œè¿œç¨‹ä¸»æœº</title>
      <link href="/posts/c6da.html"/>
      <url>/posts/c6da.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>æ‡’  </p><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum -y <span class="token function">install</span> sshpass   <span class="token comment"># ç›´æ¥å®‰è£…</span><span class="token function">apt-get</span> <span class="token function">install</span> sshpass   <span class="token comment"># ubuntuå®‰è£…</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åº”ç”¨èŒƒå›´ï¼šå¯ä»¥åœ¨å‘½ä»¤è¡Œç›´æ¥ä½¿ç”¨å¯†ç æ¥è¿›è¡Œè¿œç¨‹è¿æ¥å’Œè¿œç¨‹æ‹‰å–æ–‡ä»¶ã€‚<br>ä½¿ç”¨å‰æï¼šå¯¹äºæœªè¿æ¥è¿‡çš„ä¸»æœºã€‚è€Œåˆä¸è¾“å…¥yesè¿›è¡Œç¡®è®¤ï¼Œéœ€è¦è¿›è¡ŒsshdæœåŠ¡çš„ä¼˜åŒ–(æ–‡æœ«æœ‰å…¶å®ƒè§£å†³æ–¹æ¡ˆ)ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># vi /etc/ssh/ssh_config   </span>StrictHostKeyChecking no<span class="token comment"># vi /etc/ssh/sshd_config  </span>GSSAPIAuthentication noUseDNS no<span class="token comment"># service sshd restart</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li><p>ç›´æ¥è¿œç¨‹è¿æ¥æŸå°ä¸»æœºï¼š<br><code>sshpass -p xxx ssh root@192.168.11.11</code>  </p></li><li><p>æœ¬åœ°æ‰§è¡Œè¿œç¨‹æœºå™¨çš„å‘½ä»¤ï¼š<br><code>sshpass -p xxx ssh root@192.168.11.11 &quot;ethtool eth0&quot;</code>  </p></li><li><p>è¿œç¨‹è¿æ¥æŒ‡å®šsshçš„ç«¯å£ï¼š<br><code>sshpass -p 123456 ssh -p 1000 root@192.168.11.11</code> (å½“è¿œç¨‹ä¸»æœºä¸æ˜¯é»˜è®¤çš„22ç«¯å£æ—¶å€™)  </p></li><li><p>ä»å¯†ç æ–‡ä»¶è¯»å–æ–‡ä»¶å†…å®¹ä½œä¸ºå¯†ç å»è¿œç¨‹è¿æ¥ä¸»æœº (sshpassä¸å¯ä»¥ç›´æ¥æ¥å¸¦ç‰¹æ®Šå­—ç¬¦æ„ä¹‰çš„å¯†ç ï¼Œéœ€è¦è½¬ä¹‰æˆ–è€…ç”¨å°æ‹¬å·ï¼Œæˆ–è€…æŒ‡å®šæ–‡ä»¶çš„æ–¹å¼æ¥è¿æ¥éƒ½å¯ä»¥è§„é¿è¿™ä¸ªé—®é¢˜ã€‚)<br><code>sshpass -f xxx.txt  ssh root@192.168.11.11</code>  </p></li><li><p>ä»è¿œç¨‹ä¸»æœºä¸Šæ‹‰å–æ–‡ä»¶åˆ°æœ¬åœ°<br><code>sshpass -p &#39;123456&#39; scp root@host_ip:/home/test/t ./tmp/</code><br>ä»æœ¬åœ°ä¸Šä¼ æ–‡ä»¶åˆ°è¿œç¨‹ä¸»æœº<br><code>sshpass -p &#39;123456&#39; scp ./tmp/ root@host_ip:/home/test/t</code>  </p></li><li><p>ä½¿ç”¨sshè¿æ¥è¿œç¨‹ä¸»æœºæ—¶åŠ ä¸Šâ€-o StrictHostKeyChecking=noâ€çš„é€‰é¡¹ï¼Œå¦‚ä¸‹ï¼šï¼ˆæ¨èï¼ï¼ï¼ï¼‰</p><pre class="line-numbers language-none"><code class="language-none">1. åšæ³•æ˜¯ä½¿ç”¨-o è¿™ä¸ªå‚æ•°ï¼Œåœ¨ssh&#x2F;scpé‡ŒåŠ ä¸Š -o &quot;StrictHostKeyChecking no&quot; å³å¯è·³è¿‡è¿™ä¸ªyes&#x2F;noè¯¢é—®ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œä¾‹ï¼šUse the -o optionï¼šscp -o &quot;StrictHostKeyChecking no&quot; 1.txt user@host:1.txt ssh -o &quot;StrictHostKeyChecking no&quot; user@host2. ä¸€ä¸ªå½»åº•å»æ‰è¿™ä¸ªæç¤ºçš„æ–¹æ³•æ˜¯ï¼Œä¿®æ”¹&#x2F;etc&#x2F;ssh&#x2F;ssh_configæ–‡ä»¶ï¼ˆæˆ–$HOME&#x2F;.ssh&#x2F;configï¼‰ä¸­çš„é…ç½®ï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤è¡Œé…ç½®ï¼šä¸€èˆ¬ä¸ºï¼šStrictHostKeyChecking askå¯æ”¹ä¸ºï¼šStrictHostKeyChecking no<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> sshpass </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>centos8æ—¶é—´åŒæ­¥</title>
      <link href="/posts/db88.html"/>
      <url>/posts/db88.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="æŠ¥é”™ï¼š"><a href="#æŠ¥é”™ï¼š" class="headerlink" title="æŠ¥é”™ï¼š"></a>æŠ¥é”™ï¼š</h1><p><code>yum -y install ntpdate</code>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">æœªæ‰¾åˆ°åŒ¹é…çš„å‚æ•°ï¼š ntpdateé”™è¯¯ï¼šæ²¡æœ‰ä»»ä½•åŒ¹é…: ntpdate<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="è§£å†³æ€è·¯ï¼š"><a href="#è§£å†³æ€è·¯ï¼š" class="headerlink" title="è§£å†³æ€è·¯ï¼š"></a>è§£å†³æ€è·¯ï¼š</h1><ol><li>é…ç½®epelæºï¼Œé˜¿é‡Œäº‘Baseæºï¼ˆæµ‹è¯•ä¸è¡Œï¼‰  </li><li>å®‰è£…centos7çš„ntpdateï¼ˆåŸå› centos8å®‰è£…çš„dockerç‰ˆæœ¬æ˜¯centos7ç³»ç»Ÿç‰ˆæœ¬çš„ï¼‰ï¼ˆæœªæµ‹è¯•ï¼‰  </li><li>æ›´æ”¹/etc/chrony.confæˆæ—¶åœ°å€210.72.145.44ï¼ˆä¸­å›½å›½å®¶æˆæ—¶ä¸­å¿ƒæœåŠ¡å™¨ï¼‰ï¼ˆæµ‹è¯•é€šè¿‡ï¼‰  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl restart chronyd.servicesystemctl <span class="token builtin class-name">enable</span> chronyd.service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>ç„¶åé€šè¿‡dateæŸ¥è¯¢æ—¶é—´  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hwclock -s   <span class="token comment"># ä»ç¡¬ä»¶æ—¶é’Ÿè®¾ç½®ç³»ç»Ÿæ—¶é—´</span>hwclock -w   <span class="token comment"># ä»å½“å‰ç³»ç»Ÿæ—¶é—´è®¾ç½®ç¡¬ä»¶æ—¶é’Ÿ</span>hwclock --systz   <span class="token comment"># åŸºäºå½“å‰æ—¶åŒºè®¾ç½®ç³»ç»Ÿæ—¶é—´</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ol><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> error </tag>
            
            <tag> ntpdate </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>websocket ssl</title>
      <link href="/posts/972c.html"/>
      <url>/posts/972c.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>Workermanå¦‚ä½•åˆ›å»ºä¸€ä¸ªwssæœåŠ¡ï¼Œä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥ç”¨è¿‡wssåæ¥è¿æ¥é€šè®¯ï¼Œæ¯”å¦‚åœ¨å¾®ä¿¡å°ç¨‹åºä¸­è¿æ¥æœåŠ¡ç«¯ã€‚</p><p>wssåè®®å®é™…æ˜¯websocket+SSLï¼Œå°±æ˜¯åœ¨websocketåè®®ä¸ŠåŠ å…¥SSLå±‚ï¼Œç±»ä¼¼https(http+SSL)ã€‚ æ‰€ä»¥åªéœ€è¦åœ¨websocketåè®®çš„åŸºç¡€ä¸Šå¼€å¯SSLå³å¯æ”¯æŒwssåè®®ã€‚</p><p>æ–¹æ³•ä¸€ ï¼Œç›´æ¥ç”¨Workermanå¼€å¯SSL<br>å‡†å¤‡å·¥ä½œï¼š</p><p>1ã€Workermanç‰ˆæœ¬ä¸å°äº3.3.7</p><p>2ã€PHPå®‰è£…äº†opensslæ‰©å±•</p><p>3ã€å·²ç»ç”³è¯·äº†è¯ä¹¦ï¼ˆpem/crtæ–‡ä»¶åŠkeyæ–‡ä»¶ï¼‰æ”¾åœ¨ç£ç›˜ä»»æ„ç›®å½•</p><p>ä»£ç ï¼š</p><pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span><span class="token keyword">require_once</span> <span class="token constant">__DIR__</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'/Workerman/Autoloader.php'</span><span class="token punctuation">;</span><span class="token keyword">use</span> <span class="token package">Workerman<span class="token punctuation">\</span>Worker</span><span class="token punctuation">;</span><span class="token comment">// è¯ä¹¦æœ€å¥½æ˜¯ç”³è¯·çš„è¯ä¹¦</span><span class="token variable">$context</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>    <span class="token comment">// æ›´å¤šsslé€‰é¡¹è¯·å‚è€ƒæ‰‹å†Œ http://php.net/manual/zh/context.ssl.php</span>    <span class="token string single-quoted-string">'ssl'</span> <span class="token operator">=></span> <span class="token keyword">array</span><span class="token punctuation">(</span>        <span class="token comment">// è¯·ä½¿ç”¨ç»å¯¹è·¯å¾„</span>        <span class="token string single-quoted-string">'local_cert'</span>                 <span class="token operator">=></span> <span class="token string single-quoted-string">'ç£ç›˜è·¯å¾„/server.pem'</span><span class="token punctuation">,</span> <span class="token comment">// ä¹Ÿå¯ä»¥æ˜¯crtæ–‡ä»¶</span>        <span class="token string single-quoted-string">'local_pk'</span>                   <span class="token operator">=></span> <span class="token string single-quoted-string">'ç£ç›˜è·¯å¾„/server.key'</span><span class="token punctuation">,</span>        <span class="token string single-quoted-string">'verify_peer'</span>                <span class="token operator">=></span> <span class="token constant boolean">false</span><span class="token punctuation">,</span>        <span class="token comment">// 'allow_self_signed' => true, //å¦‚æœæ˜¯è‡ªç­¾åè¯ä¹¦éœ€è¦å¼€å¯æ­¤é€‰é¡¹</span>    <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è¿™é‡Œè®¾ç½®çš„æ˜¯websocketåè®®ï¼ˆç«¯å£ä»»æ„ï¼Œä½†æ˜¯éœ€è¦ä¿è¯æ²¡è¢«å…¶å®ƒç¨‹åºå ç”¨ï¼‰</span><span class="token variable">$worker</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'websocket://0.0.0.0:443'</span><span class="token punctuation">,</span> <span class="token variable">$context</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// è®¾ç½®transportå¼€å¯sslï¼Œwebsocket+sslå³wss</span><span class="token variable">$worker</span><span class="token operator">-></span><span class="token property">transport</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'ssl'</span><span class="token punctuation">;</span><span class="token variable">$worker</span><span class="token operator">-></span><span class="token property">onMessage</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$con</span><span class="token punctuation">,</span> <span class="token variable">$msg</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token variable">$con</span><span class="token operator">-></span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token class-name static-context">Worker</span><span class="token operator">::</span><span class="token function">runAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€šè¿‡ä»¥ä¸Šçš„ä»£ç ï¼ŒWorkermanå°±ç›‘å¬äº†wssåè®®ï¼Œå®¢æˆ·ç«¯å°±å¯ä»¥é€šè¿‡wssåè®®æ¥è¿æ¥workermanå®ç°å®‰å…¨å³æ—¶é€šè®¯äº†ã€‚</p><p>æµ‹è¯•</p><p>æ‰“å¼€chromeæµè§ˆå™¨ï¼ŒæŒ‰F12æ‰“å¼€è°ƒè¯•æ§åˆ¶å°ï¼Œåœ¨Consoleä¸€æ è¾“å…¥(æˆ–è€…æŠŠä¸‹é¢ä»£ç æ”¾å…¥åˆ°htmlé¡µé¢ç”¨jsè¿è¡Œ)</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">// è¯ä¹¦æ˜¯ä¼šæ£€æŸ¥åŸŸåçš„ï¼Œè¯·ä½¿ç”¨åŸŸåè¿æ¥ws = new WebSocket("wss://åŸŸå");ws.onopen = function() &#123;    alert("è¿æ¥æˆåŠŸ");    ws.send('tom');    alert("ç»™æœåŠ¡ç«¯å‘é€ä¸€ä¸ªå­—ç¬¦ä¸²ï¼štom");&#125;;ws.onmessage = function(e) &#123;    alert("æ”¶åˆ°æœåŠ¡ç«¯çš„æ¶ˆæ¯ï¼š" + e.data);&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼š<br>1ã€å¦‚æœæ— æ³•å¯åŠ¨ï¼Œåˆ™ä¸€èˆ¬æ˜¯443ç«¯å£è¢«å ç”¨ï¼Œè¯·æ”¹æˆå…¶å®ƒç«¯å£ï¼Œæ³¨æ„æ”¹æˆå…¶å®ƒç«¯å£åå®¢æˆ·ç«¯è¿æ¥æ—¶éœ€è¦å¸¦ä¸Šç«¯å£å·ï¼Œå®¢æˆ·ç«¯è¿æ¥æ—¶åœ°å€ç±»ä¼¼wss://domain.com:xxx ï¼Œxxxä¸ºç«¯å£å·ã€‚å¦‚æœå¿…é¡»ä½¿ç”¨443ç«¯å£è¯·ä½¿ç”¨æ–¹æ³•äºŒä»£ç†çš„æ–¹å¼å®ç°wssã€‚<br>2ã€wssç«¯å£åªèƒ½é€šè¿‡wssåè®®è®¿é—®ï¼Œwsæ— æ³•è®¿é—®wssç«¯å£ã€‚<br>3ã€è¯ä¹¦ä¸€èˆ¬æ˜¯ä¸åŸŸåç»‘å®šçš„ï¼Œæ‰€ä»¥æµ‹è¯•çš„æ—¶å€™å®¢æˆ·ç«¯è¯·ä½¿ç”¨åŸŸåè¿æ¥ï¼Œä¸è¦ä½¿ç”¨ipå»è¿ã€‚<br>4ã€å¦‚æœå‡ºç°æ— æ³•è®¿é—®çš„æƒ…å†µï¼Œè¯·æ£€æŸ¥æœåŠ¡å™¨é˜²ç«å¢™ã€‚<br>5ã€æ­¤æ–¹æ³•è¦æ±‚PHPç‰ˆæœ¬&gt;=5.6ï¼Œå› ä¸ºå¾®ä¿¡å°ç¨‹åºè¦æ±‚tls1.2ï¼Œè€ŒPHP5.6ä»¥ä¸‹ç‰ˆæœ¬ä¸æ”¯æŒtls1.2ã€‚</p><p>æ–¹æ³•äºŒã€åˆ©ç”¨nginx/apacheä»£ç†wss<br>é™¤äº†ç”¨Workermanè‡ªèº«çš„SSLï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨nginx/apacheä½œä¸ºwssä»£ç†è½¬å‘ç»™workermanï¼ˆæ³¨æ„æ­¤æ–¹æ³•workermanéƒ¨åˆ†åƒä¸‡ä¸è¦è®¾ç½®sslï¼Œå¦åˆ™å°†æ— æ³•è¿æ¥ï¼‰ã€‚</p><p>é€šè®¯åŸç†åŠæµç¨‹æ˜¯ï¼š<br>1ã€å®¢æˆ·ç«¯å‘èµ·wssè¿æ¥è¿åˆ°nginx/apache<br>2ã€nginx/apacheå°†wssåè®®çš„æ•°æ®è½¬æ¢æˆwsåè®®æ•°æ®å¹¶è½¬å‘åˆ°Workermançš„websocketåè®®ç«¯å£<br>3ã€Workermanæ”¶åˆ°æ•°æ®ååšä¸šåŠ¡é€»è¾‘å¤„ç†<br>4ã€Workermanç»™å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯æ—¶ï¼Œåˆ™æ˜¯ç›¸åçš„è¿‡ç¨‹ï¼Œæ•°æ®ç»è¿‡nginx/apacheè½¬æ¢æˆwssåè®®ç„¶åå‘ç»™å®¢æˆ·ç«¯  </p><p>å‰ææ¡ä»¶åŠå‡†å¤‡å·¥ä½œï¼š<br>1ã€å·²ç»å®‰è£…nginxï¼Œç‰ˆæœ¬ä¸ä½äº1.3<br>2ã€å‡è®¾Workermanç›‘å¬çš„æ˜¯8282ç«¯å£(websocketåè®®)<br>3ã€å·²ç»ç”³è¯·äº†è¯ä¹¦ï¼ˆpem/crtæ–‡ä»¶åŠkeyæ–‡ä»¶ï¼‰æ”¾åœ¨äº†/etc/nginx/conf.d/sslä¸‹<br>4ã€æ‰“ç®—åˆ©ç”¨nginxå¼€å¯443ç«¯å£å¯¹å¤–æä¾›wssä»£ç†æœåŠ¡ï¼ˆç«¯å£å¯ä»¥æ ¹æ®éœ€è¦ä¿®æ”¹ï¼‰<br>5ã€nginxä¸€èˆ¬ä½œä¸ºç½‘ç«™æœåŠ¡å™¨è¿è¡Œç€å…¶å®ƒæœåŠ¡ï¼Œä¸ºäº†ä¸å½±å“åŸæ¥çš„ç«™ç‚¹ä½¿ç”¨ï¼Œè¿™é‡Œä½¿ç”¨åœ°å€ åŸŸå/wss ä½œä¸ºwssçš„ä»£ç†å…¥å£ã€‚ä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯è¿æ¥åœ°å€ä¸º <code>wss://åŸŸå/wss</code>  </p><p>nginxé…ç½®ç±»ä¼¼å¦‚ä¸‹ï¼š  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">server &#123;  listen 443;  ssl on;  ssl_certificate &#x2F;etc&#x2F;ssl&#x2F;server.pem;  ssl_certificate_key &#x2F;etc&#x2F;ssl&#x2F;server.key;  ssl_session_timeout 5m;  ssl_session_cache shared:SSL:50m;  ssl_protocols SSLv3 SSLv2 TLSv1 TLSv1.1 TLSv1.2;  ssl_ciphers ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;  location &#x2F;wss  &#123;    proxy_pass http:&#x2F;&#x2F;127.0.0.1:8282;    proxy_http_version 1.1;    proxy_set_header Upgrade $http_upgrade;    proxy_set_header Connection &quot;Upgrade&quot;;    proxy_set_header X-Real-IP $remote_addr;  &#125;  # location &#x2F; &#123;&#125; ç«™ç‚¹çš„å…¶å®ƒé…ç½®...&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•</p><pre class="line-numbers language-html" data-language="html"><code class="language-html">// è¯ä¹¦æ˜¯ä¼šæ£€æŸ¥åŸŸåçš„ï¼Œè¯·ä½¿ç”¨åŸŸåè¿æ¥ws = new WebSocket("wss://åŸŸå/wss");ws.onopen = function() &#123;    alert("è¿æ¥æˆåŠŸ");    ws.send('tom');    alert("ç»™æœåŠ¡ç«¯å‘é€ä¸€ä¸ªå­—ç¬¦ä¸²ï¼štom");&#125;;ws.onmessage = function(e) &#123;    alert("æ”¶åˆ°æœåŠ¡ç«¯çš„æ¶ˆæ¯ï¼š" + e.data);&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>åˆ©ç”¨apacheä»£ç†wss<br>ä¹Ÿå¯ä»¥åˆ©ç”¨apacheä½œä¸ºwssä»£ç†è½¬å‘ç»™workermanï¼ˆæ³¨æ„å¦‚ä½¿ç”¨apacheä»£ç†SSLï¼Œåˆ™workermanéƒ¨åˆ†åƒä¸‡ä¸è¦è®¾ç½®sslï¼Œå¦åˆ™å°†æ— æ³•è¿æ¥ï¼‰ã€‚  </p><p>å‡†å¤‡å·¥ä½œï¼š<br>1ã€GatewayWorker ç›‘å¬ 8282 ç«¯å£(websocketåè®®)<br>2ã€å·²ç»ç”³è¯·äº†sslè¯ä¹¦, æ”¾åœ¨äº†/server/httpd/cert/ ä¸‹<br>3ã€åˆ©ç”¨apacheè½¬å‘443ç«¯å£è‡³æŒ‡å®šç«¯å£8282<br>4ã€httpd-ssl.conf å·²åŠ è½½<br>5ã€openssl å·²å®‰è£…</p><p>å¯ç”¨ proxy_wstunnel_module æ¨¡å—  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">LoadModule proxy_module modules&#x2F;mod_proxy.soLoadModule proxy_wstunnel_module modules&#x2F;mod_proxy_wstunnel.so<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>é…ç½®SSLåŠä»£ç†  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">#extra&#x2F;httpd-ssl.confDocumentRoot &quot;&#x2F;ç½‘ç«™&#x2F;ç›®å½•&quot;ServerName åŸŸå# Proxy ConfigSSLProxyEngine onProxyRequests OffProxyPass &#x2F;wss ws:&#x2F;&#x2F;127.0.0.1:8282&#x2F;wssProxyPassReverse &#x2F;wss ws:&#x2F;&#x2F;127.0.0.1:8282&#x2F;wss# æ·»åŠ  SSL åè®®æ”¯æŒåè®®,å»æ‰ä¸å®‰å…¨çš„åè®®SSLProtocol all -SSLv2 -SSLv3# ä¿®æ”¹åŠ å¯†å¥—ä»¶å¦‚ä¸‹SSLCipherSuite HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUMSSLHonorCipherOrder on# è¯ä¹¦å…¬é’¥é…ç½®SSLCertificateFile &#x2F;server&#x2F;httpd&#x2F;cert&#x2F;your.pem# è¯ä¹¦ç§é’¥é…ç½®SSLCertificateKeyFile &#x2F;server&#x2F;httpd&#x2F;cert&#x2F;your.key# è¯ä¹¦é“¾é…ç½®,SSLCertificateChainFile &#x2F;server&#x2F;httpd&#x2F;cert&#x2F;chain.pem<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æµ‹è¯•  </p><pre class="line-numbers language-html" data-language="html"><code class="language-html">// è¯ä¹¦æ˜¯ä¼šæ£€æŸ¥åŸŸåçš„ï¼Œè¯·ä½¿ç”¨åŸŸåè¿æ¥ws = new WebSocket("wss://åŸŸå/wss");ws.onopen = function() &#123;    alert("è¿æ¥æˆåŠŸ");    ws.send('tom');    alert("ç»™æœåŠ¡ç«¯å‘é€ä¸€ä¸ªå­—ç¬¦ä¸²ï¼štom");&#125;;ws.onmessage = function(e) &#123;    alert("æ”¶åˆ°æœåŠ¡ç«¯çš„æ¶ˆæ¯ï¼š" + e.data);&#125;;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a href="http://doc.workerman.net/faq/secure-websocket-server.html">å‚è€ƒé“¾æ¥</a>ï¼ˆæ­¤æ–¹æ³•æœªéªŒè¯ï¼‰</p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> nginx </tag>
            
            <tag> apache </tag>
            
            <tag> wss </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vscodeåˆ›å»ºvueé¡¹ç›®</title>
      <link href="/posts/3aa0.html"/>
      <url>/posts/3aa0.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="å‡è®¾ä½ å·²å®‰è£…å®Œvscodeå’Œnodejs"><a href="#å‡è®¾ä½ å·²å®‰è£…å®Œvscodeå’Œnodejs" class="headerlink" title="å‡è®¾ä½ å·²å®‰è£…å®Œvscodeå’Œnodejs"></a>å‡è®¾ä½ å·²å®‰è£…å®Œvscodeå’Œnodejs</h1><p><em>åœ¨ç”µè„‘ç®¡å®¶è‡ªå¸¦çš„è½¯ä»¶ç®¡ç†é‡Œé¢å¯ä»¥ä¸‹è½½</em>  </p><h2 id="æ–°å»ºæ–‡ä»¶å¤¹ï¼Œç”¨vscodeæ‰“å¼€"><a href="#æ–°å»ºæ–‡ä»¶å¤¹ï¼Œç”¨vscodeæ‰“å¼€" class="headerlink" title="æ–°å»ºæ–‡ä»¶å¤¹ï¼Œç”¨vscodeæ‰“å¼€"></a>æ–°å»ºæ–‡ä»¶å¤¹ï¼Œç”¨vscodeæ‰“å¼€</h2><h2 id="å®‰è£…vue-cli"><a href="#å®‰è£…vue-cli" class="headerlink" title="å®‰è£…vue-cli"></a>å®‰è£…vue-cli</h2><p><code>npm install -g vue-cli</code>  </p><h2 id="å®‰è£…webpackï¼Œæ‰“åŒ…js"><a href="#å®‰è£…webpackï¼Œæ‰“åŒ…js" class="headerlink" title="å®‰è£…webpackï¼Œæ‰“åŒ…js"></a>å®‰è£…webpackï¼Œæ‰“åŒ…js</h2><p><code>npm install -g webpack</code>  </p><h1 id="æ–°å»ºvueé¡¹ç›®"><a href="#æ–°å»ºvueé¡¹ç›®" class="headerlink" title="æ–°å»ºvueé¡¹ç›®"></a>æ–°å»ºvueé¡¹ç›®</h1><p><code>vue init webpack myvue</code>  </p><h2 id="æ ¹æ®æç¤ºä¸€æ­¥æ­¥å¾€ä¸‹èµ°ï¼Œçœ‹ä¸æ‡‚ä¹Ÿå¯ä»¥ç›´æ¥å›è½¦"><a href="#æ ¹æ®æç¤ºä¸€æ­¥æ­¥å¾€ä¸‹èµ°ï¼Œçœ‹ä¸æ‡‚ä¹Ÿå¯ä»¥ç›´æ¥å›è½¦" class="headerlink" title="æ ¹æ®æç¤ºä¸€æ­¥æ­¥å¾€ä¸‹èµ°ï¼Œçœ‹ä¸æ‡‚ä¹Ÿå¯ä»¥ç›´æ¥å›è½¦"></a>æ ¹æ®æç¤ºä¸€æ­¥æ­¥å¾€ä¸‹èµ°ï¼Œçœ‹ä¸æ‡‚ä¹Ÿå¯ä»¥ç›´æ¥å›è½¦</h2><h2 id="è¿›å…¥myvueæ–‡ä»¶å¤¹"><a href="#è¿›å…¥myvueæ–‡ä»¶å¤¹" class="headerlink" title="è¿›å…¥myvueæ–‡ä»¶å¤¹"></a>è¿›å…¥myvueæ–‡ä»¶å¤¹</h2><p><code>cd myvue</code>  </p><h2 id="è¿è¡Œé¡¹ç›®"><a href="#è¿è¡Œé¡¹ç›®" class="headerlink" title="è¿è¡Œé¡¹ç›®"></a>è¿è¡Œé¡¹ç›®</h2><p><code>npm run dev</code>  </p><h2 id="è®¿é—®"><a href="#è®¿é—®" class="headerlink" title="è®¿é—®"></a>è®¿é—®</h2><p><code>http://localhost:8080</code>  </p><h2 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h2><p><code>npm run build</code>  </p><h2 id="è®¿é—®æ‰“åŒ…å¥½çš„é¡¹ç›®"><a href="#è®¿é—®æ‰“åŒ…å¥½çš„é¡¹ç›®" class="headerlink" title="è®¿é—®æ‰“åŒ…å¥½çš„é¡¹ç›®"></a>è®¿é—®æ‰“åŒ…å¥½çš„é¡¹ç›®</h2><h3 id="å…ˆè®¾ç½®iisæœåŠ¡å™¨"><a href="#å…ˆè®¾ç½®iisæœåŠ¡å™¨" class="headerlink" title="å…ˆè®¾ç½®iisæœåŠ¡å™¨"></a>å…ˆè®¾ç½®iisæœåŠ¡å™¨</h3><h3 id="åœ¨æœç´¢æ¡†é‡Œé¢æœç´¢"><a href="#åœ¨æœç´¢æ¡†é‡Œé¢æœç´¢" class="headerlink" title="åœ¨æœç´¢æ¡†é‡Œé¢æœç´¢"></a>åœ¨æœç´¢æ¡†é‡Œé¢æœç´¢</h3><p><img src="/medias/drawing-bed/notes/vue0.jpg">  </p><h3 id="å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½"><a href="#å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½" class="headerlink" title="å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½"></a>å¯ç”¨æˆ–å…³é—­WindowsåŠŸèƒ½</h3><p><img src="/medias/drawing-bed/notes/vue1.jpg">  </p><h3 id="ç‚¹å‡»Internet-Information-Serviceså‡ºç°é»‘æ¡†å³å¯ï¼Œç¡®å®šé€€å‡º"><a href="#ç‚¹å‡»Internet-Information-Serviceså‡ºç°é»‘æ¡†å³å¯ï¼Œç¡®å®šé€€å‡º" class="headerlink" title="ç‚¹å‡»Internet Information Serviceså‡ºç°é»‘æ¡†å³å¯ï¼Œç¡®å®šé€€å‡º"></a>ç‚¹å‡»Internet Information Serviceså‡ºç°é»‘æ¡†å³å¯ï¼Œç¡®å®šé€€å‡º</h3><p><img src="/medias/drawing-bed/notes/vue2.jpg">  </p><h3 id="æœç´¢iisï¼Œè¿›å…¥IISç®¡ç†å™¨"><a href="#æœç´¢iisï¼Œè¿›å…¥IISç®¡ç†å™¨" class="headerlink" title="æœç´¢iisï¼Œè¿›å…¥IISç®¡ç†å™¨"></a>æœç´¢iisï¼Œè¿›å…¥IISç®¡ç†å™¨</h3><p><img src="/medias/drawing-bed/notes/vue3.jpg">  </p><h3 id="é¡ºåºä»‹ç»"><a href="#é¡ºåºä»‹ç»" class="headerlink" title="é¡ºåºä»‹ç»"></a>é¡ºåºä»‹ç»</h3><p><img src="/medias/drawing-bed/notes/vue4.jpg">  </p><ol><li>ç‚¹å‡»è¿™ä¸ª<code>&gt;</code>ç¬¦å·  </li><li>ç‚¹å‡»<code>ç½‘ç«™</code>  </li><li>ç‚¹å‡»<code>æ¨ªæ¡</code>ä»»æ„ä½ç½®  </li><li>ç‚¹å‡»<code>åŸºæœ¬è®¾ç½®</code>  </li><li>ç‚¹å‡»<code>è¿æ¥ä¸º</code>  </li><li>ç‚¹å‡»<code>ç‰¹å®šç”¨æˆ·``è®¾ç½®</code>  </li><li>å¡«å†™å½“å‰<code>ç”¨æˆ·å¯†ç </code>ï¼Œæœªæµ‹è¯•PINæ˜¯å¦å¯è¡Œ  </li><li>é€‰æ‹©åˆšæ‰<code>æ‰“åŒ…ç”Ÿæˆ</code>çš„<code>dist</code>ç›®å½•  </li><li><code>æµ‹è¯•</code>ä¸€ä¸‹  </li><li>æµ‹è¯•ä¸é€šè¿‡ï¼Œå°è¯•<code>é‡å¯</code>ä¸€ä¸‹  <h2 id="æµè§ˆå™¨è®¿é—®"><a href="#æµè§ˆå™¨è®¿é—®" class="headerlink" title="æµè§ˆå™¨è®¿é—®"></a>æµè§ˆå™¨è®¿é—®</h2><code>http://localhost</code>  </li></ol><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockeræœ¬åœ°ç§æœ‰ä»“åº“</title>
      <link href="/posts/ebe4.html"/>
      <url>/posts/ebe4.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="docker-registry-ç”Ÿæˆæœ¬åœ°ç§æœ‰é•œåƒåº“"><a href="#docker-registry-ç”Ÿæˆæœ¬åœ°ç§æœ‰é•œåƒåº“" class="headerlink" title="docker registry ç”Ÿæˆæœ¬åœ°ç§æœ‰é•œåƒåº“"></a>docker registry ç”Ÿæˆæœ¬åœ°ç§æœ‰é•œåƒåº“</h1><h2 id="è·å–-registry-é•œåƒ"><a href="#è·å–-registry-é•œåƒ" class="headerlink" title="è·å– registryã€€é•œåƒ"></a>è·å– registryã€€é•œåƒ</h2><p><code>docker pull registry</code></p><h2 id="è¿è¡Œåˆ›å»ºå®¹å™¨ï¼Œ-var-lib-registryæŒ‚è½½åˆ°æœ¬åœ°"><a href="#è¿è¡Œåˆ›å»ºå®¹å™¨ï¼Œ-var-lib-registryæŒ‚è½½åˆ°æœ¬åœ°" class="headerlink" title="è¿è¡Œåˆ›å»ºå®¹å™¨ï¼Œ/var/lib/registryæŒ‚è½½åˆ°æœ¬åœ°"></a>è¿è¡Œåˆ›å»ºå®¹å™¨ï¼Œ/var/lib/registryæŒ‚è½½åˆ°æœ¬åœ°</h2><p><code>docker run -d -p 80:5000 --restart=always --name registry -v /opt/myregistry:/var/lib/registry registry</code></p><h2 id="æ–°å¢æœ¬åœ°é•œåƒä»“åº“åœ°å€"><a href="#æ–°å¢æœ¬åœ°é•œåƒä»“åº“åœ°å€" class="headerlink" title="æ–°å¢æœ¬åœ°é•œåƒä»“åº“åœ°å€"></a>æ–°å¢æœ¬åœ°é•œåƒä»“åº“åœ°å€</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> <span class="token operator">></span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;</span> <span class="token string">EOF&#123;  "registry-mirrors": ["https://fogd2pyo.mirror.aliyuncs.com"],  "insecure-registries": ["docker.registry.com"]&#125;EOF</span><span class="token assign-left variable">IP</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ip</span> a <span class="token operator">|</span> <span class="token function">grep</span> -E <span class="token string">"^    inet .* ens| eth.*$"</span> <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token builtin class-name">:</span> <span class="token operator">|</span> <span class="token function">awk</span> -F<span class="token string">' '</span> <span class="token string">'&#123;print $2&#125;'</span> <span class="token operator">|</span> <span class="token function">awk</span> -F/ <span class="token string">'&#123;print $1&#125;'</span><span class="token variable">`</span></span><span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$IP</span> docker.registry.com"</span> <span class="token operator">>></span> /etc/hosts<span class="token builtin class-name">echo</span> <span class="token string">"å…¶ä»–æœºå™¨è¯·åœ¨hostsä¸­æ˜ å°„ <span class="token variable">$IP</span> docker.registry.com"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é‡å¯docker"><a href="#é‡å¯docker" class="headerlink" title="é‡å¯docker"></a>é‡å¯docker</h2><p>systemctl daemon-reload<br>systemctl restart docker</p><h2 id="è·å–nginxé•œåƒ"><a href="#è·å–nginxé•œåƒ" class="headerlink" title="è·å–nginxé•œåƒ"></a>è·å–nginxé•œåƒ</h2><p>docker pull nginx</p><h2 id="é‡æ–°æ‰“ä¸Šæœ¬åœ°çš„ä»“åº“çš„tag"><a href="#é‡æ–°æ‰“ä¸Šæœ¬åœ°çš„ä»“åº“çš„tag" class="headerlink" title="é‡æ–°æ‰“ä¸Šæœ¬åœ°çš„ä»“åº“çš„tag"></a>é‡æ–°æ‰“ä¸Šæœ¬åœ°çš„ä»“åº“çš„tag</h2><p>docker tag nginx docker.registry.com/nginx</p><h2 id="å°†æ‰“å¥½æ ‡ç­¾çš„é•œåƒpushåˆ°æœ¬åœ°ä»“åº“"><a href="#å°†æ‰“å¥½æ ‡ç­¾çš„é•œåƒpushåˆ°æœ¬åœ°ä»“åº“" class="headerlink" title="å°†æ‰“å¥½æ ‡ç­¾çš„é•œåƒpushåˆ°æœ¬åœ°ä»“åº“"></a>å°†æ‰“å¥½æ ‡ç­¾çš„é•œåƒpushåˆ°æœ¬åœ°ä»“åº“</h2><p>docker push docker.registry.com/nginx</p><h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><h3 id="curlè®¿é—®"><a href="#curlè®¿é—®" class="headerlink" title="curlè®¿é—®"></a>curlè®¿é—®</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> http://docker.registry.com/v2/_catalog<span class="token comment"># &#123;"repositories":["nginx"]&#125;   # å¯ä»¥çœ‹åˆ°æœ‰nginxé•œåƒ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="å…¶ä»–æœºå™¨æ‹‰å–"><a href="#å…¶ä»–æœºå™¨æ‹‰å–" class="headerlink" title="å…¶ä»–æœºå™¨æ‹‰å–"></a>å…¶ä»–æœºå™¨æ‹‰å–</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@k8s-master ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/docker/daemon.json</span><span class="token punctuation">&#123;</span>  <span class="token string">"registry-mirrors"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">"https://fogd2pyo.mirror.aliyuncs.com"</span><span class="token punctuation">]</span>,  <span class="token string">"insecure-registries"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">"docker.registry.com"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span>root@k8s-master ~<span class="token punctuation">]</span><span class="token comment"># docker pull docker.registry.com/nginx</span>Using default tag: latestTrying to pull repository docker.registry.com/nginx <span class="token punctuation">..</span>. latest: Pulling from docker.registry.com/nginx8559a31e96f4: Pull complete 8d69e59170f7: Pull complete 3f9f1ec1d262: Pull complete d1f5ff4f210d: Pull complete 1e22bfa8652e: Pull complete Digest: sha256:0efad4d09a419dc6d574c3c3baacb804a530acd61d5eba72cb1f14e1f5ac0c8fStatus: Downloaded newer image <span class="token keyword">for</span> docker.registry.com/nginx:latest<span class="token punctuation">[</span>root@k8s-master ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>REPOSITORY                                                        TAG                 IMAGE ID            CREATED             SIZEmail                                                              latest              421b6fb6f3aa        <span class="token number">2</span> days ago          <span class="token number">167</span> MBregistry.cn-beijing.aliyuncs.com/wujiops/mail                     latest              421b6fb6f3aa        <span class="token number">2</span> days ago          <span class="token number">167</span> MBdocker.registry.com/nginx                                            latest              2622e6cca7eb        <span class="token number">13</span> days ago         <span class="token number">132</span> MB<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è¡¥å……ï¼š"><a href="#è¡¥å……ï¼š" class="headerlink" title="è¡¥å……ï¼š"></a>è¡¥å……ï¼š</h1><h2 id="é…ç½®è¯ä¹¦"><a href="#é…ç½®è¯ä¹¦" class="headerlink" title="é…ç½®è¯ä¹¦"></a>é…ç½®è¯ä¹¦</h2><h3 id="åˆ›å»ºè¯ä¹¦ï¼Œæœ‰æ•ˆæœŸè®¾ç½®10å¹´"><a href="#åˆ›å»ºè¯ä¹¦ï¼Œæœ‰æ•ˆæœŸè®¾ç½®10å¹´" class="headerlink" title="åˆ›å»ºè¯ä¹¦ï¼Œæœ‰æ•ˆæœŸè®¾ç½®10å¹´"></a>åˆ›å»ºè¯ä¹¦ï¼Œæœ‰æ•ˆæœŸè®¾ç½®10å¹´</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> ~/.certsopenssl req -newkey rsa:4096 -nodes -sha256 -keyout ~/.certs/docker.registry.com.key -x509 -days <span class="token number">3650</span> -out ~/.certs/docker.registry.com.crt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="å¸¦è¯ä¹¦è¿è¡Œregistryå®¹å™¨"><a href="#å¸¦è¯ä¹¦è¿è¡Œregistryå®¹å™¨" class="headerlink" title="å¸¦è¯ä¹¦è¿è¡Œregistryå®¹å™¨"></a>å¸¦è¯ä¹¦è¿è¡Œregistryå®¹å™¨</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -d <span class="token punctuation">\</span>--restart<span class="token operator">=</span>always <span class="token punctuation">\</span>--name registry <span class="token punctuation">\</span>-v ~/.certs/:/certs <span class="token punctuation">\</span>-e <span class="token assign-left variable">REGISTRY_HTTP_ADDR</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0:443 <span class="token punctuation">\</span>-e <span class="token assign-left variable">REGISTRY_HTTP_TLS_CERTIFICATE</span><span class="token operator">=</span>/certs/docker.registry.com.crt <span class="token punctuation">\</span>-e <span class="token assign-left variable">REGISTRY_HTTP_TLS_KEY</span><span class="token operator">=</span>/certs/docker.registry.com.key <span class="token punctuation">\</span>-p <span class="token number">443</span>:443 <span class="token punctuation">\</span>-v /opt/registry:/var/lib/registry <span class="token punctuation">\</span>registry:latest<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker pull httpd   <span class="token comment"># ä»å®˜æ–¹pull httpdé•œåƒ</span>docker tag httpd docker.registry.com/httpd   <span class="token comment"># é‡æ–°æ‰“æ ‡ç­¾</span>docker push docker.registry.com/httpd   <span class="token comment"># å°†æ‰“å¥½æ ‡ç­¾çš„é•œåƒpushåˆ°æœ¬åœ°ä»“åº“</span><span class="token function">curl</span> https://docker.registry.com/v2/_catalog -k   <span class="token comment"># éªŒè¯</span><span class="token punctuation">&#123;</span><span class="token string">"repositories"</span>:<span class="token punctuation">[</span><span class="token string">"docs"</span>,<span class="token string">"httpd"</span>,<span class="token string">"nginx"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span>   <span class="token comment"># å¯ä»¥çœ‹åˆ°æœ¬åœ°é•œåƒåº“ä¸­å·²æœ‰çš„é•œåƒ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ³¨æ„ï¼š<br>å‘æœåŠ¡å™¨å‘é€ <code>https</code> è¯·æ±‚<br><code>curl</code>éœ€è¦åŠ ä¸Š<code>-k</code>ï¼Œ<code>wget</code>éœ€è¦åŠ ä¸Š<code>--no-check-certificate</code>  </p><h3 id="å…¶ä»–ä¸»æœºè®¿é—®ä»“åº“"><a href="#å…¶ä»–ä¸»æœºè®¿é—®ä»“åº“" class="headerlink" title="å…¶ä»–ä¸»æœºè®¿é—®ä»“åº“"></a>å…¶ä»–ä¸»æœºè®¿é—®ä»“åº“</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> /etc/docker/daemon.json   <span class="token comment"># é…ç½®insecure-registries</span><span class="token punctuation">&#123;</span>  <span class="token string">"registry-mirrors"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">"https://fogd2pyo.mirror.aliyuncs.com"</span><span class="token punctuation">]</span>,  <span class="token string">"insecure-registries"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">"docker.registry.com"</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token function">cat</span> /etc/hosts <span class="token number">127.0</span>.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4::1         localhost localhost.localdomain localhost6 localhost6.localdomain6<span class="token number">192.168</span>.1.40 docker.registry.com   <span class="token comment"># ä¸»æœºæ˜ å°„</span>docker pull docker.registry.com/httpd   <span class="token comment"># pullé•œåƒ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åŸºäºç”¨æˆ·å¯†ç è®¿é—®"><a href="#åŸºäºç”¨æˆ·å¯†ç è®¿é—®" class="headerlink" title="åŸºäºç”¨æˆ·å¯†ç è®¿é—®"></a>åŸºäºç”¨æˆ·å¯†ç è®¿é—®</h2><h3 id="ä½¿ç”¨htpasswdå·¥å…·ï¼Œç”ŸæˆéªŒè¯æ–‡ä»¶"><a href="#ä½¿ç”¨htpasswdå·¥å…·ï¼Œç”ŸæˆéªŒè¯æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨htpasswdå·¥å…·ï¼Œç”ŸæˆéªŒè¯æ–‡ä»¶"></a>ä½¿ç”¨htpasswdå·¥å…·ï¼Œç”ŸæˆéªŒè¯æ–‡ä»¶</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum -y <span class="token function">install</span> httpd-tools  htpasswd -Bbn wujiops <span class="token number">123456</span> <span class="token operator">></span> ~/.certs/.htpasswd   <span class="token comment"># è¿™é‡Œæˆ‘å’ŒsslåŠ å¯†æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹ä¸‹</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="å¸¦è¯ä¹¦å’Œç”¨æˆ·è®¤è¯è¿è¡Œregistryå®¹å™¨"><a href="#å¸¦è¯ä¹¦å’Œç”¨æˆ·è®¤è¯è¿è¡Œregistryå®¹å™¨" class="headerlink" title="å¸¦è¯ä¹¦å’Œç”¨æˆ·è®¤è¯è¿è¡Œregistryå®¹å™¨"></a>å¸¦è¯ä¹¦å’Œç”¨æˆ·è®¤è¯è¿è¡Œregistryå®¹å™¨</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">docker run -d <span class="token punctuation">\</span>--restart<span class="token operator">=</span>always <span class="token punctuation">\</span>--name registry <span class="token punctuation">\</span>-v ~/.certs/:/certs <span class="token punctuation">\</span>-e <span class="token assign-left variable">REGISTRY_HTTP_ADDR</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0:443 <span class="token punctuation">\</span>-e <span class="token assign-left variable">REGISTRY_HTTP_TLS_CERTIFICATE</span><span class="token operator">=</span>/certs/docker.registry.com.crt <span class="token punctuation">\</span>-e <span class="token assign-left variable">REGISTRY_HTTP_TLS_KEY</span><span class="token operator">=</span>/certs/docker.registry.com.key <span class="token punctuation">\</span>-e <span class="token assign-left variable">REGISTRY_AUTH</span><span class="token operator">=</span>htpasswd <span class="token punctuation">\</span>-e <span class="token assign-left variable">REGISTRY_AUTH_HTPASSWD_REALM</span><span class="token operator">=</span><span class="token string">"Registry Realm"</span> <span class="token punctuation">\</span>-e <span class="token assign-left variable">REGISTRY_AUTH_HTPASSWD_PATH</span><span class="token operator">=</span>/certs/.htpasswd <span class="token punctuation">\</span>-p <span class="token number">443</span>:443 <span class="token punctuation">\</span>-v /opt/registry:/var/lib/registry <span class="token punctuation">\</span>docker.registry.com/registry:latest<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="docker-compose-yml"><a href="#docker-compose-yml" class="headerlink" title="docker-compose.yml"></a>docker-compose.yml</h3><p>æ‰§è¡Œ<code>docker-compose up -d</code>æ•ˆæœå’Œä¸Šé¢çš„å‘½ä»¤ç›¸åŒ  </p><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">registry</span><span class="token punctuation">:</span>  <span class="token key atrule">restart</span><span class="token punctuation">:</span> always  <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.registry.com/registry  <span class="token key atrule">container_name</span><span class="token punctuation">:</span> registry  <span class="token key atrule">ports</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> 443<span class="token punctuation">:</span><span class="token number">443</span>  <span class="token key atrule">environment</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> REGISTRY_AUTH=htpasswd    <span class="token punctuation">-</span> REGISTRY_AUTH_HTPASSWD_REALM=Registry_Realm    <span class="token punctuation">-</span> REGISTRY_AUTH_HTPASSWD_PATH=~/.certs/.htpasswd    <span class="token punctuation">-</span> REGISTRY_HTTP_ADDR=0.0.0.0<span class="token punctuation">:</span><span class="token number">443</span>    <span class="token punctuation">-</span> REGISTRY_HTTP_TLS_CERTIFICATE=/certs/docker.registry.com.crt    <span class="token punctuation">-</span> REGISTRY_HTTP_TLS_KEY=/certs/docker.registry.com.key  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> ~/.certs/<span class="token punctuation">:</span>/auth    <span class="token punctuation">-</span> /opt/registry<span class="token punctuation">:</span>/var/lib/registry<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„é•œåƒ"><a href="#æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„é•œåƒ" class="headerlink" title="æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„é•œåƒ"></a>æŸ¥çœ‹æœ¬åœ°ä»“åº“çš„é•œåƒ</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">curl</span> https://docker.registry.com/v2/_catalog -k<span class="token punctuation">&#123;</span><span class="token string">"errors"</span>:<span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">"code"</span><span class="token builtin class-name">:</span><span class="token string">"UNAUTHORIZED"</span>,<span class="token string">"message"</span><span class="token builtin class-name">:</span><span class="token string">"authentication required"</span>,<span class="token string">"detail"</span>:<span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">"Type"</span><span class="token builtin class-name">:</span><span class="token string">"registry"</span>,<span class="token string">"Class"</span><span class="token builtin class-name">:</span><span class="token string">""</span>,<span class="token string">"Name"</span><span class="token builtin class-name">:</span><span class="token string">"catalog"</span>,<span class="token string">"Action"</span><span class="token builtin class-name">:</span><span class="token string">"*"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>æ­¤ç§æ–¹æ³•ä¸ä¸Šè¿°ä½¿ç”¨è¯ä¹¦çš„åŒºåˆ«åœ¨äºï¼Œæ­¤æ—¶æŸ¥çœ‹æ–‡ä»¶_catalogä¸­çš„å†…å®¹æ—¶ï¼Œå‘ç°æ˜¯åŠ å¯†è¿‡çš„ï¼Œæ— æ³•æ˜¾ç¤º<br>æ³¨æ„ï¼š  </p><ol><li>_catalogç›¸å½“äºä¸€ä¸ªAPIæ¥å£,æŸ¥çœ‹ç§æœ‰ä»“åº“ä¸­æœ‰å“ªäº›é•œåƒ  </li><li>å¿…é¡»å…ˆåšåŠ å¯†ååšè®¤è¯ï¼Œå› ä¸ºå¦‚æœåç€æ¥å°±æ²¡æœ‰æ„ä¹‰ï¼Œç›´æ¥å¯ä»¥é€šè¿‡æ•°æ®åŒ…çŸ¥é“å¯†ç   </li></ol><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> wujiops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tcpdumpæŠ“åŒ…åˆ†æ</title>
      <link href="/posts/45a4.html"/>
      <url>/posts/45a4.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æ–­å¼€"><a href="#ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æ–­å¼€" class="headerlink" title="ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æ–­å¼€"></a>ä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æ–­å¼€</h1><p><img src="/medias/drawing-bed/others/0.jpg"></p><h1 id="tcpdumpå‘½ä»¤"><a href="#tcpdumpå‘½ä»¤" class="headerlink" title="tcpdumpå‘½ä»¤"></a>tcpdumpå‘½ä»¤</h1><p>Linux tcpdumpå‘½ä»¤ç”¨äºå€¾å€’ç½‘ç»œä¼ è¾“æ•°æ®ã€‚<br>æ‰§è¡ŒtcpdumpæŒ‡ä»¤å¯åˆ—å‡ºç»è¿‡æŒ‡å®šç½‘ç»œç•Œé¢çš„æ•°æ®åŒ…æ–‡ä»¶å¤´ï¼Œåœ¨Linuxæ“ä½œç³»ç»Ÿä¸­ï¼Œä½ å¿…é¡»æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ã€‚<br><code>tcpdump [-adeflnNOpqStvx][-c&lt;æ•°æ®åŒ…æ•°ç›®&gt;][-dd][-ddd][-F&lt;è¡¨è¾¾æ–‡ä»¶&gt;][-i&lt;ç½‘ç»œç•Œé¢&gt;][-r&lt;æ•°æ®åŒ…æ–‡ä»¶&gt;][-s&lt;æ•°æ®åŒ…å¤§å°&gt;][-tt][-T&lt;æ•°æ®åŒ…ç±»å‹&gt;][-vv][-w&lt;æ•°æ®åŒ…æ–‡ä»¶&gt;][è¾“å‡ºæ•°æ®æ ä½]</code>   </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">-a å°è¯•å°†ç½‘ç»œå’Œå¹¿æ’­åœ°å€è½¬æ¢æˆåç§°ã€‚-c<span class="token operator">&lt;</span>æ•°æ®åŒ…æ•°ç›®<span class="token operator">></span> æ”¶åˆ°æŒ‡å®šçš„æ•°æ®åŒ…æ•°ç›®åï¼Œå°±åœæ­¢è¿›è¡Œå€¾å€’æ“ä½œã€‚-d æŠŠç¼–è¯‘è¿‡çš„æ•°æ®åŒ…ç¼–ç è½¬æ¢æˆå¯é˜…è¯»çš„æ ¼å¼ï¼Œå¹¶å€¾å€’åˆ°æ ‡å‡†è¾“å‡ºã€‚-dd æŠŠç¼–è¯‘è¿‡çš„æ•°æ®åŒ…ç¼–ç è½¬æ¢æˆCè¯­è¨€çš„æ ¼å¼ï¼Œå¹¶å€¾å€’åˆ°æ ‡å‡†è¾“å‡ºã€‚-ddd æŠŠç¼–è¯‘è¿‡çš„æ•°æ®åŒ…ç¼–ç è½¬æ¢æˆåè¿›åˆ¶æ•°å­—çš„æ ¼å¼ï¼Œå¹¶å€¾å€’åˆ°æ ‡å‡†è¾“å‡ºã€‚-e åœ¨æ¯åˆ—å€¾å€’èµ„æ–™ä¸Šæ˜¾ç¤ºè¿æ¥å±‚çº§çš„æ–‡ä»¶å¤´ã€‚-f ç”¨æ•°å­—æ˜¾ç¤ºç½‘é™…ç½‘ç»œåœ°å€ã€‚-F<span class="token operator">&lt;</span>è¡¨è¾¾æ–‡ä»¶<span class="token operator">></span> æŒ‡å®šå†…å«è¡¨è¾¾æ–¹å¼çš„æ–‡ä»¶ã€‚-i<span class="token operator">&lt;</span>ç½‘ç»œç•Œé¢<span class="token operator">></span> ä½¿ç”¨æŒ‡å®šçš„ç½‘ç»œæˆªé¢é€å‡ºæ•°æ®åŒ…ã€‚-l ä½¿ç”¨æ ‡å‡†è¾“å‡ºåˆ—çš„ç¼“å†²åŒºã€‚-n ä¸æŠŠä¸»æœºçš„ç½‘ç»œåœ°å€è½¬æ¢æˆåå­—ã€‚-N ä¸åˆ—å‡ºåŸŸåã€‚-O ä¸å°†æ•°æ®åŒ…ç¼–ç æœ€ä½³åŒ–ã€‚-p ä¸è®©ç½‘ç»œç•Œé¢è¿›å…¥æ··æ‚æ¨¡å¼ã€‚-q å¿«é€Ÿè¾“å‡ºï¼Œä»…åˆ—å‡ºå°‘æ•°çš„ä¼ è¾“åè®®ä¿¡æ¯ã€‚-r<span class="token operator">&lt;</span>æ•°æ®åŒ…æ–‡ä»¶<span class="token operator">></span> ä»æŒ‡å®šçš„æ–‡ä»¶è¯»å–æ•°æ®åŒ…æ•°æ®ã€‚-s<span class="token operator">&lt;</span>æ•°æ®åŒ…å¤§å°<span class="token operator">></span> è®¾ç½®æ¯ä¸ªæ•°æ®åŒ…çš„å¤§å°ã€‚-S ç”¨ç»å¯¹è€Œéç›¸å¯¹æ•°å€¼åˆ—å‡ºTCPå…³è”æ•°ã€‚-t åœ¨æ¯åˆ—å€¾å€’èµ„æ–™ä¸Šä¸æ˜¾ç¤ºæ—¶é—´æˆ³è®°ã€‚-tt åœ¨æ¯åˆ—å€¾å€’èµ„æ–™ä¸Šæ˜¾ç¤ºæœªç»æ ¼å¼åŒ–çš„æ—¶é—´æˆ³è®°ã€‚-T<span class="token operator">&lt;</span>æ•°æ®åŒ…ç±»å‹<span class="token operator">></span> å¼ºåˆ¶å°†è¡¨è¾¾æ–¹å¼æ‰€æŒ‡å®šçš„æ•°æ®åŒ…è½¬è¯‘æˆè®¾ç½®çš„æ•°æ®åŒ…ç±»å‹ã€‚-v è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚-vv æ›´è¯¦ç»†æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚-x ç”¨åå…­è¿›åˆ¶å­—ç åˆ—å‡ºæ•°æ®åŒ…èµ„æ–™ã€‚-w<span class="token operator">&lt;</span>æ•°æ®åŒ…æ–‡ä»¶<span class="token operator">></span> æŠŠæ•°æ®åŒ…æ•°æ®å†™å…¥æŒ‡å®šçš„æ–‡ä»¶ã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>c2s SYN(seq=0)<br>s2c SYN(seq=0) ACK(ack=1)<br>c2s ACK(seq=1 ack=1)</p><hr><p>c2s FIN(seq=1) ACK(ack=1)<br>s2c ACK(seq=1 ack=2)<br>s2c FIN(seq=1) ACK(ack=2)<br>c2s ACK(seq=2 ack=2)</p><hr><hr><p>c2s SYN(seq=0)<br>s2c SYN(seq=0) ACK(ack=1)<br>c2s ACK(seq=1 ack=1)</p><hr><p>c2s PSH(seq=1) ACK(ack=1)<br>s2c ACK(seq=1 ack=3)</p><hr><p>c2s FIN(seq=3) ACK(ack=1)<br>s2c FIN(seq=1) ACK(ack=4)<br>c2s ACK(seq=4 ack=2)</p><p><img src="/medias/drawing-bed/others/1.jpg"></p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linuxé‚®ä»¶æœåŠ¡</title>
      <link href="/posts/3c5e.html"/>
      <url>/posts/3c5e.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="å…³é—­ã€å¸è½½-sendmail-postfix"><a href="#å…³é—­ã€å¸è½½-sendmail-postfix" class="headerlink" title="å…³é—­ã€å¸è½½ sendmail/postfix"></a>å…³é—­ã€å¸è½½ sendmail/postfix</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># sendmial</span><span class="token function">service</span> <span class="token function">sendmail</span> stop<span class="token function">chkconfig</span> <span class="token function">sendmail</span> off<span class="token comment"># postfix</span><span class="token function">service</span> postfix stop<span class="token function">chkconfig</span> postfix off<span class="token comment"># ç›´æ¥å¸è½½ä¸‰æ€å•ŠğŸ¥´</span>yum remove <span class="token function">sendmail</span>yum remove postfix<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®‰è£…mailx"><a href="#å®‰è£…mailx" class="headerlink" title="å®‰è£…mailx"></a>å®‰è£…mailx</h2><p><code>yum install mailx -y</code><br>Ubuntuå®‰è£…ï¼š<br><code>sudo apt-get install heirloom-mailx</code>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ—¶é—´åŒæ­¥</span>yum -y <span class="token function">install</span> ntpdatentpdate <span class="token number">210.72</span>.145.44ntpdate ntp.api.bzntpdate -u <span class="token number">210.72</span>.145.44   <span class="token comment"># å¯ä»¥è¶Šè¿‡ä¸»æœºé˜²ç«å¢™</span>clock -w   <span class="token comment"># å°†æ—¶é—´åŒæ­¥åˆ°ç¡¬ä»¶æ—¶é’Ÿ</span>---åˆ†å‰²çº¿---<span class="token comment"># 163é‚®ç®±</span><span class="token number">1</span><span class="token punctuation">)</span>vim /etc/mail.rc   <span class="token comment"># æœ€åæ’å…¥å·²ä¸‹å†…å®¹ï¼š</span><span class="token builtin class-name">set</span> <span class="token assign-left variable">from</span><span class="token operator">=</span>150xxxxxxxx@163.com<span class="token builtin class-name">set</span> <span class="token assign-left variable">smtp</span><span class="token operator">=</span>smtp.163.com<span class="token builtin class-name">set</span> smtp-auth-user<span class="token operator">=</span>150xxxxxxxx@163.com<span class="token builtin class-name">set</span> smtp-auth-password<span class="token operator">=</span>xxxxxx   <span class="token comment"># æ­¤å¯†ç ä¸ºæˆæƒç ï¼Œåœ¨163ç½‘é¡µé‚®ç®±å¯è®¾ç½®</span><span class="token builtin class-name">set</span> smtp-auth<span class="token operator">=</span>login<span class="token number">2</span><span class="token punctuation">)</span>echo <span class="token string">"test mail"</span> <span class="token operator">|</span> mail -vvv -s <span class="token string">"subject"</span> xxx@qq.com   <span class="token comment"># å‘½ä»¤è¡ŒéªŒè¯</span><span class="token comment"># qqé‚®ç®±</span><span class="token number">1</span><span class="token punctuation">)</span>vim /etc/mail.rc   <span class="token comment"># æœ€åæ’å…¥å·²ä¸‹å†…å®¹ï¼š</span><span class="token builtin class-name">set</span> <span class="token assign-left variable">from</span><span class="token operator">=</span>xxxx@qq.com<span class="token builtin class-name">set</span> smtp-auth-user<span class="token operator">=</span>xxxx@qq.com<span class="token builtin class-name">set</span> smtp-auth-password<span class="token operator">=</span>xxxxxx   <span class="token comment"># æ­¤å¯†ç ä¸ºæˆæƒç ï¼Œåœ¨qqé‚®ç®±ç½‘é¡µç‰ˆä¸­è®¾ç½® </span><span class="token builtin class-name">set</span> smtp-auth<span class="token operator">=</span>login<span class="token builtin class-name">set</span> ssl-verify<span class="token operator">=</span>ignore<span class="token builtin class-name">set</span> nss-config-dir<span class="token operator">=~</span>/.certs<span class="token builtin class-name">set</span> <span class="token assign-left variable">smtp</span><span class="token operator">=</span>smtps://smtp.qq.com:465<span class="token number">2</span><span class="token punctuation">)</span>mkdir ~/.certs <span class="token operator">&amp;&amp;</span> certutil -N -d ~/.certs   <span class="token comment"># å‘½ä»¤è¡Œæ‰§è¡Œæ­¤å‘½ä»¤ï¼Œè¾“å…¥8ä½å¯†ç (ä»»æ„)ï¼Œä¾‹å¦‚wj123123</span><span class="token number">3</span><span class="token punctuation">)</span>echo <span class="token string">"test mail"</span> <span class="token operator">|</span> mail -vvv -s <span class="token string">"subject"</span> 150xxxxxxxx@163.com   <span class="token comment"># å‘½ä»¤è¡ŒéªŒè¯</span><span class="token comment"># è…¾è®¯ä¼ä¸šé‚®ç®±</span><span class="token number">1</span><span class="token punctuation">)</span>vim /etc/mail.rc<span class="token builtin class-name">set</span> <span class="token assign-left variable">from</span><span class="token operator">=</span>dev@xxx.com<span class="token builtin class-name">set</span> smtp-auth-user<span class="token operator">=</span>dev@xxx.com<span class="token builtin class-name">set</span> smtp-auth-password<span class="token operator">=</span>xxxxxx<span class="token builtin class-name">set</span> smtp-auth<span class="token operator">=</span>login<span class="token builtin class-name">set</span> <span class="token assign-left variable">smtp</span><span class="token operator">=</span>smtp://smtp.exmail.qq.com<span class="token number">3</span><span class="token punctuation">)</span>echo <span class="token string">"test mail"</span> <span class="token operator">|</span> mail -vvv -s <span class="token string">"subject"</span> 150xxxxxxxx@163.com   <span class="token comment"># å‘½ä»¤è¡ŒéªŒè¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> wujiops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> mail </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>python TCPæœåŠ¡</title>
      <link href="/posts/f7a9.html"/>
      <url>/posts/f7a9.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="é‡åˆ°çš„é—®é¢˜"><a href="#é‡åˆ°çš„é—®é¢˜" class="headerlink" title="é‡åˆ°çš„é—®é¢˜"></a>é‡åˆ°çš„é—®é¢˜</h1><p>å®¢æˆ·ç«¯è¿æ¥è¶…æ—¶è‡ªåŠ¨æ–­å¼€ï¼Œå¹¶ä¸ä¼šå‘TCP serverå‘é€æ–­å¼€è¯·æ±‚ï¼Œå¯¼è‡´serverç«¯ä¸€ç›´å¤„äºè¿æ¥çŠ¶æ€ï¼Œå®¢æˆ·ç«¯é‡è¿å¤±è´¥ã€‚  </p><h1 id="åˆ†æåŸå› "><a href="#åˆ†æåŸå› " class="headerlink" title="åˆ†æåŸå› "></a>åˆ†æåŸå› </h1><ol><li><p>å¤ç°é—®é¢˜<br>ç”¨tcpdumpæŠ“åŒ…<code>tcpdump tcp port 10000</code>ï¼ˆç»“æœå±•ç¤ºå¦‚ä¸‹ï¼šï¼‰<br>å¯ä»¥çœ‹åˆ°å®¢æˆ·ç«¯<code>106.202.127.124</code>ä¸»åŠ¨æ–­å¼€TCP server<code>www.tcpserver.com</code>æ˜¯æ­£å¸¸çš„ï¼ˆä¸‰æ¬¡æ¡æ‰‹å››æ¬¡æ–­å¼€ï¼‰<br>å½“å®¢æˆ·ç«¯æ˜¯å› ä¸ºè¶…æ—¶æ–­å¼€ï¼ˆå¤„äºæ³¨äºŒçŠ¶æ€ï¼ŒTCPserveræœªå¾—åˆ°å›å¤ï¼‰ï¼Œæˆ–è€…æ–­ç½‘ï¼ˆå¤„äºæ³¨ä¸€çŠ¶æ€ï¼Œæœªå‘ç”ŸæŒ¥æ‰‹ï¼‰  </p></li><li><p>è§£å†³é—®é¢˜<br>åœ¨TCP serverè®¾ç½®socket 30sè¶…æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€æ¶ˆæ¯åï¼Œ30sæ²¡æœ‰åŠ¨ä½œTCP serverå¤„äºç­‰å¾…è¿æ¥çš„çŠ¶æ€<br>è¿™æ—¶å€™éœ€è¦å®¢æˆ·ç«¯ä¸»åŠ¨æ–­å¼€é‡è¿å³å¯  </p><pre class="line-numbers language-none"><code class="language-none">Timeout.Server is running. Waiting client...<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><p>é™„å½•tcpdumpæŠ“åŒ…å†…å®¹ï¼š  </p><pre class="line-numbers language-none"><code class="language-none">â‘ 16:59:58.751349 IP 106.202.127.124.broad.bj.bj.static.163data.com.cn.40780 &gt; www.tcpserver.com.ndmp: Flags [S], seq 642708694, win 29200, options [mss 1440,sackOK,TS val 3136578883 ecr 0,nop,wscale 7], length 0â‘¡16:59:58.751428 IP www.tcpserver.com.ndmp &gt; 106.202.127.124.broad.bj.bj.static.163data.com.cn.40780: Flags [S.], seq 2548085368, ack 642708695, win 28960, options [mss 1460,sackOK,TS val 750917687 ecr 3136578883,nop,wscale 7], length 0â‘¢16:59:58.765865 IP 106.202.127.124.broad.bj.bj.static.163data.com.cn.40780 &gt; www.tcpserver.com.ndmp: Flags [.], ack 1, win 229, options [nop,nop,TS val 3136578896 ecr 750917687], length 0---åˆ†å‰²çº¿---â‘ æ³¨ä¸€17:00:04.932512 IP 106.202.127.124.broad.bj.bj.static.163data.com.cn.40780 &gt; www.tcpserver.com.ndmp: Flags [F.], seq 1, ack 1, win 229, options [nop,nop,TS val 3136585065 ecr 750917687], length 0â‘¡â‘¢æ³¨äºŒ17:00:04.932669 IP www.tcpserver.com.ndmp &gt; 106.202.127.124.broad.bj.bj.static.163data.com.cn.40780: Flags [F.], seq 1, ack 2, win 227, options [nop,nop,TS val 750923869 ecr 3136585065], length 0â‘£17:00:04.944759 IP 106.202.127.124.broad.bj.bj.static.163data.com.cn.40780 &gt; www.tcpserver.com.ndmp: Flags [.], ack 2, win 229, options [nop,nop,TS val 3136585075 ecr 750923869], length 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é™„å½•ä¸‰ä¸ªè„šæœ¬ï¼š  </p><h1 id="TCP-serverç«¯"><a href="#TCP-serverç«¯" class="headerlink" title="TCP serverç«¯"></a>TCP serverç«¯</h1><p>å¼€å¯ç«¯å£ï¼Œç»‘å®šåˆ°ä¸»æœº<br><code>tcp_update.py</code>  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># TCP server</span><span class="token keyword">from</span> socket <span class="token keyword">import</span> <span class="token operator">*</span><span class="token keyword">import</span> pymysql<span class="token keyword">import</span> time<span class="token keyword">import</span> _thread<span class="token keyword">import</span> socketsocket<span class="token punctuation">.</span>setdefaulttimeout<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token comment"># Manual Data</span>db_2 <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'$IP'</span><span class="token punctuation">,</span> port<span class="token operator">=</span>$PORT<span class="token punctuation">,</span>                       user<span class="token operator">=</span><span class="token string">'$NAME'</span><span class="token punctuation">,</span> passwd<span class="token operator">=</span><span class="token string">'$PASSWORD'</span><span class="token punctuation">,</span> db<span class="token operator">=</span><span class="token string">"$DATABASE"</span><span class="token punctuation">)</span>cursor_2 <span class="token operator">=</span> db_2<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">process</span><span class="token punctuation">(</span>string<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    temp_str <span class="token operator">=</span> string<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> temp_str<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">(</span>temp_str<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">database_update</span><span class="token punctuation">(</span>attribute<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>    sql <span class="token operator">=</span> <span class="token string">"UPDATE dataTestUDP SET value = "</span> <span class="token operator">+</span> \        <span class="token builtin">str</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" WHERE attribute = \""</span> <span class="token operator">+</span> attribute <span class="token operator">+</span> <span class="token string">"\""</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        db_2<span class="token punctuation">.</span>ping<span class="token punctuation">(</span>reconnect<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>        cursor_2<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">)</span>        db_2<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">except</span><span class="token punctuation">:</span>        <span class="token comment"># å¦‚æœå‘ç”Ÿé”™è¯¯åˆ™å›æ»š</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Database Error'</span><span class="token punctuation">)</span>        db_2<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment"># å…³é—­æ•°æ®åº“è¿æ¥</span>        db_2<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">tcp_listener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    HOST <span class="token operator">=</span> <span class="token string">'192.168.1.2'</span>    PORT <span class="token operator">=</span> <span class="token number">10000</span>    BUFSIZ <span class="token operator">=</span> <span class="token number">1024</span>    ADDRESS <span class="token operator">=</span> <span class="token punctuation">(</span>HOST<span class="token punctuation">,</span> PORT<span class="token punctuation">)</span>    tcpServerSocket <span class="token operator">=</span> socket<span class="token punctuation">(</span>AF_INET<span class="token punctuation">,</span> SOCK_STREAM<span class="token punctuation">)</span>    tcpServerSocket<span class="token punctuation">.</span>bind<span class="token punctuation">(</span>ADDRESS<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Server startsï¼Œlistening port &#123;&#125;..."</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>ADDRESS<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    tcpServerSocket<span class="token punctuation">.</span>listen<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>    <span class="token keyword">try</span><span class="token punctuation">:</span>        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>            client_socket <span class="token operator">=</span> <span class="token boolean">None</span>            <span class="token keyword">try</span><span class="token punctuation">:</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Server is running. Waiting client...'</span><span class="token punctuation">)</span>                client_socket<span class="token punctuation">,</span> client_address <span class="token operator">=</span> tcpServerSocket<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Client &#123;&#125; Connectedï¼'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>client_address<span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>                    <span class="token keyword">try</span><span class="token punctuation">:</span>                        data <span class="token operator">=</span> client_socket<span class="token punctuation">.</span>recv<span class="token punctuation">(</span><span class="token number">2048</span><span class="token punctuation">)</span>                        <span class="token keyword">if</span> data<span class="token punctuation">:</span>                            <span class="token keyword">print</span><span class="token punctuation">(</span>                                <span class="token string">'Received Message &#123;&#125;(&#123;&#125; bytes) from &#123;&#125;'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gb2312'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span>                                                                               client_address<span class="token punctuation">)</span><span class="token punctuation">)</span>                            <span class="token keyword">try</span><span class="token punctuation">:</span>                                a<span class="token punctuation">,</span> v <span class="token operator">=</span> process<span class="token punctuation">(</span>data<span class="token punctuation">.</span>decode<span class="token punctuation">(</span><span class="token string">'gb2312'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                                database_update<span class="token punctuation">(</span>a<span class="token punctuation">,</span> v<span class="token punctuation">)</span>                            <span class="token keyword">except</span><span class="token punctuation">:</span>                                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Data Error'</span><span class="token punctuation">)</span>                        <span class="token keyword">else</span><span class="token punctuation">:</span>                            <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Client &#123;&#125; disconnects!'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>client_address<span class="token punctuation">)</span><span class="token punctuation">)</span>                            <span class="token keyword">break</span>                    <span class="token keyword">except</span><span class="token punctuation">:</span>                        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Connenction Reset by &#123;&#125;!'</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>client_address<span class="token punctuation">)</span><span class="token punctuation">)</span>                        <span class="token keyword">break</span>            <span class="token keyword">except</span><span class="token punctuation">:</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Timeout.'</span><span class="token punctuation">)</span>                <span class="token keyword">pass</span>            <span class="token keyword">finally</span><span class="token punctuation">:</span>                <span class="token keyword">if</span> client_socket <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>                    client_socket<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">finally</span><span class="token punctuation">:</span>        tcpServerSocket<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    tcp_listener<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æ•°æ®å¾®è°ƒ"><a href="#æ•°æ®å¾®è°ƒ" class="headerlink" title="æ•°æ®å¾®è°ƒ"></a>æ•°æ®å¾®è°ƒ</h1><p><code>auto_update.py</code>  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># auto update</span><span class="token keyword">import</span> pymysql<span class="token keyword">import</span> time<span class="token comment"># Auto Data</span>db_1 <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>host<span class="token operator">=</span><span class="token string">'$IP'</span><span class="token punctuation">,</span> port<span class="token operator">=</span>$PORT<span class="token punctuation">,</span>                       user<span class="token operator">=</span><span class="token string">'$NAME'</span><span class="token punctuation">,</span> passwd<span class="token operator">=</span><span class="token string">'$PASSWORD'</span><span class="token punctuation">,</span> db<span class="token operator">=</span><span class="token string">"$DATABASE"</span><span class="token punctuation">)</span>cursor_1 <span class="token operator">=</span> db_1<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># Update fake data automatically</span><span class="token keyword">def</span> <span class="token function">database_auto_update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    sql_1 <span class="token operator">=</span> <span class="token triple-quoted-string string">"""UPDATE dataTestFake SET id = 0 WHERE id = 10"""</span>    sql_2 <span class="token operator">=</span> <span class="token triple-quoted-string string">"""UPDATE dataTestFake SET id = id + 1 WHERE id &lt; 10"""</span>    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            <span class="token comment"># æ‰§è¡Œsqlè¯­å¥</span>            db_1<span class="token punctuation">.</span>ping<span class="token punctuation">(</span>reconnect<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>            cursor_1<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql_1<span class="token punctuation">)</span>            cursor_1<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql_2<span class="token punctuation">)</span>            <span class="token comment"># æäº¤åˆ°æ•°æ®åº“æ‰§è¡Œ</span>            db_1<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">except</span><span class="token punctuation">:</span>            <span class="token comment"># å¦‚æœå‘ç”Ÿé”™è¯¯åˆ™å›æ»š</span>            db_1<span class="token punctuation">.</span>rollback<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># å…³é—­æ•°æ®åº“è¿æ¥</span>            db_1<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        time<span class="token punctuation">.</span>sleep<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>    database_auto_update<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å®¢æˆ·ç«¯å‘é€æ•°æ®"><a href="#å®¢æˆ·ç«¯å‘é€æ•°æ®" class="headerlink" title="å®¢æˆ·ç«¯å‘é€æ•°æ®"></a>å®¢æˆ·ç«¯å‘é€æ•°æ®</h1><p><code>test.py</code></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># test py</span><span class="token keyword">from</span> socket <span class="token keyword">import</span> <span class="token operator">*</span>HOST <span class="token operator">=</span> <span class="token string">'192.168.1.2'</span>PORT <span class="token operator">=</span> <span class="token number">10000</span>BUFSIZ <span class="token operator">=</span> <span class="token number">1024</span>ADDRESS <span class="token operator">=</span> <span class="token punctuation">(</span>HOST<span class="token punctuation">,</span> PORT<span class="token punctuation">)</span>tcpClientSocket <span class="token operator">=</span> socket<span class="token punctuation">(</span>AF_INET<span class="token punctuation">,</span> SOCK_STREAM<span class="token punctuation">)</span>tcpClientSocket<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>ADDRESS<span class="token punctuation">)</span><span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    data <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token string">'>'</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token keyword">not</span> data<span class="token punctuation">:</span>        <span class="token keyword">break</span>    tcpClientSocket<span class="token punctuation">.</span>send<span class="token punctuation">(</span>data<span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">'gb2312'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Disconnect!"</span><span class="token punctuation">)</span>tcpClientSocket<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> mysql </tag>
            
            <tag> python </tag>
            
            <tag> error </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡dockerå®‰è£…æŠ¥é”™</title>
      <link href="/posts/94b7.html"/>
      <url>/posts/94b7.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="centos8-å®‰è£…docker-ceæŠ¥é”™å¦‚ä¸‹ï¼š"><a href="#centos8-å®‰è£…docker-ceæŠ¥é”™å¦‚ä¸‹ï¼š" class="headerlink" title="centos8 å®‰è£…docker-ceæŠ¥é”™å¦‚ä¸‹ï¼š"></a>centos8 å®‰è£…docker-ceæŠ¥é”™å¦‚ä¸‹ï¼š</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@localhost yum.repos.d<span class="token punctuation">]</span><span class="token comment"># yum install docker-ce docker-ce-cli containerd.io</span>ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:00:42 å‰ï¼Œæ‰§è¡Œäº <span class="token number">2020</span>å¹´06æœˆ13æ—¥ æ˜ŸæœŸå…­ <span class="token number">10</span>æ—¶05åˆ†18ç§’ã€‚é”™è¯¯ï¼š é—®é¢˜: package docker-ce-3:19.03.11-3.el7.x86_64 requires containerd.io <span class="token operator">>=</span> <span class="token number">1.2</span>.2-3, but none of the providers can be installed  - cannot <span class="token function">install</span> the best candidate <span class="token keyword">for</span> the job  - package containerd.io-1.2.10-3.2.el7.x86_64 is excluded  - package containerd.io-1.2.13-3.1.el7.x86_64 is excluded  - package containerd.io-1.2.13-3.2.el7.x86_64 is excluded  - package containerd.io-1.2.2-3.3.el7.x86_64 is excluded  - package containerd.io-1.2.2-3.el7.x86_64 is excluded  - package containerd.io-1.2.4-3.1.el7.x86_64 is excluded  - package containerd.io-1.2.5-3.1.el7.x86_64 is excluded  - package containerd.io-1.2.6-3.3.el7.x86_64 is excluded<span class="token punctuation">(</span>å°è¯•æ·»åŠ  <span class="token string">'--skip-broken'</span> æ¥è·³è¿‡æ— æ³•å®‰è£…çš„è½¯ä»¶åŒ… æˆ– <span class="token string">'--nobest'</span> æ¥ä¸åªä½¿ç”¨æœ€ä½³é€‰æ‹©çš„è½¯ä»¶åŒ…<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å®‰è£…åŒ… <code>docker-ce-3:19.03.11-3.el7.x86_64</code> éœ€è¦ <code>containerd.io</code> ç‰ˆæœ¬ <code>&gt;= 1.2.2-3</code> <code>docker</code> æš‚æœªæ›´æ–°åˆ° <code>8</code> ç‰ˆæœ¬æ”¯æŒã€‚  </p><p>è¿™é‡Œä¸‹è½½centos7çš„<code>containerd.io</code>æœ€æ–°åŒ…  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> https://download.docker.com/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm -y<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ‰§è¡Œå¦‚æœæŠ¥é”™ï¼šï¼ˆå†æ¬¡æ‰§è¡Œæˆ–æ›´æ¢dnfå®‰è£…ï¼Œç›´æ¥æ‰§è¡Œä¸¤è¾¹ä¸Šé¢çš„å‘½ä»¤å³å¯ï¼‰  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">package containerd.io-1.2.6-3.3.el7.x86_64 does not verify: no digest<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æŠ¥é”™ï¼š<code>*.rpm is not signed</code>æˆ–è€…<code>*.rpm is not signed</code>æˆ–è€…<code>GPG å…¬é’¥</code>æœªå®‰è£…  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">--nogpgcheck <span class="token comment"># yumå®‰è£…çš„æ—¶å€™ä½¿ç”¨æ­¤é€‰é¡¹è·³è¿‡å…¬é’¥éªŒè¯ï¼Œä½ ä¹Ÿå¯ä»¥åˆ°å„å¤§yumæºçš„èµ„æºç«™ä¸‹è½½å¯¼å…¥å…¬é’¥</span><span class="token comment"># rpm --import /å…¬é’¥å…¨å</span><span class="token comment"># gpgcheck=0æˆ–è€…åœ¨yumä»“åº“é‡Œå°†å…¶è®¾ç½®ä¸º0ï¼Œä¸è¿›è¡Œå…¬é’¥éªŒè¯ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> docker </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡nginx 413æŠ¥é”™</title>
      <link href="/posts/5ad5.html"/>
      <url>/posts/5ad5.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>æŠ¥é”™ä¿¡æ¯ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">**** - - <span class="token punctuation">[</span>05/Jun/2020:11:25:49 +0800<span class="token punctuation">]</span> <span class="token string">"POST /b****s HTTP/1.1"</span> <span class="token number">413</span> <span class="token number">183</span> <span class="token string">"-"</span> <span class="token string">"Apache-HttpClient/4.5.8 (Java/1.8.0_181)"</span> <span class="token string">"-"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>è§£å†³ï¼Œåœ¨nginxé…ç½®æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹ä¸¤è¡Œå³å¯ï¼Œé…ç½®æ–‡ä»¶éœ€è¦æ ¹æ®è‡ªå·±å®é™…nginxé…ç½®å»æ‰¾ï¼Œæˆ‘çš„æ˜¯<code>/etc/nginx/conf.d/***com.conf</code>  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">client_max_body_size 10m;   # è®¾ç½®æˆå®é™…éœ€è¦çš„å¤§å°å³å¯ï¼Œä¸€èˆ¬æ˜¯8-10Mclient_body_buffer_size 128k;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>åªè¦å°†ä¸Šé¢ä¸¤è¡Œé…ç½®æ”¾åœ¨æŠ¥é”™æ¥å£çš„<code>location / &#123;&#125;</code>ä¸­å³å¯<br>æˆ‘çš„åå‘ä»£ç†é…ç½®ï¼š  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">location &#x2F;**** &#123;    proxy_pass http:&#x2F;&#x2F;1****5;    proxy_redirect off;   # å¯¹å‘é€ç»™å®¢æˆ·ç«¯çš„URLè¿›è¡Œä¿®æ”¹    proxy_set_header        Host    $host;    proxy_set_header        X-Real-IP       $remote_addr;    proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;    proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;    proxy_max_temp_file_size 0;   # è®¾ç½®ä¸´æ—¶æ–‡ä»¶çš„æ€»å¤§å°    proxy_connect_timeout 90;   # nginxè·Ÿåç«¯æœåŠ¡å™¨è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆä»£ç†è¿æ¥è¶…æ—¶ï¼‰    proxy_send_timeout 90;   # åç«¯æœåŠ¡å™¨æ•°æ®å›ä¼ æ—¶é—´(ä»£ç†å‘é€è¶…æ—¶)    proxy_read_timeout 90;   # è¿æ¥æˆåŠŸåï¼Œåç«¯æœåŠ¡å™¨å“åº”æ—¶é—´(ä»£ç†æ¥æ”¶è¶…æ—¶)    proxy_buffer_size 4k;   # è®¾ç½®ä»£ç†æœåŠ¡å™¨ï¼ˆnginxï¼‰ä¿å­˜ç”¨æˆ·å¤´ä¿¡æ¯çš„ç¼“å†²åŒºå¤§å°    proxy_buffers 4 32k;   # è¯¥æŒ‡ä»¤è®¾ç½®ç¼“å†²åŒºçš„å¤§å°å’Œæ•°é‡,ä»è¢«ä»£ç†çš„åç«¯æœåŠ¡å™¨å–å¾—çš„å“åº”å†…å®¹,ä¼šæ”¾ç½®åˆ°è¿™é‡Œ    proxy_busy_buffers_size 64k;   # æ‰€æœ‰å¤„åœ¨busyçŠ¶æ€çš„buffer sizeåŠ èµ·æ¥ä¸èƒ½è¶…è¿‡proxy_busy_buffers_size    proxy_temp_file_write_size 64k;   # å¦‚æœresponseçš„å†…å®¹å¾ˆå¤§çš„è¯ï¼ŒNginxä¼šæ¥æ”¶å¹¶æŠŠä»–ä»¬å†™å…¥åˆ°temp_fileé‡Œå»ã€‚busyçš„bufferä¼ è¾“å®Œäº†ä¼šä»temp_fileé‡Œé¢æ¥ç€è¯»æ•°æ®ï¼Œç›´åˆ°ä¼ è¾“å®Œæ¯•  client_max_body_size 10m;   # å…è®¸å®¢æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å•æ–‡ä»¶å­—èŠ‚æ•°  client_body_buffer_size 128k;   # ç¼“å†²åŒºä»£ç†ç¼“å†²ç”¨æˆ·ç«¯è¯·æ±‚çš„æœ€å¤§å­—èŠ‚æ•°ï¼ˆè¯·æ±‚å¤šï¼‰&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> 413 </tag>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åä¸ºäº‘mrsæŠ¥é”™</title>
      <link href="/posts/3c78.html"/>
      <url>/posts/3c78.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>ä¸¤å°ç”µè„‘æˆªå›¾ï¼Œå¯¼è‡´å›¾ç‰‡ä¸¢å¤±äº†ä¸€éƒ¨åˆ†ğŸ˜­  </p><p>èµ·å› ï¼šå¼€å‘åŒå­¦ä½¿ç”¨sqlline.pyæ“ä½œHBaseæŠ¥é”™  </p><p>é¦–å…ˆç™»é™†MapReduceæœåŠ¡æ§åˆ¶å°æŸ¥çœ‹æŠ¥é”™ï¼š<br><img src="/medias/drawing-bed/mrs/0.png"></p><p>å‚è€ƒçš„æ’é”™<a href="https://support.huaweicloud.com/usermanual-mrs/mrs_01_0695.html">æ–‡æ¡£</a> å¹¶æ²¡æœ‰ç”¨ã€‚<br>æŒ‰æ–‡æ¡£æ‰€è¯´zookeeperï¼Œæ—¶é—´ï¼Œhdfsç­‰éƒ½æ˜¯å¥½çš„<br><img src="/medias/drawing-bed/mrs/3.png"></p><p>æ ¹æ®æŠ¥é”™ä¿¡æ¯æŸ¥çœ‹æœåŠ¡å™¨RegionServeræ˜¯å¥½çš„<br><img src="/medias/drawing-bed/mrs/1.png"></p><p>ä»è¿™é‡Œä¹Ÿèƒ½çœ‹åˆ°å„é¡¹æ•°æ®æ­£å¸¸ï¼Œä½†æ˜¯RegionServeræ—¶å¥½æ—¶å<br><img src="/medias/drawing-bed/mrs/4.png"></p><p>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆæ€€ç–‘æ˜¯æ‹‰èµ·ä¹‹åå°±è¢«å¹²æ‰ï¼Œå› ä¸ºä¸Šå›¾çš„HRegionServerä¹Ÿä¼šæ¶ˆå¤±ï¼‰<br><img src="/medias/drawing-bed/mrs/5.png"></p><p>è¿™é‡Œè¿›è¡Œäº†é‡å¯å¤§æ³•ï¼Œå¤§æ³•GGğŸ˜©<br><img src="/medias/drawing-bed/mrs/2.png"></p><p>åœ¨mrsæ§åˆ¶å°æ‰¾åˆ°hbaseæœåŠ¡ï¼Œè¿›å…¥ç›‘æ§é¡µé¢ï¼Œå¯ä»¥çœ‹åˆ°å¥½å‡ å¼ è¡¨å¤„äºè¢«æ‰“å¼€çš„çŠ¶æ€<br><img src="/medias/drawing-bed/mrs/7.png"></p><p>å¾€ä¸‹å¯ä»¥çœ‹åˆ°æœ‰25å¼ è¡¨å¤„äºRITçŠ¶æ€ï¼ï¼ï¼<br><img src="/medias/drawing-bed/mrs/8.png"></p><p>æœåŠ¡å™¨æ—¥å¿—ä¹Ÿèƒ½çœ‹åˆ°OPENINGçŠ¶æ€çš„è¡¨ï¼š<br><img src="/medias/drawing-bed/mrs/0.jpg"></p><p>å°±æ˜¯è¿™ä¸ªé¬¼ï¼Œå‚è€ƒ<a href="https://www.jianshu.com/p/d5697506741e">æ–‡ç« </a>å®é™…å¹¶æ²¡æœ‰è§£å†³ğŸ¤Ÿ<br>å› ä¸ºæˆ‘çš„é›†ç¾¤hbaseæ˜¯2.1.1ç‰ˆæœ¬ï¼Œå¾ˆå¤šå‘½ä»¤è¢«2.0+çš„hbaseæŠ›å¼ƒäº†ï¼Œæ–‡ç« ä¸­çš„å‘½ä»¤æˆ‘è¿™é‡Œæ‰§è¡ŒæŠ¥é”™ï¼šä¸å­˜åœ¨<br>å¦å¤–ä¸€ç¯‡<a href="https://blog.csdn.net/kinglyjn/article/details/78790425">æ–‡ç« </a>ç»™äº†è§£å†³æ€è·¯ï¼ŒæŸ¥çœ‹æ—¥å¿—æ˜¯å¦æ˜¯å†…å­˜æ³„æ¼å¯¼è‡´çš„RIT  </p><p>è¿™é‡Œçš„æˆªå›¾æ˜¯é”™çš„ï¼Œå®é™…ä¿®æ”¹çš„æ˜¯ThriftServerï¼ŒåŸæ¥çš„Xms128M Xmx128Mä¿®æ”¹ä¸ºXms1024M Xmx1024M<br><img src="/medias/drawing-bed/mrs/6.png"></p><p>ä¿®æ”¹ä¹‹åé‡å¯ç›¸å…³æœåŠ¡<code>HBase</code> <code>Hue</code>ï¼Œä¿®æ”¹å®Œä¼šæç¤ºé‡å¯ï¼ŒæŒ‰ç…§æç¤ºæ¥å°±è¡Œ<br>3åˆ†é’Ÿå†…ï¼Œå‘Šè­¦æ¶ˆå¤±ï¼ŒHBaseæ¢å¤  </p><p>è¿™é‡Œè§£å†³launcher.logè¿‡å¤§350G+(ç£ç›˜ç©ºé—´å‘Šè­¦)<br><img src="/medias/drawing-bed/mrs/9.png"></p><p>è¿™é‡Œè§£å†³ç†µå‘Šè­¦ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ps</span> â€“ef <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"haveged"</span> <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token string">"grep"</span><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"haveged"</span>yum -y <span class="token function">install</span> havegedsystemctl start havegedsystemctl <span class="token builtin class-name">enable</span> haveged.service<span class="token function">cat</span> /dev/random <span class="token operator">|</span> od â€“x<span class="token function">cat</span> /opt/mrs_clusterinfo <span class="token function">cat</span> /proc/sys/kernel/random/entropy_avail<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è§£å†³ç£ç›˜æ»¡å¯¼è‡´çš„æ•°æ®ä¸åŒæ­¥å‘Šè­¦ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /srv/BigData/journalnode/hacluster/current/<span class="token function">rm</span> -rf edits_*<span class="token function">rm</span> committed-txid <span class="token function">cat</span> /etc/hosts<span class="token function">scp</span> root@192.168.1.73:/srv/BigData/journalnode/hacluster/current/edit_000* ./<span class="token function">scp</span> root@192.168.1.73:/srv/BigData/journalnode/hacluster/current/edits_000* ./<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¯¦ç»†æ“ä½œæ—¥å¿—ï¼š<br>å…¶ä¸­<code>/opt/Bigdata/nodeagent/bin/start-agent.sh</code>æ˜¯ç¦æ­¢RegionServerè¢«è‡ªåŠ¨æ‹‰èµ·ï¼Œè¿™é‡Œå¯ä»¥å¿½ç•¥ï¼Œèµ°çš„å¼¯è·¯  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> /proc/sys/kernel/random/entropy_avail/bin/rpm -qa <span class="token operator">|</span> <span class="token function">grep</span> -w <span class="token string">"rng-tools"</span><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token string">"grep"</span> <span class="token operator">|</span> <span class="token function">grep</span> rngd <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">" "</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"\-o/dev/random"</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"\-r/dev/urandom"</span><span class="token function">cat</span> /proc/sys/kernel/random/entropy_availss -anptl <span class="token operator">|</span> <span class="token function">grep</span> :16020<span class="token function">su</span> - omm<span class="token builtin class-name">cd</span> /srv/BigData/journalnode/hacluster/current/ll -ltr<span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/<span class="token function">less</span> hbase-omm-regionserver-node-ana-corelSHL.log <span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.logll -ltr<span class="token function">vim</span> stop.log<span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.out<span class="token function">df</span> -h<span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.log ll -ltr<span class="token function">vim</span> regionserver-omm-20190826200902-pid11935-gc.log.0.current <span class="token function">df</span> -h<span class="token function">du</span> -sh /*<span class="token builtin class-name">cd</span> /var/<span class="token function">du</span> -sh /var/*<span class="token builtin class-name">cd</span> /var/log/<span class="token function">du</span> -sh ./*<span class="token builtin class-name">cd</span> Bigdata/<span class="token function">du</span> -sh ./*<span class="token builtin class-name">cd</span> presto<span class="token function">du</span> -sh ./*<span class="token builtin class-name">cd</span> worker/<span class="token function">du</span> -sh ./*<span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/<span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.log <span class="token function">vi</span> regionserver-omm-20190828154122-pid6762-gc.log.0.current jpsll <span class="token operator">|</span><span class="token function">grep</span> <span class="token number">10361</span><span class="token function">vi</span> regionserver-omm-20190828183909-pid10361-gc.log.3.current<span class="token function">ssh</span> node-master1rowr<span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/ll -ltr<span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.out<span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.log <span class="token function">unzip</span> hbase-omm-regionserver-node-ana-corelSHL.2020-06-04_10-57-56.<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>.log.zipll -ltr<span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.2020-06-04_10-57-56.<span class="token punctuation">\</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">\</span><span class="token punctuation">]</span>.log<span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/<span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.log <span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.out<span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.log <span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/ll -ltr<span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.out<span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.log <span class="token function">free</span> -h<span class="token function">top</span> -c<span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/<span class="token function">ls</span><span class="token builtin class-name">cd</span> rs/<span class="token function">ls</span><span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.log <span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.2019-08-24_02-55-49.<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>.log<span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> regionserver<span class="token function">ls</span><span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/ll<span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.out<span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.log<span class="token function">netstat</span> -apn <span class="token operator">|</span><span class="token function">grep</span> <span class="token number">2181</span>ll<span class="token function">vi</span> stop.logll<span class="token builtin class-name">cd</span> /var/log/Bigdata/nodeagent/ll<span class="token builtin class-name">cd</span> agentlog/ll<span class="token function">vi</span> agent.log <span class="token builtin class-name">cd</span> -ll<span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/ll<span class="token function">vi</span> regionserver-omm-20200604162930-pid7626-gc.log.0.current<span class="token function">free</span> -gjps<span class="token function">top</span> -cll<span class="token function">vi</span> stop.log<span class="token builtin class-name">cd</span> /var/log/Bigdata/nodeagent/ll<span class="token builtin class-name">cd</span> agentlog/ll<span class="token function">vi</span> agent.log <span class="token builtin class-name">cd</span> /opt/Bigdata/nodeagent/bin/ll<span class="token function">vi</span> start-agent.sh <span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> nodeagentll<span class="token function">vi</span> start-agent.sh <span class="token builtin class-name">cd</span> /opt/Bigdata/MRS_Current/1_13_RegionServer/install/ll<span class="token builtin class-name">cd</span> hbasell<span class="token builtin class-name">cd</span> bin/ll<span class="token builtin class-name">cd</span> /opt/Bigdata/MRS_Current/ll<span class="token builtin class-name">cd</span> 1_13_RegionServer/ll<span class="token builtin class-name">cd</span> etc/ll<span class="token function">vi</span> ENV_VARS jps<span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/ll<span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.log <span class="token builtin class-name">exit</span><span class="token builtin class-name">cd</span> /opt/Bigdata/nodeagent/ll<span class="token builtin class-name">cd</span> bin/ll<span class="token function">mv</span> start-agent.sh start-agent.sh.bak<span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> nodeagent<span class="token function">kill</span> -9 <span class="token number">7548</span><span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/ll<span class="token function">vi</span> <span class="token number">14316</span><span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.log jps<span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> region<span class="token builtin class-name">cd</span> /opt/Bigdata/nodeagent/ll<span class="token builtin class-name">cd</span> bin/ll<span class="token function">mv</span> start-agent.sh.bak start-agent.sh<span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> nodeagentjps<span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/ll<span class="token function">date</span>jps<span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> regionll<span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> nodeagetn<span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> nodeag<span class="token builtin class-name">cd</span> /opt/Bigdata/nodeagent/ll<span class="token builtin class-name">cd</span> bin/lljps<span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> nodeagentjps<span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/ll<span class="token function">date</span>jps<span class="token function">ps</span> -ef <span class="token operator">|</span><span class="token function">grep</span> agentjps<span class="token function">kill</span> -9 <span class="token number">10893</span><span class="token function">mv</span> /opt/Bigdata/nodeagent/bin/start-agent.sh /opt/Bigdata/nodeagent/bin/start-agent.sh.bakjpslll<span class="token function">date</span><span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.log jps<span class="token builtin class-name">cd</span> /opt/Bigdata/MRS_Current/ll<span class="token builtin class-name">cd</span> 1_13_RegionServer/install/hbase/bin/<span class="token function">sh</span> hbase-daemon.sh start regionserverjps<span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rs/ll<span class="token function">vi</span> <span class="token function">mv</span> /opt/Bigdata/nodeagent/bin/start-agent.sh /opt/Bigdata/nodeagent/bin/start-agent.sh.bakll<span class="token function">vi</span> stop.log<span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.log <span class="token builtin class-name">cd</span> /var/log/Bigdata/nodeagent/ll<span class="token function">vi</span> scriptlog/<span class="token builtin class-name">cd</span> scriptlog/ll<span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>ll<span class="token builtin class-name">cd</span> agentlog/ll:qll<span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>ll<span class="token builtin class-name">cd</span> monitorlog/ll<span class="token function">vi</span> monitor.log <span class="token builtin class-name">cd</span> <span class="token punctuation">..</span>/ll<span class="token builtin class-name">cd</span> agentlog/ll<span class="token function">vi</span> agent.<span class="token function">vi</span> agent.log jps<span class="token function">mv</span> /opt/Bigdata/nodeagent/bin/start-agent.sh.bak /opt/Bigdata/nodeagent/bin/start-agent.shjps<span class="token function">kill</span> -9 <span class="token number">25046</span><span class="token function">mv</span> /opt/Bigdata/nodeagent/bin/start-agent.sh /opt/Bigdata/nodeagent/bin/start-agent.sh.bakjpsjps <span class="token function">netstat</span> -apn <span class="token operator">|</span><span class="token function">grep</span> <span class="token number">28400</span>ll<span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/rsll<span class="token function">date</span><span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.log jps<span class="token function">vi</span> <span class="token function">mv</span> /opt/Bigdata/nodeagent/bin/start-agent.sh /opt/Bigdata/nodeagent/bin/start-agent.sh.bak<span class="token function">vi</span> regionserver-omm-20200604170721-pid28400-gc.log.0.current <span class="token builtin class-name">cd</span> /opt/Bigdata/MRS_Current/1_13_RegionServer/ll<span class="token builtin class-name">cd</span> etc/ll<span class="token function">vi</span> ENV_VARS <span class="token function">mv</span> /opt/Bigdata/nodeagent/bin/start-agent.sh.bak /opt/Bigdata/nodeagent/bin/start-agent.sh<span class="token builtin class-name">exit</span><span class="token function">cat</span> /etc/hosts<span class="token function">ssh</span> <span class="token number">192.168</span>.1.233<span class="token builtin class-name">exit</span><span class="token builtin class-name">cd</span> /var/log/Bigdata/<span class="token function">ls</span><span class="token builtin class-name">cd</span> hbase/<span class="token function">ls</span><span class="token builtin class-name">cd</span> rs/<span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.log ll<span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.outll<span class="token function">vim</span> hbase-omm-regionserver-node-ana-corelSHL.logll<span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.outll<span class="token function">vi</span> regionserver-omm-20200604161255-pid12637-gc.log.0.currentlltailf hbase-omm-regionserver-node-ana-corelSHL.log <span class="token function">vi</span> hbase-omm-regionserver-node-ana-corelSHL.log ll /opt/Bigdata/tmp//hbase-omm-regionserver.pidll /opt/Bigdata/tmp/<span class="token builtin class-name">pwd</span><span class="token function">cat</span> /var/log/Bigdata/hbase/rs/hbase-omm-regionserver.pi<span class="token function">cat</span>  /opt/Bigdata/tmp/hbase-omm-regionserver.pid<span class="token builtin class-name">cd</span> /opt/Bigdata/tmp<span class="token function">ls</span>ll<span class="token function">cat</span> ll /opt/Bigdata/tmp/ll /opt/Bigdata/tmp/<span class="token builtin class-name">pwd</span><span class="token builtin class-name">cd</span> /opt/Bigdata/tmp/ll<span class="token function">cat</span> hbase-omm-regionserver.pidjps<span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">12916</span><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">12902</span><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">12916</span><span class="token builtin class-name">cd</span> /var/log/Bigdata/hbase/<span class="token function">ls</span><span class="token builtin class-name">cd</span> rs/jps<span class="token builtin class-name">pwd</span><span class="token builtin class-name">cd</span> /srv/BigData/journalnode/hacluster/current/ll <span class="token function">rm</span> -rf edits_*ll<span class="token function">rm</span> committed-txid ll<span class="token function">cat</span> /etc/hosts<span class="token function">scp</span> root@192.168.1.73:/srv/BigData/journalnode/hacluster/current/edit_000* ./ll<span class="token function">scp</span> root@192.168.1.73:/srv/BigData/journalnode/hacluster/current/edits_000* .//bin/rpm -qa <span class="token operator">|</span> <span class="token function">grep</span> -w <span class="token string">"rng-tools"</span><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token string">"grep"</span> <span class="token operator">|</span> <span class="token function">grep</span> rngd <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">" "</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"\-o/dev/random"</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"\-r/dev/urandom"</span><span class="token builtin class-name">echo</span> <span class="token string">'EXTRAOPTIONS="-r /dev/urandom -o /dev/random"'</span> <span class="token operator">>></span> /etc/sysconfig/rngd<span class="token function">service</span> rngd start<span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token string">"grep"</span> <span class="token operator">|</span> <span class="token function">grep</span> rngd <span class="token operator">|</span> <span class="token function">tr</span> -d <span class="token string">" "</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"\-o/dev/random"</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"\-r/dev/urandom"</span><span class="token function">ps</span> â€“ef <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"haveged"</span> <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token string">"grep"</span><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">"haveged"</span>yum -y <span class="token function">install</span> havegedsystemctl start havegedsystemctl <span class="token builtin class-name">enable</span> haveged.service<span class="token function">cat</span> /dev/random <span class="token operator">|</span> od â€“x<span class="token function">cat</span> /opt/mrs_clusterinfo <span class="token function">cat</span> /proc/sys/kernel/random/entropy_availhdfs <span class="token function">fsck</span> /hbase/WALs<span class="token function">df</span> -hjps<span class="token function">free</span> -h<span class="token function">top</span> <span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">14316</span><span class="token function">ps</span> -ef<span class="token function">ps</span> -aux <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">14316</span><span class="token builtin class-name">cd</span> /srv/BigData/journalnode/hacluster/current/ll<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> hadoop </tag>
            
            <tag> mapreduce </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>linux è¿è¡Œ.netç¨‹åº</title>
      <link href="/posts/950d.html"/>
      <url>/posts/950d.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="å°†æ‰“åŒ…å¥½çš„åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨"><a href="#å°†æ‰“åŒ…å¥½çš„åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨" class="headerlink" title="å°†æ‰“åŒ…å¥½çš„åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨"></a>å°†æ‰“åŒ…å¥½çš„åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å®‰è£…yumæº</span><span class="token function">rpm</span> -Uvh https://packages.microsoft.com/config/centos/7/packages-microsoft-prod.rpm<span class="token comment"># å®‰è£….netè¿è¡Œå·¥å…·å’Œä¾èµ–</span>yum <span class="token function">install</span> dotnet-sdk-3.1 aspnetcore-runtime-3.1 dotnet-runtime-3.1 -y<span class="token comment"># å°†ä¸.exeåŒåçš„.dllæ–‡ä»¶æ”¾å…¥åå°è¿è¡Œå³å¯</span><span class="token function">nohup</span> dotnet FlowTestServer.dll <span class="token assign-left variable">urls</span><span class="token operator">=</span><span class="token string">"http://*:5000"</span> <span class="token operator">>></span> logs.log <span class="token operator"><span class="token file-descriptor important">2</span>></span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span><span class="token comment"># æŸ¥çœ‹ç«¯å£æ˜¯å¦å¯ç”¨</span>ss -anptl <span class="token operator">|</span> <span class="token function">grep</span> :5000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> .net </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pycharmè¿æ¥æœåŠ¡å™¨</title>
      <link href="/posts/61e3.html"/>
      <url>/posts/61e3.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="æ·»åŠ è¿œç¨‹æœåŠ¡å™¨"><a href="#æ·»åŠ è¿œç¨‹æœåŠ¡å™¨" class="headerlink" title="æ·»åŠ è¿œç¨‹æœåŠ¡å™¨"></a>æ·»åŠ è¿œç¨‹æœåŠ¡å™¨</h1><ol><li><p>æ‰“å¼€ æ–‡ä»¶ â€“&gt; è®¾ç½®<br><img src="/medias/drawing-bed/pycharm/0.jpg"></p></li><li><p>åœ¨ å·¥å…· SSH Configä¸­æ·»åŠ è¿œç¨‹æœåŠ¡å™¨ä¿¡æ¯<br><img src="/medias/drawing-bed/pycharm/2.jpg"></p></li><li><p>åœ¨ é¡¹ç›® è¿™é‡Œå¯ä»¥çœ‹åˆ°ä¸€äº›æœ¬æœºçš„ç¯å¢ƒä¿¡æ¯<br><img src="/medias/drawing-bed/pycharm/1.jpg"></p></li><li><p>é€‰æ‹© Add åï¼Œé€‰æ‹© SSH è¿æ¥ï¼Œæ‰¾åˆ°åˆšæ‰é…ç½®å¥½çš„è¿œç¨‹æœåŠ¡å™¨<br><img src="/medias/drawing-bed/pycharm/3.jpg"></p></li><li><p>é…ç½®å¥½ä¸Šé¢çš„å†…å®¹ï¼Œé€‰æ‹© next ï¼Œé…ç½®pythonç¯å¢ƒã€å·¥ä½œç›®å½•<br><img src="/medias/drawing-bed/pycharm/4.jpg"></p></li><li><p>é…ç½®å¥½ä¿å­˜ï¼Œä¼šè‡ªåŠ¨ä¸Šä¼ æœ¬åœ°æ–‡ä»¶åˆ°è¿œç¨‹ï¼Œç­‰å¾…ä¸€ä¼š<br><img src="/medias/drawing-bed/pycharm/5.jpg"></p></li><li><p>æŸ¥çœ‹é¡¹ç›®ç¯å¢ƒå·²ç»æ˜¯è¿œç¨‹æœåŠ¡å™¨çš„äº†<br><img src="/medias/drawing-bed/pycharm/11.jpg"></p></li></ol><h1 id="å…¶å®ƒé…ç½®"><a href="#å…¶å®ƒé…ç½®" class="headerlink" title="å…¶å®ƒé…ç½®"></a>å…¶å®ƒé…ç½®</h1><ol><li><p>ä¿®æ”¹æ–‡ä»¶å­—ä½“ç¼–ç <br><img src="/medias/drawing-bed/pycharm/6.jpg"></p></li><li><p>æ›´æ”¹ä¸ºè‡ªåŠ¨ä¿å­˜<br><img src="/medias/drawing-bed/pycharm/7.jpg"></p></li><li><p>ä¿®æ”¹æ¢è¡Œç¬¦<br><img src="/medias/drawing-bed/pycharm/8.jpg"></p></li><li><p>è§£å†³ pycharm terminal æ˜¾ç¤ºè¿›åº¦æ¡ä¹±ç <br><img src="/medias/drawing-bed/pycharm/9.jpg"></p></li><li><p>æ–°å»ºè¿œç¨‹ç»ˆç«¯ï¼Œé€‰æ‹©è‡ªå·±çš„è¿œç¨‹æœåŠ¡å™¨å³å¯<br><img src="/medias/drawing-bed/pycharm/10.jpg"></p></li><li><p>å…¶å®ƒçš„ç”µè„‘ä¹Ÿå¯ä»¥æ‹‰å–ï¼ˆé…ç½®å¥½è¿œç¨‹æœåŠ¡å™¨åœ°å€å³å¯ï¼‰<br>&emsp;&emsp;åœ¨æ­¤æ›´æ”¹ä¸ä¼šè¢«è®°å½•ï¼Œå»ºè®®å·¥ä½œç›®å½•å’Œ<a href="../../others/git/">git</a>é…åˆä½¿ç”¨<br><img src="/medias/drawing-bed/pycharm/12.jpg"></p></li></ol><h1 id="ç»“è¯­"><a href="#ç»“è¯­" class="headerlink" title="ç»“è¯­"></a>ç»“è¯­</h1><p>&emsp;&emsp;æœ€ååœ¨ Windows ä¸»æœºçš„å·¥ä½œç›®å½•ï¼Œæ–°å»ºã€åˆ é™¤æ–‡ä»¶å’Œç¼–è¾‘å†…å®¹ä¼šå®æ—¶åŒæ­¥åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> pycharm </tag>
            
            <tag> è½¯ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>psutilå®‰è£…</title>
      <link href="/posts/5127.html"/>
      <url>/posts/5127.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p><code>psutil</code> æ˜¯ä¸€ä¸ªè·¨å¹³å°åº“<br>èƒ½å¤Ÿè½»æ¾å®ç°è·å–ç³»ç»Ÿè¿è¡Œçš„è¿›ç¨‹å’Œç³»ç»Ÿåˆ©ç”¨ç‡<br>åŒ…æ‹¬ CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œç­‰ä¿¡æ¯<br><code>psutil</code> ä¸»è¦åº”ç”¨äºç³»ç»Ÿç›‘æ§ã€åˆ†æå’Œé™åˆ¶ç³»ç»Ÿèµ„æºåŠè¿›ç¨‹çš„ç®¡ç†<br><code>psutil</code> å®ç°äº†åŒç­‰å‘½ä»¤è¡Œå·¥å…·æä¾›çš„åŠŸèƒ½ï¼Œ<br>å¦‚ <code>ps</code>ã€<code>top</code>ã€<code>lsof</code>ã€<code>netstat</code>ã€<code>ifconfig</code>ã€<code>who</code>ã€<code>df</code>ã€<code>kill</code>ã€<code>free</code>ã€<code>nice</code>ã€<code>ionice</code>ã€<code>iostat</code>ã€<code>iotop</code>ã€<code>uptime</code>ã€<code>pidof</code>ã€<code>tty</code>ã€<code>taskset</code>ã€<code>pmap</code> ç­‰ã€‚<br>ç›®å‰æ”¯æŒ 32 ä½å’Œ 64 ä½çš„ <code>Linux</code>ã€<code>Windows</code>ã€<code>OS X</code>ã€<code>FreeBSD</code> å’Œ <code>Sun Solaris</code> ç­‰æ“ä½œç³»ç»Ÿ  </p><p>Linuxå®‰è£…psutilæŠ¥é”™ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">unable to execute <span class="token string">'gcc'</span><span class="token builtin class-name">:</span> No such <span class="token function">file</span> or directory   <span class="token comment"># gccè¦å®‰è£…</span>psutil/_psutil_common.c:9:20: è‡´å‘½é”™è¯¯ï¼šPython.hï¼šæ²¡æœ‰é‚£ä¸ªæ–‡ä»¶æˆ–ç›®å½•   <span class="token comment"># python-develè¦å®‰è£…</span>Using legacy setup.py <span class="token function">install</span> <span class="token keyword">for</span> psutil, since package <span class="token string">'wheel'</span> is not installed.   <span class="token comment"># pipå®‰è£…wheel</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å®‰è£…psutil  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum -y <span class="token function">install</span> python36-devel gccpip <span class="token function">install</span> wheel   <span class="token comment"># pip3 install psutil</span><span class="token punctuation">[</span>root@bogon ~<span class="token punctuation">]</span><span class="token comment"># pip3 install psutil</span>Looking <span class="token keyword">in</span> indexes: http://mirrors.aliyun.com/pypi/simple/Collecting psutil  Downloading http://mirrors.aliyun.com/pypi/packages/1c/ca/5b8c1fe032a458c2c4bcbe509d1401dca9dda35c7fc46b36bb81c2834740/psutil-5.6.3.tar.gz <span class="token punctuation">(</span>435kB<span class="token punctuation">)</span>     <span class="token operator">|</span>â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ<span class="token operator">|</span> 440kB <span class="token number">4</span>.6MB/s Installing collected packages: psutil  Running setup.py <span class="token function">install</span> <span class="token keyword">for</span> psutil <span class="token punctuation">..</span>. <span class="token keyword">done</span>Successfully installed psutil-5.6.3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> pythonæ‚è®° </tag>
            
            <tag> psutil </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pip3å®‰è£…</title>
      <link href="/posts/8828.html"/>
      <url>/posts/8828.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="å®‰è£…pip3"><a href="#å®‰è£…pip3" class="headerlink" title="å®‰è£…pip3"></a>å®‰è£…pip3</h1><p>åœ¨Linuxç³»ç»Ÿä¸­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum -y <span class="token function">install</span> python36-pip<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="å‡çº§"><a href="#å‡çº§" class="headerlink" title="å‡çº§"></a>å‡çº§</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3 <span class="token function">install</span> -U pip   <span class="token comment"># å¦‚æœå‡ºé—®é¢˜ï¼Œä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤å‡çº§</span>pip3 <span class="token function">install</span> --upgrade pipeasy_install-3.6 --upgrade pip<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="å®‰è£…æŒ‡å®šç‰ˆæœ¬"><a href="#å®‰è£…æŒ‡å®šç‰ˆæœ¬" class="headerlink" title="å®‰è£…æŒ‡å®šç‰ˆæœ¬"></a>å®‰è£…æŒ‡å®šç‰ˆæœ¬</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3 <span class="token function">install</span> <span class="token assign-left variable">Django</span><span class="token operator">==</span><span class="token number">1.7</span>   <span class="token comment"># æŒ‡å®šå®‰è£…Django1.7ç‰ˆæœ¬</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å¸è½½åŒ…"><a href="#å¸è½½åŒ…" class="headerlink" title="å¸è½½åŒ…"></a>å¸è½½åŒ…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3 uninstall Django<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æœç´¢åŒ…"><a href="#æœç´¢åŒ…" class="headerlink" title="æœç´¢åŒ…"></a>æœç´¢åŒ…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3 search Django<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æ˜¾ç¤ºå®‰è£…åŒ…ä¿¡æ¯"><a href="#æ˜¾ç¤ºå®‰è£…åŒ…ä¿¡æ¯" class="headerlink" title="æ˜¾ç¤ºå®‰è£…åŒ…ä¿¡æ¯"></a>æ˜¾ç¤ºå®‰è£…åŒ…ä¿¡æ¯</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3 show <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æŸ¥çœ‹æŒ‡å®šåŒ…çš„è¯¦ç»†ä¿¡æ¯"><a href="#æŸ¥çœ‹æŒ‡å®šåŒ…çš„è¯¦ç»†ä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹æŒ‡å®šåŒ…çš„è¯¦ç»†ä¿¡æ¯"></a>æŸ¥çœ‹æŒ‡å®šåŒ…çš„è¯¦ç»†ä¿¡æ¯</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3 show -f Django<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="åˆ—å‡ºå·²å®‰è£…çš„åŒ…"><a href="#åˆ—å‡ºå·²å®‰è£…çš„åŒ…" class="headerlink" title="åˆ—å‡ºå·²å®‰è£…çš„åŒ…"></a>åˆ—å‡ºå·²å®‰è£…çš„åŒ…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3 list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="æŸ¥çœ‹å¯å‡çº§çš„åŒ…"><a href="#æŸ¥çœ‹å¯å‡çº§çš„åŒ…" class="headerlink" title="æŸ¥çœ‹å¯å‡çº§çš„åŒ…"></a>æŸ¥çœ‹å¯å‡çº§çš„åŒ…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3 list -o<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ³¨æ„å¦‚æœéœ€è¦å®‰è£…Python3çš„å®‰è£…åŒ…ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python3 -m pip <span class="token function">install</span> numpy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ³¨æ„å¦‚æœéœ€è¦å®‰è£…Python2çš„å®‰è£…åŒ…ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python2 -m pip <span class="token function">install</span> numpy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>ä¸å»ºè®®å¤§å®¶ç›´æ¥ç”¨pip installçš„æ–¹å¼å®‰è£…pythonåŒ…ï¼Œè¿™æ ·ä½ ä¼šä¸æ¸…æ¥šè£…çš„æ˜¯python2çš„åŒ…è¿˜æ˜¯python3çš„åŒ…</p><h1 id="pipæ›´æ¢å›½å†…æº"><a href="#pipæ›´æ¢å›½å†…æº" class="headerlink" title="pipæ›´æ¢å›½å†…æº"></a>pipæ›´æ¢å›½å†…æº</h1><p>å›½å†…æºï¼š<br>æ–°ç‰ˆubuntuè¦æ±‚ä½¿ç”¨httpsæºï¼Œè¦æ³¨æ„ã€‚<br>æ¸…åï¼š<code>https://pypi.tuna.tsinghua.edu.cn/simple</code><br>é˜¿é‡Œäº‘ï¼š<code>http://mirrors.aliyun.com/pypi/simple/</code><br>ä¸­å›½ç§‘æŠ€å¤§å­¦ï¼š<code>https://pypi.mirrors.ustc.edu.cn/simple/</code><br>åä¸­ç†å·¥å¤§å­¦ï¼š<code>http://pypi.hustunique.com/</code><br>å±±ä¸œç†å·¥å¤§å­¦ï¼š<code>http://pypi.sdutlinux.org/</code><br>è±†ç“£ï¼š<code>http://pypi.douban.com/simple/</code><br>æ°¸ä¹…ä¿®æ”¹ï¼š<br>Linuxä¸‹ï¼Œä¿®æ”¹ <code>~/.pip/pip.conf</code> (æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åŠæ–‡ä»¶ã€‚æ–‡ä»¶å¤¹è¦åŠ â€.â€ï¼Œè¡¨ç¤ºæ˜¯éšè—æ–‡ä»¶å¤¹)<br>å†…å®¹å¦‚ä¸‹ï¼š  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">[global]index-url &#x3D; http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple[install]trusted-host&#x3D;mirrors.aliyun.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>windowsä¸‹ï¼Œç›´æ¥åœ¨userç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªpipç›®å½•ï¼Œå¦‚ï¼š<code>C:\Users\xx\pip</code>ï¼Œæ–°å»ºæ–‡ä»¶<code>pip.ini</code>ã€‚å†…å®¹åŒä¸Šã€‚  </p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> pythonæ‚è®° </tag>
            
            <tag> pip3 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ERRç£ç›˜çˆ†æ»¡</title>
      <link href="/posts/300f.html"/>
      <url>/posts/300f.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="è®°ä¸€æ¬¡waråŒ…æ›´æ–°æŠ¥é”™"><a href="#è®°ä¸€æ¬¡waråŒ…æ›´æ–°æŠ¥é”™" class="headerlink" title="è®°ä¸€æ¬¡waråŒ…æ›´æ–°æŠ¥é”™"></a>è®°ä¸€æ¬¡waråŒ…æ›´æ–°æŠ¥é”™</h1><p>&emsp;&emsp;åˆ é™¤tomcatä¸‹é¢çš„webappsç›®å½•ä¸­çš„waråŒ…ï¼Œxftpä¸Šä¼ æ–°åŒ…å¤±è´¥ï¼Œä½¿ç”¨<code>du</code>å’Œ<code>df</code>å‘½ä»¤æŸ¥è¯¢çš„ç£ç›˜å®¹é‡ä¸ä¸€è‡´</p><p>&emsp;&emsp;å¯¼è‡´è¿™ä¸ªä¸¤ä¸ªå‘½ä»¤æŸ¥çœ‹ç£ç›˜å®¹é‡ä¸ä¸€è‡´çš„åŸå› æ˜¯ï¼Œç”¨æˆ·åˆ é™¤äº†å¤§é‡çš„æ–‡ä»¶è¢«åˆ é™¤åï¼Œåœ¨æ–‡ä»¶ç³»ç»Ÿç›®å½•ä¸­å·²ç»ä¸å¯è§äº†ï¼Œæ‰€ä»¥duå°±ä¸ä¼šå†ç»Ÿè®¡å®ƒã€‚ç„¶è€Œå¦‚æœæ­¤æ—¶è¿˜æœ‰è¿è¡Œçš„è¿›ç¨‹æŒæœ‰è¿™ä¸ªå·²ç»è¢«åˆ é™¤çš„æ–‡ä»¶å¥æŸ„ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶å°±ä¸ä¼šçœŸæ­£åœ¨ç£ç›˜ä¸­è¢«åˆ é™¤ï¼Œåˆ†åŒºè¶…çº§å—ä¸­çš„ä¿¡æ¯ä¹Ÿå°±ä¸ä¼šæ›´æ”¹ï¼Œdfä»ä¼šç»Ÿè®¡è¿™ä¸ªè¢«åˆ é™¤çš„æ–‡ä»¶ã€‚  </p><p>&emsp;&emsp;å¯é€šè¿‡ lsofå‘½ä»¤æŸ¥è¯¢å¤„äºdeletedçŠ¶æ€çš„æ–‡ä»¶ï¼Œè¢«åˆ é™¤çš„æ–‡ä»¶åœ¨ç³»ç»Ÿä¸­è¢«æ ‡è®°ä¸ºdeletedã€‚å¦‚æœç³»ç»Ÿæœ‰å¤§é‡deletedçŠ¶æ€çš„æ–‡ä»¶ï¼Œä¼šå¯¼è‡´duå’Œdfç»Ÿè®¡ç»“æœä¸ä¸€è‡´ã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">lsof</span> <span class="token operator">|</span> <span class="token function">grep</span> delted   <span class="token comment"># åœ¨optç›®å½•ä¸‹æ‰§è¡Œlsof | grep deleted</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><em><font color=red>è¿™é‡Œè®°å½•ä¸å®Œå…¨ï¼Œæ—¶é—´å¤ªé•¿äº†ï¼Œä¹‹å‰çš„è®°å½•ä¸æ˜¯å¾ˆè¯¦ç»†</font></em></p><p>è§£å†³: æ‰§è¡Œkill 29080  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># kill 29080</span><span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># df -h</span>Filesystem      Size  Used Avail Use% Mounted ondevtmpfs        <span class="token number">3</span>.9G     <span class="token number">0</span>  <span class="token number">3</span>.9G   <span class="token number">0</span>% /devtmpfs           <span class="token number">3</span>.9G     <span class="token number">0</span>  <span class="token number">3</span>.9G   <span class="token number">0</span>% /dev/shmtmpfs           <span class="token number">3</span>.9G  361M  <span class="token number">3</span>.5G  <span class="token number">10</span>% /runtmpfs           <span class="token number">3</span>.9G     <span class="token number">0</span>  <span class="token number">3</span>.9G   <span class="token number">0</span>% /sys/fs/cgroup/dev/vda1        40G   10G   28G  <span class="token number">27</span>% /                          <span class="token comment"># è¿™é‡Œç£ç›˜å·²ç»é™ä¸‹æ¥äº†</span>tmpfs           783M     <span class="token number">0</span>  783M   <span class="token number">0</span>% /run/user/0/dev/vdb1       197G  <span class="token number">2</span>.3G  185G   <span class="token number">2</span>% /mnt/opt<span class="token punctuation">[</span>root@client ~<span class="token punctuation">]</span><span class="token comment"># du / -sh</span>du: cannot access â€˜/proc/6406/task/6406/fd/4â€™: No such <span class="token function">file</span> or directorydu: cannot access â€˜/proc/6406/task/6406/fdinfo/4â€™: No such <span class="token function">file</span> or directorydu: cannot access â€˜/proc/6406/fd/3â€™: No such <span class="token function">file</span> or directorydu: cannot access â€˜/proc/6406/fdinfo/3â€™: No such <span class="token function">file</span> or directory13G/<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> tomcat </tag>
            
            <tag> war </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sourcetree3.x è·³è¿‡æ³¨å†Œbitbucket</title>
      <link href="/posts/b66.html"/>
      <url>/posts/b66.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>&emsp;&emsp;å‰æï¼šä½¿ç”¨è…¾è®¯ç”µè„‘ç®¡å®¶è‡ªå¸¦çš„è½¯ä»¶ç®¡ç†å·¥å…·ï¼Œå…ˆå®‰è£…gitï¼Œåœ¨å®‰è£…sourcetreeï¼Œè¿™ä¸¤ä¸ªè½¯ä»¶åœ¨è½¯ä»¶ç®¡ç†é‡Œé¢éƒ½æœ‰ï¼Œ<em>å®‰è£…gitä¸ç”¨ä¿®æ”¹é…ç½®ï¼Œç›´æ¥ä¸‹ä¸€æ­¥ï¼Œç›´åˆ°å®‰è£…å®Œæˆ</em>ï¼Œè¿™ä¸ªæ—¶å€™å†å®‰è£…sourcetreeã€‚å¦‚æœä½ æ˜¯èœé¸Ÿsourcetreeå…¨ä¸­æ–‡ç•Œé¢å¯ä»¥å¾ˆå¥½çš„å¸¦ä½ å…¥é—¨gitï¼Œä¸€äº›é”™è¯¯ä»éœ€è¦æ‚¨æ‰‹åŠ¨æ‰§è¡Œgitå‘½ä»¤ï¼Œå¾ˆå°‘æƒ…å†µä¸‹ä¼šå‘ç”Ÿï¼Œå¦‚æœä½ æ˜¯ç”¨gitçš„è€æ‰‹ï¼Œsourcetreeå¯ä»¥è®©æ‚¨çš„å·¥ä½œæ•ˆç‡äº‹åŠåŠŸå€ğŸŠâ€ã€‚  </p><p><font color=red>æµ‹è¯•jsdelivråŠ é€ŸGitHubå›¾ç‰‡ï¼Œå—jsdelivræœåŠ¡å™¨å½±å“ï¼Œå¯èƒ½ä¼šé€ æˆå›¾ç‰‡æ˜¾ç¤ºå¼‚å¸¸</font></p><h1 id="ä½¿ç”¨è½¯ä»¶ç®¡ç†å®‰è£…sourcetree"><a href="#ä½¿ç”¨è½¯ä»¶ç®¡ç†å®‰è£…sourcetree" class="headerlink" title="ä½¿ç”¨è½¯ä»¶ç®¡ç†å®‰è£…sourcetree"></a>ä½¿ç”¨è½¯ä»¶ç®¡ç†å®‰è£…sourcetree</h1><h2 id="ç¬¬ä¸€æ­¥ç›´æ¥å…³é—­æ­¤çª—å£ã€‚"><a href="#ç¬¬ä¸€æ­¥ç›´æ¥å…³é—­æ­¤çª—å£ã€‚" class="headerlink" title="ç¬¬ä¸€æ­¥ç›´æ¥å…³é—­æ­¤çª—å£ã€‚"></a>ç¬¬ä¸€æ­¥ç›´æ¥å…³é—­æ­¤çª—å£ã€‚</h2><p><img src="/medias/drawing-bed/sourcetree/0.jpg"></p><p>ä½¿ç”¨<i class="fab fa-windows"></i>+Ré”®ï¼Œè¾“å…¥<code>%LocalAppData%\Atlassian</code>å›è½¦ï¼Œæ¥ç€è¿›å…¥SourceTreeç›®å½•ï¼Œåˆ›å»ºaccounts.jsonæ–‡ä»¶ï¼š  </p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>  <span class="token punctuation">&#123;</span>    <span class="token property">"$id"</span><span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>    <span class="token property">"$type"</span><span class="token operator">:</span> <span class="token string">"SourceTree.Api.Host.Identity.Model.IdentityAccount, SourceTree.Api.Host.Identity"</span><span class="token punctuation">,</span>    <span class="token property">"Authenticate"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>    <span class="token property">"HostInstance"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"$id"</span><span class="token operator">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span>      <span class="token property">"$type"</span><span class="token operator">:</span> <span class="token string">"SourceTree.Host.Atlassianaccount.AtlassianAccountInstance, SourceTree.Host.AtlassianAccount"</span><span class="token punctuation">,</span>      <span class="token property">"Host"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>        <span class="token property">"$id"</span><span class="token operator">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>        <span class="token property">"$type"</span><span class="token operator">:</span> <span class="token string">"SourceTree.Host.Atlassianaccount.AtlassianAccountHost, SourceTree.Host.AtlassianAccount"</span><span class="token punctuation">,</span>        <span class="token property">"Id"</span><span class="token operator">:</span> <span class="token string">"atlassian account"</span>      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>      <span class="token property">"BaseUrl"</span><span class="token operator">:</span> <span class="token string">"https://id.atlassian.com/"</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token property">"Credentials"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>      <span class="token property">"$id"</span><span class="token operator">:</span> <span class="token string">"4"</span><span class="token punctuation">,</span>      <span class="token property">"$type"</span><span class="token operator">:</span> <span class="token string">"SourceTree.Model.BasicAuthCredentials, SourceTree.Api.Account"</span><span class="token punctuation">,</span>      <span class="token property">"Username"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>      <span class="token property">"Email"</span><span class="token operator">:</span> <span class="token null keyword">null</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token property">"IsDefault"</span><span class="token operator">:</span> <span class="token boolean">false</span>  <span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä½¿ç”¨<i class="fab fa-windows"></i>+Ré”®ï¼Œè¾“å…¥<code>%LocalAppData%\Atlassian</code>å›è½¦ï¼Œæ¥ç€è¿›å…¥<code>SourceTree.exe_Url_czfpfghshbirstykwmn1gvqek200yvfx</code>ç›®å½•ï¼Œæ­¤ç›®å½•åä¼šéšç€ç‰ˆæœ¬å˜åŒ–ï¼Œæ¥ç€è¿›å…¥3.3.8.3848ç›®å½•ï¼Œæ‰“å¼€user.configæ–‡ä»¶ï¼Œåœ¨é‡Œé¢åŠ å…¥å…­è¡Œä»£ç ã€‚æˆ‘çš„æ˜¯3.3.8ï¼Œè€Œè…¾è®¯è½¯ä»¶ç®¡ç†çš„ç‰ˆæœ¬æ˜¯3.2.6ï¼Œå¯åœ¨â€å·¥å…·Tâ€â€“&gt;â€é€‰é¡¹Oâ€ä¸­ï¼Œå…³é—­updatesï¼Œç¦ç”¨æ›´æ–°æ£€æŸ¥ã€‚<br>æ”¾å…¥<code>&lt;SourceTree.Properties.Settings&gt;...&lt;/SourceTree.Properties.Settings&gt;</code>æ ‡ç­¾ä¸­å³å¯  </p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">&lt;setting name&#x3D;&quot;AgreedToEULA&quot; serializeAs&#x3D;&quot;String&quot;&gt;    &lt;value&gt;True&lt;&#x2F;value&gt;&lt;&#x2F;setting&gt;&lt;setting name&#x3D;&quot;AgreedToEULAVersion&quot; serializeAs&#x3D;&quot;String&quot;&gt;    &lt;value&gt;20160201&lt;&#x2F;value&gt;&lt;&#x2F;setting&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åœ¨è½¯ä»¶ç®¡ç†ä¸­æ‰“å¼€sourcetree"><a href="#åœ¨è½¯ä»¶ç®¡ç†ä¸­æ‰“å¼€sourcetree" class="headerlink" title="åœ¨è½¯ä»¶ç®¡ç†ä¸­æ‰“å¼€sourcetree"></a>åœ¨è½¯ä»¶ç®¡ç†ä¸­æ‰“å¼€sourcetree</h2><p><img src="/medias/drawing-bed/sourcetree/1.jpg"></p><h2 id="æç¤ºæœªæ‰¾åˆ°Mercurial"><a href="#æç¤ºæœªæ‰¾åˆ°Mercurial" class="headerlink" title="æç¤ºæœªæ‰¾åˆ°Mercurial"></a>æç¤ºæœªæ‰¾åˆ°Mercurial</h2><p><img src="/medias/drawing-bed/sourcetree/2.jpg"></p><h2 id="é€‰æ‹©ä¸æƒ³ä½¿ç”¨Mercurial"><a href="#é€‰æ‹©ä¸æƒ³ä½¿ç”¨Mercurial" class="headerlink" title="é€‰æ‹©ä¸æƒ³ä½¿ç”¨Mercurial"></a>é€‰æ‹©ä¸æƒ³ä½¿ç”¨Mercurial</h2><p>è¿™é‡Œæ˜¯é€‰æ‹©äº†ç¬¬ä¸€ä¸ªé€‰é¡¹ã€‚<br><img src="/medias/drawing-bed/sourcetree/3.jpg"></p><h2 id="è·³è¿‡Mercurialæˆ–è€…ä¸‹è½½ï¼Œå®Œæˆåå°±è¿›å…¥ä½¿ç”¨ç•Œé¢äº†"><a href="#è·³è¿‡Mercurialæˆ–è€…ä¸‹è½½ï¼Œå®Œæˆåå°±è¿›å…¥ä½¿ç”¨ç•Œé¢äº†" class="headerlink" title="è·³è¿‡Mercurialæˆ–è€…ä¸‹è½½ï¼Œå®Œæˆåå°±è¿›å…¥ä½¿ç”¨ç•Œé¢äº†"></a>è·³è¿‡Mercurialæˆ–è€…ä¸‹è½½ï¼Œå®Œæˆåå°±è¿›å…¥ä½¿ç”¨ç•Œé¢äº†</h2><p><img src="/medias/drawing-bed/sourcetree/4.jpg"></p><h1 id="é…ç½®gitå’Œopenssh"><a href="#é…ç½®gitå’Œopenssh" class="headerlink" title="é…ç½®gitå’Œopenssh"></a>é…ç½®gitå’Œopenssh</h1><p>gitå®‰è£…å®Œæˆåï¼Œåœ¨æ¡Œé¢å³é”®æ‰“å¼€git guiï¼Œé€‰æ‹©show ssh key<br><img src="/medias/drawing-bed/sourcetree/5.jpg"></p><h2 id="é€‰æ‹©Generate-Key"><a href="#é€‰æ‹©Generate-Key" class="headerlink" title="é€‰æ‹©Generate Key"></a>é€‰æ‹©Generate Key</h2><p><img src="/medias/drawing-bed/sourcetree/6.jpg"></p><h2 id="è¿ç»­ç‚¹ä¸¤æ¬¡yes"><a href="#è¿ç»­ç‚¹ä¸¤æ¬¡yes" class="headerlink" title="è¿ç»­ç‚¹ä¸¤æ¬¡yes"></a>è¿ç»­ç‚¹ä¸¤æ¬¡yes</h2><p><img src="/medias/drawing-bed/sourcetree/7.jpg"><br><img src="/medias/drawing-bed/sourcetree/8.jpg"></p><h2 id="å®Œæˆä¹‹åä¼šåœ¨å½“å‰ç”¨æˆ·å®¶ç›®å½•ç”Ÿæˆå…¬é’¥å’Œç§é’¥"><a href="#å®Œæˆä¹‹åä¼šåœ¨å½“å‰ç”¨æˆ·å®¶ç›®å½•ç”Ÿæˆå…¬é’¥å’Œç§é’¥" class="headerlink" title="å®Œæˆä¹‹åä¼šåœ¨å½“å‰ç”¨æˆ·å®¶ç›®å½•ç”Ÿæˆå…¬é’¥å’Œç§é’¥"></a>å®Œæˆä¹‹åä¼šåœ¨å½“å‰ç”¨æˆ·å®¶ç›®å½•ç”Ÿæˆå…¬é’¥å’Œç§é’¥</h2><p>è¿™é‡Œçš„å…¬é’¥é•¿æœŸå­˜åœ¨ï¼Œæ‚¨å¯ä»¥å¤åˆ¶åˆ°å‰ªåˆ‡æ¿<code>Copy To Clipboard</code>ï¼Œç²˜è´´åˆ°GitHubã€codingç­‰SSHå…¬é’¥ä½ç½®ï¼Œä»è€Œè¿›è¡Œå…å¯†<code>git push origin branch</code><br><img src="/medias/drawing-bed/sourcetree/9.jpg"></p><h2 id="åœ¨â€å·¥å…·â€-â€œé€‰é¡¹â€ä¸­ï¼Œé€‰æ‹©opensshå³å¯"><a href="#åœ¨â€å·¥å…·â€-â€œé€‰é¡¹â€ä¸­ï¼Œé€‰æ‹©opensshå³å¯" class="headerlink" title="åœ¨â€å·¥å…·â€ â€œé€‰é¡¹â€ä¸­ï¼Œé€‰æ‹©opensshå³å¯"></a>åœ¨â€å·¥å…·â€ â€œé€‰é¡¹â€ä¸­ï¼Œé€‰æ‹©opensshå³å¯</h2><p><img src="/medias/drawing-bed/sourcetree/10.jpg"></p><p>è¿™ä¸ªæ—¶å€™ä½ å°±å¯ä»¥æŠŠçŠ¶æ€æ çš„â€æˆ´è“å¸½å­çš„å°ç”µè„‘â€å¹²æ‰äº†ï¼Œç‚¹å‡»â€sshå¯†é’¥â€åé¢çš„â€â€¦â€å¯ä»¥è¿›å…¥<code>.ssh</code>ç›®å½•æŸ¥çœ‹è‡ªå·±çš„ç§é’¥id_rsaå’Œå…¬é’¥id_rsa.pub</p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> git </tag>
            
            <tag> sourcetree </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS8å®‰è£…docker-ceæŠ¥é”™</title>
      <link href="/posts/4e4e.html"/>
      <url>/posts/4e4e.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å®‰è£…ä¾èµ–</span>yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2<span class="token comment"># é…ç½®é˜¿é‡Œäº‘é•œåƒåº“</span>yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å®‰è£…docker"><a href="#å®‰è£…docker" class="headerlink" title="å®‰è£…docker"></a>å®‰è£…docker</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@test yum.repos.d<span class="token punctuation">]</span><span class="token comment"># yum -y install docker-ce</span>CentOS-8 - Base - mirrors.aliyun.com                             <span class="token number">22</span> kB/s <span class="token operator">|</span> <span class="token number">3.9</span> kB     00:00    CentOS-8 - Extras - mirrors.aliyun.com                           <span class="token number">24</span> kB/s <span class="token operator">|</span> <span class="token number">1.5</span> kB     00:00    CentOS-8 - AppStream - mirrors.aliyun.com                       <span class="token number">125</span> kB/s <span class="token operator">|</span> <span class="token number">4.3</span> kB     00:00    Docker CE Stable - x86_64                                        <span class="token number">45</span> kB/s <span class="token operator">|</span>  <span class="token number">23</span> kB     00:00    Extra Packages <span class="token keyword">for</span> Enterprise Linux Modular <span class="token number">8</span> - x86_64           <span class="token number">90</span> kB/s <span class="token operator">|</span> <span class="token number">3.0</span> kB     00:00    Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">8</span> - x86_64                   <span class="token number">34</span> kB/s <span class="token operator">|</span> <span class="token number">4.7</span> kB     00:00    é”™è¯¯ï¼š é—®é¢˜: package docker-ce-3:19.03.9-3.el7.x86_64 requires containerd.io <span class="token operator">>=</span> <span class="token number">1.2</span>.2-3, but none of the providers can be installed  - cannot <span class="token function">install</span> the best candidate <span class="token keyword">for</span> the job  - package containerd.io-1.2.10-3.2.el7.x86_64 is excluded  - package containerd.io-1.2.13-3.1.el7.x86_64 is excluded  - package containerd.io-1.2.13-3.2.el7.x86_64 is excluded  - package containerd.io-1.2.2-3.3.el7.x86_64 is excluded  - package containerd.io-1.2.2-3.el7.x86_64 is excluded  - package containerd.io-1.2.4-3.1.el7.x86_64 is excluded  - package containerd.io-1.2.5-3.1.el7.x86_64 is excluded  - package containerd.io-1.2.6-3.3.el7.x86_64 is excluded<span class="token punctuation">(</span>å°è¯•æ·»åŠ  <span class="token string">'--skip-broken'</span> æ¥è·³è¿‡æ— æ³•å®‰è£…çš„è½¯ä»¶åŒ… æˆ– <span class="token string">'--nobest'</span> æ¥ä¸åªä½¿ç”¨æœ€ä½³é€‰æ‹©çš„è½¯ä»¶åŒ…<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æŠ¥é”™ï¼š<code>package docker-ce-3:19.03.9-3.el7.x86_64 requires containerd.io &gt;= 1.2.2-3, but none of the providers can be installed</code>  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@test yum.repos.d<span class="token punctuation">]</span><span class="token comment"># yum -y install containerd.io</span>ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:01:55 å‰ï¼Œæ‰§è¡Œäº <span class="token number">2020</span>å¹´05æœˆ20æ—¥ æ˜ŸæœŸä¸‰ <span class="token number">20</span>æ—¶41åˆ†10ç§’ã€‚ä¾èµ–å…³ç³»è§£å†³ã€‚<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span> è½¯ä»¶åŒ…              æ¶æ„        ç‰ˆæœ¬              ä»“åº“                      å¤§å°<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>å®‰è£…: containerd.io       x86_64      <span class="token number">1.2</span>.0-3.el7       docker-ce-stable          <span class="token number">22</span> Mäº‹åŠ¡æ¦‚è¦<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>å®‰è£…  <span class="token number">1</span> è½¯ä»¶åŒ…æ€»ä¸‹è½½ï¼š22 Må®‰è£…å¤§å°ï¼š88 Mä¸‹è½½è½¯ä»¶åŒ…ï¼šcontainerd.io-1.2.0-3.el7.x86_64.rpm     <span class="token number">8.4</span> MB/s <span class="token operator">|</span>  <span class="token number">22</span> MB     00:02    -------------------------------------------------------------------------æ€»è®¡                                     <span class="token number">8.4</span> MB/s <span class="token operator">|</span>  <span class="token number">22</span> MB     00:02     è­¦å‘Šï¼š/var/cache/dnf/docker-ce-stable-3e5647bf4960c796/packages/containerd.io-1.2.0-3.el7.x86_64.rpm: å¤´V4 RSA/SHA512 Signature, å¯†é’¥ ID 621e9f35: NOKEYDocker CE Stable - x86_64             <span class="token number">3.3</span> kB/s <span class="token operator">|</span> <span class="token number">1.6</span> kB     00:00    å¯¼å…¥ GPG å…¬é’¥ 0x621E9F35: Userid: <span class="token string">"Docker Release (CE rpm) &lt;docker@docker.com>"</span> æŒ‡çº¹: 060A 61C5 1B55 8A7F 742B 77AA C52F EB6B 621E 9F35 æ¥è‡ª: https://mirrors.aliyun.com/docker-ce/linux/centos/gpgå¯¼å…¥å…¬é’¥æˆåŠŸè¿è¡Œäº‹åŠ¡æ£€æŸ¥äº‹åŠ¡æ£€æŸ¥æˆåŠŸã€‚è¿è¡Œäº‹åŠ¡æµ‹è¯•äº‹åŠ¡æµ‹è¯•æˆåŠŸã€‚è¿è¡Œäº‹åŠ¡  å‡†å¤‡ä¸­  <span class="token builtin class-name">:</span>                                       <span class="token number">1</span>/1   å®‰è£…    <span class="token builtin class-name">:</span> containerd.io-1.2.0-3.el7.x86_64      <span class="token number">1</span>/1   è¿è¡Œè„šæœ¬: containerd.io-1.2.0-3.el7.x86_64      <span class="token number">1</span>/1   éªŒè¯    <span class="token builtin class-name">:</span> containerd.io-1.2.0-3.el7.x86_64      <span class="token number">1</span>/1 å·²å®‰è£…:  containerd.io-1.2.0-3.el7.x86_64                                                                                                                            å®Œæ¯•ï¼<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç‰ˆæœ¬æ˜¯1.2.0ï¼Œæ‰‹åŠ¨ä¸‹è½½é«˜ç‰ˆæœ¬è½¯ä»¶ï¼ˆdnfç­‰åŒyumï¼Œä¹Ÿæ˜¯åŒ…ç®¡ç†å™¨ï¼‰  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@test yum.repos.d<span class="token punctuation">]</span><span class="token comment"># dnf install https://mirrors.aliyun.com/docker-ce/linux/centos/7/x86_64/stable/Packages/containerd.io-1.2.6-3.3.el7.x86_64.rpm</span>ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:03:48 å‰ï¼Œæ‰§è¡Œäº <span class="token number">2020</span>å¹´05æœˆ20æ—¥ æ˜ŸæœŸä¸‰ <span class="token number">20</span>æ—¶41åˆ†10ç§’ã€‚containerd.io-1.2.6-3.3.el7.x86_64.rpm                                                                                        <span class="token number">2.2</span> MB/s <span class="token operator">|</span>  <span class="token number">26</span> MB     00:11    ä¾èµ–å…³ç³»è§£å†³ã€‚<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> è½¯ä»¶åŒ…                æ¶æ„        ç‰ˆæœ¬                                          ä»“åº“                 å¤§å°<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>å‡çº§: containerd.io         x86_64      <span class="token number">1.2</span>.6-3.3.el7                                 @commandline         <span class="token number">26</span> Må®‰è£…ä¾èµ–å…³ç³»: container-selinux     noarch      <span class="token number">2</span>:2.124.0-1.module_el8.1.0+298+41f9343a       AppStream            <span class="token number">47</span> kå¯ç”¨æ¨¡å—æµ: container-tools                   rhel8                                                                  äº‹åŠ¡æ¦‚è¦<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>å®‰è£…  <span class="token number">1</span> è½¯ä»¶åŒ…å‡çº§  <span class="token number">1</span> è½¯ä»¶åŒ…æ€»è®¡ï¼š26 Mæ€»ä¸‹è½½ï¼š47 kç¡®å®šå—ï¼Ÿ<span class="token punctuation">[</span>y/N<span class="token punctuation">]</span>ï¼š yä¸‹è½½è½¯ä»¶åŒ…ï¼šcontainer-selinux-2.124.0-1.module_el8.1.0+298+41f9343a.noarch.rpm              <span class="token number">331</span> kB/s <span class="token operator">|</span>  <span class="token number">47</span> kB     00:00    -------------------------------------------------------------------------------------------------------------æ€»è®¡                                                                            <span class="token number">322</span> kB/s <span class="token operator">|</span>  <span class="token number">47</span> kB     00:00     è¿è¡Œäº‹åŠ¡æ£€æŸ¥äº‹åŠ¡æ£€æŸ¥æˆåŠŸã€‚è¿è¡Œäº‹åŠ¡æµ‹è¯•äº‹åŠ¡æµ‹è¯•æˆåŠŸã€‚è¿è¡Œäº‹åŠ¡  å‡†å¤‡ä¸­  <span class="token builtin class-name">:</span>                                                                                   <span class="token number">1</span>/1   è¿è¡Œè„šæœ¬: container-selinux-2:2.124.0-1.module_el8.1.0+298+41f9343a.noarch                  <span class="token number">1</span>/1   è¿è¡Œè„šæœ¬: container-selinux-2:2.124.0-1.module_el8.1.0+298+41f9343a.noarch                  <span class="token number">1</span>/3   å®‰è£…    <span class="token builtin class-name">:</span> container-selinux-2:2.124.0-1.module_el8.1.0+298+41f9343a.noarch                  <span class="token number">1</span>/3   è¿è¡Œè„šæœ¬: container-selinux-2:2.124.0-1.module_el8.1.0+298+41f9343a.noarch                  <span class="token number">1</span>/3   å‡çº§    <span class="token builtin class-name">:</span> containerd.io-1.2.6-3.3.el7.x86_64                                                <span class="token number">2</span>/3   è¿è¡Œè„šæœ¬: containerd.io-1.2.6-3.3.el7.x86_64                                                <span class="token number">2</span>/3   è¿è¡Œè„šæœ¬: containerd.io-1.2.0-3.el7.x86_64                                                  <span class="token number">3</span>/3   æ¸…ç†    <span class="token builtin class-name">:</span> containerd.io-1.2.0-3.el7.x86_64                                                  <span class="token number">3</span>/3   è¿è¡Œè„šæœ¬: containerd.io-1.2.0-3.el7.x86_64                                                  <span class="token number">3</span>/3   è¿è¡Œè„šæœ¬: container-selinux-2:2.124.0-1.module_el8.1.0+298+41f9343a.noarch                  <span class="token number">3</span>/3   è¿è¡Œè„šæœ¬: containerd.io-1.2.0-3.el7.x86_64                                                  <span class="token number">3</span>/3   éªŒè¯    <span class="token builtin class-name">:</span> container-selinux-2:2.124.0-1.module_el8.1.0+298+41f9343a.noarch                  <span class="token number">1</span>/3   éªŒè¯    <span class="token builtin class-name">:</span> containerd.io-1.2.6-3.3.el7.x86_64                                                <span class="token number">2</span>/3   éªŒè¯    <span class="token builtin class-name">:</span> containerd.io-1.2.0-3.el7.x86_64                                                  <span class="token number">3</span>/3 å·²å‡çº§:  containerd.io-1.2.6-3.3.el7.x86_64                                                              å·²å®‰è£…:  container-selinux-2:2.124.0-1.module_el8.1.0+298+41f9343a.noarch                                                                                            å®Œæ¯•ï¼<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å†æ¬¡å®‰è£…docker-ce"><a href="#å†æ¬¡å®‰è£…docker-ce" class="headerlink" title="å†æ¬¡å®‰è£…docker-ce"></a>å†æ¬¡å®‰è£…docker-ce</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@test yum.repos.d<span class="token punctuation">]</span><span class="token comment"># dnf install -y docker-ce</span>ä¸Šæ¬¡å…ƒæ•°æ®è¿‡æœŸæ£€æŸ¥ï¼š0:05:53 å‰ï¼Œæ‰§è¡Œäº <span class="token number">2020</span>å¹´05æœˆ20æ—¥ æ˜ŸæœŸä¸‰ <span class="token number">20</span>æ—¶41åˆ†10ç§’ã€‚ä¾èµ–å…³ç³»è§£å†³ã€‚<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span> è½¯ä»¶åŒ…            æ¶æ„        ç‰ˆæœ¬                  ä»“åº“                     å¤§å°<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>å®‰è£…: docker-ce         x86_64      <span class="token number">3</span>:19.03.9-3.el7       docker-ce-stable         <span class="token number">24</span> Må®‰è£…ä¾èµ–å…³ç³»: libcgroup         x86_64      <span class="token number">0.41</span>-19.el8           base                     <span class="token number">70</span> k docker-ce-cli     x86_64      <span class="token number">1</span>:19.03.9-3.el7       docker-ce-stable         <span class="token number">38</span> Mäº‹åŠ¡æ¦‚è¦<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span>å®‰è£…  <span class="token number">3</span> è½¯ä»¶åŒ…æ€»ä¸‹è½½ï¼š62 Må®‰è£…å¤§å°ï¼š263 Mä¸‹è½½è½¯ä»¶åŒ…ï¼š<span class="token punctuation">(</span><span class="token number">1</span>/3<span class="token punctuation">)</span>: libcgroup-0.41-19.el8.x86_64.rpm         <span class="token number">530</span> kB/s <span class="token operator">|</span>  <span class="token number">70</span> kB     00:00    <span class="token punctuation">(</span><span class="token number">2</span>/3<span class="token punctuation">)</span>: docker-ce-19.03.9-3.el7.x86_64.rpm       <span class="token number">5.3</span> MB/s <span class="token operator">|</span>  <span class="token number">24</span> MB     00:04    <span class="token punctuation">(</span><span class="token number">3</span>/3<span class="token punctuation">)</span>: docker-ce-cli-19.03.9-3.el7.x86_64.rpm   <span class="token number">6.7</span> MB/s <span class="token operator">|</span>  <span class="token number">38</span> MB     00:05    --------------------------------------------------------------------------------æ€»è®¡                                             <span class="token number">11</span> MB/s <span class="token operator">|</span>  <span class="token number">62</span> MB     00:05     è¿è¡Œäº‹åŠ¡æ£€æŸ¥äº‹åŠ¡æ£€æŸ¥æˆåŠŸã€‚è¿è¡Œäº‹åŠ¡æµ‹è¯•äº‹åŠ¡æµ‹è¯•æˆåŠŸã€‚è¿è¡Œäº‹åŠ¡  å‡†å¤‡ä¸­  <span class="token builtin class-name">:</span>                                                                                                                                               <span class="token number">1</span>/1   å®‰è£…    <span class="token builtin class-name">:</span> docker-ce-cli-1:19.03.9-3.el7.x86_64      <span class="token number">1</span>/3   è¿è¡Œè„šæœ¬: docker-ce-cli-1:19.03.9-3.el7.x86_64      <span class="token number">1</span>/3   è¿è¡Œè„šæœ¬: libcgroup-0.41-19.el8.x86_64              <span class="token number">2</span>/3   å®‰è£…    <span class="token builtin class-name">:</span> libcgroup-0.41-19.el8.x86_64              <span class="token number">2</span>/3   è¿è¡Œè„šæœ¬: libcgroup-0.41-19.el8.x86_64              <span class="token number">2</span>/3   å®‰è£…    <span class="token builtin class-name">:</span> docker-ce-3:19.03.9-3.el7.x86_64          <span class="token number">3</span>/3   è¿è¡Œè„šæœ¬: docker-ce-3:19.03.9-3.el7.x86_64          <span class="token number">3</span>/3   éªŒè¯    <span class="token builtin class-name">:</span> libcgroup-0.41-19.el8.x86_64              <span class="token number">1</span>/3   éªŒè¯    <span class="token builtin class-name">:</span> docker-ce-3:19.03.9-3.el7.x86_64          <span class="token number">2</span>/3   éªŒè¯    <span class="token builtin class-name">:</span> docker-ce-cli-1:19.03.9-3.el7.x86_64      <span class="token number">3</span>/3 å·²å®‰è£…:  docker-ce-3:19.03.9-3.el7.x86_64   libcgroup-0.41-19.el8.x86_64  docker-ce-cli-1:19.03.9-3.el7.x86_64                   å®Œæ¯•ï¼<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å¯åŠ¨è®¾ç½®å¼€æœºè‡ªå¯"><a href="#å¯åŠ¨è®¾ç½®å¼€æœºè‡ªå¯" class="headerlink" title="å¯åŠ¨è®¾ç½®å¼€æœºè‡ªå¯"></a>å¯åŠ¨è®¾ç½®å¼€æœºè‡ªå¯</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@test yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl enable docker</span>Created symlink /etc/systemd/system/multi-user.target.wants/docker.service â†’ /usr/lib/systemd/system/docker.service.<span class="token punctuation">[</span>root@test yum.repos.d<span class="token punctuation">]</span><span class="token comment"># systemctl start docker</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS8å®‰è£…ä¹‹åçš„ä¸€äº›é…ç½®</title>
      <link href="/posts/4430.html"/>
      <url>/posts/4430.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ç½‘å¡å›ºå®šIP"><a href="#ç½‘å¡å›ºå®šIP" class="headerlink" title="ç½‘å¡å›ºå®šIP"></a>ç½‘å¡å›ºå®šIP</h1><p>&emsp;&emsp;ä¿®æ”¹ç½‘å¡ä¿¡æ¯  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">TYPE</span><span class="token operator">=</span><span class="token string">"Ethernet"</span><span class="token assign-left variable">PROXY_METHOD</span><span class="token operator">=</span><span class="token string">"none"</span><span class="token assign-left variable">BROWSER_ONLY</span><span class="token operator">=</span><span class="token string">"no"</span><span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span><span class="token string">"none"</span>   <span class="token comment"># è®¾ç½®é™æ€</span><span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span><span class="token string">"yes"</span><span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">"yes"</span><span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span><span class="token string">"yes"</span><span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span><span class="token string">"yes"</span><span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span><span class="token string">"yes"</span><span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">"no"</span><span class="token assign-left variable">IPV6_ADDR_GEN_MODE</span><span class="token operator">=</span><span class="token string">"stable-privacy"</span><span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">"ens160"</span><span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">"1f22ea44-481f-410e-b062-7b05fa7a8375"</span>   <span class="token comment"># è®¾å¤‡å”¯ä¸€æ ‡è¯†ï¼Œä¸è¦æ›´æ”¹è‡ªå·±çš„UUID!!!</span><span class="token assign-left variable">DEVICE</span><span class="token operator">=</span><span class="token string">"ens160"</span>   <span class="token comment"># ç½‘å¡åï¼Œä¸è¦æ›´æ”¹è‡ªå·±çš„!!!</span><span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span><span class="token string">"yes"</span>   <span class="token comment"># å¼€æœºè‡ªåŠ¨åŠ è½½ç½‘å¡</span><span class="token assign-left variable">HWADDR</span><span class="token operator">=</span><span class="token string">"00:0C:29:D5:D6:DE"</span>   <span class="token comment"># å”¯ä¸€MACåœ°å€ï¼Œä¸è¦æ›´æ”¹è‡ªå·±çš„!!!</span><span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token string">"192.168.1.221"</span>   <span class="token comment"># è®¾ç½®ä¸€ä¸ªå›ºå®šIP</span><span class="token assign-left variable">PREFIX</span><span class="token operator">=</span><span class="token string">"24"</span>   <span class="token comment"># æ©ç é•¿åº¦ å¦ä¸€ç§å†™æ³•NETMASK="255.255.255.0"</span><span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token string">"192.168.1.1"</span>   <span class="token comment"># ç½‘å…³ï¼ˆè·¯ç”±å™¨ã€äº¤æ¢æœºIPï¼‰</span><span class="token assign-left variable">DNS1</span><span class="token operator">=</span><span class="token string">"114.114.114.114"</span>ã€€ã€€<span class="token comment"># DNSåœ°å€ï¼Œå¼€æœºé»˜è®¤åŠ è½½</span><span class="token assign-left variable">IPV6_PRIVACY</span><span class="token operator">=</span><span class="token string">"no"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;ä½¿é…ç½®ç”Ÿæ•ˆ  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ifdown</span> ens160 <span class="token operator">&amp;&amp;</span> <span class="token function">ifup</span> ens160   <span class="token comment"># æ‰§è¡Œå®Œä¹‹åé‡æ–°è¿æ¥</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="profile"><a href="#profile" class="headerlink" title="profile"></a>profile</h1><p>&emsp;&emsp;ç¼–è¾‘/etc/profileæ–‡ä»¶æœ€åæ·»åŠ viåˆ«å  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">alias</span> <span class="token assign-left variable">vi</span><span class="token operator">=</span>vim<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="vimrc"><a href="#vimrc" class="headerlink" title="vimrc"></a>vimrc</h1><p>&emsp;&emsp;ç¼–è¾‘/etc/vimrcæ–‡ä»¶æœ€ååŠ å…¥  </p><pre class="line-numbers language-vimrc" data-language="vimrc"><code class="language-vimrc">&quot; è®¾ç½®tabå»º4ä¸ªç©ºæ ¼set ts&#x3D;4set expandtabset autoindent&quot; è®¾ç½®vimæ˜¾ç¤ºè¡Œå·set nu&quot; è®¾ç½®F9ç²˜è´´ç¼©è¿›ï¼Œé»˜è®¤åŸæ ¼å¼ç²˜è´´ï¼ŒæŒ‰F9è‡ªåŠ¨ç¼©è¿›ç²˜è´´set pastetoggle&#x3D;&lt;F9&gt;set paste<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¡¥å……ï¼š"><a href="#è¡¥å……ï¼š" class="headerlink" title="è¡¥å……ï¼š"></a>è¡¥å……ï¼š</h2><p>&emsp;&emsp;ä¿®æ”¹å·²ä¿å­˜çš„æ–‡ä»¶  </p><ol><li>Tab é”®æ›¿æ¢ä¸ºç©ºæ ¼  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">:set <span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">4</span>:set expandtab:%retab<span class="token operator">!</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li>ç©ºæ ¼æ›¿æ¢ä¸ºTab  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">:set <span class="token assign-left variable">ts</span><span class="token operator">=</span><span class="token number">4</span>:set noexpandtab:%retab<span class="token operator">!</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ol><p>å†·çŸ¥è¯†ï¼šåŠ æ„Ÿå¹å·!æ˜¯ç”¨äºå¤„ç†éç©ºç™½å­—ç¬¦ä¹‹åçš„Tabï¼Œå³æ‰€æœ‰çš„Tabï¼›ä¸åŠ ï¼Œåˆ™åªå¤„ç†è¡Œé¦–çš„Tabã€‚<br>&emsp;&emsp;å¥½å†·~ â‰¡(â–”ï¹â–”)â‰¡ ğŸ¥¶  </p><h1 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h1><p>&emsp;&emsp;è¿™é‡Œé…ç½®çš„æ˜¯aliyunçš„yumæº  </p><ol><li>CentOS-Base.repoä»“åº“  </li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /etc/yum.repos.d/<span class="token function">mkdir</span> old<span class="token function">mv</span> *.repo old/<span class="token function">curl</span> -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-8.repo<span class="token comment"># éé˜¿é‡Œäº‘ECSç”¨æˆ·ä¼šå‡ºç° Couldn't resolve host 'mirrors.cloud.aliyuncs.com' ä¿¡æ¯ï¼Œä¸å½±å“ä½¿ç”¨ã€‚å¯è‡ªè¡Œä¿®æ”¹ç›¸å…³é…ç½®: </span><span class="token function">sed</span> -i -e <span class="token string">'/mirrors.cloud.aliyuncs.com/d'</span> -e <span class="token string">'/mirrors.aliyuncs.com/d'</span> /etc/yum.repos.d/CentOS-Base.repo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>epel(RHEL 8)è½¯ä»¶ä»“åº“  </li></ol><blockquote><p>å®‰è£… epel é…ç½®åŒ…  </p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> -y https://mirrors.aliyun.com/epel/epel-release-latest-8.noarch.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å°† repo é…ç½®ä¸­çš„åœ°å€æ›¿æ¢ä¸ºé˜¿é‡Œäº‘é•œåƒç«™åœ°å€  </p></blockquote><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sed</span> -i <span class="token string">'s|^#baseurl=https://download.fedoraproject.org/pub|baseurl=https://mirrors.aliyun.com|'</span> /etc/yum.repos.d/epel*<span class="token function">sed</span> -i <span class="token string">'s|^metalink|#metalink|'</span> /etc/yum.repos.d/epel*<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="firewall"><a href="#firewall" class="headerlink" title="firewall"></a>firewall</h1><p>&emsp;&emsp;å…³é—­firewalld  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl stop firewalldsystemctl disable firewalld<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="selinux"><a href="#selinux" class="headerlink" title="selinux"></a>selinux</h1><p>&emsp;&emsp;å…³é—­selinux</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sed</span> -i.bak <span class="token string">'s/enforcing$/disabled/g'</span> /etc/selinux/configsetenforce <span class="token number">0</span>   <span class="token comment"># ä¸´æ—¶å…³é—­ï¼Œé‡å¯å¤±æ•ˆ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="è½¯ä»¶å®‰è£…"><a href="#è½¯ä»¶å®‰è£…" class="headerlink" title="è½¯ä»¶å®‰è£…"></a>è½¯ä»¶å®‰è£…</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum -y <span class="token function">install</span> <span class="token function">wget</span> <span class="token function">vim</span> yum update -y   <span class="token comment"># è½¯ä»¶å‡çº§</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="é…ç½®å¥½ä¹‹åé‡å¯"><a href="#é…ç½®å¥½ä¹‹åé‡å¯" class="headerlink" title="é…ç½®å¥½ä¹‹åé‡å¯"></a>é…ç½®å¥½ä¹‹åé‡å¯</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">reboot</span><span class="token builtin class-name">source</span> /etc/profile   <span class="token comment"># ä¸æƒ³é‡å¯çš„è¯ä½¿ç”¨æ­¤ï¼Œä½¿é…ç½®æ–‡ä»¶ç”Ÿæ•ˆ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
            <tag> centos8 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡CentOS 8ç½‘å¡é…ç½®</title>
      <link href="/posts/63a3.html"/>
      <url>/posts/63a3.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="CentOS8é‡å¯Networkæ–°çš„é…ç½®ä¸ç”Ÿæ•ˆ"><a href="#CentOS8é‡å¯Networkæ–°çš„é…ç½®ä¸ç”Ÿæ•ˆ" class="headerlink" title="CentOS8é‡å¯Networkæ–°çš„é…ç½®ä¸ç”Ÿæ•ˆ"></a>CentOS8é‡å¯Networkæ–°çš„é…ç½®ä¸ç”Ÿæ•ˆ</h1><p>å¼€å§‹æ¶‰åŠåˆ°ä»¥ä¸‹å‘½ä»¤ä¸ç”Ÿæ•ˆ  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">nmcli c reload ens160systemctl restart network<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="ç½‘å¡é…ç½®å¦‚ä¸‹"><a href="#ç½‘å¡é…ç½®å¦‚ä¸‹" class="headerlink" title="ç½‘å¡é…ç½®å¦‚ä¸‹"></a>ç½‘å¡é…ç½®å¦‚ä¸‹</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">TYPE</span><span class="token operator">=</span><span class="token string">"Ethernet"</span><span class="token assign-left variable">PROXY_METHOD</span><span class="token operator">=</span><span class="token string">"none"</span><span class="token assign-left variable">BROWSER_ONLY</span><span class="token operator">=</span><span class="token string">"no"</span><span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span><span class="token string">"none"</span><span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span><span class="token string">"yes"</span><span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">"yes"</span><span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span><span class="token string">"yes"</span><span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span><span class="token string">"yes"</span><span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span><span class="token string">"yes"</span><span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span><span class="token string">"no"</span><span class="token assign-left variable">IPV6_ADDR_GEN_MODE</span><span class="token operator">=</span><span class="token string">"stable-privacy"</span><span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">"ens160"</span><span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">"1f22ea44-481f-410e-b062-7b05fa7a8375"</span><span class="token assign-left variable">DEVICE</span><span class="token operator">=</span><span class="token string">"ens160"</span><span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span><span class="token string">"yes"</span><span class="token assign-left variable">HWADDR</span><span class="token operator">=</span><span class="token string">"00:0C:29:D5:D6:DE"</span><span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token string">"192.168.1.223"</span><span class="token assign-left variable">PREFIX</span><span class="token operator">=</span><span class="token string">"24"</span><span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token string">"192.168.1.1"</span><span class="token assign-left variable">DNS1</span><span class="token operator">=</span><span class="token string">"114.114.114.114"</span><span class="token assign-left variable">IPV6_PRIVACY</span><span class="token operator">=</span><span class="token string">"no"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è§£å†³-reload-é…ç½®ä¸ç”Ÿæ•ˆBUG"><a href="#è§£å†³-reload-é…ç½®ä¸ç”Ÿæ•ˆBUG" class="headerlink" title="è§£å†³ reload é…ç½®ä¸ç”Ÿæ•ˆBUG"></a>è§£å†³ reload é…ç½®ä¸ç”Ÿæ•ˆBUG</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æµ‹è¯•å¯ç”¨</span><span class="token function">ifdown</span> ens160 <span class="token operator">&amp;&amp;</span> <span class="token function">ifup</span> ens160<span class="token comment"># æµ‹è¯•å¯ç”¨</span>nmcli c reload <span class="token operator">&amp;&amp;</span> nmcli d reapply ens160<span class="token comment"># æµ‹è¯•å¯ç”¨</span>nmcli c reload <span class="token operator">&amp;&amp;</span> nmcli networking off <span class="token operator">&amp;&amp;</span> nmcli networking on<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ€»ç»“ï¼šä»¥ä¸Šè®¾ç½®å®ŒIPåä½¿ç”¨ä¸Šé¢çš„å‘½ä»¤å¯ä»¥ä½¿æ–°é…ç½®ç”Ÿæ•ˆï¼Œæ¶‰åŠåˆ°downå’Œoffç­‰ï¼Œä¸€å®šè¦ä¸€æ¡å‘½ä»¤è¡Œæ‰§è¡Œï¼<br>å…»æˆå¥½ä¹ æƒ¯ï¼Œå¦åˆ™åªèƒ½å»æœåŠ¡å™¨æ‰§è¡Œupå’Œonäº†ã€‚<br>ç¥å¥½è¿ğŸ’•  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> nmcli </tag>
            
            <tag> centos8 </tag>
            
            <tag> ç½‘å¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaæ‰“åŒ…é—®é¢˜</title>
      <link href="/posts/71c0.html"/>
      <url>/posts/71c0.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>å‰è¨€ï¼šä»gitee cloneçš„æºä»£ç æ‰“åŒ…æŠ¥é”™ï¼š  </p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> <span class="token class-name">Failed</span> <span class="token keyword">to</span> <span class="token namespace">execute</span> goal on project weblog<span class="token operator">:</span> <span class="token class-name">Could</span> not resolve dependencies <span class="token keyword">for</span> project com<span class="token punctuation">.</span>leejuen<span class="token operator">:</span>weblog<span class="token operator">:</span>jar<span class="token operator">:</span><span class="token number">0.0</span><span class="token number">.1</span><span class="token operator">:</span> <span class="token class-name">Failure</span> <span class="token keyword">to</span> <span class="token namespace">find</span> io<span class="token punctuation">.</span>springfox<span class="token operator">:</span>springfox<span class="token operator">-</span>swagger<span class="token operator">-</span>ui<span class="token operator">:</span>jar<span class="token operator">:</span><span class="token number">2.9</span><span class="token number">.0</span> in http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">121.42</span><span class="token number">.166</span><span class="token number">.202</span><span class="token operator">:</span><span class="token number">8081</span><span class="token operator">/</span>nexus<span class="token operator">/</span>content<span class="token operator">/</span>groups<span class="token operator">/</span><span class="token keyword">public</span> was cached in the local repository<span class="token punctuation">,</span> resolution will not be reattempted until the update interval of nexus has elapsed or updates are forced <span class="token operator">-></span> <span class="token punctuation">[</span><span class="token class-name">Help</span> <span class="token number">1</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æºç åœ°å€ï¼š<a href="https://gitee.com/leejun/weblog.git">Download</a></p><h2 id="ä½¿ç”¨è¯´æ˜"><a href="#ä½¿ç”¨è¯´æ˜" class="headerlink" title="ä½¿ç”¨è¯´æ˜"></a>ä½¿ç”¨è¯´æ˜</h2><ol><li>ä¿®æ”¹start.shæ–‡ä»¶  </li></ol><p>å°†ç«¯å£å’Œæ—¥å¿—åœ°å€æ›¿æ¢æˆè‡ªå·±çš„åœ°æ–¹  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#è¿™é‡Œå¯æ›¿æ¢ä¸ºä½ è‡ªå·±çš„æ‰§è¡Œç¨‹åºï¼Œå…¶ä»–ä»£ç æ— éœ€æ›´æ”¹</span><span class="token assign-left variable">APP_NAME</span><span class="token operator">=</span>weblog.jar<span class="token comment">#ç«¯å£å·é»˜è®¤8080</span><span class="token assign-left variable">PORT</span><span class="token operator">=</span><span class="token number">8080</span><span class="token comment">#æ—¥å¿—åœ°å€</span><span class="token assign-left variable">LOG_PATH</span><span class="token operator">=</span>/data/logs/server.log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>å°†start.shå’Œweblog.jaræ”¾åˆ°ç›¸åŒç›®å½•ä¸‹  </li><li>è¿è¡Œæ–¹æ³•  </li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sh</span> start.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="4"><li>å…¶ä»–å‘½ä»¤æ–¹æ³•</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sh</span> start.sh status<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="5"><li>è¿›å…¥åå°webé¡µé¢æŸ¥çœ‹</li></ol><pre class="line-numbers language-html" data-language="html"><code class="language-html">http://æœåŠ¡ç«¯IP:ç«¯å£/serverLog.htmlä¾‹å¦‚http://192.168.0.213:8080/serverLog.html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="æ‰“åŒ…ä¹‹å‰æ­å»ºmvnç¯å¢ƒ"><a href="#æ‰“åŒ…ä¹‹å‰æ­å»ºmvnç¯å¢ƒ" class="headerlink" title="æ‰“åŒ…ä¹‹å‰æ­å»ºmvnç¯å¢ƒ"></a>æ‰“åŒ…ä¹‹å‰æ­å»ºmvnç¯å¢ƒ</h1><p>æˆ‘è¿™é‡Œæœ‰jenkinsæœåŠ¡å™¨ï¼Œé…ç½®å¥½äº†mvnç¯å¢ƒï¼Œä¸å†èµ˜è¿°ã€‚  </p><h1 id="å…‹éš†æºç "><a href="#å…‹éš†æºç " class="headerlink" title="å…‹éš†æºç "></a>å…‹éš†æºç </h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> clone https://gitee.com/leejun/weblog.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="æ‰“åŒ…"><a href="#æ‰“åŒ…" class="headerlink" title="æ‰“åŒ…"></a>æ‰“åŒ…</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> weblogmvn clean package<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="æŠ¥é”™å‚è€ƒä¸Šæ–‡"><a href="#æŠ¥é”™å‚è€ƒä¸Šæ–‡" class="headerlink" title="æŠ¥é”™å‚è€ƒä¸Šæ–‡"></a>æŠ¥é”™å‚è€ƒä¸Šæ–‡</h2><h1 id="æ–°å­¦çš„ä¸€æ‹›"><a href="#æ–°å­¦çš„ä¸€æ‹›" class="headerlink" title="æ–°å­¦çš„ä¸€æ‹›"></a>æ–°å­¦çš„ä¸€æ‹›</h1><p>æå–é”™è¯¯å…³é”®ä¿¡æ¯springfox-swagger-ui:jar:2.9.0æ‰¾ä¸åˆ°ï¼Œæ‹¿ç€springfox-swagger-uiï¼Œåˆ°<code>https://mvnrepository.com/</code>ç½‘ç«™æŸ¥è¯¢ã€‚  </p><p>åœ¨Centralä¸­æœ€æ–°çš„ç‰ˆæœ¬ä¸º2.9.1å’Œ2.9.2<br><img src="/medias/drawing-bed/blob/master/java/0.jpg"><br>åœ¨Spring Pluginsä¸­æœ€æ–°ä¸º2.9.0<br><img src="/medias/drawing-bed/blob/master/java/1.jpg"><br>ç‚¹å‡»ç‰ˆæœ¬å·2.9.0ä¼šæ˜¾ç¤ºä»£ç <br><img src="/medias/drawing-bed/blob/master/java/2.jpg"><br>åœ¨pom.xmlæ–‡ä»¶é‡Œé¢å†™å…¥ä¸‹é¢çš„æ ‡ç­¾ä¸­<code>&lt;dependencies&gt;&lt;/dependencies&gt;</code>  </p><p>åæ¥å‘ç°æ²¡æœ‰ç”¨ï¼Œå› ä¸ºç¼ºå°‘æ’ä»¶ï¼Œä¸æ˜¯æ’ä»¶æ²¡é…ç½®ğŸ˜¥  </p><p>åªèƒ½å¦è¾Ÿå¥‡å¾„ï¼Œæ‰“ç®—é…ç½®è½¯ä»¶ä»“åº“ï¼ˆäº‹å®èƒœäºé›„è¾©ï¼Œä¹Ÿæ²¡ç”¨ğŸ˜«ï¼‰<br>åœ¨<code>&lt;repositories&gt;&lt;/repositories&gt;</code>æ ‡ç­¾é‡Œé¢é…ç½®ä»“åº“  </p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">></span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">></span></span>http://121.42.166.202:8081/nexus/content/groups/public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">></span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">></span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ç€å†æ¥ä¿®æ”¹ç‰ˆæœ¬ï¼ˆåŸå› æ˜¯å› ä¸ºä½¿ç”¨ä¸Šé¢è¯´çš„ç½‘ç«™ç›´æ¥æŸ¥è¯¢åˆ°çš„æ’ä»¶ç‰ˆæœ¬ä¸º2.9.1å’Œ2.9.2ï¼‰  </p><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>io.springfox<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>springfox-swagger-ui<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>2.9.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">></span></span>compile<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ¥ç€ä½¿ç”¨mvnæ‰“åŒ…  </p><p>OOPS~æ”¹ç‰ˆæœ¬æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æŒ‰ç†è¯´é…ç½®mvnä»“åº“ä¹Ÿæ˜¯å¯è¡Œçš„ï¼Œä¸€äº›æƒ³æ³•æ²¡æœ‰éªŒè¯ï¼ŒæŒ–å‘ä»¥åå¡«<br>TODO </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> java </tag>
            
            <tag> maven </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(åäºŒ)</title>
      <link href="/posts/8f7f.html"/>
      <url>/posts/8f7f.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="åŒ¿åå‡½æ•°ï¼šå®šä¹‰å‡½æ•°æ—¶ä¸éœ€è¦å®šä¹‰å‡½æ•°å"><a href="#åŒ¿åå‡½æ•°ï¼šå®šä¹‰å‡½æ•°æ—¶ä¸éœ€è¦å®šä¹‰å‡½æ•°å" class="headerlink" title="åŒ¿åå‡½æ•°ï¼šå®šä¹‰å‡½æ•°æ—¶ä¸éœ€è¦å®šä¹‰å‡½æ•°å"></a>åŒ¿åå‡½æ•°ï¼šå®šä¹‰å‡½æ•°æ—¶ä¸éœ€è¦å®šä¹‰å‡½æ•°å</h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> x <span class="token operator">+</span> yf <span class="token operator">=</span> add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span>f1 <span class="token operator">=</span> <span class="token keyword">lambda</span> x<span class="token punctuation">,</span>y<span class="token punctuation">:</span> x<span class="token operator">+</span>y   <span class="token comment"># åŒ¿åå‡½æ•°å®šä¹‰ï¼ˆå…¶å®ƒè¯­è¨€ï¼šç§°ä¸ºlambdaè¡¨è¾¾å¼"lambda parameter_list: expression"ï¼‰</span><span class="token comment"># f1 = lambda x,y: a=x+y   ä¸èƒ½å†™a=x+yï¼Œåªèƒ½æ˜¯è¡¨è¾¾å¼ï¼Œä¸èƒ½æ˜¯ä»£ç å—</span><span class="token keyword">print</span><span class="token punctuation">(</span>f1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä¸‰å…ƒè¡¨è¾¾å¼ï¼ˆè¡¨è¾¾å¼ç‰ˆæœ¬çš„if-elseï¼‰"><a href="#ä¸‰å…ƒè¡¨è¾¾å¼ï¼ˆè¡¨è¾¾å¼ç‰ˆæœ¬çš„if-elseï¼‰" class="headerlink" title="ä¸‰å…ƒè¡¨è¾¾å¼ï¼ˆè¡¨è¾¾å¼ç‰ˆæœ¬çš„if/elseï¼‰"></a>ä¸‰å…ƒè¡¨è¾¾å¼ï¼ˆè¡¨è¾¾å¼ç‰ˆæœ¬çš„if/elseï¼‰</h1><blockquote><p>x &gt; y ? x : y   # å…¶ä»–è¯­è¨€çš„ä¸‰å…ƒè¡¨è¾¾å¼ï¼šæ¯”è¾ƒx&gt;y ä¸ºçœŸ(?) è¿”å›x : å¦åˆ™è¿”å›y<br>pythonä¸‰å…ƒè¡¨è¾¾å¼ï¼šæ¡ä»¶ä¸ºçœŸæ—¶è¿”å›çš„ç»“æœ if æ¡ä»¶åˆ¤æ–­ else æ¡ä»¶ä¸ºå‡æ—¶è¿”å›çš„ç»“æœ(x if x&gt;y else y)  </p></blockquote><p>é—­åŒ…åº”ç”¨åœºæ™¯ï¼šä¸å»ºè®®åœ¨ä¸šåŠ¡ä»£ç é‡Œå¤§é‡ä½¿ç”¨é—­åŒ…ï¼›å†™æ¡†æ¶ã€åŒ…ã€ç±»åº“çš„æ—¶å€™å¯ä»¥å°è¯•å†™ä¸€ä¸‹é—­åŒ…  </p><h1 id="å‡½æ•°å¼ç¼–ç¨‹æ¨èç”¨æ³•"><a href="#å‡½æ•°å¼ç¼–ç¨‹æ¨èç”¨æ³•" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹æ¨èç”¨æ³•"></a>å‡½æ•°å¼ç¼–ç¨‹æ¨èç”¨æ³•</h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>list_x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>list_y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">36</span><span class="token punctuation">,</span> <span class="token number">49</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">]</span><span class="token keyword">def</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">return</span> x <span class="token operator">*</span> xr <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span>square<span class="token punctuation">,</span> list_x<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="lambdaä¸èƒ½è®©ä»£ç è¿è¡Œé€Ÿåº¦å˜å¿«ï¼Œåªèƒ½è®©ä»£ç æ›´ç®€æ´"><a href="#lambdaä¸èƒ½è®©ä»£ç è¿è¡Œé€Ÿåº¦å˜å¿«ï¼Œåªèƒ½è®©ä»£ç æ›´ç®€æ´" class="headerlink" title="lambdaä¸èƒ½è®©ä»£ç è¿è¡Œé€Ÿåº¦å˜å¿«ï¼Œåªèƒ½è®©ä»£ç æ›´ç®€æ´"></a>lambdaä¸èƒ½è®©ä»£ç è¿è¡Œé€Ÿåº¦å˜å¿«ï¼Œåªèƒ½è®©ä»£ç æ›´ç®€æ´</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>list_x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>r <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token operator">*</span>x<span class="token punctuation">,</span> list_x<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span>list_x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>list_y <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>   <span class="token comment"># ä¼ å…¥çš„å‚æ•°ä¸ªæ•°è¦æ³¨æ„ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰ï¼Œä¸ä¼šæŠ¥é”™ï¼Œä¼šæŒ‰æœ€å°‘å‚æ•°çš„å˜é‡èµ°ã€‚</span>r <span class="token operator">=</span> <span class="token builtin">map</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">,</span> y<span class="token punctuation">:</span> x<span class="token operator">*</span>x <span class="token operator">+</span> y<span class="token punctuation">,</span> list_x<span class="token punctuation">,</span> list_y<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="reduce-è¿ç»­çš„è®¡ç®—ï¼Œè¿ç»­è°ƒç”¨lambda"><a href="#reduce-è¿ç»­çš„è®¡ç®—ï¼Œè¿ç»­è°ƒç”¨lambda" class="headerlink" title="reduce(è¿ç»­çš„è®¡ç®—ï¼Œè¿ç»­è°ƒç”¨lambda)"></a>reduce(è¿ç»­çš„è®¡ç®—ï¼Œè¿ç»­è°ƒç”¨lambda)</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> functools <span class="token keyword">import</span> <span class="token builtin">reduce</span>list_x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>r <span class="token operator">=</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">,</span>y<span class="token punctuation">:</span>x<span class="token operator">+</span>y<span class="token punctuation">,</span>list_x<span class="token punctuation">)</span><span class="token comment"># ç¬¬ä¸€æ¬¡è°ƒç”¨x=1ï¼Œy=2ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œx=x+yï¼Œy=3ï¼Œç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼Œx=x+yï¼Œy=4ä¾æ­¤ç±»æ¨ã€‚ç›¸å½“äº(((((((1+2)+3)+4)+5)+6)+7)+8)=36</span>r1 <span class="token operator">=</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">,</span>y<span class="token punctuation">:</span>x<span class="token operator">+</span>y<span class="token punctuation">,</span>list_x<span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span>   <span class="token comment"># è¿™é‡Œæ˜¯((((10+1)+2)+3)...+8)=46</span>r2 <span class="token operator">=</span> <span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">,</span>y<span class="token punctuation">:</span>x<span class="token operator">+</span>y<span class="token punctuation">,</span>list_x<span class="token punctuation">,</span><span class="token string">'aa'</span><span class="token punctuation">)</span>   <span class="token comment"># è¿™é‡Œç»“æœä¸º'aa112345678'</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Googleæå‡ºçš„å¤§æ•°æ®è®¡ç®—æ¨¡å‹â€“map/reduceï¼Œæ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å‹ï¼Œmapæ˜¯æ˜ å°„ï¼›reduceè§„çº¦ï¼›ç”¨äºå¤§æ•°æ®å¹¶è¡Œè®¡ç®—ã€‚  </p><h2 id="filter-è¿‡æ»¤"><a href="#filter-è¿‡æ»¤" class="headerlink" title="filter(è¿‡æ»¤)"></a>filter(è¿‡æ»¤)</h2><p>å‡½æ•°å¼ç¼–ç¨‹&amp;å‘½ä»¤å¼ç¼–ç¨‹ï¼ˆlispå‡½æ•°å¼ç¼–ç¨‹çš„é¼»ç¥–ï¼Œåœ¨äººå·¥æ™ºèƒ½é¢†åŸŸåº”ç”¨çš„æ˜¯æ¯”è¾ƒå¤šçš„ï¼‰  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>list_x <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span>r <span class="token operator">=</span> <span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token boolean">True</span> <span class="token keyword">if</span> x <span class="token operator">==</span> <span class="token number">1</span> <span class="token keyword">else</span> <span class="token boolean">False</span><span class="token punctuation">,</span> list_x<span class="token punctuation">)</span>   <span class="token comment"># filterçš„lambdaè¡¨è¾¾å¼è¿”å›ç»“æœä¸ºTrue/Falseï¼Œèƒ½è¡¨ç¤ºTrue/Falseçš„è¿”å›ç»“æœå°±è¡Œï¼ˆæ¯”å¦‚0/1ï¼‰</span>r1 <span class="token operator">=</span> <span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">,</span> list_x<span class="token punctuation">)</span>   <span class="token comment"># å› ä¸ºè¿™é‡Œxå–å€¼åªæœ‰0/1ï¼Œxä¸º0å°±æ˜¯Falseï¼Œxä¸º1å°±æ˜¯True</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è£…é¥°å™¨-pythonè¿›é˜¶ä¸­ä½¿ç”¨è¾ƒå¤šçš„"><a href="#è£…é¥°å™¨-pythonè¿›é˜¶ä¸­ä½¿ç”¨è¾ƒå¤šçš„" class="headerlink" title="è£…é¥°å™¨(pythonè¿›é˜¶ä¸­ä½¿ç”¨è¾ƒå¤šçš„)"></a>è£…é¥°å™¨(pythonè¿›é˜¶ä¸­ä½¿ç”¨è¾ƒå¤šçš„)</h2><blockquote><p>å¯¹ä¿®æ”¹æ˜¯å°é—­çš„ï¼Œå¯¹æ‰©å±•æ˜¯å¼€æ”¾çš„â€“ç¼–å†™ä»£ç çš„å°é—­åŸåˆ™<br>é€šè¿‡æ‰©å±•ä¸€ä¸ªå‡½æ•°/ç±»ï¼Œæ¥è§£å†³éœ€æ±‚å˜æ›´çš„é—®é¢˜  </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># unixæ—¶é—´æˆ³ï¼ˆæ ¼æ—å¨æ²»æ—¶é—´1970/01/01 00:00:00åˆ°æ‰§è¡Œæ­¤æ®µè¯çš„æ€»ç§’æ•°ï¼›ç°åœ¨è·æ ¼æ—å¨æ²»æ—¶é—´å¤šå°‘ç§’ï¼‰</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function'</span><span class="token punctuation">)</span>f1<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function2'</span><span class="token punctuation">)</span><span class="token comment"># ä¸‹é¢å®šä¹‰å‡½æ•°æ²¡æœ‰ä½“ç°ä¸f1/f2ç›¸å…³è”</span><span class="token keyword">def</span> <span class="token function">print_current_time</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    func<span class="token punctuation">(</span><span class="token punctuation">)</span>print_current_time<span class="token punctuation">(</span>f1<span class="token punctuation">)</span>print_current_time<span class="token punctuation">(</span>f2<span class="token punctuation">)</span><span class="token comment"># ä¸Šé¢å®šä¹‰å‡½æ•°,å’Œä¸‹é¢çš„å‡ ä¹æ²¡æœ‰åŒºåˆ«</span><span class="token comment"># print(time.time())</span><span class="token comment"># f1()</span><span class="token comment"># print(time.time())</span><span class="token comment"># f2()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è¿™é‡Œå°±æ˜¯è£…é¥°å™¨-æ²¡å•¥ä»·å€¼"><a href="#è¿™é‡Œå°±æ˜¯è£…é¥°å™¨-æ²¡å•¥ä»·å€¼" class="headerlink" title="è¿™é‡Œå°±æ˜¯è£…é¥°å™¨(æ²¡å•¥ä»·å€¼)"></a>è¿™é‡Œå°±æ˜¯è£…é¥°å™¨(æ²¡å•¥ä»·å€¼)</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> time<span class="token comment"># è¿™é‡Œä¹Ÿæ²¡æœ‰ä½“ç°ä¸f2ç›¸å…³è”</span><span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        func<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> wrapper<span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function'</span><span class="token punctuation">)</span>f <span class="token operator">=</span> decorator<span class="token punctuation">(</span>f1<span class="token punctuation">)</span>f<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="è£…é¥°å™¨çš„çµé­‚"><a href="#è£…é¥°å™¨çš„çµé­‚" class="headerlink" title="è£…é¥°å™¨çš„çµé­‚"></a>è£…é¥°å™¨çš„çµé­‚</h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        func<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> wrapper<span class="token decorator annotation punctuation">@decorator</span>   <span class="token comment"># è£…é¥°å™¨çš„çµé­‚</span><span class="token comment"># @+è£…é¥°å™¨çš„åå­—ï¼Œä½¿ç”¨@decoratorä¸æ”¹å˜è°ƒç”¨æ–¹å¼ç›´æ¥ä½¿ç”¨f1()è°ƒç”¨</span><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function'</span><span class="token punctuation">)</span>f1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># ä¸‹é¢ä¸¤è¡Œæ˜¯åŸæ¥çš„è°ƒç”¨æ–¹å¼</span><span class="token comment"># f = decorator(f1)</span><span class="token comment"># f()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>pythonä¸­çš„è£…é¥°å™¨å¼•ç”¨äº†AOPçš„ç¼–ç¨‹æ€æƒ³  </p><h2 id="åœ¨è£…é¥°å™¨ä¸­è°ƒç”¨å‚æ•°"><a href="#åœ¨è£…é¥°å™¨ä¸­è°ƒç”¨å‚æ•°" class="headerlink" title="åœ¨è£…é¥°å™¨ä¸­è°ƒç”¨å‚æ•°"></a>åœ¨è£…é¥°å™¨ä¸­è°ƒç”¨å‚æ•°</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span>func_name<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># è¿™é‡Œä¹Ÿè¦å­˜åœ¨f1å®šä¹‰çš„å‚æ•°</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        func<span class="token punctuation">(</span>func_name<span class="token punctuation">)</span>   <span class="token comment"># ä¼ å‚</span>    <span class="token keyword">return</span> wrapper<span class="token decorator annotation punctuation">@decorator</span><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>func_name<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®šä¹‰ä¸€ä¸ªfunc_nameå‚æ•°</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name<span class="token punctuation">)</span>f1<span class="token punctuation">(</span><span class="token string">'test func'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸Šé¢å‡½æ•°æ‰§è¡Œæµç¨‹ï¼š  </p><ol><li>åŠ è½½pythonå†…ç½®çš„timeå‡½æ•°  </li><li>åˆ°decoratorï¼ˆè£…é¥°å™¨ï¼‰æ–¹æ³•  </li><li>ç›´æ¥åˆ°@decoratorè¿™ä¸ªè£…é¥°å™¨  </li><li>è¿™æ—¶å€™æ‰§è¡Œdecoratoræ–¹æ³•çš„å‡½æ•°ä½“ï¼ˆè¿™é‡Œæ˜¯ä¸€ä¸ªwrapperå‡½æ•°ï¼‰  </li><li>ç›´æ¥åˆ°return wrapper  </li><li>ç›´æ¥åˆ°f1()å‡½æ•°è°ƒç”¨/æ‰§è¡Œè¿™é‡Œ  </li><li>ä¸‹é¢æ‰æ˜¯æ‰§è¡Œwrapperå‡½æ•°/æ–¹æ³•é‡Œé¢çš„å‡½æ•°ä½“print()ã€func()  </li><li>æœ€åæ˜¯f1æ–¹æ³•é‡Œé¢çš„å‡½æ•°ä½“print() def f1(func_name):æ­¤æ®µæ²¡æœ‰èµ°ï¼Œä½†æ˜¯èµ°äº†æ­¤æ–¹æ³•ä¸‹çš„å‡½æ•°ä½“å’Œå‡½æ•°è°ƒç”¨  </li></ol><h1 id="æ‰©å±•ï¼š-åé¢ä¼ å…¥å…ƒç¥–-åé¢ä¼ å…¥å­—å…¸ï¼Œå“¥ä»¬æä¾›ï¼ŒæœªéªŒè¯ã€‚"><a href="#æ‰©å±•ï¼š-åé¢ä¼ å…¥å…ƒç¥–-åé¢ä¼ å…¥å­—å…¸ï¼Œå“¥ä»¬æä¾›ï¼ŒæœªéªŒè¯ã€‚" class="headerlink" title="æ‰©å±•ï¼š*åé¢ä¼ å…¥å…ƒç¥–**åé¢ä¼ å…¥å­—å…¸ï¼Œå“¥ä»¬æä¾›ï¼ŒæœªéªŒè¯ã€‚"></a>æ‰©å±•ï¼š*åé¢ä¼ å…¥å…ƒç¥–**åé¢ä¼ å…¥å­—å…¸ï¼Œå“¥ä»¬æä¾›ï¼ŒæœªéªŒè¯ã€‚</h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å¯å˜å‚æ•°(è¿™é‡Œ*argsæ˜¯å…¶å®ƒè¯­è¨€é€šç”¨å†™æ³•ï¼Œå¯ä»¥æ˜¯åˆ«çš„*å•è¯ï¼Œè¡¨ç¤ºä»»æ„å‚æ•°/ä»»æ„å‚æ•°ä¸ªæ•°),éµå¾ªå°é—­åŸåˆ™ã€‚</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span>    <span class="token keyword">return</span> wrapper<span class="token decorator annotation punctuation">@decorator</span><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>func_name<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># åˆ©ç”¨è£…é¥°å™¨çš„å¯å˜å‚æ•°å®šä¹‰ä¸€ä¸ªå‚æ•°å</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name<span class="token punctuation">)</span><span class="token decorator annotation punctuation">@decorator</span><span class="token keyword">def</span> <span class="token function">f2</span><span class="token punctuation">(</span>func_name1<span class="token punctuation">,</span> func_name2<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># åˆ©ç”¨å¯å˜å‚æ•°å®šä¹‰å¤šä¸ªå‚æ•°</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name1<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name2<span class="token punctuation">)</span>f1<span class="token punctuation">(</span><span class="token string">'test func'</span><span class="token punctuation">)</span>f2<span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">,</span> <span class="token string">'test2'</span><span class="token punctuation">)</span>    <span class="token comment"># è°ƒç”¨è¿™é‡Œè¦å’Œå®šä¹‰ä¿æŒä¸€è‡´</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="pythoné‡Œé¢ä½¿ç”¨-argsï¼Œå’Œ-kw"><a href="#pythoné‡Œé¢ä½¿ç”¨-argsï¼Œå’Œ-kw" class="headerlink" title="pythoné‡Œé¢ä½¿ç”¨*argsï¼Œå’Œ**kw"></a>pythoné‡Œé¢ä½¿ç”¨*argsï¼Œå’Œ**kw</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span>    <span class="token keyword">return</span> wrapper<span class="token decorator annotation punctuation">@decorator</span><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>func_name<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name<span class="token punctuation">)</span><span class="token decorator annotation punctuation">@decorator</span><span class="token keyword">def</span> <span class="token function">f2</span><span class="token punctuation">(</span>func_name1<span class="token punctuation">,</span> func_name2<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name1<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name2<span class="token punctuation">)</span><span class="token decorator annotation punctuation">@decorator</span><span class="token keyword">def</span> <span class="token function">f3</span><span class="token punctuation">(</span>func_name3<span class="token punctuation">,</span> func_name4<span class="token punctuation">,</span> <span class="token operator">**</span>kw<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># **kwå…³é”®å­—å‚æ•°(key word)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name3<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name4<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>kw<span class="token punctuation">)</span>f1<span class="token punctuation">(</span><span class="token string">'test func'</span><span class="token punctuation">)</span>f2<span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">,</span> <span class="token string">'test2'</span><span class="token punctuation">)</span>f3<span class="token punctuation">(</span><span class="token string">'name3'</span><span class="token punctuation">,</span> <span class="token string">'name4'</span><span class="token punctuation">,</span> a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">,</span> c<span class="token operator">=</span><span class="token string">'123'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è£…é¥°å™¨æœ€åŸºæœ¬çš„æ€æƒ³ï¼š<br>&emsp;&emsp;å¦‚æœæˆ‘ä»¬å¯¹æŸä¸€ä¸ªè¢«å°è£…çš„å•å…ƒï¼ˆæ¯”å¦‚è¯´å‡½æ•°ï¼‰ï¼Œåšå‡ºä»£ç ä¸Šçš„ä¿®æ”¹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸å»å…·ä½“çš„å®ç°ï¼Œè€Œæ˜¯é€šè¿‡è£…é¥°å™¨çš„è¿™ç§å½¢å¼ï¼Œæ¥æ”¹å˜å‡½æ•°çš„è¡Œä¸ºâ€”-ä»£ç çš„ç¨³å®šæ€§<br>&emsp;&emsp;æ¯”å¦‚è¯´æ‰“å°æ—¶é—´è¿™ä¸ªåŠŸèƒ½ï¼Œæ˜¯æˆ‘ä»¬æ–°å¢çš„ä¸€ä¸ªé€»è¾‘ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªé€»è¾‘å°è£…æˆä¸€ä¸ªè£…é¥°å™¨ï¼Œå‡¡æ˜¯éœ€è¦æœ‰æ‰“å°æ—¶é—´åŠŸèƒ½çš„å‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ @è£…é¥°å™¨å æ¥åŠ åœ¨è¦æ‰“å°æ—¶é—´çš„å‡½æ•°ä¸Šé¢â€”-ä»£ç çš„å¤ç”¨æ€§  </p><h1 id="æ²¡æœ‰å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°çš„æƒ…å†µï¼š"><a href="#æ²¡æœ‰å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°çš„æƒ…å†µï¼š" class="headerlink" title="æ²¡æœ‰å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°çš„æƒ…å†µï¼š"></a>æ²¡æœ‰å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°çš„æƒ…å†µï¼š</h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span>i<span class="token punctuation">,</span>p<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        func<span class="token punctuation">(</span>q<span class="token punctuation">,</span>i<span class="token punctuation">,</span>p<span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token decorator annotation punctuation">@decorator</span><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>we<span class="token punctuation">,</span>qw<span class="token punctuation">,</span>da<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'12'</span><span class="token punctuation">)</span>f1<span class="token punctuation">(</span><span class="token string">'we'</span><span class="token punctuation">,</span><span class="token string">'qw'</span><span class="token punctuation">,</span><span class="token string">'da'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å‡ ä¸ªä¾‹å­ï¼Œè£…é¥°å™¨çš„ä½œç”¨"><a href="#å‡ ä¸ªä¾‹å­ï¼Œè£…é¥°å™¨çš„ä½œç”¨" class="headerlink" title="å‡ ä¸ªä¾‹å­ï¼Œè£…é¥°å™¨çš„ä½œç”¨"></a>å‡ ä¸ªä¾‹å­ï¼Œè£…é¥°å™¨çš„ä½œç”¨</h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># flaskæ¡†æ¶</span><span class="token decorator annotation punctuation">@api<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/get'</span><span class="token punctuation">,</span>methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">test_javasctipt_http</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    p <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> p<span class="token punctuation">,</span> <span class="token number">200</span><span class="token decorator annotation punctuation">@api<span class="token punctuation">.</span>route</span><span class="token punctuation">(</span><span class="token string">'/psw'</span><span class="token punctuation">,</span> methods<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'GET'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token decorator annotation punctuation">@auth<span class="token punctuation">.</span>login_required</span><span class="token keyword">def</span> <span class="token function">get_psw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    p <span class="token operator">=</span> request<span class="token punctuation">.</span>args<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'psw'</span><span class="token punctuation">)</span>    r <span class="token operator">=</span> generate_password_hash<span class="token punctuation">(</span>p<span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token string">'aaaaaa'</span><span class="token punctuation">,</span> <span class="token number">200</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä»¥ä¸‹ä¸ºèœé¸Ÿç¬”è®°"><a href="#ä»¥ä¸‹ä¸ºèœé¸Ÿç¬”è®°" class="headerlink" title="ä»¥ä¸‹ä¸ºèœé¸Ÿç¬”è®°"></a>ä»¥ä¸‹ä¸ºèœé¸Ÿç¬”è®°</h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">def</span> <span class="token function">hi</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"yasoob"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">"now you are in the greet() function"</span>    <span class="token keyword">def</span> <span class="token function">welcome</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">"now you are in the welcome() function"</span>    <span class="token comment"># æ¯æ¬¡è¿è¡Œåªè§£å¼€ä¸€æ®µif/elseè¯­å¥ï¼Œå¯¹æ¯”ä¸åŒã€‚</span>    <span class="token keyword">if</span> name <span class="token operator">==</span> <span class="token string">"yasoob"</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> greet<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># è¿™é‡Œè¿”å›çš„æ˜¯greet()</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> welcome<span class="token punctuation">(</span><span class="token punctuation">)</span>a <span class="token operator">=</span> hi<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token comment">#     if name == "yasoob":</span><span class="token comment">#         return greet   # è¿™é‡Œè¿”å›çš„æ˜¯greet</span><span class="token comment">#     else:</span><span class="token comment">#         return welcome</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">print(hi()())   # ä»”ç»†çœ‹è¿™é‡Œå’Œä¸Šé¢çš„ä¸åŒï¼Œä¸Šé¢æ˜¯è¿”å›greet()ï¼Œæ‰€ä»¥æ‰“å°çš„æ˜¯hi()ï¼Œè€Œè¿™é‡Œè¿”å›çš„æ˜¯greet,æ‰€ä»¥æ˜¯hi()()æŸ¥è¯¢åˆ°çš„èµ„æ–™ï¼šå†æ¬¡çœ‹çœ‹è¿™ä¸ªä»£ç ã€‚åœ¨ if&#x2F;else è¯­å¥ä¸­æˆ‘ä»¬è¿”å› greet å’Œ welcomeï¼Œè€Œä¸æ˜¯ greet() å’Œ welcome()ã€‚ä¸ºä»€ä¹ˆé‚£æ ·ï¼Ÿè¿™æ˜¯å› ä¸ºå½“ä½ æŠŠä¸€å¯¹å°æ‹¬å·æ”¾åœ¨åé¢ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šæ‰§è¡Œï¼›ç„¶è€Œå¦‚æœä½ ä¸æ”¾æ‹¬å·åœ¨å®ƒåé¢ï¼Œé‚£å®ƒå¯ä»¥è¢«åˆ°å¤„ä¼ é€’ï¼Œå¹¶ä¸”å¯ä»¥èµ‹å€¼ç»™åˆ«çš„å˜é‡è€Œä¸å»æ‰§è¡Œå®ƒã€‚ ä½ æ˜ç™½äº†å—ï¼Ÿè®©æˆ‘å†ç¨å¾®å¤šè§£é‡Šç‚¹ç»†èŠ‚ã€‚å½“æˆ‘ä»¬å†™ä¸‹ a &#x3D; hi()ï¼Œhi() ä¼šè¢«æ‰§è¡Œï¼Œè€Œç”±äº name å‚æ•°é»˜è®¤æ˜¯ yasoobï¼Œæ‰€ä»¥å‡½æ•° greet è¢«è¿”å›äº†ã€‚å¦‚æœæˆ‘ä»¬æŠŠè¯­å¥æ”¹ä¸º a &#x3D; hi(name &#x3D; &quot;ali&quot;)ï¼Œé‚£ä¹ˆ welcome å‡½æ•°å°†è¢«è¿”å›ã€‚æˆ‘ä»¬è¿˜å¯ä»¥æ‰“å°å‡º hi()()ï¼Œè¿™ä¼šè¾“å‡º now you are in the greet() functionã€‚<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è£…é¥°å™¨é‡Šä¹‰"><a href="#è£…é¥°å™¨é‡Šä¹‰" class="headerlink" title="è£…é¥°å™¨é‡Šä¹‰"></a>è£…é¥°å™¨é‡Šä¹‰</h1><p>ä»¥ä¸‹åªæ¶‰åŠè£…é¥°å™¨å’Œå‡½æ•°è°ƒç”¨  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">hi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># ç¬¬ä¸€æ­¥å°†æ­¤åŠ è½½åˆ°å†…å­˜ï¼ˆä¸ªäººç†è§£ï¼špythonè„šæœ¬è¿è¡Œçš„æ—¶å€™ï¼Œä¼šå…ˆæŠŠç±»å’Œå‡½æ•°åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåˆ©ç”¨pycharmè°ƒè¯•æ¨¡å¼éªŒè¯ï¼‰</span>    <span class="token keyword">return</span> <span class="token string">"hi yasoob!"</span>  <span class="token comment"># ç¬¬å…­æ­¥ï¼Œä¼—æ‰€å‘¨çŸ¥ï¼Œè¿™é‡Œè¢«æ‰§è¡Œæ˜¯å› ä¸ºç¬¬äº”æ­¥è°ƒç”¨äº†hi()æ–¹æ³•ã€‚</span><span class="token keyword">def</span> <span class="token function">doSomethingBeforeHi</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># ç¬¬äºŒæ­¥ï¼Œå°†æ­¤åŠ è½½åˆ°å†…å­˜ï¼Œå‚è€ƒä¸€ã€‚</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"I am doing some boring work before executing hi()"</span><span class="token punctuation">)</span>  <span class="token comment"># ç¬¬å››æ­¥ï¼Œç¬¬ä¸‰æ­¥è°ƒç”¨çš„æ˜¯æ­¤å‡½æ•°/æ–¹æ³•ï¼Œç»™çš„å‚æ•°æ˜¯hiï¼Œ</span>    <span class="token comment"># è¿™æ—¶å€™func=hiï¼ˆå¦‚æœç¬¬ä¸‰æ­¥ç»™çš„æ˜¯å…¶å®ƒå­—ç¬¦ä¸²strï¼Œä¾‹å¦‚'ha'ï¼Œè¿™é‡Œå°±æ˜¯func='ha'ï¼Œæ³¨æ„ç¬¬äº”æ­¥ï¼‰</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>func<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># ç¬¬äº”æ­¥ï¼Œå› ä¸ºç¬¬å››æ­¥ï¼Œæˆ‘ä»¬çŸ¥é“func=hiï¼Œæ‰€ä»¥è¿™é‡Œfunc()å°±å˜æˆhi()äº†ï¼Œä¸Šé¢å®šä¹‰çš„hi()å‡½æ•°è¢«è°ƒç”¨,</span>    <span class="token comment"># è¿™æ—¶å€™çœ‹ç¬¬å››æ­¥ï¼Œå¦‚æœæ˜¯ä¸Šé¢è¯´çš„func='ha'ï¼Œè¿™é‡Œå°±ä¼šå˜æˆ'ha'()ï¼Œæ‰§è¡Œå°±ä¼šæŠ¥é”™ï¼Œå­—ç¬¦ä¸²å˜æˆäº†ä¸€ä¸ªå‡½æ•°ï¼Ÿï¼Ÿï¼Ÿ</span>doSomethingBeforeHi<span class="token punctuation">(</span>hi<span class="token punctuation">)</span>  <span class="token comment"># ç¬¬ä¸‰æ­¥ï¼Œå°†å‡½æ•°è°ƒç”¨åŠ è½½åˆ°å†…å­˜ï¼ˆåˆ©ç”¨pycharmè°ƒè¯•æ¨¡å¼ï¼Œå¾—åˆ°çš„ç»“æœï¼Œå…ˆåŠ è½½å‡½æ•°ä½“ï¼Œå†åŠ è½½å‡½æ•°è°ƒç”¨ï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="è¿™é‡Œå°±æ˜¯è£…é¥°å™¨-æ²¡å•¥ä»·å€¼çš„è£…é¥°å™¨"><a href="#è¿™é‡Œå°±æ˜¯è£…é¥°å™¨-æ²¡å•¥ä»·å€¼çš„è£…é¥°å™¨" class="headerlink" title="è¿™é‡Œå°±æ˜¯è£…é¥°å™¨(æ²¡å•¥ä»·å€¼çš„è£…é¥°å™¨)"></a>è¿™é‡Œå°±æ˜¯è£…é¥°å™¨(æ²¡å•¥ä»·å€¼çš„è£…é¥°å™¨)</h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> time  <span class="token comment"># åŠ è½½å†…ç½®timeæ–¹æ³•</span><span class="token comment"># è¿™é‡Œä¹Ÿæ²¡æœ‰ä½“ç°ä¸f2ç›¸å…³è”ï¼Œè¿™é‡Œçš„f2å‚è€ƒ å‡½æ•°å¼ç¼–ç¨‹.py æ–‡æ¡£</span><span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># å®šä¹‰decoratoræ–¹æ³•ï¼Œå†…ç½®funcå‚æ•°ï¼›è¿™é‡Œè¢«ä¸‹æ–‡ f è°ƒç”¨äº†ä¼ å…¥å‚æ•°æ˜¯f1ï¼Œæ³¨ä¸€ï¼</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># å®šä¹‰wrapperæ–¹æ³•ï¼›æ¥æ³¨äº”ï¼Œæ­¤æ–¹æ³•è¢«æ‰§è¡Œäº†ã€‚</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># è·å–æ—¶é—´æˆ³ï¼›æ¥æ³¨äºŒï¼Œè¿™é‡Œä¼šå…ˆè¢«æ‰§è¡Œï¼Œæ‰“å°æ—¶é—´æˆ³ã€‚æ³¨ä¸‰ï¼</span>        func<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># å‡½æ•°è°ƒç”¨ï¼Œé åˆ«äººä¼ å‚è°ƒç”¨ï¼›æ¥æ³¨ä¸€ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯f1()ï¼Œæ³¨äºŒï¼</span>    <span class="token keyword">return</span> wrapper  <span class="token comment"># è¿”å›wrapperï¼Œè¿™é‡Œæ˜¯decoratorçš„å‡½æ•°ä½“ï¼ˆåŒ…æ‹¬wrapperæ–¹æ³•ï¼‰ï¼Œå½“decoratoræ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œæ‰ä¼šè¿”å›wrapper</span><span class="token comment"># æ¥æ³¨ä¸‰ï¼Œreturn wrapperï¼Œè¿”å›æ—¶é—´æˆ³ã€‚æ³¨æ„è¿™é‡Œæ˜¯wrapperï¼Œï¼Œä¸æ˜¯wrapper()ï¼Œ</span><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># å®šä¹‰f1æ–¹æ³•</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function'</span><span class="token punctuation">)</span>  <span class="token comment"># f1çš„å‡½æ•°ä½“ï¼›æ¥æ³¨ä¸€ï¼Œæ³¨ä¸€é‚£é‡Œè°ƒç”¨äº†f1()æ–¹æ³•ï¼Œæ­¤æ®µè¢«æ‰§è¡Œ</span>f <span class="token operator">=</span> decorator<span class="token punctuation">(</span>f1<span class="token punctuation">)</span>  <span class="token comment"># è¿™é‡Œè°ƒç”¨äº†decoratoræ–¹æ³•ï¼Œä¼ å…¥çš„å‚æ•°æ˜¯f1å‡½æ•°ï¼›åŒæ—¶æŠŠdecorator()ç»“æœèµ‹å€¼ç»™fï¼Œç»“æœæ˜¯return wrapperï¼›æ³¨å››ï¼</span>f<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># æ¥æ³¨å››ï¼Œç»“æœä¸ºf=wrapperï¼Œè¿™é‡Œå°±å˜æˆf()=wrapper()ï¼Œæ³¨äº”ï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯¹æ¯”æœ‰æ— @decoratorçš„åŒºåˆ«ï¼šæ²¡æœ‰çš„æ—¶å€™ï¼Œéœ€è¦æŠŠf1ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™decoratorï¼Œç„¶åæŠŠæ‰§è¡Œç»“æœäº¤ç»™fï¼Œæœ€ååœ¨æ‰§è¡Œä¸€éf()<br>æœ‰äº†@decoratorä¹‹åï¼šå¯ä»¥ç›´æ¥è°ƒç”¨f1()ï¼Œå¦‚æœæ²¡æœ‰@decoratorï¼Œåªæ˜¯æ‰§è¡Œf1()å‡½æ•°è€Œå·²ï¼Œä¸ä¼šå»è°ƒç”¨è£…é¥°å™¨ã€‚  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># æ³¨ï¼šä¸Šé¢ä¸¤ä¸ªæ³¨é‡Šå¤ªå¤šäº†ï¼Œå¼„æ‡‚ä¹‹åï¼Œä¸‹é¢å°±ä¸éœ€è¦å¤ªå¤šæ³¨é‡Š</span><span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        func<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> wrapper<span class="token decorator annotation punctuation">@decorator</span>  <span class="token comment"># è£…é¥°å™¨çš„çµé­‚</span><span class="token comment"># @+è£…é¥°å™¨çš„åå­—ï¼Œä½¿ç”¨@decoratorä¸æ”¹å˜è°ƒç”¨æ–¹å¼ç›´æ¥ä½¿ç”¨f1()è°ƒç”¨</span><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function'</span><span class="token punctuation">)</span>f1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># ä¸‹é¢ä¸¤è¡Œæ˜¯åŸæ¥çš„è°ƒç”¨æ–¹å¼</span><span class="token comment"># f = decorator(f1)</span><span class="token comment"># f()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="åœ¨è£…é¥°å™¨ä¸­è°ƒç”¨å‚æ•°-1"><a href="#åœ¨è£…é¥°å™¨ä¸­è°ƒç”¨å‚æ•°-1" class="headerlink" title="åœ¨è£…é¥°å™¨ä¸­è°ƒç”¨å‚æ•°"></a>åœ¨è£…é¥°å™¨ä¸­è°ƒç”¨å‚æ•°</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># è¿™é‡Œæ˜¯ä¼ å…¥çš„f1ï¼Œæ‰€ä»¥func=f1</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span>func_name<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># è¿™é‡Œä¹Ÿè¦æœ‰å½¢å‚ï¼Œå‚è€ƒæ³¨ä¸€ï¼Œå¦‚æœf1()è¢«è°ƒç”¨ï¼Œä¸€å®šæ˜¯æœ‰å®å‚çš„ã€‚</span>        <span class="token comment"># é€šè¿‡ä¸Šé¢çš„ä¸¤ä¸ªä¾‹å­æˆ‘ä»¬çŸ¥é“ï¼Œè¿™é‡Œæ˜¯è¢«wrapper('å®å‚')è°ƒç”¨çš„ï¼Œæ‰€ä»¥è¿™é‡Œå¿…é¡»æœ‰å½¢å‚ã€‚</span>        <span class="token comment"># å‚è€ƒæ–‡æœ«å®å‚å½¢å‚çš„åŒºåˆ«ï¼ˆè¿™é‡Œéµå¾ªç¬¬3æ¡ï¼Œå‚æ•°çš„ä¸€è‡´æ€§ï¼‰</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        func<span class="token punctuation">(</span>func_name<span class="token punctuation">)</span>   <span class="token comment"># è¿™é‡Œæ˜¯f1()ï¼Œè¿™æ ·å°±è§£é‡Šäº†ä¸ºä»€ä¹ˆwrapperé‚£é‡Œè¦åŠ å‚æ•°ï¼Œå› ä¸ºä¸‹æ–‡è°ƒç”¨æ—¶æ˜¯f1('test func')</span>    <span class="token keyword">return</span> wrapper   <span class="token comment"># è¿™é‡Œè¿”å›decorator(f1)çš„ç»“æœ</span><span class="token decorator annotation punctuation">@decorator</span><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>func_name<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># f1å‡½æ•°å†…ç½®äº†func_nameå‚æ•°ï¼ˆåŒäº‹æä¾›ï¼šè¿™é‡Œå¯ä»¥å¡«å…¥çº¦æŸå½¢å‚çš„ç±»å‹strä¹‹ç±»ï¼‰</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name<span class="token punctuation">)</span>   <span class="token comment"># æ‰“å°'This is a function ' + func_name</span>f1<span class="token punctuation">(</span><span class="token string">'test func'</span><span class="token punctuation">)</span>   <span class="token comment"># è°ƒç”¨å¿…é¡»ä¼ å…¥å®å‚ï¼Œæ³¨ä¸€ï¼</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¯å˜å‚æ•°"><a href="#å¯å˜å‚æ•°" class="headerlink" title="å¯å˜å‚æ•°"></a>å¯å˜å‚æ•°</h3><p>å¯å˜å‚æ•°<em>argsï¼Œ</em>åé¢å¯ä»¥æ˜¯å…¶å®ƒï¼Œ*a,<em>bç­‰ç­‰ï¼Œè¿™æ ·ä»¥åè°ƒç”¨ï¼Œä¸ç”¨æ›´æ”¹è£…é¥°å™¨çš„å†…å®¹ï¼ˆéµå¾ªå¼€é—­åŸåˆ™ï¼ŒJust a suggestionï¼‰<br>æ‰©å±•ï¼š</em>åé¢ä¼ å…¥å…ƒç¥–**åé¢ä¼ å…¥å­—å…¸ï¼Œå“¥ä»¬æä¾›ï¼ŒæœªéªŒè¯ã€‚  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># å¯å˜å‚æ•°(è¿™é‡Œ*argsæ˜¯å…¶å®ƒè¯­è¨€é€šç”¨å†™æ³•ï¼Œå¯ä»¥æ˜¯åˆ«çš„*å•è¯ï¼Œè¡¨ç¤ºä»»æ„å‚æ•°/ä»»æ„å‚æ•°ä¸ªæ•°),éµå¾ªå¼€é—­åŸåˆ™ã€‚</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        func<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">)</span>    <span class="token keyword">return</span> wrapper<span class="token decorator annotation punctuation">@decorator</span><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>func_name<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># åˆ©ç”¨è£…é¥°å™¨çš„å¯å˜å‚æ•°å®šä¹‰ä¸€ä¸ªå‚æ•°å</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name<span class="token punctuation">)</span><span class="token decorator annotation punctuation">@decorator</span><span class="token keyword">def</span> <span class="token function">f2</span><span class="token punctuation">(</span>func_name1<span class="token punctuation">,</span> func_name2<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># åˆ©ç”¨å¯å˜å‚æ•°å®šä¹‰å¤šä¸ªå‚æ•°</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name1<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function '</span> <span class="token operator">+</span> func_name2<span class="token punctuation">)</span>f1<span class="token punctuation">(</span><span class="token string">'test func'</span><span class="token punctuation">)</span>f2<span class="token punctuation">(</span><span class="token string">'test1'</span><span class="token punctuation">,</span> <span class="token string">'test2'</span><span class="token punctuation">)</span>  <span class="token comment"># è°ƒç”¨è¿™é‡Œè¦å’Œå®šä¹‰ä¿æŒä¸€è‡´</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ²¡æœ‰ä½¿ç”¨å¯å˜å‚æ•°çš„æƒ…å†µ"><a href="#æ²¡æœ‰ä½¿ç”¨å¯å˜å‚æ•°çš„æƒ…å†µ" class="headerlink" title="æ²¡æœ‰ä½¿ç”¨å¯å˜å‚æ•°çš„æƒ…å†µ"></a>æ²¡æœ‰ä½¿ç”¨å¯å˜å‚æ•°çš„æƒ…å†µ</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> time<span class="token keyword">def</span> <span class="token function">decorator</span><span class="token punctuation">(</span>func<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">wrapper</span><span class="token punctuation">(</span>q<span class="token punctuation">,</span> i<span class="token punctuation">,</span> p<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        func<span class="token punctuation">(</span>q<span class="token punctuation">,</span> i<span class="token punctuation">,</span> p<span class="token punctuation">)</span>    <span class="token keyword">return</span><span class="token decorator annotation punctuation">@decorator</span><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span>we<span class="token punctuation">,</span> qw<span class="token punctuation">,</span> da<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'12'</span><span class="token punctuation">)</span>f1<span class="token punctuation">(</span><span class="token string">'we'</span><span class="token punctuation">,</span> <span class="token string">'qw'</span><span class="token punctuation">,</span> <span class="token string">'da'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦å¤–ï¼šæ²¡æœ‰ ä¸ä½¿ç”¨@decoratorï¼Œå¤šæ¬¡è°ƒç”¨ï¼Œä¸€æ¬¡ä¼ å…¥å¤šä¸ªå‡½æ•°çš„ ç¤ºä¾‹  </p><h1 id="é™„åŠ "><a href="#é™„åŠ " class="headerlink" title="é™„åŠ "></a>é™„åŠ </h1><p>å½¢å‚å’Œå®å‚çš„åŒºåˆ«:  </p><ul><li>å½¢å‚å‡ºç°åœ¨å‡½æ•°å®šä¹‰ä¸­ï¼Œåœ¨æ•´ä¸ªå‡½æ•°ä½“å†…éƒ½å¯ä»¥ä½¿ç”¨ï¼Œ ç¦»å¼€è¯¥å‡½æ•°åˆ™ä¸èƒ½ä½¿ç”¨ã€‚  </li><li>å®å‚å‡ºç°åœ¨ä¸»è°ƒå‡½æ•°ä¸­ï¼Œè¿›å…¥è¢«è°ƒå‡½æ•°åï¼Œå®å‚å˜é‡ä¹Ÿä¸èƒ½ä½¿ç”¨ã€‚   </li><li>å½¢å‚å’Œå®å‚çš„åŠŸèƒ½æ˜¯ä½œæ•°æ®ä¼ é€ã€‚å‘ç”Ÿå‡½æ•°è°ƒç”¨æ—¶ï¼Œ ä¸»è°ƒå‡½æ•°æŠŠå®å‚çš„å€¼ä¼ é€ç»™è¢«è°ƒå‡½æ•°çš„å½¢å‚ä»è€Œå®ç°ä¸»è°ƒå‡½æ•°å‘è¢«è°ƒå‡½æ•°çš„æ•°æ®ä¼ é€ã€‚  </li></ul><ol><li>å½¢å‚å˜é‡åªæœ‰åœ¨è¢«è°ƒç”¨æ—¶æ‰åˆ†é…å†…å­˜å•å…ƒï¼Œåœ¨è°ƒç”¨ç»“æŸæ—¶ï¼Œ å³åˆ»é‡Šæ”¾æ‰€åˆ†é…çš„å†…å­˜å•å…ƒã€‚å› æ­¤ï¼Œå½¢å‚åªæœ‰åœ¨å‡½æ•°å†…éƒ¨æœ‰æ•ˆã€‚ å‡½æ•°è°ƒç”¨ç»“æŸè¿”å›ä¸»è°ƒå‡½æ•°ååˆ™ä¸èƒ½å†ä½¿ç”¨è¯¥å½¢å‚å˜é‡ã€‚   </li><li>å®å‚å¯ä»¥æ˜¯å¸¸é‡ã€å˜é‡ã€è¡¨è¾¾å¼ã€å‡½æ•°ç­‰ï¼Œ æ— è®ºå®å‚æ˜¯ä½•ç§ç±»å‹çš„é‡ï¼Œåœ¨è¿›è¡Œå‡½æ•°è°ƒç”¨æ—¶ï¼Œå®ƒä»¬éƒ½å¿…é¡»å…·æœ‰ç¡®å®šçš„å€¼ï¼Œ ä»¥ä¾¿æŠŠè¿™äº›å€¼ä¼ é€ç»™å½¢å‚ã€‚ å› æ­¤åº”é¢„å…ˆç”¨èµ‹å€¼ï¼Œè¾“å…¥ç­‰åŠæ³•ä½¿å®å‚è·å¾—ç¡®å®šå€¼ã€‚   </li><li>å®å‚å’Œå½¢å‚åœ¨æ•°é‡ä¸Šï¼Œç±»å‹ä¸Šï¼Œé¡ºåºä¸Šåº”ä¸¥æ ¼ä¸€è‡´ï¼Œ å¦åˆ™ä¼šå‘ç”Ÿâ€œç±»å‹ä¸åŒ¹é…â€çš„é”™è¯¯ã€‚   </li><li>å‡½æ•°è°ƒç”¨ä¸­å‘ç”Ÿçš„æ•°æ®ä¼ é€æ˜¯å•å‘çš„ã€‚ å³åªèƒ½æŠŠå®å‚çš„å€¼ä¼ é€ç»™å½¢å‚ï¼Œè€Œä¸èƒ½æŠŠå½¢å‚çš„å€¼åå‘åœ°ä¼ é€ç»™å®å‚ã€‚ å› æ­¤åœ¨å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­ï¼Œå½¢å‚çš„å€¼å‘ç”Ÿæ”¹å˜ï¼Œè€Œå®å‚ä¸­çš„å€¼ä¸ä¼šå˜åŒ–ã€‚  </li><li>å½“å½¢å‚å’Œå®å‚ä¸æ˜¯æŒ‡é’ˆç±»å‹æ—¶ï¼Œåœ¨è¯¥å‡½æ•°è¿è¡Œæ—¶ï¼Œå½¢å‚å’Œå®å‚æ˜¯ä¸åŒçš„å˜é‡ï¼Œä»–ä»¬åœ¨å†…å­˜ä¸­ä½äºä¸åŒçš„ä½ç½®ï¼Œå½¢å‚å°†å®å‚çš„å†…å®¹å¤åˆ¶ä¸€ä»½ï¼Œåœ¨è¯¥å‡½æ•°è¿è¡Œç»“æŸçš„æ—¶å€™å½¢å‚è¢«é‡Šæ”¾ï¼Œè€Œå®å‚å†…å®¹ä¸ä¼šæ”¹å˜ã€‚<br>è€Œå¦‚æœå‡½æ•°çš„å‚æ•°æ˜¯æŒ‡é’ˆç±»å‹å˜é‡,åœ¨è°ƒç”¨è¯¥å‡½æ•°çš„è¿‡ç¨‹ä¸­ï¼Œä¼ ç»™å‡½æ•°çš„æ˜¯å®å‚çš„åœ°å€ï¼Œåœ¨å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨çš„ä¹Ÿæ˜¯å®å‚çš„åœ°å€ï¼Œå³ä½¿ç”¨çš„å°±æ˜¯å®å‚æœ¬èº«ã€‚æ‰€ä»¥åœ¨å‡½æ•°ä½“å†…éƒ¨å¯ä»¥æ”¹å˜å®å‚çš„å€¼ã€‚  </li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å‡½æ•°å¼ç¼–ç¨‹ </tag>
            
            <tag> è£…é¥°å™¨ </tag>
            
            <tag> å½¢å‚å’Œå®å‚ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(åä¸€)</title>
      <link href="/posts/4fdb.html"/>
      <url>/posts/4fdb.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h1><h2 id="æšä¸¾çš„æ„ä¹‰åœ¨äºå®ƒçš„æ ‡ç­¾ï¼Œä¸åœ¨äºå®ƒçš„å–å€¼"><a href="#æšä¸¾çš„æ„ä¹‰åœ¨äºå®ƒçš„æ ‡ç­¾ï¼Œä¸åœ¨äºå®ƒçš„å–å€¼" class="headerlink" title="æšä¸¾çš„æ„ä¹‰åœ¨äºå®ƒçš„æ ‡ç­¾ï¼Œä¸åœ¨äºå®ƒçš„å–å€¼"></a>æšä¸¾çš„æ„ä¹‰åœ¨äºå®ƒçš„æ ‡ç­¾ï¼Œä¸åœ¨äºå®ƒçš„å–å€¼</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum<span class="token keyword">class</span> <span class="token class-name">VIP</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>    YELLOW <span class="token operator">=</span> <span class="token number">1</span>    GREEN <span class="token operator">=</span> <span class="token number">2</span>    BLACK <span class="token operator">=</span> <span class="token number">3</span>    RED <span class="token operator">=</span> <span class="token number">4</span><span class="token keyword">print</span><span class="token punctuation">(</span>VIP<span class="token punctuation">.</span>YELLOW<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®ç°æšä¸¾çš„åŠŸèƒ½"><a href="#å®ç°æšä¸¾çš„åŠŸèƒ½" class="headerlink" title="å®ç°æšä¸¾çš„åŠŸèƒ½"></a>å®ç°æšä¸¾çš„åŠŸèƒ½</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>yellow <span class="token operator">=</span> <span class="token number">1</span>green <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">&#123;</span><span class="token string">'yellow'</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">&#125;</span>   <span class="token comment"># æœ€è´´è¿‘æšä¸¾</span><span class="token keyword">class</span> <span class="token class-name">TypeDiamond</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    yellow <span class="token operator">=</span> <span class="token number">1</span>    green <span class="token operator">=</span> <span class="token number">2</span><span class="token comment"># ç¼ºç‚¹ï¼šå¯å˜ã€æ²¡æœ‰é˜²æ­¢ç›¸åŒæ ‡ç­¾çš„åŠŸèƒ½</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æšä¸¾çš„ç±»å‹ã€æšä¸¾çš„å€¼ã€æšä¸¾çš„åå­—"><a href="#æšä¸¾çš„ç±»å‹ã€æšä¸¾çš„å€¼ã€æšä¸¾çš„åå­—" class="headerlink" title="æšä¸¾çš„ç±»å‹ã€æšä¸¾çš„å€¼ã€æšä¸¾çš„åå­—"></a>æšä¸¾çš„ç±»å‹ã€æšä¸¾çš„å€¼ã€æšä¸¾çš„åå­—</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum<span class="token keyword">class</span> <span class="token class-name">VIP</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>     <span class="token comment"># æšä¸¾ç±»å‹VIP</span>    YELLOW <span class="token operator">=</span> <span class="token number">1</span>   <span class="token comment"># æšä¸¾æ ‡ç­¾ = æšä¸¾å€¼</span>    GREEN <span class="token operator">=</span> <span class="token number">2</span>    BLACK <span class="token operator">=</span> <span class="token number">3</span>    RED <span class="token operator">=</span> <span class="token number">4</span>    <span class="token comment"># RED = 5   ç›¸åŒæ ‡ç­¾</span><span class="token keyword">print</span><span class="token punctuation">(</span>VIP<span class="token punctuation">.</span>YELLOW<span class="token punctuation">)</span><span class="token comment"># VIP.YELLOW = 5    å¯¹YELLOWèµ‹å€¼ï¼Œæ”¹å˜YELLOW</span><span class="token keyword">print</span><span class="token punctuation">(</span>VIP<span class="token punctuation">.</span>GREEN<span class="token punctuation">.</span>value<span class="token punctuation">)</span>    <span class="token comment"># æ‰“å°æ ‡ç­¾çš„å€¼</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>VIP<span class="token punctuation">.</span>GREEN<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># è¿™æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²</span><span class="token keyword">print</span><span class="token punctuation">(</span>VIP<span class="token punctuation">.</span>GREEN<span class="token punctuation">.</span>name<span class="token punctuation">)</span>   <span class="token comment"># æ ‡ç­¾çš„åå­—</span><span class="token keyword">print</span><span class="token punctuation">(</span>VIP<span class="token punctuation">.</span>GREEN<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>VIP<span class="token punctuation">.</span>GREEN<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># è¿™æ˜¯enumçš„ç±»å‹ï¼ˆæšä¸¾ç±»å‹ï¼‰</span><span class="token keyword">print</span><span class="token punctuation">(</span>VIP<span class="token punctuation">[</span><span class="token string">'GREEN'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment"># æšä¸¾ç±»['æšä¸¾åç§°']ï¼Œæ‰“å°å…·ä½“çš„æšä¸¾çš„ç±»å‹VIP.GREEN</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æšä¸¾çš„éå†ï¼Œforå¾ªç¯"><a href="#æšä¸¾çš„éå†ï¼Œforå¾ªç¯" class="headerlink" title="æšä¸¾çš„éå†ï¼Œforå¾ªç¯"></a>æšä¸¾çš„éå†ï¼Œforå¾ªç¯</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum<span class="token keyword">class</span> <span class="token class-name">VIP</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>    YELLOW <span class="token operator">=</span> <span class="token number">1</span>    GREEN <span class="token operator">=</span> <span class="token number">2</span>    BLACK <span class="token operator">=</span> <span class="token number">3</span>    RED <span class="token operator">=</span> <span class="token number">4</span><span class="token keyword">for</span> v <span class="token keyword">in</span> VIP<span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æšä¸¾ä¹‹é—´çš„æ¯”è¾ƒ"><a href="#æšä¸¾ä¹‹é—´çš„æ¯”è¾ƒ" class="headerlink" title="æšä¸¾ä¹‹é—´çš„æ¯”è¾ƒ"></a>æšä¸¾ä¹‹é—´çš„æ¯”è¾ƒ</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum<span class="token keyword">class</span> <span class="token class-name">VIP</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>    YELLOW <span class="token operator">=</span> <span class="token number">1</span>    GREEN <span class="token operator">=</span> <span class="token number">2</span>    BLACK <span class="token operator">=</span> <span class="token number">3</span>    RED <span class="token operator">=</span> <span class="token number">4</span><span class="token keyword">class</span> <span class="token class-name">VIP1</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>    YELLOW <span class="token operator">=</span> <span class="token number">1</span>    GREEN <span class="token operator">=</span> <span class="token number">2</span>    BLACK <span class="token operator">=</span> <span class="token number">3</span>    RED <span class="token operator">=</span> <span class="token number">4</span>result <span class="token operator">=</span> VIP<span class="token punctuation">.</span>GREEN <span class="token operator">==</span> VIP<span class="token punctuation">.</span>RED     <span class="token comment"># æšä¸¾ä¹‹é—´æ¯”è¾ƒè¿”å›boolå€¼</span>result1 <span class="token operator">=</span> VIP<span class="token punctuation">.</span>GREEN <span class="token operator">==</span> VIP<span class="token punctuation">.</span>GREEN<span class="token comment"># result2 = VIP.GREEN > VIP.RED   # ä¸å¯ä»¥è¿™æ ·æ¯”è¾ƒ</span>result3 <span class="token operator">=</span> VIP<span class="token punctuation">.</span>GREEN <span class="token operator">==</span> <span class="token number">2</span>   <span class="token comment"># ç­‰å€¼æ¯”è¾ƒ</span>result4 <span class="token operator">=</span> VIP<span class="token punctuation">.</span>GREEN <span class="token keyword">is</span> VIP<span class="token punctuation">.</span>GREEN   <span class="token comment"># æšä¸¾ä¹‹é—´å¯ä»¥è¿›è¡Œèº«ä»½æ¯”è¾ƒ</span>result5 <span class="token operator">=</span> VIP<span class="token punctuation">.</span>GREEN <span class="token operator">==</span> VIP1<span class="token punctuation">.</span>GREEN   <span class="token comment"># ä¸åŒæšä¸¾ç±»å‹ä¸èƒ½æ¯”è¾ƒ</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æšä¸¾çš„æ³¨æ„äº‹é¡¹"><a href="#æšä¸¾çš„æ³¨æ„äº‹é¡¹" class="headerlink" title="æšä¸¾çš„æ³¨æ„äº‹é¡¹"></a>æšä¸¾çš„æ³¨æ„äº‹é¡¹</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum<span class="token keyword">class</span> <span class="token class-name">VIP</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>    YELLOW <span class="token operator">=</span> <span class="token number">1</span>    GREEN <span class="token operator">=</span> <span class="token number">1</span>    <span class="token comment"># è¿™é‡ŒGREENæ˜¯YELLOWçš„åˆ«åï¼ŒGREENæœ€å¥½æ›´æ”¹ä¸ºYELLOW_ALIASã€‚åœ¨ä½¿ç”¨foréå†çš„æ—¶å€™ï¼Œæ­¤è¡Œä¸ä¼šå‡ºç°ã€‚</span>    BLACK <span class="token operator">=</span> <span class="token number">3</span>    RED <span class="token operator">=</span> <span class="token number">4</span><span class="token comment"># print(VIP.GREEN)   # è¿™é‡Œç»“æœä¸ºVIP.YELLOW</span><span class="token keyword">for</span> v <span class="token keyword">in</span> VIP<span class="token punctuation">:</span>    <span class="token comment">#éå†ä¸ä¼šæ‰“å°å‡ºGREENã€‚</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token comment"># æƒ³è¦éå†GREENçš„æ–¹æ³•ï¼š</span><span class="token comment"># for v in VIP.__members__.items():   # è°ƒç”¨itemsæ–¹æ³•ï¼Œä¼šæ‰“å°å‡ºä¸€ä¸ªå…ƒç»„ï¼Œæ˜¯åŒ…æ‹¬GREENçš„</span>    <span class="token comment"># print(v)</span><span class="token comment"># for v in VIP.__members__:    # ä¸æƒ³è¦å…ƒç»„ï¼Œå¯ä»¥ä¸ç”¨itemsæ–¹æ³•ï¼Œè¿™æ ·çš„ç»“æœä¸ºæšä¸¾çš„æ ‡ç­¾çš„åç§°ã€‚</span>    <span class="token comment"># print(v)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¹³å¸¸ä½¿ç”¨æšä¸¾ç»å¸¸é‡åˆ°çš„é—®é¢˜  </p><ol><li>åœ¨æ•°æ®åº“é‡Œå­˜å‚¨æ•°å€¼è¡¨ç¤ºæšä¸¾ç±»å‹ï¼Œå’Œå­˜å‚¨æ ‡ç­¾åè¡¨ç¤ºæšä¸¾ç±»å‹ã€‚  </li><li>å»ºè®®ä½¿ç”¨æ•°å­—è¡¨ç¤ºï¼ˆç®€æ´ï¼Œå ç©ºé—´å°ï¼‰  </li><li>åœ¨ä»£ç é‡Œé¢ç”¨æ•°å­—ä»£è¡¨æšä¸¾ç±»å‹ï¼Œä¸å»ºè®®ã€‚  </li><li>å»ºè®®åœ¨ä»£ç é‡Œé¢æ˜¾å¼çš„å®šä¹‰ä¸€ä¸ªæšä¸¾ç±»ï¼Œç”¨æšä¸¾ç±»ä¸‹é¢çš„æ¯ä¸€ä¸ªæšä¸¾ç±»å‹æ¥å¯¹åº”æ•°æ®åº“çš„æ¯ä¸€ä¸ªæ•°å€¼  </li></ol><p><strong>ä¾‹å¦‚ï¼š</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">if</span> a<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">:</span>   <span class="token comment">#ä¸å»ºè®®</span>    <span class="token keyword">pass</span><span class="token keyword">if</span> a<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span><span class="token keyword">if</span> a<span class="token operator">==</span>VIP<span class="token punctuation">.</span>YELLOW<span class="token punctuation">:</span>   <span class="token comment">#å»ºè®®è¿™æ ·</span>    <span class="token keyword">pass</span><span class="token keyword">if</span> a<span class="token operator">==</span>VIP<span class="token punctuation">.</span>BLACK<span class="token punctuation">:</span>    <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¦‚ä½•æŠŠæ•°å­—è½¬æ¢æˆæšä¸¾ç±»å‹"><a href="#å¦‚ä½•æŠŠæ•°å­—è½¬æ¢æˆæšä¸¾ç±»å‹" class="headerlink" title="å¦‚ä½•æŠŠæ•°å­—è½¬æ¢æˆæšä¸¾ç±»å‹"></a>å¦‚ä½•æŠŠæ•°å­—è½¬æ¢æˆæšä¸¾ç±»å‹</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum<span class="token keyword">class</span> <span class="token class-name">VIP</span><span class="token punctuation">(</span>Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>    YELLOW <span class="token operator">=</span> <span class="token number">1</span>    GREEN <span class="token operator">=</span> <span class="token number">2</span>    BLACK <span class="token operator">=</span> <span class="token number">3</span>    RED <span class="token operator">=</span> <span class="token number">4</span><span class="token keyword">class</span> <span class="token class-name">Common</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    YELLOW <span class="token operator">=</span> <span class="token number">1</span>a <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">print</span><span class="token punctuation">(</span>VIP<span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æšä¸¾-1"><a href="#æšä¸¾-1" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> enum <span class="token keyword">import</span> IntEnum<span class="token punctuation">,</span>unique   <span class="token comment"># IntEnumè¦æ±‚å¿…é¡»æ˜¯æ•´å‹ï¼ŒEnumæ²¡æœ‰é™åˆ¶</span><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum<span class="token decorator annotation punctuation">@unique</span>    <span class="token comment"># å¼•å…¥uniqeä½¿ç”¨IntEnumçš„æ—¶å€™ï¼Œä¸åŒæ ‡ç­¾çš„å€¼ä¸åŒä¼šæŠ¥é”™ã€‚</span><span class="token keyword">class</span> <span class="token class-name">VIP</span><span class="token punctuation">(</span>IntEnum<span class="token punctuation">)</span><span class="token punctuation">:</span>    YELLOW <span class="token operator">=</span> <span class="token number">1</span>    GREEN <span class="token operator">=</span> <span class="token number">1</span>    BLACK <span class="token operator">=</span> <span class="token number">3</span>    RED <span class="token operator">=</span> <span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æšä¸¾ç±»å‹åœ¨pythonä¸­å®ç°çš„æ˜¯ä¸€ç§å•ä¾‹æ¨¡å¼ï¼Œä¹Ÿå°±æ˜¯è¯´å¯¹æšä¸¾ç±»å‹æ˜¯ä¸èƒ½å®ä¾‹åŒ–çš„ï¼Œå¯¹æšä¸¾å®ä¾‹åŒ–æ²¡æœ‰æ„ä¹‰<br>23ç§è®¾è®¡æ¨¡å¼  å•ä¾‹æ¨¡å¼  </p><h1 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h1><blockquote><p>å‡½æ•°ï¼šåœ¨pythonä¸­æ˜¯å¯¹è±¡ï¼Œåœ¨å…¶å®ƒè¯­è¨€åªæ˜¯ä¸€æ®µå¯æ‰§è¡Œçš„ä»£ç <br>pythonï¼šä¸€åˆ‡çš†å¯¹è±¡<br>pythonå¯ä»¥æŠŠå‡½æ•°å½“ä½œä¸€ä¸ªå‚æ•°ï¼Œä¼ é€’ç»™å¦ä¸€ä¸ªå‡½æ•°é‡Œã€‚<br>ä¹Ÿå¯ä»¥æŠŠä¸€ä¸ªå‡½æ•°ï¼Œå½“ä½œå¦å¤–ä¸€ä¸ªå‡½æ•°çš„è¿”å›ç»“æœ  </p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python">a <span class="token operator">=</span> <span class="token number">1</span>b <span class="token operator">=</span> <span class="token string">'2'</span>c <span class="token operator">=</span> <span class="token string">'def'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">curve_pre</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®šä¹‰curve_preå‡½æ•°</span>    <span class="token keyword">def</span> <span class="token function">curve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®šä¹‰curveå‡½æ•°</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a function'</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> curve   <span class="token comment"># åœ¨curve_preå‡½æ•°ä¸­è°ƒç”¨curveå‡½æ•°</span>f <span class="token operator">=</span> curve_pre<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># è°ƒç”¨curve_preå‡½æ•°ï¼ˆç›´æ¥å†™curve_preæ˜¯æ²¡æœ‰å†…å®¹çš„ï¼Œå› ä¸ºå‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨ï¼‰</span>f<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># è°ƒç”¨få‡½æ•°</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é—­åŒ…ï¼šå‡½æ•°åœ¨å®šä¹‰æ—¶å€™çš„ç”±å¤–éƒ¨ç¯å¢ƒå˜é‡æ‰€æ„æˆçš„æ•´ä½“ï¼Œä¸ä¼šå—å¤–éƒ¨å‡½æ•°çš„å½±å“<br>é—­åŒ… = å‡½æ•° + ç¯å¢ƒå˜é‡<br>ç¯å¢ƒå˜é‡ä¸€å®šæ˜¯åœ¨å®šä¹‰åœ¨å‡½æ•°çš„å¤–éƒ¨ï¼ˆè¿™é‡Œæ˜¯åœ¨curveå¤–éƒ¨ï¼‰ï¼Œä¹Ÿä¸èƒ½æ˜¯å…¨å±€å˜é‡ï¼ˆä¸èƒ½åœ¨curve_preä¸Šé¢ï¼‰ã€‚  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">def</span> <span class="token function">curve_pre</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    a <span class="token operator">=</span> <span class="token number">25</span>    <span class="token keyword">def</span> <span class="token function">curve</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å‡½æ•°æ¥å—å‚æ•°x</span>        <span class="token keyword">return</span> a<span class="token operator">*</span>x<span class="token operator">*</span>x    <span class="token keyword">return</span> curvea <span class="token operator">=</span> <span class="token number">10</span>f <span class="token operator">=</span> curve_pre<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>__closure__<span class="token punctuation">)</span>   <span class="token comment"># é—­åŒ…çš„ç¯å¢ƒå˜é‡ï¼Œä¿å­˜åœ¨closureé‡Œé¢</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>__closure__<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cell_contents<span class="token punctuation">)</span>   <span class="token comment"># å–å‡ºé—­åŒ…çš„ç¯å¢ƒå˜é‡</span><span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é—­åŒ…çš„æ„ä¹‰ï¼šä¿å­˜çš„æ˜¯ä¸€ä¸ªç¯å¢ƒã€‚"><a href="#é—­åŒ…çš„æ„ä¹‰ï¼šä¿å­˜çš„æ˜¯ä¸€ä¸ªç¯å¢ƒã€‚" class="headerlink" title="é—­åŒ…çš„æ„ä¹‰ï¼šä¿å­˜çš„æ˜¯ä¸€ä¸ªç¯å¢ƒã€‚"></a>é—­åŒ…çš„æ„ä¹‰ï¼šä¿å­˜çš„æ˜¯ä¸€ä¸ªç¯å¢ƒã€‚</h2><p>ä»–æŠŠå‡½æ•°è°ƒç”¨çš„ç°åœºä¿å­˜èµ·æ¥äº†  </p><p>å•ä¸€çš„å‡½æ•°æ˜¯ä¸èƒ½å†³å®šè¿è¡Œç»“æœçš„ï¼Œè¿˜éœ€è¦ç¯å¢ƒå˜é‡  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">def</span> <span class="token function">curve_pre</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    a <span class="token operator">=</span> <span class="token number">25</span>    <span class="token keyword">def</span> <span class="token function">curve</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> a<span class="token operator">*</span>x<span class="token operator">*</span>x    <span class="token keyword">return</span> curve<span class="token keyword">def</span> <span class="token function">curve_pre1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># ä¸åŒçš„é—­åŒ…</span>    a <span class="token operator">=</span> <span class="token number">25</span>    <span class="token keyword">def</span> <span class="token function">curve1</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> a<span class="token operator">*</span>x<span class="token operator">*</span>x    <span class="token keyword">return</span> curve1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">def</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    a <span class="token operator">=</span> <span class="token number">10</span>    <span class="token keyword">def</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        a <span class="token operator">=</span> <span class="token number">20</span>   <span class="token comment"># è¿™é‡Œaä¼šè¢«pythonè®¤ä¸ºå±€éƒ¨å˜é‡ï¼Œä¸å«ä½œé—­åŒ…</span>        <span class="token comment"># c = 20 * a   # è¿™é‡Œæ˜¯å¼•ç”¨ä¸Šé¢çš„å˜é‡aï¼Œæ‰€ä»¥æ‰æ˜¯é—­åŒ…ã€‚ï¼ˆå…³é”®åœ¨äºè¿™é‡Œçš„aæ˜¯å¼•ç”¨çš„ä¸Šé¢çš„ç¯å¢ƒå˜é‡ï¼‰</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>   <span class="token comment"># ä»å¤–å¾€é‡Œï¼Œè¿™é‡Œa=10ï¼Œf2å‡½æ•°æ²¡æœ‰è¢«è°ƒç”¨</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>   <span class="token comment"># è¿™é‡Œa=20ï¼Œæ˜¯f2å‡½æ•°è¢«è°ƒç”¨äº†</span>    f2<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>   <span class="token comment"># è¿™é‡Œa=10ï¼Œæ˜¯è°ƒç”¨çš„f1å‡½æ•°</span>f1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># f = f1()</span><span class="token comment"># print(f)</span><span class="token comment"># print(f.__closure__)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å…¨å±€å˜é‡ç¼–ç¨‹"><a href="#å…¨å±€å˜é‡ç¼–ç¨‹" class="headerlink" title="å…¨å±€å˜é‡ç¼–ç¨‹"></a>å…¨å±€å˜é‡ç¼–ç¨‹</h2><p>ä¸å»ºè®®ï¼Œå› ä¸ºä¸èƒ½ä¿è¯å…¶å®ƒå‡½æ•°æ”¹å˜å…¨å±€å˜é‡  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>origin <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">def</span> <span class="token function">go</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">global</span> origin   <span class="token comment"># globalå£°æ˜å…¨å±€å˜é‡ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œè€Œä¸æ˜¯å±€éƒ¨å˜é‡</span>    new_pos <span class="token operator">=</span> origin <span class="token operator">+</span> step    origin <span class="token operator">=</span> new_pos    <span class="token keyword">return</span> new_pos<span class="token keyword">print</span><span class="token punctuation">(</span>go<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>go<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>go<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é—­åŒ…çš„ä½œç”¨"><a href="#é—­åŒ…çš„ä½œç”¨" class="headerlink" title="é—­åŒ…çš„ä½œç”¨"></a>é—­åŒ…çš„ä½œç”¨</h2><p>ä¿æŠ¤ç°åœºåŠŸèƒ½ï¼Œè®°å¿†äº†ä¸Šä¸€æ¬¡è°ƒç”¨çš„çŠ¶æ€  </p><h1 id="å‡½æ•°å¼ç¼–ç¨‹"><a href="#å‡½æ•°å¼ç¼–ç¨‹" class="headerlink" title="å‡½æ•°å¼ç¼–ç¨‹"></a>å‡½æ•°å¼ç¼–ç¨‹</h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span>origin <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">def</span> <span class="token function">factory</span><span class="token punctuation">(</span>pos<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">go</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">nonlocal</span> pos   <span class="token comment"># å£°æ˜å˜é‡åœ¨æ•´ä¸ªé—­åŒ…ä¸­éƒ½æœ‰æ•ˆ</span>        new_pos <span class="token operator">=</span> pos <span class="token operator">+</span> step        pos <span class="token operator">=</span> new_pos        <span class="token keyword">return</span> new_pos    <span class="token keyword">return</span> gotourist <span class="token operator">=</span> factory<span class="token punctuation">(</span>origin<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tourist<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>origin<span class="token punctuation">)</span>   <span class="token comment"># è¿™æ ·éªŒè¯å…¨å±€å˜é‡æ²¡æœ‰è¢«æ”¹å˜ã€‚</span><span class="token keyword">print</span><span class="token punctuation">(</span>tourist<span class="token punctuation">.</span>__closure__<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cell_contents<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tourist<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>origin<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tourist<span class="token punctuation">.</span>__closure__<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cell_contents<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tourist<span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>origin<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>tourist<span class="token punctuation">.</span>__closure__<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cell_contents<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é—­åŒ…é—®é¢˜ï¼Œå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ï¼Œå¦‚æœæ˜¯JSé¡µé¢æœ‰å¤§é‡é—­åŒ…ï¼Œä¼šé€ æˆæµè§ˆå™¨å¡é¡¿(å› ä¸ºé—­åŒ…çš„å˜é‡æ˜¯å­˜å‚¨åœ¨å†…å­˜é‡Œé¢)</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> é—­åŒ… </tag>
            
            <tag> å‡½æ•°å¼ç¼–ç¨‹ </tag>
            
            <tag> æšä¸¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡VMwareè™šæ‹Ÿæœºæ‰©å®¹</title>
      <link href="/posts/d79.html"/>
      <url>/posts/d79.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p><strong><font color=red>æ›´æ­£ï¼šè™šæ‹Ÿæœºå®‰è£…çš„æ—¶å€™ç£ç›˜åˆ†åŒºæ˜¯é»˜è®¤æœªé…ç½®ï¼Œæˆ–è€…é€‰æ‹©lvmé€»è¾‘å·ç®¡ç†æ‰å¯ä½¿ç”¨æœ¬æ–¹æ³•ï¼Œé‡åˆ°BUGå’ŒERRæ¬¢è¿ç•™è¨€æˆ–+Q</font></strong>  </p><p>å‰è¨€ï¼šç¼–å†™lampç¼–è¯‘å®‰è£…æ–‡æ¡£çš„æ—¶å€™ï¼ŒMySQL8.0 cmakeå®Œæˆï¼Œmakeç¼–è¯‘çš„æ—¶å€™ç£ç›˜ç©ºé—´ä¸è¶³ï¼ˆåŸ/æœ‰17Gï¼Œä¸€å…±20Gï¼Œswap2Gï¼Œboot1Gï¼‰  </p><p>æ•…æœ‰æ­¤æ¬¡æ‰©å®¹æ–‡æ¡£ï¼Œé€‚ç”¨äºæœåŠ¡å™¨ç³»ç»Ÿç›˜æ‰©å®¹ï¼ˆä¸å»ºè®®è¿™æ ·åšï¼Œåº”å½“æå‰è§„åˆ’å¥½å„ç³»ç»Ÿç›®å½•çš„ä½œç”¨ï¼Œåšå¥½é€»è¾‘å·ç­‰ç­‰ï¼‰  </p><p>ä¸æ¶‰åŠåˆ°å…³æœºæ“ä½œï¼Œåº”æ€¥ä½¿ç”¨ï¼Œæ“ä½œæ­¥éª¤ï¼š  </p><ol><li>æ‰“å¼€è¦æ‰©å®¹çš„è™šæ‹Ÿæœºè®¾ç½®â€“&gt;é€‰ä¸­ç£ç›˜â€“&gt;ç‚¹å‡»æ‰©å±•ï¼Œè¾“å…¥æ‰©å®¹åçš„å¤§å°ï¼Œç­‰å¾…æ‰©å®¹å®Œæˆã€‚</li></ol><h1 id="è¿›å…¥è™šæ‹Ÿæœºç»è¡Œå‘½ä»¤æ“ä½œ"><a href="#è¿›å…¥è™šæ‹Ÿæœºç»è¡Œå‘½ä»¤æ“ä½œ" class="headerlink" title="è¿›å…¥è™šæ‹Ÿæœºç»è¡Œå‘½ä»¤æ“ä½œ"></a>è¿›å…¥è™šæ‹Ÿæœºç»è¡Œå‘½ä»¤æ“ä½œ</h1><p>å‘½ä»¤ä¸‹æ˜¯æ‰§è¡Œæ­¤å‘½ä»¤æ‰“å°çš„ä¿¡æ¯ï¼Œåˆ é™¤äº†å¤§éƒ¨åˆ†ï¼Œç•™ä¸‹çš„æ˜¯å…³é”®ä¿¡æ¯éƒ¨åˆ†  </p><h2 id="æŸ¥çœ‹å¯ç”¨ç£ç›˜å¤§å°ï¼Œæˆ‘çš„æ˜¯20Gæ‰©å®¹åˆ°40G"><a href="#æŸ¥çœ‹å¯ç”¨ç£ç›˜å¤§å°ï¼Œæˆ‘çš„æ˜¯20Gæ‰©å®¹åˆ°40G" class="headerlink" title="æŸ¥çœ‹å¯ç”¨ç£ç›˜å¤§å°ï¼Œæˆ‘çš„æ˜¯20Gæ‰©å®¹åˆ°40G"></a>æŸ¥çœ‹å¯ç”¨ç£ç›˜å¤§å°ï¼Œæˆ‘çš„æ˜¯20Gæ‰©å®¹åˆ°40G</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">fdisk</span> -l<span class="token comment"># Disk /dev/nvme0n1ï¼š40 GiBï¼Œ42949672960 å­—èŠ‚ï¼Œ83886080 ä¸ªæ‰‡åŒº</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="ä»ç„¶æ˜¾ç¤º17G"><a href="#ä»ç„¶æ˜¾ç¤º17G" class="headerlink" title="ä»ç„¶æ˜¾ç¤º17G"></a>ä»ç„¶æ˜¾ç¤º17G</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">df</span> -h<span class="token comment"># æ–‡ä»¶ç³»ç»Ÿ             å®¹é‡  å·²ç”¨  å¯ç”¨ å·²ç”¨% æŒ‚è½½ç‚¹</span><span class="token comment"># /dev/mapper/cl-root   17G  1.8G   16G   11% /</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="å¯¹å…¶è¿›è¡Œæ–°çš„åˆ†åŒº"><a href="#å¯¹å…¶è¿›è¡Œæ–°çš„åˆ†åŒº" class="headerlink" title="å¯¹å…¶è¿›è¡Œæ–°çš„åˆ†åŒº"></a>å¯¹å…¶è¿›è¡Œæ–°çš„åˆ†åŒº</h2><p>ç”±fdisk -lå¾—åˆ°çš„ä¿¡æ¯ï¼Œå¯¹å…¶è¿›è¡Œæ–°çš„åˆ†åŒºï¼Œé™¤äº†ç¬¬ä¸€æ¬¡è¾“å…¥nï¼Œæœ€åä¸€æ¬¡è¾“å…¥wï¼Œå…¶å®ƒå¯ä»¥ç›´æ¥å›è½¦  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">fdisk</span> /dev/nvme0n1<span class="token comment"># å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šn</span><span class="token comment"># é€‰æ‹© (é»˜è®¤ p)ï¼š</span><span class="token comment"># åˆ†åŒºå· (3,4, é»˜è®¤  3): </span><span class="token comment"># ç¬¬ä¸€ä¸ªæ‰‡åŒº (41943040-83886079, é»˜è®¤ 41943040): </span><span class="token comment"># ä¸Šä¸ªæ‰‡åŒºï¼Œ+sectors æˆ– +size&#123;K,M,G,T,P&#125; (41943040-83886079, é»˜è®¤ 83886079): </span><span class="token comment"># åˆ›å»ºäº†ä¸€ä¸ªæ–°åˆ†åŒº 3ï¼Œç±»å‹ä¸ºâ€œLinuxâ€ï¼Œå¤§å°ä¸º 20 GiBã€‚</span><span class="token comment"># å‘½ä»¤(è¾“å…¥ m è·å–å¸®åŠ©)ï¼šw</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æŸ¥çœ‹æ–°å»ºçš„åˆ†åŒº"><a href="#æŸ¥çœ‹æ–°å»ºçš„åˆ†åŒº" class="headerlink" title="æŸ¥çœ‹æ–°å»ºçš„åˆ†åŒº"></a>æŸ¥çœ‹æ–°å»ºçš„åˆ†åŒº</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">lsblk -l<span class="token comment"># nvme0n1p3 259:3    0  20G  0 part </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å¯¹æ–°åˆ†åŒºåšç‰©ç†å·"><a href="#å¯¹æ–°åˆ†åŒºåšç‰©ç†å·" class="headerlink" title="å¯¹æ–°åˆ†åŒºåšç‰©ç†å·"></a>å¯¹æ–°åˆ†åŒºåšç‰©ç†å·</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pvcreate /dev/nvme0n1p3<span class="token comment"># Physical volume "/dev/nvme0n1p3" successfully created.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="æŸ¥è¯¢rootåˆ†åŒºæ‰€åœ¨çš„å·ç»„"><a href="#æŸ¥è¯¢rootåˆ†åŒºæ‰€åœ¨çš„å·ç»„" class="headerlink" title="æŸ¥è¯¢rootåˆ†åŒºæ‰€åœ¨çš„å·ç»„"></a>æŸ¥è¯¢rootåˆ†åŒºæ‰€åœ¨çš„å·ç»„</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">vgdisplay -v<span class="token comment"># --- Logical volume ---</span><span class="token comment"># LV Path                /dev/cl/root</span><span class="token comment"># LV Name                root   # é€»è¾‘å·å</span><span class="token comment"># VG Name                cl   # å·ç»„å</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ‰©å±•clå·ç»„"><a href="#æ‰©å±•clå·ç»„" class="headerlink" title="æ‰©å±•clå·ç»„"></a>æ‰©å±•clå·ç»„</h2><p>æ‰©å±•clå·ç»„ï¼Œå³æŠŠç‰©ç†å·/dev/nvme0n1p3åˆ†é…åˆ°clå·ç»„  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">vgextend cl /dev/nvme0n1p3<span class="token comment"># Volume group "cl" successfully extended</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å°†clå·ç»„çš„å‰©ä½™å®¹é‡å…¨éƒ¨åˆ†ç»™æ ¹åˆ†åŒº"><a href="#å°†clå·ç»„çš„å‰©ä½™å®¹é‡å…¨éƒ¨åˆ†ç»™æ ¹åˆ†åŒº" class="headerlink" title="å°†clå·ç»„çš„å‰©ä½™å®¹é‡å…¨éƒ¨åˆ†ç»™æ ¹åˆ†åŒº"></a>å°†clå·ç»„çš„å‰©ä½™å®¹é‡å…¨éƒ¨åˆ†ç»™æ ¹åˆ†åŒº</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">lvextend -l +100%FREE /dev/cl/root<span class="token comment"># Size of logical volume cl/root changed from &lt;17.00 GiB (4351 extents) to 36.99 GiB (9470 extents).</span><span class="token comment"># Logical volume cl/root successfully resized.</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ"><a href="#åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ" class="headerlink" title="åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ"></a>åŒæ­¥æ–‡ä»¶ç³»ç»Ÿ</h2><p>åŒæ­¥æ–‡ä»¶ç³»ç»Ÿï¼Œå¦å¤–ä¸€ç§å†™æ³•xfs_growfs /dev/cl/rootæŠ¥é”™ï¼Œé…Œæƒ…ä½¿ç”¨ã€‚  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">xfs_growfs  /<span class="token comment"># meta-data=/dev/mapper/cl-root    isize=512    agcount=4, agsize=1113856 blks</span><span class="token comment">#          =                       sectsz=512   attr=2, projid32bit=1</span><span class="token comment">#          =                       crc=1        finobt=1, sparse=1, rmapbt=0</span><span class="token comment">#          =                       reflink=1</span><span class="token comment"># data     =                       bsize=4096   blocks=4455424, imaxpct=25</span><span class="token comment">#          =                       sunit=0      swidth=0 blks</span><span class="token comment"># naming   =version 2              bsize=4096   ascii-ci=0, ftype=1</span><span class="token comment"># log      =internal log           bsize=4096   blocks=2560, version=2</span><span class="token comment">#          =                       sectsz=512   sunit=0 blks, lazy-count=1</span><span class="token comment"># realtime =none                   extsz=4096   blocks=0, rtextents=0</span><span class="token comment"># data blocks changed from 4455424 to 9697280</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æŸ¥çœ‹æ‰©å®¹åçš„æ ¹åˆ†åŒºå¤§å°"><a href="#æŸ¥çœ‹æ‰©å®¹åçš„æ ¹åˆ†åŒºå¤§å°" class="headerlink" title="æŸ¥çœ‹æ‰©å®¹åçš„æ ¹åˆ†åŒºå¤§å°"></a>æŸ¥çœ‹æ‰©å®¹åçš„æ ¹åˆ†åŒºå¤§å°</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">df</span> -h<span class="token comment"># /dev/mapper/cl-root   37G  2.0G   36G    6% /</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> notes </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(å)</title>
      <link href="/posts/4f83.html"/>
      <url>/posts/4f83.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦åºåˆ—ï¼Œä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä¸æˆ‘ä»¬æ‰€è®¾å®šçš„è¿™æ ·çš„å­—ç¬¦åºåˆ—ï¼Œç›¸åŒ¹é…<br>å¿«é€Ÿæ£€ç´¢æ–‡æœ¬ï¼Œå®ç°ä¸€äº›æ›¿æ¢æ–‡æœ¬çš„æ“ä½œ  </p><ol><li>æ£€æŸ¥ä¸€ä¸²æ•°å­—æ˜¯å¦æ˜¯ç”µè¯å·ç </li><li>æ£€æµ‹ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆemail</li><li>æŠŠä¸€ä¸ªæ–‡æœ¬é‡ŒæŒ‡å®šçš„å•è¯æ›¿æ¢æˆå¦å¤–ä¸€ä¸ªå•è¯</li></ol><h1 id="pythonæ­£åˆ™è¡¨è¾¾å¼"><a href="#pythonæ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="pythonæ­£åˆ™è¡¨è¾¾å¼"></a>pythonæ­£åˆ™è¡¨è¾¾å¼</h1><h2 id="ä»é•¿å­—ç¬¦ä¸²ä¸­å–å‡ºç‰¹å®šçš„å­—ç¬¦ä¸²â€™Pythonâ€™"><a href="#ä»é•¿å­—ç¬¦ä¸²ä¸­å–å‡ºç‰¹å®šçš„å­—ç¬¦ä¸²â€™Pythonâ€™" class="headerlink" title="ä»é•¿å­—ç¬¦ä¸²ä¸­å–å‡ºç‰¹å®šçš„å­—ç¬¦ä¸²â€™Pythonâ€™"></a>ä»é•¿å­—ç¬¦ä¸²ä¸­å–å‡ºç‰¹å®šçš„å­—ç¬¦ä¸²â€™Pythonâ€™</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># æ­£åˆ™è¡¨è¾¾å¼ã€JSONï¼ˆXMLç”¨çš„å°‘ï¼‰</span><span class="token keyword">import</span> re   <span class="token comment"># reæ˜¯pythonè‡ªå¸¦çš„å†…ç½®å‡½æ•°ï¼Œç”¨äºåŒ¹é…è§„åˆ™</span><span class="token comment"># re.findall('å­—ç¬¦ä¸²', a)   # reç”¨æ³•|åœ¨aé‡Œé¢åŒ¹é…æŒ‡å®šçš„'å­—ç¬¦ä¸²'</span>a <span class="token operator">=</span> <span class="token string">'C|C++|Java|C#|Python|Javascript'</span><span class="token comment"># print(a.index('Python')>-1)   # åˆ©ç”¨pythonçš„å†…ç½®å‡½æ•°index()</span><span class="token comment"># print('Python' in a)   #åˆ©ç”¨in</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'Python'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>   <span class="token comment"># æ‰“å°ç»“æœæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå› ä¸ºåŒ¹é…åˆ°çš„æ­£åˆ™è¡¨è¾¾å¼å¯èƒ½æœ‰å¤šä¸ª</span><span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å­—ç¬¦ä¸²åŒ…å«Python'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å­—ç¬¦ä¸²ä¸åŒ…å«Python'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å–å‡ºå­—ç¬¦ä¸²ä¸­çš„æ•°å­—-d"><a href="#å–å‡ºå­—ç¬¦ä¸²ä¸­çš„æ•°å­—-d" class="headerlink" title="å–å‡ºå­—ç¬¦ä¸²ä¸­çš„æ•°å­—\d"></a>å–å‡ºå­—ç¬¦ä¸²ä¸­çš„æ•°å­—\d</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> rea <span class="token operator">=</span> <span class="token string">'C0C++1Java2C#3Python4Javascript'</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'\d'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>   <span class="token comment"># è¿™é‡Œçš„å­—ç¬¦ä¸²å¯ä»¥å¡«å†™"P.*n"æˆ–è€…"[0-9]",è¡¨ç¤ºåŒ¹é…På¼€å¤´nç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œå’Œ0-9æ‰€æœ‰æ•°å­—</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å­—ç¬¦ä¸²åŒ…å«Python'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å­—ç¬¦ä¸²ä¸åŒ…å«Python'</span><span class="token punctuation">)</span><span class="token comment"># 'Python'æ™®é€šå­—ç¬¦</span><span class="token comment"># '\d'å…ƒå­—ç¬¦</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ­£åˆ™ä¸­å­—ç¬¦é›†çš„ä½¿ç”¨"><a href="#æ­£åˆ™ä¸­å­—ç¬¦é›†çš„ä½¿ç”¨" class="headerlink" title="æ­£åˆ™ä¸­å­—ç¬¦é›†çš„ä½¿ç”¨"></a>æ­£åˆ™ä¸­å­—ç¬¦é›†çš„ä½¿ç”¨</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># å­—ç¬¦é›†</span><span class="token keyword">import</span> res <span class="token operator">=</span> <span class="token string">'abc, acc, adc, aec, afc, ahc'</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'a[cf]c'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>   <span class="token comment"># è¿™é‡Œ"a[cf]c"ï¼Œå‰åçš„aå’Œcå˜æˆäº†å®šç•Œç¬¦ï¼Œè§„å®šäº†aå¼€å¤´ä¸­é—´æ˜¯cæˆ–è€…fä»¥cç»“å°¾çš„å­—ç¬¦ä¸²</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token comment"># []ä¸­æ‹¬å·é‡Œé¢æ˜¯ æˆ– å…³ç³»ï¼Œ[^abc]åé€‰ é™¤äº† abc å…¶ä»–çš„éƒ½é€‰ã€‚[a-d]è¿ç»­ ä»£è¡¨abcd</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¦‚æ‹¬å­—ç¬¦é›†å’Œæ•°é‡è¯num"><a href="#æ¦‚æ‹¬å­—ç¬¦é›†å’Œæ•°é‡è¯num" class="headerlink" title="æ¦‚æ‹¬å­—ç¬¦é›†å’Œæ•°é‡è¯num"></a>æ¦‚æ‹¬å­—ç¬¦é›†å’Œæ•°é‡è¯num</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># æ¦‚æ‹¬å­—ç¬¦é›†(\d,\D,\w,etc)etcæ„æ€æ˜¯"åŠå…¶ä»–"ã€‚ä¸‹æ–‡ä¸è§£é‡Šã€‚</span><span class="token comment"># æ•°é‡è¯</span><span class="token keyword">import</span> rea <span class="token operator">=</span> <span class="token string">'python1111java678php'</span><span class="token comment"># r = re.findall('\d', a)</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'[a-z]&#123;3,6&#125;'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>   <span class="token comment"># åŒ¹é…[a-z]æœ€å°‘3æ¬¡è‡³å¤š6æ¬¡</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è´ªå©ªæ¨¡å¼ğŸ˜‹"><a href="#è´ªå©ªæ¨¡å¼ğŸ˜‹" class="headerlink" title="è´ªå©ªæ¨¡å¼ğŸ˜‹"></a>è´ªå©ªæ¨¡å¼ğŸ˜‹</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># è´ªå©ªä¸éè´ªå©ªï¼Œpythoné»˜è®¤ä¸ºè´ªå©ªæ¨¡å¼ï¼Œæ¯”å¦‚&#123;3,6&#125;pythonä¸ä¼šåŒ¹é…åˆ°3å°±åœæ­¢ï¼Œè€Œæ˜¯æŒ‰æœ€å¤šåŒ¹é…åˆ°6æ¬¡åœæ­¢</span><span class="token comment"># éè´ªå©ªçš„è¡¨ç¤º|åœ¨æ­£åˆ™è¡¨è¾¾å¼åé¢åŠ ä¸Š?</span><span class="token keyword">import</span> rea <span class="token operator">=</span> <span class="token string">'python1111java678php'</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'[a-z]&#123;3,6&#125;?'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>   <span class="token comment">#åŠ ä¸Š?ä½¿ç”¨éè´ªå©ªçš„æ¨¡å¼ï¼Œå¹³å¸¸å†™ä»£ç ï¼Œè¿™é‡Œå¤„ç†ä¸å¥½ä¼šç»å¸¸æœ‰BUG</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•°é‡è¯ï¼Œénum"><a href="#æ•°é‡è¯ï¼Œénum" class="headerlink" title="æ•°é‡è¯ï¼Œénum"></a>æ•°é‡è¯ï¼Œénum</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># æ•°é‡è¯ï¼Œ</span><span class="token comment"># * ï¼ŒåŒ¹é… * å‰é¢çš„å­—ç¬¦ 0æ¬¡æˆ–è€…æ— é™å¤šæ¬¡</span><span class="token comment"># + ï¼ŒåŒ¹é…1æ¬¡æˆ–è€…æ— é™å¤šæ¬¡</span><span class="token comment"># ? ï¼ŒåŒ¹é…0æ¬¡æˆ–è€…1æ¬¡</span><span class="token keyword">import</span> rea <span class="token operator">=</span> <span class="token string">'pytho0 python1 pythonn2'</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'python?'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è¾¹ç•ŒåŒ¹é…"><a href="#è¾¹ç•ŒåŒ¹é…" class="headerlink" title="è¾¹ç•ŒåŒ¹é…"></a>è¾¹ç•ŒåŒ¹é…</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># è¾¹ç•ŒåŒ¹é…</span><span class="token keyword">import</span> reqq <span class="token operator">=</span> <span class="token string">'1000000001'</span><span class="token comment"># æ‰“å°4-8ä½qqå·</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'^\d&#123;4,8&#125;$'</span><span class="token punctuation">,</span> qq<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç»„"><a href="#ç»„" class="headerlink" title="ç»„"></a>ç»„</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># ç»„</span><span class="token keyword">import</span> rea <span class="token operator">=</span> <span class="token string">'PythonPythonPythonPythonPython'</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'(Python)&#123;2&#125;'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>    <span class="token comment"># []ä¸­æ‹¬å·ä»£è¡¨æˆ–å…³ç³»ï¼Œ()å°æ‹¬å·ä»£è¡¨ä¸€ç»„æ•°æ®ã€‚</span><span class="token comment"># r = re.findall('(python)&#123;2&#125;', a, re.I)   # re.Iè¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™</span><span class="token comment"># '(Python)&#123;3&#125;(JS)'è¡¨ç¤º3ä¸ªPythonä¸ºä¸€ç»„ï¼Œåé¢æ˜¯JSçš„ï¼ŒåŒ¹é…å‡ºæ¥ã€‚</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ä¸”-nåŒ¹é…"><a href="#ä¸”-nåŒ¹é…" class="headerlink" title="ä¸”\nåŒ¹é…"></a>ä¸”\nåŒ¹é…</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> rea <span class="token operator">=</span> <span class="token string">'PythonC#\nJavaPHP'</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>findall<span class="token punctuation">(</span><span class="token string">'c#.&#123;1&#125;'</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> re<span class="token punctuation">.</span>I <span class="token operator">|</span> re<span class="token punctuation">.</span>S<span class="token punctuation">)</span>   <span class="token comment">#è¿™é‡Œçš„ | è¡¨ç¤ºå¹¶ä¸”ã€‚</span><span class="token comment"># .ç‚¹è¡¨ç¤ºåŒ¹é…ä»»æ„å­—ç¬¦ï¼Œé™¤äº†\nã€‚è€Œre.Sè¡¨ç¤ºè¦æ±‚.åŒ¹é…åˆ°\nã€‚</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ›¿æ¢"><a href="#æ›¿æ¢" class="headerlink" title="æ›¿æ¢"></a>æ›¿æ¢</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> rea <span class="token operator">=</span> <span class="token string">'PythonC#JavaC#PHP'</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'C#'</span><span class="token punctuation">,</span> <span class="token string">'GO'</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span>   <span class="token comment"># re.sub()æ›¿æ¢ã€‚('C#', 'GO', a, 0) æŠŠC#æ›¿æ¢æˆGOï¼Œ0ä»£è¡¨æ›¿æ¢æ‰€æœ‰ï¼Œ1ä»£è¡¨æ›¿æ¢ç¬¬ä¸€ä¸ªï¼Œä¸å¡«é»˜è®¤æ˜¯0</span><span class="token comment"># b = a.replace('C#', 'GO')   # å¦ä¸€ç§æ›¿æ¢æ–¹å¼ã€‚ä½¿ç”¨bæ˜¯å› ä¸ºå­—ç¬¦ä¸²ä¸å¯ä»¥è¢«ä¿®æ”¹ï¼Œæ‰€ä»¥è¦é‡æ–°èµ‹å€¼ã€‚</span><span class="token comment"># print(b)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># Ctrl + Alt + Lå¯ä»¥è°ƒ æ•´ç¼©è¿›ï¼Œå› ä¸ºæ­¤ç¯‡å³ä»¥å‰ä»¥åçš„å¤§éƒ¨åˆ†ä¸ºç¬”è®°ï¼Œä¸ºèŠ‚çœè¡Œæ•°ä¸ä¼šåˆ»æ„è°ƒæ•´ã€‚</span><span class="token keyword">import</span> relanguage <span class="token operator">=</span> <span class="token string">'PythonC#JavaC#PHPC#'</span><span class="token keyword">def</span> <span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>  <span class="token comment"># è¿™é‡Œæ‰“å°ä¸€ä¸‹valueçš„å€¼ï¼Œä¼šå‘ç°æœ‰ä¸‰è¡Œ&lt;re.Match object; span=(6, 8), match='C#'></span>    <span class="token comment"># objectè¡¨ç¤ºå¯¹è±¡ spanä»£è¡¨ä½ç½® matchæ˜¯åŒ¹é…çš„å­—ç¬¦ï¼Œæ„æ€å°±æ˜¯åŒ¹é…valueï¼Œè·å¾—äº†3ä¸ªç»“æœã€‚</span>    <span class="token comment"># valueå°±æ˜¯ä¸‹é¢ re.subä¼ è¿›æ¥çš„å‚æ•°C#</span>    matched <span class="token operator">=</span> value<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># è¿™æ ·ä»¥åä¼šç»å¸¸ä½¿ç”¨</span>    <span class="token keyword">return</span> <span class="token string">'!!'</span> <span class="token operator">+</span> matched <span class="token operator">+</span> <span class="token string">'!!'</span>  <span class="token comment"># è¿”å›çš„ç»“æœï¼Œä¼šæ›¿æ¢C#</span>    <span class="token comment"># returnè¿”å›çš„ç»“æœä¼šæ›¿æ¢value</span>    <span class="token comment"># å®é™…ä¸Šå°±æ˜¯å‡½æ•°ä½œä¸ºre.subç¬¬äºŒä¸ªå‚æ•°ï¼Œconvertè¿”å›ç»“æœæ›¿æ¢æ‰C#ï¼ˆå¯ä»¥æŠŠå‡½æ•°å½“ä½œå‚æ•°ï¼‰</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'C#'</span><span class="token punctuation">,</span> convert<span class="token punctuation">,</span> language<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>  <span class="token comment"># re.subç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚è¿™é‡Œ0ä¸å†™é»˜è®¤æ˜¯æ‰€æœ‰ã€‚</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> res <span class="token operator">=</span> <span class="token string">'A8C3721D86'</span>   <span class="token comment"># åŒ¹é…æ‰€æœ‰æ•°å­—ï¼Œå°†>=6çš„æ”¹ä¸º9ï¼Œ&lt;6æ”¹ä¸º0.</span><span class="token keyword">def</span> <span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>    matched <span class="token operator">=</span> value<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>matched<span class="token punctuation">)</span> <span class="token operator">>=</span> <span class="token number">6</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'9'</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">'0'</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'\d'</span><span class="token punctuation">,</span> convert<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token comment"># ä»è½¯ä»¶è®¾è®¡çš„è§’åº¦ï¼Œä¸€ä¸ªå‡½æ•°æ¥æ”¶å¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œåœ¨è½¯ä»¶é‡Œé¢æ˜¯ä¸€ä¸ªéå¸¸ç»å…¸çš„æ€æƒ³ï¼Œè¿™æ ·åšçš„ä¸€ä¸ªå¥½å¤„|</span><span class="token comment"># æ¯”å¦‚subå‡½æ•°çš„ç¼–å†™æ–¹ï¼Œæœ‰ä¸€äº›é€»è¾‘æ˜¯æ— æ³•å¸®åŠ©è°ƒç”¨æ–¹å»åšå†³å®šçš„ï¼Œæ‰€ä»¥ç¼–å†™æ–¹å¼€æ”¾ä¸€ä¸ªæ¥å£ï¼Œè®©è°ƒç”¨æ–¹ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼ˆè¿™é‡Œæ˜¯convertï¼‰ï¼Œ</span><span class="token comment"># ç„¶åæŠŠè°ƒç”¨æ–¹çš„å‡½æ•°ä½œä¸ºsubçš„å‚æ•°ï¼Œç»™è°ƒç”¨æ–¹ä¸€ä¸ªä¸­é—´çš„ç»“æœvalueï¼Œä¸ç®¡è°ƒç”¨æ–¹å¦‚ä½•å¤„ç†è¿™ä¸ªvalueï¼Œæœ€åè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç»™ç¼–å†™æ–¹å³å¯</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># æŠŠå•ä¸ªæ•°å­—å‰”é™¤ï¼Œä»¥ä¸¤ä½ä¸ºä¸€ç»„æ‰¾å‡ºå¤§äº50çš„æ›¿æ¢æˆ100ï¼Œå°äº50çš„æ›¿æ¢æˆ0</span><span class="token keyword">import</span> res <span class="token operator">=</span> <span class="token string">'A83B4C45D67E1'</span><span class="token comment"># str = '.?'</span><span class="token keyword">def</span> <span class="token function">convert</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">:</span>    matched <span class="token operator">=</span> value<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># print(matched)</span>    <span class="token comment"># print(value)b</span>    <span class="token comment"># print(str)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>matched<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>matched<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">:</span>        <span class="token keyword">return</span> <span class="token string">''</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">'\d&#123;1,2&#125;'</span><span class="token punctuation">,</span> convert<span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="matchå’Œsearch"><a href="#matchå’Œsearch" class="headerlink" title="matchå’Œsearch"></a>matchå’Œsearch</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># reæ¨¡å—çš„å¦å¤–çš„å‡½æ•°|re.matchå’Œre.search</span><span class="token keyword">import</span> res <span class="token operator">=</span> <span class="token string">'1A83B4C45D67E1'</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>match<span class="token punctuation">(</span><span class="token string">'\d'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span>r1 <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'\d'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>span<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r1<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># matchä»å­—ç¬¦ä¸²çš„é¦–å­—æ¯å¼€å§‹åŒ¹é…ï¼ŒåŒ¹é…ä¸åˆ°è¿”å›ç©ºï¼ˆNoneï¼‰</span><span class="token comment"># searchæ˜¯æœç´¢æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œç›´åˆ°åŒ¹é…åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³ç»“æœï¼Œå°±æŠŠç»“æœè¿”å›ï¼ˆè¿”å›çš„æ˜¯å¯¹è±¡ï¼‰</span><span class="token comment"># matchå’ŒsearchåªåŒ¹é…ä¸€æ¬¡</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> res <span class="token operator">=</span> <span class="token string">'life is short, i use python'</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'life(.*)python'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># çˆ¬è™«çˆ¬å–htmlç½‘é¡µæ—¶ï¼Œæ ‡ç­¾æ˜¯ä¸éœ€è¦çš„ï¼Œæ‰€ä»¥ä½¿ç”¨groupè·å–ï¼›(life(.*)python)å¤–é¢æ‹¬å·å¯ä»¥ä¸åŠ ï¼Œä½†æ˜¯group(0)æ°¸è¿œè¡¨ç¤ºæœ€å¤–é¢çš„æ‹¬å·ï¼Œgroup(1)æ‰æ˜¯(.*)</span><span class="token comment"># a = re.findall('life(.*)python', s)</span><span class="token comment"># print(a)    #ä½¿ç”¨findallï¼ŒæŠŠ(.*)æ‹¬èµ·æ¥ï¼Œå¯ä»¥ç›´æ¥æ‰“å°å‡ºæ¥è¦åŒ¹é…çš„ç»„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> res <span class="token operator">=</span> <span class="token string">'life is short, i use python, i love python'</span><span class="token comment"># r = re.search('life(.*)python', s)   # è¿™é‡Œä¼šåŒ¹é…åˆ°æœ€åä¸€ä¸ªpython</span>r <span class="token operator">=</span> re<span class="token punctuation">.</span>search<span class="token punctuation">(</span><span class="token string">'life(.*)python(.*)python'</span><span class="token punctuation">,</span> s<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>group<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># groupä¹Ÿå¯ä»¥è¿™æ ·ç”¨</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h1><p>ä»€ä¹ˆæ˜¯JSON|</p><blockquote><p>æ˜¯ä¸€ç§è½»é‡çº§çš„æ•°æ®äº¤æ¢æ ¼å¼<br>JSONæ˜¯ä¸€ç§æ•°æ®æ ¼å¼<br>å­—ç¬¦ä¸²æ˜¯JSONçš„è¡¨ç°å½¢å¼  </p></blockquote><p>JSONå­—ç¬¦ä¸²|ç¬¦åˆJSONæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œçœ‹ä¸€ä¸‹ä¾‹å­|  </p><blockquote><p>{a: â€œhahaâ€&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;âŒ<br>{â€œnameâ€: â€œhahaâ€}&emsp;&emsp;&emsp;âœ”</p></blockquote><p>JSON VS XMLï¼ˆäº’è”ç½‘äº§å“å¤§éƒ¨åˆ†å…ˆæ‹©JSONæ¥åšæ•°æ®äº¤æ¢ï¼‰<br>JSONä¼˜åŠ¿|  </p><blockquote><p>æ˜“äºé˜…è¯»<br>æ˜“äºè§£æ<br>ç½‘ç»œä¼ è¾“æ•ˆç‡é«˜<br>è·¨è¯­è¨€äº¤æ¢æ•°æ®</p></blockquote><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">import</span> jsonjson_str <span class="token operator">=</span> <span class="token string">'&#123;"name":"haha", "age":9&#125;'</span>   <span class="token comment"># è‹¥å®šä¹‰jsonå­—ç¬¦ä¸²ï¼Œ&#123;&#125;é‡Œé¢å¿…é¡»æ˜¯åŒå¼•å·ï¼Œæ‰€ä»¥&#123;&#125;å¤–é¢æ˜¯å•å¼•å·</span><span class="token comment"># JSON ä¸­è¡¨ç¤ºä¸Šé¢çš„å­—ç¬¦ä¸²æ˜¯objectå¯¹è±¡ï¼Œè¿˜æœ‰arrayæ•°ç»„</span>json_array <span class="token operator">=</span> <span class="token string">'[&#123;"name":"haha", "age":9, "flag":false&#125;, &#123;"name":"xixi", "age":8&#125;]'</span>student <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>json_str<span class="token punctuation">)</span>student1 <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span>json_array<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>student1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token comment"># print(student['name'])</span><span class="token comment"># print(student['age'])</span><span class="token comment"># ä¸åŒçš„è¯­è¨€ä¼šæŠŠåŒæ ·çš„JSONå­—ç¬¦ä¸²è½¬æ¢æˆä¸åŒçš„æ•°æ®ç±»å‹</span><span class="token comment"># ååºåˆ—åŒ–ï¼Œå­—ç¬¦ä¸²åˆ°pythonæ•°æ®ç±»å‹çš„è¿‡ç¨‹ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>jsonä¸­æ•°æ®ç±»å‹å¯¹åº”çš„pythonæ•°æ®ç±»å‹  </p><table><thead><tr><th align="left">json</th><th align="left">python</th></tr></thead><tbody><tr><td align="left">object</td><td align="left">dict</td></tr><tr><td align="left">array</td><td align="left">list</td></tr><tr><td align="left">string</td><td align="left">str</td></tr><tr><td align="left">number</td><td align="left">int</td></tr><tr><td align="left">number</td><td align="left">float</td></tr><tr><td align="left">true</td><td align="left">True</td></tr><tr><td align="left">false</td><td align="left">False</td></tr><tr><td align="left">null</td><td align="left">None</td></tr></tbody></table><h2 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># åºåˆ—åŒ–</span><span class="token keyword">import</span> jsonstudent <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token punctuation">&#123;</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'haha'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token string">'flag'</span><span class="token punctuation">:</span> <span class="token boolean">False</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>    <span class="token punctuation">&#123;</span><span class="token string">'name'</span><span class="token punctuation">:</span> <span class="token string">'xixi'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span>json_str <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>json_str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>json_str<span class="token punctuation">)</span><span class="token comment"># NOSQL MongoDB æ¯”è¾ƒé€‚åˆå­˜å‚¨å¯¹è±¡ï¼Œ</span><span class="token comment"># å°†å¯¹è±¡åºåˆ—åŒ–æˆå­—ç¬¦ä¸²ï¼Œå­˜åˆ°MySQLä¸­ï¼Œè¯»å‡ºæ¥ä¹‹åååºåˆ—åŒ–æˆå¯¹è±¡ã€‚--ä¸å»ºè®®è¿™æ ·åšã€‚</span><span class="token comment"># æˆ–è€…å°†å¯¹è±¡æ‹†åˆ†ä¹‹åï¼Œä»¥ç›®å½•æ ‘çš„å½¢å¼ï¼Œå­˜å‚¨åˆ°MySQLä¸­ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>JSONã€JSONå¯¹è±¡  </p><blockquote><p>JSON|æ•°æ®äº¤æ¢çš„æ ‡å‡†æ ¼å¼<br>JSONå¯¹è±¡|åœ¨Javascriptä¸­æ˜¯å­˜åœ¨JSONå¯¹è±¡çš„ï¼Œå¯¹äºpythonæ¥è¯´æ˜¯æ²¡æœ‰JSONå¯¹è±¡è¯´æ³•çš„ã€‚  </p></blockquote><p>&emsp;&emsp;JavaScriptæ˜¯å®ç°ECMASCRIPTï¼ˆW3Cåˆ¶å®šçš„è„šæœ¬æ ‡å‡†ï¼‰æ ‡å‡†ä¹‹ä¸€ï¼ŒåŒæ ·ä¹Ÿæœ‰ActionScriptï¼ŒJSONï¼ŒTypeScriptï¼ˆå¾®è½¯ï¼‰  </p><h1 id="å…ƒå­—ç¬¦"><a href="#å…ƒå­—ç¬¦" class="headerlink" title="å…ƒå­—ç¬¦"></a>å…ƒå­—ç¬¦</h1><style>table th:first-of-type {    width: 120px;}</style><table><thead><tr><th align="left">å…ƒå­—ç¬¦</th><th>æè¿°</th></tr></thead><tbody><tr><td align="left"><code>\</code></td><td>å°†ä¸‹ä¸€ä¸ªå­—ç¬¦æ ‡è®°ç¬¦ã€æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€æˆ–ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€<code>\\n</code>â€œåŒ¹é…<code>\n</code>ã€‚â€<code>\n</code>â€œåŒ¹é…æ¢è¡Œç¬¦ã€‚åºåˆ—â€<code>\\</code>â€œåŒ¹é…â€<code>\</code>â€œè€Œâ€<code>\(</code>â€œåˆ™åŒ¹é…â€<code>(</code>â€œã€‚å³ç›¸å½“äºå¤šç§ç¼–ç¨‹è¯­è¨€ä¸­éƒ½æœ‰çš„â€è½¬ä¹‰å­—ç¬¦â€çš„æ¦‚å¿µã€‚</td></tr><tr><td align="left"><code>^</code></td><td>åŒ¹é…è¾“å…¥å­—è¡Œé¦–ã€‚å¦‚æœè®¾ç½®äº†RegExpå¯¹è±¡çš„Multilineå±æ€§ï¼Œ<code>^</code>ä¹ŸåŒ¹é…â€<code>\n</code>â€œæˆ–â€<code>\r</code>â€œä¹‹åçš„ä½ç½®ã€‚</td></tr><tr><td align="left"><code>$</code></td><td>åŒ¹é…è¾“å…¥è¡Œå°¾ã€‚å¦‚æœè®¾ç½®äº†RegExpå¯¹è±¡çš„Multilineå±æ€§ï¼Œ<code>$</code>ä¹ŸåŒ¹é…â€<code>\n</code>â€œæˆ–â€<code>\r</code>â€œä¹‹å‰çš„ä½ç½®ã€‚</td></tr><tr><td align="left"><code>*</code></td><td>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä»»æ„æ¬¡ã€‚ä¾‹å¦‚ï¼Œ<code>zo*</code>èƒ½åŒ¹é…â€<code>z</code>â€œï¼Œä¹Ÿèƒ½åŒ¹é…â€<code>zo</code>â€œä»¥åŠâ€<code>zoo</code>â€œã€‚<code>*</code>ç­‰ä»·äº{<code>0,</code>}ã€‚</td></tr><tr><td align="left"><code>+</code></td><td>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼ä¸€æ¬¡æˆ–å¤šæ¬¡(å¤§äºç­‰äº1æ¬¡ï¼‰ã€‚ä¾‹å¦‚ï¼Œâ€<code>zo+</code>â€œèƒ½åŒ¹é…â€<code>zo</code>â€œä»¥åŠâ€<code>zoo</code>â€œï¼Œä½†ä¸èƒ½åŒ¹é…â€<code>z</code>â€œã€‚<code>+</code>ç­‰ä»·äº<code>&#123;1,&#125;</code>ã€‚</td></tr><tr><td align="left"><code>?</code></td><td>åŒ¹é…å‰é¢çš„å­è¡¨è¾¾å¼é›¶æ¬¡æˆ–ä¸€æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€<code>do(es)?</code>â€œå¯ä»¥åŒ¹é…â€<code>do</code>â€œæˆ–â€<code>does</code>â€œã€‚<code>?</code>ç­‰ä»·äº<code>&#123;0,1&#125;</code>ã€‚</td></tr><tr><td align="left"><code>&#123;*n*&#125;</code></td><td><code>*n*</code>æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚åŒ¹é…ç¡®å®šçš„<code>*n*</code>æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€<code>o&#123;2&#125;</code>â€œä¸èƒ½åŒ¹é…â€<code>Bob</code>â€œä¸­çš„â€<code>o</code>â€œï¼Œä½†æ˜¯èƒ½åŒ¹é…â€<code>food</code>â€œä¸­çš„ä¸¤ä¸ª<code>o</code>ã€‚</td></tr><tr><td align="left"><code>&#123;*n*,&#125;</code></td><td><code>*n*</code>æ˜¯ä¸€ä¸ªéè´Ÿæ•´æ•°ã€‚è‡³å°‘åŒ¹é…<code>*n*</code>æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€<code>o&#123;2,&#125;</code>â€œä¸èƒ½åŒ¹é…â€<code>Bob</code>â€œä¸­çš„â€<code>o</code>â€œï¼Œä½†èƒ½åŒ¹é…â€<code>foooood</code>â€œä¸­çš„æ‰€æœ‰<code>o</code>ã€‚â€<code>o&#123;1,&#125;</code>â€œç­‰ä»·äºâ€<code>o+</code>â€œã€‚â€<code>o&#123;0,&#125;</code>â€œåˆ™ç­‰ä»·äºâ€<code>o*</code>â€œã€‚</td></tr><tr><td align="left"><code>&#123;*n*,*m*&#125;</code></td><td><code>*m*</code>å’Œ<code>*n*</code>å‡ä¸ºéè´Ÿæ•´æ•°ï¼Œå…¶ä¸­<code>*n*</code>&lt;=<code>*m*</code>ã€‚æœ€å°‘åŒ¹é…<code>*n*</code>æ¬¡ä¸”æœ€å¤šåŒ¹é…<code>*m*</code>æ¬¡ã€‚ä¾‹å¦‚ï¼Œâ€<code>o&#123;1,3&#125;</code>â€œå°†åŒ¹é…â€<code>fooooood</code>â€œä¸­çš„å‰ä¸‰ä¸ªoä¸ºä¸€ç»„ï¼Œåä¸‰ä¸ªoä¸ºä¸€ç»„ã€‚â€<code>o&#123;0,1&#125;</code>â€œç­‰ä»·äºâ€<code>o?</code>â€œã€‚è¯·æ³¨æ„åœ¨é€—å·å’Œä¸¤ä¸ªæ•°ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼ã€‚</td></tr><tr><td align="left"><code>?</code></td><td>å½“è¯¥å­—ç¬¦ç´§è·Ÿåœ¨ä»»ä½•ä¸€ä¸ªå…¶ä»–é™åˆ¶ç¬¦ï¼ˆ<code>*,+,?ï¼Œ&#123;*n*&#125;ï¼Œ&#123;*n*,&#125;ï¼Œ&#123;*n*,*m*&#125;</code>ï¼‰åé¢æ—¶ï¼ŒåŒ¹é…æ¨¡å¼æ˜¯éè´ªå©ªçš„ã€‚éè´ªå©ªæ¨¡å¼å°½å¯èƒ½å°‘åœ°åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²ï¼Œè€Œé»˜è®¤çš„è´ªå©ªæ¨¡å¼åˆ™å°½å¯èƒ½å¤šåœ°åŒ¹é…æ‰€æœç´¢çš„å­—ç¬¦ä¸²ã€‚ä¾‹å¦‚ï¼Œå¯¹äºå­—ç¬¦ä¸²â€ooooâ€ï¼Œâ€o+â€å°†å°½å¯èƒ½å¤šåœ°åŒ¹é…â€oâ€ï¼Œå¾—åˆ°ç»“æœ[â€œooooâ€]ï¼Œè€Œâ€<code>o+?</code>â€œå°†å°½å¯èƒ½å°‘åœ°åŒ¹é…â€oâ€ï¼Œå¾—åˆ°ç»“æœ <code>[&#39;o&#39;, &#39;o&#39;, &#39;o&#39;, &#39;o&#39;]</code></td></tr><tr><td align="left"><code>.</code></td><td>åŒ¹é…é™¤â€<code>\n</code>â€œå’Œâ€<code>\r</code>â€œä¹‹å¤–çš„ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚è¦åŒ¹é…åŒ…æ‹¬â€<code>\n</code>â€œå’Œâ€<code>\r</code>â€œåœ¨å†…çš„ä»»ä½•å­—ç¬¦ï¼Œè¯·ä½¿ç”¨åƒâ€<code>[\s\S]</code>â€œçš„æ¨¡å¼ã€‚</td></tr><tr><td align="left"><code>(pattern)</code></td><td>åŒ¹é…patternå¹¶è·å–è¿™ä¸€åŒ¹é…ã€‚æ‰€è·å–çš„åŒ¹é…å¯ä»¥ä»äº§ç”Ÿçš„Matchesé›†åˆå¾—åˆ°ï¼Œåœ¨VBScriptä¸­ä½¿ç”¨SubMatchesé›†åˆï¼Œåœ¨JScriptä¸­åˆ™ä½¿ç”¨<code>$0â€¦$9</code>å±æ€§ã€‚è¦åŒ¹é…åœ†æ‹¬å·å­—ç¬¦ï¼Œè¯·ä½¿ç”¨â€<code>\(</code>â€œæˆ–â€<code>\)</code>â€œã€‚</td></tr><tr><td align="left"><code>(?:pattern)</code></td><td>éè·å–åŒ¹é…ï¼ŒåŒ¹é…patternä½†ä¸è·å–åŒ¹é…ç»“æœï¼Œä¸è¿›è¡Œå­˜å‚¨ä¾›ä»¥åä½¿ç”¨ã€‚è¿™åœ¨ä½¿ç”¨æˆ–å­—ç¬¦â€<code>(|)</code>â€œæ¥ç»„åˆä¸€ä¸ªæ¨¡å¼çš„å„ä¸ªéƒ¨åˆ†æ—¶å¾ˆæœ‰ç”¨ã€‚ä¾‹å¦‚â€<code>industr(?:y|ies)</code>â€œå°±æ˜¯ä¸€ä¸ªæ¯”â€<code>industry|industries</code>â€œæ›´ç®€ç•¥çš„è¡¨è¾¾å¼ã€‚</td></tr><tr><td align="left"><code>(?=pattern)</code></td><td>éè·å–åŒ¹é…ï¼Œæ­£å‘è‚¯å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œâ€<code>Windows(?=95|98|NT|2000)</code>â€œèƒ½åŒ¹é…â€<code>Windows2000</code>â€œä¸­çš„â€<code>Windows</code>â€œï¼Œä½†ä¸èƒ½åŒ¹é…â€<code>Windows3.1</code>â€œä¸­çš„â€<code>Windows</code>â€œã€‚é¢„æŸ¥ä¸æ¶ˆè€—å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ä¸€ä¸ªåŒ¹é…å‘ç”Ÿåï¼Œåœ¨æœ€åä¸€æ¬¡åŒ¹é…ä¹‹åç«‹å³å¼€å§‹ä¸‹ä¸€æ¬¡åŒ¹é…çš„æœç´¢ï¼Œè€Œä¸æ˜¯ä»åŒ…å«é¢„æŸ¥çš„å­—ç¬¦ä¹‹åå¼€å§‹ã€‚</td></tr><tr><td align="left"><code>(?!pattern)</code></td><td>éè·å–åŒ¹é…ï¼Œæ­£å‘å¦å®šé¢„æŸ¥ï¼Œåœ¨ä»»ä½•ä¸åŒ¹é…patternçš„å­—ç¬¦ä¸²å¼€å§‹å¤„åŒ¹é…æŸ¥æ‰¾å­—ç¬¦ä¸²ï¼Œè¯¥åŒ¹é…ä¸éœ€è¦è·å–ä¾›ä»¥åä½¿ç”¨ã€‚ä¾‹å¦‚â€<code>Windows(?!95|98|NT|2000)</code>â€œèƒ½åŒ¹é…â€Windows3.1â€ä¸­çš„â€Windowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€Windows2000â€ä¸­çš„â€Windowsâ€ã€‚</td></tr><tr><td align="left"><code>(?&lt;=pattern)</code></td><td>éè·å–åŒ¹é…ï¼Œåå‘è‚¯å®šé¢„æŸ¥ï¼Œä¸æ­£å‘è‚¯å®šé¢„æŸ¥ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚ä¾‹å¦‚ï¼Œâ€<code>(?&lt;=95|98|NT|2000)Windows</code>â€œèƒ½åŒ¹é…â€2000Windowsâ€ä¸­çš„â€Windowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€3.1Windowsâ€ä¸­çš„â€Windowsâ€ã€‚</td></tr><tr><td align="left"><code>(?&lt;!patte_n)</code></td><td>éè·å–åŒ¹é…ï¼Œåå‘å¦å®šé¢„æŸ¥ï¼Œä¸æ­£å‘å¦å®šé¢„æŸ¥ç±»ä¼¼ï¼Œåªæ˜¯æ–¹å‘ç›¸åã€‚ä¾‹å¦‚â€<code>(?&lt;!95|98|NT|2000)Windows</code>â€œèƒ½åŒ¹é…â€3.1Windowsâ€ä¸­çš„â€Windowsâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€2000Windowsâ€ä¸­çš„â€Windowsâ€ã€‚</td></tr><tr><td align="left"><code>x|y</code></td><td>åŒ¹é…<code>x</code>æˆ–<code>y</code>ã€‚ä¾‹å¦‚ï¼Œâ€<code>z|food</code>â€œèƒ½åŒ¹é…â€<code>z</code>â€œæˆ–â€<code>food</code>â€œ(æ­¤å¤„è¯·è°¨æ…)ã€‚â€<code>[z|f]ood</code>â€œåˆ™åŒ¹é…â€<code>zood</code>â€œæˆ–â€<code>food</code>â€œã€‚</td></tr><tr><td align="left"><code>[xyz]</code></td><td>å­—ç¬¦é›†åˆã€‚åŒ¹é…æ‰€åŒ…å«çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€<code>[abc]</code>â€œå¯ä»¥åŒ¹é…â€plainâ€ä¸­çš„â€aâ€ã€‚</td></tr><tr><td align="left"><code>[^xyz]</code></td><td>è´Ÿå€¼å­—ç¬¦é›†åˆã€‚åŒ¹é…æœªåŒ…å«çš„ä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€<code>[^abc]</code>â€œå¯ä»¥åŒ¹é…â€plainâ€ä¸­çš„â€plinâ€ä»»ä¸€å­—ç¬¦ã€‚</td></tr><tr><td align="left"><code>[a-z]</code></td><td>å­—ç¬¦èŒƒå›´ã€‚åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€<code>[a-z]</code>â€œå¯ä»¥åŒ¹é…â€aâ€åˆ°â€zâ€èŒƒå›´å†…çš„ä»»æ„å°å†™å­—æ¯å­—ç¬¦ã€‚æ³¨æ„:åªæœ‰è¿å­—ç¬¦åœ¨å­—ç¬¦ç»„å†…éƒ¨æ—¶,å¹¶ä¸”å‡ºç°åœ¨ä¸¤ä¸ªå­—ç¬¦ä¹‹é—´æ—¶,æ‰èƒ½è¡¨ç¤ºå­—ç¬¦çš„èŒƒå›´; å¦‚æœå‡ºå­—ç¬¦ç»„çš„å¼€å¤´,åˆ™åªèƒ½è¡¨ç¤ºè¿å­—ç¬¦æœ¬èº«.</td></tr><tr><td align="left"><code>[^a-z]</code></td><td>è´Ÿå€¼å­—ç¬¦èŒƒå›´ã€‚åŒ¹é…ä»»ä½•ä¸åœ¨æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œâ€<code>[^a-z]</code>â€œå¯ä»¥åŒ¹é…ä»»ä½•ä¸åœ¨â€aâ€åˆ°â€zâ€èŒƒå›´å†…çš„ä»»æ„å­—ç¬¦ã€‚</td></tr><tr><td align="left"><code>\b</code></td><td>åŒ¹é…ä¸€ä¸ªå•è¯çš„è¾¹ç•Œï¼Œä¹Ÿå°±æ˜¯æŒ‡å•è¯å’Œç©ºæ ¼é—´çš„ä½ç½®ï¼ˆå³æ­£åˆ™è¡¨è¾¾å¼çš„â€åŒ¹é…â€æœ‰ä¸¤ç§æ¦‚å¿µï¼Œä¸€ç§æ˜¯åŒ¹é…å­—ç¬¦ï¼Œä¸€ç§æ˜¯åŒ¹é…ä½ç½®ï¼Œè¿™é‡Œçš„<code>\b</code>å°±æ˜¯åŒ¹é…ä½ç½®çš„ï¼‰ã€‚ä¾‹å¦‚ï¼Œâ€<code>er\b</code>â€œå¯ä»¥åŒ¹é…â€neverâ€ä¸­çš„â€erâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€verbâ€ä¸­çš„â€erâ€ï¼›â€<code>\b1_</code>â€œå¯ä»¥åŒ¹é…â€1_23â€ä¸­çš„â€1_â€ï¼Œä½†ä¸èƒ½åŒ¹é…â€21_3â€ä¸­çš„â€1_â€ã€‚</td></tr><tr><td align="left"><code>\B</code></td><td>åŒ¹é…éå•è¯è¾¹ç•Œã€‚â€<code>er\B</code>â€œèƒ½åŒ¹é…â€verbâ€ä¸­çš„â€erâ€ï¼Œä½†ä¸èƒ½åŒ¹é…â€neverâ€ä¸­çš„â€erâ€ã€‚</td></tr><tr><td align="left"><code>\cx</code></td><td>åŒ¹é…ç”±xæŒ‡æ˜çš„æ§åˆ¶å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ<code>\cM</code>åŒ¹é…ä¸€ä¸ªControl-Mæˆ–å›è½¦ç¬¦ã€‚xçš„å€¼å¿…é¡»ä¸ºA-Zæˆ–a-zä¹‹ä¸€ã€‚å¦åˆ™ï¼Œå°†cè§†ä¸ºä¸€ä¸ªåŸä¹‰çš„â€câ€å­—ç¬¦ã€‚</td></tr><tr><td align="left"><code>\d</code></td><td>åŒ¹é…ä¸€ä¸ªæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº<code>[0-9]</code>ã€‚grep è¦åŠ ä¸Š-Pï¼Œperlæ­£åˆ™æ”¯æŒ</td></tr><tr><td align="left"><code>\D</code></td><td>åŒ¹é…ä¸€ä¸ªéæ•°å­—å­—ç¬¦ã€‚ç­‰ä»·äº<code>[^0-9]</code>ã€‚grepè¦åŠ ä¸Š-Pï¼Œperlæ­£åˆ™æ”¯æŒ</td></tr><tr><td align="left"><code>\f</code></td><td>åŒ¹é…ä¸€ä¸ªæ¢é¡µç¬¦ã€‚ç­‰ä»·äº<code>\x0c</code>å’Œ<code>\cL</code>ã€‚</td></tr><tr><td align="left"><code>\n</code></td><td>åŒ¹é…ä¸€ä¸ªæ¢è¡Œç¬¦ã€‚ç­‰ä»·äº<code>\x0a</code>å’Œ<code>\cJ</code>ã€‚</td></tr><tr><td align="left"><code>\r</code></td><td>åŒ¹é…ä¸€ä¸ªå›è½¦ç¬¦ã€‚ç­‰ä»·äº<code>\x0d</code>å’Œ<code>\cM</code>ã€‚</td></tr><tr><td align="left"><code>\s</code></td><td>åŒ¹é…ä»»ä½•ä¸å¯è§å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ã€‚ç­‰ä»·äº<code>[ \f\n\r\t\v]</code>ã€‚</td></tr><tr><td align="left"><code>\S</code></td><td>åŒ¹é…ä»»ä½•å¯è§å­—ç¬¦ã€‚ç­‰ä»·äº<code>[^ \f\n\r\t\v]</code>ã€‚</td></tr><tr><td align="left"><code>\t</code></td><td>åŒ¹é…ä¸€ä¸ªåˆ¶è¡¨ç¬¦ã€‚ç­‰ä»·äº<code>\x09</code>å’Œ<code>\cI</code>ã€‚</td></tr><tr><td align="left"><code>\v</code></td><td>åŒ¹é…ä¸€ä¸ªå‚ç›´åˆ¶è¡¨ç¬¦ã€‚ç­‰ä»·äº<code>\x0b</code>å’Œ<code>\cK</code>ã€‚</td></tr><tr><td align="left"><code>\w</code></td><td>åŒ¹é…åŒ…æ‹¬ä¸‹åˆ’çº¿çš„ä»»ä½•å•è¯å­—ç¬¦ã€‚ç±»ä¼¼ä½†ä¸ç­‰ä»·äºâ€<code>[A-Za-z0-9_]</code>â€œï¼Œè¿™é‡Œçš„â€å•è¯â€å­—ç¬¦ä½¿ç”¨Unicodeå­—ç¬¦é›†ã€‚</td></tr><tr><td align="left"><code>\W</code></td><td>åŒ¹é…ä»»ä½•éå•è¯å­—ç¬¦ã€‚ç­‰ä»·äºâ€<code>[^A-Za-z0-9_]</code>â€œã€‚</td></tr><tr><td align="left"><code>\x*n*</code></td><td>åŒ¹é…<code>*n*</code>ï¼Œå…¶ä¸­<code>*n*</code>ä¸ºåå…­è¿›åˆ¶è½¬ä¹‰å€¼ã€‚åå…­è¿›åˆ¶è½¬ä¹‰å€¼å¿…é¡»ä¸ºç¡®å®šçš„ä¸¤ä¸ªæ•°å­—é•¿ã€‚ä¾‹å¦‚ï¼Œâ€<code>\x41</code>â€œåŒ¹é…â€<code>A</code>â€œã€‚â€<code>\x041</code>â€œåˆ™ç­‰ä»·äºâ€<code>\x04&amp;1</code>â€œã€‚æ­£åˆ™è¡¨è¾¾å¼ä¸­å¯ä»¥ä½¿ç”¨ASCIIç¼–ç ã€‚</td></tr><tr><td align="left"><code>\*num*</code></td><td>åŒ¹é…<code>*num*</code>ï¼Œå…¶ä¸­<code>*num*</code>æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ã€‚å¯¹æ‰€è·å–çš„åŒ¹é…çš„å¼•ç”¨ã€‚ä¾‹å¦‚ï¼Œâ€<code>(.)\1</code>â€œåŒ¹é…ä¸¤ä¸ªè¿ç»­çš„ç›¸åŒå­—ç¬¦ã€‚</td></tr><tr><td align="left"><code>\*n*</code></td><td>æ ‡è¯†ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€‚å¦‚æœ<code>\*n*</code>ä¹‹å‰è‡³å°‘<code>*n*</code>ä¸ªè·å–çš„å­è¡¨è¾¾å¼ï¼Œåˆ™<code>*n*</code>ä¸ºå‘åå¼•ç”¨ã€‚å¦åˆ™ï¼Œå¦‚æœ<code>*n*</code>ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-7ï¼‰ï¼Œåˆ™<code>*n*</code>ä¸ºä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼ã€‚</td></tr><tr><td align="left"><code>\*nm*</code></td><td>æ ‡è¯†ä¸€ä¸ªå…«è¿›åˆ¶è½¬ä¹‰å€¼æˆ–ä¸€ä¸ªå‘åå¼•ç”¨ã€‚å¦‚æœ<code>\*nm*</code>ä¹‹å‰è‡³å°‘æœ‰<code>*nm*</code>ä¸ªè·å¾—å­è¡¨è¾¾å¼ï¼Œåˆ™<code>*nm*</code>ä¸ºå‘åå¼•ç”¨ã€‚å¦‚æœ<code>\*nm*</code>ä¹‹å‰è‡³å°‘æœ‰<code>*n*</code>ä¸ªè·å–ï¼Œåˆ™<code>*n*</code>ä¸ºä¸€ä¸ªåè·Ÿæ–‡å­—<code>*m*</code>çš„å‘åå¼•ç”¨ã€‚å¦‚æœå‰é¢çš„æ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œè‹¥<code>*n*</code>å’Œ<code>*m*</code>å‡ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-7ï¼‰ï¼Œåˆ™<code>\*nm*</code>å°†åŒ¹é…å…«è¿›åˆ¶è½¬ä¹‰å€¼<code>*nm*</code>ã€‚</td></tr><tr><td align="left"><code>\*nml*</code></td><td>å¦‚æœ<code>*n*</code>ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-7ï¼‰ï¼Œä¸”<code>*m*</code>å’Œ<code>*l*</code>å‡ä¸ºå…«è¿›åˆ¶æ•°å­—ï¼ˆ0-7ï¼‰ï¼Œåˆ™åŒ¹é…å…«è¿›åˆ¶è½¬ä¹‰å€¼<code>*nml*</code>ã€‚</td></tr><tr><td align="left"><code>\u*n*</code></td><td>åŒ¹é…<code>*n*</code>ï¼Œå…¶ä¸­<code>*n*</code>æ˜¯ä¸€ä¸ªç”¨å››ä¸ªåå…­è¿›åˆ¶æ•°å­—è¡¨ç¤ºçš„Unicodeå­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œ<code>\u00A9</code>åŒ¹é…ç‰ˆæƒç¬¦å·ï¼ˆ<code>&amp;copy;</code>ï¼‰ã€‚</td></tr><tr><td align="left"><code>\p&#123;P&#125;</code></td><td>å°å†™ p æ˜¯ property çš„æ„æ€ï¼Œè¡¨ç¤º Unicode å±æ€§ï¼Œç”¨äº Unicode æ­£è¡¨è¾¾å¼çš„å‰ç¼€ã€‚ä¸­æ‹¬å·å†…çš„â€Pâ€è¡¨ç¤ºUnicode å­—ç¬¦é›†ä¸ƒä¸ªå­—ç¬¦å±æ€§ä¹‹ä¸€ï¼šæ ‡ç‚¹å­—ç¬¦ã€‚å…¶ä»–å…­ä¸ªå±æ€§Lï¼šå­—æ¯ï¼›Mï¼šæ ‡è®°ç¬¦å·ï¼ˆä¸€èˆ¬ä¸ä¼šå•ç‹¬å‡ºç°ï¼‰ï¼›Zï¼šåˆ†éš”ç¬¦ï¼ˆæ¯”å¦‚ç©ºæ ¼ã€æ¢è¡Œç­‰ï¼‰ï¼›Sï¼šç¬¦å·ï¼ˆæ¯”å¦‚æ•°å­¦ç¬¦å·ã€è´§å¸ç¬¦å·ç­‰ï¼‰ï¼›Nï¼šæ•°å­—ï¼ˆæ¯”å¦‚é˜¿æ‹‰ä¼¯æ•°å­—ã€ç½—é©¬æ•°å­—ç­‰ï¼‰ï¼›Cï¼šå…¶ä»–å­—ç¬¦ã€‚*æ³¨ï¼šæ­¤è¯­æ³•éƒ¨åˆ†è¯­è¨€ä¸æ”¯æŒï¼Œä¾‹</td></tr><tr><td align="left"><code>\&lt;\&gt;</code></td><td>åŒ¹é…è¯ï¼ˆwordï¼‰çš„å¼€å§‹ï¼ˆ<code>\&lt;</code>ï¼‰å’Œç»“æŸï¼ˆ<code>\&gt;</code>ï¼‰ã€‚ä¾‹å¦‚æ­£åˆ™è¡¨è¾¾å¼<code>\&lt;the\&gt;</code>èƒ½å¤ŸåŒ¹é…å­—ç¬¦ä¸²â€for the wiseâ€ä¸­çš„â€theâ€ï¼Œä½†æ˜¯ä¸èƒ½åŒ¹é…å­—ç¬¦ä¸²â€otherwiseâ€ä¸­çš„â€theâ€ã€‚æ³¨æ„ï¼šè¿™ä¸ªå…ƒå­—ç¬¦ä¸æ˜¯æ‰€æœ‰çš„è½¯ä»¶éƒ½æ”¯æŒçš„ã€‚</td></tr><tr><td align="left"><code>( )</code></td><td>å°†<code>(</code> å’Œ <code>)</code> ä¹‹é—´çš„è¡¨è¾¾å¼å®šä¹‰ä¸ºâ€ç»„â€ï¼ˆgroupï¼‰ï¼Œå¹¶ä¸”å°†åŒ¹é…è¿™ä¸ªè¡¨è¾¾å¼çš„å­—ç¬¦ä¿å­˜åˆ°ä¸€ä¸ªä¸´æ—¶åŒºåŸŸï¼ˆä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä¸­æœ€å¤šå¯ä»¥ä¿å­˜9ä¸ªï¼‰ï¼Œå®ƒä»¬å¯ä»¥ç”¨ <code>\1</code> åˆ°<code>\9</code> çš„ç¬¦å·æ¥å¼•ç”¨ã€‚</td></tr><tr><td align="left"><code>|</code></td><td>å°†ä¸¤ä¸ªåŒ¹é…æ¡ä»¶è¿›è¡Œé€»è¾‘â€æˆ–â€ï¼ˆOrï¼‰è¿ç®—ã€‚ä¾‹å¦‚æ­£åˆ™è¡¨è¾¾å¼(<code>him|her</code>) åŒ¹é…â€it belongs to himâ€å’Œâ€it belongs to herâ€ï¼Œä½†æ˜¯ä¸èƒ½åŒ¹é…â€it belongs to them.â€ã€‚æ³¨æ„ï¼šè¿™ä¸ªå…ƒå­—ç¬¦ä¸æ˜¯æ‰€æœ‰çš„è½¯ä»¶éƒ½æ”¯æŒçš„ã€‚</td></tr></tbody></table><h1 id="æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•æ”¯æŒæƒ…å†µ"><a href="#æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•æ”¯æŒæƒ…å†µ" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•æ”¯æŒæƒ…å†µ"></a>æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•æ”¯æŒæƒ…å†µ</h1><table><thead><tr><th><strong>å‘½ä»¤æˆ–ç¯å¢ƒ</strong></th><th><strong>.</strong> <strong>[ ]</strong> <strong>^</strong> <strong>$</strong></th><th><strong>( )</strong></th><th><strong>{ }</strong></th><th><strong>?</strong> <strong>+</strong> <strong>|</strong> <strong>( )</strong></th></tr></thead><tbody><tr><td><strong>vi</strong></td><td>âˆš</td><td>âˆš</td><td></td><td></td></tr><tr><td><strong>Visual C++</strong></td><td>âˆš</td><td>âˆš</td><td></td><td></td></tr><tr><td><strong>awk</strong></td><td>âˆš</td><td></td><td>awkæ˜¯æ”¯æŒè¯¥è¯­æ³•çš„ï¼Œåªæ˜¯è¦åœ¨å‘½ä»¤è¡ŒåŠ å…¥<code>--posix</code> or <code>--re-interval</code>å‚æ•°å³å¯ï¼Œå¯è§man awkä¸­çš„ r{n,m}</td><td>âˆš</td></tr><tr><td><strong>sed</strong></td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td></td></tr><tr><td><strong>delphi</strong></td><td>âˆš</td><td>âˆš</td><td></td><td>âˆš</td></tr><tr><td><strong>python</strong></td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td><strong>java</strong></td><td>âˆš</td><td>âˆš</td><td>âˆš</td><td>âˆš</td></tr><tr><td><strong>javascript</strong></td><td>âˆš</td><td>âˆš</td><td></td><td>âˆš</td></tr><tr><td><strong>php</strong></td><td>âˆš</td><td>âˆš</td><td></td><td></td></tr><tr><td><strong>perl</strong></td><td>âˆš</td><td>âˆš</td><td></td><td>âˆš</td></tr><tr><td><strong>C#</strong></td><td>âˆš</td><td></td><td></td><td>âˆš</td></tr></tbody></table><h1 id="shellæ­£åˆ™"><a href="#shellæ­£åˆ™" class="headerlink" title="shellæ­£åˆ™"></a>shellæ­£åˆ™</h1><p>å­—ç¬¦åŒ¹é…ã€åŒ¹é…æ¬¡æ•°ã€ä½ç½®é”šå®šã€åˆ†ç»„  </p><table><thead><tr><th align="left">è¡¨è¾¾å¼</th><th align="left">å«ä¹‰</th></tr></thead><tbody><tr><td align="left"><code>.</code></td><td align="left">åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦</td></tr><tr><td align="left"><code>[]</code></td><td align="left">åŒ¹é…æŒ‡å®šèŒƒå›´å†…çš„ä»»æ„å•ä¸ªå­—ç¬¦</td></tr><tr><td align="left"><code>[^]</code></td><td align="left">åŒ¹é…æŒ‡å®šèŒƒå›´å¤–çš„ä»»æ„å­—ç¬¦</td></tr><tr><td align="left"><code>[:blank:]</code></td><td align="left">ç©ºç™½å­—ç¬¦ï¼ˆç©ºæ ¼å’Œåˆ¶è¡¨ç¬¦ï¼‰</td></tr><tr><td align="left"><code>[:punct:]</code></td><td align="left">æ ‡ç‚¹ç¬¦å·</td></tr><tr><td align="left"><code>*</code></td><td align="left">åŒ¹é…å‰é¢å­—ç¬¦ä»»æ„æ¬¡ï¼ŒåŒ…æ‹¬0æ¬¡å’Œå°½å¯èƒ½é•¿çš„åŒ¹é…</td></tr><tr><td align="left"><code>.*</code></td><td align="left">ä»»æ„å­—ç¬¦ä»»æ„æ¬¡</td></tr><tr><td align="left"><code>\?</code></td><td align="left">åŒ¹é…å‰é¢çš„å­—ç¬¦0æˆ–1æ¬¡</td></tr><tr><td align="left"><code>\+</code></td><td align="left">åŒ¹é…å‰é¢çš„å­—ç¬¦1æ¬¡ä»¥ä¸Š</td></tr><tr><td align="left"><code>\&#123;nï¼Œm\&#125;</code></td><td align="left">åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘næ¬¡è‡³å¤šmæ¬¡</td></tr><tr><td align="left"><code>\&#123;n\&#125;</code></td><td align="left">åŒ¹é…å‰é¢çš„å­—ç¬¦næ¬¡</td></tr><tr><td align="left"><code>\&#123;,n\&#125;</code></td><td align="left">åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å¤šnæ¬¡</td></tr><tr><td align="left"><code>\&#123;n,\&#125;</code></td><td align="left">åŒ¹é…å‰é¢çš„å­—ç¬¦è‡³å°‘næ¬¡</td></tr><tr><td align="left"><code>^</code></td><td align="left">è¡Œé¦–é”šå®š</td></tr><tr><td align="left"><code>$</code></td><td align="left">è¡Œå°¾é”šå®š</td></tr><tr><td align="left"><code>\&lt;</code></td><td align="left">è¯é¦–é”šå®š</td></tr><tr><td align="left"><code>\&gt;</code></td><td align="left">è¯å°¾é”šå®š</td></tr><tr><td align="left"><code>^$</code></td><td align="left">ç©ºè¡Œ</td></tr><tr><td align="left"><code>^[[:space:]]*$</code></td><td align="left">ç©ºç™½è¡Œ</td></tr></tbody></table><h2 id="åˆ†ç»„"><a href="#åˆ†ç»„" class="headerlink" title="åˆ†ç»„"></a>åˆ†ç»„</h2><table><thead><tr><th align="left">åˆ†ç»„</th><th align="left">å«ä¹‰</th></tr></thead><tbody><tr><td align="left"><code>\(\)</code></td><td align="left">å°†ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦æ†ç»‘åœ¨ä¸€èµ·ï¼Œå½“ä½œä¸€ä¸ªæ•´ä½“è¿›è¡Œå¤„ç†</td></tr><tr><td align="left"><code>\1</code></td><td align="left">åå‘å¼•ç”¨ï¼šå¼•ç”¨å‰é¢çš„åˆ†ç»„æ‹¬å·ä¸­çš„æ¨¡å¼æ‰€åŒ¹é…çš„å­—ç¬¦ï¼ˆè€Œéæ¨¡å¼æœ¬èº«ï¼‰</td></tr><tr><td align="left"><code>[[:alnum:]]</code></td><td align="left">æ–‡å­—æ•°å­—å­—ç¬¦</td></tr><tr><td align="left"><code>[[:alpha:]]</code></td><td align="left">æ–‡å­—å­—ç¬¦</td></tr><tr><td align="left"><code>[[:digit:]]</code></td><td align="left">æ•°å­—å­—ç¬¦</td></tr><tr><td align="left"><code>[[:graph:]]</code></td><td align="left">éç©ºå­—ç¬¦ï¼ˆéç©ºæ ¼ï¼Œéæ§åˆ¶å­—ç¬¦ï¼‰</td></tr><tr><td align="left"><code>[[:lower:]]</code></td><td align="left">å°å†™å­—ç¬¦</td></tr><tr><td align="left"><code>[[:cntrl:]]</code></td><td align="left">æ§åˆ¶å­—ç¬¦</td></tr><tr><td align="left"><code>[[:print:]]</code></td><td align="left">éç©ºå­—ç¬¦ï¼ˆåŒ…æ‹¬ç©ºæ ¼ï¼‰</td></tr><tr><td align="left"><code>[[:punct:]]</code></td><td align="left">æ ‡ç‚¹ç¬¦å·</td></tr><tr><td align="left"><code>[[:space:]]</code></td><td align="left">æ‰€æœ‰ç©ºç™½å­—ç¬¦ï¼ˆæ–°è¡Œï¼Œç©ºæ ¼ï¼Œåˆ¶è¡¨ç¬¦ï¼‰</td></tr><tr><td align="left"><code>[[:upper:]]</code></td><td align="left">å¤§å†™å­—ç¬¦</td></tr><tr><td align="left"><code>[[:xdigit:]]</code></td><td align="left">åå…­è¿›åˆ¶æ•°å­—ï¼ˆ0-9ï¼Œa-fï¼ŒA-Fï¼‰</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitä»“åº“</title>
      <link href="/posts/3680.html"/>
      <url>/posts/3680.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="éœ€æ±‚ï¼š"><a href="#éœ€æ±‚ï¼š" class="headerlink" title="éœ€æ±‚ï¼š"></a>éœ€æ±‚ï¼š</h1><p>&emsp;&emsp;hexoæ­å»ºä¸ªäººç½‘ç«™ï¼Œä½¿ç”¨OSS+CDNåŠ é€Ÿã€‚ï¼ˆæ¶‰åŠåˆ°åŸŸåå¤‡æ¡ˆï¼ˆåˆæ¶‰åŠåˆ°æœåŠ¡å™¨è´­ä¹°ï¼‰ã€å› ä¸ºè´­ä¹°äº†ECSæ‰“ç®—åˆ©ç”¨ä¸€ä¸‹åšGitä»“åº“ï¼Œåšwebè®¿é—®ï¼‰  </p><p>é˜¿é‡Œäº‘å¤‡æ¡ˆå¿…èŠ±é’±ï¼å¤‡æ¡ˆå…è´¹ï¼ŒæœåŠ¡å™¨è¦é’±å…·ä½“çœ‹ä¸‹å›¾ï¼š<br><img src="/medias/drawing-bed/git/0.jpg">  </p><p>ä¹°äº†ä¸€ä¸ªæœ€ä¾¿å®œçš„æœåŠ¡å™¨102å…ƒ/å¹´ï¼Œå¥½åƒæœ‰99å…ƒ/å¹´çš„ï¼ŒåŸŸåwujiops.cné¦–å¹´29å…ƒ/å¹´ï¼Œç»­è´¹39å…ƒ/å¹´  </p><p>å¤‡æ¡ˆæˆæœ¬ï¼š102+29=131å…ƒ  </p><p>ä»¥åèŠ±è´¹ï¼š39+OSS+CDNâ‰ˆ100å·¦å³ï¼Œé¢„ç®—è¶…è¿‡300å…ƒ/å¹´ï¼Œæ‰“ç®—ç”¨GitHub pages+å…è´¹CDNï¼Œå¹´è´¹0å…ƒã€‚  </p><p>æ¥ç€ä»‹ç»gitä»“åº“æ­å»ºæƒ…å†µï¼ŒåŠä¸Šçº¿  </p><h1 id="ç³»ç»Ÿæƒ…å†µï¼š"><a href="#ç³»ç»Ÿæƒ…å†µï¼š" class="headerlink" title="ç³»ç»Ÿæƒ…å†µï¼š"></a>ç³»ç»Ÿæƒ…å†µï¼š</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># ç³»ç»Ÿç‰ˆæœ¬</span><span class="token punctuation">[</span>root@www opt<span class="token punctuation">]</span><span class="token comment"># cat /etc/redhat-release </span>CentOS Linux release <span class="token number">8.1</span>.1911 <span class="token punctuation">(</span>Core<span class="token punctuation">)</span> <span class="token comment"># yumæº</span><span class="token punctuation">[</span>root@www yum.repos.d<span class="token punctuation">]</span><span class="token comment"># cat CentOS-Base.repo </span><span class="token comment"># ...æ³¨é‡Šçœç•¥</span><span class="token punctuation">[</span>BaseOS<span class="token punctuation">]</span><span class="token assign-left variable">name</span><span class="token operator">=</span>CentOS-<span class="token variable">$releasever</span> - Base<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://mirrors.cloud.aliyuncs.com/<span class="token variable">$contentdir</span>/<span class="token variable">$releasever</span>/BaseOS/<span class="token variable">$basearch</span>/os/<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span><span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span><span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centosofficial<span class="token comment"># epelæº</span><span class="token punctuation">[</span>root@www yum.repos.d<span class="token punctuation">]</span><span class="token comment"># cat CentOS-epel.repo </span><span class="token punctuation">[</span>epel<span class="token punctuation">]</span><span class="token assign-left variable">name</span><span class="token operator">=</span>Extra Packages <span class="token keyword">for</span> Enterprise Linux <span class="token number">8</span> - <span class="token variable">$basearch</span><span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://mirrors.cloud.aliyuncs.com/epel/8/Everything/<span class="token variable">$basearch</span><span class="token assign-left variable">failovermethod</span><span class="token operator">=</span>priority<span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span><span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span><span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-EPEL-8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="è½¯ä»¶å®‰è£…"><a href="#è½¯ä»¶å®‰è£…" class="headerlink" title="è½¯ä»¶å®‰è£…"></a>è½¯ä»¶å®‰è£…</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># å‡ä¸ºyumå®‰è£…</span><span class="token punctuation">[</span>root@www ~<span class="token punctuation">]</span><span class="token comment"># yum -y install httpd vim git</span><span class="token punctuation">[</span>root@www ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable httpd</span><span class="token punctuation">[</span>root@www ~<span class="token punctuation">]</span><span class="token comment"># systemctl start httpd</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="gitä»“åº“"><a href="#gitä»“åº“" class="headerlink" title="gitä»“åº“"></a>gitä»“åº“</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@www ~<span class="token punctuation">]</span><span class="token comment"># cd /opt/</span><span class="token punctuation">[</span>root@www opt<span class="token punctuation">]</span><span class="token comment"># git init --bare wujiops.git</span><span class="token punctuation">[</span>root@www opt<span class="token punctuation">]</span><span class="token comment"># ls</span>wujiops.git<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æŠ¥é”™"><a href="#æŠ¥é”™" class="headerlink" title="æŠ¥é”™"></a>æŠ¥é”™</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> commit -m <span class="token string">"1"</span><span class="token comment">#    git config --global --edit</span><span class="token comment">#    git config --global user.name "Your Name"</span><span class="token comment">#    git config --global user.email you@example.com</span><span class="token function">git</span> config --global --edit   <span class="token comment"># æ‰§è¡Œï¼Œè®¾ç½®å…¨å±€é…ç½®</span><span class="token comment"># æˆ–è€…æ‰§è¡Œä¸‹é¢ä¸¤ä¸ªå‘½ä»¤</span><span class="token comment"># git config --global user.name "Your Name"   # æäº¤è€…å§“å</span><span class="token comment"># git config --global user.email you@example.com   # æäº¤è€…é‚®ç®±</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æœ¬åœ°ä»“åº“è¿æ¥è¿œç¨‹ä»“åº“"><a href="#æœ¬åœ°ä»“åº“è¿æ¥è¿œç¨‹ä»“åº“" class="headerlink" title="æœ¬åœ°ä»“åº“è¿æ¥è¿œç¨‹ä»“åº“"></a>æœ¬åœ°ä»“åº“è¿æ¥è¿œç¨‹ä»“åº“</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> remote <span class="token function">add</span> origin https://xxx.git   <span class="token comment"># ssh://xxx.gitï¼Œæœ‰äº›ä»“åº“æ²¡æœ‰.gitåç¼€</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="SSHå…å¯†ç™»å½•"><a href="#SSHå…å¯†ç™»å½•" class="headerlink" title="SSHå…å¯†ç™»å½•"></a>SSHå…å¯†ç™»å½•</h2><p><img src="/medias/drawing-bed/git/1.jpg"><br>&emsp;&emsp;æŒ‡æ˜ECSæœåŠ¡å™¨IPåœ°å€å’Œç«¯å£  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ ssh-copy-id root@*.*.*.*: -p ***<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="æœ¬åœ°ä¸Šä¼ "><a href="#æœ¬åœ°ä¸Šä¼ " class="headerlink" title="æœ¬åœ°ä¸Šä¼ "></a>æœ¬åœ°ä¸Šä¼ </h1><pre class="line-numbers language-yml" data-language="yml"><code class="language-yml"><span class="token key atrule">repository</span><span class="token punctuation">:</span> ssh<span class="token punctuation">:</span>//root@<span class="token important">*.*.*.*:***/opt/wujiops.git</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="æœåŠ¡å™¨è·å–"><a href="#æœåŠ¡å™¨è·å–" class="headerlink" title="æœåŠ¡å™¨è·å–"></a>æœåŠ¡å™¨è·å–</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@www www<span class="token punctuation">]</span><span class="token comment"># rm -fr html</span><span class="token punctuation">[</span>root@www www<span class="token punctuation">]</span><span class="token comment"># git clone ssh://root@localhost:xxx/opt/wujiops.git html</span><span class="token punctuation">[</span>root@www www<span class="token punctuation">]</span><span class="token comment"># cd html/</span><span class="token punctuation">[</span>root@www html<span class="token punctuation">]</span><span class="token comment"># ls</span><span class="token number">404</span>.html  archives  categories  err          friends  index.html  lanmp  medias  other   page    search.xml  wu-ji-opsabout     atom.xml  css         favicon.png  hadoop   js          libs   notes   others  python  tags<span class="token punctuation">[</span>root@www html<span class="token punctuation">]</span><span class="token comment"># git pull</span>Already up to date.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> others </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> git </tag>
            
            <tag> ç§æœ‰ä»“åº“ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kylinæ­å»ºæŠ¥é”™</title>
      <link href="/posts/abbb.html"/>
      <url>/posts/abbb.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>ä¿®æ”¹hdfsç”¨æˆ·ä¸ºroot,hiveå¯¹rootæˆæƒ<br>å¯åŠ¨apache-kylinæŠ¥é”™:<br><code>&lt;font color=red&gt; Caused by: java.lang.ClassNotFoundException: org.apache.commons.configuration.ConfigurationException&lt;/font&gt;</code><br>è§£å†³:å°†commons-configuration-1.6.jarå¤åˆ¶åˆ°kylin/lib/ç›®å½•ä¸‹é¢å³å¯</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@client2 logs<span class="token punctuation">]</span><span class="token comment"># find / -name commons-configuration-*.jar</span>/var/lib/ambari-agent/cred/lib/commons-configuration-1.6.jar/usr/hdp/3.1.0.0-78/ranger-hdfs-plugin/install/lib/commons-configuration-1.10.jar/usr/hdp/3.1.0.0-78/ranger-yarn-plugin/install/lib/commons-configuration-1.10.jar/usr/hdp/3.1.0.0-78/hbase/lib/atlas-hbase-plugin-impl/commons-configuration-1.10.jar/usr/hdp/3.1.0.0-78/ranger-hbase-plugin/install/lib/commons-configuration-1.10.jar/usr/hdp/3.1.0.0-78/atlas/hook/hbase/atlas-hbase-plugin-impl/commons-configuration-1.10.jar/usr/hdp/3.1.0.0-78/atlas/hook/hive/atlas-hive-plugin-impl/commons-configuration-1.10.jar/usr/hdp/3.1.0.0-78/ranger-atlas-plugin/install/lib/commons-configuration-1.10.jar/usr/hdp/3.1.0.0-78/kafka/libs/ranger-kafka-plugin-impl/commons-configuration-1.10.jar/usr/hdp/3.1.0.0-78/ranger-kafka-plugin/install/lib/commons-configuration-1.10.jar/usr/hdp/3.1.0.0-78/ranger-kafka-plugin/lib/ranger-kafka-plugin-impl/commons-configuration-1.10.jar/usr/hdp/3.1.0.0-78/ranger-hive-plugin/install/lib/commons-configuration-1.10.jar<span class="token comment">#/usr/hdp/3.1.0.0-78/kylin/lib/commons-configuration-1.6.jar</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ­å»ºæ­¥éª¤:<br>ä¸‹è½½apache-kylin-3.0.1-bin-hadoop3.tar.gz<br>é…ç½®ç¯å¢ƒå˜é‡</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># cat /etc/profile</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token builtin class-name">export</span> <span class="token assign-left variable">KYLIN_HOME</span><span class="token operator">=</span>/usr/hdp/3.1.0.0-78/kylin<span class="token builtin class-name">export</span> <span class="token assign-left variable">NVM_NODEJS_ORG_MIRROR</span><span class="token operator">=</span>https://npm.taobao.org/mirrors/node<span class="token builtin class-name">export</span> <span class="token assign-left variable">NVM_IOJS_ORG_MIRROR</span><span class="token operator">=</span>https://npm.taobao.org/mirrors/iojs<span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/usr/hdp/3.1.0.0-78/hadoop<span class="token builtin class-name">export</span> <span class="token assign-left variable">SPARK_HOME</span><span class="token operator">=</span>/usr/hdp/3.1.0.0-78/spark2<span class="token builtin class-name">export</span> <span class="token assign-left variable">KYLIN_CONF</span><span class="token operator">=</span>/usr/hdp/3.1.0.0-78/kylin/conf<span class="token builtin class-name">export</span> <span class="token assign-left variable">ZOOKEEPER_HOME</span><span class="token operator">=</span>/usr/hdp/3.1.0.0-78/zookeeper<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$MAVEN_HOME</span>/bin:<span class="token variable">$KYLIN_HOME</span>/bin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¯åŠ¨ kylin.sh start å³å¯</p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kylin </tag>
            
            <tag> æŠ¥é”™ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è™šæ‹Ÿæœºå¯åŠ¨å¤±è´¥</title>
      <link href="/posts/7bd9.html"/>
      <url>/posts/7bd9.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>&emsp;&emsp;åœ¨å¯ç”¨äº†Hyper-Vçš„Windows 10ä¸»æœºä¸Šå¯åŠ¨VMware Workstationä¸­çš„è™šæ‹Ÿæœºã€‚ä¼šçœ‹åˆ°ç±»ä¼¼äºä»¥ä¸‹å†…å®¹çš„é”™è¯¯ï¼š<br>&emsp;&emsp;VMware Workstationå’ŒDevice / Credential Guardä¸å…¼å®¹ã€‚ç¦ç”¨Device / Credential Guardåï¼Œå¯ä»¥è¿è¡ŒVMware Workstationã€‚<br>åŸå› ï¼š<br>&emsp;&emsp;1ã€å‡ºç°æ­¤é—®é¢˜çš„åŸå› æ˜¯Device Guardæˆ–Credential Guardä¸Workstationä¸å…¼å®¹ã€‚<br>&emsp;&emsp;2ã€Windowsç³»ç»Ÿçš„Hyper-Vä¸å…¼å®¹å¯¼è‡´ã€‚<br><strong>è§£å†³æ–¹æ³•ï¼š</strong><br>æœ‰çƒ­å¿ƒç½‘å‹åé¦ˆï¼š1909ç‰ˆæœ¬çš„winç”¨ä¸äº†å¾ˆæœ‰å¯èƒ½æ˜¯æ²™ç›’æ²¡å…³ï¼ŒæŠŠæ²™ç›’åŠŸèƒ½å…³äº†é‡å¯ä¸€ä¸‹å°±å¥½Â ï¼ˆæˆ‘æ²¡è¯•è¿‡ï¼ï¼‰<br>æ­¥éª¤ä¸€ï¼šç¦ç”¨Device Guardæˆ–Credential Guardï¼š<br>&emsp;&emsp;ç¦ç”¨ç”¨äºå¯ç”¨Credential Guardçš„ç»„ç­–ç•¥è®¾ç½®ã€‚<br>&emsp;&emsp;åœ¨ä¸»æœºæ“ä½œç³»ç»Ÿä¸Šï¼Œå³é”®å•å‡»â€<strong>å¼€å§‹</strong>â€œ&gt;Â â€œ<strong>è¿è¡Œ</strong>â€œï¼Œé”®å…¥gpedit.mscï¼Œç„¶åå•å‡»â€<strong>ç¡®å®š</strong>â€œã€‚æœ¬åœ°ç»„ç­–ç•¥ç¼–è¾‘å™¨æ‰“å¼€ã€‚<br>&emsp;&emsp;è½¬è‡³<strong>æœ¬åœ°è®¡ç®—æœºç­–ç•¥</strong>Â &gt;Â <strong>è®¡ç®—æœºé…ç½®</strong>Â &gt;Â <strong>ç®¡ç†æ¨¡æ¿</strong>&gt;<strong>ç³»ç»Ÿ</strong>Â &gt;<strong>Device Guard</strong>ï¼ˆæˆ–è€…æ˜¯ï¼šÂ <strong>è®¾å¤‡é˜²æŠ¤</strong>ï¼‰Â &gt;Â <strong>å¯ç”¨åŸºäºè™šæ‹ŸåŒ–çš„å®‰å…¨æ€§</strong>ã€‚<br>é€‰æ‹©<strong>å·²ç¦ç”¨</strong>ã€‚<br>&emsp;&emsp;è½¬åˆ°â€<strong>æ§åˆ¶é¢æ¿</strong>â€œ&gt;â€<strong>å¸è½½ç¨‹åº</strong>â€œ&gt;â€<strong>æ‰“å¼€æˆ–å…³é—­WindowsåŠŸèƒ½</strong>â€œä»¥å…³é—­Hyper-Vã€‚<br>é€‰æ‹©<strong>ä¸é‡å¯</strong>ã€‚<br>æ­¥éª¤äºŒï¼šé€šè¿‡å‘½ä»¤å…³é—­Hyper-Vï¼ˆæ§åˆ¶é¢æ¿å…³é—­Hyper-Vèµ·ä¸åˆ°å†³å®šæ€§ä½œç”¨ï¼Œè¦å½»åº•å…³é—­Hyper-Vï¼‰Â <br>&emsp;&emsp;<strong>ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒWindows Powershell (ç®¡ç†å‘˜)ï¼ˆWindowsé”®+Xï¼‰</strong><br>&emsp;&emsp;è¿è¡Œä¸‹é¢å‘½ä»¤å¹¶é‡å¯ç”µè„‘ï¼š  </p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">bcdedit &#x2F;set hypervisorlaunchtype off<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~ </p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŠ¥é”™ </tag>
            
            <tag> VMware </tag>
            
            <tag> è™šæ‹Ÿæœº </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ç¨‹åºè¿æ¥mongodbè¶…æ—¶</title>
      <link href="/posts/cf89.html"/>
      <url>/posts/cf89.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>ä¸»è¦æ˜¯ä»‹ç»è¿ç»´ç»éªŒ  </p><p>å› ä¸ºè¿ç»´çš„æ—¶å€™ä¸çŸ¥é“æ˜¯è°æ­å»ºçš„ç¯å¢ƒï¼Œæ›´ä¸çŸ¥åˆ°å®‰è£…çš„è½¯ä»¶æ–¹å¼æ˜¯ä»€ä¹ˆæ ·çš„ã€‚  </p><p>æ•…è®°å½•æ­¤æ¬¡æ’é”™è¿‡ç¨‹ã€‚   </p><p>è·å–åˆ°ç¨‹åºçš„æ—¥å¿—ä¿¡æ¯å¤§è‡´å¦‚ä¸‹ï¼š  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2020</span>-05-06 <span class="token number">10</span>:14:16.470  INFO <span class="token number">16447</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> org.mongodb.driver.cluster               <span class="token builtin class-name">:</span> Cluster created with settings <span class="token punctuation">&#123;</span>hosts<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">192.168</span>.1.113:8081<span class="token punctuation">]</span>, <span class="token assign-left variable">mode</span><span class="token operator">=</span>SINGLE, <span class="token assign-left variable">requiredClusterType</span><span class="token operator">=</span>UNKNOWN, <span class="token assign-left variable">serverSelectionTimeout</span><span class="token operator">=</span><span class="token string">'30000 ms'</span>, <span class="token assign-left variable">maxWaitQueueSize</span><span class="token operator">=</span><span class="token number">500</span><span class="token punctuation">&#125;</span><span class="token number">2020</span>-05-06 <span class="token number">10</span>:14:16.565  INFO <span class="token number">16447</span> --- <span class="token punctuation">[</span>.168.1.113:8081<span class="token punctuation">]</span> org.mongodb.driver.cluster               <span class="token builtin class-name">:</span> Exception <span class="token keyword">in</span> monitor thread <span class="token keyword">while</span> connecting to server <span class="token number">192.168</span>.1.113:8081com.mongodb.MongoSocketOpenException: Exception opening socketat com.mongodb.internal.connection.SocketStream.open<span class="token punctuation">(</span>SocketStream.java:67<span class="token punctuation">)</span> ~<span class="token punctuation">[</span>mongodb-driver-core-3.8.2.jar<span class="token operator">!</span>/:na<span class="token punctuation">]</span>at com.mongodb.internal.connection.InternalStreamConnection.open<span class="token punctuation">(</span>InternalStreamConnection.java:126<span class="token punctuation">)</span> ~<span class="token punctuation">[</span>mongodb-driver-core-3.8.2.jar<span class="token operator">!</span>/:na<span class="token punctuation">]</span>at com.mongodb.internal.connection.DefaultServerMonitor<span class="token variable">$ServerMonitorRunnable</span>.run<span class="token punctuation">(</span>DefaultServerMonitor.java:117<span class="token punctuation">)</span> ~<span class="token punctuation">[</span>mongodb-driver-core-3.8.2.jar<span class="token operator">!</span>/:na<span class="token punctuation">]</span>at java.lang.Thread.run<span class="token punctuation">(</span>Thread.java:748<span class="token punctuation">)</span> <span class="token punctuation">[</span>na:1.8.0_151<span class="token punctuation">]</span>Caused by: java.net.ConnectException: æ‹’ç»è¿æ¥ <span class="token punctuation">(</span>Connection refused<span class="token punctuation">)</span>at java.net.PlainSocketImpl.socketConnect<span class="token punctuation">(</span>Native Method<span class="token punctuation">)</span> ~<span class="token punctuation">[</span>na:1.8.0_151<span class="token punctuation">]</span>at java.net.AbstractPlainSocketImpl.doConnect<span class="token punctuation">(</span>AbstractPlainSocketImpl.java:350<span class="token punctuation">)</span> ~<span class="token punctuation">[</span>na:1.8.0_151<span class="token punctuation">]</span>at java.net.AbstractPlainSocketImpl.connectToAddress<span class="token punctuation">(</span>AbstractPlainSocketImpl.java:206<span class="token punctuation">)</span> ~<span class="token punctuation">[</span>na:1.8.0_151<span class="token punctuation">]</span>at java.net.AbstractPlainSocketImpl.connect<span class="token punctuation">(</span>AbstractPlainSocketImpl.java:188<span class="token punctuation">)</span> ~<span class="token punctuation">[</span>na:1.8.0_151<span class="token punctuation">]</span>at java.net.SocksSocketImpl.connect<span class="token punctuation">(</span>SocksSocketImpl.java:392<span class="token punctuation">)</span> ~<span class="token punctuation">[</span>na:1.8.0_151<span class="token punctuation">]</span>at java.net.Socket.connect<span class="token punctuation">(</span>Socket.java:589<span class="token punctuation">)</span> ~<span class="token punctuation">[</span>na:1.8.0_151<span class="token punctuation">]</span>at com.mongodb.internal.connection.SocketStreamHelper.initialize<span class="token punctuation">(</span>SocketStreamHelper.java:64<span class="token punctuation">)</span> ~<span class="token punctuation">[</span>mongodb-driver-core-3.8.2.jar<span class="token operator">!</span>/:na<span class="token punctuation">]</span>at com.mongodb.internal.connection.SocketStream.open<span class="token punctuation">(</span>SocketStream.java:62<span class="token punctuation">)</span> ~<span class="token punctuation">[</span>mongodb-driver-core-3.8.2.jar<span class="token operator">!</span>/:na<span class="token punctuation">]</span><span class="token punctuation">..</span>. <span class="token number">3</span> common frames omitted<span class="token number">2020</span>-05-06 <span class="token number">10</span>:14:17.216  INFO <span class="token number">16447</span> --- <span class="token punctuation">[</span>           main<span class="token punctuation">]</span> org.mongodb.driver.cluster               <span class="token builtin class-name">:</span> Cluster description not yet available. Waiting <span class="token keyword">for</span> <span class="token number">30000</span> ms before timing out<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä»ä¸Šé¢æ—¥å¿—ä¸­æå–å…³é”®è¯ â€œtimeout=30000â€  â€œ192.168.1.113:8081â€  â€œæ‹’ç»è¿æ¥â€  â€œmongodb-driver-core-3.8.2.jar!â€  </p><p>åˆæ­¥æ€€ç–‘mongodbæŒ‚æ‰ï¼ŒIPç«¯å£ä¸º192.168.1.113:8081  </p><p>ç™»å½•ä¸»æœºï¼ŒæŸ¥è¯¢å†å²å‘½ä»¤å‘ç°æ˜¯docker pullçš„mongoçš„é•œåƒ  </p><p>dockerè¿è¡Œé•œåƒ  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl restart dockerdocker imagesdocker run --name mongo -p <span class="token number">27017</span>:27017 -d mongo --auth   <span class="token comment"># è¡¥å…¨</span>docker <span class="token function">ps</span> -adocker start 64ca<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ç«¯å£ä¸å¯¹ï¼Œå¤„ç†ç«¯å£é—®é¢˜  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /var/lib/docker/containers/64ca58ae81<span class="token punctuation">..</span>.ddfc992ac212/   <span class="token comment"># é•œåƒID</span><span class="token function">vim</span> hostconfig.json<span class="token punctuation">..</span>.<span class="token string">"PortBindings"</span>:<span class="token punctuation">&#123;</span><span class="token string">"27017/tcp"</span>:<span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">"HostIp    "</span><span class="token builtin class-name">:</span><span class="token string">""</span>,<span class="token string">"HostPort"</span><span class="token builtin class-name">:</span><span class="token string">"8081"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span>,<span class="token string">"HostPort"</span><span class="token builtin class-name">:</span><span class="token string">"8081"</span>è¿™é‡Œæ˜¯å®¿ä¸»æœºç«¯å£<span class="token string">"27017/tcp"</span>è¿™é‡Œæ˜¯å®¹å™¨ç«¯å£<span class="token punctuation">..</span>.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>æ”¹å®Œé‡å¯dockerå’Œå®¹å™¨</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl restart dockerdocker stop <span class="token number">64</span>docker start <span class="token number">64</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>ä¸»æœºå†æ¬¡å¯åŠ¨ç¨‹åº</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token number">2020</span>-05-06 <span class="token number">10</span>:23:19.244  INFO <span class="token number">18145</span> --- <span class="token punctuation">[</span>.168.1.113:8081<span class="token punctuation">]</span> org.mongodb.driver.cluster               <span class="token builtin class-name">:</span> Monitor thread successfully connected to server with description ServerDescription<span class="token punctuation">&#123;</span>address<span class="token operator">=</span><span class="token number">192.168</span>.1.113:8081, <span class="token assign-left variable">type</span><span class="token operator">=</span>STANDALONE, <span class="token assign-left variable">state</span><span class="token operator">=</span>CONNECTED, <span class="token assign-left variable">ok</span><span class="token operator">=</span>true, <span class="token assign-left variable">version</span><span class="token operator">=</span>ServerVersion<span class="token punctuation">&#123;</span>versionList<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">4</span>, <span class="token number">2</span>, <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span>, <span class="token assign-left variable">minWireVersion</span><span class="token operator">=</span><span class="token number">0</span>, <span class="token assign-left variable">maxWireVersion</span><span class="token operator">=</span><span class="token number">8</span>, <span class="token assign-left variable">maxDocumentSize</span><span class="token operator">=</span><span class="token number">16777216</span>, <span class="token assign-left variable">logicalSessionTimeoutMinutes</span><span class="token operator">=</span><span class="token number">30</span>, <span class="token assign-left variable">roundTripTimeNanos</span><span class="token operator">=</span><span class="token number">5891523</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>æ˜¾ç¤ºmongodbè¿æ¥ä¸Šäº†,ç¨‹åºä¹Ÿæ­£å¸¸è¿è¡ŒğŸ˜˜  </p><p>äº‹å  </p><p>äº”ä¸€æ”¾å‡å…¬å¸æµ‹è¯•æœåŠ¡å™¨å…³æœºï¼Œä¸Šç­åæ¢å¤ï¼Œå¯åŠ¨ç¨‹åºå‘ç°ä¸€ä¸ªç¨‹åºä¸€ç›´å¯åŠ¨å¤±è´¥ï¼Œè°ƒæŸ¥åŸå› æ‰æœ‰çš„ä¸Šæ–‡æ‰€è¿°ã€‚  </p><p><strong>è¡¥å……ï¼š</strong>  </p><p>å¦‚æœå®¹å™¨å†…ç«¯å£ä»æ²¡æœ‰æš´éœ²ï¼Œéœ€è¦åœ¨ä¿®æ”¹config.v2.json  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> config.v2.json<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>åœ¨ config.v2.json é‡Œé¢æ·»åŠ ä¸€ä¸ªé…ç½®é¡¹  </p><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"ExposedPorts"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token property">"27017/tcp"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å°†è¿™ä¸ªé…ç½®é¡¹æ·»åŠ åˆ° â€œTtyâ€ å‰é¢å³å¯  </p><p>æœ€åé‡å¯dockerå’Œå®¹å™¨ï¼Œä½¿ç”¨docker pséªŒè¯ç«¯å£æ˜ å°„  </p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> æŠ¥é”™ </tag>
            
            <tag> mongo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Nacos æ³¨å†Œä¸­å¿ƒ</title>
      <link href="/posts/ac94.html"/>
      <url>/posts/ac94.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="å•æœºç‰ˆ"><a href="#å•æœºç‰ˆ" class="headerlink" title="å•æœºç‰ˆ"></a>å•æœºç‰ˆ</h1><p>&emsp;&emsp;ä¸‹è½½åœ°å€ï¼š<a href="https://github.com/alibaba/nacos/releases" title="download new">nacos</a></p><h2 id="è§£å‹è¿è¡Œ"><a href="#è§£å‹è¿è¡Œ" class="headerlink" title="è§£å‹è¿è¡Œ"></a>è§£å‹è¿è¡Œ</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">unzip</span> nacos-server-*.zip æˆ–è€… <span class="token function">tar</span> -xvf nacos-server-*.tar.gz<span class="token builtin class-name">cd</span> nacos<span class="token function">bash</span> bin/startup.sh -m standalone   <span class="token comment"># å•æœºè¿è¡Œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h2><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token attr-name">[root@client</span> <span class="token attr-value">conf]# vi conf/application.properties</span><span class="token attr-name">spring.datasource.platform</span><span class="token punctuation">=</span><span class="token attr-value">mysql</span><span class="token attr-name">db.num</span><span class="token punctuation">=</span><span class="token attr-value">1</span><span class="token attr-name">db.url.0</span><span class="token punctuation">=</span><span class="token attr-value">jdbc:mysql://192.168.1.91:3306/nacos_devtest?characterEncoding=utf8&amp;connectTimeout=1000&amp;socketTimeout=3000&amp;autoReconnect=true</span><span class="token attr-name">db.user</span><span class="token punctuation">=</span><span class="token attr-value">nacos</span><span class="token attr-name">db.password</span><span class="token punctuation">=</span><span class="token attr-value">pass@nacos</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> wujiops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> nacos </tag>
            
            <tag> æ³¨å†Œä¸­å¿ƒ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>phoenixåº”ç”¨</title>
      <link href="/posts/64e5.html"/>
      <url>/posts/64e5.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="Phoenixç®€ä»‹"><a href="#Phoenixç®€ä»‹" class="headerlink" title="Phoenixç®€ä»‹"></a>Phoenixç®€ä»‹</h1><p>Phoenixä½œä¸ºåº”ç”¨å±‚å’ŒHBASEä¹‹é—´çš„ä¸­é—´ä»¶,ä»¥ä¸‹ç‰¹æ€§ä½¿å®ƒåœ¨å¤§æ•°æ®é‡çš„ç®€å•æŸ¥è¯¢åœºæ™¯æœ‰ç€ç‹¬æœ‰çš„ä¼˜åŠ¿</p><ul><li>äºŒçº§ç´¢å¼•æ”¯æŒ(global index + local index)</li><li>ç¼–è¯‘SQLæˆä¸ºåŸç”ŸHBASEçš„å¯å¹¶è¡Œæ‰§è¡Œçš„scan</li><li>åœ¨æ•°æ®å±‚å®Œæˆè®¡ç®—ï¼Œserverç«¯çš„coprocessoræ‰§è¡Œèšåˆ</li><li>ä¸‹æ¨whereè¿‡æ»¤æ¡ä»¶åˆ°serverç«¯çš„scan filterä¸Š</li><li>åˆ©ç”¨ç»Ÿè®¡ä¿¡æ¯ä¼˜åŒ–ã€é€‰æ‹©æŸ¥è¯¢è®¡åˆ’ï¼ˆ5.xç‰ˆæœ¬å°†æ”¯æŒCBOï¼‰</li><li>skip scanåŠŸèƒ½æé«˜æ‰«æé€Ÿåº¦</li></ul><p>ä¸€èˆ¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ç§æ–¹å¼è®¿é—®Phoenix</p><ol><li><p>JDBC API</p></li><li><p>ä½¿ç”¨Pythonç¼–å†™çš„å‘½ä»¤è¡Œå·¥å…·ï¼ˆsqlline, sqlline-thinå’Œpsqlç­‰ï¼‰</p></li><li><p>SQuirrel</p></li></ol><h1 id="ä¸€ã€å‘½ä»¤è¡Œå·¥å…·psqlä½¿ç”¨ç¤ºä¾‹"><a href="#ä¸€ã€å‘½ä»¤è¡Œå·¥å…·psqlä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="ä¸€ã€å‘½ä»¤è¡Œå·¥å…·psqlä½¿ç”¨ç¤ºä¾‹"></a>ä¸€ã€å‘½ä»¤è¡Œå·¥å…·psqlä½¿ç”¨ç¤ºä¾‹</h1><h2 id="1-åˆ›å»ºä¸€ä¸ªå»ºè¡¨çš„sqlè„šæœ¬æ–‡ä»¶us-population-sqlï¼š"><a href="#1-åˆ›å»ºä¸€ä¸ªå»ºè¡¨çš„sqlè„šæœ¬æ–‡ä»¶us-population-sqlï¼š" class="headerlink" title="1.åˆ›å»ºä¸€ä¸ªå»ºè¡¨çš„sqlè„šæœ¬æ–‡ä»¶us_population.sqlï¼š"></a>1.åˆ›å»ºä¸€ä¸ªå»ºè¡¨çš„sqlè„šæœ¬æ–‡ä»¶us_population.sqlï¼š</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> us_population <span class="token punctuation">(</span>    state <span class="token keyword">CHAR</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    city <span class="token keyword">VARCHAR</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    population <span class="token keyword">BIGINT</span>    <span class="token keyword">CONSTRAINT</span> my_pk <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>state<span class="token punctuation">,</span> city<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-åˆ›å»ºcsvæ ¼å¼çš„æ•°æ®æ–‡ä»¶us-population-csvï¼š"><a href="#2-åˆ›å»ºcsvæ ¼å¼çš„æ•°æ®æ–‡ä»¶us-population-csvï¼š" class="headerlink" title="2. åˆ›å»ºcsvæ ¼å¼çš„æ•°æ®æ–‡ä»¶us_population.csvï¼š"></a>2. åˆ›å»ºcsvæ ¼å¼çš„æ•°æ®æ–‡ä»¶us_population.csvï¼š</h2><pre class="line-numbers language-csv" data-language="csv"><code class="language-csv"><span class="token value">NY</span><span class="token punctuation">,</span><span class="token value">New York</span><span class="token punctuation">,</span><span class="token value">8143197</span><span class="token value">CA</span><span class="token punctuation">,</span><span class="token value">Los Angeles</span><span class="token punctuation">,</span><span class="token value">3844829</span><span class="token value">IL</span><span class="token punctuation">,</span><span class="token value">Chicago</span><span class="token punctuation">,</span><span class="token value">2842518</span><span class="token value">TX</span><span class="token punctuation">,</span><span class="token value">Houston</span><span class="token punctuation">,</span><span class="token value">2016582</span><span class="token value">PA</span><span class="token punctuation">,</span><span class="token value">Philadelphia</span><span class="token punctuation">,</span><span class="token value">1463281</span><span class="token value">AZ</span><span class="token punctuation">,</span><span class="token value">Phoenix</span><span class="token punctuation">,</span><span class="token value">1461575</span><span class="token value">TX</span><span class="token punctuation">,</span><span class="token value">San Antonio</span><span class="token punctuation">,</span><span class="token value">1256509</span><span class="token value">CA</span><span class="token punctuation">,</span><span class="token value">San Diego</span><span class="token punctuation">,</span><span class="token value">1255540</span><span class="token value">TX</span><span class="token punctuation">,</span><span class="token value">Dallas</span><span class="token punctuation">,</span><span class="token value">1213825</span><span class="token value">CA</span><span class="token punctuation">,</span><span class="token value">San Jose</span><span class="token punctuation">,</span><span class="token value">912332</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢sqlè„šæœ¬æ–‡ä»¶us-population-queries-sql"><a href="#3-åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢sqlè„šæœ¬æ–‡ä»¶us-population-queries-sql" class="headerlink" title="3. åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢sqlè„šæœ¬æ–‡ä»¶us_population_queries.sql"></a>3. åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢sqlè„šæœ¬æ–‡ä»¶us_population_queries.sql</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">SELECT</span> state <span class="token keyword">as</span> <span class="token string">"State"</span><span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span>city<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"City Count"</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token string">"Population Sum"</span><span class="token keyword">FROM</span> us_population<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> state<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> <span class="token function">sum</span><span class="token punctuation">(</span>population<span class="token punctuation">)</span> <span class="token keyword">DESC</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="4-æ‰§è¡Œpsql-pyå·¥å…·è¿è¡Œsqlè„šæœ¬"><a href="#4-æ‰§è¡Œpsql-pyå·¥å…·è¿è¡Œsqlè„šæœ¬" class="headerlink" title="4. æ‰§è¡Œpsql.pyå·¥å…·è¿è¡Œsqlè„šæœ¬"></a>4. æ‰§è¡Œpsql.pyå·¥å…·è¿è¡Œsqlè„šæœ¬</h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token punctuation">.</span><span class="token operator">/</span>psql<span class="token punctuation">.</span>py <span class="token operator">&lt;</span>your_zookeeper_quorum<span class="token operator">></span> us_population<span class="token punctuation">.</span><span class="token keyword">sql</span> us_population<span class="token punctuation">.</span>csv us_population_queries<span class="token punctuation">.</span><span class="token keyword">sql</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h1 id="äºŒã€JDBC-APIä½¿ç”¨ç¤ºä¾‹"><a href="#äºŒã€JDBC-APIä½¿ç”¨ç¤ºä¾‹" class="headerlink" title="äºŒã€JDBC APIä½¿ç”¨ç¤ºä¾‹"></a>äºŒã€JDBC APIä½¿ç”¨ç¤ºä¾‹</h1><h2 id="1-ä½¿ç”¨Mavenæ„å»ºå·¥ç¨‹æ—¶ï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹ä¾èµ–"><a href="#1-ä½¿ç”¨Mavenæ„å»ºå·¥ç¨‹æ—¶ï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹ä¾èµ–" class="headerlink" title="1. ä½¿ç”¨Mavenæ„å»ºå·¥ç¨‹æ—¶ï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹ä¾èµ–"></a>1. ä½¿ç”¨Mavenæ„å»ºå·¥ç¨‹æ—¶ï¼Œéœ€è¦æ·»åŠ ä»¥ä¸‹ä¾èµ–</h2><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>com.aliyun.phoenix<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>ali-phoenix-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">></span></span>$&#123;version&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-åˆ›å»ºåä¸ºtest-javaçš„æ–‡ä»¶"><a href="#2-åˆ›å»ºåä¸ºtest-javaçš„æ–‡ä»¶" class="headerlink" title="2. åˆ›å»ºåä¸ºtest.javaçš„æ–‡ä»¶"></a>2. åˆ›å»ºåä¸ºtest.javaçš„æ–‡ä»¶</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Connection</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">DriverManager</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">ResultSet</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">SQLException</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">PreparedStatement</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>sql<span class="token punctuation">.</span></span><span class="token class-name">Statement</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> test <span class="token punctuation">&#123;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SQLException</span> <span class="token punctuation">&#123;</span>        <span class="token class-name">Statement</span> stmt <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token class-name">ResultSet</span> rset <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>                <span class="token class-name">Connection</span> con <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token string">"jdbc:phoenix:[zookeeper]"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        stmt <span class="token operator">=</span> con<span class="token punctuation">.</span><span class="token function">createStatement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">"create table test (mykey integer not null primary key, mycolumn varchar)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">"upsert into test values (1,'Hello')"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        stmt<span class="token punctuation">.</span><span class="token function">executeUpdate</span><span class="token punctuation">(</span><span class="token string">"upsert into test values (2,'World!')"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        con<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token class-name">PreparedStatement</span> statement <span class="token operator">=</span> con<span class="token punctuation">.</span><span class="token function">prepareStatement</span><span class="token punctuation">(</span><span class="token string">"select * from test"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        rset <span class="token operator">=</span> statement<span class="token punctuation">.</span><span class="token function">executeQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>rset<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rset<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"mycolumn"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        statement<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        con<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-æ‰§è¡Œtest-java"><a href="#3-æ‰§è¡Œtest-java" class="headerlink" title="3.æ‰§è¡Œtest.java"></a>3.æ‰§è¡Œtest.java</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java">javac test<span class="token punctuation">.</span>javajava <span class="token operator">-</span>cp <span class="token string">"../phoenix-[version]-client.jar:."</span> test<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h1 id="ä»€ä¹ˆæ˜¯SQuirrelï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯SQuirrelï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯SQuirrelï¼Ÿ"></a>ä»€ä¹ˆæ˜¯SQuirrelï¼Ÿ</h1><p><a href="https://yq.aliyun.com/go/articleRenderRedirect?url=http://www.squirrelsql.org/">SQuirreL SQL Client</a>æ˜¯ä¸€ä¸ªå¼€æºå…è´¹è½¯ä»¶, å¯ä»¥é€šè¿‡jdbcå¯¹å¤šç§æ•°æ®åº“è¿›è¡Œå¯è§†åŒ–çš„ç®¡ç†ï¼ŒæŸ¥è¯¢ç­‰ã€‚</p><h1 id="å®‰è£…SQuirrelè®¿é—®Phoenix"><a href="#å®‰è£…SQuirrelè®¿é—®Phoenix" class="headerlink" title="å®‰è£…SQuirrelè®¿é—®Phoenix"></a>å®‰è£…SQuirrelè®¿é—®Phoenix</h1><ol><li>ä¸‹è½½æœ€æ–°çš„<a href="https://yq.aliyun.com/go/articleRenderRedirect?url=http://www.squirrelsql.org/%23installation">SQuirrel</a></li><li>å®‰è£…SQuirrel<br><img src="/medias/drawing-bed/phoenix/0.jpg"></li><li>åœ¨äº‘Hbaseå®˜ç½‘ä¸‹è½½æœ€æ–°ç‰ˆçš„<a href="https://help.aliyun.com/document_detail/53600.html?spm=5176.product49055.6.553.ZkkmG9">phoneix</a>, è§£å‹åå°†phoenix-4.11.0-AliHBaseâ€“client.jaræ‹·è´åˆ°SQuirrelæ ¹ç›®å½•çš„libæ–‡ä»¶å¤¹ä¸‹ã€‚</li><li>å¯åŠ¨SQuirrelï¼Œ å¯ä»¥é€šè¿‡Windows-&gt;View SQuirrel LogsæŸ¥è¯¢è¿è¡Œæ—¥å¿—ã€‚<br><img src="/medias/drawing-bed/phoenix/1.jpg"></li></ol><h1 id="é…ç½®SQuirrelé“¾æ¥Phoenix"><a href="#é…ç½®SQuirrelé“¾æ¥Phoenix" class="headerlink" title="é…ç½®SQuirrelé“¾æ¥Phoenix"></a>é…ç½®SQuirrelé“¾æ¥Phoenix</h1><ol><li>è®¾ç½®Phoenix JDBC DRIVEã€‚ç‚¹å‡»Driversè¿›è¡Œè®¾ç½®ï¼ŒNameé¡¹æ ¹æ®è‡ªå·±éœ€è¦å¡«å†™ï¼ŒWebsite URLå¯ä»¥çœç•¥ï¼Œå…¶ä½™æ ¹æ®å®é™…æƒ…å†µå¡«å†™ã€‚ç„¶åç‚¹å‡»OKç¡®è®¤ã€‚<br><img src="/medias/drawing-bed/phoenix/2.jpg"></li><li>é…ç½®Phoenixé“¾æ¥ã€‚ç‚¹å‡»Aliases, é…ç½®é“¾æ¥ã€‚Nameé¡¹æ ¹æ®è‡ªå·±éœ€è¦å¡«å†™ï¼ŒUsernameå’ŒPasswordæ˜¯è®¿é—®æ•°æ®åº“çš„è´¦æˆ·åå’Œå¯†ç ï¼ˆæ­¤ç¤ºä¾‹ä¸­é“¾æ¥hbaseä¸éœ€è¦ç”¨æˆ·å’Œå¯†ç ï¼Œæ‰€ä»¥è¿™ä¸¤é¡¹ä¸ºç©ºï¼‰ã€‚<br><img src="/medias/drawing-bed/phoenix/3.jpg"></li><li>é“¾æ¥Phoenix<br><img src="/medias/drawing-bed/phoenix/4.jpg"></li></ol><h1 id="åœ¨SQuirrelä¸­å¦‚ä½•é…ç½®Phoenixå‚æ•°"><a href="#åœ¨SQuirrelä¸­å¦‚ä½•é…ç½®Phoenixå‚æ•°" class="headerlink" title="åœ¨SQuirrelä¸­å¦‚ä½•é…ç½®Phoenixå‚æ•°"></a>åœ¨SQuirrelä¸­å¦‚ä½•é…ç½®Phoenixå‚æ•°</h1><p>Phoenixå®¢æˆ·ç«¯å‚æ•°å¯ä»¥é€šè¿‡hbase-site.xmæ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œæˆ‘ä»¬åªéœ€è¦å°†éœ€è¦é…ç½®é¡¹å¡«åœ¨æ­¤æ–‡ä»¶ä¸­ï¼Œå¹¶æ”¾ç½®åœ¨SQuirrelå¯åŠ¨çš„classpathä¸­å°±èƒ½ç”Ÿæ•ˆã€‚</p><p>ä»¥é…ç½®phoenix.force.indexä¸ºä¾‹ï¼š</p><ol><li>åœ¨æœªå¯¹phoenix.force.indexè¿›è¡Œè®¾ç½®æ—¶ï¼Œé»˜è®¤å€¼ä¸ºtrueã€‚é‚£ä¹ˆåœ¨æŸ¥è¯¢ä¸­æŸ¥è¯¢éç´¢å¼•åˆ—æ—¶ä¼šæŠ¥é”™ã€‚<br><img src="/medias/drawing-bed/phoenix/5.jpg"></li><li>åœ¨hbase-site.xmlä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œå¹¶åœ¨SQuirrelæ ¹ç›®å½•çš„libæ–‡ä»¶å¤¹ä¸­åˆ›å»ºconfæ–‡ä»¶å¤¹ï¼Œ å°†hbase-site.xmlç§»åŠ¨è‡³confæ–‡ä»¶å¤¹ä¸‹ï¼Œé‡å¯SQuirrel.</li></ol><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">></span></span>phoenix.force.index<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">></span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/phoenix/6.jpg"></p><p>PSï¼šè¿æ¥å¦‚æœæŠ¥é”™ï¼š<code>ClusterId read in ZooKeeper is nullã€‚</code></p><p>è¯·æ£€æŸ¥hbase-site.xmlé…ç½®çš„zookeeper.znode.parentå±æ€§å€¼ã€‚</p><p>å¦‚æœé…ç½®çš„æ˜¯ï¼š/hbase-unsecureï¼Œé‚£ä¹ˆurlåœ°å€è¦å¸¦ä¸Š</p><pre class="line-numbers language-XML" data-language="XML"><code class="language-XML">zk node: jdbc:phoenix:xxxxx:2181:&#x2F;hbase-unsecure<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> hadoop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> phoenix </tag>
            
            <tag> hbase </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>sqoopåº”ç”¨</title>
      <link href="/posts/a114.html"/>
      <url>/posts/a114.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ä¸€ã€sqoopæ¦‚å¿µ"><a href="#ä¸€ã€sqoopæ¦‚å¿µ" class="headerlink" title="ä¸€ã€sqoopæ¦‚å¿µ"></a>ä¸€ã€sqoopæ¦‚å¿µ</h1><h2 id="1-å®˜ç½‘"><a href="#1-å®˜ç½‘" class="headerlink" title="1. å®˜ç½‘:"></a>1. å®˜ç½‘:</h2><p><a href="http://sqoop.apache.org/">http://sqoop.apache.org/</a></p><h2 id="2-æè¿°"><a href="#2-æè¿°" class="headerlink" title="2. æè¿°:"></a>2. æè¿°:</h2><p>&emsp;&emsp;Sqoopæ˜¯ä¸€ä¸ªç”¨æ¥å°†å…³ç³»å‹æ•°æ®åº“å’ŒHadoopä¸­çš„æ•°æ®è¿›è¡Œç›¸äº’è½¬ç§»çš„å·¥å…·ï¼Œå¯ä»¥å°†ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“(ä¾‹å¦‚Mysqlã€Oracle)ä¸­çš„æ•°æ®å¯¼å…¥åˆ°Hadoop(ä¾‹å¦‚HDFSã€Hiveã€Hbase)ä¸­ï¼Œä¹Ÿå¯ä»¥å°†Hadoop(ä¾‹å¦‚HDFSã€Hiveã€Hbase)ä¸­çš„æ•°æ®å¯¼å…¥åˆ°å…³ç³»å‹æ•°æ®åº“(ä¾‹å¦‚Mysqlã€Oracle)ä¸­ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š<br><img src="/medias/drawing-bed/sqoop/0.jpg"></p><h2 id="3-åœºæ™¯"><a href="#3-åœºæ™¯" class="headerlink" title="3. åœºæ™¯:"></a>3. åœºæ™¯:</h2><h3 id="1-æ•°æ®è¿ç§»"><a href="#1-æ•°æ®è¿ç§»" class="headerlink" title="(1)æ•°æ®è¿ç§»"></a>(1)æ•°æ®è¿ç§»</h3><p>&emsp;&emsp;ä¼ä¸šå¤§æ•°æ®å¹³å°å…³ç³»å‹æ•°æ®ä»“åº“ä¸­çš„æ•°æ®ä»¥åˆ†æä¸ºä¸»ï¼Œç»¼åˆè€ƒè™‘æ‰©å±•æ€§ã€å®¹é”™æ€§å’Œæˆæœ¬å¼€é”€ç­‰æ–¹é¢ã€‚è‹¥å°†æ•°æ®è¿ç§»åˆ°Hadoopå¤§æ•°æ®å¹³å°ä¸Šï¼Œå¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨Hadoopæä¾›çš„å¦‚Hiveã€SparkSQLåˆ†å¸ƒå¼ç³»ç»Ÿç­‰å·¥å…·è¿›è¡Œæ•°æ®åˆ†æã€‚ä¸ºäº†ä¸€æ¬¡æ€§å°†æ•°æ®å¯¼å…¥Hadoopå­˜å‚¨ç³»ç»Ÿï¼Œå¯ä½¿ç”¨Sqoopã€‚</p><h3 id="2-å¯è§†åŒ–åˆ†æç»“æœ"><a href="#2-å¯è§†åŒ–åˆ†æç»“æœ" class="headerlink" title="(2)å¯è§†åŒ–åˆ†æç»“æœ"></a>(2)å¯è§†åŒ–åˆ†æç»“æœ</h3><p>&emsp;&emsp;Hadoopå¤„ç†çš„è¾“å…¥æ•°æ®è§„æ¨¡å¯èƒ½æ˜¯éå¸¸åºå¤§çš„ï¼Œæ¯”å¦‚PBçº§åˆ«ï¼Œä½†æœ€ç»ˆäº§ç”Ÿçš„åˆ†æç»“æœå¯èƒ½ä¸ä¼šå¤ªå¤§ï¼Œæ¯”å¦‚æŠ¥è¡¨æ•°æ®ç­‰ï¼Œè€Œè¿™ç±»ç»“æœé€šå¸¸éœ€è¦è¿›è¡Œå¯è§†åŒ–ï¼Œä»¥ä¾¿æ›´ç›´è§‚åœ°å±•ç¤ºåˆ†æç»“æœã€‚ç›®å‰ç»å¤§éƒ¨åˆ†å¯è§†åŒ–å·¥å…·ä¸å…³ç³»å‹æ•°æ®åº“å¯¹æ¥å¾—æ¯”è¾ƒå¥½ï¼Œå› æ­¤ï¼Œæ¯”è¾ƒä¸»æµçš„åšæ³•æ˜¯ï¼Œå°†Hadoopäº§ç”Ÿçš„ç»“æœå¯¼å…¥å…³ç³»å‹æ•°æ®åº“è¿›è¡Œå¯è§†åŒ–å±•ç¤ºã€‚</p><h3 id="3-æ•°æ®å¢é‡å¯¼å…¥"><a href="#3-æ•°æ®å¢é‡å¯¼å…¥" class="headerlink" title="(3)æ•°æ®å¢é‡å¯¼å…¥"></a>(3)æ•°æ®å¢é‡å¯¼å…¥</h3><p>&emsp;&emsp;è€ƒè™‘åˆ°Hadoopå¯¹äº‹åŠ¡çš„æ”¯æŒæ¯”è¾ƒå·®ï¼Œå› æ­¤ï¼Œå‡¡æ˜¯æ¶‰åŠäº‹åŠ¡çš„åº”ç”¨ï¼Œæ¯”å¦‚æ”¯ä»˜å¹³å°ç­‰ï¼Œåç«¯çš„å­˜å‚¨å‡ä¼šé€‰æ‹©å…³ç³»æ•°æ®åº“ï¼Œè€Œäº‹åŠ¡ç›¸å…³çš„åˆ†ææ•°æ®ï¼Œæ¯”å¦‚ç”¨æˆ·æ”¯ä»˜è¡Œä¸ºç­‰ï¼Œå¯èƒ½åœ¨Hadoopåˆ†æè¿‡ç¨‹ä¸­ç”¨åˆ°ï¼ˆæ¯”å¦‚å¹¿å‘Šç³»ç»Ÿï¼Œæ¨èç³»ç»Ÿç­‰ï¼‰ã€‚ä¸ºäº†å‡å°‘Hadoopåˆ†æè¿‡ç¨‹ä¸­å½±å“è¿™ç±»ç³»ç»Ÿçš„æ€§èƒ½ï¼Œæˆ‘ä»¬é€šå¸¸ä¸ä¼šç›´æ¥è®©Hadoopè®¿é—®è¿™äº›å…³ç³»å‹æ•°æ®åº“ï¼Œè€Œæ˜¯å•ç‹¬å¯¼å…¥ä¸€ä»½åˆ°Hadoopå­˜å‚¨ç³»ç»Ÿä¸­ã€‚</p><h1 id="äºŒã€æ¶æ„"><a href="#äºŒã€æ¶æ„" class="headerlink" title="äºŒã€æ¶æ„"></a>äºŒã€æ¶æ„</h1><h2 id="1-hadoopä¸šåŠ¡å¼€å‘æµç¨‹"><a href="#1-hadoopä¸šåŠ¡å¼€å‘æµç¨‹" class="headerlink" title="1. hadoopä¸šåŠ¡å¼€å‘æµç¨‹:"></a>1. hadoopä¸šåŠ¡å¼€å‘æµç¨‹:</h2><p>&emsp;&emsp;åœ¨å®é™…çš„ä¸šåŠ¡å½“ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¯¹åŸå§‹æ•°æ®é›†é€šè¿‡MapReduceè¿›è¡Œæ•°æ®æ¸…æ´—ï¼Œç„¶åå°†æ¸…æ´—åçš„æ•°æ®å­˜å…¥åˆ°Hbaseæ•°æ®åº“ä¸­ï¼Œè€Œåé€šè¿‡æ•°æ®ä»“åº“Hiveå¯¹Hbaseä¸­çš„æ•°æ®è¿›è¡Œç»Ÿè®¡ä¸åˆ†æï¼Œåˆ†æä¹‹åå°†åˆ†æç»“æœå­˜å…¥åˆ°Hiveè¡¨ä¸­ï¼Œç„¶åé€šè¿‡Sqoopè¿™ä¸ªå·¥å…·å°†æˆ‘ä»¬çš„æ•°æ®æŒ–æ˜ç»“æœå¯¼å…¥åˆ°MySqlæ•°æ®åº“ä¸­ï¼Œæœ€åé€šè¿‡Webå°†ç»“æœå±•ç¤ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤º:</p><p><img src="/medias/drawing-bed/sqoop/1.jpg"></p><h2 id="2-Sqoopæ¶æ„"><a href="#2-Sqoopæ¶æ„" class="headerlink" title="2. Sqoopæ¶æ„:"></a>2. Sqoopæ¶æ„:</h2><p>&emsp;&emsp;Sqoopå·¥å…·æ¥æ”¶åˆ°å®¢æˆ·ç«¯çš„shellå‘½ä»¤æˆ–è€…Java apiå‘½ä»¤åï¼Œé€šè¿‡Sqoopä¸­çš„ä»»åŠ¡ç¿»è¯‘å™¨(Task Translator)å°†å‘½ä»¤è½¬æ¢ä¸ºå¯¹åº”çš„MapReduceä»»åŠ¡ï¼Œè€Œåå°†å…³ç³»å‹æ•°æ®åº“å’ŒHadoopä¸­çš„æ•°æ®è¿›è¡Œç›¸äº’è½¬ç§»ï¼Œè¿›è€Œå®Œæˆæ•°æ®çš„æ‹·è´ã€‚å¦‚ä¸‹å›¾æ‰€ç¤º:</p><p><img src="/medias/drawing-bed/sqoop/2.jpg"></p><h1 id="ä¸‰ã€åº”ç”¨"><a href="#ä¸‰ã€åº”ç”¨" class="headerlink" title="ä¸‰ã€åº”ç”¨"></a>ä¸‰ã€åº”ç”¨</h1><h2 id="1-Sqoopå¯¼å…¥-import"><a href="#1-Sqoopå¯¼å…¥-import" class="headerlink" title="1. Sqoopå¯¼å…¥(import):"></a>1. Sqoopå¯¼å…¥(import):</h2><h3 id="1-ç¤ºä¾‹åœºæ™¯"><a href="#1-ç¤ºä¾‹åœºæ™¯" class="headerlink" title="(1) ç¤ºä¾‹åœºæ™¯:"></a>(1) ç¤ºä¾‹åœºæ™¯:</h3><p>å°†mysqlæ•°æ®åº“ä¸­çš„bigDataCityè¡¨é€šè¿‡Sqoopå¯¼å…¥åˆ°hiveæ•°æ®åº“ä¸­ã€‚</p><h3 id="2-å‘½ä»¤"><a href="#2-å‘½ä»¤" class="headerlink" title="(2) å‘½ä»¤:"></a>(2) å‘½ä»¤:</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqoop <span class="token function">import</span> <span class="token comment"># æŒ‡å®šJDBCçš„URL å…¶ä¸­iitDataæŒ‡çš„æ˜¯(Mysqlæˆ–è€…Oracle)ä¸­çš„æ•°æ®åº“å </span>--connect jdbc:mysql://192.168.1.110:3306/iitData <span class="token comment"># æŒ‡çš„æ˜¯Mysqlæ•°æ®åº“ä¸­çš„ç”¨æˆ·å</span>--username iituser <span class="token comment"># æŒ‡çš„æ˜¯Mysqlæ•°æ®åº“ä¸­çš„ç”¨æˆ·åå¯†ç </span>--password iit123 <span class="token comment"># æŒ‡çš„æ˜¯è¦è¯»å–æ•°æ®åº“iitDataä¸­çš„è¡¨å</span>--table bigDataCity <span class="token comment"># å¯¼å…¥è¡¨ä¸­çš„éƒ¨åˆ†å­—æ®µï¼Œåé¢è·ŸæŒ‡å®šçš„åˆ—å</span>--columns <span class="token string">"ciryID,cityName,provincialID"</span><span class="token comment"># æŒ‡çš„æ˜¯hiveæ•°æ®åº“å¯¼å…¥</span>--hive-import <span class="token comment"># æŒ‡çš„æ˜¯hiveæ•°æ®åº“åˆ›å»ºè¡¨</span>--create-hive-table <span class="token comment"># è®¾å®šå¯¼å…¥æ•°æ®åæ¯ä¸ªå­—æ®µçš„åˆ†éš”ç¬¦</span>--fields-terminated-by <span class="token string">"<span class="token entity" title="\t">\t</span>"</span><span class="token comment"># å¹¶å‘çš„mapæ•°é‡</span>-m <span class="token number">1</span><span class="token comment"># æŒ‡çš„æ˜¯HDFSä¸­å¯¼å…¥è¡¨çš„å­˜æ”¾ç›®å½•(æ³¨æ„ï¼šæ˜¯ç›®å½•)</span>--target-dir<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-å¯¼å…¥"><a href="#3-å¯¼å…¥" class="headerlink" title="(3) å¯¼å…¥:"></a>(3) å¯¼å…¥:</h3><p><img src="/medias/drawing-bed/sqoop/3.jpg"><br><img src="/medias/drawing-bed/sqoop/4.jpg"></p><h2 id="2-Sqoopå¯¼å‡º-export"><a href="#2-Sqoopå¯¼å‡º-export" class="headerlink" title="2. Sqoopå¯¼å‡º(export):"></a>2. Sqoopå¯¼å‡º(export):</h2><h3 id="1-ç¤ºä¾‹åœºæ™¯-1"><a href="#1-ç¤ºä¾‹åœºæ™¯-1" class="headerlink" title="(1)ç¤ºä¾‹åœºæ™¯:"></a>(1)ç¤ºä¾‹åœºæ™¯:</h3><p>å°†hiveæ•°æ®åº“ä¸­çš„testè¡¨é€šè¿‡Sqoopå¯¼å‡ºåˆ°mysqlæ•°æ®åº“ä¸­ã€‚</p><p>æ³¨ï¼šä»Hadoopå‘æ•°æ®åº“ä¸­å¯¼å…¥æ•°æ®æ—¶ï¼Œæ•°æ®åº“ä¸­ç›¸åº”çš„è¡¨äº‹å…ˆå¿…é¡»åˆ›å»ºå¥½ã€‚ </p><h3 id="2-å‘½ä»¤-1"><a href="#2-å‘½ä»¤-1" class="headerlink" title="(2)å‘½ä»¤:"></a>(2)å‘½ä»¤:</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqoop <span class="token builtin class-name">export</span> <span class="token comment"># æŒ‡å®šJDBCçš„URL å…¶ä¸­iitDataæŒ‡çš„æ˜¯(Mysqlæˆ–è€…Oracle)ä¸­çš„æ•°æ®åº“å</span>--connect jdbc:mysql://192.168.1.42/mytable<span class="token comment"># æŒ‡çš„æ˜¯Mysqlæ•°æ®åº“ä¸­çš„ç”¨æˆ·åå’Œå¯†ç </span>--username root <span class="token comment"># æŒ‡çš„æ˜¯Mysqlæ•°æ®åº“ä¸­çš„ç”¨æˆ·åå¯†ç </span>--password root <span class="token comment"># æŒ‡çš„æ˜¯è¦è¯»å–æ•°æ®åº“iitDataä¸­çš„è¡¨å</span>--table <span class="token builtin class-name">test</span><span class="token comment"># è®¾å®šå¯¼å…¥æ•°æ®åæ¯ä¸ªå­—æ®µçš„åˆ†éš”ç¬¦ </span>--fields-terminated-by <span class="token string">"<span class="token entity" title="\t">\t</span>"</span> <span class="token comment"># æŒ‡çš„æ˜¯HDFSä¸­å³å°†è¢«å¯¼å‡ºçš„æ–‡ä»¶ç›®å½•(æ³¨æ„ï¼šæ˜¯ç›®å½•)</span>--export-dir /warehouse/tablespace/managed/hive/test/base_0000002<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-å¯¼å‡º"><a href="#3-å¯¼å‡º" class="headerlink" title="(3)å¯¼å‡º:"></a>(3)å¯¼å‡º:</h3><p><img src="/medias/drawing-bed/sqoop/5.jpg"><br><img src="/medias/drawing-bed/sqoop/6.jpg"><br><img src="/medias/drawing-bed/sqoop/7.jpg"><br><img src="/medias/drawing-bed/sqoop/8.jpg"></p><h2 id="3-æ‰¹é‡å¯¼å…¥"><a href="#3-æ‰¹é‡å¯¼å…¥" class="headerlink" title="3. æ‰¹é‡å¯¼å…¥:"></a>3. æ‰¹é‡å¯¼å…¥:</h2><h3 id="1-ç¤ºä¾‹åœºæ™¯-2"><a href="#1-ç¤ºä¾‹åœºæ™¯-2" class="headerlink" title="(1) ç¤ºä¾‹åœºæ™¯:"></a>(1) ç¤ºä¾‹åœºæ™¯:</h3><p>å°†mysqlæ•°æ®åº“ä¸­çš„testè¡¨æ•°æ®é€šè¿‡Sqoopæ‰¹é‡å¯¼å…¥åˆ°hiveæ•°æ®åº“ä¸­çš„testè¡¨ã€‚</p><h3 id="2-å‘½ä»¤-2"><a href="#2-å‘½ä»¤-2" class="headerlink" title="(2) å‘½ä»¤:"></a>(2) å‘½ä»¤:</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">sqoop <span class="token function">import</span> <span class="token comment"># å¯¼å…¥çš„å­—æ®µä¸ºç©ºæ—¶ï¼Œç”¨æŒ‡å®šçš„å­—ç¬¦è¿›è¡Œæ›¿æ¢ </span>--null-string <span class="token string">' '</span><span class="token comment"># å¢é‡å¯¼å…¥ </span>--incremental append<span class="token comment"># æŒ‡å®šå¢é‡å¯¼å…¥æ—¶çš„å‚è€ƒåˆ— </span>--check-column <span class="token function">id</span><span class="token comment"># ä¸Šä¸€æ¬¡å¯¼å…¥çš„æœ€åä¸€ä¸ªå€¼ </span>--last-value <span class="token number">1205</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-å¯¼å…¥-1"><a href="#3-å¯¼å…¥-1" class="headerlink" title="(3) å¯¼å…¥:"></a>(3) å¯¼å…¥:</h3><p><img src="/medias/drawing-bed/sqoop/9.jpg"><br><img src="/medias/drawing-bed/sqoop/10.jpg"><br><img src="/medias/drawing-bed/sqoop/11.jpg"><br><img src="/medias/drawing-bed/sqoop/12.jpg"></p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> hadoop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> mysql </tag>
            
            <tag> hbase </tag>
            
            <tag> hdfs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginxè·¨åŸŸæŠ¥é”™</title>
      <link href="/posts/9aea.html"/>
      <url>/posts/9aea.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">server <span class="token punctuation">&#123;</span>    listen <span class="token number">80</span><span class="token punctuation">;</span>    server_name <span class="token number">192.168</span>.1.202<span class="token punctuation">;</span>    location /api <span class="token punctuation">&#123;</span>        proxy_pass http://192.168.1.108:8090<span class="token punctuation">;</span>        <span class="token comment"># æŒ‡å®šå…è®¸è·¨åŸŸçš„æ–¹æ³•ï¼Œ*ä»£è¡¨æ‰€æœ‰</span>        add_header Access-Control-Allow-Methods *<span class="token punctuation">;</span>        <span class="token comment"># é¢„æ£€å‘½ä»¤çš„ç¼“å­˜ï¼Œå¦‚æœä¸ç¼“å­˜æ¯æ¬¡ä¼šå‘é€ä¸¤æ¬¡è¯·æ±‚</span>        add_header Access-Control-Max-Age <span class="token number">3600</span><span class="token punctuation">;</span>        <span class="token comment"># å¸¦cookieè¯·æ±‚éœ€è¦åŠ ä¸Šè¿™ä¸ªå­—æ®µï¼Œå¹¶è®¾ç½®ä¸ºtrue</span>        add_header Access-Control-Allow-Credentials <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token comment"># è¡¨ç¤ºå…è®¸è¿™ä¸ªåŸŸè·¨åŸŸè°ƒç”¨ï¼ˆå®¢æˆ·ç«¯å‘é€è¯·æ±‚çš„åŸŸåå’Œç«¯å£ï¼‰ </span>        <span class="token comment"># $http_originåŠ¨æ€è·å–è¯·æ±‚å®¢æˆ·ç«¯è¯·æ±‚çš„åŸŸï¼Œä¸ç”¨*çš„åŸå› æ˜¯å¸¦cookieçš„è¯·æ±‚ä¸æ”¯æŒ*å·</span>        add_header Access-Control-Allow-Origin <span class="token variable">$http_origin</span><span class="token punctuation">;</span>        <span class="token comment"># è¡¨ç¤ºè¯·æ±‚å¤´çš„å­—æ®µ åŠ¨æ€è·å–</span>        add_header Access-Control-Allow-Headers        <span class="token variable">$http_access_control_request_headers</span><span class="token punctuation">;</span>        <span class="token comment"># OPTIONSé¢„æ£€å‘½ä»¤ï¼Œé¢„æ£€å‘½ä»¤é€šè¿‡æ—¶æ‰å‘é€è¯·æ±‚</span>        <span class="token comment"># æ£€æŸ¥è¯·æ±‚çš„ç±»å‹æ˜¯ä¸æ˜¯é¢„æ£€å‘½ä»¤</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request_method</span> <span class="token operator">=</span> OPTIONS<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>            <span class="token builtin class-name">return</span> <span class="token number">200</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> error </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginxé…ç½®SSL &amp; èµ„æºç›®å½•</title>
      <link href="/posts/638e.html"/>
      <url>/posts/638e.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>å®ç°ä¸åŒåŸŸå,è®¿é—®ä¸åŒèµ„æºç›®å½•  </p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">server <span class="token punctuation">&#123;</span>    listen      <span class="token number">443</span> ssl<span class="token punctuation">;</span>    server_name www.linose.com<span class="token punctuation">;</span><span class="token comment">#    return       443;</span><span class="token comment">#    listen 443 ssl;   #SSLåè®®è®¿é—®ç«¯å£å·ä¸º443ã€‚æ­¤å¤„å¦‚æœªæ·»åŠ sslï¼Œå¯èƒ½ä¼šé€ æˆNginxæ— æ³•å¯åŠ¨ã€‚</span><span class="token comment">#    server_name localhost;  #å°†localhostä¿®æ”¹ä¸ºæ‚¨è¯ä¹¦ç»‘å®šçš„åŸŸåï¼Œä¾‹å¦‚ï¼šwww.example.comã€‚</span>    root html<span class="token punctuation">;</span>    index index.html index.htm<span class="token punctuation">;</span>    ssl_certificate /etc/pki/tls/certs/3769624_www.linose.com.pem<span class="token punctuation">;</span>   <span class="token comment">#å°†domain name.pemæ›¿æ¢æˆæ‚¨è¯ä¹¦çš„æ–‡ä»¶åã€‚</span>    ssl_certificate_key /etc/pki/tls/certs/3769624_www.linose.com.key<span class="token punctuation">;</span>   <span class="token comment">#å°†domain name.keyæ›¿æ¢æˆæ‚¨è¯ä¹¦çš„å¯†é’¥æ–‡ä»¶åã€‚</span>    ssl_session_timeout 5m<span class="token punctuation">;</span>    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:<span class="token operator">!</span>NULL:<span class="token operator">!</span>aNULL:<span class="token operator">!</span>MD5:<span class="token operator">!</span>ADH:<span class="token operator">!</span>RC4<span class="token punctuation">;</span>  <span class="token comment">#ä½¿ç”¨æ­¤åŠ å¯†å¥—ä»¶ã€‚</span>    ssl_protocols TLSv1 TLSv1.1 TLSv1.2<span class="token punctuation">;</span>   <span class="token comment">#ä½¿ç”¨è¯¥åè®®è¿›è¡Œé…ç½®ã€‚</span>    ssl_prefer_server_ciphers on<span class="token punctuation">;</span>    location / <span class="token punctuation">&#123;</span>        root /usr/share/nginx/html/linoseCom<span class="token punctuation">;</span>   <span class="token comment">#ç«™ç‚¹ç›®å½•ã€‚</span>        index index.html index.htm<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>server {<br> listen 80;<br> server_name localhost;   #å°†localhostä¿®æ”¹ä¸ºæ‚¨è¯ä¹¦ç»‘å®šçš„åŸŸåï¼Œä¾‹å¦‚ï¼š<a href="http://www.example.com./">www.example.comã€‚</a><br>rewrite ^(.*)$ https://$host$1 permanent;   #å°†æ‰€æœ‰httpè¯·æ±‚é€šè¿‡rewriteé‡å®šå‘åˆ°httpsã€‚<br> location / {<br>index index.html index.htm;<br>}<br>}</p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(ä¹)</title>
      <link href="/posts/bdcb.html"/>
      <url>/posts/bdcb.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><p>ç±»å’Œæ–¹æ³•çš„æºç ä¸‹è½½åœ°å€:<a href="https://wujiops.coding.net/p/xuexibiji/d/xuexibiji/git/raw/master/%E7%B1%BB%E5%92%8C%E6%96%B9%E6%B3%95.zip" title="ç±»å’Œæ–¹æ³•.zip">download</a>  </p><h1 id="å…³äºç±»çš„ç†è§£"><a href="#å…³äºç±»çš„ç†è§£" class="headerlink" title="å…³äºç±»çš„ç†è§£"></a><font size=5>å…³äºç±»çš„ç†è§£</font></h1><p>&emsp;&emsp;ç¼–å†™æœ‰æ„ä¹‰çš„é¢å‘å¯¹è±¡çš„ä»£ç <br>&emsp;&emsp;ç±» = é¢å‘å¯¹è±¡ âŒ<br>&emsp;&emsp;ç±»å‘½åï¼ˆå»ºè®®ï¼šé¦–å­—æ¯å¤§å†™ã€è¿æ¥è¯é¦–å­—æ¯å¤§å†™ï¼ˆå˜é‡ï¼Œæœ€å¥½å°å†™ã€è¿æ¥è¯ä½¿ç”¨ä¸‹åˆ’çº¿è¿æ¥ï¼‰ï¼‰ã€å¯¹è±¡ï¼ˆçœ‹ä¸‹æ–‡ï¼‰<br>&emsp;&emsp;å®ä¾‹åŒ–ï¼ˆä¸‹æ–‡ï¼‰<br>&emsp;&emsp;ç±»åªè´Ÿè´£å»å®šä¹‰æˆ–å»åˆ»ç”»ä¸€äº›ä¸œè¥¿ï¼Œä½†æ˜¯å®ƒä¸è´Ÿè´£å»æ‰§è¡Œä»£ç ã€‚  è¿è¡Œæˆ–è°ƒç”¨è¿™ä¸ªç±»ï¼Œè¦åœ¨æ­¤ç±»çš„å¤–éƒ¨ã€‚ï¼ˆéè¦åœ¨ç±»å†…éƒ¨è°ƒç”¨ï¼Œé‚£è¿™ä¸ªç±»å°±å˜æˆäº†ä¸€ä¸ªå‡½æ•°ï¼‰  </p><h1 id="å‡½æ•°å’Œç±»"><a href="#å‡½æ•°å’Œç±»" class="headerlink" title="å‡½æ•°å’Œç±»"></a><font size=5>å‡½æ•°å’Œç±»</font></h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># classå®šä¹‰ç±»ï¼Œdefå®šä¹‰å‡½æ•°</span><span class="token comment"># å‡½æ•°ï¼š</span><span class="token keyword">def</span> <span class="token function">name</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®šä¹‰å‡½æ•°å</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> x <span class="token operator">+</span> y   <span class="token comment"># å®šä¹‰å‡½æ•°ä½“</span>    <span class="token keyword">return</span> <span class="token builtin">sum</span>a <span class="token operator">=</span> name<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>   <span class="token comment"># ä¼ å…¥å®å‚</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>   <span class="token comment"># æ‰“å°ç»“æœ</span><span class="token comment"># ç±»ï¼š</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®šä¹‰ç±»å</span>    school <span class="token operator">=</span> <span class="token string">'ç±»å°å­¦'</span>   <span class="token comment"># å®šä¹‰ç±»ä½“ï¼Œç±»çš„ç‰¹æ€§è¡¨ç°å½¢å¼ï¼Œåˆç§°æ•°æ®æˆå‘˜</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token string">'100'</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> school<span class="token punctuation">,</span> <span class="token builtin">sum</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># æ„é€ å‡½æ•°ï¼Œå¯¹ç±»åˆå§‹åŒ–ã€‚ï¼ˆæ„é€ å‡½æ•°__init__ï¼Œåœ¨å®ä¾‹åŒ–çš„æ—¶å€™åšä¸€äº›ç±»çš„åˆå§‹åŒ–çš„å·¥ä½œï¼‰</span>        self<span class="token punctuation">.</span>school <span class="token operator">=</span> school   <span class="token comment"># å®šä¹‰å®ä¾‹å˜é‡ï¼Œå¯¹äºå¯¹è±¡æ¥è¯´ã€‚ï¼ˆç±»æ˜¯ä¸€ä¸ªå¤§èŒƒå›´ï¼Œå¯¹è±¡æ˜¯ä¸€ä¸ªå…·ä½“äº‹ç‰©ï¼‰</span>        self<span class="token punctuation">.</span><span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token builtin">sum</span>    <span class="token comment"># å¦‚æœæ³¨é‡Šè¿™ä¸€è¡Œ,ä¼šå»æ‰¾ç±»ä¸­çš„sum(æ³¨ä¸€)</span>    <span class="token keyword">def</span> <span class="token function">workbook</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®šä¹‰æ–¹æ³•ï¼ˆæˆ–è€…ç§°å‡½æ•°ï¼‰ï¼Œå¯¹äºç±»æ¥è¯´ã€‚ï¼ˆç±»æ–¹æ³•ï¼‰</span>        <span class="token keyword">pass</span><span class="token keyword">print</span><span class="token punctuation">(</span>Student<span class="token punctuation">.</span>school<span class="token punctuation">)</span>    <span class="token comment"># ç±»å˜é‡æ²¡æœ‰å®ä¾‹åŒ–ä¹Ÿå¯ä»¥è°ƒç”¨ï¼Œå®ä¾‹åŒ–ä¹‹åé€šè¿‡å®ä¾‹ä¹Ÿå¯ä»¥è°ƒç”¨</span>school1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'abcå°å­¦'</span><span class="token punctuation">,</span> <span class="token string">'1000'</span><span class="token punctuation">)</span>   <span class="token comment"># å®ä¾‹åŒ–ï¼Œå®ä¾‹åŒ–æ„ä¹‰ï¼šè·å–ä¸€ä¸ªå…·ä½“çš„å¯¹è±¡</span>school2 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å“ˆå“ˆå°å­¦'</span><span class="token punctuation">,</span> <span class="token string">'900'</span><span class="token punctuation">)</span>   <span class="token comment"># ï¼ˆå®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼‰</span><span class="token keyword">print</span><span class="token punctuation">(</span>school1<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span>   <span class="token comment"># æ‰“å°ç»“æœï¼ˆ(è§£æ³¨ä¸€)å…ˆæ‰¾å®ä¾‹æœ¬èº«ï¼Œæ²¡æœ‰çš„è¯å°±å»ç±»é‡Œæ‰¾ï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç±»"><a href="#ç±»" class="headerlink" title="ç±»"></a><font size=4>ç±»</font></h2><p>&emsp;&emsp;ç±»çš„å®šä¹‰å’Œç±»ä¸‹é¢æ–¹æ³•çš„è°ƒç”¨ï¼Œç±»æœ€åŸºæœ¬çš„ä½œç”¨ï¼šå°è£…å‡½æ•°ä½“(å°è£…æ–¹æ³•)  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># é¢å‘å¯¹è±¡.py</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    name <span class="token operator">=</span> <span class="token string">''</span>   <span class="token comment"># ç±»ä½“ï¼ˆå¯¹æ¯”å‡½æ•°ä½“å­¦ä¹ ï¼‰</span>    age <span class="token operator">=</span> <span class="token string">'0'</span>    <span class="token keyword">def</span> <span class="token function">print_file</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># ï¼ˆselfä¸‹æ–‡è®²,è¿™æ˜¯æ–¹æ³•,æ³¨äºŒï¼‰</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'name: '</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'age: '</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>age<span class="token punctuation">)</span>student <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># å…¶ä»–è¯­è¨€ä½¿ç”¨ new Student() è°ƒç”¨Studentç±», åœ¨pythonä¸­ç›´æ¥ä½¿ç”¨</span>student<span class="token punctuation">.</span>print_file<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># è°ƒç”¨ç±»ä¸‹é¢çš„æ–¹æ³•ï¼Œï¼ˆå‡½æ•°å’Œæ–¹æ³•çš„åŒºåˆ«ä¸‹æ–‡è®²ï¼‰</span><span class="token comment"># class StudentHomework():   # æ¨¡å—é‡Œé¢å¯ä»¥æœ‰å¤šä¸ªç±»</span><span class="token comment">#     homework_name = ''</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¼•ç”¨ç±»"><a href="#å¼•ç”¨ç±»" class="headerlink" title="å¼•ç”¨ç±»"></a><font size=4>å¼•ç”¨ç±»</font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> é¢å‘å¯¹è±¡ <span class="token keyword">import</span> Studentstudent <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span>student<span class="token punctuation">.</span>print_file<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># å¯ä»¥è¿™æ ·åœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­å¼•ç”¨ç±»ï¼Œä½†æ˜¯è¿™æ ·ä¼šè®©ä»£ç çœ‹èµ·æ¥éå¸¸æ¾æ•£</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ–¹æ³•</strong> å’Œ <strong>å‡½æ•°</strong> çš„åŒºåˆ«ï¼šï¼ˆåˆå­¦è€…å¯¹æ­¤ä¸å¿…çº ç»“ã€‚ä¸‹æ–‡åªæ˜¯å»ºè®®ï¼‰<br>&emsp;&emsp;åœ¨Cã€C++æ›´å¤šç§°ä¸ºå‡½æ•°ï¼Œåœ¨javaã€C#é‡Œæ›´å¤šç§°ä¸ºæ–¹æ³•ï¼ˆå¯¹def name(): \n passçš„ç§°è°“ï¼‰<br>&emsp;&emsp;æ–¹æ³•æ˜¯è®¾è®¡å±‚é¢çš„ä¸€ä¸ªç§°è°“ã€‚å‡½æ•°æ˜¯ç¨‹åºè¿è¡Œã€è¿‡ç¨‹å¼çš„ç§°è°“<br>&emsp;&emsp;å˜é‡åœ¨æ¨¡å—é‡Œé¢ï¼Œç§°ä¸ºå˜é‡ï¼›åœ¨ç±»é‡Œé¢ï¼Œæ›´å¤šç§°ä¸ºæ•°æ®æˆå‘˜ã€‚  </p><p><strong>ç±»</strong> å’Œ <strong>å¯¹è±¡</strong> æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ<br>&emsp;&emsp;é€šç”¨å®šä¹‰ï¼šç±»æ˜¯ç°å®ä¸–ç•Œæˆ–æ€ç»´ä¸–ç•Œä¸­çš„å®ä½“åœ¨è®¡ç®—æœºä¸­çš„åæ˜ ï¼Œå®ƒå°†æ•°æ®ä»¥åŠè¿™äº›æ•°æ®ä¸Šçš„æ“ä½œå°è£…åœ¨ä¸€èµ·<br>&emsp;&emsp;åœ¨Studentç±»é‡Œé¢ï¼Œå­¦ç”Ÿæœ‰å¾ˆå¤šçš„ç‰¹æ€§ï¼ˆåå­—ã€å¹´é¾„ã€æ€§åˆ«ç­‰ï¼‰åœ¨ç±»é‡Œé¢æ˜¯ç”± æ•°æ®æˆå‘˜ æ¥è¡¨ç¤ºçš„ï¼Œè¿˜å› è¯¥æœ‰å®ƒä»¬çš„è¡Œä¸ºï¼ˆåšä½œä¸šã€è€ƒè¯•ç­‰ï¼‰<br>&emsp;&emsp;è¡Œä¸ºç”¨æ–¹æ³•è¡¨ç¤ºã€‚<br>&emsp;&emsp;ç±»è®¾ç½®çš„å¥½ä¸å¥½å…³é”®çœ‹è¡Œä¸ºä¸ç‰¹å¾ã€‚ </p><p><strong>å¯¹è±¡</strong>ï¼šè¡¨ç¤ºä¸€ä¸ªå…·ä½“çš„æ¦‚å¿µï¼ˆç±»æ¯”â€™å­¦ç”Ÿç±»â€™ï¼Œå­¦ç”Ÿç±»ä»£è¡¨å­¦ç”Ÿæ•´ä½“ï¼Œå¯¹è±¡å°±æ˜¯å…·ä½“çš„ä¸€ä¸ªå­¦ç”Ÿï¼‰<br>&emsp;&emsp;æ¢å¥è¯è¯´ï¼Œç±»åªæ˜¯å‘Šè¯‰æˆ‘ä»¬å¯¹äºä¸€ä¸ªå­¦ç”Ÿç¾¤ä½“æ¥è¯´ï¼Œæ¯ä¸€ä¸ªå­¦ç”Ÿéƒ½ä¼šæœ‰å®ƒçš„ç‰¹å¾åå­—å’Œå¹´é¾„ç­‰ï¼Œä½†æ˜¯å¹´é¾„å…·ä½“å–ä»€ä¹ˆå€¼ï¼Œåå­—å…·ä½“å–ä»€ä¹ˆå€¼ï¼Œéœ€è¦å®ä¾‹åŒ–æ¥å®Œæˆã€‚å½“ç±»è¢«å®ä¾‹åŒ–äº†ä»¥åï¼Œå°±å˜æˆäº†ä¸€ä¸ªå¯¹è±¡ã€‚<br>&emsp;&emsp;åœ¨ç±»è¢«å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œéœ€è¦æˆ‘ä»¬å¾€ç±»é‡Œé¢ä¼ é€’å…·ä½“å€¼ï¼Œç„¶åæ‰èƒ½å¾—åˆ°ä¸€ä¸ªå…·ä½“çš„å¯¹è±¡ã€‚  </p><h1 id="å¯¹è±¡"><a href="#å¯¹è±¡" class="headerlink" title="å¯¹è±¡"></a><font size=5>å¯¹è±¡</font></h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®šä¹‰ä¸€ä¸ªå­¦ç”Ÿç±»</span>    name <span class="token operator">=</span> <span class="token string">''</span>   <span class="token comment"># å­¦ç”Ÿçš„ç‰¹å¾</span>    age <span class="token operator">=</span> <span class="token string">'0'</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å­¦ç”Ÿçš„è¡Œä¸ºï¼šåšä½œä¸š</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®ä¾‹åŒ–"><a href="#å®ä¾‹åŒ–" class="headerlink" title="å®ä¾‹åŒ–"></a><font size=4>å®ä¾‹åŒ–</font></h2><p>&emsp;&emsp;å®ä¾‹åŒ–çš„æ„ä¹‰ï¼šç”¨æ¨¡æ¿åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    name <span class="token operator">=</span> <span class="token string">''</span>    age <span class="token operator">=</span> <span class="token string">'7'</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># ç„¶åœ¨å®é™…ä»£è¡¨ä¸€ä¸ªäº‹ç‰©ï¼Œ</span>student2 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span>student3 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span>student1<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># ä½†æ˜¯åœ¨è®¡ç®—æœºä¸­ï¼Œæ‰“å°çš„å†…å­˜åœ°å€æ˜¯ä¸åŒçš„ã€‚</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span>student2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span>student3<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç±»å˜é‡</strong>å’Œ<strong>å®ä¾‹å˜é‡</strong>ï¼Œç±»å’Œæ¨¡å—çš„è¡Œä¸ºè¦åŒºåˆ†å¯¹å¾…ï¼Œç±»æœ‰è‡ªå·±çš„è§„åˆ™å’Œç‰¹æ€§<br>&emsp;&emsp;ç±»å˜é‡ï¼Œå’Œç±»ç›¸å…³è”çš„å˜é‡ï¼›<br>&emsp;&emsp;å®ä¾‹å˜é‡ï¼Œæ˜¯å’Œå¯¹è±¡ç›¸å…³è”çš„  </p><h3 id="æ¡ˆä¾‹ä¸€ï¼š"><a href="#æ¡ˆä¾‹ä¸€ï¼š" class="headerlink" title="æ¡ˆä¾‹ä¸€ï¼š"></a><font size=3>æ¡ˆä¾‹ä¸€ï¼š</font></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    name <span class="token operator">=</span> <span class="token string">'abc'</span>   <span class="token comment"># è¿™æ ·å®šä¹‰æ˜¯å¦æœ‰æ„ä¹‰ï¼šç­”æ¡ˆæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚åå­—å’Œå¹´é¾„æ˜¯å°æ˜å°çº¢çš„å±æ€§ï¼Œä¸æ˜¯å­¦ç”Ÿçš„å±æ€§ï¼Œä½†æ˜¯pythonè¯­æ³•æ˜¯å¯¹çš„</span>    age <span class="token operator">=</span> <span class="token string">'7'</span>   <span class="token comment"># è¿™é‡Œå¯ä»¥å®šä¹‰ä¸€ä¸ªsum = 100ï¼Œä¸€ä¸ªç­çº§å­¦ç”Ÿæ€»æ•°ã€‚å¯¹æ¯”nameå’Œageå¯èƒ½ä¼šå¥½ä¸€ç‚¹ã€‚</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># __init__ç§°ä¸ºæ„é€ å‡½æ•°ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­ï¼Œæœ€å¸¸ç”¨çš„åˆå§‹åŒ–ç±»çš„ç‰¹å¾</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name   <span class="token comment"># å®šä¹‰å®ä¾‹å˜é‡ï¼šself.å˜é‡åï¼ˆselfä¸‹æ–‡è®²,æ³¨äºŒï¼Œå¯ä»¥æ˜¯ä»»æ„æ ‡è¯†å¦‚abcï¼Œpythonå»ºè®®æ˜¯selfï¼‰</span>        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age        <span class="token comment"># return None   # __init__å‡½æ•°å’Œä¸åŒå‡½æ•°çš„åŒºåˆ«ï¼Œinitå‡½æ•°ä¸èƒ½è¿”å›ä»»æ„çš„å­—ç¬¦ä¸²ï¼Œåªèƒ½æ˜¯None(å¯ä»¥çœç•¥æ­¤è¡Œ)</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å°æ˜'</span><span class="token punctuation">,</span> <span class="token string">'7'</span><span class="token punctuation">)</span>   <span class="token comment"># å®ä¾‹åŒ–</span>student2 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å°çº¢'</span><span class="token punctuation">,</span> <span class="token string">'8'</span><span class="token punctuation">)</span>student3 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å¤§å£®'</span><span class="token punctuation">,</span> <span class="token string">'6'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>student2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>Student<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token comment"># æ„é€ å‡½æ•°çš„è°ƒç”¨æ˜¯è‡ªåŠ¨è¿›è¡Œçš„ï¼Œå½“ä½ åœ¨å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œpythonä¼šè‡ªåŠ¨å¸®ä½ è°ƒç”¨__init__æ„é€ å‡½æ•°ã€‚</span><span class="token comment"># ä¹Ÿèƒ½æ‰‹åŠ¨è°ƒç”¨ï¼ˆå¾ˆå°‘æ˜¾å¼è°ƒç”¨ï¼‰ã€‚å°±æ˜¯è¯´ä¸å¿…ä½¿ç”¨ä¸‹é¢ä¸‰è¡Œä»£ç è°ƒç”¨æ„é€ å‡½æ•°ã€‚</span><span class="token comment"># student1.__init__()</span><span class="token comment"># student2.__init__()</span><span class="token comment"># student3.__init__()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ¡ˆä¾‹äºŒï¼š"><a href="#æ¡ˆä¾‹äºŒï¼š" class="headerlink" title="æ¡ˆä¾‹äºŒï¼š"></a><font size=3>æ¡ˆä¾‹äºŒï¼š</font></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    name <span class="token operator">=</span> <span class="token string">'abc'</span>    age <span class="token operator">=</span> <span class="token string">'0'</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name    <span class="token comment"># å®šä¹‰å®ä¾‹å˜é‡ï¼Œå¦‚æœæ²¡æœ‰å‰é¢çš„selfï¼Œprint(student1.__dict__)æ˜¯ç©ºçš„å­—å…¸ã€‚å¹¶ä¸”å­—å…¸é‡Œé¢åªæœ‰è®¾ç½®äº†self.*è¿™æ ·çš„å…ƒç´ </span>        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å°çº¢'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>    <span class="token comment"># å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡</span><span class="token comment"># print(student1.name)    # ç›´æ¥æ‰“å°æ˜¯ç©º</span><span class="token comment"># print(Student.name)</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span>__dict__<span class="token punctuation">)</span>    <span class="token comment"># å®ä¾‹å˜é‡å’Œç±»é‡Œé¢éƒ½æœ‰__dict__å‡½æ•°ã€‚ä½¿ç”¨print()å¯ä»¥æŸ¥çœ‹å˜é‡åå’Œå˜é‡å€¼çš„å¯¹åº”å…³ç³»ã€‚</span><span class="token comment"># å¦‚æœpythonè®¿é—®ä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œæ‰¾ä¸åˆ°ä¼šåˆ°ç±»é‡Œé¢å»æ‰¾ï¼Œå†æ‰¾ä¸åˆ°å»çˆ¶ç±»é‡Œé¢å»æ‰¾ã€‚</span><span class="token comment"># ç±»é‡Œé¢ä¹Ÿæœ‰__dict__å˜é‡ï¼Œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è§£,æ³¨äºŒ:<br><strong>å®ä¾‹æ–¹æ³•</strong>ï¼Œå¯¹ç±»ä¸‹é¢çš„å®ä¾‹æ–¹æ³•ï¼Œé»˜è®¤ä¼šæœ‰ä¸€ä¸ªselfï¼Œè°ƒç”¨çš„æ—¶å€™é»˜è®¤ä¼ å…¥ï¼Œä¸éœ€è¦æ‰‹åŠ¨æ·»åŠ ã€‚<br>&emsp;&emsp;selfå¿…é¡»æ˜¯æ˜¾ç¤ºçš„ï¼ˆå’Œå…¶å®ƒè¯­è¨€this.å‡ ä¹æ˜¯ä¸€æ ·çš„ã€‚å…¶å®ƒè¯­è¨€æ˜¯éšè—çš„ï¼‰ï¼Œä½†æ˜¯å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ï¼Œåªæ˜¯é»˜è®¤ä¸ºselfï¼ˆä¸å»ºè®®æ›´æ¢æˆå…¶ä»–å­—ç¬¦ï¼‰<br>&emsp;&emsp;selfå°±æ˜¯å½“å‰è°ƒç”¨æŸä¸€ä¸ªæ–¹æ³•çš„å¯¹è±¡ï¼›selfä»£è¡¨çš„æ˜¯å®ä¾‹ï¼Œè€Œä¸æ˜¯ç±»ã€‚ï¼ˆselfå¿…é¡»è¦å†™ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸å«selfï¼‰<br>&emsp;&emsp;å®ä¾‹æ–¹æ³•æœ€å¤§çš„ç‰¹ç‚¹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦ä¼ å…¥ä¸€ä¸ªselfï¼Œå®ä¾‹æ–¹æ³•æ˜¯å’Œå®ä¾‹å¯¹è±¡ç›¸å…³è”çš„ï¼Œä¹Ÿæ˜¯å®ä¾‹å¯ä»¥è°ƒç”¨çš„æ–¹æ³•  </p><p><strong>æ€»ç»“ï¼š</strong><br>&emsp;&emsp;ç±»åŒ…å«ï¼šå˜é‡ï¼ˆç±»å˜é‡ã€å®ä¾‹å˜é‡ï¼‰ï¼›æ–¹æ³•ï¼ˆå®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•ã€é™æ€æ–¹æ³•ï¼‰ï¼›æ„é€ å‡½æ•°<br>&emsp;&emsp;æ–¹æ³•å’Œå˜é‡çš„å…³ç³»ï¼šä»é¢å‘å¯¹è±¡è§’åº¦ï¼šæ–¹æ³•ä»£è¡¨ç±»çš„è¡Œä¸ºï¼Œå˜é‡ä»£è¡¨åˆ»ç”»ä¸€ä¸ªç±»çš„ç‰¹å¾ã€‚ï¼ˆå˜é‡ç”¨æ¥åˆ»ç”»åå­—å’Œå¹´é¾„ï¼Œè€Œæ–¹æ³•ç”¨æ¥æè¿°æˆ‘ä»¬å¯ä»¥åšä»€ä¹ˆäº‹æƒ…ä»¥åŠæˆ‘ä»¬è‡ªèº«çš„ä¸€äº›è¡Œä¸ºï¼‰<br>&emsp;&emsp;åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹é¢ï¼Œæ–¹æ³•éœ€è¦å¯¹å˜é‡åšä¸€ç³»åˆ—è¿ç®—ï¼Œæˆ–è€…è¯´é€»è¾‘ä¸Šçš„æ“ä½œï¼Œæœ€ç»ˆå»æ”¹å˜å˜é‡çš„çŠ¶æ€ã€‚å½“ç„¶æ–¹æ³•ä¹Ÿå¯ä»¥ä¸æ“ä½œä»»ä½•å˜é‡ï¼ˆå°‘æ•°ï¼‰  </p><h1 id="è¡¥å……ï¼šç±»çš„ä¸“æœ‰æ–¹æ³•"><a href="#è¡¥å……ï¼šç±»çš„ä¸“æœ‰æ–¹æ³•" class="headerlink" title="è¡¥å……ï¼šç±»çš„ä¸“æœ‰æ–¹æ³•"></a><font size=5>è¡¥å……ï¼šç±»çš„ä¸“æœ‰æ–¹æ³•</font></h1><table><thead><tr><th align="left">æ–¹æ³•</th><th align="left">è¯´æ˜</th></tr></thead><tbody><tr><td align="left">__init__</td><td align="left">æ„é€ å‡½æ•°ï¼Œåœ¨ç”Ÿæˆå¯¹è±¡æ—¶è°ƒç”¨</td></tr><tr><td align="left">__del__</td><td align="left">ææ„å‡½æ•°ï¼Œé‡Šæ”¾å¯¹è±¡æ—¶ä½¿ç”¨</td></tr><tr><td align="left">__repr__</td><td align="left">æ‰“å°ï¼Œè½¬æ¢</td></tr><tr><td align="left">__setitem__</td><td align="left">æŒ‰ç…§ç´¢å¼•èµ‹å€¼</td></tr><tr><td align="left">__getitem__</td><td align="left">æŒ‰ç…§ç´¢å¼•è·å–å€¼</td></tr><tr><td align="left">__len__</td><td align="left">è·å¾—é•¿åº¦</td></tr><tr><td align="left">__cmp__</td><td align="left">æ¯”è¾ƒè¿ç®—</td></tr><tr><td align="left">__call__</td><td align="left">å‡½æ•°è°ƒç”¨</td></tr><tr><td align="left">__add__</td><td align="left">åŠ è¿ç®—</td></tr><tr><td align="left">__sub__</td><td align="left">å‡è¿ç®—</td></tr><tr><td align="left">__mul__</td><td align="left">ä¹˜è¿ç®—</td></tr><tr><td align="left">__truediv__</td><td align="left">é™¤è¿ç®—</td></tr><tr><td align="left">__mod__</td><td align="left">æ±‚ä½™è¿ç®—</td></tr><tr><td align="left">__pow__</td><td align="left">ä¹˜æ–¹</td></tr></tbody></table><h1 id="åœ¨æ–¹æ³•é‡Œé¢æ“ä½œå˜é‡"><a href="#åœ¨æ–¹æ³•é‡Œé¢æ“ä½œå˜é‡" class="headerlink" title="åœ¨æ–¹æ³•é‡Œé¢æ“ä½œå˜é‡"></a><font size=5>åœ¨æ–¹æ³•é‡Œé¢æ“ä½œå˜é‡</font></h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># ç±»</span>    sum1 <span class="token operator">=</span> <span class="token number">0</span>    name <span class="token operator">=</span> <span class="token string">'abc'</span>   <span class="token comment"># ç±»å˜é‡</span>    age <span class="token operator">=</span> <span class="token string">'0'</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># æ„é€ å‡½æ•°ï¼Œç‰¹åˆ«çš„ä¸€ä¸ªå®ä¾‹æ–¹æ³•ã€‚</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name   <span class="token comment"># å®ä¾‹å˜é‡</span>        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>   <span class="token comment"># åœ¨å®ä¾‹æ–¹æ³•é‡Œé¢æ“ä½œå®ä¾‹å˜é‡,å»ºè®®åŠ ä¸Šself</span>        <span class="token comment"># print(name)   # è¯»å–çš„æ˜¯ å½¢å‚name ï¼Œä¸åŠ selfæƒ…å†µã€‚</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>Student<span class="token punctuation">.</span>sum1<span class="token punctuation">)</span>   <span class="token comment"># åœ¨å®ä¾‹æ–¹æ³•é‡Œé¢è®¿é—®ç±»å˜é‡</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>sum1<span class="token punctuation">)</span>   <span class="token comment"># selfé‡Œé¢æœ‰ä¸€ä¸ª__class__å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è®¿é—®ç±»å˜é‡</span><span class="token comment"># æ„é€ å‡½æ•°æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å®ä¾‹æ–¹æ³•ï¼Œè°ƒç”¨æ–¹å¼ä¸ä¸€æ ·ã€‚</span><span class="token comment"># è°ƒç”¨æ„é€ å‡½æ•°å®é™…ä¸Šæ˜¯é€šè¿‡ ç±»(),æ™®é€šçš„å®ä¾‹æ–¹æ³•è°ƒç”¨ å¯¹è±¡.do_homework</span><span class="token comment"># æ„ä¹‰ä¸ä¸€æ ·ï¼Œå®ä¾‹æ–¹æ³•æè¿°ç±»çš„è¡Œä¸ºï¼›æ„é€ å‡½æ•°æ˜¯ç”¨æ¥åˆå§‹åŒ–ç±»çš„ç‰¹å¾çš„ã€‚</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®ä¾‹æ–¹æ³•(æ™®é€šçš„å®ä¾‹æ–¹æ³•)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å°çº¢'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>   <span class="token comment"># å®ä¾‹åŒ–ï¼Œå®ä¾‹å¯¹è±¡</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span>name<span class="token punctuation">)</span>   <span class="token comment"># è°ƒç”¨</span><span class="token keyword">print</span><span class="token punctuation">(</span>Student<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token comment"># ç±»å˜é‡ä¹Ÿæœ‰ä¸“é—¨æ“ä½œå®ƒçš„ç±»æ–¹æ³•</span><span class="token comment"># @classmethod</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¡ˆä¾‹ä¸€ï¼š-1"><a href="#æ¡ˆä¾‹ä¸€ï¼š-1" class="headerlink" title="æ¡ˆä¾‹ä¸€ï¼š"></a><font size=4>æ¡ˆä¾‹ä¸€ï¼š</font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®ä¾‹æ–¹æ³•ï¼ˆæ„é€ å‡½æ•°ï¼‰</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age        self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span><span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å½“å‰å­¦ç”Ÿæ€»æ•°ä¸ºï¼š'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®ä¾‹æ–¹æ³•</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>Student<span class="token punctuation">(</span><span class="token string">'å°æ˜'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>   <span class="token comment"># å®ä¾‹åŒ–ï¼Œä¼ å‚è¿‡ç¨‹ã€‚æ‰“å°ç»“æœä¸ºsum1=3(å®ä¾‹åŒ–çš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨æ„é€ å‡½æ•°ã€‚)</span>student2 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å°çº¢'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>Student<span class="token punctuation">(</span><span class="token string">'å°O'</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token comment"># æ³¨é‡Šä¸Šé¢ä¸‰è¡Œï¼Œä¸æ‰“å°ä»»ä½•ä¸œè¥¿ï¼Œå› ä¸ºæ²¡æœ‰å»è°ƒç”¨æ­¤ç±»</span><span class="token keyword">print</span><span class="token punctuation">(</span>Student<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¡ˆä¾‹äºŒï¼š-1"><a href="#æ¡ˆä¾‹äºŒï¼š-1" class="headerlink" title="æ¡ˆä¾‹äºŒï¼š"></a><font size=4>æ¡ˆä¾‹äºŒï¼š</font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®ä¾‹æ–¹æ³•ï¼ˆæ„é€ å‡½æ•°ï¼‰</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å®ä¾‹æ–¹æ³•</span>        <span class="token comment"># print('homework')</span>        self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span><span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å½“å‰å­¦ç”Ÿæ€»æ•°ä¸ºï¼š'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å°æ˜'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>student1<span class="token punctuation">.</span>do_homework<span class="token punctuation">(</span><span class="token punctuation">)</span>student2 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å°çº¢'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>student2<span class="token punctuation">.</span>do_homework<span class="token punctuation">(</span><span class="token punctuation">)</span>student3 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å°O'</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span>student3<span class="token punctuation">.</span>do_homework<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># æ³¨é‡Šä¸Šé¢student1-3ä¸‰è¡Œï¼Œä¸æ‰“å°ä»»ä½•ä¸œè¥¿ï¼Œå› ä¸ºæ²¡æœ‰å»è°ƒç”¨æ­¤ç±»</span><span class="token keyword">print</span><span class="token punctuation">(</span>Student<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¡ˆä¾‹ä¸‰ï¼š"><a href="#æ¡ˆä¾‹ä¸‰ï¼š" class="headerlink" title="æ¡ˆä¾‹ä¸‰ï¼š"></a><font size=4>æ¡ˆä¾‹ä¸‰ï¼š</font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age        self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span><span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å½“å‰äººæ•°ï¼š'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>    <span class="token decorator annotation punctuation">@classmethod</span>    <span class="token comment"># è£…é¥°å™¨ï¼ˆé«˜é˜¶å‡½æ•°è®²ï¼‰;å†³å®šç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•çš„ä¸åŒ</span>    <span class="token keyword">def</span> <span class="token function">plus_sum</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>        cls<span class="token punctuation">.</span><span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>Student<span class="token punctuation">.</span>plus_sum<span class="token punctuation">(</span><span class="token punctuation">)</span>student2 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'ss'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>Student<span class="token punctuation">.</span>plus_sum<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># student1 = Student('abc', 8)   # pythonå¯ä»¥ç”¨å¯¹è±¡è°ƒç”¨æ–¹æ³•ï¼Œä½†æ˜¯ä¸å»ºè®®è¿™æ ·åšã€‚</span><span class="token comment"># student1.plus_sum()</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a><font size=5>é™æ€æ–¹æ³•</font></h1><p>å¤§éƒ¨åˆ†å¯ä»¥ä½¿ç”¨ç±»æ–¹æ³•ï¼Œå‡ ä¹å’Œæ™®é€šå‡½æ•°æ²¡åŒºåˆ«ã€‚ï¼ˆä¸æ¨èä½¿ç”¨é™æ€æ–¹æ³•ï¼Œå¾ˆç†Ÿç»ƒæ— æ‰€è°“ã€‚ï¼‰  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age        self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span><span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'å½“å‰äººæ•°ï¼š'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>    <span class="token decorator annotation punctuation">@classmethod</span>    <span class="token comment"># ç±»æ–¹æ³•è£…é¥°å™¨ï¼ˆé«˜é˜¶å‡½æ•°è®²ï¼‰;å†³å®šç±»æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•çš„ä¸åŒ</span>    <span class="token keyword">def</span> <span class="token function">plus_sum</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>        cls<span class="token punctuation">.</span><span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token number">1</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>cls<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span>        <span class="token comment"># print(self.name)   # ä¸èƒ½è®¿é—®å®ä¾‹å˜é‡ï¼›ä¸‹é¢çš„é™æ€æ–¹æ³•åŒæ ·ä¸èƒ½è®¿é—®å®ä¾‹å˜é‡</span>    <span class="token decorator annotation punctuation">@staticmethod</span>   <span class="token comment"># é™æ€æ–¹æ³•è£…é¥°å™¨ã€‚ï¼ˆå¯¹è±¡å’Œç±»å‡å¯è°ƒç”¨ï¼‰</span>    <span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>Student<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span>   <span class="token comment"># åŸºæœ¬ä¸Šå’Œç±»æ–¹æ³•ä¸€æ ·ï¼Œåªæ˜¯æ²¡æœ‰æ˜¾å¼ä¼ å…¥cls</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'This is a static method'</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>Student<span class="token punctuation">.</span>plus_sum<span class="token punctuation">(</span><span class="token punctuation">)</span>student2 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'ss'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>Student<span class="token punctuation">.</span>plus_sum<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># student1.add(1, 2)   # å¯¹è±¡è°ƒç”¨é™æ€æ–¹æ³•</span><span class="token comment"># Student.add(1, 4)   # ç±»è°ƒç”¨é™æ€æ–¹æ³•</span><span class="token comment"># student1.plus_sum()   # å¯¹è±¡è°ƒç”¨ç±»æ–¹æ³•</span><span class="token comment"># Student.plus_sum()    # ç±»è°ƒç”¨ç±»æ–¹æ³•</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="æˆå‘˜çš„å¯è§æ€§"><a href="#æˆå‘˜çš„å¯è§æ€§" class="headerlink" title="æˆå‘˜çš„å¯è§æ€§"></a><font size=5>æˆå‘˜çš„å¯è§æ€§</font></h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>do_english_homework<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># åœ¨ç±»çš„å†…éƒ¨ï¼Œä¸€ä¸ªå‡½æ•°å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªå‡½æ•°ã€‚ï¼ˆå†…éƒ¨è°ƒç”¨ï¼‰</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">do_english_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>        <span class="token comment"># self.__class__.sum += 1</span>        <span class="token comment"># print('å½“å‰å­¦ç”Ÿæ€»æ•°ä¸ºï¼š' + str(self.__class__.sum))</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å°æ˜'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>student1<span class="token punctuation">.</span>do_homework<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># åœ¨å¯¹è±¡çš„å¤–éƒ¨è°ƒç”¨ï¼Œdo_homeworkæ–¹æ³•</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ç±»çš„ä¸å®‰å…¨"><a href="#ç±»çš„ä¸å®‰å…¨" class="headerlink" title="ç±»çš„ä¸å®‰å…¨"></a><font size=5>ç±»çš„ä¸å®‰å…¨</font></h1><p>&emsp;&emsp;ä¸€ä¸ªå€¡è®®ï¼šä¸€ä¸ªç±»ï¼Œå®ƒä¸‹é¢çš„ä¸€äº›æ•°æ®å˜é‡ï¼Œæ˜¯ç±»éå¸¸é‡è¦çš„ç‰¹å¾æ•°æ®ï¼Œå¦‚æœè¦ä¿®æ”¹ç±»ç‰¹å¾çš„å€¼ï¼Œä¸å»ºè®®é€šè¿‡ç›´æ¥è®¿é—®å˜é‡çš„æ–¹å¼ï¼Œæ¥æ”¹å˜å˜é‡çš„çŠ¶æ€<br>&emsp;&emsp;æ‰€æœ‰å¯¹äºç±»ä¸‹é¢çš„å˜é‡çš„æ›´æ”¹ï¼Œå»ºè®®é€šè¿‡æ–¹æ³•æ¥å®Œæˆï¼ˆå¤§éƒ¨åˆ†è¯­è¨€æ‰€æå€¡ï¼‰<br>&emsp;&emsp;ä¸è¦å¯¹å˜é‡åšå¤–éƒ¨ä¿®æ”¹ï¼Œåº”è¯¥é€šè¿‡æ–¹æ³•ä¿®æ”¹  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># def __init__(self, name, age, score):</span><span class="token comment">#     self.name = name</span><span class="token comment">#     self.age = age</span><span class="token comment">#     self.score   # scoreå®šä¹‰å­¦ç”Ÿçš„åˆ†æ•°ï¼Œä½†æ˜¯è¿™æ ·å®šä¹‰ï¼Œä¸‹é¢å¯ä»¥ä½¿ç”¨student1.score = -1ä¿®æ”¹ã€‚æ­£ç¡®å®ä¾‹ï¼š</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age        <span class="token comment"># self.score</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>do_english_homework<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">marking</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token comment"># å¯¹scoreå˜é‡åˆ›å»ºä¸€ä¸ªæ–¹æ³•ï¼Œä½¿ç”¨if/elseåˆ¤æ–­ã€‚</span>        <span class="token keyword">if</span> score <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token string">'ä¸èƒ½å‡ºç°è´Ÿåˆ†'</span>        self<span class="token punctuation">.</span>score <span class="token operator">=</span> score        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'åŒå­¦æœ¬æ¬¡è€ƒè¯•æˆç»©ä¸ºï¼š'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å°æ˜'</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>result <span class="token operator">=</span> student1<span class="token punctuation">.</span>marking<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ç§æœ‰æ–¹æ³•"><a href="#ç§æœ‰æ–¹æ³•" class="headerlink" title="ç§æœ‰æ–¹æ³•"></a><font size=5>ç§æœ‰æ–¹æ³•</font></h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>   <span class="token comment"># å…¶ä»–è¯­è¨€é‡Œé¢ä½¿ç”¨public/private sum = 0æ¥è¡¨ç¤ºå…¬æœ‰æˆ–ç§æœ‰çš„å˜é‡/æ–¹æ³•ï¼Œæ˜¯ä¸èƒ½ä»å¤–éƒ¨è®¿é—®çš„ã€‚</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># __init__è¿™æ ·å‰ååŒä¸‹åˆ’çº¿çš„ï¼Œéƒ½ä¸æ˜¯ç§æœ‰,éªŒè¯ä¸‹é¢"__marking__",çœ‹ç»“æœã€‚</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name            <span class="token comment"># è‡ªå·±å†™ä¸å»ºè®®ä½¿ç”¨"__marking__"ï¼Œ__*__æ˜¯pythonå†…ç½®çš„ä¸€äº›å˜é‡ã€‚</span>        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age        self<span class="token punctuation">.</span>score <span class="token operator">=</span> <span class="token number">0</span>        self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span><span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">def</span> <span class="token function">__marking</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å¯¹æ–¹æ³•/å˜é‡åŠ ä¸ŠåŒä¸‹åˆ’çº¿ï¼Œå°†å…¶å˜ä¸ºç§æœ‰</span>        <span class="token keyword">if</span> score <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token string">'ä¸èƒ½å‡ºç°è´Ÿåˆ†'</span>        self<span class="token punctuation">.</span>score <span class="token operator">=</span> score        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'åŒå­¦æœ¬æ¬¡è€ƒè¯•æˆç»©ä¸ºï¼š'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'haha'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token comment"># result = student1.__marking(89)   # è¿™æ ·è®¿é—®ä¼šæŠ¥é”™ã€‚</span><span class="token comment"># print(result)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">å¤ä¹ ï¼šç±»ä½“ï¼ˆæ•°æ®æˆå‘˜ï¼ˆç±»å˜é‡ï¼‰ï¼‰ã€å®ä¾‹å˜é‡ã€æ„é€ å‡½æ•°ï¼ˆç‰¹æ®Šå®ä¾‹æ–¹æ³•ï¼‰ã€ç±»æ–¹æ³•ã€é™æ€æ–¹æ³•ã€å¯¹è±¡ã€å®ä¾‹åŒ–ã€è£…é¥°å™¨ã€æˆå‘˜å¯è§æ€§  å…¬å¼€çš„ publicï¼ˆå¯ä»¥åœ¨å¤–éƒ¨èµ‹å€¼è°ƒç”¨ï¼‰;ç§æœ‰çš„ privateï¼ˆpythonä¸­åœ¨å˜é‡åå‰é¢åŠ å…¥__åŒä¸‹åˆ’çº¿å³å¯,ä¸èƒ½åœ¨å¤–éƒ¨è°ƒç”¨ï¼Œå¯ä»¥åœ¨ç±»å†…éƒ¨è°ƒç”¨ï¼‰  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h1 id="ç§æœ‰å˜é‡"><a href="#ç§æœ‰å˜é‡" class="headerlink" title="ç§æœ‰å˜é‡"></a><font size=5>ç§æœ‰å˜é‡</font></h1><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age        self<span class="token punctuation">.</span>__score <span class="token operator">=</span> <span class="token number">0</span>   <span class="token comment"># æ³¨ä¸‰</span>        self<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span><span class="token builtin">sum</span> <span class="token operator">+=</span> <span class="token number">1</span>    <span class="token keyword">def</span> <span class="token function">marking</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> score<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">if</span> score <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>            <span class="token keyword">return</span> <span class="token string">'ä¸èƒ½å‡ºç°è´Ÿåˆ†'</span>        self<span class="token punctuation">.</span>score <span class="token operator">=</span> score        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'åŒå­¦æœ¬æ¬¡è€ƒè¯•æˆç»©ä¸ºï¼š'</span> <span class="token operator">+</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>score<span class="token punctuation">)</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'haha'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span>result <span class="token operator">=</span> student1<span class="token punctuation">.</span>marking<span class="token punctuation">(</span><span class="token number">89</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>student1<span class="token punctuation">.</span>__score <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>   <span class="token comment"># æ³¨å›› å’Œ æ³¨ä¸‰ ä¸æ˜¯åŒä¸€ä¸ªå˜é‡å“¦ï¼Œä¸€ä¸ªæ˜¯_Student__scoreä¸€ä¸ªæ˜¯__score</span><span class="token comment"># å®é™…ä¸Šæ˜¯pythonè¯­è¨€çš„åŠ¨æ€ç‰¹æ€§ã€‚å¯¹student1è¿™ä¸ªå¯¹è±¡æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å±æ€§ï¼ˆ__scoreï¼‰,å¹¶ä¸æ˜¯ä¸Šé¢'æ³¨ä¸‰'çš„__score</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span>__score<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span>__dict__<span class="token punctuation">)</span>   <span class="token comment"># éªŒè¯æ³¨å››</span><span class="token comment"># __dict__å‡½æ•°æ‰“å°å‡ºæ¥çš„_Student__scoreå°±æ˜¯è®¾ç½®çš„ç§æœ‰å˜é‡__scoreï¼Œè€Œåé¢çš„__scoreå°±æ˜¯ä¸‹é¢åŠ¨æ€è®¾ç½®çš„student1.__score = -1</span><span class="token comment"># æ‰©å±•ï¼šä¸ºä»€ä¹ˆæˆ‘ä»¬è®¿é—®ç§æœ‰å˜é‡ï¼Œpythonä¼šæŠ¥é”™æ‰¾ä¸åˆ°ç§æœ‰å˜é‡ï¼Œå°±æ˜¯å› ä¸ºpythonå­˜å‚¨ç§æœ‰å˜é‡çš„æ—¶å€™ï¼Œæ›´æ”¹äº†ç§æœ‰å˜é‡çš„åå­—ã€‚</span><span class="token comment"># æ¢å¥è¯è¯´ï¼Œpythonä¿æŠ¤ç§æœ‰å˜é‡ï¼Œå°±æ˜¯ä¿å­˜ç§æœ‰å˜é‡çš„æ—¶å€™æ”¹ä¸ªåå­—è€Œå·²ã€‚</span><span class="token comment"># ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è®²ï¼Œpythonæ˜¯æ²¡æœ‰ç§æœ‰å˜é‡çš„ã€‚å› ä¸ºä¸Šé¢çš„ä¾‹å­print(student1._Student__score)å°±å¯ä»¥è¯»åˆ°ç§æœ‰å˜é‡ã€‚</span><span class="token comment"># ä½†æ˜¯æ—¢ç„¶åˆ«äººè¿™æ ·å†™äº†ï¼Œå°±æœ€å¥½ä¸è¦æ‰“ç ´ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ç»§æ‰¿æ€§"><a href="#ç»§æ‰¿æ€§" class="headerlink" title="ç»§æ‰¿æ€§"></a><font size=5>ç»§æ‰¿æ€§</font></h1><p>&emsp;&emsp;é¢å‘å¯¹è±¡3å¤§ç‰¹æ€§ï¼šç»§æ‰¿æ€§ã€å°è£…æ€§ï¼ˆæŠ½è±¡ï¼‰ã€å¤šæ€æ€§<br>&emsp;&emsp;ç±»çš„ç»„æˆï¼šç±»çš„ç‰¹å¾ï¼ˆå®ä¾‹å˜é‡ã€ç±»å˜é‡ï¼‰ï¼›è¡Œä¸ºï¼ˆå„ç§å„æ ·çš„æ–¹æ³•ï¼‰<br>&emsp;&emsp;ç»§æ‰¿æ€§æœ€åŸºæœ¬çš„å®šä¹‰ï¼šé¿å…æˆ‘ä»¬å®šä¹‰é‡å¤æ€§çš„æ–¹æ³•å’Œå˜é‡ï¼ˆå»ºè®®ä¸€ä¸ªæ¨¡å—åªå†™ä¸€ä¸ªç±»ï¼Œjavaã€C#æ˜¯è¿™æ ·çš„ï¼‰  </p><p>ç»§æ‰¿æ€§.py  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">class</span> <span class="token class-name">Human</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token builtin">sum</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name        self<span class="token punctuation">.</span>age <span class="token operator">=</span> age    <span class="token keyword">def</span> <span class="token function">get_name</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Human'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> ç»§æ‰¿æ€§ <span class="token keyword">import</span> Human<span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>Human<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>Student<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span>   <span class="token comment"># å­ç±»é‡Œé¢æ²¡æœ‰sumå˜é‡ï¼Œç›´æ¥ç»§æ‰¿çš„çˆ¶ç±»</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> ç»§æ‰¿æ€§ <span class="token keyword">import</span> Human<span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>Human<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å“ˆå“ˆ'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span>   <span class="token comment"># é€šè¿‡å¯¹è±¡è°ƒç”¨ç±»å˜é‡</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span>name<span class="token punctuation">)</span>   <span class="token comment"># å®ä¾‹å˜é‡ä¹Ÿå¯ä»¥è¢«å­ç±»ç»§æ‰¿</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>Student<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">)</span>    <span class="token comment"># é€šè¿‡ç±»è°ƒç”¨ç±»å˜é‡</span>student1<span class="token punctuation">.</span>get_name<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># ç»§æ‰¿çˆ¶ç±»çš„æ–¹æ³•</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># å­ç±»é‡Œé¢è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°</span><span class="token keyword">from</span> ç»§æ‰¿æ€§ <span class="token keyword">import</span> Human<span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>Human<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> school<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>school <span class="token operator">=</span> school        Human<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>   <span class="token comment"># è¿™é‡Œå¿…é¡»ä¼ å…¥selfï¼Œç”¨ç±»è°ƒç”¨å®ä¾‹æ–¹æ³•ï¼ˆæ™®é€šæ–¹æ³•çš„è°ƒç”¨ï¼‰</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å“ˆå“ˆ'</span><span class="token punctuation">,</span> <span class="token string">'å°æ˜'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span>age<span class="token punctuation">)</span>Student<span class="token punctuation">.</span>do_homework<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>   <span class="token comment"># ç±»è°ƒç”¨å®ä¾‹æ–¹æ³•,è¿™æ ·selfå°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å‚æ•°</span>student1<span class="token punctuation">.</span>do_homework<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># å¯¹è±¡è°ƒç”¨å®ä¾‹æ–¹æ³•</span><span class="token comment"># åœ¨å¾ˆå¤šè¯­è¨€é‡Œé¢ç±»æ˜¯ä¸èƒ½è°ƒç”¨å®ä¾‹æ–¹æ³•çš„ï¼Œä½†æ˜¯pythonå¯ä»¥ã€‚</span><span class="token comment"># ç¼ºç‚¹ï¼šå¦‚æœçˆ¶ç±»æ”¹åï¼Œå­ç±»ä¸­çš„æ‰€æœ‰çˆ¶ç±»çš„æ–¹æ³•éƒ½è¦æ”¹</span><span class="token comment"># å¼€é—­åŸåˆ™ï¼šä»£ç å¯¹è‡ªèº«æ‰©å±•æ˜¯å¼€æ”¾çš„ï¼Œå¯¹è‡ªèº«çš„æ›´æ”¹æ˜¯å…³é—­çš„ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">from</span> ç»§æ‰¿æ€§ <span class="token keyword">import</span> Human<span class="token keyword">class</span> <span class="token class-name">Student</span><span class="token punctuation">(</span>Human<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> school<span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>school <span class="token operator">=</span> school        <span class="token builtin">super</span><span class="token punctuation">(</span>Student<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>   <span class="token comment"># æœ€å¥½ä½¿ç”¨superå…³é”®å­—è°ƒç”¨çˆ¶ç±»æ„é€ å‡½æ•°</span>    <span class="token keyword">def</span> <span class="token function">do_homework</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'homework'</span><span class="token punctuation">)</span>        <span class="token builtin">super</span><span class="token punctuation">(</span>Student<span class="token punctuation">,</span> self<span class="token punctuation">)</span><span class="token punctuation">.</span>do_homework<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># æ³¨äº”ï¼Œè°ƒç”¨çˆ¶ç±»å®ä¾‹æ–¹æ³•</span>student1 <span class="token operator">=</span> Student<span class="token punctuation">(</span><span class="token string">'å“ˆå“ˆ'</span><span class="token punctuation">,</span> <span class="token string">'å°æ˜'</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>student1<span class="token punctuation">.</span>age<span class="token punctuation">)</span>student1<span class="token punctuation">.</span>do_homework<span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># æ³¨é‡Šæ‰æ³¨äº”ï¼Œä¼˜å…ˆè°ƒç”¨å­ç±»çš„æ–¹æ³•</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> é¢å‘å¯¹è±¡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(å…«)</title>
      <link href="/posts/ed1d.html"/>
      <url>/posts/ed1d.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># å°±æ˜¯ä¸€ä¸ªå‡½æ•°</span>a <span class="token operator">=</span> <span class="token number">1.2345</span>   <span class="token comment"># ä¿ç•™ä¸¤ä½</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>wj_result <span class="token operator">=</span> <span class="token builtin">round</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>   <span class="token comment"># åšå¥½ä½¿ç”¨å˜é‡ï¼Œå‡½æ•°åµŒå¥—å‡½æ•°å¾ˆä¹±ã€‚(ä¸€ä¸ªå»ºè®®è€Œå·²)</span><span class="token keyword">print</span><span class="token punctuation">(</span>wj_result<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å‡½æ•°ä½œç”¨ï¼š"><a href="#å‡½æ•°ä½œç”¨ï¼š" class="headerlink" title="å‡½æ•°ä½œç”¨ï¼š"></a><font size=5>å‡½æ•°ä½œç”¨ï¼š</font></h1><p>&emsp;&emsp;1. åŠŸèƒ½æ€§ï¼ˆæœ‰ä¸€ä¸ªéå¸¸æ˜ç¡®çš„ç›®çš„ï¼‰<br>&emsp;&emsp;2. éšè—ç»†èŠ‚<br>&emsp;&emsp;3. é¿å…ç¼–å†™é‡å¤çš„ä»£ç <br>ç»„ç»‡ä»£ç ã€è‡ªå®šä¹‰å‡½æ•°  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">funcname</span><span class="token punctuation">(</span>parameter_list<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># å‡½æ•°çš„åŸºæœ¬ç»“æ„ï¼šdefå…³é”®å­—å®šä¹‰å‡½æ•°ã€funcnameå‡½æ•°åã€parameter_listå‚æ•°åˆ—è¡¨è¦ç”¨()æ‹¬èµ·æ¥ä»¥:ç»“å°¾</span>    <span class="token keyword">pass</span>   <span class="token comment">#å‡½æ•°ä½“ï¼Œä»£ç å—ï¼Œå‰é¢è¦æœ‰ç¼©è¿›</span>parameter_list å‚æ•°åˆ—è¡¨ï¼Œå¯ä»¥æ²¡æœ‰å‡½æ•°ä½“é‡Œé¢ï¼Œä½¿ç”¨<span class="token keyword">return</span>è¿”å›ç»“æœï¼Œ    <span class="token keyword">return</span> valueï¼Œå¦‚æœæ²¡æœ‰<span class="token keyword">return</span>è¯­å¥é»˜è®¤è¿”å›<span class="token boolean">None</span>ç©ºå€¼<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>å®ç°ä¸¤ä¸ªæ•°å­—ç›¸åŠ   </li><li>æ‰“å°è¾“å…¥çš„å‚æ•°  </li></ol><h2 id="æ¡ˆä¾‹ä¸€ï¼š"><a href="#æ¡ˆä¾‹ä¸€ï¼š" class="headerlink" title="æ¡ˆä¾‹ä¸€ï¼š"></a><font size=4>æ¡ˆä¾‹ä¸€ï¼š</font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python">add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>   <span class="token comment"># æŠ¥é”™name 'add' is not definedè¿™é‡Œä½¿ç”¨çš„addåœ¨pythonä¸­æ˜¯æ‰¾ä¸åˆ°çš„ã€‚</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Python'</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>    result <span class="token operator">=</span> x <span class="token operator">+</span> y    <span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">print</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¡ˆä¾‹äºŒï¼š"><a href="#æ¡ˆä¾‹äºŒï¼š" class="headerlink" title="æ¡ˆä¾‹äºŒï¼š"></a><font size=4>æ¡ˆä¾‹äºŒï¼š</font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># import sys</span><span class="token comment"># sys.setrecursionlimit(100)</span><span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>    result <span class="token operator">=</span> x <span class="token operator">+</span> y    <span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">print</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># è‡ªå·±è°ƒè‡ªå·±ï¼ŒæŠ¥é”™[Previous line repeated 995 more times]é‡å¤äº†995æ¬¡ï¼Œé»˜è®¤å€¼ï¼ˆæˆ–è€…998ï¼Œ1000ï¼‰ï¼Œè®¾ç½®æœ€å¤§é‡å¤æ¬¡æ•°ï¼Œæ³¨æ„çœ‹more timesæ•°å€¼å˜åŒ–</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span>   <span class="token comment"># import sys # sys.setrecursionlimit(100)è®¾ç½®æœ€å¤§é‡å¤æ¬¡æ•°</span>add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Python'</span><span class="token punctuation">)</span><span class="token comment"># å‡½æ•°å’Œå˜é‡ä¸è¦å’Œå†…ç½®çš„é‡å</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ¡ˆä¾‹ä¸‰ï¼š"><a href="#æ¡ˆä¾‹ä¸‰ï¼š" class="headerlink" title="æ¡ˆä¾‹ä¸‰ï¼š"></a><font size=4>æ¡ˆä¾‹ä¸‰ï¼š</font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>    result <span class="token operator">=</span> x <span class="token operator">+</span> y    <span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">w_print</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span>    <span class="token comment"># return True   # æµ‹è¯•æœ‰returnè¿”å›True</span>a <span class="token operator">=</span> add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>b <span class="token operator">=</span> w_print<span class="token punctuation">(</span><span class="token string">'Python'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token comment"># æ‰§è¡Œæµç¨‹ï¼Œ1.defå‡½æ•°å®šä¹‰ï¼Œ2.æŠŠè®¡ç®—ç»“æœèµ‹å€¼ç»™aï¼Œ3.æ‰§è¡Œw_printå‡½æ•°ï¼Œ4.åœ¨def w_print(code):é‡Œé¢ç›´æ¥æ‰“å°â€œPythonâ€;5.æ‰§è¡Œprint(a, b)ï¼Œaæ˜¯3ï¼Œbæ˜¯Noneï¼ˆæ²¡æœ‰returnè¿”å›Noneï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å­¦å¥½å‡½æ•°çš„å‚æ•°ï¼Œæ˜¯å­¦å¥½å‡½æ•°çš„é‡è¦çš„ä¸€ä¸ªç¯èŠ‚ï¼ˆ.pyæ–‡ä»¶æ˜¯æ¨¡å—ï¼Œdefå®šä¹‰çš„æ˜¯å‡½æ•°ï¼‰  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>    result <span class="token operator">=</span> x <span class="token operator">+</span> y    <span class="token keyword">return</span> result<span class="token keyword">def</span> <span class="token function">w_print</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span>    <span class="token keyword">return</span>   <span class="token comment"># å°è¯•æ³¨é‡Šreturn,ä¼šå‘ç°"haha"è¢«æ‰“å°äº†</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'haha'</span><span class="token punctuation">)</span>   <span class="token comment"># åœ¨å‡½æ•°ä¸­ï¼Œreturnåé¢çš„è¯­å¥ä¸ä¼šè¢«æ‰§è¡Œ</span>a <span class="token operator">=</span> add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>b <span class="token operator">=</span> w_print<span class="token punctuation">(</span><span class="token string">'Python'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">def</span> <span class="token function">damage</span><span class="token punctuation">(</span>skill1<span class="token punctuation">,</span> skill2<span class="token punctuation">)</span><span class="token punctuation">:</span>    damage1 <span class="token operator">=</span> skill1 <span class="token operator">*</span> <span class="token number">3</span>    damage2 <span class="token operator">=</span> skill2 <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">10</span>    <span class="token keyword">return</span> damage1<span class="token punctuation">,</span> damage2<span class="token comment"># damages = damage(3, 6)   # ä¸å»ºè®®*1</span><span class="token comment"># print(type(damages))</span><span class="token comment"># print(damages)</span><span class="token comment"># print(damages[0], damages[1])   # ä¸å»ºè®®ä½¿ç”¨æ­¤æ–¹æ³•*1</span><span class="token comment"># ------</span>skill1_damage<span class="token punctuation">,</span> skill2_damage <span class="token operator">=</span> damage<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>   <span class="token comment">#åºåˆ—è§£åŒ…</span><span class="token keyword">print</span><span class="token punctuation">(</span>skill1_damage<span class="token punctuation">,</span> skill2_damage<span class="token punctuation">)</span><span class="token comment"># -------</span><span class="token comment"># a, b, c = 1, 2, 3   # è¿™æ˜¯å˜é‡èµ‹å€¼ï¼Œç­‰åŒäºï¼ša = 1ï¼Œb = 2ï¼Œc = 3</span><span class="token comment"># d = 4, 5, 6   # è¿™æ˜¯ä¸€ä¸ªtupleï¼Œä½¿ç”¨type()å¯ä»¥éªŒè¯</span><span class="token comment"># x, y, z = d   # è¿™å«åºåˆ—è§£åŒ…ï¼Œç›¸å½“äºï¼šx = 4ï¼Œy = 5ï¼Œz = 6</span><span class="token comment"># a = b = c = 1   # ç›¸å½“äºï¼ša = 1ï¼Œb = 1ï¼Œc = 1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><iframe src="https://tool.lu/coderunner/embed/8Gs.html" width="793" height="550" frameborder="0" mozallowfullscreen webkitallowfullscreen allowfullscreen></iframe>  <h1 id="å‡½æ•°å‚æ•°ï¼š"><a href="#å‡½æ•°å‚æ•°ï¼š" class="headerlink" title="å‡½æ•°å‚æ•°ï¼š"></a><font size=5>å‡½æ•°å‚æ•°ï¼š</font></h1><h2 id="1-å¿…é¡»å‚æ•°"><a href="#1-å¿…é¡»å‚æ•°" class="headerlink" title="1.å¿…é¡»å‚æ•°"></a><font size=4>1.å¿…é¡»å‚æ•°</font></h2><p>&emsp;&emsp;æˆ‘ä»¬åœ¨å‡½æ•°çš„å‚æ•°åˆ—è¡¨é‡Œé¢ï¼Œæ‰€å®šä¹‰çš„å‚æ•°ï¼Œæ˜¯å¿…é¡»è¦ä¼ é€’çš„ã€‚  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">def</span> <span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># è¿™é‡Œå¿…é¡»ç»™xï¼Œyå‚æ•°</span>    <span class="token comment"># è¿™é‡Œxå’Œyç§°ä¸ºï¼šå½¢å¼å‚æ•°ï¼Œå½¢å‚</span>    result <span class="token operator">=</span> x <span class="token operator">+</span> y    <span class="token keyword">return</span> resulta <span class="token operator">=</span> add<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>   <span class="token comment"># å‡½æ•°è°ƒç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå¾€å‡½æ•°çš„å‚æ•°åˆ—è¡¨é‡Œé¢ä¼ é€’çš„å‚æ•°çš„å®é™…çš„å–å€¼ã€‚--å®é™…å‚æ•°ï¼Œaæ˜¯å®å‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-å…³é”®å­—å‚æ•°"><a href="#2-å…³é”®å­—å‚æ•°" class="headerlink" title="2.å…³é”®å­—å‚æ•°"></a><font size=4>2.å…³é”®å­—å‚æ•°</font></h2><p>&emsp;&emsp;å…³é”®å­—å‚æ•°å’Œå¿…é¡»å‚æ•°çš„åŒºåˆ«ï¼šåœ¨äºå‡½æ•°çš„è°ƒç”¨ä¸Šï¼Œä¸åœ¨äºå‡½æ•°çš„å®šä¹‰ä¸Šã€‚å®šä¹‰æ˜¯ç›¸åŒçš„ï¼Œè°ƒç”¨ä¸åŒã€‚  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token keyword">def</span> <span class="token function">add1</span><span class="token punctuation">(</span>x1<span class="token punctuation">,</span> y1<span class="token punctuation">)</span><span class="token punctuation">:</span>    result1 <span class="token operator">=</span> x1 <span class="token operator">+</span> y1    <span class="token keyword">return</span> result1a1 <span class="token operator">=</span> add1<span class="token punctuation">(</span>y1<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">,</span> x1<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">)</span>   <span class="token comment"># å…³é”®å­—å‚æ•°ï¼Œåœ¨å‡½æ•°è°ƒç”¨çš„æ—¶å€™æ˜ç¡®å‘Šè¯‰pythonï¼Œç»™å®šçš„å®å‚æ˜¯å…·ä½“ç»™å“ªä¸ªå½¢å‚çš„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="3-é»˜è®¤å‚æ•°"><a href="#3-é»˜è®¤å‚æ•°" class="headerlink" title="3.é»˜è®¤å‚æ•°"></a><font size=4>3.é»˜è®¤å‚æ•°</font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># -*- coding: utf-8 -*-</span><span class="token comment"># def print_student_files(name, gender, age,</span><span class="token comment">#                         college):</span><span class="token comment">#     print('æˆ‘å«' + name)</span><span class="token comment">#     print('æˆ‘ä»Šå¹´' + age + 'å²')</span><span class="token comment">#     print('æˆ‘æ˜¯' + gender + 'ç”Ÿ')</span><span class="token comment">#     print('æˆ‘åœ¨' + college + 'ä¸Šå­¦')</span><span class="token comment"># print_student_files('å¤§å£®', 'ç”·', '8', 'å“ˆå“ˆå°å­¦')</span><span class="token keyword">def</span> <span class="token function">print_student_files</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> gender<span class="token operator">=</span><span class="token string">'ç”·'</span><span class="token punctuation">,</span> age<span class="token operator">=</span><span class="token string">'8'</span><span class="token punctuation">,</span>                        college<span class="token operator">=</span><span class="token string">'å“ˆå“ˆå°å­¦'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>   <span class="token comment"># ç»™å½¢å‚è®¾ç½®é»˜è®¤å€¼ï¼Œæœªè®¾ç½®çš„å½¢å‚æ˜¯ä¸€å®šè¦ä¼ å®å‚çš„ã€‚</span>    <span class="token comment">#ï¼ˆä¸èƒ½å¤¹æ‚ç€æ··ï¼Œæ¯”å¦‚ï¼šï¼ˆname, gender='ç”·', ageï¼‰æ˜¯ä¸å¯ä»¥çš„ã€‚ï¼‰</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æˆ‘å«'</span> <span class="token operator">+</span> name<span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æˆ‘ä»Šå¹´'</span> <span class="token operator">+</span> age <span class="token operator">+</span> <span class="token string">'å²'</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æˆ‘æ˜¯'</span> <span class="token operator">+</span> gender <span class="token operator">+</span> <span class="token string">'ç”Ÿ'</span><span class="token punctuation">)</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'æˆ‘åœ¨'</span> <span class="token operator">+</span> college <span class="token operator">+</span> <span class="token string">'ä¸Šå­¦'</span><span class="token punctuation">)</span>print_student_files<span class="token punctuation">(</span><span class="token string">'å°ç‰›'</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'--------åˆ†å‰²çº¿--------'</span><span class="token punctuation">)</span>print_student_files<span class="token punctuation">(</span><span class="token string">'å°ä¹'</span><span class="token punctuation">,</span> <span class="token string">'å¥³'</span><span class="token punctuation">,</span> <span class="token string">'7'</span><span class="token punctuation">)</span>   <span class="token comment"># å³ä½¿æœ‰äº†é»˜è®¤å€¼ï¼Œå®å‚ä¼ é€’çš„å€¼ä¹Ÿä¼šè¦†ç›–é»˜è®¤å€¼</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'--------åˆ†å‰²çº¿--------'</span><span class="token punctuation">)</span>print_student_files<span class="token punctuation">(</span><span class="token string">'å°çº¢'</span><span class="token punctuation">,</span> <span class="token string">'å¥³'</span><span class="token punctuation">,</span> college <span class="token operator">=</span> <span class="token string">'å–œå–œå°å­¦'</span><span class="token punctuation">)</span>   <span class="token comment"># å…³é”®å­—èµ‹å€¼ï¼Œæ˜¯ä¸ç”¨è€ƒè™‘ä¼ å‚é¡ºåºçš„ã€‚</span><span class="token comment">#ï¼ˆåŒä¸Šï¼Œä¸èƒ½å¤¹æ‚æ··å’Œï¼Œæ¯”å¦‚ï¼ˆ'å°çº¢', gender='å¥³', '8'ï¼‰ï¼Œè¿™æ ·å­ä¸è¡Œçš„ã€‚åè¿‡æ¥å…³é”®å­—å‚æ•°ä¸­é—´å¤¹æ‚ç€å®å‚ä¹Ÿä¸è¡Œã€‚ï¼‰</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(ä¸ƒ)</title>
      <link href="/posts/dd93.html"/>
      <url>/posts/dd93.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h2 id="Pythoné¡¹ç›®çš„ç»„ç»‡ç»“æ„ï¼š"><a href="#Pythoné¡¹ç›®çš„ç»„ç»‡ç»“æ„ï¼š" class="headerlink" title="Pythoné¡¹ç›®çš„ç»„ç»‡ç»“æ„ï¼š"></a><font size=5><strong>Pythoné¡¹ç›®çš„ç»„ç»‡ç»“æ„ï¼š</strong></font></h2><p><img src="/medias/drawing-bed/python7/0.jpg"></p><h2 id="ç›´æ¥è¡¨ç°å½¢å¼ï¼š"><a href="#ç›´æ¥è¡¨ç°å½¢å¼ï¼š" class="headerlink" title="ç›´æ¥è¡¨ç°å½¢å¼ï¼š"></a><font size=5><strong>ç›´æ¥è¡¨ç°å½¢å¼ï¼š</strong></font></h2><p>åŒ… â€”â€” æ–‡ä»¶å¤¹<br>&emsp;&emsp;åå­—å°±æ˜¯æ–‡ä»¶å¤¹åï¼ˆåŒ…é‡Œé¢å¯ä»¥æœ‰å­åŒ…ï¼Œæ–‡ä»¶å¤¹ä¸­æœ‰æ–‡ä»¶å¤¹ï¼Œå¾ˆçµæ´»ï¼‰<br>æ¨¡å— â€”â€” *.pyæ–‡ä»¶<br>&emsp;&emsp;åå­—å°±æ˜¯æ–‡ä»¶åï¼ŒåŒºåˆ†ä¸åŒåŒ…çš„ç›¸åŒåçš„æ¨¡å—<br>class â€”â€” ç±»<br>&emsp;&emsp;å†™åœ¨.pyæ–‡ä»¶é‡Œ<br>å‘½åç©ºé—´ï¼šï¼ˆabc.c4å’Œxyz.c4ï¼‰abcå’Œxyzæ˜¯æ–‡ä»¶å¤¹åï¼ˆåŒ…åï¼‰ï¼Œc4æ˜¯åŒåæ–‡ä»¶ï¼Œä¸åŒåŒ…ã€‚abc.c4ç§°ä¸ºè·¯å¾„ä¹Ÿæ˜¯å‘½åç©ºé—´<br>åŒ…å’Œæ–‡ä»¶å¤¹åŒºåˆ†ï¼šåŒ…é‡Œé¢åŒ…å«ä¸€ä¸ª__init__.pyæ–‡ä»¶ï¼ˆå¯ä»¥æ˜¯ç©ºç™½æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯æ¨¡å—ï¼‰å¼•ç”¨__init__.pyæ¨¡å—ï¼Œç›´æ¥å¼•ç”¨åŒ…åå³å¯<br>æ–‡ä»¶å¤¹é‡Œæ²¡æœ‰__init__.pyå°±æ˜¯ä¸€ä¸ªæ™®é€šæ–‡ä»¶å¤¹  </p><center>-----------------------åˆ†å‰²çº¿-----------------------</center>import(å¯¼å…¥æ¨¡å—ä½¿ç”¨éº»çƒ¦)ã€from..import(å¯¼å…¥æ¨¡å—ç›´æ¥ä½¿ç”¨ï¼Œä¸å»ºè®®ç›´æ¥ä½¿ç”¨import *)ã€import..as(å¯¹importå¯¼å…¥è®¾ç½®åˆ«å)ï¼Œé¿å…å¾ªç¯å¯¼å…¥  <p><strong>çº¦å®šç›®å½•ç»“æ„ï¼š</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon workdir<span class="token punctuation">]</span><span class="token comment"># tree A</span>Aâ”œâ”€â”€ A<span class="token punctuation">.</span>pyâ”œâ”€â”€ Bâ”‚   â””â”€â”€ B<span class="token punctuation">.</span>pyâ””â”€â”€ C    â””â”€â”€ C<span class="token punctuation">.</span>py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å†…å®¹ï¼š</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># cat B/B.py  #è®¾ç½®å˜é‡</span>a <span class="token operator">=</span> <span class="token number">1</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># cat C/C.py  #è®¾ç½®å˜é‡</span>c <span class="token operator">=</span> <span class="token number">3</span>d <span class="token operator">=</span> <span class="token number">4</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># cat A.py </span><span class="token keyword">import</span> B<span class="token punctuation">.</span>B   <span class="token comment">#å¯¼å…¥B/B.pyæ¨¡å—</span><span class="token keyword">print</span> <span class="token punctuation">(</span>B<span class="token punctuation">.</span>B<span class="token punctuation">.</span>a<span class="token punctuation">)</span>   <span class="token comment">#æ‰“å°B.pyæ¨¡å—é‡Œ çš„å˜é‡a</span><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># python A.py </span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># cat A.py </span><span class="token keyword">from</span> B<span class="token punctuation">.</span>B <span class="token keyword">import</span> a   <span class="token comment">#å¯¼å…¥B.pyé‡Œé¢çš„aå˜é‡</span><span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>   <span class="token comment">#ç›´æ¥ä½¿ç”¨</span><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># python A.py </span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># cat A.py </span><span class="token keyword">import</span> B<span class="token punctuation">.</span>B <span class="token keyword">as</span> NAME   <span class="token comment">#è®¾ç½®åˆ«å</span><span class="token keyword">print</span> <span class="token punctuation">(</span>NAME<span class="token punctuation">.</span>a<span class="token punctuation">,</span>NAME<span class="token punctuation">.</span>b<span class="token punctuation">)</span>   <span class="token comment">#æ‰“å°åˆ«å+å˜é‡å</span><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># python A.py </span><span class="token number">1</span> <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># cat A.py </span><span class="token keyword">from</span> B<span class="token punctuation">.</span>B <span class="token keyword">import</span> a<span class="token punctuation">,</span> \   <span class="token comment">#æ¢è¡Œæ–¹å¼</span>    b<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># python A.py </span><span class="token number">1</span> <span class="token number">2</span><span class="token comment"># from B.B import (a, æ¢è¡Œæ–¹å¼2</span><span class="token comment">#     b)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># cat B/__init__.py </span>H <span class="token operator">=</span> <span class="token string">"haha"</span>   <span class="token comment">#åœ¨æ¨¡å—ç›®å½•ç›´æ¥ç¼–å†™__init__.pyæ–‡ä»¶</span><span class="token keyword">print</span><span class="token punctuation">(</span>H<span class="token punctuation">)</span><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># cat A.py </span><span class="token keyword">import</span> B   <span class="token comment">#ç›´æ¥å¼•ç”¨åŒ…B</span><span class="token punctuation">(</span>py3<span class="token punctuation">)</span> <span class="token punctuation">[</span>root@bogon A<span class="token punctuation">]</span><span class="token comment"># python A.py </span>haha   <span class="token comment">#ç›´æ¥å‡ºç»“æœ</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><center>-----------------------åˆ†å‰²çº¿-----------------------</center><p><strong>åŒ…çš„å¼•ç”¨é—®é¢˜</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">$ tree workdir workdirâ”œâ”€â”€ README<span class="token punctuation">.</span>mdâ”œâ”€â”€ test1â”‚   â”œâ”€â”€ c1<span class="token punctuation">.</span>pyâ”‚   â”œâ”€â”€ __pycache__â”‚   â”‚   â””â”€â”€ c1<span class="token punctuation">.</span>cpython<span class="token operator">-</span><span class="token number">37.</span>pycâ”‚   â””â”€â”€ test2â”‚       â”œâ”€â”€ c1<span class="token punctuation">.</span>pyâ”‚       â””â”€â”€ __pycache__â”‚           â””â”€â”€ c1<span class="token punctuation">.</span>cpython<span class="token operator">-</span><span class="token number">37.</span>pycâ””â”€â”€ test2    â”œâ”€â”€ c2<span class="token punctuation">.</span>py    â””â”€â”€ __pycache__        â””â”€â”€ c2<span class="token punctuation">.</span>cpython<span class="token operator">-</span><span class="token number">37.</span>pycA<span class="token operator">=</span><span class="token operator">/</span>workdir<span class="token operator">/</span>test1<span class="token operator">/</span>c1<span class="token punctuation">.</span>pyB<span class="token operator">=</span><span class="token operator">/</span>workdir<span class="token operator">/</span>test1<span class="token operator">/</span>test2<span class="token operator">/</span>c1<span class="token punctuation">.</span>pyC<span class="token operator">=</span><span class="token operator">/</span>workdir<span class="token operator">/</span>test2<span class="token operator">/</span>c2<span class="token punctuation">.</span>py<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Aå¯ä»¥è°ƒç”¨B<br>Cå¯ä»¥è°ƒç”¨A<br>Aå†è°ƒç”¨Cå‡ºé”™  </p><p><strong>æ³¨æ„:</strong> </p><p>åŒ…çš„å¼•ç”¨ï¼Œä¸ªäººç†è§£ï¼šè¢«å¼•ç”¨çš„æ¨¡å—ä¸­åŠ å…¥ if <strong>name</strong> == â€˜<strong>main</strong>â€˜: å‡½æ•°ï¼Œè¿™æ ·å¯ä»¥åªå¼•ç”¨å‡½æ•°ï¼Œä¸ä¼šæ‰§è¡Œ â€œmainâ€ã€‚<br>è¢«å¼•ç”¨æ¨¡å—åŠ å…¥ <strong>all</strong> = [â€˜aâ€™, â€˜câ€™]ï¼Œå¼•ç”¨æ—¶ä½¿ç”¨ from model.mod import *ï¼Œè¿™æ ·åªä¼šå¼•å…¥è¢«å¼•æ¨¡å—allå®šä¹‰çš„å‡½æ•°ï¼Œä¸ä¼šå¼•å…¥å…¶ä»–å‡½æ•°<br>å°†å‡½æ•°å®šä¹‰åœ¨ä¸€ä¸ªåŒ…ä¸­ï¼Œè¿™æ ·æ¯”è¾ƒå¥½ä¸€ç‚¹<br>ç›¸äº’å¼•ç”¨ä¼šé€ æˆä¸€äº›é”™è¯¯ã€‚å½“è¢«å¼•æ¨¡å—å‡ºç° sys.path.append(â€˜..â€™) çš„æ—¶å€™ï¼Œæˆ–è€…å…¶ä»–çŠ¶å†µã€‚  </p><p>&emsp;&emsp;<strong>æºç ä¸‹è½½</strong> <a href="https://wujiops.coding.net/p/xuexibiji/d/xuexibiji/git/raw/master/python7.zip" title="python7.zip">download</a> </p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> åŒ…å’Œæ¨¡å— </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(å…­)</title>
      <link href="/posts/4d1e.html"/>
      <url>/posts/4d1e.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h2 id="ä»€ä¹ˆæ˜¯è¡¨è¾¾å¼"><a href="#ä»€ä¹ˆæ˜¯è¡¨è¾¾å¼" class="headerlink" title="ä»€ä¹ˆæ˜¯è¡¨è¾¾å¼"></a><font size=5><strong>ä»€ä¹ˆæ˜¯è¡¨è¾¾å¼</strong></font></h2><p><strong>Cè¯­è¨€å¯¹è¡¨è¾¾å¼å®šä¹‰ï¼š</strong> <strong>è¡¨è¾¾å¼</strong>ï¼ˆExpressionï¼‰æ˜¯<strong>è¿ç®—ç¬¦</strong>ï¼ˆoperatorï¼‰å’Œ<strong>æ“ä½œæ•°</strong>ï¼ˆoperandï¼‰æ‰€<strong>æ„æˆçš„åºåˆ—</strong>ã€‚<br><strong>ç¼–ç¨‹è¯­è¨€æ˜¯æ¨¡æ‹Ÿç°å®ç”Ÿæ´»çš„ã€‚</strong><br><strong>â€˜=â€™</strong>,å·æ˜¯èµ‹å€¼è¿ç®—ç¬¦ï¼ˆè¿ç®—ç¬¦ï¼šå‡½æ•°çš„è°ƒç”¨ï¼Œ<strong>and</strong>ï¼Œ<strong>or</strong>ç­‰éƒ½æ˜¯è¡¨è¾¾å¼ï¼‰<br>ä¾‹å¦‚ï¼š<strong>a = 1ï¼Œb = 2ï¼Œc = 3</strong>è®¡ç®—<strong>a + b * c</strong>å’Œ<strong>a or b and c</strong>  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> c <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">+</span> b <span class="token operator">*</span> c   <span class="token comment"># ç±»æ¯”æ•°å­¦è¿ç®—ï¼Œä¹˜å·ä¼˜å…ˆçº§æ˜¯é«˜äºåŠ å·çš„ã€‚</span><span class="token number">7</span><span class="token operator">>></span><span class="token operator">></span> a <span class="token keyword">or</span> b <span class="token keyword">and</span> c   <span class="token comment"># andä¼˜å…ˆçº§é«˜äºor</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼Œä»é«˜åˆ°ä½ï¼ˆä»…ä¾›å‚è€ƒï¼‰<br><img src="/medias/drawing-bed/python6/0.jpg"></p><p>è§£é‡Šå™¨è§£æè¡¨è¾¾å¼çš„é¡ºåºï¼šä»å·¦å‘å³ï¼ˆå·¦ç»“åˆï¼‰ï¼ŒåŠ ()å¯ä»¥è°ƒé«˜ä¼˜å…ˆçº§ï¼Œç±»æ¯”æ•°å­¦å››åˆ™è¿ç®—<br>c = a + bï¼ˆä¾‹å¤–ï¼šå³ç»“åˆï¼Œè¦å…ˆè®¡ç®—a + bï¼‰æ€»ç»“ï¼šä¸Šè¿°è¡¨æ ¼ä»…ä¾›å‚è€ƒ  </p><p>æ€è€ƒï¼š<strong>a = 1,b = 2,c = 2,not a or b +2 == c</strong>ç”¨æ‹¬å·æ ‡æ³¨å‡ºè¡¨è¾¾å¼çš„é¡ºåºï¼ˆå¸¦æ‹¬å·å’Œä¸å¸¦æ‹¬å·é¡ºåºç›¸åŒï¼‰<br>å‚è€ƒè¡¨æ ¼ï¼šä¼˜å…ˆçº§åº”è¯¥æ˜¯ <strong>+ã€==ã€notã€or</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> c <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">not</span> a <span class="token keyword">or</span> b <span class="token operator">+</span> <span class="token number">2</span> <span class="token operator">==</span> c<span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">not</span> a <span class="token keyword">or</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> c<span class="token punctuation">)</span>   <span class="token comment"># notä¼˜å…ˆçº§æœ¬æ¥å°±é«˜äºor</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token keyword">not</span> a<span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>b <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">==</span> c<span class="token punctuation">)</span>   <span class="token comment"># è¿™ä¸ªæ€è·¯ï¼Œoræœ¬æ¥å°±æ˜¯æœ€åï¼Œæ˜¯notå’Œ==çš„æ¯”è¾ƒ</span><span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>é€»è¾‘è¿ç®—ç¬¦ä¼˜å…ˆçº§ï¼š<strong>not &gt; and &gt; or</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># pythonåœ¨æ¯ä¸€è¡Œçš„æœ«å°¾ï¼Œä¸éœ€è¦å¼ºåˆ¶åŠ ;åˆ†å·,åŠ äº†;ä¹Ÿä¸ä¼šæŠ¥é”™</span><span class="token comment"># &#123;</span><span class="token comment">#   if class function  #å…¶å®ƒè¯­è¨€éœ€è¦&#123;&#125;åŒ…è£¹ä»£ç å—,pythonä¸­ä¸éœ€è¦</span><span class="token comment"># &#125;</span><span class="token comment"># pythonä¸­é ç¼©è¿›åŒºåˆ†ä»£ç å’Œä»£ç å—</span><span class="token comment"># æµç¨‹æ§åˆ¶è¯­å¥</span><span class="token comment"># æ¡ä»¶æ§åˆ¶  å¾ªç¯æ§åˆ¶  åˆ†æ”¯</span><span class="token comment"># å…¶å®ƒè¯­è¨€æ¡ä»¶æ§åˆ¶:if else</span><span class="token comment"># å…¶å®ƒè¯­è¨€å¾ªç¯æ§åˆ¶:for while</span><span class="token comment"># å…¶å®ƒè¯­è¨€åˆ†æ”¯æ§åˆ¶:switch</span><span class="token triple-quoted-string string">'''ä»£ç æ˜¯ä¸ºäº†è§£å†³ç°å®ä¸­çš„é€‰æ‹©æ€§é—®é¢˜ã€‚pythonä»£ç ä¸èƒ½è¢«æ··æ·†å‹ç¼©'''</span><span class="token comment"># mood = True</span><span class="token comment">#</span><span class="token comment"># if mood == False :</span><span class="token comment">#     print('go to left')</span><span class="token comment"># else :</span><span class="token comment">#     print('go to right')</span><span class="token comment"># print('-----')</span><span class="token comment"># if mood :</span><span class="token comment">#     print('go to left')</span><span class="token comment"># else :</span><span class="token comment">#     print('go to right')</span><span class="token comment"># pythonæ¡ä»¶æ§åˆ¶if else</span>a <span class="token operator">=</span> <span class="token number">1</span>b <span class="token operator">=</span> <span class="token number">2</span><span class="token keyword">if</span> a <span class="token operator">></span> b<span class="token punctuation">:</span>    <span class="token comment">#ifåé¢å¯ä»¥æ˜¯è¡¨è¾¾å¼ã€boolã€ç©ºåˆ—è¡¨ç­‰</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'err'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ğŸ˜˜'</span><span class="token punctuation">)</span>c <span class="token operator">=</span> <span class="token number">2</span>d <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">if</span> d <span class="token operator">==</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'null'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'ğŸ˜±'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><iframe src="https://tool.lu/coderunner/embed/7X4.html" width="793" height="550" frameborder="0" mozallowfullscreen webkitallowfullscreen allowfullscreen></iframe><h2 id="åˆ†æ”¯çš„åŸºæœ¬è¯­æ³•"><a href="#åˆ†æ”¯çš„åŸºæœ¬è¯­æ³•" class="headerlink" title="åˆ†æ”¯çš„åŸºæœ¬è¯­æ³•"></a><font size=5><strong>åˆ†æ”¯çš„åŸºæœ¬è¯­æ³•</strong></font></h2><p>&emsp;&emsp;<strong>ï¼ˆå¯ä»¥å‚è€ƒshellä¸­çš„if/elseï¼‰</strong></p><p>1.ifæ¡ä»¶è¡¨è¾¾å¼ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">è¯­å¥1  è¯­å¥2  <span class="token punctuation">..</span>.  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>2.æ¡ä»¶è¡¨è¾¾å¼å°±æ˜¯è®¡ç®—ç»“æœå¿…é¡»ä¸ºå¸ƒå°”å€¼å¾—è¡¨è¾¾å¼<br>3.è¡¨è¾¾å¼åé¢çš„å†’å·ä¸èƒ½å°‘<br>4.æ³¨æ„ifåé¢å‡ºç°çš„è¯­å¥ï¼Œå¦‚æœå±äºifè¯­å¥å—ï¼Œåˆ™å¿…é¡»åŒä¸€ä¸ªç¼©è¿›ç­‰çº§<br>5.æ¡ä»¶è¡¨è¾¾å¼ç»“æœä¸ºTrueæ‰§è¡Œifåé¢çš„ç¼©è¿›è¯­å¥å—<br>åŒå‘åˆ†æ”¯ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">if</span> æ¡ä»¶è¡¨è¾¾å¼:    è¯­å¥1    è¯­å¥2    <span class="token punctuation">..</span>.  else:    è¯­å¥1    è¯­å¥2    <span class="token punctuation">..</span>.  <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;åŒå‘åˆ†æ”¯æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œå½“ç¨‹åºæ‰§è¡Œåˆ°ifâ€¦â€¦elseâ€¦â€¦è¯­å¥çš„æ—¶å€™ï¼Œä¸€å®šä¼šæ‰§è¡Œifæˆ–elseä¸­çš„ä¸€ä¸ªï¼Œä¹Ÿä»…æ‰§è¡Œä¸€ä¸ª<br>&emsp;&emsp;ç¼©è¿›é—®é¢˜ï¼Œifå’Œelseä¸€ä¸ªå±‚æ¬¡ï¼Œå…¶ä½™è¯­å¥ä¸€ä¸ªå±‚æ¬¡ã€‚<br>å¤šçº¿è·¯åˆ†æ”¯ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">if</span> æ¡ä»¶è¡¨è¾¾å¼:  è¯­å¥1<span class="token keyword">elif</span> æ¡ä»¶è¡¨è¾¾å¼:  è¯­å¥1<span class="token keyword">elif</span> æ¡ä»¶è¡¨è¾¾å¼:  è¯­å¥1else:  è¯­å¥1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>ifè¯­å¥å…¶ä»–</strong><br>1.ifè¯­å¥å¯ä»¥åµŒå¥—ä½¿ç”¨ï¼Œä½†ä¸æ¨èã€‚<br>2.pythonæ²¡æœ‰switch-caseè¯­å¥ã€‚  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token triple-quoted-string string">'''snippet ç‰‡æ®µ,vscodeä¸­ä½¿ç”¨'''</span><span class="token keyword">if</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span> <span class="token comment"># ç©ºè¯­å¥/å ä½è¯­å¥,é¿å…æŠ¥é”™.ç”¨äºapiæ¥å£ç­‰</span><span class="token keyword">if</span> <span class="token boolean">False</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span><span class="token triple-quoted-string string">'''if/elseå¯ä»¥å‚è€ƒshellåµŒå¥—'''</span><span class="token keyword">if</span> <span class="token boolean">True</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span>    <span class="token keyword">if</span> <span class="token boolean">False</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">else</span><span class="token punctuation">:</span>        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">pass</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç®€å•äº¤äº’ã€if/elseã€è„šæœ¬</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python">account <span class="token operator">=</span> <span class="token string">'user'</span>password <span class="token operator">=</span> <span class="token string">'123'</span><span class="token comment"># pythonå»ºè®®å˜é‡åçš„å®šä¹‰è§„èŒƒï¼šåç§°æœ€å¥½éƒ½æ˜¯å°å†™çš„ï¼Œç»„åˆå•è¯ç”¨ä¸‹åˆ’çº¿åˆ†å‰²</span><span class="token comment"># å‘½ä»¤è¡Œæ¥å—ç”¨æˆ·è¾“å…¥</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'please input account'</span><span class="token punctuation">)</span>user_account <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'please input password'</span><span class="token punctuation">)</span>user_password <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># if user_account == 'hello' and user_password == '123456' :</span><span class="token comment">#     print('success')</span><span class="token comment"># else :</span><span class="token comment">#     print('error')</span><span class="token keyword">if</span> account <span class="token operator">==</span> user_account <span class="token keyword">and</span> password <span class="token operator">==</span> user_password<span class="token punctuation">:</span>  <span class="token comment">#æ³¨æ„è¿™é‡Œè¡¨è¾¾å¼ä¼˜å…ˆçº§å…³ç³»,å¿…è¦æ—¶ç”¨()è°ƒæ•´ä¼˜å…ˆçº§</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#--*--coding:utf-8--*--</span><span class="token triple-quoted-string string">'''å˜é‡a=xa=1;print(apple)a=2;print(orange)a=3;print(banana)a=other;print('shopping')'''</span>a <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment"># å¦‚æœç›´æ¥è¿™æ ·å†™ï¼Œå‘½ä»¤è¡Œè¾“å…¥typeæ˜¯strï¼Œifåˆ¤æ–­è¦ç”¨a == '1'ï¼Œæˆ–è€…è¿›è¡Œè½¬æ¢a = int(a)</span><span class="token comment"># input()å‡½æ•°æ¥å—çš„æ˜¯å­—ç¬¦ä¸²str</span><span class="token comment"># print(a)</span><span class="token comment"># if a==1:</span><span class="token comment">#     print('apple')</span><span class="token comment"># else:</span><span class="token comment">#     if a==2:</span><span class="token comment">#         print('orange')</span><span class="token comment">#     else:</span><span class="token comment">#         if a==3:</span><span class="token comment">#             print('banana')</span><span class="token comment">#         else:</span><span class="token comment">#             print('shopping')</span><span class="token comment"># a = int(a)</span><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">#æ‰“å°açš„ç±»å‹ï¼ŒéªŒè¯å‘½ä»¤è¡Œè¾“å…¥æ˜¯str</span><span class="token keyword">if</span> a <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'apple'</span><span class="token punctuation">)</span><span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'orange'</span><span class="token punctuation">)</span><span class="token keyword">elif</span> a <span class="token operator">==</span> <span class="token string">'3'</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'banana'</span><span class="token punctuation">)</span><span class="token keyword">else</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'shopping'</span><span class="token punctuation">)</span><span class="token comment"># å‘½ä»¤è¡Œè¾“å…¥çš„æ˜¯å­—ç¬¦ä¸²str</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> æšä¸¾ </tag>
            
            <tag> åˆ†æ”¯ </tag>
            
            <tag> å¾ªç¯ </tag>
            
            <tag> æ¡ä»¶ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(äº”)</title>
      <link href="/posts/ed3d.html"/>
      <url>/posts/ed3d.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h2 id="å¤ä¹ "><a href="#å¤ä¹ " class="headerlink" title="å¤ä¹ "></a><font size=5><strong>å¤ä¹ </strong></font></h2><p>&emsp;&emsp;<strong>ç®—æœ¯è¿ç®—ç¬¦</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'hello'</span><span class="token operator">+</span><span class="token string">'world'</span><span class="token string">'helloworld'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">3</span><span class="token operator">/</span><span class="token number">2</span><span class="token number">1.5</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">3</span><span class="token operator">-</span><span class="token number">1</span><span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">3</span><span class="token operator">//</span><span class="token number">2</span>   <span class="token comment">#æ•´é™¤</span><span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">5</span><span class="token operator">%</span><span class="token number">2</span>   <span class="token comment">#ä½™æ•°</span><span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">2</span><span class="token operator">**</span><span class="token number">5</span>   <span class="token comment">#æ¬¡æ–¹</span><span class="token number">32</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="ç®—æœ¯è¿ç®—ç¬¦"><a href="#ç®—æœ¯è¿ç®—ç¬¦" class="headerlink" title="ç®—æœ¯è¿ç®—ç¬¦"></a><font size=5><strong>ç®—æœ¯è¿ç®—ç¬¦</strong></font></h2><p>&emsp;&emsp;+ã€-ã€<em>ã€/ã€//ã€%ã€</em>*<br><img src="/medias/drawing-bed/python5/0.jpg" alt="ç®—æ•°è¿ç®—ç¬¦.jpg"></p><h2 id="èµ‹å€¼è¿ç®—ç¬¦"><a href="#èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="èµ‹å€¼è¿ç®—ç¬¦"></a><font size=5><strong>èµ‹å€¼è¿ç®—ç¬¦</strong></font></h2><p>&emsp;&emsp;=ã€+=ã€*=ã€/=ã€%=ã€**=ã€//=<br><img src="/medias/drawing-bed/python5/1.jpg" alt="èµ‹å€¼è¿ç®—ç¬¦.jpg"></p><h2 id="æ¯”è¾ƒ-é€»è¾‘è¿ç®—ç¬¦"><a href="#æ¯”è¾ƒ-é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="æ¯”è¾ƒ/é€»è¾‘è¿ç®—ç¬¦"></a><font size=5><strong>æ¯”è¾ƒ/é€»è¾‘è¿ç®—ç¬¦</strong></font></h2><h3 id="æ¯”è¾ƒï¼ˆå…³ç³»ï¼‰è¿ç®—ç¬¦"><a href="#æ¯”è¾ƒï¼ˆå…³ç³»ï¼‰è¿ç®—ç¬¦" class="headerlink" title="æ¯”è¾ƒï¼ˆå…³ç³»ï¼‰è¿ç®—ç¬¦"></a><font size=4><strong>æ¯”è¾ƒï¼ˆå…³ç³»ï¼‰è¿ç®—ç¬¦</strong></font></h3><p>&emsp;&emsp;==ã€!=ã€&gt;ã€&lt;ã€&gt;=ã€&lt;=</p><h3 id="é€»è¾‘è¿ç®—ç¬¦"><a href="#é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a><font size=4><strong>é€»è¾‘è¿ç®—ç¬¦</strong></font></h3><p>&emsp;&emsp;andã€orã€not<br><img src="/medias/drawing-bed/python5/2.jpg" alt="æ¯”è¾ƒ/é€»è¾‘è¿ç®—ç¬¦.jpg"></p><h2 id="æˆå‘˜-èº«ä»½-ä½è¿ç®—ç¬¦"><a href="#æˆå‘˜-èº«ä»½-ä½è¿ç®—ç¬¦" class="headerlink" title="æˆå‘˜/èº«ä»½/ä½è¿ç®—ç¬¦"></a><font size=5><strong>æˆå‘˜/èº«ä»½/ä½è¿ç®—ç¬¦</strong></font></h2><h3 id="æˆå‘˜è¿ç®—ç¬¦"><a href="#æˆå‘˜è¿ç®—ç¬¦" class="headerlink" title="æˆå‘˜è¿ç®—ç¬¦"></a><font size=4><strong>æˆå‘˜è¿ç®—ç¬¦</strong></font></h3><p>&emsp;&emsp;inã€not in</p><h3 id="èº«ä»½è¿ç®—ç¬¦"><a href="#èº«ä»½è¿ç®—ç¬¦" class="headerlink" title="èº«ä»½è¿ç®—ç¬¦"></a><font size=4><strong>èº«ä»½è¿ç®—ç¬¦</strong></font></h3><p>&emsp;&emsp;isã€not is</p><h3 id="ä½è¿ç®—ç¬¦"><a href="#ä½è¿ç®—ç¬¦" class="headerlink" title="ä½è¿ç®—ç¬¦"></a><font size=4><strong>ä½è¿ç®—ç¬¦</strong></font></h3><p>&emsp;&emsp;&amp;ã€|ã€^ã€~ã€&lt;&lt;ã€&gt;&gt;<br><img src="/medias/drawing-bed/python5/3.jpg" alt="æˆå‘˜/èº«ä»½/ä½è¿ç®—ç¬¦.jpg"></p><h2 id="ä¾‹å­"><a href="#ä¾‹å­" class="headerlink" title="ä¾‹å­"></a><font size=5><strong>ä¾‹å­</strong></font></h2><h3 id="ç®—æœ¯-èµ‹å€¼è¿ç®—ç¬¦"><a href="#ç®—æœ¯-èµ‹å€¼è¿ç®—ç¬¦" class="headerlink" title="ç®—æœ¯/èµ‹å€¼è¿ç®—ç¬¦"></a><font size=4><strong>ç®—æœ¯/èµ‹å€¼è¿ç®—ç¬¦</strong></font></h3><p><strong><font color=red>æ³¨æ„ï¼š</font></strong> Pythonä¸­ä¸å­˜åœ¨å˜é‡çš„å®šä¹‰ï¼Œå˜é‡åœ¨Pythonä¸­å°±æ˜¯ä¸€ä¸ªåå­—ã€‚c = 1ï¼Œå³æŠŠ1èµ‹å€¼ç»™c</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> c <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> c <span class="token operator">=</span> c <span class="token operator">+</span> <span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> c<span class="token operator">+=</span><span class="token number">1</span>   <span class="token comment">#ç›¸å½“äºc = c + 1</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token number">3</span><span class="token operator">>></span><span class="token operator">></span> c<span class="token operator">+</span><span class="token operator">+</span><span class="token punctuation">,</span>c<span class="token operator">-</span><span class="token operator">-</span>   <span class="token comment">#++ï¼Œ--è‡ªå¢å’Œè‡ªå‡è¿ç®—ç¬¦ï¼Œï¼ˆshellä½“ç°ï¼‰ä½†æ˜¯åœ¨pythonä¸­ä¸èƒ½è¿™æ ·å†™</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">>></span><span class="token operator">></span> b<span class="token operator">+=</span>a   <span class="token comment">#ç›¸å½“äºb = b + a</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token number">5</span><span class="token operator">>></span><span class="token operator">></span> b<span class="token operator">-=</span>a   <span class="token comment">#ç›¸å½“äºb = b - a</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> b<span class="token operator">*=</span>a   <span class="token comment">#ç›¸å½“äºb = b * a</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token number">6</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æ¯”è¾ƒ-é€»è¾‘è¿ç®—ç¬¦-1"><a href="#æ¯”è¾ƒ-é€»è¾‘è¿ç®—ç¬¦-1" class="headerlink" title="æ¯”è¾ƒ/é€»è¾‘è¿ç®—ç¬¦"></a><font size=4><strong>æ¯”è¾ƒ/é€»è¾‘è¿ç®—ç¬¦</strong></font></h3><p>æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼éƒ½å¯ä»¥æ¯”è¾ƒï¼Œè¿”å›å€¼æ˜¯å¸ƒå°”å€¼ï¼ˆ==ï¼Œ!=ï¼Œ&gt;ï¼Œ&lt;ï¼Œ&gt;=ï¼Œ&lt;=ï¼‰</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token boolean">True</span> <span class="token operator">></span> <span class="token boolean">False</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">1</span><span class="token operator">==</span><span class="token number">1</span>  <span class="token comment">#==å¦‚æœä¸¤ä¸ªå˜é‡å–å€¼ç›¸ç­‰ï¼Œè¿”å›ç»“æœTrueï¼Œå‚è€ƒä¸‹æ–‡å¯¹æ¯”is</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">1</span><span class="token operator">></span><span class="token number">1</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'abc'</span><span class="token operator">==</span><span class="token string">'abc'</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">1</span><span class="token operator">!=</span><span class="token number">2</span><span class="token boolean">True</span><span class="token comment"># b = 1ï¼Œb+=b>=1ï¼Œbçš„å€¼</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> b<span class="token operator">+=</span>b<span class="token operator">>=</span><span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token operator">>=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> b <span class="token operator">+</span> <span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token number">3</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token comment"># å­—ç¬¦ä¸²æ¯”è¾ƒçš„æ˜¯ascllç </span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>   <span class="token comment">#ord()æŸ¥çœ‹å…ƒç´ çš„ascllç </span><span class="token number">97</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token number">98</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'a'</span> <span class="token operator">&lt;</span> <span class="token string">'b'</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token boolean">True</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é€»è¾‘è¿ç®—ç¬¦-1"><a href="#é€»è¾‘è¿ç®—ç¬¦-1" class="headerlink" title="é€»è¾‘è¿ç®—ç¬¦"></a><font size=4><strong>é€»è¾‘è¿ç®—ç¬¦</strong></font></h3><p>ï¼ˆandä¸¤è€…éƒ½ä¸ºçœŸæ‰æ˜¯Trueï¼Œoræœ‰ä¸€ä¸ªä¸ºçœŸå°±æ˜¯Trueï¼ŒnotåŒnotæŠµæ¶ˆï¼‰ï¼ˆæˆ–orã€ä¸andã€énotï¼‰</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token boolean">True</span> <span class="token keyword">and</span> <span class="token boolean">True</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token boolean">False</span> <span class="token keyword">and</span> <span class="token boolean">False</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token boolean">False</span> <span class="token keyword">and</span> <span class="token boolean">True</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token boolean">False</span> <span class="token keyword">or</span> <span class="token boolean">True</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">not</span> <span class="token boolean">True</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">not</span> <span class="token keyword">not</span> <span class="token boolean">True</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">1</span> <span class="token keyword">and</span> <span class="token number">1</span>   <span class="token comment">#ç›¸å½“äºTrue and True</span><span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'a'</span> <span class="token keyword">and</span> <span class="token string">'c'</span>   <span class="token comment">#å‚è€ƒä¸‹æ–‡,ç†è§£ï¼šand  or</span><span class="token string">'c'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">not</span> <span class="token string">'a'</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'a'</span> <span class="token keyword">or</span> <span class="token string">'b'</span><span class="token string">'a'</span><span class="token comment"># å¯¹äºintæ•´å½¢å’Œfloatæµ®ç‚¹å‹ï¼Œ0è¡¨ç¤ºFalseï¼Œé0è¡¨ç¤ºTrue</span><span class="token comment"># å¯¹äºstrå­—ç¬¦ä¸²ç±»å‹ï¼Œâ€˜â€™ç©ºè¡¨ç¤ºFalseï¼Œéç©ºè¡¨ç¤ºTrue</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">not</span> <span class="token number">0</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">not</span> <span class="token string">''</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">not</span> <span class="token string">'0'</span><span class="token boolean">False</span><span class="token comment"># å¯¹äºliståˆ—è¡¨ï¼Œ[]ç©ºåˆ—è¡¨æ˜¯Falseï¼Œéç©ºè¡¨ç¤ºTrue</span><span class="token comment"># å¯¹äºtupleå…ƒç»„ï¼Œseté›†åˆï¼Œdictå­—å…¸ï¼›åŒæ ·éµå¾ªåˆ—è¡¨çš„é£æ ¼ã€‚ç©ºè¡¨ç¤ºFalseï¼Œéç©ºè¡¨ç¤ºTrue</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">not</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">not</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">not</span> <span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token boolean">True</span><span class="token comment"># ç†è§£ï¼šand  or</span><span class="token comment"># å½“è®¡ç®—æœºè¯»åˆ°ç¬¬ä¸€ä¸ªæ•°çš„æ—¶å€™ï¼Œå¹¶ä¸èƒ½ç»™å‡ºç»“æœã€‚åªæœ‰å°†å…¨éƒ¨çš„ä»£ç è§£æå®Œï¼Œæ‰èƒ½å‡ºç»“æœã€‚</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'a'</span> <span class="token keyword">and</span> <span class="token string">'b'</span>   <span class="token comment">#éç©ºéƒ½ä¸ºTrueï¼Œä½†æ˜¯ä¼šæ˜¾ç¤ºç¬¬äºŒä¸ªï¼ˆæœ€åä¸€ä¸ªï¼‰ä»£ç ï¼ˆå€¼ï¼‰ã€‚</span><span class="token string">'b'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'b'</span> <span class="token keyword">and</span> <span class="token string">'a'</span><span class="token string">'a'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">and</span> <span class="token string">'c'</span>   <span class="token comment">#0ä¸ºFalse</span><span class="token number">0</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'c'</span> <span class="token keyword">and</span> <span class="token number">0</span><span class="token number">0</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'b'</span> <span class="token keyword">and</span> <span class="token string">'a'</span> <span class="token keyword">and</span> <span class="token string">'c'</span><span class="token string">'c'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ç°å®ä¾‹å­ï¼š</strong> 1 &gt; 0ï¼Œè®¡ç®—æœºå¿…é¡»è¯»åˆ°0çš„æ—¶å€™æ‰ä¼šçŸ¥é“ç»“æœæ˜¯Trueï¼Œè¯»åˆ°1çš„æ—¶å€™ä¸ä¼šæœ‰ç»“æœã€‚<br><img src="/medias/drawing-bed/python5/4.jpg"></p><h3 id="orè¿ç®—"><a href="#orè¿ç®—" class="headerlink" title="orè¿ç®—"></a><font size=4><strong>orè¿ç®—</strong></font></h3><p><strong>åŒºåˆ«ï¼š</strong> å› ä¸ºoræ˜¯æœ‰ä¸€ä¸ªä¸ºçœŸå°±è¿”å›Trueï¼Œæ‰€ä»¥å®ƒåªéœ€è¦è¯»åˆ°ç¬¬ä¸€ä¸ªçœŸå°±è¿”å›ç»“æœå°±è¡Œäº†ã€‚ï¼ˆé¿å…è®¡ç®—èµ„æºæµªè´¹ğŸ˜Šï¼‰</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">or</span> <span class="token number">1</span> <span class="token keyword">or</span> <span class="token number">3</span><span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">3</span> <span class="token keyword">or</span> <span class="token number">1</span> <span class="token keyword">or</span> <span class="token number">0</span><span class="token number">3</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">or</span> <span class="token boolean">False</span> <span class="token keyword">or</span> <span class="token string">'a'</span> <span class="token keyword">or</span> <span class="token number">1</span><span class="token string">'a'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="æˆå‘˜è¿ç®—ç¬¦-1"><a href="#æˆå‘˜è¿ç®—ç¬¦-1" class="headerlink" title="æˆå‘˜è¿ç®—ç¬¦"></a><font size=4><strong>æˆå‘˜è¿ç®—ç¬¦</strong></font></h3><p>inï¼Œnot inï¼ˆliståˆ—è¡¨ï¼Œtupleå…ƒç»„ï¼Œstrå­—ç¬¦ä¸²ï¼Œseté›†åˆï¼Œdictå­—å…¸ï¼‰</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> a <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>   <span class="token comment">#åˆ¤æ–­aæ˜¯å¦åœ¨liståˆ—è¡¨[1,2,3]ä¸­</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">4</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token keyword">in</span> a<span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> a<span class="token operator">+=</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token keyword">in</span> a<span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> c<span class="token operator">+=</span>b   <span class="token comment">#c = c + bï¼Œprint(c) = 3</span><span class="token operator">>></span><span class="token operator">></span> c <span class="token keyword">not</span> <span class="token keyword">in</span> a   <span class="token comment">#cæ˜¯å¦ä¸åœ¨liståˆ—è¡¨aä¸­</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token number">5</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token number">8</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token string">'a'</span>   <span class="token comment">#å­—å…¸dict</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token keyword">in</span> <span class="token punctuation">&#123;</span><span class="token string">'c'</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token string">'c'</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token keyword">in</span> <span class="token punctuation">&#123;</span><span class="token string">'c'</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">&#125;</span>   <span class="token comment">#å¯¹äºå­—å…¸dictæ¥è¯´ï¼Œæˆå‘˜è¿ç®—ç¬¦æ˜¯åˆ¤æ–­çš„key:valueä¸­çš„key</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token keyword">in</span> <span class="token punctuation">&#123;</span><span class="token string">'c'</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="èº«ä»½è¿ç®—ç¬¦-1"><a href="#èº«ä»½è¿ç®—ç¬¦-1" class="headerlink" title="èº«ä»½è¿ç®—ç¬¦"></a><font size=4><strong>èº«ä»½è¿ç®—ç¬¦</strong></font></h3><p>æ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªå˜é‡çš„èº«ä»½æ˜¯å¦ç›¸ç­‰ï¼ˆå’Œ==æœ‰åŒºåˆ«ï¼Œisæ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€ï¼‰</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'a'</span> <span class="token keyword">is</span> <span class="token string">'a'</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">1</span> <span class="token keyword">is</span> <span class="token number">1</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">1.0</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">1</span> <span class="token keyword">is</span> <span class="token number">1.0</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token number">1270122593352</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token number">140728377594912</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>   <span class="token comment"># è¿™é‡Œæ˜¯ä¸¤ä¸ªåˆ—è¡¨ï¼Œæ‰€ä»¥æ˜¾ç¤ºFalseï¼Œè®°ä½œlista å’Œ listb</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment"># è¿™é‡Œæ˜¯listb</span><span class="token number">1270130542216</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment"># è¿™ä¸¤æ¬¡æŸ¥è¯¢éƒ½æ˜¯æœ€åä¸€ä¸ªåˆ—è¡¨å†…å­˜åœ°å€ï¼Œè¿™é‡Œä¹Ÿæ˜¯listb</span><span class="token number">1270130542216</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token keyword">is</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>   <span class="token comment"># è¿™é‡Œå˜æˆäº†listc å’Œ listd</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment"># è¿™é‡Œæ˜¯listdçš„å†…å­˜åœ°å€</span><span class="token number">1270133275656</span><span class="token comment"># a = &#123;1,2,3&#125;ï¼Œb = &#123;2,1,3&#125;ï¼›æ±‚a == bï¼Œa is bã€‚</span><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">==</span> b   <span class="token comment"># é›†åˆsetå’Œå­—å…¸dictæ˜¯æ— åºåºåˆ—ï¼Œæ‰€ä»¥é¡ºåºå˜åŒ–ä¸å½±å“å–å€¼ï¼ˆæ— åºåºåˆ—ï¼šdict&#123;&#125;å­—å…¸ï¼Œset&#123;&#125;é›†åˆï¼Œæœ‰åºåºåˆ—[]liseåˆ—è¡¨ï¼Œ()tupleå…ƒç»„ï¼Œ''strå­—ç¬¦ä¸²ï¼‰</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token string">'a'</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">&#125;</span> <span class="token operator">==</span> <span class="token punctuation">&#123;</span><span class="token string">'b'</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">&#125;</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> a <span class="token keyword">is</span> b<span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token number">1270133037096</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token keyword">is</span> b<span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> c <span class="token keyword">is</span> c   <span class="token comment"># å˜é‡èµ‹å€¼ æ¯”è¾ƒçš„æ˜¯ åŒä¸€ä¸ªå˜é‡ï¼Œæ‰€ä»¥è¿”å›True</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> c <span class="token keyword">is</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>   <span class="token comment"># ç›¸åŒçš„é›†åˆset&#123;&#125;ï¼Œdictå­—å…¸&#123;&#125;ï¼Œliståˆ—è¡¨[]ï¼Œç›´æ¥æ¯”è¾ƒè¿”å›Falseï¼Œå› ä¸ºèº«ä»½è¿ç®—æ¯”è¾ƒçš„å†…å­˜åœ°å€</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span>   <span class="token comment"># éªŒè¯ä¸¤ä¸ª[1,2]åˆ—è¡¨ï¼Œå†…å­˜åœ°å€æ˜¯ä¸åŒçš„ã€‚ç¬¬äºŒä¸ª[1,2]ç›¸å½“äºä¸€ä¸ªæ–°çš„listä¸æ˜¯åŸæ¥çš„äº†</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">1270130541064</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">1270130542216</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="typeç±»å‹"><a href="#typeç±»å‹" class="headerlink" title="typeç±»å‹"></a><font size=4><strong>typeç±»å‹</strong></font></h3><p>typeç±»å‹åˆ¤æ–­</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token string">'hello'</span>   <span class="token comment"># æŠŠåˆ¤æ–­açš„ç±»å‹æ˜¯ä¸æ˜¯strï¼Œè¿”å›True</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">)</span>   <span class="token comment"># åˆ¤æ–­aæ˜¯ä¸æ˜¯strç±»å‹</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token builtin">str</span><span class="token punctuation">,</span><span class="token builtin">tuple</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># åˆ¤æ–­aæ˜¯å¦å±äºå…ƒç»„tuple()ä¸­çš„å…¶ä¸­ä¸€ä¸ª</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span><span class="token builtin">tuple</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>å¯¹è±¡çš„ä¸‰ä¸ªç‰¹å¾ï¼š</strong> idã€valueã€typeï¼›<br><strong>å¯¹åº”åˆ¤æ–­æ–¹å¼ï¼š</strong> isï¼ˆåˆ¤æ–­idï¼‰ã€==ï¼ˆåˆ¤æ–­valueï¼‰ã€isinstanceï¼ˆåˆ¤æ–­typeï¼‰ï¼Œï¼ˆtypeç±»å‹åˆ¤æ–­ï¼Œä¸èƒ½åˆ¤æ–­å¯¹è±¡çš„å­ç±»å‹å±äºæŸä¸€ç§ç±»å‹ï¼Œisinstanceå¯ä»¥ï¼‰<br><strong>ä½è¿ç®—ç¬¦ï¼š</strong> &amp;æŒ‰ä½ä¸ã€|æŒ‰ä½æˆ–ã€^æŒ‰ä½å¼‚æˆ–ã€~æŒ‰ä½å–åã€&lt;&lt;å·¦ç§»åŠ¨ã€&gt;&gt;å³ ç§»åŠ¨</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">&amp;</span> b<span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bin</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token string">'0b10'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bin</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token string">'0b11'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>ä¸IPåœ°å€åˆ’åˆ†ä½œç±»æ¯”ã€‚æŒ‰ä½ä¸&amp;ï¼Œåªæœ‰ åŒä½å€¼éƒ½ä¸º1 ç»“æœæ‰æ˜¯1ã€‚<br><img src="/medias/drawing-bed/python5/5.jpg"><br>æŒ‰ä½æˆ–|ï¼Œåªè¦ åŒä½å€¼æœ‰ä¸€ä¸ªä¸º1 ç»“æœå°±æ˜¯1ã€‚<br><img src="/medias/drawing-bed/python5/6.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> è¿ç®—ç¬¦ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ambariå®‰è£…Hadoop</title>
      <link href="/posts/12fb.html"/>
      <url>/posts/12fb.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="Hadoopå®‰è£…è§†é¢‘"><a href="#Hadoopå®‰è£…è§†é¢‘" class="headerlink" title="Hadoopå®‰è£…è§†é¢‘"></a><font size=5><strong>Hadoopå®‰è£…è§†é¢‘</strong></font></h1><iframe height="600" width="800" src="//player.bilibili.com/player.html?aid=80560637&cid=137867649&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h1 id="ambariå®‰è£…hadoopé…ç½®"><a href="#ambariå®‰è£…hadoopé…ç½®" class="headerlink" title="ambariå®‰è£…hadoopé…ç½®"></a><font size=5><strong>ambariå®‰è£…hadoopé…ç½®</strong></font></h1><p>&emsp;&emsp;æ¥ä¸Šæ–‡ambariå®‰è£…ï¼Œåˆ©ç”¨å…¶è™šæ‹Ÿæœºåˆ†é…masterï¼Œslaveï¼Œclientã€‚</p><table><thead><tr><th align="right">ä¸»æœºå</th><th align="center">IP</th><th align="center">å†…å­˜</th><th align="left">ä»‹ç»</th></tr></thead><tbody><tr><td align="right">ambari.hadoop.com</td><td align="center">192.168.1.229</td><td align="center">4G+</td><td align="left">Hadoopé›†ç¾¤ç®¡ç†å·¥å…·</td></tr><tr><td align="right">master1.hadoop.com</td><td align="center">192.168.1.207</td><td align="center">8G+</td><td align="left">Hadoopé›†ç¾¤masterèŠ‚ç‚¹</td></tr><tr><td align="right">master2.hadoop.com</td><td align="center">192.168.1.208</td><td align="center">8G+</td><td align="left">Hadoopé›†ç¾¤masterèŠ‚ç‚¹</td></tr><tr><td align="right">master3.hadoop.com</td><td align="center">192.168.1.209</td><td align="center">8G+</td><td align="left">Hadoopé›†ç¾¤masterèŠ‚ç‚¹</td></tr><tr><td align="right">slave1.hadoop.com</td><td align="center">192.168.1.211</td><td align="center">4G+</td><td align="left">Hadoopé›†ç¾¤slaveèŠ‚ç‚¹</td></tr><tr><td align="right">slave2.hadoop.com</td><td align="center">192.168.1.212</td><td align="center">4G+</td><td align="left">Hadoopé›†ç¾¤slaveèŠ‚ç‚¹</td></tr><tr><td align="right">client.hadoop.com</td><td align="center">192.168.1.221</td><td align="center">4G+</td><td align="left">Hadoopé›†ç¾¤clientèŠ‚ç‚¹</td></tr><tr><td align="right">repo.hadoop.com</td><td align="center">192.168.1.228</td><td align="center">1G+</td><td align="left">Hadoopé›†ç¾¤æœ¬åœ°ä»“åº“</td></tr></tbody></table><h2 id="ç½‘é¡µç™»å½•"><a href="#ç½‘é¡µç™»å½•" class="headerlink" title="ç½‘é¡µç™»å½•"></a><font size=4><strong>ç½‘é¡µç™»å½•</strong></font></h2><p><img src="/medias/drawing-bed/hdp/0.jpg"></p><h2 id="åˆ›å»ºé›†ç¾¤"><a href="#åˆ›å»ºé›†ç¾¤" class="headerlink" title="åˆ›å»ºé›†ç¾¤"></a><font size=4><strong>åˆ›å»ºé›†ç¾¤</strong></font></h2><p><img src="/medias/drawing-bed/hdp/1.jpg"></p><h2 id="é›†ç¾¤å"><a href="#é›†ç¾¤å" class="headerlink" title="é›†ç¾¤å"></a><font size=4><strong>é›†ç¾¤å</strong></font></h2><p><img src="/medias/drawing-bed/hdp/2.jpg"></p><h2 id="é€‰æ‹©ç‰ˆæœ¬ï¼Œyumæº"><a href="#é€‰æ‹©ç‰ˆæœ¬ï¼Œyumæº" class="headerlink" title="é€‰æ‹©ç‰ˆæœ¬ï¼Œyumæº"></a><font size=4><strong>é€‰æ‹©ç‰ˆæœ¬ï¼Œyumæº</strong></font></h2><p>&emsp;&emsp;ç½‘é€Ÿå¥½çš„å¯ä»¥é€‰æ‹©å…¬å…±æºï¼Œä¹Ÿå¯ä»¥æœ¬åœ°æ­å»ºæºï¼Œä¸‹è½½åœ°å€ï¼š</p><p><strong>æ³¨æ„ï¼šambari2.7.5éœ€è¦ç™»å½•,å¹¶è·å¾—æˆæƒä¹‹åæ‰èƒ½ä¸‹è½½ï¼Œambariç‰ˆæœ¬å· â‰¤ 2.7.4 çš„ç‰ˆæœ¬å¯ä»¥ç›´æ¥ä¸‹è½½</strong><br>&emsp;&emsp;<strong>ç½—åˆ—RedHat|CentOS|Oracle Linux 7ã€amazonlinux 2ã€SLES 12ã€Ubuntu 14|16|18ã€Debian 9ç³»ç»Ÿçš„ä¸‹è½½åœ°å€</strong><br>&emsp;&emsp;å¯ä»¥åœ¨æ­¤é€‰æ‹©hdpä¸åŒç³»ç»Ÿçš„å®‰è£…æº <a href="https://docs.cloudera.com/HDPDocuments/Ambari-2.7.4.0/bk_ambari-installation/content/hdp_314_repositories.html">hdp_314</a><br>&emsp;&emsp;å¯ä»¥åœ¨æ­¤é€‰æ‹©ambariä¸åŒç³»ç»Ÿçš„å®‰è£…æº <a href="https://docs.cloudera.com/HDPDocuments/Ambari-2.7.4.0/bk_ambari-installation/content/ambari_repositories.html">ambari</a> </p><p>&emsp;&emsp;<strong>ç½—åˆ—ambariçš„ç‰ˆæœ¬</strong><br>&emsp;&emsp;å¯ä»¥åœ¨æ­¤é€‰æ‹©ambariç‰ˆæœ¬ <a href="https://docs.cloudera.com/HDPDocuments/Ambari/Ambari-2.7.4.0/index.html">Ambari-2.7.4</a> </p><p><strong>centos7ç‰ˆæœ¬ç›´æ¥ä¸‹è½½</strong><br>&emsp;&emsp;ç›´æ¥ä¸‹è½½ <a href="http://public-repo-1.hortonworks.com/ambari/centos7/2.x/updates/2.7.4.0/ambari-2.7.4.0-centos7.tar.gz">Ambari-2.7.4.0</a><br>&emsp;&emsp;ç›´æ¥ä¸‹è½½ <a href="http://public-repo-1.hortonworks.com/HDP/centos7/3.x/updates/3.1.4.0/HDP-3.1.4.0-centos7-rpm.tar.gz">HDP-3.1.4.0</a><br>&emsp;&emsp;ç›´æ¥ä¸‹è½½ <a href="http://public-repo-1.hortonworks.com/HDP-UTILS-1.1.0.22/repos/centos7/HDP-UTILS-1.1.0.22-centos7.tar.gz">HDP-UTILS-1.1.0.22</a><br>&emsp;&emsp;ç›´æ¥ä¸‹è½½ <a href="http://public-repo-1.hortonworks.com/HDP-GPL/centos7/3.x/updates/3.1.4.0/HDP-GPL-3.1.4.0-centos7-gpl.tar.gz">HDP-GPL-3.1.4.0</a></p><p><img src="/medias/drawing-bed/hdp/3.jpg"></p><h2 id="ä½¿ç”¨æœ¬åœ°åº“ï¼Œå¡«å…¥åœ°å€"><a href="#ä½¿ç”¨æœ¬åœ°åº“ï¼Œå¡«å…¥åœ°å€" class="headerlink" title="ä½¿ç”¨æœ¬åœ°åº“ï¼Œå¡«å…¥åœ°å€"></a><font size=4><strong>ä½¿ç”¨æœ¬åœ°åº“ï¼Œå¡«å…¥åœ°å€</strong></font></h2><p><img src="/medias/drawing-bed/hdp/5.jpg"></p><h2 id="é€‰æ‹©å®‰è£…çš„æœåŠ¡å™¨ï¼Œå¡«å…¥ambariæœåŠ¡å™¨ç§é’¥"><a href="#é€‰æ‹©å®‰è£…çš„æœåŠ¡å™¨ï¼Œå¡«å…¥ambariæœåŠ¡å™¨ç§é’¥" class="headerlink" title="é€‰æ‹©å®‰è£…çš„æœåŠ¡å™¨ï¼Œå¡«å…¥ambariæœåŠ¡å™¨ç§é’¥"></a><font size=4><strong>é€‰æ‹©å®‰è£…çš„æœåŠ¡å™¨ï¼Œå¡«å…¥ambariæœåŠ¡å™¨ç§é’¥</strong></font></h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@ambari ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/hosts</span><span class="token number">127.0</span>.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4::1         localhost localhost.localdomain localhost6 localhost6.localdomain6<span class="token number">192.168</span>.1.201  master1.hadoop.com<span class="token number">192.168</span>.1.202  master2.hadoop.com<span class="token number">192.168</span>.1.203  master3.hadoop.com<span class="token number">192.168</span>.1.204  slave1.hadoop.com<span class="token number">192.168</span>.1.205  slave2.hadoop.com<span class="token number">192.168</span>.1.206  client.hadoop.com<span class="token number">192.168</span>.1.207  repo.hadoop.com<span class="token number">192.168</span>.1.200  ambari.hadoop.com<span class="token punctuation">[</span>root@ambari ~<span class="token punctuation">]</span><span class="token comment"># cat .ssh/id_rsa</span>-----BEGIN RSA PRIVATE KEY-----MIIEogIBAAKCAQEAlbnsR3q/iOaDdbTU5pvEyvnbtdYf3mZaT5JJAP6oFxNsGExjR+V5hLGAicW01oCidXBrlWOwlhTSh2BDjfaGkuz7fBS5hdpPDxE8a9/7se3oxLz8eXAHeJTc0w0dbaB2SriFcBDTjOpr+LjIuysDaMIa4oqOdJ7vXeZ6NZD+OvqmB3HQUf3UhQNvG/TSzikOQx7Ic0Qhax0bK2N9QDoMJpjihcCQB+iL+RqErj2GoAvais7FMWH0w7r4XwBAPnllTbMGnOJ1QqCpu6lgcvHKNu0i/9j92AHQ7iLv3X3b7ABXWj+sWhu4eWjhEStLxWndPdBRNTxshtcmw0SGOAbr2QIDAQABAoIBACj+twr7OOYq92OLF5/sln1c3CN1dVRXgfK3gvWaxDtNPhOJFsXgttz2HNOcJl906QZuuYY1vWvaV6ppWRXNohsod9MJeaKEm5DsjzaaJTgag9kaRaaaXfFOEQhYVu5lOP5Md3yvnry+ksGPFqboqA5O1z2f4lFcEv4K1PtFr9ZFz2mW/rx5JAoJ/kyS8Ue221ExSDzfzv1dV4RjPNIBNr1VsXeBV1NiCdc37m2BzdnuuxRJPyCiiY5Y6EMGfHnw6M/Q7I4IVSV7oEuk+iFi9UL58V2e6jZudMtEn/jgaN1y4lum3GFvGrfUcZAlRwWcPpezsf6Lc+KaqKkckgX03AECgYEAxJ6WgjKpubv+ABH8fqn0lchL9Y5+IHUZt9D3VwVAgfRhStN5C94aSw6zVvkVVoY35sQQi5MmJeHQqt2sZUifvxlzYF3voR1UGZtK08sk9i3CC669fu8M0tbd8glHwHf64Q8vZrALDLtPUDvQtup2/UkRcicrN6uv+rOmDGPuYtECgYEAwvHWvDYK8CsW5Cjh4AfIr5rxgVCg2v69WuH5FhAWv0nkv8wIiBcuvEZ7pFQG0C0ND7IjLxdOCcMtqTY++eJe6smfr9kSgyR9Nxz7+GuUWg6odg2moEZO4hqPIbPKzClTMHb8wUQYQi9U5Ry0EtEWMjCEwORUvQtWfZy6DSNR6okCgYAsAkcz+z0MKqzuvRfkDgyF3iBKZUuL3koUX7yNCMroi5efVPg6FMuT00WHCReil0Y569a8NwKJ5iJ7rERjIz9GWd7+SehSCquBU8YK4+RxCcruLH2TxNP8+UUSYMtjpDdOWsTEWlEO13ooPks4NgDOLqWuBGBjBJXOKpnXGiMIkQKBgBYjBDFnKaLQIc9S3SNlfuKCA76de0ai+rmhQ3m/5fVe3Lzy3F0n1MTIdC3a5NMq6nrHzbsBOHlfUoYOhOQ3UnPy5VFAoxuFPzrM7cft33DCjVqqfithEIAYZ/x5wCOi5bFxMY54vxB083z433HrkEuuusR0qTK2YOHutCndwuWRAoGANJx6rxBlwjfJuoLWoFdPWpx3hxpOY+kHoSWTd6wnpnJgE06zg5KFXutVYVqJF8OYLunxq+5uj4ao4bbWrTO+zE4ui2yxsYRjgJoLUlzvxRdJ3hWhI8IC82Jw+dm9DB2ST+lYHdfUMl5h6ZrFOeyhTVrfIXUNhy8jCD0DvxX9vCA<span class="token operator">=</span>-----END RSA PRIVATE KEY-----<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/hdp/6.jpg"></p><h2 id="ç­‰å¾…ambari-agentå®‰è£…å’Œæ³¨å†Œ"><a href="#ç­‰å¾…ambari-agentå®‰è£…å’Œæ³¨å†Œ" class="headerlink" title="ç­‰å¾…ambari-agentå®‰è£…å’Œæ³¨å†Œ"></a><font size=4><strong>ç­‰å¾…ambari-agentå®‰è£…å’Œæ³¨å†Œ</strong></font></h2><p><img src="/medias/drawing-bed/hdp/7.jpg"></p><h2 id="å…¨éƒ¨Successå°±OK"><a href="#å…¨éƒ¨Successå°±OK" class="headerlink" title="å…¨éƒ¨Successå°±OK"></a><font size=4><strong>å…¨éƒ¨Successå°±OK</strong></font></h2><p><img src="/medias/drawing-bed/hdp/8.jpg"></p><h1 id="é€‰æ‹©è‡ªå·±éœ€è¦çš„ç»„ä»¶å®‰è£…"><a href="#é€‰æ‹©è‡ªå·±éœ€è¦çš„ç»„ä»¶å®‰è£…" class="headerlink" title="é€‰æ‹©è‡ªå·±éœ€è¦çš„ç»„ä»¶å®‰è£…"></a><font size=5><strong>é€‰æ‹©è‡ªå·±éœ€è¦çš„ç»„ä»¶å®‰è£…</strong></font></h1><p>&emsp;&emsp;å‡å°‘ä¸å¿…è¦çš„ç»„ä»¶ï¼Œæé«˜å®‰è£…æˆåŠŸç‡<br><img src="/medias/drawing-bed/hdp/9.jpg"></p><h2 id="æ‰‹åŠ¨æŠŠç»„ä»¶å‡åŒ€åˆ†é…ç»™maser1-2-3ä¸‰å°æœåŠ¡å™¨"><a href="#æ‰‹åŠ¨æŠŠç»„ä»¶å‡åŒ€åˆ†é…ç»™maser1-2-3ä¸‰å°æœåŠ¡å™¨" class="headerlink" title="æ‰‹åŠ¨æŠŠç»„ä»¶å‡åŒ€åˆ†é…ç»™maser1|2|3ä¸‰å°æœåŠ¡å™¨"></a><font size=4><strong>æ‰‹åŠ¨æŠŠç»„ä»¶å‡åŒ€åˆ†é…ç»™maser1|2|3ä¸‰å°æœåŠ¡å™¨</strong></font></h2><p><img src="/medias/drawing-bed/hdp/10.jpg"></p><h2 id="master-slave-clientèŠ‚ç‚¹å®‰è£…åˆ†é…"><a href="#master-slave-clientèŠ‚ç‚¹å®‰è£…åˆ†é…" class="headerlink" title="master|slave|clientèŠ‚ç‚¹å®‰è£…åˆ†é…"></a><font size=4><strong>master|slave|clientèŠ‚ç‚¹å®‰è£…åˆ†é…</strong></font></h2><p>&emsp;&emsp;masterèŠ‚ç‚¹ä¸å‹¾é€‰ï¼ŒslaveèŠ‚ç‚¹ä¸å‹¾é€‰clientå…¶ä¸­ranger tagsyncåªèƒ½å‹¾é€‰ä¸€ä¸ªï¼ŒclientèŠ‚ç‚¹åªå‹¾é€‰clientå³å¯ï¼Œæ³¨æ„çœ‹çº¢æ¡†ã€‚<br><img src="/medias/drawing-bed/hdp/11.jpg"></p><h2 id="å¡«å…¥å¯†ç ï¼Œè‡ªå·±è®¾ç½®å³å¯"><a href="#å¡«å…¥å¯†ç ï¼Œè‡ªå·±è®¾ç½®å³å¯" class="headerlink" title="å¡«å…¥å¯†ç ï¼Œè‡ªå·±è®¾ç½®å³å¯"></a><font size=4><strong>å¡«å…¥å¯†ç ï¼Œè‡ªå·±è®¾ç½®å³å¯</strong></font></h2><p><img src="/medias/drawing-bed/hdp/12.jpg"><br><strong><font color=red>æ­¤æ®µä¸»æœºambari.hadoop.com</font></strong></p><h1 id="è¿™é‡Œè¦å®‰è£…MySQLæ•°æ®åº“"><a href="#è¿™é‡Œè¦å®‰è£…MySQLæ•°æ®åº“" class="headerlink" title="è¿™é‡Œè¦å®‰è£…MySQLæ•°æ®åº“"></a><font size=5><strong>è¿™é‡Œè¦å®‰è£…MySQLæ•°æ®åº“</strong></font></h1><p><img src="/medias/drawing-bed/hdp/13.jpg"></p><h2 id="æ•°æ®åº“çš„yumæº"><a href="#æ•°æ®åº“çš„yumæº" class="headerlink" title="æ•°æ®åº“çš„yumæº"></a><font size=4><strong>æ•°æ®åº“çš„yumæº</strong></font></h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@ambari ~<span class="token punctuation">]</span><span class="token comment"># cat > /etc/yum.repos.d/mariadb.repo &lt;&lt; EOF</span><span class="token punctuation">[</span>mariadb<span class="token punctuation">]</span>name <span class="token operator">=</span> MariaDBbaseurl <span class="token operator">=</span> https://mirrors.ustc.edu.cn/mariadb/yum/10.2/centos7-amd64<span class="token assign-left variable">gpgkey</span><span class="token operator">=</span>https://mirrors.ustc.edu.cn/mariadb/yum/RPM-GPG-KEY-MariaDB<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">1</span>EOF<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/hdp/14.jpg"></p><h2 id="å®‰è£…å¯åŠ¨æ•°æ®åº“"><a href="#å®‰è£…å¯åŠ¨æ•°æ®åº“" class="headerlink" title="å®‰è£…å¯åŠ¨æ•°æ®åº“"></a><font size=4><strong>å®‰è£…å¯åŠ¨æ•°æ®åº“</strong></font></h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@ambari ~<span class="token punctuation">]</span><span class="token comment"># yum install MariaDB-client MariaDB-server MariaDB-devel -y</span><span class="token punctuation">[</span>root@ambari ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable mariadb</span><span class="token punctuation">[</span>root@ambari ~<span class="token punctuation">]</span><span class="token comment"># systemctl start mariadb</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/hdp/15.jpg"></p><h2 id="æˆæƒä¿¡æ¯"><a href="#æˆæƒä¿¡æ¯" class="headerlink" title="æˆæƒä¿¡æ¯"></a><font size=4><strong>æˆæƒä¿¡æ¯</strong></font></h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">database</span> hive<span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">database</span> ranger<span class="token punctuation">;</span><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'hdp121212'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'hdp121212'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'root'</span><span class="token variable">@'ambari.hadoop.com'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'hdp121212'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'hive'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'hdp121212'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'hive'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'hdp121212'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'hive'</span><span class="token variable">@'ambari.hadoop.com'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'hdp121212'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'rangeradmin'</span><span class="token variable">@'localhost'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'hdp121212'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'rangeradmin'</span><span class="token variable">@'%'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'hdp121212'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span><span class="token keyword">GRANT</span> <span class="token keyword">ALL</span> <span class="token keyword">PRIVILEGES</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'rangeradmin'</span><span class="token variable">@'ambari.hadoop.com'</span> IDENTIFIED <span class="token keyword">BY</span> <span class="token string">'hdp121212'</span> <span class="token keyword">WITH</span> <span class="token keyword">GRANT</span> <span class="token keyword">OPTION</span><span class="token punctuation">;</span>flush <span class="token keyword">privileges</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/hdp/16.jpg"></p><h2 id="jdbcå·¥å…·é…ç½®"><a href="#jdbcå·¥å…·é…ç½®" class="headerlink" title="jdbcå·¥å…·é…ç½®"></a><font size=4><strong>jdbcå·¥å…·é…ç½®</strong></font></h2><p><img src="/medias/drawing-bed/hdp/17.jpg"></p><h2 id="ä¿®æ”¹æ•°æ®åº“åœ°å€ï¼Œå¡«å…¥å¯†ç ï¼Œæµ‹è¯•é€šè¿‡å³å¯"><a href="#ä¿®æ”¹æ•°æ®åº“åœ°å€ï¼Œå¡«å…¥å¯†ç ï¼Œæµ‹è¯•é€šè¿‡å³å¯" class="headerlink" title="ä¿®æ”¹æ•°æ®åº“åœ°å€ï¼Œå¡«å…¥å¯†ç ï¼Œæµ‹è¯•é€šè¿‡å³å¯"></a><font size=4><strong>ä¿®æ”¹æ•°æ®åº“åœ°å€ï¼Œå¡«å…¥å¯†ç ï¼Œæµ‹è¯•é€šè¿‡å³å¯</strong></font></h2><p><img src="/medias/drawing-bed/hdp/18.jpg"></p><h2 id="æ–°æ‰‹ä¸å»ºè®®é…ç½®ç›´æ¥ä¸‹ä¸€æ­¥å³å¯"><a href="#æ–°æ‰‹ä¸å»ºè®®é…ç½®ç›´æ¥ä¸‹ä¸€æ­¥å³å¯" class="headerlink" title="æ–°æ‰‹ä¸å»ºè®®é…ç½®ç›´æ¥ä¸‹ä¸€æ­¥å³å¯"></a><font size=4><strong>æ–°æ‰‹ä¸å»ºè®®é…ç½®ç›´æ¥ä¸‹ä¸€æ­¥å³å¯</strong></font></h2><p><img src="/medias/drawing-bed/hdp/19.jpg"><br><img src="/medias/drawing-bed/hdp/20.jpg"><br><img src="/medias/drawing-bed/hdp/21.jpg"></p><h1 id="ä¸‹è½½ä¿å­˜é…ç½®æ–‡ä»¶"><a href="#ä¸‹è½½ä¿å­˜é…ç½®æ–‡ä»¶" class="headerlink" title="ä¸‹è½½ä¿å­˜é…ç½®æ–‡ä»¶"></a><font size=5><strong>ä¸‹è½½ä¿å­˜é…ç½®æ–‡ä»¶</strong></font></h1><p><img src="/medias/drawing-bed/hdp/22.jpg"></p><h2 id="ç­‰å¾…åŠ è½½å®Œæˆ"><a href="#ç­‰å¾…åŠ è½½å®Œæˆ" class="headerlink" title="ç­‰å¾…åŠ è½½å®Œæˆ"></a><font size=4><strong>ç­‰å¾…åŠ è½½å®Œæˆ</strong></font></h2><p><img src="/medias/drawing-bed/hdp/23.jpg"></p><h2 id="ç­‰å¾…å®‰è£…å®Œæˆï¼Œå…¨éƒ¨æˆåŠŸå³å¯"><a href="#ç­‰å¾…å®‰è£…å®Œæˆï¼Œå…¨éƒ¨æˆåŠŸå³å¯" class="headerlink" title="ç­‰å¾…å®‰è£…å®Œæˆï¼Œå…¨éƒ¨æˆåŠŸå³å¯"></a><font size=4><strong>ç­‰å¾…å®‰è£…å®Œæˆï¼Œå…¨éƒ¨æˆåŠŸå³å¯</strong></font></h2><p><img src="/medias/drawing-bed/hdp/24.jpg"></p><h1 id="å°è¯•æ’é”™é‡æ–°å¯åŠ¨"><a href="#å°è¯•æ’é”™é‡æ–°å¯åŠ¨" class="headerlink" title="å°è¯•æ’é”™é‡æ–°å¯åŠ¨"></a><font size=4><strong>å°è¯•æ’é”™é‡æ–°å¯åŠ¨</strong></font></h1><p>&emsp;&emsp;ç»å¸¸å‡ºé”™ï¼Œè€å¿ƒæ’é”™å§ğŸ˜„<br>å°‘å®‰è£…ä¸€äº›ä¸ç”¨çš„ç»„ä»¶ã€å†…å­˜å¤§ä¸€äº›ã€é˜²ç«å¢™å…³é—­ã€selinuxå…³é—­ã€æ‹æ‘„å¿«ç…§ã€ambari-serverä¸»æœºå…å¯†ç™»å½•ambari-agentä¸»æœºå³å¯ã€ç­‰ç­‰ï¼Œé‡è¯•å‡ æ¬¡ã€‚å¤šæ¬¡å°è¯•åæŠ¥åŒä¸€ä¸ªé”™è¯¯è¯·ç•™è¨€æˆ–ç™¾åº¦è§£å†³ğŸ˜˜ã€‚<br><img src="/medias/drawing-bed/hdp/25.jpg"></p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> hadoop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> hadoop </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>breezeå®‰è£…</title>
      <link href="/posts/4902.html"/>
      <url>/posts/4902.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="çº¦å®š"><a href="#çº¦å®š" class="headerlink" title="çº¦å®š"></a><font size=5><strong>çº¦å®š</strong></font></h1><p><strong>ç³»ç»Ÿè¦æ±‚:</strong><br>&emsp;&emsp;éƒ¨ç½²æœº: docker 1.13.1+ and docker-compose 1.12.0+ .<br>&emsp;&emsp;Kubernetesé›†ç¾¤èŠ‚ç‚¹: å…¼å®¹CentOS 7.4|5|6|7 åŠ Ubuntu 16|18 ç‰ˆæœ¬ï¼ŒMinimalå®‰è£…ï¼Œåº”å°½å¯èƒ½ä¿è¯ç³»ç»Ÿçš„å¹²å‡€ã€‚</p><h1 id="breezeå®‰è£…è§†é¢‘"><a href="#breezeå®‰è£…è§†é¢‘" class="headerlink" title="breezeå®‰è£…è§†é¢‘"></a><font size=5><strong>breezeå®‰è£…è§†é¢‘</strong></font></h1><iframe height="600" width="800" src="//player.bilibili.com/player.html?aid=80624149&cid=137977035&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h1 id="breezeå®‰è£…ç¯å¢ƒé…ç½®"><a href="#breezeå®‰è£…ç¯å¢ƒé…ç½®" class="headerlink" title="breezeå®‰è£…ç¯å¢ƒé…ç½®"></a><font size=5><strong>breezeå®‰è£…ç¯å¢ƒé…ç½®</strong></font></h1><p>&emsp;&emsp;æ¥ä¸Šæ–‡esxiå®‰è£…ï¼Œåˆ©ç”¨å…¶è™šæ‹ŸåŒ–å‡ºå¤šä¸ªè™šæ‹Ÿæœºã€‚</p><table><thead><tr><th align="right">ä¸»æœºå</th><th align="center">IP</th><th align="center">å†…å­˜</th><th align="center">è§’è‰²</th><th align="left">ç»„ä»¶</th></tr></thead><tbody><tr><td align="right">deploy</td><td align="center">192.168.1.220</td><td align="center">4G+</td><td align="center">Breeze Deploy</td><td align="left">docker/docker-compose/Breeze</td></tr><tr><td align="right">master01</td><td align="center">192.168.1.221</td><td align="center">4G+</td><td align="center">K8S Master Node</td><td align="left">K8S Master/etcd/HAProxy/Keepalived</td></tr><tr><td align="right">master02</td><td align="center">192.168.1.222</td><td align="center">4G+</td><td align="center">K8S Master Node</td><td align="left">K8S Master/etcd/HAProxy/Keepalived</td></tr><tr><td align="right">master03</td><td align="center">192.168.1.223</td><td align="center">4G+</td><td align="center">K8S Master Node</td><td align="left">K8S Master/etcd/HAProxy/Keepalived</td></tr><tr><td align="right">worker01</td><td align="center">192.168.1.224</td><td align="center">4G+</td><td align="center">K8S Worker Node</td><td align="left">K8S Worker/Prometheus</td></tr><tr><td align="right">harbor</td><td align="center">192.168.1.225</td><td align="center">4G+</td><td align="center">Harbor</td><td align="left">Harbor 1.7.0</td></tr><tr><td align="right"></td><td align="center">192.168.1.226</td><td align="center"></td><td align="center">VIP</td><td align="left">HAè™šIPåœ°å€åœ¨3å°K8S Masteræµ®åŠ¨</td></tr></tbody></table><h2 id="åˆ›å»º6å°è™šæ‹Ÿæœº"><a href="#åˆ›å»º6å°è™šæ‹Ÿæœº" class="headerlink" title="åˆ›å»º6å°è™šæ‹Ÿæœº"></a><font size=4><strong>åˆ›å»º6å°è™šæ‹Ÿæœº</strong></font></h2><p><img src="/medias/drawing-bed/breeze/0.jpg"></p><h2 id="å®‰è£…ç³»ç»Ÿ"><a href="#å®‰è£…ç³»ç»Ÿ" class="headerlink" title="å®‰è£…ç³»ç»Ÿ"></a><font size=4><strong>å®‰è£…ç³»ç»Ÿ</strong></font></h2><p><img src="/medias/drawing-bed/breeze/1.jpg"></p><h2 id="é…ç½®é˜²ç«å¢™"><a href="#é…ç½®é˜²ç«å¢™" class="headerlink" title="é…ç½®é˜²ç«å¢™"></a><font size=4><strong>é…ç½®é˜²ç«å¢™</strong></font></h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># setenforce 0 </span><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># sed --follow-symlinks -i "s/SELINUX=enforcing/SELINUX=disabled/g" /etc/selinux/config </span><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># firewall-cmd --set-default-zone=trusted </span><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># firewall-cmd --complete-reload </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/breeze/2.jpg"></p><h1 id="å¯¼å…¥ä¸‹è½½å¥½çš„é•œåƒ"><a href="#å¯¼å…¥ä¸‹è½½å¥½çš„é•œåƒ" class="headerlink" title="å¯¼å…¥ä¸‹è½½å¥½çš„é•œåƒ"></a><font size=5><strong>å¯¼å…¥ä¸‹è½½å¥½çš„é•œåƒ</strong></font></h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># docker-compose up -d   # è¿™ä¸ªä»¥åæ‰§è¡Œ</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/medias/drawing-bed/breeze/3.jpg"></p><h1 id="å®‰è£…docker-compose"><a href="#å®‰è£…docker-compose" class="headerlink" title="å®‰è£…docker-compose"></a><font size=5><strong>å®‰è£…docker-compose</strong></font></h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># curl -L https://github.com/docker/compose/releases/download/1.21.2/docker-compose-$(uname -s)-$(uname -m) -o /usr/local/bin/docker-compose </span><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># chmod +x /usr/local/bin/docker-compose </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å®‰è£…docker-io"><a href="#å®‰è£…docker-io" class="headerlink" title="å®‰è£…docker-io"></a><font size=4><strong>å®‰è£…docker-io</strong></font></h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># yum install docker </span><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># systemctl enable docker &amp;&amp; systemctl start docker </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/breeze/4.jpg"></p><h2 id="ä¸‹è½½é•œåƒæ–‡ä»¶"><a href="#ä¸‹è½½é•œåƒæ–‡ä»¶" class="headerlink" title="ä¸‹è½½é•œåƒæ–‡ä»¶"></a><font size=4><strong>ä¸‹è½½é•œåƒæ–‡ä»¶</strong></font></h2><p>&emsp;&emsp;æœ€æ–°ä¸ºbreeze/v1.17.0</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># curl -L https://raw.githubusercontent.com/wise2c-devops/breeze/v1.17.0/docker-compose.yml o docker-compose.yml </span><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># docker-compose up -d   # ä¸‹è½½å¥½ä¹‹åå¯ä»¥å¤‡ä»½è¿ç§»ï¼Œä¸‹é¢æˆ‘å°±æ˜¯è¿™ä¹ˆåšçš„</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å¯¼å…¥ä¸‹è½½å¥½çš„é•œåƒæ–‡ä»¶"><a href="#å¯¼å…¥ä¸‹è½½å¥½çš„é•œåƒæ–‡ä»¶" class="headerlink" title="å¯¼å…¥ä¸‹è½½å¥½çš„é•œåƒæ–‡ä»¶"></a><font size=4><strong>å¯¼å…¥ä¸‹è½½å¥½çš„é•œåƒæ–‡ä»¶</strong></font></h2><p><img src="/medias/drawing-bed/breeze/5.jpg"></p><h2 id="å…å¯†ç™»å½•"><a href="#å…å¯†ç™»å½•" class="headerlink" title="å…å¯†ç™»å½•"></a><font size=4><strong>å…å¯†ç™»å½•</strong></font></h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># ssh-keygen </span> <span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id 192.168.1.221:</span><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id 192.168.1.222:</span><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id 192.168.1.223:</span><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id 192.168.1.224:</span><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># ssh-copy-id 192.168.1.225:</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/breeze/6.jpg"></p><h2 id="å¯¼å…¥å®Œæˆï¼Œå¯åŠ¨"><a href="#å¯¼å…¥å®Œæˆï¼Œå¯åŠ¨" class="headerlink" title="å¯¼å…¥å®Œæˆï¼Œå¯åŠ¨"></a><font size=4><strong>å¯¼å…¥å®Œæˆï¼Œå¯åŠ¨</strong></font></h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@deploy ~<span class="token punctuation">]</span><span class="token comment"># docker-compose up -d</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/medias/drawing-bed/breeze/7.jpg"></p><h1 id="é…ç½®hostsæ–‡ä»¶"><a href="#é…ç½®hostsæ–‡ä»¶" class="headerlink" title="é…ç½®hostsæ–‡ä»¶"></a><font size=5><strong>é…ç½®hostsæ–‡ä»¶</strong></font></h1><p><img src="/medias/drawing-bed/breeze/8.jpg"></p><h2 id="è®¿é—®220-88å¼€å§‹å®‰è£…"><a href="#è®¿é—®220-88å¼€å§‹å®‰è£…" class="headerlink" title="è®¿é—®220:88å¼€å§‹å®‰è£…"></a><font size=4><strong>è®¿é—®220:88å¼€å§‹å®‰è£…</strong></font></h2><p><img src="/medias/drawing-bed/breeze/9.jpg"></p><h2 id="å¡«å†™é›†ç¾¤å"><a href="#å¡«å†™é›†ç¾¤å" class="headerlink" title="å¡«å†™é›†ç¾¤å"></a><font size=4><strong>å¡«å†™é›†ç¾¤å</strong></font></h2><p><img src="/medias/drawing-bed/breeze/10.jpg"></p><h2 id="åˆ›å»ºå®Œæˆæ‰“å¼€"><a href="#åˆ›å»ºå®Œæˆæ‰“å¼€" class="headerlink" title="åˆ›å»ºå®Œæˆæ‰“å¼€"></a><font size=4><strong>åˆ›å»ºå®Œæˆæ‰“å¼€</strong></font></h2><p><img src="/medias/drawing-bed/breeze/11.jpg"></p><h2 id="å¢åŠ ä¸»æœº"><a href="#å¢åŠ ä¸»æœº" class="headerlink" title="å¢åŠ ä¸»æœº"></a><font size=4><strong>å¢åŠ ä¸»æœº</strong></font></h2><p><img src="/medias/drawing-bed/breeze/12.jpg"></p><h2 id="å®Œæˆåå¦‚ä¸‹"><a href="#å®Œæˆåå¦‚ä¸‹" class="headerlink" title="å®Œæˆåå¦‚ä¸‹"></a><font size=4><strong>å®Œæˆåå¦‚ä¸‹</strong></font></h2><p><img src="/medias/drawing-bed/breeze/13.jpg"></p><h2 id="å¢åŠ ç»„ä»¶"><a href="#å¢åŠ ç»„ä»¶" class="headerlink" title="å¢åŠ ç»„ä»¶"></a><font size=4><strong>å¢åŠ ç»„ä»¶</strong></font></h2><p><img src="/medias/drawing-bed/breeze/14.jpg"></p><h2 id="å…¨éƒ¨é…ç½®å¦‚ä¸‹"><a href="#å…¨éƒ¨é…ç½®å¦‚ä¸‹" class="headerlink" title="å…¨éƒ¨é…ç½®å¦‚ä¸‹"></a><font size=4><strong>å…¨éƒ¨é…ç½®å¦‚ä¸‹</strong></font></h2><p><img src="/medias/drawing-bed/breeze/15.jpg"></p><h1 id="å¼€å§‹å®‰è£…"><a href="#å¼€å§‹å®‰è£…" class="headerlink" title="å¼€å§‹å®‰è£…"></a><font size=5><strong>å¼€å§‹å®‰è£…</strong></font></h1><p><img src="/medias/drawing-bed/breeze/16.jpg"></p><h1 id="å®‰è£…å®Œæˆ"><a href="#å®‰è£…å®Œæˆ" class="headerlink" title="å®‰è£…å®Œæˆ"></a><font size=5><strong>å®‰è£…å®Œæˆ</strong></font></h1><p><img src="/medias/drawing-bed/breeze/17.jpg"><br><img src="/medias/drawing-bed/breeze/18.jpg"><br>æ¥ä¸‹æ¥å°±æ˜¯åˆ°æœåŠ¡å™¨ä¸Šå»ä½¿ç”¨å•¦</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">éªŒè¯ï¼š <span class="token punctuation">[</span>root@worker01 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get cs </span><span class="token punctuation">[</span>root@worker01 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get csr </span><span class="token punctuation">[</span>root@worker01 ~<span class="token punctuation">]</span><span class="token comment"># kubectl get nodes -o wide </span><span class="token punctuation">[</span>root@worker01 ~<span class="token punctuation">]</span><span class="token comment"># kubectl -n kube-system get pods </span><span class="token punctuation">[</span>root@worker01 ~<span class="token punctuation">]</span><span class="token comment"># kubectl -n monitoring get pods </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>Grafana: <a href="http://node:30902/">http://node:30902</a><br>Prometheus: <a href="http://node:30900/">http://node:30900</a><br>Alertmanager: <a href="http://node:30903/">http://node:30903</a></p><p><strong>ERRï¼š</strong><br>&emsp;&emsp;ç‚¹å‡»åˆ›å»ºæ— ååº”ï¼Œåˆ‡æ¢æµè§ˆå™¨æ€¥é€Ÿæ¨¡å¼oræ¢æµè§ˆå™¨ã€‚</p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> wujiops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ambariå®‰è£…</title>
      <link href="/posts/252c.html"/>
      <url>/posts/252c.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="ambariå®‰è£…è§†é¢‘"><a href="#ambariå®‰è£…è§†é¢‘" class="headerlink" title="ambariå®‰è£…è§†é¢‘"></a><font size=5><strong>ambariå®‰è£…è§†é¢‘</strong></font></h1><iframe height="600" width="800" src="//player.bilibili.com/player.html?aid=80163134&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h1 id="ambariå®‰è£…ç¯å¢ƒé…ç½®"><a href="#ambariå®‰è£…ç¯å¢ƒé…ç½®" class="headerlink" title="ambariå®‰è£…ç¯å¢ƒé…ç½®"></a><font size=5><strong>ambariå®‰è£…ç¯å¢ƒé…ç½®</strong></font></h1><p>&emsp;&emsp;æ¥ä¸Šæ–‡esxiå®‰è£…ï¼Œåˆ©ç”¨å…¶è™šæ‹ŸåŒ–å‡ºå¤šä¸ªè™šæ‹Ÿæœºã€‚</p><table><thead><tr><th align="right">ä¸»æœºå</th><th align="center">IP</th><th align="center">å†…å­˜</th><th align="left">ä»‹ç»</th></tr></thead><tbody><tr><td align="right">ambari.hadoop.com</td><td align="center">192.168.1.229</td><td align="center">4G+</td><td align="left">Hadoopé›†ç¾¤ç®¡ç†å·¥å…·</td></tr><tr><td align="right">master1.hadoop.com</td><td align="center">192.168.1.207</td><td align="center">8G+</td><td align="left">Hadoopé›†ç¾¤masterèŠ‚ç‚¹</td></tr><tr><td align="right">master2.hadoop.com</td><td align="center">192.168.1.208</td><td align="center">8G+</td><td align="left">Hadoopé›†ç¾¤masterèŠ‚ç‚¹</td></tr><tr><td align="right">master3.hadoop.com</td><td align="center">192.168.1.209</td><td align="center">8G+</td><td align="left">Hadoopé›†ç¾¤masterèŠ‚ç‚¹</td></tr><tr><td align="right">slave1.hadoop.com</td><td align="center">192.168.1.211</td><td align="center">4G+</td><td align="left">Hadoopé›†ç¾¤slaveèŠ‚ç‚¹</td></tr><tr><td align="right">slave2.hadoop.com</td><td align="center">192.168.1.212</td><td align="center">4G+</td><td align="left">Hadoopé›†ç¾¤slaveèŠ‚ç‚¹</td></tr><tr><td align="right">client.hadoop.com</td><td align="center">192.168.1.221</td><td align="center">4G+</td><td align="left">Hadoopé›†ç¾¤clientèŠ‚ç‚¹</td></tr><tr><td align="right">repo.hadoop.com</td><td align="center">192.168.1.228</td><td align="center">1G+</td><td align="left">Hadoopé›†ç¾¤æœ¬åœ°ä»“åº“</td></tr></tbody></table><h2 id="åˆ›å»ºè™šæ‹Ÿæœº"><a href="#åˆ›å»ºè™šæ‹Ÿæœº" class="headerlink" title="åˆ›å»ºè™šæ‹Ÿæœº"></a><font size=4><strong>åˆ›å»ºè™šæ‹Ÿæœº</strong></font></h2><p><img src="/medias/drawing-bed/ambari/0.jpg"></p><h2 id="è™šæ‹Ÿæœºå-amp-ç³»ç»Ÿ"><a href="#è™šæ‹Ÿæœºå-amp-ç³»ç»Ÿ" class="headerlink" title="è™šæ‹Ÿæœºå&amp;ç³»ç»Ÿ"></a><font size=4><strong>è™šæ‹Ÿæœºå&amp;ç³»ç»Ÿ</strong></font></h2><p><img src="/medias/drawing-bed/ambari/1.jpg"></p><h2 id="è™šæ‹Ÿæœºå®‰è£…ä½ç½®"><a href="#è™šæ‹Ÿæœºå®‰è£…ä½ç½®" class="headerlink" title="è™šæ‹Ÿæœºå®‰è£…ä½ç½®"></a><font size=4><strong>è™šæ‹Ÿæœºå®‰è£…ä½ç½®</strong></font></h2><p><img src="/medias/drawing-bed/ambari/2.jpg"></p><h3 id="é€‰æ‹©CPUçƒ­æ·»åŠ "><a href="#é€‰æ‹©CPUçƒ­æ·»åŠ " class="headerlink" title="é€‰æ‹©CPUçƒ­æ·»åŠ "></a><font size=3><strong>é€‰æ‹©CPUçƒ­æ·»åŠ </strong></font></h3><p><img src="/medias/drawing-bed/ambari/3.jpg"></p><h3 id="é€‰æ‹©CPUè™šæ‹ŸåŒ–"><a href="#é€‰æ‹©CPUè™šæ‹ŸåŒ–" class="headerlink" title="é€‰æ‹©CPUè™šæ‹ŸåŒ–"></a><font size=3><strong>é€‰æ‹©CPUè™šæ‹ŸåŒ–</strong></font></h3><p><img src="/medias/drawing-bed/ambari/4.jpg"></p><h3 id="è®¾ç½®RAMå¤§å°ï¼Œå¯ç”¨å†…å­˜çƒ­æ’æ‹”"><a href="#è®¾ç½®RAMå¤§å°ï¼Œå¯ç”¨å†…å­˜çƒ­æ’æ‹”" class="headerlink" title="è®¾ç½®RAMå¤§å°ï¼Œå¯ç”¨å†…å­˜çƒ­æ’æ‹”"></a><font size=3><strong>è®¾ç½®RAMå¤§å°ï¼Œå¯ç”¨å†…å­˜çƒ­æ’æ‹”</strong></font></h3><p><img src="/medias/drawing-bed/ambari/5.jpg"></p><h2 id="é€‰æ‹©ç³»ç»Ÿç›˜å¤§å°40G"><a href="#é€‰æ‹©ç³»ç»Ÿç›˜å¤§å°40G" class="headerlink" title="é€‰æ‹©ç³»ç»Ÿç›˜å¤§å°40G+"></a><font size=4><strong>é€‰æ‹©ç³»ç»Ÿç›˜å¤§å°40G+</strong></font></h2><p><img src="/medias/drawing-bed/ambari/6.jpg"></p><h2 id="é€‰æ‹©ä¸Šè½½çš„ISOæ–‡ä»¶"><a href="#é€‰æ‹©ä¸Šè½½çš„ISOæ–‡ä»¶" class="headerlink" title="é€‰æ‹©ä¸Šè½½çš„ISOæ–‡ä»¶"></a><font size=4><strong>é€‰æ‹©ä¸Šè½½çš„ISOæ–‡ä»¶</strong></font></h2><p><img src="/medias/drawing-bed/ambari/7.jpg"></p><h2 id="åŒå‡»çº¢è‰²æ¡†åŒºåŸŸï¼Œå’ŒVMwareå®‰è£…ä¸€æ ·"><a href="#åŒå‡»çº¢è‰²æ¡†åŒºåŸŸï¼Œå’ŒVMwareå®‰è£…ä¸€æ ·" class="headerlink" title="åŒå‡»çº¢è‰²æ¡†åŒºåŸŸï¼Œå’ŒVMwareå®‰è£…ä¸€æ ·"></a><font size=4><strong>åŒå‡»çº¢è‰²æ¡†åŒºåŸŸï¼Œå’ŒVMwareå®‰è£…ä¸€æ ·</strong></font></h2><p><img src="/medias/drawing-bed/ambari/8.jpg"></p><h1 id="å…¨éƒ¨å®‰è£…å®Œè®°å¾—å³é”®æ‹æ‘„å¿«ç…§ï¼Œè®°å¥½å¿«ç…§å¤‡æ³¨"><a href="#å…¨éƒ¨å®‰è£…å®Œè®°å¾—å³é”®æ‹æ‘„å¿«ç…§ï¼Œè®°å¥½å¿«ç…§å¤‡æ³¨" class="headerlink" title="å…¨éƒ¨å®‰è£…å®Œè®°å¾—å³é”®æ‹æ‘„å¿«ç…§ï¼Œè®°å¥½å¿«ç…§å¤‡æ³¨"></a><font size=5><strong>å…¨éƒ¨å®‰è£…å®Œè®°å¾—å³é”®æ‹æ‘„å¿«ç…§ï¼Œè®°å¥½å¿«ç…§å¤‡æ³¨</strong></font></h1><p><img src="/medias/drawing-bed/ambari/9.jpg"><br><strong><font color=red>æ­¤æ®µä¸»æœºrepo.hadoop.com</font></strong></p><h1 id="repoæœºå™¨å®‰è£…apacheæœåŠ¡"><a href="#repoæœºå™¨å®‰è£…apacheæœåŠ¡" class="headerlink" title="repoæœºå™¨å®‰è£…apacheæœåŠ¡"></a><font size=5><strong>repoæœºå™¨å®‰è£…apacheæœåŠ¡</strong></font></h1><p><img src="/medias/drawing-bed/ambari/10.jpg"></p><h2 id="ä¸Šä¼ ä¸‹è½½å¥½çš„ambari-HDPåº“"><a href="#ä¸Šä¼ ä¸‹è½½å¥½çš„ambari-HDPåº“" class="headerlink" title="ä¸Šä¼ ä¸‹è½½å¥½çš„ambari-HDPåº“"></a><font size=4><strong>ä¸Šä¼ ä¸‹è½½å¥½çš„ambari-HDPåº“</strong></font></h2><p>&emsp;&emsp;<strong>å‚è€ƒambariå®‰è£…hdp-é“¾æ¥</strong><br><img src="/medias/drawing-bed/ambari/11.jpg"><br><strong><font color=red>æ­¤æ®µç»“æŸ</font></strong></p><h2 id="repoä»“åº“é…ç½®"><a href="#repoä»“åº“é…ç½®" class="headerlink" title="repoä»“åº“é…ç½®"></a><font size=4><strong>repoä»“åº“é…ç½®</strong></font></h2><p>&emsp;&emsp;<strong>ä¸€å®šè¦ä¿®æ”¹è„šæœ¬,ä¸ºè‡ªå·±å¯ç”¨,ä¸‹é¢æœ‰å†™åœ¨ä¼˜åŒ–è„šæœ¬ä¸­,æœ¬æ®µå¯å¿½ç•¥</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@repo ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/yum.repos.d/ambari.repo</span><span class="token punctuation">[</span>ambari<span class="token punctuation">]</span><span class="token assign-left variable">name</span><span class="token operator">=</span>ambari<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://192.168.1.200/ambari/centos7/2.7.3.0-139/<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span><span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">[</span>HDP<span class="token punctuation">]</span><span class="token assign-left variable">name</span><span class="token operator">=</span>HDP<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://192.168.1.200/HDP/centos7/3.1.0.0-78/<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span><span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">[</span>HDP-UTILS<span class="token punctuation">]</span><span class="token assign-left variable">name</span><span class="token operator">=</span>HDP-UTILS<span class="token assign-left variable">baseurl</span><span class="token operator">=</span>http://192.168.1.200/HDP-UTILS/centos7/1.1.0.22/<span class="token assign-left variable">gpgcheck</span><span class="token operator">=</span><span class="token number">0</span><span class="token assign-left variable">enabled</span><span class="token operator">=</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="jdké…ç½®"><a href="#jdké…ç½®" class="headerlink" title="jdké…ç½®"></a><font size=5><strong>jdké…ç½®</strong></font></h1><p>&emsp;&emsp;<strong>ä¸€å®šè¦ä¿®æ”¹è„šæœ¬,ä¸ºè‡ªå·±å¯ç”¨,ä¸‹é¢æœ‰å†™åœ¨ä¼˜åŒ–è„šæœ¬ä¸­,æœ¬æ®µå¯å¿½ç•¥</strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wget</span> -O /opt/jdk-8u151-linux-x64.tar.gz http://192.168.1.200/jdk-8u151-linux-x64.tar.gz<span class="token builtin class-name">cd</span> /opt <span class="token operator">&amp;&amp;</span> <span class="token function">tar</span> xf jdk-8u151-linux-x64.tar.gz <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span><span class="token function">cat</span> <span class="token operator">>></span> /etc/profile <span class="token operator">&lt;&lt;</span> <span class="token string">EOFexport JAVA_HOME=/opt/jdk1.8.0_151/export PATH=<span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span>export CLASSPATH=.:<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:<span class="token variable">$JAVA_HOME</span>/lib/tools.jarEOF</span><span class="token builtin class-name">source</span> /etc/profile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ä¸€äº›è„šæœ¬"><a href="#ä¸€äº›è„šæœ¬" class="headerlink" title="ä¸€äº›è„šæœ¬"></a><font size=5><strong>ä¸€äº›è„šæœ¬</strong></font></h1><h2 id="å…äº¤äº’ç”Ÿæˆå¯†é’¥-amp-å¯†é’¥åˆ†å‘"><a href="#å…äº¤äº’ç”Ÿæˆå¯†é’¥-amp-å¯†é’¥åˆ†å‘" class="headerlink" title="å…äº¤äº’ç”Ÿæˆå¯†é’¥ &amp; å¯†é’¥åˆ†å‘"></a><font size=4><strong>å…äº¤äº’ç”Ÿæˆå¯†é’¥ &amp; å¯†é’¥åˆ†å‘</strong></font></h2><p><strong><font color=red>æ­¤æ®µä¸»æœºambari.hadoop.com</font></strong></p><p>&emsp;&emsp;<strong>ä¸€å®šè¦ä¿®æ”¹è„šæœ¬,ä¸ºè‡ªå·±å¯ç”¨</strong></font></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token comment"># å®‰è£…å¯†é’¥ç”Ÿæˆå·¥å…·å’Œæ‰¹é‡å¤„ç†å·¥å…·</span>yum -y <span class="token function">install</span> <span class="token function">expect</span> sshpass<span class="token comment"># æ— äº¤äº’ç”Ÿæˆå¯†é’¥</span>spawn ssh-keygen<span class="token function">expect</span> <span class="token punctuation">&#123;</span>        <span class="token string">"*(~/.ssh/id_rsa)"</span> <span class="token punctuation">&#123;</span>send <span class="token string">"<span class="token entity" title="\r">\r</span>"</span><span class="token punctuation">;</span>exp_continue<span class="token punctuation">&#125;</span>        <span class="token string">"*(empty for no passphrase)"</span> <span class="token punctuation">&#123;</span>send <span class="token string">"<span class="token entity" title="\r">\r</span>"</span><span class="token punctuation">;</span>exp_continue<span class="token punctuation">&#125;</span>        <span class="token string">"*again"</span> <span class="token punctuation">&#123;</span>send <span class="token string">"<span class="token entity" title="\r">\r</span>"</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token function">expect</span> eof<span class="token comment"># æ‰¹é‡åˆ†å‘</span><span class="token comment">#for ip in $*</span><span class="token keyword">for</span> <span class="token for-or-select variable">ip</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">101</span> <span class="token number">111</span><span class="token variable">)</span></span><span class="token keyword">do</span>  <span class="token function">ping</span> <span class="token number">192.168</span>.1.<span class="token variable">$ip</span> -c1 <span class="token operator">&amp;></span>/dev/null   <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> -gt <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>    <span class="token builtin class-name">echo</span> <span class="token string">"192.168.1.<span class="token variable">$ip</span>æ— æ³•pingé€šè¯·æ£€æŸ¥ç½‘ç»œ"</span>     <span class="token builtin class-name">continue</span>  <span class="token keyword">fi</span>  sshpass -p <span class="token string">"pass@word1"</span> ssh-copy-id -o <span class="token assign-left variable">StrictHostKeyChecking</span><span class="token operator">=</span>no root@192.168.1.<span class="token variable">$ip</span> <span class="token operator">&amp;></span>/dev/null  <span class="token builtin class-name">echo</span> <span class="token string">"192.168.1.<span class="token variable">$ip</span> å¯†é’¥åˆ†å‘æˆåŠŸ"</span><span class="token keyword">done</span><span class="token comment">################################</span><span class="token comment">#1.ä½¿ç”¨sshè¿æ¥è¿œç¨‹ä¸»æœºæ—¶åŠ ä¸Š"-o StrictHostKeyChecking=no"çš„é€‰é¡¹ï¼Œå¦‚ä¸‹ï¼šï¼ˆæ¨èï¼ï¼ï¼ï¼‰</span><span class="token comment">#åšæ³•æ˜¯ä½¿ç”¨-o è¿™ä¸ªå‚æ•°ï¼Œåœ¨ssh/scpé‡ŒåŠ ä¸Š -o "StrictHostKeyChecking no" å³å¯è·³è¿‡è¿™ä¸ªyes/noè¯¢é—®ï¼Œç›´æ¥è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œä¾‹ï¼š</span><span class="token comment">#Use the -o optionï¼š</span><span class="token comment">#scp -o "StrictHostKeyChecking no" 1.txt user@host:1.txt </span><span class="token comment">#ssh -o "StrictHostKeyChecking no" user@host</span><span class="token comment">#2.ä¸€ä¸ªå½»åº•å»æ‰è¿™ä¸ªæç¤ºçš„æ–¹æ³•æ˜¯ï¼Œä¿®æ”¹å½“å‰ä¸»æœº/etc/ssh/ssh_configæ–‡ä»¶ï¼ˆæˆ–$HOME/.ssh/configï¼‰ä¸­çš„é…ç½®ï¼Œæ·»åŠ å¦‚ä¸‹ä¸¤è¡Œé…ç½®ï¼š</span><span class="token comment">#æºä¸ºï¼šStrictHostKeyChecking ask</span><span class="token comment">#æ”¹ä¸ºï¼šStrictHostKeyChecking no</span><span class="token comment">#################################</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token comment"># æ‰§è¡Œbash å½“å‰è„šæœ¬ IP1 IP2 IP3...,è¾“å…¥çš„IPä¼šä¼ ç»™$*</span><span class="token assign-left variable">User</span><span class="token operator">=</span>root<span class="token assign-left variable">passWord</span><span class="token operator">=</span>pass@word1<span class="token keyword">for</span> <span class="token for-or-select variable">ip</span> <span class="token keyword">in</span> <span class="token variable">$*</span><span class="token keyword">do</span>    <span class="token function">ping</span> <span class="token number">192.168</span>.1.<span class="token variable">$ip</span> -c1 <span class="token operator">&amp;></span>/dev/null     <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$?</span> -gt <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">then</span>        <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$ip</span>æ— æ³•pingé€šè¯·æ£€æŸ¥ç½‘ç»œ"</span>         <span class="token builtin class-name">continue</span>    <span class="token keyword">fi</span><span class="token comment">#    sshpass -p "$passWord" ssh-copy-id -i ~/.ssh/id_dsa.pub "-o StrictHostKeyChecking=no $&#123;User&#125;@$ip" &amp;>/dev/null</span><span class="token comment">#    echo "$ip å¯†é’¥åˆ†å‘æˆåŠŸ"</span>     <span class="token builtin class-name">echo</span> <span class="token string">"192.168.1.<span class="token variable">$ip</span> ok"</span><span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong><font color=red>æ­¤æ®µç»“æŸ</font></strong></p><h2 id="å®‰è£…ç³»ç»Ÿ-ä¼˜åŒ–è„šæœ¬"><a href="#å®‰è£…ç³»ç»Ÿ-ä¼˜åŒ–è„šæœ¬" class="headerlink" title="å®‰è£…ç³»ç»Ÿ,ä¼˜åŒ–è„šæœ¬"></a><font size=4><strong>å®‰è£…ç³»ç»Ÿ,ä¼˜åŒ–è„šæœ¬</strong></font></h2><p>&emsp;&emsp;<strong>ä¸€å®šè¦ä¿®æ”¹è„šæœ¬,ä¸ºè‡ªå·±å¯ç”¨</strong><br>å°†è„šæœ¬åˆ†å‘ç»™æ‰€æœ‰ä¸»æœºå¹¶æ‰§è¡Œ.</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span><span class="token comment">#Yumæºæ›´æ¢ä¸ºå›½å†…é˜¿é‡Œæº</span>yum <span class="token function">install</span> <span class="token function">wget</span> telnet -y<span class="token builtin class-name">cd</span> /etc/yum.repos.d/<span class="token function">mkdir</span> repo_old<span class="token function">mv</span> *.repo repo_old/<span class="token function">wget</span> -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo<span class="token comment">#æ·»åŠ é˜¿é‡Œçš„epelæº</span><span class="token function">wget</span> -O /etc/yum.repos.d/epel.repo http://mirrors.aliyun.com/repo/epel-7.repo<span class="token comment">#æ·»åŠ ambariæœ¬åœ°æº</span><span class="token function">cat</span> <span class="token operator">>></span> /etc/yum.repos.d/ambari.repo <span class="token operator">&lt;&lt;</span> <span class="token string">EOF[ambari]name=ambaribaseurl=http://192.168.1.200/ambari/centos7/2.7.3.0-139/gpgcheck=0enabled=1[HDP]name=HDPbaseurl=http://192.168.1.200/HDP/centos7/3.1.0.0-78/gpgcheck=0enabled=1[HDP-UTILS]name=HDP-UTILSbaseurl=http://192.168.1.200/HDP-UTILS/centos7/1.1.0.22/gpgcheck=0enabled=1EOF</span><span class="token comment">#ä¿®æ”¹hostsæ–‡ä»¶</span><span class="token function">cat</span> <span class="token operator">>></span> /etc/hosts <span class="token operator">&lt;&lt;</span> <span class="token string">EOF192.168.1.101  master1.hadoop.com192.168.1.102  master2.hadoop.com192.168.1.103  master3.hadoop.com192.168.1.104  slave1.hadoop.com192.168.1.105  slave2.hadoop.com192.168.1.108  client.hadoop.com192.168.1.110  ambari.hadoop.comEOF</span><span class="token comment">#yumé‡æ–°å»ºç«‹ç¼“å­˜</span>yum clean allyum makecache<span class="token comment">#åŒæ­¥æ—¶é—´</span>yum -y <span class="token function">install</span> ntp/usr/sbin/ntpdate cn.pool.ntp.org<span class="token builtin class-name">echo</span> <span class="token string">"* 4 * * * /usr/sbin/ntpdate cn.pool.ntp.org > /dev/null 2>&amp;1"</span> <span class="token operator">>></span> /var/spool/cron/rootsystemctl  restart crond.service<span class="token comment">#å®‰è£…vim</span>yum -y <span class="token function">install</span> <span class="token function">vim</span><span class="token comment">#è®¾ç½®æœ€å¤§æ‰“å¼€æ–‡ä»¶æè¿°ç¬¦æ•°</span><span class="token builtin class-name">echo</span> <span class="token string">"ulimit -SHn 102400"</span> <span class="token operator">>></span> /etc/rc.local<span class="token function">cat</span> <span class="token operator">>></span> /etc/security/limits.conf <span class="token operator">&lt;&lt;</span> <span class="token string">EOF*           soft   nofile       655350*           hard   nofile       655350EOF</span><span class="token comment">#ç¦ç”¨selinux &amp; firewalld</span><span class="token function">sed</span> -i <span class="token string">'s/SELINUX=enforcing/SELINUX=disabled/'</span> /etc/selinux/configsetenforce <span class="token number">0</span>systemctl disable firewalld.service systemctl stop firewalld.service <span class="token comment">#sshè®¾ç½®</span><span class="token comment">#sed -i 's/^GSSAPIAuthentication yes$/GSSAPIAuthentication no/' /etc/ssh/sshd_config</span><span class="token comment">#sed -i 's/#UseDNS yes/UseDNS no/' /etc/ssh/sshd_config</span><span class="token comment">#systemctl  restart sshd.service</span><span class="token comment">#å†…æ ¸å‚æ•°ä¼˜åŒ–</span><span class="token comment">#cat >> /etc/sysctl.conf &lt;&lt; EOF</span><span class="token comment">#vm.overcommit_memory = 1</span><span class="token comment">#net.ipv4.tcp_fin_timeout = 1</span><span class="token comment">#net.ipv4.tcp_keepalive_time = 1200</span><span class="token comment">#net.ipv4.tcp_mem = 94500000 915000000 927000000</span><span class="token comment">#net.ipv4.tcp_tw_reuse = 1</span><span class="token comment">#net.ipv4.tcp_tw_recycle = 1</span><span class="token comment">#net.ipv4.tcp_timestamps = 0</span><span class="token comment">#net.ipv4.tcp_synack_retries = 1</span><span class="token comment">#net.ipv4.tcp_syn_retries = 1</span><span class="token comment">#net.ipv4.tcp_abort_on_overflow = 0</span><span class="token comment">#net.core.rmem_max = 16777216</span><span class="token comment">#net.core.wmem_max = 16777216</span><span class="token comment">#net.core.netdev_max_backlog = 262144</span><span class="token comment">#net.ipv4.tcp_max_orphans = 3276800</span><span class="token comment">#net.ipv4.tcp_max_syn_backlog = 262144</span><span class="token comment">#net.core.wmem_default = 8388608</span><span class="token comment">#net.core.rmem_default = 8388608</span><span class="token comment">#EOF</span><span class="token comment">#/sbin/sysctl -p</span><span class="token comment"># jdk é…ç½®</span><span class="token function">wget</span> -O /opt/jdk-8u151-linux-x64.tar.gz http://192.168.1.200/jdk-8u151-linux-x64.tar.gz<span class="token builtin class-name">cd</span> /opt <span class="token operator">&amp;&amp;</span> <span class="token function">tar</span> xf jdk-8u151-linux-x64.tar.gz <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span><span class="token function">cat</span> <span class="token operator">>></span> /etc/profile <span class="token operator">&lt;&lt;</span> <span class="token string">EOFexport JAVA_HOME=/opt/jdk1.8.0_151/export PATH=<span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span>export CLASSPATH=.:<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:<span class="token variable">$JAVA_HOME</span>/lib/tools.jarEOF</span><span class="token comment">#vimå®šä¹‰é€€æ ¼é”®å¯åˆ é™¤æœ€åä¸€ä¸ªå­—ç¬¦ç±»å‹</span><span class="token builtin class-name">echo</span> <span class="token string">'alias vi=vim'</span> <span class="token operator">>></span> /etc/profile<span class="token builtin class-name">echo</span> <span class="token string">'stty erase ^H'</span> <span class="token operator">>></span> /etc/profile<span class="token function">cat</span> <span class="token operator">>></span> /root/.vimrc <span class="token operator">&lt;&lt;</span> <span class="token string">EOFset tabstop=4set shiftwidth=4set expandtabsyntax onset numberEOF</span><span class="token comment">#update soft</span><span class="token comment">#yum -y update</span><span class="token function">reboot</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="ambariå®‰è£…"><a href="#ambariå®‰è£…" class="headerlink" title="ambariå®‰è£…"></a><font size=5><strong>ambariå®‰è£…</strong></font></h1><p><strong><font color=red>æ­¤æ®µåœ¨ambari.hadoop.com</font></strong></p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token punctuation">[</span>root@ambari ~<span class="token punctuation">]</span><span class="token comment"># yum install ambari-server -y</span><span class="token punctuation">[</span>root@ambari ~<span class="token punctuation">]</span><span class="token comment"># ambari-server setup</span>Using python  /usr/bin/pythonSetup ambari-serverChecking SELinux<span class="token punctuation">..</span>.SELinux status is <span class="token string">'disabled'</span>Customize user account <span class="token keyword">for</span> ambari-server daemon <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span>? yEnter user account <span class="token keyword">for</span> ambari-server daemon <span class="token punctuation">(</span>root<span class="token punctuation">)</span>:rootAdjusting ambari-server permissions and ownership<span class="token punctuation">..</span>.Checking firewall status<span class="token punctuation">..</span>.Checking JDK<span class="token punctuation">..</span>.<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> Oracle JDK <span class="token number">1.8</span> + Java Cryptography Extension <span class="token punctuation">(</span>JCE<span class="token punctuation">)</span> Policy Files <span class="token number">8</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> Custom JDK<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>Enter choice <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>: <span class="token number">2</span>WARNING: JDK must be installed on all hosts and JAVA_HOME must be valid on all hosts.WARNING: JCE Policy files are required <span class="token keyword">for</span> configuring Kerberos security. If you plan to use Kerberos,please <span class="token function">make</span> sure JCE Unlimited Strength Jurisdiction Policy Files are valid on all hosts.Path to JAVA_HOME: /opt/jdk1.8.0_151/Validating JDK on Ambari Server<span class="token punctuation">..</span>.done.Check JDK version <span class="token keyword">for</span> Ambari Server<span class="token punctuation">..</span>.JDK version found: <span class="token number">8</span>Minimum JDK version is <span class="token number">8</span> <span class="token keyword">for</span> Ambari. Skipping to setup different JDK <span class="token keyword">for</span> Ambari Server.Checking GPL software agreement<span class="token punctuation">..</span>.GPL License <span class="token keyword">for</span> LZO: https://www.gnu.org/licenses/old-licenses/gpl-2.0.en.htmlEnable Ambari Server to download and <span class="token function">install</span> GPL Licensed LZO packages <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span>? Completing setup<span class="token punctuation">..</span>.Configuring database<span class="token punctuation">..</span>.Enter advanced database configuration <span class="token punctuation">[</span>y/n<span class="token punctuation">]</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span>? Configuring database<span class="token punctuation">..</span>.Default properties detected. Using built-in database.Configuring ambari database<span class="token punctuation">..</span>.Checking PostgreSQL<span class="token punctuation">..</span>.Running initdb: This may take up to a minute.Initializing database <span class="token punctuation">..</span>. OKAbout to start PostgreSQLConfiguring <span class="token builtin class-name">local</span> database<span class="token punctuation">..</span>.Configuring PostgreSQL<span class="token punctuation">..</span>.Restarting PostgreSQLCreating schema and user<span class="token punctuation">..</span>.done.Creating tables<span class="token punctuation">..</span>.done.Extracting system views<span class="token punctuation">..</span>.ambari-admin-2.7.3.0.139.jar<span class="token punctuation">..</span><span class="token punctuation">..</span>Ambari repo <span class="token function">file</span> doesn<span class="token string">'t contain latest json url, skipping repoinfos modificationAdjusting ambari-server permissions and ownership...Ambari Server '</span>setup' completed successfully.<span class="token punctuation">[</span>root@ambari ~<span class="token punctuation">]</span><span class="token comment"># ambari-server start</span><span class="token comment"># ç½‘é¡µç«¯è®¿é—®ambari.hadoop.com:8080å®‰è£…hadoopå³å¯ï¼Œä¸‹ä¸€ç¯‡ä»‹ç»ã€‚</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong><font color=red>æ­¤æ®µç»“æŸ</font></strong></p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~  </p>]]></content>
      
      
      <categories>
          
          <category> hadoop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>esxiå®‰è£…</title>
      <link href="/posts/ce71.html"/>
      <url>/posts/ce71.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="çº¦å®š"><a href="#çº¦å®š" class="headerlink" title="çº¦å®š"></a><font size=6><strong>çº¦å®š</strong></font></h1><p>&emsp;&emsp;è½¯ç¢Ÿé€š ç‰ˆæœ¬9.7 <a href="https://cn.ultraiso.net/xiazai.html" title="ç‰ˆæœ¬ï¼š9.7.2.3561">è½¯ç¢Ÿé€š9.7</a><br>&emsp;&emsp;esxi ç‰ˆæœ¬6.7 <a href="https://my.vmware.com/cn/web/vmware/evalcenter?p=vsphere-eval&wd=&eqid=bbb193fe000386d7000000025dfc67c4" title="VMware vSphere 6.7">VMware vSphere 6.7</a><br>ä¸‹è½½å¥½esxi6.7éœ€è¦æ³¨å†Œè´¦æˆ·ä¸‹è½½(å…è´¹)ï¼Œæˆ–è€…é€šè¿‡ç¬¬ä¸‰æ–¹åˆ†äº«ä¸‹è½½ã€‚<br>ä¸‹è½½å¥½ultraisoå¯ä»¥å…è´¹è¯•ç”¨</p><iframe height="600" width="800" src="//player.bilibili.com/player.html?aid=79942932&cid=136819745&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h2 id="esxiç³»ç»Ÿå®‰è£…"><a href="#esxiç³»ç»Ÿå®‰è£…" class="headerlink" title="esxiç³»ç»Ÿå®‰è£…"></a><font size=5><strong>esxiç³»ç»Ÿå®‰è£…</strong></font></h2><h3 id="æ‰“å¼€è½¯ç¢Ÿé€šè½¯ä»¶"><a href="#æ‰“å¼€è½¯ç¢Ÿé€šè½¯ä»¶" class="headerlink" title="æ‰“å¼€è½¯ç¢Ÿé€šè½¯ä»¶"></a><font size=4><strong>æ‰“å¼€è½¯ç¢Ÿé€šè½¯ä»¶</strong></font></h3><p>&emsp;&emsp;<font color=red>é€‰æ‹©é•œåƒï¼Œç‚¹å‡»å¯åŠ¨ï¼Œå†™å…¥ç¡¬ç›˜æ˜ åƒ</font><br><img src="/medias/drawing-bed/esxi/0.jpg"></p><h3 id="å†™å…¥ï¼Œç­‰å¾…å®Œæˆ"><a href="#å†™å…¥ï¼Œç­‰å¾…å®Œæˆ" class="headerlink" title="å†™å…¥ï¼Œç­‰å¾…å®Œæˆ"></a><font size=4><strong>å†™å…¥ï¼Œç­‰å¾…å®Œæˆ</strong></font></h3><p><img src="/medias/drawing-bed/esxi/1.jpg"></p><h3 id="å®Œæˆåï¼Œå†™å…¥ä¾¿æ·å¯åŠ¨"><a href="#å®Œæˆåï¼Œå†™å…¥ä¾¿æ·å¯åŠ¨" class="headerlink" title="å®Œæˆåï¼Œå†™å…¥ä¾¿æ·å¯åŠ¨"></a><font size=4><strong>å®Œæˆåï¼Œå†™å…¥ä¾¿æ·å¯åŠ¨</strong></font></h3><p><img src="/medias/drawing-bed/esxi/2.jpg"></p><h3 id="é€‰æ‹©syslinuxå†™å…¥å³å¯"><a href="#é€‰æ‹©syslinuxå†™å…¥å³å¯" class="headerlink" title="é€‰æ‹©syslinuxå†™å…¥å³å¯"></a><font size=4><strong>é€‰æ‹©syslinuxå†™å…¥å³å¯</strong></font></h3><p><img src="/medias/drawing-bed/esxi/3.jpg"></p><h3 id="é€‰æ‹©LinuxæœåŠ¡å™¨å®‰è£…syslinux"><a href="#é€‰æ‹©LinuxæœåŠ¡å™¨å®‰è£…syslinux" class="headerlink" title="é€‰æ‹©LinuxæœåŠ¡å™¨å®‰è£…syslinux"></a><font size=4><strong>é€‰æ‹©LinuxæœåŠ¡å™¨å®‰è£…syslinux</strong></font></h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> syslinux -y<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/medias/drawing-bed/esxi/4.jpg"></p><h3 id="æŠŠmenu-c32å¤åˆ¶å‡ºæ¥"><a href="#æŠŠmenu-c32å¤åˆ¶å‡ºæ¥" class="headerlink" title="æŠŠmenu.c32å¤åˆ¶å‡ºæ¥"></a><font size=4><strong>æŠŠmenu.c32å¤åˆ¶å‡ºæ¥</strong></font></h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> /usr/share/syslinux<span class="token comment"># 1.ä½¿ç”¨sftpå·¥å…·å¯¼å‡º</span><span class="token comment"># 2.ä½¿ç”¨lrzszå¯¼å‡º</span>yum <span class="token function">install</span> lrzsz -ysz menu.c32<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/medias/drawing-bed/esxi/5.jpg"></p><h3 id="æŠŠmenu-c32å¤åˆ¶åˆ°Uç›˜çš„æ ¹ç›®å½•ï¼Œé€‰æ‹©è¦†ç›–"><a href="#æŠŠmenu-c32å¤åˆ¶åˆ°Uç›˜çš„æ ¹ç›®å½•ï¼Œé€‰æ‹©è¦†ç›–" class="headerlink" title="æŠŠmenu.c32å¤åˆ¶åˆ°Uç›˜çš„æ ¹ç›®å½•ï¼Œé€‰æ‹©è¦†ç›–"></a><font size=4><strong>æŠŠmenu.c32å¤åˆ¶åˆ°Uç›˜çš„æ ¹ç›®å½•ï¼Œé€‰æ‹©è¦†ç›–</strong></font></h3><p><img src="/medias/drawing-bed/esxi/6.jpg"></p><h3 id="Uç›˜æ’å…¥æœåŠ¡å™¨ï¼Œå¼€æœºF8é€‰æ‹©Uç›˜å¯åŠ¨"><a href="#Uç›˜æ’å…¥æœåŠ¡å™¨ï¼Œå¼€æœºF8é€‰æ‹©Uç›˜å¯åŠ¨" class="headerlink" title="Uç›˜æ’å…¥æœåŠ¡å™¨ï¼Œå¼€æœºF8é€‰æ‹©Uç›˜å¯åŠ¨"></a><font size=4><strong>Uç›˜æ’å…¥æœåŠ¡å™¨ï¼Œå¼€æœºF8é€‰æ‹©Uç›˜å¯åŠ¨</strong></font></h3><p><img src="/medias/drawing-bed/esxi/7.jpg"></p><h3 id="æ¬¢è¿å®‰è£…ç•Œé¢ï¼Œé€‰æ‹©Continue"><a href="#æ¬¢è¿å®‰è£…ç•Œé¢ï¼Œé€‰æ‹©Continue" class="headerlink" title="æ¬¢è¿å®‰è£…ç•Œé¢ï¼Œé€‰æ‹©Continue"></a><font size=4><strong>æ¬¢è¿å®‰è£…ç•Œé¢ï¼Œé€‰æ‹©Continue</strong></font></h3><p><img src="/medias/drawing-bed/esxi/8.jpg"></p><h3 id="ç”¨æˆ·åè®®ï¼ŒF11åŒæ„ç»§ç»­"><a href="#ç”¨æˆ·åè®®ï¼ŒF11åŒæ„ç»§ç»­" class="headerlink" title="ç”¨æˆ·åè®®ï¼ŒF11åŒæ„ç»§ç»­"></a><font size=4><strong>ç”¨æˆ·åè®®ï¼ŒF11åŒæ„ç»§ç»­</strong></font></h3><p><img src="/medias/drawing-bed/esxi/9.jpg"></p><h3 id="æ‰«æè®¾å¤‡ï¼Œç­‰ä¸€ä¼šå°±å¥½"><a href="#æ‰«æè®¾å¤‡ï¼Œç­‰ä¸€ä¼šå°±å¥½" class="headerlink" title="æ‰«æè®¾å¤‡ï¼Œç­‰ä¸€ä¼šå°±å¥½"></a><font size=4><strong>æ‰«æè®¾å¤‡ï¼Œç­‰ä¸€ä¼šå°±å¥½</strong></font></h3><p><img src="/medias/drawing-bed/esxi/10.jpg"></p><h3 id="æ³¨æ„ï¼è¿™é‡Œä¸€å®šç¡®è®¤æ˜¯ä½ çš„ç¡¬ç›˜"><a href="#æ³¨æ„ï¼è¿™é‡Œä¸€å®šç¡®è®¤æ˜¯ä½ çš„ç¡¬ç›˜" class="headerlink" title="æ³¨æ„ï¼è¿™é‡Œä¸€å®šç¡®è®¤æ˜¯ä½ çš„ç¡¬ç›˜"></a><font size=4 color=red><strong>æ³¨æ„ï¼è¿™é‡Œä¸€å®šç¡®è®¤æ˜¯ä½ çš„ç¡¬ç›˜</strong></font></h3><p>&emsp;&emsp;è¿™é‡Œæ˜¯å®‰è£…esxiéœ€è¦çš„ç¡¬ç›˜ï¼Œä¸è¦é€‰æ‹©è‡ªå·±çš„Uç›˜ï¼Œé™¤éä½ æƒ³æŠŠç³»ç»Ÿå®‰è£…åˆ°Uç›˜ä¸­<br><img src="/medias/drawing-bed/esxi/11.jpg"></p><h3 id="è¾“å…¥è®¾å¤‡ï¼Œå¦‚æœä½ çš„é”®é¼ ä¸æ˜¯ç‰¹æ®Šçš„ï¼Œé»˜è®¤å³å¯"><a href="#è¾“å…¥è®¾å¤‡ï¼Œå¦‚æœä½ çš„é”®é¼ ä¸æ˜¯ç‰¹æ®Šçš„ï¼Œé»˜è®¤å³å¯" class="headerlink" title="è¾“å…¥è®¾å¤‡ï¼Œå¦‚æœä½ çš„é”®é¼ ä¸æ˜¯ç‰¹æ®Šçš„ï¼Œé»˜è®¤å³å¯"></a><font size=4><strong>è¾“å…¥è®¾å¤‡ï¼Œå¦‚æœä½ çš„é”®é¼ ä¸æ˜¯ç‰¹æ®Šçš„ï¼Œé»˜è®¤å³å¯</strong></font></h3><p><img src="/medias/drawing-bed/esxi/12.jpg"></p><h3 id="rootå¯†ç ï¼Œç½‘é¡µç®¡ç†å°å’Œè®¾ç½®ç”¨å¾—åˆ°"><a href="#rootå¯†ç ï¼Œç½‘é¡µç®¡ç†å°å’Œè®¾ç½®ç”¨å¾—åˆ°" class="headerlink" title="rootå¯†ç ï¼Œç½‘é¡µç®¡ç†å°å’Œè®¾ç½®ç”¨å¾—åˆ°"></a><font size=4><strong>rootå¯†ç ï¼Œç½‘é¡µç®¡ç†å°å’Œè®¾ç½®ç”¨å¾—åˆ°</strong></font></h3><p>&emsp;&emsp;(æœ€å¥½<font color=red>å¤§å°å†™ ç¬¦å· æ•°å­—</font>éƒ½æœ‰)<br><img src="/medias/drawing-bed/esxi/13.jpg"></p><h3 id="é€‰æ‹©å®‰è£…"><a href="#é€‰æ‹©å®‰è£…" class="headerlink" title="é€‰æ‹©å®‰è£…"></a><font size=4><strong>é€‰æ‹©å®‰è£…</strong></font></h3><p><img src="/medias/drawing-bed/esxi/14.jpg"></p><h3 id="ç­‰å¾…è¯»æ¡"><a href="#ç­‰å¾…è¯»æ¡" class="headerlink" title="ç­‰å¾…è¯»æ¡"></a><font size=4><strong>ç­‰å¾…è¯»æ¡</strong></font></h3><p><img src="/medias/drawing-bed/esxi/15.jpg"></p><h3 id="é‡å¯"><a href="#é‡å¯" class="headerlink" title="é‡å¯"></a><font size=4><strong>é‡å¯</strong></font></h3><p><img src="/medias/drawing-bed/esxi/16.jpg"></p><h3 id="é‡å¯å®Œçš„é¡µé¢"><a href="#é‡å¯å®Œçš„é¡µé¢" class="headerlink" title="é‡å¯å®Œçš„é¡µé¢"></a><font size=4><strong>é‡å¯å®Œçš„é¡µé¢</strong></font></h3><p>&emsp;&emsp;æˆ‘çš„æœåŠ¡å™¨æ˜¯æ’å…¥ç½‘çº¿ï¼Œæ˜¯å¯ä»¥ä¸Šç½‘çš„ã€‚<font color=red>F2</font>è¿›å…¥è®¾ç½®ç•Œé¢<br><img src="/medias/drawing-bed/esxi/17.jpg"></p><h3 id="è¾“å…¥åˆšæ‰è®¾å®šçš„å¯†ç ï¼Œè¿›å…¥è®¾ç½®"><a href="#è¾“å…¥åˆšæ‰è®¾å®šçš„å¯†ç ï¼Œè¿›å…¥è®¾ç½®" class="headerlink" title="è¾“å…¥åˆšæ‰è®¾å®šçš„å¯†ç ï¼Œè¿›å…¥è®¾ç½®"></a><font size=4><strong>è¾“å…¥åˆšæ‰è®¾å®šçš„å¯†ç ï¼Œè¿›å…¥è®¾ç½®</strong></font></h3><p>&emsp;&emsp;è¾“å…¥å¯†ç ä¼šå›åˆ°é¦–é¡µï¼Œ<font color=red>å†æŒ‰ä¸€æ¬¡F2</font>å³å¯<br><img src="/medias/drawing-bed/esxi/18.jpg"></p><h3 id="ä¸‰ä¸ªç½‘å¡è®¾ç½®é€‰é¡¹"><a href="#ä¸‰ä¸ªç½‘å¡è®¾ç½®é€‰é¡¹" class="headerlink" title="ä¸‰ä¸ªç½‘å¡è®¾ç½®é€‰é¡¹"></a><font size=4><strong>ä¸‰ä¸ªç½‘å¡è®¾ç½®é€‰é¡¹</strong></font></h3><p>&emsp;&emsp;ä»ä¸Šåˆ°ä¸‹åˆ†åˆ«æ˜¯ï¼Œ<font color=red>è®¾ç½®ç½‘ç»œã€é‡å¯ã€æµ‹è¯•</font><br><img src="/medias/drawing-bed/esxi/19.jpg"></p><h3 id="å›è½¦è¿›å…¥è®¾ç½®ï¼Œåªè®¾ç½®IPv4å’ŒDNSå³å¯"><a href="#å›è½¦è¿›å…¥è®¾ç½®ï¼Œåªè®¾ç½®IPv4å’ŒDNSå³å¯" class="headerlink" title="å›è½¦è¿›å…¥è®¾ç½®ï¼Œåªè®¾ç½®IPv4å’ŒDNSå³å¯"></a><font size=4><strong>å›è½¦è¿›å…¥è®¾ç½®ï¼Œåªè®¾ç½®IPv4å’ŒDNSå³å¯</strong></font></h3><p><img src="/medias/drawing-bed/esxi/20.jpg"></p><h3 id="IPv4é€‰æ‹©æ‰‹åŠ¨è®¾ç½®ï¼Œä½¿ç”¨ç©ºæ ¼é”®é€‰æ‹©ï¼Œè®¾ç½®å®Œï¼Œå›è½¦ä¿å­˜"><a href="#IPv4é€‰æ‹©æ‰‹åŠ¨è®¾ç½®ï¼Œä½¿ç”¨ç©ºæ ¼é”®é€‰æ‹©ï¼Œè®¾ç½®å®Œï¼Œå›è½¦ä¿å­˜" class="headerlink" title="IPv4é€‰æ‹©æ‰‹åŠ¨è®¾ç½®ï¼Œä½¿ç”¨ç©ºæ ¼é”®é€‰æ‹©ï¼Œè®¾ç½®å®Œï¼Œå›è½¦ä¿å­˜"></a><font size=4><strong>IPv4é€‰æ‹©æ‰‹åŠ¨è®¾ç½®ï¼Œä½¿ç”¨ç©ºæ ¼é”®é€‰æ‹©ï¼Œè®¾ç½®å®Œï¼Œå›è½¦ä¿å­˜</strong></font></h3><p><img src="/medias/drawing-bed/esxi/21.jpg"></p><h3 id="DNSè®¾ç½®å’Œä¸Šé¢ä¸€æ ·"><a href="#DNSè®¾ç½®å’Œä¸Šé¢ä¸€æ ·" class="headerlink" title="DNSè®¾ç½®å’Œä¸Šé¢ä¸€æ ·"></a><font size=4><strong>DNSè®¾ç½®å’Œä¸Šé¢ä¸€æ ·</strong></font></h3><p><img src="/medias/drawing-bed/esxi/22.jpg"></p><h3 id="ä½¿ç”¨Escé€€å‡º"><a href="#ä½¿ç”¨Escé€€å‡º" class="headerlink" title="ä½¿ç”¨Escé€€å‡º"></a><font size=4><strong>ä½¿ç”¨Escé€€å‡º</strong></font></h3><p><img src="/medias/drawing-bed/esxi/23.jpg"></p><h3 id="ä¼šæç¤ºä½ ä¿å­˜ï¼Œä¿å­˜å³å¯"><a href="#ä¼šæç¤ºä½ ä¿å­˜ï¼Œä¿å­˜å³å¯" class="headerlink" title="ä¼šæç¤ºä½ ä¿å­˜ï¼Œä¿å­˜å³å¯"></a><font size=4><strong>ä¼šæç¤ºä½ ä¿å­˜ï¼Œä¿å­˜å³å¯</strong></font></h3><p><img src="/medias/drawing-bed/esxi/24.jpg"></p><h3 id="é‡å¯ç½‘ç»œ"><a href="#é‡å¯ç½‘ç»œ" class="headerlink" title="é‡å¯ç½‘ç»œ"></a><font size=4><strong>é‡å¯ç½‘ç»œ</strong></font></h3><p><img src="/medias/drawing-bed/esxi/25.jpg"></p><h3 id="æµ‹è¯•ç½‘ç»œï¼Œç»™å®šå‡ ä¸ªIPï¼Œå›è½¦æµ‹è¯•"><a href="#æµ‹è¯•ç½‘ç»œï¼Œç»™å®šå‡ ä¸ªIPï¼Œå›è½¦æµ‹è¯•" class="headerlink" title="æµ‹è¯•ç½‘ç»œï¼Œç»™å®šå‡ ä¸ªIPï¼Œå›è½¦æµ‹è¯•"></a><font size=4><strong>æµ‹è¯•ç½‘ç»œï¼Œç»™å®šå‡ ä¸ªIPï¼Œå›è½¦æµ‹è¯•</strong></font></h3><p><img src="/medias/drawing-bed/esxi/26.jpg"></p><h3 id="å…¨æ˜¯OK-å°±è¡Œ"><a href="#å…¨æ˜¯OK-å°±è¡Œ" class="headerlink" title="å…¨æ˜¯OK.å°±è¡Œ"></a><font size=4><strong>å…¨æ˜¯OK.å°±è¡Œ</strong></font></h3><p><img src="/medias/drawing-bed/esxi/27.jpg"></p><h3 id="Escé€€å›åˆ°é¦–é¡µ"><a href="#Escé€€å›åˆ°é¦–é¡µ" class="headerlink" title="Escé€€å›åˆ°é¦–é¡µ"></a><font size=4><strong>Escé€€å›åˆ°é¦–é¡µ</strong></font></h3><p><img src="/medias/drawing-bed/esxi/28.jpg"></p><h3 id="é¦–é¡µæ˜¯è‡ªå·±è®¾å®šçš„IPå’ŒDNS"><a href="#é¦–é¡µæ˜¯è‡ªå·±è®¾å®šçš„IPå’ŒDNS" class="headerlink" title="é¦–é¡µæ˜¯è‡ªå·±è®¾å®šçš„IPå’ŒDNS"></a><font size=4><strong>é¦–é¡µæ˜¯è‡ªå·±è®¾å®šçš„IPå’ŒDNS</strong></font></h3><p><img src="/medias/drawing-bed/esxi/29.jpg"></p><h3 id="æµè§ˆå™¨è¾“å…¥åœ°å€ï¼ŒæŒ‰çº¢æ¡†ä¸€æ­¥æ­¥æ¥"><a href="#æµè§ˆå™¨è¾“å…¥åœ°å€ï¼ŒæŒ‰çº¢æ¡†ä¸€æ­¥æ­¥æ¥" class="headerlink" title="æµè§ˆå™¨è¾“å…¥åœ°å€ï¼ŒæŒ‰çº¢æ¡†ä¸€æ­¥æ­¥æ¥"></a><font size=4><strong>æµè§ˆå™¨è¾“å…¥åœ°å€ï¼ŒæŒ‰çº¢æ¡†ä¸€æ­¥æ­¥æ¥</strong></font></h3><p><img src="/medias/drawing-bed/esxi/30.jpg"></p><h3 id="è¾“å…¥ç”¨æˆ·å¯†ç è¿›å…¥ç®¡ç†å°"><a href="#è¾“å…¥ç”¨æˆ·å¯†ç è¿›å…¥ç®¡ç†å°" class="headerlink" title="è¾“å…¥ç”¨æˆ·å¯†ç è¿›å…¥ç®¡ç†å°"></a><font size=4><strong>è¾“å…¥ç”¨æˆ·å¯†ç è¿›å…¥ç®¡ç†å°</strong></font></h3><p><img src="/medias/drawing-bed/esxi/31.jpg"></p><h3 id="æŒ‰ç…§çº¢æ¡†ï¼Œé€‰æ‹©åˆ†é…è®¸å¯è¯"><a href="#æŒ‰ç…§çº¢æ¡†ï¼Œé€‰æ‹©åˆ†é…è®¸å¯è¯" class="headerlink" title="æŒ‰ç…§çº¢æ¡†ï¼Œé€‰æ‹©åˆ†é…è®¸å¯è¯"></a><font size=4><strong>æŒ‰ç…§çº¢æ¡†ï¼Œé€‰æ‹©åˆ†é…è®¸å¯è¯</strong></font></h3><p><img src="/medias/drawing-bed/esxi/32.jpg"></p><h3 id="æ·»åŠ åçœ‹è¿‡æœŸæ—¥æœŸ"><a href="#æ·»åŠ åçœ‹è¿‡æœŸæ—¥æœŸ" class="headerlink" title="æ·»åŠ åçœ‹è¿‡æœŸæ—¥æœŸ"></a><font size=4><strong>æ·»åŠ åçœ‹è¿‡æœŸæ—¥æœŸ</strong></font></h3><p><img src="/medias/drawing-bed/esxi/33.jpg"></p><h3 id="æŒ‰ç…§çº¢æ¡†ï¼Œåˆ›å»ºè™šæ‹Ÿæœºå’ŒVMwareä¸€æ ·"><a href="#æŒ‰ç…§çº¢æ¡†ï¼Œåˆ›å»ºè™šæ‹Ÿæœºå’ŒVMwareä¸€æ ·" class="headerlink" title="æŒ‰ç…§çº¢æ¡†ï¼Œåˆ›å»ºè™šæ‹Ÿæœºå’ŒVMwareä¸€æ ·"></a><font size=4><strong>æŒ‰ç…§çº¢æ¡†ï¼Œåˆ›å»ºè™šæ‹Ÿæœºå’ŒVMwareä¸€æ ·</strong></font></h3><p><img src="/medias/drawing-bed/esxi/34.jpg"></p><h3 id="è¡¥å……é•œåƒä¸Šè½½"><a href="#è¡¥å……é•œåƒä¸Šè½½" class="headerlink" title="è¡¥å……é•œåƒä¸Šè½½"></a><font size=4><strong>è¡¥å……é•œåƒä¸Šè½½</strong></font></h3><p>&emsp;&emsp;æŒ‰ç…§æ ‡æ³¨åºå·ä¸€æ­¥æ­¥æ“ä½œå³å¯ï¼Œé€‰æ‹©å­˜å‚¨â€“&gt;é€‰å®šå…¶ä¸­ä¸€å—ç£ç›˜â€“&gt;æ•°æ®å­˜å‚¨æµè§ˆå™¨â€“&gt;ä¸Šè½½â€“&gt;é€‰æ‹©è‡ªå·±çš„é•œåƒä¸Šä¼ å³å¯.<br><img src="/medias/drawing-bed/esxi/35.jpg"></p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(å››)</title>
      <link href="/posts/eb69.html"/>
      <url>/posts/eb69.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h2 id="å˜é‡"><a href="#å˜é‡" class="headerlink" title="å˜é‡"></a><font size=5><strong>å˜é‡</strong></font></h2><p>&emsp;&emsp;å˜é‡çš„æ„ä¹‰å’Œ èµ‹å€¼ç¬¦å· =, â€˜æŠŠåˆ—è¡¨å¤åˆ¶ç»™å˜é‡Aâ€™<br>&emsp;&emsp;å‘½åè¦æœ‰æ„ä¹‰, ç”¨ç®€æ´çš„è‹±æ–‡å•è¯è¡¨ç¤ºä¸€ä¸ªå˜é‡</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> A <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>   <span class="token comment"># æ²¡æœ‰æ„ä¹‰</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">>></span><span class="token operator">></span> skill <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'æ–°æœˆæ‰“å‡»'</span><span class="token punctuation">]</span>   <span class="token comment"># æŠ€èƒ½ä¸ºæ–°æœˆæ‰“å‡», å¯ä»¥è®©è¯»è€…å¿«é€Ÿçš„ è¯»æ‡‚å˜é‡çš„æ„ä¹‰</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>skill<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'æ–°æœˆæ‰“å‡»'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å˜é‡åŸºæœ¬è§„èŒƒ"><a href="#å˜é‡åŸºæœ¬è§„èŒƒ" class="headerlink" title="å˜é‡åŸºæœ¬è§„èŒƒ"></a><font size=4><strong>å˜é‡åŸºæœ¬è§„èŒƒ</strong></font></h3><p>&emsp;&emsp;1.å˜é‡åé¦–å­—ç¬¦ä¸èƒ½æ˜¯æ•°å­—<br>&emsp;&emsp;2.å˜é‡åç”± å­—æ¯, æ•°å­—, ä¸‹åˆ’çº¿ ç»„æˆ<br>&emsp;&emsp;3.ç³»ç»Ÿçš„ ä¿ç•™å…³é”®å­— ä¸èƒ½åœ¨å˜é‡åä¸­  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">[</span><span class="token string">'False'</span><span class="token punctuation">,</span> <span class="token string">'None'</span><span class="token punctuation">,</span> <span class="token string">'True'</span><span class="token punctuation">,</span> <span class="token string">'and'</span><span class="token punctuation">,</span> <span class="token string">'as'</span><span class="token punctuation">,</span> <span class="token string">'assert'</span><span class="token punctuation">,</span> <span class="token string">'break'</span><span class="token punctuation">,</span> <span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'continue'</span><span class="token punctuation">,</span> <span class="token string">'def'</span><span class="token punctuation">,</span> <span class="token string">'del'</span><span class="token punctuation">,</span> <span class="token string">'elif'</span><span class="token punctuation">,</span> <span class="token string">'else'</span><span class="token punctuation">,</span> <span class="token string">'except'</span><span class="token punctuation">,</span> <span class="token string">'finally'</span><span class="token punctuation">,</span> <span class="token string">'for'</span><span class="token punctuation">,</span> <span class="token string">'from'</span><span class="token punctuation">,</span> <span class="token string">'global'</span><span class="token punctuation">,</span> <span class="token string">'if'</span><span class="token punctuation">,</span> <span class="token string">'import'</span><span class="token punctuation">,</span> <span class="token string">'in'</span><span class="token punctuation">,</span> <span class="token string">'is'</span><span class="token punctuation">,</span> <span class="token string">'lambda'</span><span class="token punctuation">,</span> <span class="token string">'nonlocal'</span><span class="token punctuation">,</span> <span class="token string">'not'</span><span class="token punctuation">,</span> <span class="token string">'or'</span><span class="token punctuation">,</span> <span class="token string">'pass'</span><span class="token punctuation">,</span> <span class="token string">'raise'</span><span class="token punctuation">,</span> <span class="token string">'return'</span><span class="token punctuation">,</span> <span class="token string">'try'</span><span class="token punctuation">,</span> <span class="token string">'while'</span><span class="token punctuation">,</span> <span class="token string">'with'</span><span class="token punctuation">,</span> <span class="token string">'yield'</span><span class="token punctuation">]</span>  <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>&emsp;&emsp;4.å˜é‡ååŒºåˆ†å¤§å°å†™<br>&emsp;&emsp;5.å˜é‡æœ¬èº«æ˜¯æ²¡æœ‰ç±»å‹çš„, å¯ä»¥æ˜¯å­—ç¬¦ä¸²strã€å…ƒç»„tupleã€åˆ—è¡¨listã€é›†åˆsetã€æ•°å­—int,float,tupleã€å¸ƒå°”æ•°boolã€å­—å…¸dict  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span> <span class="token operator">=</span> <span class="token number">1</span>   <span class="token comment"># typeè™½ç„¶ä¸æ˜¯ä¿ç•™å­—, ä½†æ˜¯ä¸å»ºè®®ç”¨ä½œå˜é‡å, ç±»ä¼¼è¿˜æœ‰print</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>   File <span class="token string">"&lt;pyshell#34>"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>    <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>TypeError<span class="token punctuation">:</span> <span class="token string">'int'</span> <span class="token builtin">object</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token builtin">callable</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment"># typy(1)ç­‰åŒäº1(1)</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"&lt;pyshell#35>"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>    <span class="token number">1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>TypeError<span class="token punctuation">:</span> <span class="token string">'int'</span> <span class="token builtin">object</span> <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token builtin">callable</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span> <span class="token operator">=</span> <span class="token number">1</span>   <span class="token comment"># å¦‚æœåé¢çš„ä»£ç ä¸ä½¿ç”¨type()æ–¹æ³•è¿›è¡Œè°ƒç”¨, åªæ‰“å°ç­‰æ“ä½œæ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚è¿˜æ˜¯ä¸Šé¢é‚£å¥è¯ ä¸å»ºè®®ä½¿ç”¨ã€‚</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">)</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>ä½œä¸š:</strong> æ€è€ƒä¸‹é¢çš„ä»£ç : </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> a<span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> a   <span class="token comment"># å°†aåˆ—è¡¨èµ‹å€¼ç»™b</span><span class="token operator">>></span><span class="token operator">></span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'a'</span>   <span class="token comment"># æŠŠaåˆ—è¡¨çš„ç¬¬1ä¸ªå…ƒç´ æ›¿æ¢ä¸º'a'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>   <span class="token comment"># aåˆ—è¡¨æ”¹å˜</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>   <span class="token comment"># bä¹Ÿä¼šå˜, aåˆ—è¡¨èµ‹å€¼ç»™båˆ—è¡¨, aåˆ—è¡¨ä¸­å…ƒç´ æ”¹å˜, bä¸­çš„ä¹Ÿä¼šå˜</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="intå€¼ç±»å‹-amp-listå¼•ç”¨ç±»å‹"><a href="#intå€¼ç±»å‹-amp-listå¼•ç”¨ç±»å‹" class="headerlink" title="intå€¼ç±»å‹ &amp; listå¼•ç”¨ç±»å‹"></a><font size=4><strong>intå€¼ç±»å‹ &amp; listå¼•ç”¨ç±»å‹</strong></font></h3><p><strong>åŒºåˆ«:</strong> intæ˜¯å€¼ç±»å‹, listæ˜¯å¼•ç”¨ç±»å‹<br><font color=red><strong>int str tuple</strong></font>(<strong>ä¸å¯æ”¹å˜</strong>), <font color=green><strong>list set dict</strong></font>(<strong>å¯å˜</strong>)<br>ã€å¤ä¹ : intæ•´å‹ strå­—ç¬¦ä¸² tupleå…ƒç»„ liståˆ—è¡¨ seté›†åˆ dictå­—å…¸ floatæµ®ç‚¹æ•° boolå¸ƒå°”æ•° [36j]complexå¤æ•°, åºåˆ—å­—ç¬¦ä¸²åˆ—è¡¨å’Œå…ƒç»„ã€‘</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token string">'hello'</span>   <span class="token comment"># æŠŠ'hello'èµ‹å€¼ç»™a</span><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> a <span class="token operator">+</span> <span class="token string">'python'</span>   <span class="token comment"># æŠŠ'hello' + 'python'èµ‹å€¼ç»™a</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>hellopython<span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token string">'hello'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>   <span class="token comment"># æŸ¥çœ‹å¯¹è±¡çš„å†…å­˜åœ°å€</span><span class="token number">2563202155776</span><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> b <span class="token operator">+</span> <span class="token string">'python'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token number">2563199608560</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'python'</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token string">'p'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'python'</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'a'</span>   <span class="token comment"># å­—ç¬¦ä¸²ä¸å¯æ”¹å˜, ä¸èƒ½å¯¹å­—ç¬¦ä¸²çš„æŸä¸ªå­—ç¬¦èµ‹å€¼</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"&lt;pyshell#21>"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>    <span class="token string">'python'</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'a'</span>TypeError<span class="token punctuation">:</span> <span class="token string">'str'</span> <span class="token builtin">object</span> does <span class="token keyword">not</span> support item assignment<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="tupleå’ŒliståŒºåˆ«"><a href="#tupleå’ŒliståŒºåˆ«" class="headerlink" title="tupleå’ŒliståŒºåˆ«"></a><font size=4><strong>tupleå’ŒliståŒºåˆ«</strong></font></h3><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>   <span class="token comment"># id()æŸ¥çœ‹å¯¹è±¡çš„å†…å­˜åœ°å€</span><span class="token number">2563202131272</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># hex()åè½¬åå…­è¿›åˆ¶, oct()åè½¬å…«è¿›åˆ¶, bin()åè½¬äºŒè¿›åˆ¶ </span><span class="token string">'0x254cac0a548'</span><span class="token operator">>></span><span class="token operator">></span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'1'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">id</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token number">2563202131272</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>tuple:</strong> ä¸å¯æ”¹å˜, listå¯ä»¥</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'1'</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"&lt;pyshell#32>"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>    a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'1'</span>TypeError<span class="token punctuation">:</span> <span class="token string">'tuple'</span> <span class="token builtin">object</span> does <span class="token keyword">not</span> support item assignment<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>list</strong>åˆ—è¡¨å¯ä»¥å¢åŠ , å…ƒç»„tupleä¸å¯ä»¥ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>   <span class="token comment"># liståˆ—è¡¨å¯ä»¥å¢åŠ , å…ƒç»„tupleä¸å¯ä»¥ã€‚</span><span class="token operator">>></span><span class="token operator">></span> b<span class="token punctuation">.</span> append<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> c <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> c<span class="token punctuation">.</span> append<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"&lt;pyshell#37>"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>    c<span class="token punctuation">.</span> append<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>AttributeError<span class="token punctuation">:</span> <span class="token string">'tuple'</span> <span class="token builtin">object</span> has no attribute <span class="token string">'append'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="å¤šç»´åºåˆ—"><a href="#å¤šç»´åºåˆ—" class="headerlink" title="å¤šç»´åºåˆ— "></a><font size=4><strong>å¤šç»´åºåˆ—</strong> </font></h3><p>&emsp;&emsp;äºŒç»´å’Œä¸‰ç»´ç”¨çš„è¾ƒå¤š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'tuple'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token number">6</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'list'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token number">7</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'tuple'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'a'</span>   <span class="token comment"># æ³¨æ„æ”¹å˜çš„æ˜¯åˆ—è¡¨ä¸æ˜¯å…ƒç»„ã€‚[4,5,(6,7)]æ˜¯åˆ—è¡¨, è€Œå…ƒç»„(6,7)æ˜¯åˆ—è¡¨çš„å…ƒç´ , æ‰€ä»¥å¯å˜, ä½†æ˜¯å…ƒç»„ä¸­çš„6, 7å…ƒç´ æ˜¯ä¸å¯å˜çš„ã€‚</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token operator">>></span><span class="token operator">></span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token number">6</span><span class="token operator">>></span><span class="token operator">></span> a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'b'</span>   <span class="token comment"># å…ƒç»„ä¸­çš„6, æ‰€ä»¥ä¸å¯å˜</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"&lt;pyshell#13>"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>    a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'b'</span>TypeError<span class="token punctuation">:</span> <span class="token string">'tuple'</span> <span class="token builtin">object</span> does <span class="token keyword">not</span> support item assignment<span class="token operator">>></span><span class="token operator">></span> a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'c'</span>   <span class="token comment"># å…ƒç»„a[3] = [4,5,(6,7)], æ˜¯å…ƒç»„çš„å…ƒç´ , æ‰€ä»¥ä¹Ÿä¸å¯å˜</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"&lt;pyshell#14>"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>    a<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'c'</span>TypeError<span class="token punctuation">:</span> <span class="token string">'tuple'</span> <span class="token builtin">object</span> does <span class="token keyword">not</span> support item assignment<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> å˜é‡ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(ä¸‰)</title>
      <link href="/posts/7d95.html"/>
      <url>/posts/7d95.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h2 id="åˆ—è¡¨"><a href="#åˆ—è¡¨" class="headerlink" title="åˆ—è¡¨"></a><font size=5><strong>åˆ—è¡¨</strong></font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span>   <span class="token comment"># åˆ—è¡¨</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'list'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment"># åˆ—è¡¨ä¸­å…ƒç´ çš„ç±»å‹å¯ä»¥æ˜¯å¤šç§</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'list'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token boolean">True</span><span class="token punctuation">,</span><span class="token boolean">False</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment"># åµŒå¥—åˆ—è¡¨(å…¶ä»–è¯­è¨€å«"äºŒç»´æ•°ç»„")</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'list'</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;ä»¥ä¸€ä¸ªæ•°å­—è®¿é—®åˆ—è¡¨å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸², ä»¥å†’å·çš„å½¢å¼è®¿é—®åˆ—è¡¨å¾—åˆ°ä¸€ä¸ªåˆ—è¡¨, å³ä½¿åªæœ‰ä¸€ä¸ªå…ƒç´ ã€‚</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token string">'æ–°æœˆæ‰“å‡»'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'æ–°æœˆæ‰“å‡»'</span><span class="token punctuation">,</span> <span class="token string">'è‹ç™½ä¹‹ç€‘'</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>   <span class="token comment"># æœ‰å†’å·, å¾—åˆ°ä¸€ä¸ªåˆ—è¡¨</span><span class="token punctuation">[</span><span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span>   <span class="token comment"># æ•°å­—å¾—åˆ°åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²</span><span class="token string">'æœˆç¥å†²åˆº'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>åˆ—è¡¨è¿ç®—</strong>(åˆ—è¡¨+åˆ—è¡¨, åˆ—è¡¨ä¹˜æ•°å­—)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token punctuation">[</span><span class="token string">"ç‚¹ç‡ƒ"</span><span class="token punctuation">,</span><span class="token string">"é—ªç°"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'æ–°æœˆæ‰“å‡»'</span><span class="token punctuation">,</span> <span class="token string">'è‹ç™½ä¹‹ç€‘'</span><span class="token punctuation">,</span> <span class="token string">'æœˆä¹‹é™ä¸´'</span><span class="token punctuation">,</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">,</span> <span class="token string">'ç‚¹ç‡ƒ'</span><span class="token punctuation">,</span> <span class="token string">'é—ªç°'</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token punctuation">[</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">2</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">,</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">]</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">2</span><span class="token operator">*</span><span class="token punctuation">[</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">[</span><span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">,</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">,</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">,</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">,</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">,</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>åˆ†ç»„:</strong> 4ä¸ªå°ç»„, æ¯ç»„4ä¸ªå°é˜Ÿ(ä¸€å…±16ä¸ªå°é˜Ÿ)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">[</span><span class="token string">"A[1,2,3,4]"</span><span class="token punctuation">,</span><span class="token string">"B[5,6,7,8]"</span><span class="token punctuation">,</span><span class="token string">"C[9,10,11,12]"</span><span class="token punctuation">,</span><span class="token string">"D[13,14,15,16]"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'A[1,2,3,4]'</span><span class="token punctuation">,</span> <span class="token string">'B[5,6,7,8]'</span><span class="token punctuation">,</span> <span class="token string">'C[9,10,11,12]'</span><span class="token punctuation">,</span> <span class="token string">'D[13,14,15,16]'</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a><font size=5><strong>å…ƒç»„</strong></font></h2><p>&emsp;&emsp;åŸºç¡€å‚è€ƒåˆ—è¡¨</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"-2"</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'-2'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"-2"</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"-2"</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'-2'</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"-2"</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"-2"</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'-2'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'-2'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'-2'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"-2"</span><span class="token punctuation">,</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'-2'</span><span class="token punctuation">,</span> <span class="token boolean">True</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'tuple'</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;ç¼–ç¨‹é‡Œé¢çš„ä¸€ä¸ªçº¦å®šä¿—æˆçš„ä¹ æƒ¯: intæ•´å½¢(intç±»å‹), strå­—ç¬¦ä¸²(strç±»å‹), liståˆ—è¡¨(listç±»å‹), tupleå…ƒç»„(tupleç±»å‹)éŸ³æ ‡[tÊŒpl]</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># å½“type()ä¸­ åªæœ‰ä¸€ä¸ªå…ƒç´ çš„å…ƒç»„ æ˜¯ä¼šé»˜è®¤è¿›è¡Œè¿ç®—çš„</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'int'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'int'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment"># å¦‚æ•°å­¦è¿ç®—ä¸­, ()æ˜¯è¿ç®—ç¬¦, ä¼˜å…ˆçº§é«˜</span><span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># ,è¡¨ç¤ºåªæœ‰ä¸€ä¸ªå…ƒç´ çš„å…ƒç»„ã€‚</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'tuple'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># ()ä»£è¡¨ä»€ä¹ˆéƒ½æ²¡æœ‰çš„å…ƒç»„</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'tuple'</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;æ€»ç»“numberå¤§ç±»å‹åŒ…å«:<strong>intæ•´å‹ã€floatæµ®ç‚¹å‹ã€boolå¸ƒå°”æ•°ã€‚åºåˆ—åŒ…å«: strå­—ç¬¦ä¸²ã€liståˆ—è¡¨ã€tupleå…ƒç»„</strong>  </p><h2 id="åºåˆ—"><a href="#åºåˆ—" class="headerlink" title="åºåˆ—"></a><font size=5><strong>åºåˆ—</strong></font></h2><p>&emsp;&emsp;1. â€œåºåˆ—â€[num] æ¯ä¸€ä¸ªåºåˆ—çš„å…ƒç´ , éƒ½æœ‰ä¸€ä¸ªåºå·<br>&emsp;&emsp;2. åˆ‡ç‰‡, â€œxulieâ€[2:4] ç§°ä¸ºåˆ‡ç‰‡æ“ä½œã€‚æ‹“å±•: â€œxulieâ€[2:4:2]  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>   <span class="token comment"># å‚è€ƒä¸‹é¢çš„ç»“æœ'llo wo'å…±å–6ä¸ªå­—ç¬¦, å–å…¶ä¸­[1,3,5]å³, 'low', ç†è§£ä¸º'æ­¥é•¿'ã€‚å·¦èˆ2è‡³å·¦å–8æŒ‰æ­¥é•¿ä¸º2å–å­—ç¬¦, å³å‰é¢åˆ‡ç‰‡æˆªå–çš„å­—ç¬¦ä¸², å†ä»¥æ­¥é•¿ä¸º2å–1,3,5,7...</span><span class="token string">'low'</span>   <span class="token comment"># è¿™é‡Œæ­¥é•¿2æ˜¯ä»1å¼€å§‹æ•°</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">]</span>   <span class="token comment"># æ­£æ­£, ä»å·¦å–8, å·¦èˆ2</span><span class="token string">'llo wo'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token string">'l '</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>   <span class="token comment"># åˆ‡ç‰‡æˆªå–åæ­¥é•¿å–å­—ç¬¦ä¸º1,4,7,10...ä¸Šé¢å–äº†'l'å’Œ'ç©ºæ ¼'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;3.åºåˆ—å¯ä»¥ åŠ <font color=red>+</font>å’Œä¹˜<font color=red>*</font><br><strong>æ‹“å±•:</strong> é€»è¾‘è¿ç®—ç¬¦(ä¸¤ä¸ªå˜é‡é—´çš„é€»è¾‘å…³ç³»)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token number">3</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>   <span class="token comment">#3 æ˜¯å¦åœ¨è¿™ä¸ªåºåˆ—ä¸­, è¿”å›å€¼ä¸ºboolç±»å‹</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0</span> <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>   <span class="token comment"># 0æ˜¯å¦ ä¸åœ¨è¿™ä¸ªåºåˆ—ä¸­</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">5</span> <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;4.åˆ¤æ–­åºåˆ—ä¸­æœ‰å¤šå°‘ä¸ªå…ƒç´ ã€æœ€å¤§æœ€å°å€¼</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment"># len()å‡½æ•° æ±‚åºåˆ—çš„å…ƒç´ ä¸ªæ•°</span><span class="token number">5</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">"hello"</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">3</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment"># max()å‡½æ•° æ±‚å…ƒç´ çš„æœ€å¤§å€¼</span><span class="token number">7</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment"># min()å‡½æ•° æ±‚å…ƒç´ çš„æœ€å°å€¼</span><span class="token number">0</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token string">"hello "</span><span class="token punctuation">)</span>   <span class="token comment"># å­—ç¬¦ä¹Ÿæœ‰æ’åº, ä¸‹é¢éªŒè¯é¡ºåºåº”è¯¥ä¸º: 'ç©ºæ ¼'0-9a-z'æ±‰å­—'</span><span class="token string">' '</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token string">"abcxyz"</span><span class="token punctuation">)</span><span class="token string">'a'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token string">"abcxyz09"</span><span class="token punctuation">)</span><span class="token string">'0'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">min</span><span class="token punctuation">(</span><span class="token string">"abcxyz0 9"</span><span class="token punctuation">)</span><span class="token string">' '</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">max</span><span class="token punctuation">(</span><span class="token string">"abcxyz0 9å“ˆ"</span><span class="token punctuation">)</span><span class="token string">'å“ˆ'</span><span class="token comment"># æ’åºæŒ‰ascllç æ’åº</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span>   <span class="token comment"># ord()æŸ¥çœ‹å­—ç¬¦çš„ascllç </span><span class="token number">48</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token number">32</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token number">97</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'å“ˆ'</span><span class="token punctuation">)</span><span class="token number">21704</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="é›†åˆ"><a href="#é›†åˆ" class="headerlink" title="é›†åˆ"></a><font size=5><strong>é›†åˆ</strong></font></h2><p>&emsp;&emsp;é›†åˆ: set, ç‰¹ç‚¹: æ— åº, ä¸èƒ½åˆ‡ç‰‡</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'set'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>   <span class="token comment"># ä¸èƒ½å–å­—ç¬¦</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"&lt;pyshell#66>"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>    <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>TypeError<span class="token punctuation">:</span> <span class="token string">'set'</span> <span class="token builtin">object</span> does <span class="token keyword">not</span> support indexing<span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"&lt;pyshell#67>"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>    <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>TypeError<span class="token punctuation">:</span> <span class="token string">'set'</span> <span class="token builtin">object</span> <span class="token keyword">is</span> <span class="token keyword">not</span> subscriptable<span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span>   <span class="token comment"># é‡å¤å‹ç¼©</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;é›†åˆæ“ä½œ: é•¿åº¦åˆ¤æ–­, é€»è¾‘è¿ç®—</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token number">3</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">1</span> <span class="token keyword">in</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">1</span> <span class="token keyword">not</span> <span class="token keyword">in</span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;é›†åˆä¼˜åŠ¿: å‰”é™¤é›†åˆä¸­çš„å…ƒç´ (æ±‚ä¸¤ä¸ªé›†åˆçš„å·®é›†)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">-</span><span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">-</span><span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;é›†åˆçš„äº¤é›†</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">&amp;</span><span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>&emsp;&emsp;é›†åˆçš„åˆé›†(å¹¶é›†)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">&#125;</span><span class="token operator">|</span><span class="token punctuation">&#123;</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>&emsp;&emsp;é›†åˆä¸ºç©º</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># set()è¡¨ç¤ºç©ºé›†</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'set'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># éªŒè¯é›†åˆå…ƒç´ æ˜¯å¦ä¸º0, 0å³ä¸ºç©º</span><span class="token number">0</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>   <span class="token comment"># dictç±»å‹, ä¸æ˜¯setç±»å‹</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'dict'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'dict'</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å­—å…¸"><a href="#å­—å…¸" class="headerlink" title="å­—å…¸"></a><font size=5><strong>å­—å…¸</strong></font></h2><p>&emsp;&emsp;å­—å…¸: dict, ç±»æ¯”æ±‰è¯­å­—å…¸æ‹¼éŸ³æŸ¥æ±‰å­—<br>&emsp;&emsp;å¯¹äºå­—å…¸æ¥è¯´æœ‰Keyå’ŒValue , Keyä»£è¡¨å…³é”®å­—, Valueä»£è¡¨å€¼<br>&emsp;&emsp;å­—å…¸å¯ä»¥æœ‰å¾ˆå¤šä¸ªkeyå’Œvalue, ç”¨seté›†åˆè¡¨ç¤º, è€Œä¸æ˜¯åºåˆ—</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span>key1<span class="token punctuation">:</span>value1<span class="token punctuation">,</span>key2<span class="token punctuation">:</span>value2<span class="token punctuation">,</span>key3<span class="token punctuation">:</span>value3<span class="token punctuation">&#125;</span>   <span class="token comment"># å­—å…¸å®šä¹‰ key:value</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'dict'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token string">'Q'</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'W'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span><span class="token string">'Q'</span><span class="token punctuation">]</span>   <span class="token comment"># å­—å…¸å–å€¼</span><span class="token string">'æ–°æœˆæ‰“å‡»'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token string">'Q'</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'Q'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span><span class="token string">'Q'</span><span class="token punctuation">]</span>   <span class="token comment"># ä¸èƒ½æœ‰é‡å¤çš„key</span><span class="token string">'è‹ç™½ä¹‹ç€‘'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token string">'Q'</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'Q'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">&#125;</span>   <span class="token comment"># éªŒè¯é‡å¤key</span><span class="token punctuation">&#123;</span><span class="token string">'Q'</span><span class="token punctuation">:</span> <span class="token string">'è‹ç™½ä¹‹ç€‘'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">:</span> <span class="token string">'æœˆä¹‹é™ä¸´'</span><span class="token punctuation">,</span> <span class="token string">'R'</span><span class="token punctuation">:</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">&#125;</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">&#125;</span>   <span class="token comment"># éªŒè¯keyå€¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²å’Œæ•°å­— '' å’Œ "" å‡è¡¨ç¤ºå­—ç¬¦ä¸²</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'æ–°æœˆæ‰“å‡»'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">:</span> <span class="token string">'è‹ç™½ä¹‹ç€‘'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">:</span> <span class="token string">'æœˆä¹‹é™ä¸´'</span><span class="token punctuation">,</span> <span class="token string">'R'</span><span class="token punctuation">:</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">&#125;</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token string">'æ–°æœˆæ‰“å‡»'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">'E'</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">]</span><span class="token string">'è‹ç™½ä¹‹ç€‘'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">&#125;</span><span class="token punctuation">[</span><span class="token string">"1"</span><span class="token punctuation">]</span><span class="token string">'æœˆä¹‹é™ä¸´'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'1'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"1"</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">&#125;</span>   <span class="token comment"># éªŒè¯''å’Œ""å‡è¡¨ç¤ºå­—ç¬¦ä¸², è€Œä¸”å­—ç¬¦ä¸²å¿…é¡»æ˜¯è¢«å¼•å·å¼•èµ·æ¥çš„æ— æ‰€è°“æ˜¯å•å¼•å·è¿˜æ˜¯åŒå¼•å·</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'æ–°æœˆæ‰“å‡»'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">:</span> <span class="token string">'æœˆä¹‹é™ä¸´'</span><span class="token punctuation">,</span> <span class="token string">'R'</span><span class="token punctuation">:</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;keyå¿…é¡»æ˜¯ä¸å¯å˜çš„ç±»å‹, (int, stréƒ½æ˜¯ä¸å¯å˜çš„ç±»å‹)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'W'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">&#125;</span>   <span class="token comment"># keyå¯ä»¥æ˜¯å…ƒç»„</span><span class="token punctuation">&#123;</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token string">'æ–°æœˆæ‰“å‡»'</span><span class="token punctuation">,</span> <span class="token string">'W'</span><span class="token punctuation">:</span> <span class="token string">'è‹ç™½ä¹‹ç€‘'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">:</span> <span class="token string">'æœˆä¹‹é™ä¸´'</span><span class="token punctuation">,</span> <span class="token string">'R'</span><span class="token punctuation">:</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">&#125;</span><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'W'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">&#125;</span>   <span class="token comment"># keyä¸å¯ä»¥ä¸ºåˆ—è¡¨</span>Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>  File <span class="token string">"&lt;pyshell#96>"</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">></span>    <span class="token punctuation">&#123;</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'W'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">&#125;</span>TypeError<span class="token punctuation">:</span> unhashable <span class="token builtin">type</span><span class="token punctuation">:</span> <span class="token string">'list'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;valueå¯ä»¥æ˜¯ä»»ä½•ç±»å‹</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token punctuation">&#123;</span><span class="token string">'Q'</span><span class="token punctuation">:</span><span class="token string">"æ–°æœˆæ‰“å‡»"</span><span class="token punctuation">,</span><span class="token string">'W'</span><span class="token punctuation">:</span><span class="token string">"è‹ç™½ä¹‹ç€‘"</span><span class="token punctuation">,</span><span class="token string">"E"</span><span class="token punctuation">:</span><span class="token string">"æœˆä¹‹é™ä¸´"</span><span class="token punctuation">,</span><span class="token string">'R'</span><span class="token punctuation">:</span><span class="token string">"æœˆç¥å†²åˆº"</span><span class="token punctuation">,</span><span class="token string">'DF'</span><span class="token punctuation">:</span><span class="token punctuation">&#123;</span><span class="token string">'ç‚¹ç‡ƒ'</span><span class="token punctuation">,</span><span class="token string">'é—ªç°'</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#123;</span><span class="token string">'Q'</span><span class="token punctuation">:</span> <span class="token string">'æ–°æœˆæ‰“å‡»'</span><span class="token punctuation">,</span> <span class="token string">'W'</span><span class="token punctuation">:</span> <span class="token string">'è‹ç™½ä¹‹ç€‘'</span><span class="token punctuation">,</span> <span class="token string">'E'</span><span class="token punctuation">:</span> <span class="token string">'æœˆä¹‹é™ä¸´'</span><span class="token punctuation">,</span> <span class="token string">'R'</span><span class="token punctuation">:</span> <span class="token string">'æœˆç¥å†²åˆº'</span><span class="token punctuation">,</span> <span class="token string">'DF'</span><span class="token punctuation">:</span> <span class="token punctuation">&#123;</span><span class="token string">'ç‚¹ç‡ƒ'</span><span class="token punctuation">,</span> <span class="token string">'é—ªç°'</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>&emsp;&emsp;ç©ºçš„å­—å…¸: ä»¥ä¸‹å‡å¯ä»¥{},{ },set()</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'dict'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'dict'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'dict'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">dict</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>æ€ç»´å¯¼å›¾</strong>:<br><img src="/medias/drawing-bed/python3/0.jpg" alt="PythonåŸºæœ¬æ•°æ®ç±»å‹.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> ç»„çš„æ¦‚å¿µ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(äºŒ)</title>
      <link href="/posts/ed37.html"/>
      <url>/posts/ed37.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h2 id="ä»€ä¹ˆæ˜¯ä»£ç ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯ä»£ç ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯ä»£ç ï¼Ÿ"></a><font size=5><strong>ä»€ä¹ˆæ˜¯ä»£ç </strong>ï¼Ÿ</font></h2><p>&emsp;&emsp;ä»£ç æ˜¯ç°å®ä¸–ç•Œäº‹ç‰©åœ¨è®¡ç®—æœºä¸–ç•Œä¸­çš„æ˜ å°„</p><h2 id="ä»€ä¹ˆæ˜¯å†™ä»£ç ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å†™ä»£ç ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å†™ä»£ç ï¼Ÿ"></a><font size=5><strong>ä»€ä¹ˆæ˜¯å†™ä»£ç </strong>ï¼Ÿ</font></h2><p>&emsp;&emsp;å†™ä»£ç æ˜¯å°†ç°å®ä¸–ç•Œä¸­çš„äº‹ç‰©ç”¨è®¡ç®—æœºè¯­è¨€æ¥æè¿°  </p><h2 id="pythonçš„åŸºæœ¬æ•°æ®ç±»å‹"><a href="#pythonçš„åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="pythonçš„åŸºæœ¬æ•°æ®ç±»å‹: "></a><font size=5><strong>pythonçš„åŸºæœ¬æ•°æ®ç±»å‹</strong>: </font></h2><p>&emsp;&emsp;**number:**æ•°å­—(å¤§åˆ†ç±» åŒ…å«æ•´æ•°ã€å°æ•°)<br>&emsp;&emsp;**æ•´æ•°:**int<br>&emsp;&emsp;**å°æ•°, æµ®ç‚¹æ•°:**floatå°±æ˜¯åŒç²¾åº¦<br>&emsp;&emsp;**å…¶å®ƒè¯­è¨€:**å•ç²¾åº¦float, åŒç²¾åº¦double  </p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment">#typeæŸ¥çœ‹å¯¹è±¡æ•°æ®ç±»å‹æŸ¥è¯¢æ–¹æ³•</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'int'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token number">1.2</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'float'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'int'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token number">1.444444</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'float'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'float'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>   <span class="token comment">#é™¤æ³•</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'float'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">//</span><span class="token number">2</span><span class="token punctuation">)</span>   <span class="token comment">#æ•´é™¤</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'int'</span><span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0b10</span>  <span class="token comment">#0bäºŒè¿›åˆ¶</span><span class="token number">2</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0b11</span><span class="token number">3</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0o10</span>   <span class="token comment">#0oå…«è¿›åˆ¶</span><span class="token number">8</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0o11</span><span class="token number">9</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0x10</span>   <span class="token comment">#0xåå…­è¿›åˆ¶</span><span class="token number">16</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0x11</span><span class="token number">17</span><span class="token operator">>></span><span class="token operator">></span> <span class="token number">0x1F</span><span class="token number">31</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bin</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>   <span class="token comment">#binå¯ä»¥å°†ä»»æ„è¿›åˆ¶è½¬æ¢æˆäºŒè¿›åˆ¶</span><span class="token string">'0b1010'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bin</span><span class="token punctuation">(</span><span class="token number">0o6</span><span class="token punctuation">)</span><span class="token string">'0b110'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bin</span><span class="token punctuation">(</span><span class="token number">0xA</span><span class="token punctuation">)</span><span class="token string">'0b1010'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">0o65</span><span class="token punctuation">)</span>   <span class="token comment">#intå°†ä»»æ„è¿›åˆ¶è½¬æ¢æˆåè¿›åˆ¶</span><span class="token number">53</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token number">0x7A</span><span class="token punctuation">)</span><span class="token number">122</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token number">88</span><span class="token punctuation">)</span>   <span class="token comment">#hexå°†ä»»æ„è¿›åˆ¶è½¬æ¢æˆåå…­è¿›åˆ¶</span><span class="token string">'0x58'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token number">0o23</span><span class="token punctuation">)</span><span class="token string">'0x13'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">oct</span><span class="token punctuation">(</span><span class="token number">0b110</span><span class="token punctuation">)</span>   <span class="token comment">#octå°†ä»»æ„è¿›åˆ¶è½¬æ¢æˆå…«è¿›åˆ¶</span><span class="token string">'0o6'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">oct</span><span class="token punctuation">(</span><span class="token number">0x88</span><span class="token punctuation">)</span><span class="token string">'0o210'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>boolå¸ƒå°”æ•°/å€¼:</strong> çœŸTrueã€å‡False<br>&emsp;&emsp;<strong>complexå¤æ•°:</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token boolean">True</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token boolean">False</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'bool'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span><span class="token number">0</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>   <span class="token comment">#å¸ƒå°”å€¼éé›¶å³ä¸ºçœŸã€‚bool(1.1),bool(-3),bool(0o110)éƒ½æ˜¯çœŸ</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment">#éç©ºå³ä¸ºçœŸã€‚(Noneæ˜¯False)</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token string">'acb'</span><span class="token punctuation">)</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token boolean">False</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token boolean">True</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">bool</span><span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token boolean">False</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>å¤æ•°</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token number">36j</span><span class="token number">36j</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="ç¬¦å·"><a href="#ç¬¦å·" class="headerlink" title="ç¬¦å·"></a><font size=5><strong>ç¬¦å·</strong></font></h2><p>&emsp;&emsp;<strong>å¼•å·</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'hello world'</span><span class="token string">'hello world'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token string">'hello world'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'1'</span><span class="token string">'1'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token builtin">type</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token keyword">class</span> <span class="token string">'str'</span><span class="token operator">></span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"let's go"</span>   <span class="token comment">#å¼•å·è¡¨ç¤ºå­—ç¬¦ä¸²çš„æ—¶å€™è¦æˆå¯¹å‡ºç°, ä¸èƒ½æœ‰ä¸­æ–‡å­—ç¬¦</span><span class="token string">"let's go"</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">'let\'s go'</span>   <span class="token comment">#"\"è½¬ä¹‰å­—ç¬¦</span><span class="token string">"let's go"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>æ¢è¡Œ</strong>(ä¸‰å¼•å· â€˜â€™â€™ æ¢è¡Œ, \n æ¢è¡Œ, \ æ¢è¡Œ)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token triple-quoted-string string">'''hellohaha'''</span><span class="token string">'\nhello\nhaha\n'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'hello\nhaha'</span><span class="token punctuation">)</span>hellohaha<span class="token operator">>></span><span class="token operator">></span> 'haha\xixi'<span class="token string">'hahaxixi'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>è½¬ä¹‰å­—ç¬¦:</strong> ç‰¹æ®Šçš„å­—ç¬¦(è¡¨ç¤ºæ— æ³•â€çœ‹è§â€çš„å­—ç¬¦ã€ä¸è¯­è¨€æœ¬èº«è¯­æ³•æœ‰å†²çªçš„å­—ç¬¦)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">\n   <span class="token comment"># æ¢è¡Œ</span>\<span class="token string">'   # å•å¼•å·, è¡¨ç¤ºä¸pythonè¯­æ³•æœ‰å†²çªçš„å­—ç¬¦, å‚è€ƒ: '</span>let\<span class="token string">'s go'</span>\t   <span class="token comment"># æ¨ªå‘åˆ¶è¡¨ç¬¦</span>\r   <span class="token comment"># å›è½¦</span><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'hello \\n world'</span><span class="token punctuation">)</span>   <span class="token comment"># å°†hello \n worldè¾“å‡ºå‡ºæ¥</span>hello \n world<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>åº”ç”¨:</strong> æ‰“å°ä¸€ä¸ªè·¯å¾„ä½†æ˜¯åŒ…å«\n,\rç­‰ç›¸é‚»çš„å­—ç¬¦, å°±å˜æˆäº†ç‰¹æ®Šå­—ç¬¦</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'c:\nortwind\nortwest'</span><span class="token punctuation">)</span>c<span class="token punctuation">:</span>ortwindortwest<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'c:\\nortwind\\nortwest'</span><span class="token punctuation">)</span>c<span class="token punctuation">:</span>\nortwind\nortwest<span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">r'c:\nortwind\nortwest'</span><span class="token punctuation">)</span>   <span class="token comment"># r è¡¨ç¤ºè¿™ä¸ªå­—ç¬¦ä¸²ä¸æ˜¯ä¸€ä¸ªæ™®é€šå­—ç¬¦ä¸², è€Œæ˜¯ä¸€ä¸ªåŸå§‹å­—ç¬¦ä¸²ã€‚åŠæ‰€è§å³æ‰€å¾—ã€‚</span>c<span class="token punctuation">:</span>\nortwind\nortwest<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>é”™è¯¯</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">r'let'</span>s go'<span class="token punctuation">)</span>   <span class="token comment"># å¼•å·æ²¡æœ‰æˆå¯¹å‡ºç°ğŸ˜‰</span>  SyntaxError<span class="token punctuation">:</span> invalid syntax<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a><font size=5><strong>å­—ç¬¦ä¸²</strong></font></h2><p>&emsp;&emsp;<strong>å­—ç¬¦ä¸²æ“ä½œ:</strong> hello worldåˆå¹¶ä¸æ‹†åˆ†<br>&emsp;&emsp;<strong>å­—ç¬¦ä¸²è¿ç®—:</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello"</span> <span class="token operator">+</span> <span class="token string">"world"</span>  <span class="token string">'helloworld'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello"</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token string">'hellohellohello'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token string">'h'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token string">'l'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token string">'d'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token string">'o'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;è·å–â€hello worldâ€œä¸­wå­—ç¬¦, ä¸¤ç§æ–¹æ³•</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token string">'w'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token string">'w'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;æˆªå–å­—ç¬¦(åˆ‡ç‰‡æ“ä½œ)</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token string">'hell'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span>   <span class="token comment"># è¿™é‡Œæˆªå–å‰5ä¸ªå­—ç¬¦</span><span class="token string">'hello'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>   <span class="token comment"># å¤æ•°, ä»£è¡¨æ­¥é•¿, ä»å‰æ•°0ä¸ªä»åæ•°1ä¸ª, æˆªå–ä¸­é—´çš„ã€‚</span><span class="token string">'hello wor'</span>   <span class="token comment"># å·¦è¾¹èˆå¼ƒ0ä¸ª, å³è¾¹èˆå¼ƒ1ä¸ªã€‚</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token string">'lo wo'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;æˆªå–world, ç”¨ä¸¤ç§æ–¹å¼</p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span>   <span class="token comment"># æˆåŠŸ, å–6-10</span><span class="token string">'world'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">:</span><span class="token punctuation">]</span>   <span class="token comment"># æˆåŠŸ, è§£é‡Š: å³èˆ0è¦å¿½ç•¥0, å› ä¸º0ä»£è¡¨äº†ç¬¬ä¸€ä¸ªæ•°</span><span class="token string">'world'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span>   <span class="token comment"># æµ‹è¯•å·¦èˆ0, å¿½ç•¥0, æˆåŠŸ</span><span class="token string">'hello'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token string">'hello'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span>  <span class="token comment"># è§£é‡Š, å¥—è·¯ä¸Šé¢çš„è§£é‡Š, å·¦èˆ-4å³ä¸èˆ(å³å–4è‡³å³ä¸èˆ)</span><span class="token string">'world'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>   <span class="token comment"># å·¦èˆ-4, å³èˆ2(å³å–4è‡³å³èˆ2)</span><span class="token string">'wo'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span>   <span class="token comment"># ä¸ä¸Šé¢æ‹—å£çš„åšå¯¹æ¯”</span><span class="token string">'ll'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span>  <span class="token comment"># è§£é‡Š, å¥—è·¯ä¸Šé¢çš„è§£é‡Š, å·¦èˆ-4å³ä¸èˆ(å³å–4è‡³å³ä¸èˆ)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>   <span class="token comment"># å·¦èˆ-4, å³èˆ2(å³å–4è‡³å³èˆ2)</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">]</span>   <span class="token comment"># å·¦ä¸èˆè‡³å³èˆ4</span><span class="token string">'hello '</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span>   <span class="token comment"># å·¦èˆ4è‡³å³ä¸èˆ</span><span class="token string">'o world'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">:</span><span class="token punctuation">]</span>   <span class="token comment"># å·¦èˆ-4 == å³å–4(å³å–4è‡³å³ä¸èˆ)</span><span class="token string">'world'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span>   <span class="token comment"># å³ä¸ºæ­£æ•°(å·¦ä¸èˆè‡³å·¦å–4)  </span><span class="token string">'hell'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;<strong>ç†è§£:</strong><br>&emsp;&emsp;[2:4]: å·¦å³ä¸ºæ­£æ•°, çœ‹å³, ä»å·¦ æ•°4ä¸ªå­—ç¬¦, èˆå¼ƒå‰2ä¸ª<br>&emsp;&emsp;[-4:-2]: å·¦å³ä¸ºè´Ÿæ•°, çœ‹å·¦, ä»å³ æ•°4ä¸ªå­—ç¬¦, èˆå¼ƒåè¾¹çš„2ä¸ª<br>&emsp;&emsp;[2:-4]: æ­£è´Ÿæ•°, å·¦èˆ2å³èˆ4<br>&emsp;&emsp;[;]: å³/å·¦ä¸ºç©º, ä»£è¡¨ç©ºçš„æ–¹å‘æ˜¯ä¸èˆå¼ƒ<br>&emsp;&emsp;[4]: ä»£è¡¨ä»å·¦å¼€å§‹ç¬¬4ä¸ªå­—ç¬¦(ä»0å¼€å§‹æ•°)ï¼›-4ä¸ºä»å³å¼€å§‹æ•°ç¬¬4ä¸ªæ•°(ä»1å¼€å§‹æ•°)<br>&emsp;&emsp;<strong>å®ä¾‹:</strong></p><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token string">'o'</span><span class="token operator">>></span><span class="token operator">></span> <span class="token string">"hello world"</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token string">'w'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> åŸºæœ¬æ•°æ®ç±»å‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonå­¦ä¹ ç¬”è®°(ä¸€)</title>
      <link href="/posts/2d93.html"/>
      <url>/posts/2d93.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h2 id="pythonç‰¹ç‚¹"><a href="#pythonç‰¹ç‚¹" class="headerlink" title="pythonç‰¹ç‚¹"></a><font size=5><strong>pythonç‰¹ç‚¹</strong></font></h2><p>&emsp;&emsp;Pythonç‰¹ç‚¹, ç®€æ´, å¾ˆPython  Pythonic<br>&emsp;&emsp;ç»†è‡´ä¸è¿›é˜¶<br>&emsp;&emsp;pythonæ˜¯ä¸€ç§ç¼–ç¨‹è¯­è¨€ã€‚ä»–æ˜¯ä¼—å¤šç¼–ç¨‹è¯­è¨€çš„ä¸€ç§ã€‚<br>&emsp;&emsp;è¯­æ³•ç®€ä»‹ä¼˜é›…, ç¼–å†™çš„ç¨‹åºå®¹æ˜“é˜…è¯»</p><h2 id="å¯¼è¯­"><a href="#å¯¼è¯­" class="headerlink" title="å¯¼è¯­"></a><font size=5><strong>å¯¼è¯­</strong></font></h2><p>&emsp;&emsp;è·¨å¹³å°, Windowsã€Linuxã€macOS<br>&emsp;&emsp;æ˜“äºå­¦ä¹ , éè®¡ç®—æœºä¸“ä¸šå­¦ä¹ pythonæ¯”C++, Java, javascriptè¯­è¨€ç®€å•<br>&emsp;&emsp;æä¸ºå¼ºå¤§è€Œä¸°å¯Œçš„æ ‡å‡†åº“ä¸ç¬¬ä¸‰æ–¹åº“, æ¯”å¦‚ç”µå­é‚®ä»¶, å›¾å½¢GUI<br>&emsp;&emsp;pythonæ˜¯é¢å‘å¯¹è±¡çš„è¯­è¨€(æŠŠç°å®çš„å½¢å½¢è‰²è‰²çš„äº‹ç‰©æ˜ å°„åˆ°è®¡ç®—æœºä¸–ç•Œé‡Œ)</p><h2 id="ä¸ºä»€ä¹ˆå–œæ¬¢python"><a href="#ä¸ºä»€ä¹ˆå–œæ¬¢python" class="headerlink" title="ä¸ºä»€ä¹ˆå–œæ¬¢python"></a><font size=5><strong>ä¸ºä»€ä¹ˆå–œæ¬¢python</strong></font></h2><h3 id="emsp-emsp-1-ç®€æ´-çµæ´»-ä¼˜é›…-å“²å­¦"><a href="#emsp-emsp-1-ç®€æ´-çµæ´»-ä¼˜é›…-å“²å­¦" class="headerlink" title="&emsp;&emsp;1, ç®€æ´, çµæ´», ä¼˜é›…, å“²å­¦"></a>&emsp;&emsp;<font size=4>1, ç®€æ´, çµæ´», ä¼˜é›…, å“²å­¦</font></h3><p><strong>(pythonä¹‹ç¦…)</strong><br>&emsp;&emsp;simple is better than complex<br>&emsp;&emsp;ç®€æ´èƒœäºå¤æ‚<br>&emsp;&emsp;now is better than neverã€‚although never is often better than <em>right</em> now<br>&emsp;&emsp;åšä¹Ÿè®¸å¥½è¿‡ä¸åš, ä½†ä¸å‡æ€ç´¢å°±åŠ¨æ‰‹è¿˜ä¸å¦‚ä¸åš</p><h3 id="emsp-emsp-2-æ˜“äºä¸Šæ‰‹éš¾äºç²¾é€š"><a href="#emsp-emsp-2-æ˜“äºä¸Šæ‰‹éš¾äºç²¾é€š" class="headerlink" title="&emsp;&emsp;2, æ˜“äºä¸Šæ‰‹éš¾äºç²¾é€š"></a>&emsp;&emsp;<font size=4>2, æ˜“äºä¸Šæ‰‹éš¾äºç²¾é€š</font></h3><h3 id="emsp-emsp-3-pythonæ—¢æœ‰åŠ¨æ€è„šæœ¬çš„ç‰¹æ€§-åˆæœ‰é¢å‘å¯¹è±¡çš„ç‰¹æ€§-éå¸¸å…·æœ‰è‡ªå·±çš„ç‰¹ç‚¹"><a href="#emsp-emsp-3-pythonæ—¢æœ‰åŠ¨æ€è„šæœ¬çš„ç‰¹æ€§-åˆæœ‰é¢å‘å¯¹è±¡çš„ç‰¹æ€§-éå¸¸å…·æœ‰è‡ªå·±çš„ç‰¹ç‚¹" class="headerlink" title="&emsp;&emsp;3, pythonæ—¢æœ‰åŠ¨æ€è„šæœ¬çš„ç‰¹æ€§, åˆæœ‰é¢å‘å¯¹è±¡çš„ç‰¹æ€§, éå¸¸å…·æœ‰è‡ªå·±çš„ç‰¹ç‚¹"></a>&emsp;&emsp;<font size=4>3, pythonæ—¢æœ‰åŠ¨æ€è„šæœ¬çš„ç‰¹æ€§, åˆæœ‰é¢å‘å¯¹è±¡çš„ç‰¹æ€§, éå¸¸å…·æœ‰è‡ªå·±çš„ç‰¹ç‚¹</font></h3><h2 id="pythonçš„ç¼ºç‚¹"><a href="#pythonçš„ç¼ºç‚¹" class="headerlink" title="pythonçš„ç¼ºç‚¹"></a><font size=5><strong>pythonçš„ç¼ºç‚¹</strong></font></h2><p><strong>æ…¢</strong>(ç›¸è¾ƒäºCã€C++ã€Java, è¿è¡Œæ•ˆç‡æ…¢)<br>&emsp;&emsp;ä¸»æµè¯­è¨€ä¸¤å¤§ç±»: ç¼–è¯‘å‹è¯­è¨€Cã€C++, è§£é‡Šå‹è¯­è¨€JavaScriptã€python<br>&emsp;&emsp;ç¼–è¯‘å‹è¯­è¨€: æ‰§è¡Œç¨‹åºä¹‹å‰å°†æºä»£ç ç¼–è¯‘æˆæœºå™¨ç (æœºå™¨ç æ›´æ¥è¿‘äºåº•å±‚)<br>&emsp;&emsp;è§£é‡Šå‹è¯­è¨€: æ¯æ¬¡æ‰§è¡Œç¨‹åº, éƒ½ä¼šè§£é‡Šæºç ä½¿å…¶å˜æˆæœºå™¨ç <br>&emsp;&emsp;è¿è¡Œæ•ˆç‡ä¸å¼€å‘æ•ˆç‡, é±¼ä¸ç†ŠæŒä¸å¯å…¼å¾—<br>&emsp;&emsp;è¯­è¨€é€‚åˆçš„æ‰æ˜¯æœ€å¥½çš„<br>&emsp;&emsp;ä¾‹å¦‚å¼€å‘webå¦‚æœé€‰æ‹©æ±‡ç¼–å’ŒCå¼€å‘æ•ˆç‡å¾ˆæ…¢<br>&emsp;&emsp;ä½†æ˜¯è¿è¡Œç¨‹åºå¿«æ…¢å’Œå¼€å‘å¿«æ…¢æ˜¯æ²¡æœ‰å¿…ç„¶å…³ç³»çš„ã€‚pythonè¿è¡Œèµ·æ¥ç”¨æˆ·æ˜¯æ„Ÿè§‰ä¸åˆ°æ…¢çš„ã€‚</p><h2 id="pythonèƒ½åšä»€ä¹ˆï¼Ÿ"><a href="#pythonèƒ½åšä»€ä¹ˆï¼Ÿ" class="headerlink" title="pythonèƒ½åšä»€ä¹ˆï¼Ÿ"></a><font size=5><strong>pythonèƒ½åšä»€ä¹ˆ</strong>ï¼Ÿ</font></h2><p><strong>(å‡ ä¹æ˜¯ä¸‡èƒ½çš„)</strong><br>&emsp;&emsp;1.çˆ¬è™«<br>&emsp;&emsp;2.å¤§æ•°æ®ä¸æ•°æ®åˆ†æ(spark)<br>&emsp;&emsp;3.è‡ªåŠ¨åŒ–è¿ç»´ä¸è‡ªåŠ¨åŒ–æµ‹è¯•<br>&emsp;&emsp;4.webå¼€å‘: flaskã€django<br>&emsp;&emsp;5.æœºå™¨å­¦ä¹ : tensor flow(pythonæ˜¯å…¥é—¨çº§è¯­è¨€)<br>&emsp;&emsp;6.èƒ¶æ°´è¯­è¨€: æ··åˆC++ã€Javaç­‰æ¥ç¼–ç¨‹ã€‚èƒ½å¤ŸæŠŠå…¶ä»–è¯­è¨€åˆ¶ä½œçš„å„ç§æ¨¡å—å¾ˆè½»æ¾åœ°è”æ¥åœ¨ä¸€èµ·<br>å½“ä½ é‡åˆ°é—®é¢˜æ—¶, éšæ‰‹æ‹¿èµ·python, ç¼–å†™ä¸€ä¸ªå·¥å…·, è¿™æ‰æ˜¯pythonæ­£ç¡®çš„æ‰“å¼€æ–¹å¼ã€‚<br>åŸºç¡€è¯­æ³•: åŸºç¡€è¯­æ³•æ˜¯ä»»ä½•è¯­è¨€çš„åŸºç¡€, åªæœ‰ç†Ÿç»ƒæŒæ¡æ‰èƒ½çµæ´»è¿ç”¨è¯­è¨€, å†™å‡ºé«˜æ•ˆã€ä¼˜ç¾ã€ç®€æ´çš„ä»£ç ã€‚</p><h2 id="pythonic"><a href="#pythonic" class="headerlink" title="pythonic: "></a><font size=5><strong>pythonic</strong>: </font></h2><p><strong>é—®é¢˜: aã€bä¸¤ä¸ªå˜é‡å€¼äº¤æ¢</strong><br>&emsp;&emsp;Cè¯­è¨€é£æ ¼: </p><pre class="line-numbers language-c" data-language="c"><code class="language-c"><span class="token keyword">int</span> t <span class="token operator">=</span> a <span class="token punctuation">;</span>a <span class="token operator">=</span> b <span class="token punctuation">;</span>b <span class="token operator">=</span> t <span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;pythonä¸­: </p><pre class="line-numbers language-python" data-language="python"><code class="language-python">a<span class="token punctuation">,</span> b <span class="token operator">=</span> b<span class="token punctuation">,</span> a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>è¿™å°±æ˜¯pythonic.</strong></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> 60min </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pythonæ•°æ®åˆ†æå­¦ä¹ </title>
      <link href="/posts/734e.html"/>
      <url>/posts/734e.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h2 id="é€ æ•°æ®"><a href="#é€ æ•°æ®" class="headerlink" title="é€ æ•°æ® "></a><font size=5><strong>é€ æ•°æ®</strong> </font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># @Time     : 2019/12/11 9:39</span><span class="token comment"># @Author   : wangjun</span><span class="token comment"># @Mail     : 158970251@qq.com</span><span class="token comment"># @File     : name.py</span><span class="token comment"># @Software : PyCharm</span><span class="token comment"># _*_ coding: utf-8 _*_</span><span class="token keyword">import</span> randomlistf <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'ç‹'</span><span class="token punctuation">,</span> <span class="token string">'æ'</span><span class="token punctuation">,</span> <span class="token string">'å¼ '</span><span class="token punctuation">,</span> <span class="token string">'åˆ˜'</span><span class="token punctuation">,</span> <span class="token string">'é™ˆ'</span><span class="token punctuation">,</span> <span class="token string">'æ¨'</span><span class="token punctuation">,</span> <span class="token string">'é»„'</span><span class="token punctuation">,</span> <span class="token string">'èµµ'</span><span class="token punctuation">,</span> <span class="token string">'å´'</span><span class="token punctuation">,</span> <span class="token string">'å‘¨'</span><span class="token punctuation">,</span> <span class="token string">'å¾'</span><span class="token punctuation">,</span> <span class="token string">'å­™'</span><span class="token punctuation">,</span> <span class="token string">'é©¬'</span><span class="token punctuation">,</span> <span class="token string">'æœ±'</span><span class="token punctuation">,</span> <span class="token string">'èƒ¡'</span><span class="token punctuation">,</span> <span class="token string">'éƒ­'</span><span class="token punctuation">,</span> <span class="token string">'ä½•'</span><span class="token punctuation">,</span> <span class="token string">'é«˜'</span><span class="token punctuation">,</span> <span class="token string">'æ—'</span><span class="token punctuation">,</span> <span class="token string">'ç½—'</span><span class="token punctuation">,</span>    <span class="token string">'éƒ‘'</span><span class="token punctuation">,</span> <span class="token string">'æ¢'</span><span class="token punctuation">,</span> <span class="token string">'è°¢'</span><span class="token punctuation">,</span> <span class="token string">'å®‹'</span><span class="token punctuation">,</span> <span class="token string">'å”'</span><span class="token punctuation">,</span> <span class="token string">'è®¸'</span><span class="token punctuation">,</span> <span class="token string">'éŸ©'</span><span class="token punctuation">,</span> <span class="token string">'å†¯'</span><span class="token punctuation">,</span> <span class="token string">'é‚“'</span><span class="token punctuation">,</span> <span class="token string">'æ›¹'</span><span class="token punctuation">,</span> <span class="token string">'å½­'</span><span class="token punctuation">,</span> <span class="token string">'æ›¾'</span><span class="token punctuation">,</span> <span class="token string">'è‚–'</span><span class="token punctuation">,</span> <span class="token string">'ç”°'</span><span class="token punctuation">,</span> <span class="token string">'è‘£'</span><span class="token punctuation">,</span> <span class="token string">'è¢'</span><span class="token punctuation">,</span> <span class="token string">'æ½˜'</span><span class="token punctuation">,</span> <span class="token string">'äº'</span><span class="token punctuation">,</span> <span class="token string">'è’‹'</span><span class="token punctuation">,</span> <span class="token string">'è”¡'</span><span class="token punctuation">,</span>    <span class="token string">'ä½™'</span><span class="token punctuation">,</span> <span class="token string">'æœ'</span><span class="token punctuation">,</span> <span class="token string">'å¶'</span><span class="token punctuation">,</span> <span class="token string">'ç¨‹'</span><span class="token punctuation">,</span> <span class="token string">'è‹'</span><span class="token punctuation">,</span> <span class="token string">'é­'</span><span class="token punctuation">,</span> <span class="token string">'å•'</span><span class="token punctuation">,</span> <span class="token string">'ä¸'</span><span class="token punctuation">,</span> <span class="token string">'ä»»'</span><span class="token punctuation">,</span> <span class="token string">'æ²ˆ'</span><span class="token punctuation">,</span> <span class="token string">'å§š'</span><span class="token punctuation">,</span> <span class="token string">'å¢'</span><span class="token punctuation">,</span> <span class="token string">'å§œ'</span><span class="token punctuation">,</span> <span class="token string">'å´”'</span><span class="token punctuation">,</span> <span class="token string">'é’Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'è°­'</span><span class="token punctuation">,</span> <span class="token string">'é™†'</span><span class="token punctuation">,</span> <span class="token string">'æ±ª'</span><span class="token punctuation">,</span> <span class="token string">'èŒƒ'</span><span class="token punctuation">,</span> <span class="token string">'é‡‘'</span><span class="token punctuation">,</span>    <span class="token string">'çŸ³'</span><span class="token punctuation">,</span> <span class="token string">'å»–'</span><span class="token punctuation">,</span> <span class="token string">'è´¾'</span><span class="token punctuation">,</span> <span class="token string">'å¤'</span><span class="token punctuation">,</span> <span class="token string">'éŸ¦'</span><span class="token punctuation">,</span> <span class="token string">'ä»˜'</span><span class="token punctuation">,</span> <span class="token string">'æ–¹'</span><span class="token punctuation">,</span> <span class="token string">'ç™½'</span><span class="token punctuation">,</span> <span class="token string">'é‚¹'</span><span class="token punctuation">,</span> <span class="token string">'å­Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'ç†Š'</span><span class="token punctuation">,</span> <span class="token string">'ç§¦'</span><span class="token punctuation">,</span> <span class="token string">'é‚±'</span><span class="token punctuation">,</span> <span class="token string">'æ±Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'å°¹'</span><span class="token punctuation">,</span> <span class="token string">'è–›'</span><span class="token punctuation">,</span> <span class="token string">'é—«'</span><span class="token punctuation">,</span> <span class="token string">'æ®µ'</span><span class="token punctuation">,</span> <span class="token string">'é›·'</span><span class="token punctuation">,</span> <span class="token string">'ä¾¯'</span><span class="token punctuation">,</span>    <span class="token string">'é¾™'</span><span class="token punctuation">,</span> <span class="token string">'å²'</span><span class="token punctuation">,</span> <span class="token string">'é™¶'</span><span class="token punctuation">,</span> <span class="token string">'é»'</span><span class="token punctuation">,</span> <span class="token string">'è´º'</span><span class="token punctuation">,</span> <span class="token string">'é¡¾'</span><span class="token punctuation">,</span> <span class="token string">'æ¯›'</span><span class="token punctuation">,</span> <span class="token string">'éƒ'</span><span class="token punctuation">,</span> <span class="token string">'é¾š'</span><span class="token punctuation">,</span> <span class="token string">'é‚µ'</span><span class="token punctuation">,</span> <span class="token string">'ä¸‡'</span><span class="token punctuation">,</span> <span class="token string">'é’±'</span><span class="token punctuation">,</span> <span class="token string">'ä¸¥'</span><span class="token punctuation">,</span> <span class="token string">'è¦ƒ'</span><span class="token punctuation">,</span> <span class="token string">'æ­¦'</span><span class="token punctuation">,</span> <span class="token string">'æˆ´'</span><span class="token punctuation">,</span> <span class="token string">'è«'</span><span class="token punctuation">,</span> <span class="token string">'å­”'</span><span class="token punctuation">,</span> <span class="token string">'å‘'</span><span class="token punctuation">,</span> <span class="token string">'æ±¤'</span><span class="token punctuation">]</span>listm <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'å…°'</span><span class="token punctuation">,</span> <span class="token string">'æ—º'</span><span class="token punctuation">,</span> <span class="token string">'ç‘¶'</span><span class="token punctuation">,</span> <span class="token string">'ä»»'</span><span class="token punctuation">,</span> <span class="token string">'æ™´'</span><span class="token punctuation">,</span> <span class="token string">'é•‡'</span><span class="token punctuation">,</span> <span class="token string">'ä¹”'</span><span class="token punctuation">,</span> <span class="token string">'æ¬£'</span><span class="token punctuation">,</span> <span class="token string">'æ˜†'</span><span class="token punctuation">,</span> <span class="token string">'æ³°'</span><span class="token punctuation">,</span> <span class="token string">'ç­±'</span><span class="token punctuation">,</span> <span class="token string">'ç§‰'</span><span class="token punctuation">,</span> <span class="token string">'æ›œ'</span><span class="token punctuation">,</span> <span class="token string">'å¿ '</span><span class="token punctuation">,</span> <span class="token string">'çœŸ'</span><span class="token punctuation">,</span> <span class="token string">'å‡¯'</span><span class="token punctuation">,</span> <span class="token string">'é›¯'</span><span class="token punctuation">,</span> <span class="token string">'æ‡¿'</span><span class="token punctuation">,</span> <span class="token string">'å´‡'</span><span class="token punctuation">,</span> <span class="token string">'æˆ'</span><span class="token punctuation">,</span> <span class="token string">'é¡º'</span><span class="token punctuation">,</span> <span class="token string">'åš'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'å­Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'ç¦'</span><span class="token punctuation">,</span> <span class="token string">'å…†'</span><span class="token punctuation">,</span> <span class="token string">'ä½‘'</span><span class="token punctuation">,</span> <span class="token string">'å¥'</span><span class="token punctuation">,</span> <span class="token string">'é‡‘'</span><span class="token punctuation">,</span> <span class="token string">'å®¥'</span><span class="token punctuation">,</span> <span class="token string">'è´µ'</span><span class="token punctuation">,</span> <span class="token string">'ç››'</span><span class="token punctuation">,</span> <span class="token string">'å…ƒ'</span><span class="token punctuation">,</span> <span class="token string">'ç'</span><span class="token punctuation">,</span> <span class="token string">'è¾°'</span><span class="token punctuation">,</span> <span class="token string">'åˆ'</span><span class="token punctuation">,</span> <span class="token string">'æ…ˆ'</span><span class="token punctuation">,</span> <span class="token string">'å‹‡'</span><span class="token punctuation">,</span> <span class="token string">'ä»²'</span><span class="token punctuation">,</span> <span class="token string">'æ€'</span><span class="token punctuation">,</span> <span class="token string">'é›ª'</span><span class="token punctuation">,</span> <span class="token string">'å³'</span><span class="token punctuation">,</span> <span class="token string">'ç¼'</span><span class="token punctuation">,</span> <span class="token string">'å'</span><span class="token punctuation">,</span> <span class="token string">'å…¶'</span><span class="token punctuation">,</span>    <span class="token string">'ç«'</span><span class="token punctuation">,</span> <span class="token string">'å½¦'</span><span class="token punctuation">,</span> <span class="token string">'å®‰'</span><span class="token punctuation">,</span> <span class="token string">'å©·'</span><span class="token punctuation">,</span> <span class="token string">'æ›¼'</span><span class="token punctuation">,</span> <span class="token string">'äºˆ'</span><span class="token punctuation">,</span> <span class="token string">'æ¹–'</span><span class="token punctuation">,</span> <span class="token string">'ç»'</span><span class="token punctuation">,</span> <span class="token string">'ä¼Š'</span><span class="token punctuation">,</span> <span class="token string">'ä»¥'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'è‚²'</span><span class="token punctuation">,</span> <span class="token string">'å¤™'</span><span class="token punctuation">,</span> <span class="token string">'å¯Œ'</span><span class="token punctuation">,</span> <span class="token string">'æ­¦'</span><span class="token punctuation">,</span> <span class="token string">'å“'</span><span class="token punctuation">,</span> <span class="token string">'ç‰'</span><span class="token punctuation">,</span> <span class="token string">'é¦¨'</span><span class="token punctuation">,</span> <span class="token string">'å®¶'</span><span class="token punctuation">,</span> <span class="token string">'å±±'</span><span class="token punctuation">,</span> <span class="token string">'ç¾'</span><span class="token punctuation">,</span> <span class="token string">'ä¸€'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'å¸¸'</span><span class="token punctuation">,</span> <span class="token string">'æ‰¬'</span><span class="token punctuation">,</span> <span class="token string">'è¯š'</span><span class="token punctuation">,</span> <span class="token string">'å£«'</span><span class="token punctuation">,</span> <span class="token string">'å§¿'</span><span class="token punctuation">,</span> <span class="token string">'åŠ›'</span><span class="token punctuation">,</span> <span class="token string">'è€€'</span><span class="token punctuation">,</span> <span class="token string">'ç«£'</span><span class="token punctuation">,</span> <span class="token string">'å…'</span><span class="token punctuation">,</span> <span class="token string">'ç­ '</span><span class="token punctuation">,</span> <span class="token string">'ç‘œ'</span><span class="token punctuation">,</span> <span class="token string">'èˆœ'</span><span class="token punctuation">,</span> <span class="token string">'æ˜Œ'</span><span class="token punctuation">,</span> <span class="token string">'å†°'</span><span class="token punctuation">,</span> <span class="token string">'è¡Œ'</span><span class="token punctuation">,</span> <span class="token string">'æ™“'</span><span class="token punctuation">,</span> <span class="token string">'è½©'</span><span class="token punctuation">,</span> <span class="token string">'ä¹‰'</span><span class="token punctuation">,</span> <span class="token string">'çº¬'</span><span class="token punctuation">,</span> <span class="token string">'æ·‘'</span><span class="token punctuation">,</span> <span class="token string">'è£'</span><span class="token punctuation">,</span> <span class="token string">'æµ·'</span><span class="token punctuation">,</span>    <span class="token string">'å‘ˆ'</span><span class="token punctuation">,</span> <span class="token string">'ç´ '</span><span class="token punctuation">,</span> <span class="token string">'ä¹‹'</span><span class="token punctuation">,</span> <span class="token string">'ç¢§'</span><span class="token punctuation">,</span> <span class="token string">'éŸ¦'</span><span class="token punctuation">,</span> <span class="token string">'å³»'</span><span class="token punctuation">,</span> <span class="token string">'æ™'</span><span class="token punctuation">,</span> <span class="token string">'èƒœ'</span><span class="token punctuation">,</span> <span class="token string">'è£•'</span><span class="token punctuation">,</span> <span class="token string">'æƒ '</span><span class="token punctuation">,</span> <span class="token string">'å­'</span><span class="token punctuation">,</span> <span class="token string">'æ˜­'</span><span class="token punctuation">,</span> <span class="token string">'éª'</span><span class="token punctuation">,</span> <span class="token string">'èŠ³'</span><span class="token punctuation">,</span> <span class="token string">'å‡¡'</span><span class="token punctuation">,</span> <span class="token string">'ç™½'</span><span class="token punctuation">,</span> <span class="token string">'æ­'</span><span class="token punctuation">,</span> <span class="token string">'å¼˜'</span><span class="token punctuation">,</span> <span class="token string">'æ˜'</span><span class="token punctuation">,</span> <span class="token string">'å…´'</span><span class="token punctuation">,</span> <span class="token string">'åš'</span><span class="token punctuation">,</span> <span class="token string">'ç´«'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'å©‰'</span><span class="token punctuation">,</span> <span class="token string">'èŠ'</span><span class="token punctuation">,</span> <span class="token string">'å°'</span><span class="token punctuation">,</span> <span class="token string">'å­'</span><span class="token punctuation">,</span> <span class="token string">'ç¿Š'</span><span class="token punctuation">,</span> <span class="token string">'ä¹'</span><span class="token punctuation">,</span> <span class="token string">'å¦‚'</span><span class="token punctuation">,</span> <span class="token string">'å§µ'</span><span class="token punctuation">,</span> <span class="token string">'ç®'</span><span class="token punctuation">,</span> <span class="token string">'æ™º'</span><span class="token punctuation">,</span> <span class="token string">'æƒŸ'</span><span class="token punctuation">,</span> <span class="token string">'æ·»'</span><span class="token punctuation">,</span> <span class="token string">'æ—»'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'ä¸œ'</span><span class="token punctuation">,</span> <span class="token string">'æ·³'</span><span class="token punctuation">,</span> <span class="token string">'æŸ'</span><span class="token punctuation">,</span> <span class="token string">'æ²›'</span><span class="token punctuation">,</span> <span class="token string">'åˆ'</span><span class="token punctuation">,</span> <span class="token string">'å›½'</span><span class="token punctuation">,</span> <span class="token string">'å®£'</span><span class="token punctuation">,</span> <span class="token string">'ç›Š'</span><span class="token punctuation">,</span>    <span class="token string">'ä¼¯'</span><span class="token punctuation">,</span> <span class="token string">'é•¿'</span><span class="token punctuation">,</span> <span class="token string">'äº'</span><span class="token punctuation">,</span> <span class="token string">'å¹³'</span><span class="token punctuation">,</span> <span class="token string">'ç»¿'</span><span class="token punctuation">,</span> <span class="token string">'ç»´'</span><span class="token punctuation">,</span> <span class="token string">'èˆ’'</span><span class="token punctuation">,</span> <span class="token string">'å¦¤'</span><span class="token punctuation">,</span> <span class="token string">'å—'</span><span class="token punctuation">,</span> <span class="token string">'æ˜±'</span><span class="token punctuation">,</span> <span class="token string">'å®‡'</span><span class="token punctuation">,</span> <span class="token string">'å²³'</span><span class="token punctuation">,</span> <span class="token string">'æ©'</span><span class="token punctuation">,</span> <span class="token string">'ç¤¼'</span><span class="token punctuation">,</span> <span class="token string">'ç¾¤'</span><span class="token punctuation">,</span> <span class="token string">'ä½©'</span><span class="token punctuation">,</span> <span class="token string">'å†›'</span><span class="token punctuation">,</span> <span class="token string">'ç’‡'</span><span class="token punctuation">,</span> <span class="token string">'æ–‡'</span><span class="token punctuation">,</span> <span class="token string">'å’'</span><span class="token punctuation">,</span> <span class="token string">'ä»‹'</span><span class="token punctuation">,</span> <span class="token string">'å–œ'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'æ¯…'</span><span class="token punctuation">,</span> <span class="token string">'å›'</span><span class="token punctuation">,</span> <span class="token string">'åŠ­'</span><span class="token punctuation">,</span> <span class="token string">'å˜‰'</span><span class="token punctuation">,</span> <span class="token string">'è‚‡'</span><span class="token punctuation">,</span> <span class="token string">'æ³•'</span><span class="token punctuation">,</span> <span class="token string">'é€¸'</span><span class="token punctuation">,</span> <span class="token string">'æ²»'</span><span class="token punctuation">,</span> <span class="token string">'ä¸‡'</span><span class="token punctuation">,</span> <span class="token string">'æ¾'</span><span class="token punctuation">,</span> <span class="token string">'æ°´'</span><span class="token punctuation">,</span> <span class="token string">'æµ©'</span><span class="token punctuation">,</span> <span class="token string">'è¹'</span><span class="token punctuation">,</span> <span class="token string">'æ™¯'</span><span class="token punctuation">,</span> <span class="token string">'èŒ‚'</span><span class="token punctuation">,</span> <span class="token string">'ç»®'</span><span class="token punctuation">,</span> <span class="token string">'è“‰'</span><span class="token punctuation">,</span> <span class="token string">'è–‡'</span><span class="token punctuation">,</span> <span class="token string">'éƒ'</span><span class="token punctuation">,</span> <span class="token string">'ä¿'</span><span class="token punctuation">,</span> <span class="token string">'å’Œ'</span><span class="token punctuation">,</span> <span class="token string">'å¤'</span><span class="token punctuation">,</span>    <span class="token string">'æ¯“'</span><span class="token punctuation">,</span> <span class="token string">'å‡'</span><span class="token punctuation">,</span> <span class="token string">'æ¢¦'</span><span class="token punctuation">,</span> <span class="token string">'åŸ¹'</span><span class="token punctuation">,</span> <span class="token string">'ä¸'</span><span class="token punctuation">,</span> <span class="token string">'å»·'</span><span class="token punctuation">,</span> <span class="token string">'ä¹ƒ'</span><span class="token punctuation">,</span> <span class="token string">'å‹‹'</span><span class="token punctuation">,</span> <span class="token string">'ç™»'</span><span class="token punctuation">,</span> <span class="token string">'çˆ±'</span><span class="token punctuation">,</span> <span class="token string">'æ¢…'</span><span class="token punctuation">,</span> <span class="token string">'åƒ'</span><span class="token punctuation">,</span> <span class="token string">'ä¹¦'</span><span class="token punctuation">,</span> <span class="token string">'æ¬¢'</span><span class="token punctuation">,</span> <span class="token string">'ç‡'</span><span class="token punctuation">,</span> <span class="token string">'å¿µ'</span><span class="token punctuation">,</span> <span class="token string">'çŸ'</span><span class="token punctuation">,</span> <span class="token string">'ç§‹'</span><span class="token punctuation">,</span> <span class="token string">'é¢–'</span><span class="token punctuation">,</span> <span class="token string">'å¾—'</span><span class="token punctuation">,</span> <span class="token string">'æ˜Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'æ±Ÿ'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'å®¹'</span><span class="token punctuation">,</span> <span class="token string">'æ˜ '</span><span class="token punctuation">,</span> <span class="token string">'å¾·'</span><span class="token punctuation">,</span> <span class="token string">'æ€¡'</span><span class="token punctuation">,</span> <span class="token string">'èŒ¹'</span><span class="token punctuation">,</span> <span class="token string">'ä»ª'</span><span class="token punctuation">,</span> <span class="token string">'å„’'</span><span class="token punctuation">,</span> <span class="token string">'æ°'</span><span class="token punctuation">,</span> <span class="token string">'å“²'</span><span class="token punctuation">,</span> <span class="token string">'æ±‰'</span><span class="token punctuation">,</span> <span class="token string">'åˆš'</span><span class="token punctuation">,</span> <span class="token string">'å¨‡'</span><span class="token punctuation">,</span> <span class="token string">'ä¿®'</span><span class="token punctuation">,</span> <span class="token string">'æ—­'</span><span class="token punctuation">,</span> <span class="token string">'æ¡‚'</span><span class="token punctuation">,</span> <span class="token string">'é›¨'</span><span class="token punctuation">,</span> <span class="token string">'ä»•'</span><span class="token punctuation">,</span> <span class="token string">'è‰'</span><span class="token punctuation">,</span> <span class="token string">'å…‹'</span><span class="token punctuation">,</span> <span class="token string">'ä½³'</span><span class="token punctuation">,</span> <span class="token string">'çŠ'</span><span class="token punctuation">,</span> <span class="token string">'é˜¿'</span><span class="token punctuation">,</span>    <span class="token string">'ç§€'</span><span class="token punctuation">,</span> <span class="token string">'å°š'</span><span class="token punctuation">,</span> <span class="token string">'å°§'</span><span class="token punctuation">,</span> <span class="token string">'æ™‹'</span><span class="token punctuation">,</span> <span class="token string">'æ¹˜'</span><span class="token punctuation">,</span> <span class="token string">'ä¿'</span><span class="token punctuation">,</span> <span class="token string">'æ˜¥'</span><span class="token punctuation">,</span> <span class="token string">'è™¹'</span><span class="token punctuation">,</span> <span class="token string">'ç‘'</span><span class="token punctuation">,</span> <span class="token string">'ç™¾'</span><span class="token punctuation">,</span> <span class="token string">'ç³'</span><span class="token punctuation">,</span> <span class="token string">'è¯­'</span><span class="token punctuation">,</span> <span class="token string">'é˜³'</span><span class="token punctuation">,</span> <span class="token string">'æœ¨'</span><span class="token punctuation">,</span> <span class="token string">'å»º'</span><span class="token punctuation">,</span> <span class="token string">'ä¸°'</span><span class="token punctuation">,</span> <span class="token string">'çª'</span><span class="token punctuation">,</span> <span class="token string">'è´¢'</span><span class="token punctuation">,</span> <span class="token string">'è‹±'</span><span class="token punctuation">,</span> <span class="token string">'æ…§'</span><span class="token punctuation">,</span> <span class="token string">'é–'</span><span class="token punctuation">,</span> <span class="token string">'è'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'è‹¥'</span><span class="token punctuation">,</span> <span class="token string">'å¤§'</span><span class="token punctuation">,</span> <span class="token string">'åŸ'</span><span class="token punctuation">,</span> <span class="token string">'å©•'</span><span class="token punctuation">,</span> <span class="token string">'æ„'</span><span class="token punctuation">,</span> <span class="token string">'å±•'</span><span class="token punctuation">,</span> <span class="token string">'å·§'</span><span class="token punctuation">,</span> <span class="token string">'äºº'</span><span class="token punctuation">,</span> <span class="token string">'åŸ'</span><span class="token punctuation">,</span> <span class="token string">'ç«¹'</span><span class="token punctuation">,</span> <span class="token string">'é‡'</span><span class="token punctuation">,</span> <span class="token string">'é¸¿'</span><span class="token punctuation">,</span> <span class="token string">'æ•¬'</span><span class="token punctuation">,</span> <span class="token string">'ä¾'</span><span class="token punctuation">,</span> <span class="token string">'è¿›'</span><span class="token punctuation">,</span> <span class="token string">'å°'</span><span class="token punctuation">,</span> <span class="token string">'å·¦'</span><span class="token punctuation">,</span> <span class="token string">'äº¦'</span><span class="token punctuation">,</span> <span class="token string">'éŸµ'</span><span class="token punctuation">,</span> <span class="token string">'é’°'</span><span class="token punctuation">,</span> <span class="token string">'æ–°'</span><span class="token punctuation">,</span> <span class="token string">'ç¾½'</span><span class="token punctuation">,</span>    <span class="token string">'é™'</span><span class="token punctuation">,</span> <span class="token string">'å'</span><span class="token punctuation">,</span> <span class="token string">'ä¸­'</span><span class="token punctuation">,</span> <span class="token string">'ä»'</span><span class="token punctuation">,</span> <span class="token string">'é‡‡'</span><span class="token punctuation">,</span> <span class="token string">'äº­'</span><span class="token punctuation">,</span> <span class="token string">'å¦™'</span><span class="token punctuation">,</span> <span class="token string">'å¸Œ'</span><span class="token punctuation">,</span> <span class="token string">'å¿…'</span><span class="token punctuation">,</span> <span class="token string">'æ‰¿'</span><span class="token punctuation">,</span> <span class="token string">'è±ª'</span><span class="token punctuation">,</span> <span class="token string">'å‰'</span><span class="token punctuation">,</span> <span class="token string">'èŠ·'</span><span class="token punctuation">,</span> <span class="token string">'ä¸Š'</span><span class="token punctuation">,</span> <span class="token string">'çŸ³'</span><span class="token punctuation">,</span> <span class="token string">'å† '</span><span class="token punctuation">,</span> <span class="token string">'å¨'</span><span class="token punctuation">,</span> <span class="token string">'åˆ'</span><span class="token punctuation">,</span> <span class="token string">'è¾›'</span><span class="token punctuation">,</span> <span class="token string">'å¥•'</span><span class="token punctuation">,</span> <span class="token string">'é›…'</span><span class="token punctuation">,</span> <span class="token string">'æ³“'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'ä¼¶'</span><span class="token punctuation">,</span> <span class="token string">'ç«'</span><span class="token punctuation">,</span> <span class="token string">'å®š'</span><span class="token punctuation">,</span> <span class="token string">'ä¸–'</span><span class="token punctuation">,</span> <span class="token string">'çš“'</span><span class="token punctuation">,</span> <span class="token string">'å'</span><span class="token punctuation">,</span> <span class="token string">'èŠ¸'</span><span class="token punctuation">,</span> <span class="token string">'æ”¿'</span><span class="token punctuation">,</span> <span class="token string">'æ´'</span><span class="token punctuation">,</span> <span class="token string">'ç¥¥'</span><span class="token punctuation">,</span> <span class="token string">'æ¸…'</span><span class="token punctuation">,</span> <span class="token string">'å…‰'</span><span class="token punctuation">,</span> <span class="token string">'è´'</span><span class="token punctuation">,</span> <span class="token string">'ç¿ '</span><span class="token punctuation">,</span> <span class="token string">'çº¯'</span><span class="token punctuation">,</span> <span class="token string">'ä¼Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'æŒ¯'</span><span class="token punctuation">,</span> <span class="token string">'åº­'</span><span class="token punctuation">,</span> <span class="token string">'æ˜“'</span><span class="token punctuation">,</span> <span class="token string">'é¦™'</span><span class="token punctuation">,</span> <span class="token string">'æ°¸'</span><span class="token punctuation">,</span> <span class="token string">'çš‡'</span><span class="token punctuation">,</span>    <span class="token string">'èŒœ'</span><span class="token punctuation">,</span> <span class="token string">'è‰¯'</span><span class="token punctuation">,</span> <span class="token string">'æ•'</span><span class="token punctuation">,</span> <span class="token string">'ç‡•'</span><span class="token punctuation">,</span> <span class="token string">'ä¿Š'</span><span class="token punctuation">,</span> <span class="token string">'æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'æ°‘'</span><span class="token punctuation">,</span> <span class="token string">'éš†'</span><span class="token punctuation">,</span> <span class="token string">'ä¾‘'</span><span class="token punctuation">,</span> <span class="token string">'è¯—'</span><span class="token punctuation">,</span> <span class="token string">'å¿ƒ'</span><span class="token punctuation">,</span> <span class="token string">'å‹'</span><span class="token punctuation">,</span> <span class="token string">'è‡´'</span><span class="token punctuation">,</span> <span class="token string">'è´¤'</span><span class="token punctuation">,</span> <span class="token string">'å®›'</span><span class="token punctuation">,</span> <span class="token string">'å¥‡'</span><span class="token punctuation">,</span> <span class="token string">'ç²'</span><span class="token punctuation">,</span> <span class="token string">'å¿—'</span><span class="token punctuation">,</span> <span class="token string">'å®ª'</span><span class="token punctuation">,</span> <span class="token string">'å¯'</span><span class="token punctuation">,</span> <span class="token string">'äºš'</span><span class="token punctuation">,</span> <span class="token string">'ç›ˆ'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'ç¿'</span><span class="token punctuation">,</span> <span class="token string">'æ¶µ'</span><span class="token punctuation">,</span> <span class="token string">'æŸ”'</span><span class="token punctuation">,</span> <span class="token string">'è±'</span><span class="token punctuation">,</span> <span class="token string">'æ˜€'</span><span class="token punctuation">,</span> <span class="token string">'ä¼¦'</span><span class="token punctuation">,</span> <span class="token string">'å‡'</span><span class="token punctuation">,</span> <span class="token string">'å­£'</span><span class="token punctuation">,</span> <span class="token string">'ç®'</span><span class="token punctuation">,</span> <span class="token string">'å‡¤'</span><span class="token punctuation">,</span> <span class="token string">'å–„'</span><span class="token punctuation">,</span> <span class="token string">'äº‘'</span><span class="token punctuation">,</span> <span class="token string">'ç¥¯'</span><span class="token punctuation">,</span> <span class="token string">'å¹¸'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'å¯'</span><span class="token punctuation">,</span> <span class="token string">'ä¿¡'</span><span class="token punctuation">,</span> <span class="token string">'å¤©'</span><span class="token punctuation">,</span> <span class="token string">'å®—'</span><span class="token punctuation">,</span> <span class="token string">'å®œ'</span><span class="token punctuation">,</span> <span class="token string">'å¿†'</span><span class="token punctuation">,</span> <span class="token string">'åº·'</span><span class="token punctuation">,</span>    <span class="token string">'ç¿°'</span><span class="token punctuation">,</span> <span class="token string">'æ­£'</span><span class="token punctuation">,</span> <span class="token string">'ä¸½'</span><span class="token punctuation">,</span> <span class="token string">'ç¿”'</span><span class="token punctuation">,</span> <span class="token string">'å°‘'</span><span class="token punctuation">,</span> <span class="token string">'æœ'</span><span class="token punctuation">,</span> <span class="token string">'å€©'</span><span class="token punctuation">,</span> <span class="token string">'åœ£'</span><span class="token punctuation">,</span> <span class="token string">'é’§'</span><span class="token punctuation">,</span> <span class="token string">'ç¬'</span><span class="token punctuation">,</span> <span class="token string">'é“­'</span><span class="token punctuation">,</span> <span class="token string">'å­¦'</span><span class="token punctuation">,</span> <span class="token string">'å¹¼'</span><span class="token punctuation">,</span> <span class="token string">'ç«‹'</span><span class="token punctuation">,</span> <span class="token string">'è•™'</span><span class="token punctuation">,</span> <span class="token string">'é’'</span><span class="token punctuation">,</span> <span class="token string">'æ'</span><span class="token punctuation">,</span> <span class="token string">'åº†'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span>listl <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'ç››'</span><span class="token punctuation">,</span> <span class="token string">'æ–Œ'</span><span class="token punctuation">,</span> <span class="token string">'é“ƒ'</span><span class="token punctuation">,</span> <span class="token string">'å³°'</span><span class="token punctuation">,</span> <span class="token string">'å¿—'</span><span class="token punctuation">,</span> <span class="token string">'åŸ'</span><span class="token punctuation">,</span> <span class="token string">'è²'</span><span class="token punctuation">,</span> <span class="token string">'æ‰¬'</span><span class="token punctuation">,</span> <span class="token string">'å…¨'</span><span class="token punctuation">,</span> <span class="token string">'èŒ‚'</span><span class="token punctuation">,</span> <span class="token string">'è¾°'</span><span class="token punctuation">,</span> <span class="token string">'å½°'</span><span class="token punctuation">,</span> <span class="token string">'è‡»'</span><span class="token punctuation">,</span> <span class="token string">'ç«¹'</span><span class="token punctuation">,</span> <span class="token string">'ç¿°'</span><span class="token punctuation">,</span> <span class="token string">'é™'</span><span class="token punctuation">,</span> <span class="token string">'å¦¹'</span><span class="token punctuation">,</span> <span class="token string">'éœ–'</span><span class="token punctuation">,</span> <span class="token string">'æ·»'</span><span class="token punctuation">,</span> <span class="token string">'åŸ'</span><span class="token punctuation">,</span> <span class="token string">'å»·'</span><span class="token punctuation">,</span> <span class="token string">'æ­£'</span><span class="token punctuation">,</span>    <span class="token string">'å¥‡'</span><span class="token punctuation">,</span> <span class="token string">'å¹³'</span><span class="token punctuation">,</span> <span class="token string">'å®‰'</span><span class="token punctuation">,</span> <span class="token string">'æŸ”'</span><span class="token punctuation">,</span> <span class="token string">'æ¯“'</span><span class="token punctuation">,</span> <span class="token string">'è´µ'</span><span class="token punctuation">,</span> <span class="token string">'å®ª'</span><span class="token punctuation">,</span> <span class="token string">'æ€¡'</span><span class="token punctuation">,</span> <span class="token string">'ç§‹'</span><span class="token punctuation">,</span> <span class="token string">'èŒœ'</span><span class="token punctuation">,</span> <span class="token string">'å’Œ'</span><span class="token punctuation">,</span> <span class="token string">'ç‰'</span><span class="token punctuation">,</span> <span class="token string">'æ³‰'</span><span class="token punctuation">,</span> <span class="token string">'ç'</span><span class="token punctuation">,</span> <span class="token string">'å­£'</span><span class="token punctuation">,</span> <span class="token string">'å¨‡'</span><span class="token punctuation">,</span> <span class="token string">'ç›ˆ'</span><span class="token punctuation">,</span> <span class="token string">'è“‰'</span><span class="token punctuation">,</span> <span class="token string">'ä»ª'</span><span class="token punctuation">,</span> <span class="token string">'ç¾¤'</span><span class="token punctuation">,</span> <span class="token string">'å‡'</span><span class="token punctuation">,</span> <span class="token string">'å¿ '</span><span class="token punctuation">,</span>    <span class="token string">'æ…§'</span><span class="token punctuation">,</span> <span class="token string">'ç¿'</span><span class="token punctuation">,</span> <span class="token string">'å†›'</span><span class="token punctuation">,</span> <span class="token string">'å‹'</span><span class="token punctuation">,</span> <span class="token string">'å¨'</span><span class="token punctuation">,</span> <span class="token string">'äº‘'</span><span class="token punctuation">,</span> <span class="token string">'ç²'</span><span class="token punctuation">,</span> <span class="token string">'åº·'</span><span class="token punctuation">,</span> <span class="token string">'å½¬'</span><span class="token punctuation">,</span> <span class="token string">'é›…'</span><span class="token punctuation">,</span> <span class="token string">'å‹‹'</span><span class="token punctuation">,</span> <span class="token string">'ä¸°'</span><span class="token punctuation">,</span> <span class="token string">'å¸†'</span><span class="token punctuation">,</span> <span class="token string">'å›'</span><span class="token punctuation">,</span> <span class="token string">'ç´'</span><span class="token punctuation">,</span> <span class="token string">'æ¯…'</span><span class="token punctuation">,</span> <span class="token string">'ç«'</span><span class="token punctuation">,</span> <span class="token string">'ç’‡'</span><span class="token punctuation">,</span> <span class="token string">'æ·‘'</span><span class="token punctuation">,</span> <span class="token string">'ç§€'</span><span class="token punctuation">,</span> <span class="token string">'ç¦'</span><span class="token punctuation">,</span> <span class="token string">'ç®'</span><span class="token punctuation">,</span>    <span class="token string">'åª›'</span><span class="token punctuation">,</span> <span class="token string">'é€¸'</span><span class="token punctuation">,</span> <span class="token string">'åš'</span><span class="token punctuation">,</span> <span class="token string">'ç­‘'</span><span class="token punctuation">,</span> <span class="token string">'ç»´'</span><span class="token punctuation">,</span> <span class="token string">'éŸ¦'</span><span class="token punctuation">,</span> <span class="token string">'å‡'</span><span class="token punctuation">,</span> <span class="token string">'æ˜Œ'</span><span class="token punctuation">,</span> <span class="token string">'æ¬£'</span><span class="token punctuation">,</span> <span class="token string">'åˆ'</span><span class="token punctuation">,</span> <span class="token string">'å¼º'</span><span class="token punctuation">,</span> <span class="token string">'æ³•'</span><span class="token punctuation">,</span> <span class="token string">'å†°'</span><span class="token punctuation">,</span> <span class="token string">'å…¶'</span><span class="token punctuation">,</span> <span class="token string">'æ˜€'</span><span class="token punctuation">,</span> <span class="token string">'å¿ƒ'</span><span class="token punctuation">,</span> <span class="token string">'æƒ '</span><span class="token punctuation">,</span> <span class="token string">'ç”„'</span><span class="token punctuation">,</span> <span class="token string">'è–‡'</span><span class="token punctuation">,</span> <span class="token string">'æ—º'</span><span class="token punctuation">,</span> <span class="token string">'çº¬'</span><span class="token punctuation">,</span> <span class="token string">'å—'</span><span class="token punctuation">,</span>    <span class="token string">'è¾›'</span><span class="token punctuation">,</span> <span class="token string">'ä¼¯'</span><span class="token punctuation">,</span> <span class="token string">'å‡¤'</span><span class="token punctuation">,</span> <span class="token string">'ç¥¥'</span><span class="token punctuation">,</span> <span class="token string">'å€©'</span><span class="token punctuation">,</span> <span class="token string">'èˆœ'</span><span class="token punctuation">,</span> <span class="token string">'è±'</span><span class="token punctuation">,</span> <span class="token string">'è‹±'</span><span class="token punctuation">,</span> <span class="token string">'ç¾'</span><span class="token punctuation">,</span> <span class="token string">'è™¹'</span><span class="token punctuation">,</span> <span class="token string">'æ¾'</span><span class="token punctuation">,</span> <span class="token string">'æ˜Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'è¾‰'</span><span class="token punctuation">,</span> <span class="token string">'å…ƒ'</span><span class="token punctuation">,</span> <span class="token string">'åœ£'</span><span class="token punctuation">,</span> <span class="token string">'éš†'</span><span class="token punctuation">,</span> <span class="token string">'é¾™'</span><span class="token punctuation">,</span> <span class="token string">'èŠ±'</span><span class="token punctuation">,</span> <span class="token string">'è‹¹'</span><span class="token punctuation">,</span> <span class="token string">'ç­ '</span><span class="token punctuation">,</span> <span class="token string">'ä»»'</span><span class="token punctuation">,</span> <span class="token string">'çº¶'</span><span class="token punctuation">,</span>    <span class="token string">'å²š'</span><span class="token punctuation">,</span> <span class="token string">'å¦ƒ'</span><span class="token punctuation">,</span> <span class="token string">'æ˜†'</span><span class="token punctuation">,</span> <span class="token string">'è´¤'</span><span class="token punctuation">,</span> <span class="token string">'ç”Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'ç‘„'</span><span class="token punctuation">,</span> <span class="token string">'è°¦'</span><span class="token punctuation">,</span> <span class="token string">'å…´'</span><span class="token punctuation">,</span> <span class="token string">'ä¼Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'æ²›'</span><span class="token punctuation">,</span> <span class="token string">'é¦¨'</span><span class="token punctuation">,</span> <span class="token string">'ç®'</span><span class="token punctuation">,</span> <span class="token string">'è“'</span><span class="token punctuation">,</span> <span class="token string">'è•™'</span><span class="token punctuation">,</span> <span class="token string">'é’°'</span><span class="token punctuation">,</span> <span class="token string">'æ°'</span><span class="token punctuation">,</span> <span class="token string">'åŠ­'</span><span class="token punctuation">,</span> <span class="token string">'æ—­'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'åº­'</span><span class="token punctuation">,</span> <span class="token string">'å¤'</span><span class="token punctuation">,</span>    <span class="token string">'è½©'</span><span class="token punctuation">,</span> <span class="token string">'ä¿®'</span><span class="token punctuation">,</span> <span class="token string">'èŠ¸'</span><span class="token punctuation">,</span> <span class="token string">'ä½³'</span><span class="token punctuation">,</span> <span class="token string">'æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'æ¡¦'</span><span class="token punctuation">,</span> <span class="token string">'æ¥'</span><span class="token punctuation">,</span> <span class="token string">'éœ'</span><span class="token punctuation">,</span> <span class="token string">'å­œ'</span><span class="token punctuation">,</span> <span class="token string">'ä¹'</span><span class="token punctuation">,</span> <span class="token string">'è¾¾'</span><span class="token punctuation">,</span> <span class="token string">'æ•'</span><span class="token punctuation">,</span> <span class="token string">'å–„'</span><span class="token punctuation">,</span> <span class="token string">'äº¦'</span><span class="token punctuation">,</span> <span class="token string">'è¶…'</span><span class="token punctuation">,</span> <span class="token string">'é’§'</span><span class="token punctuation">,</span> <span class="token string">'å¤©'</span><span class="token punctuation">,</span> <span class="token string">'ç¾½'</span><span class="token punctuation">,</span> <span class="token string">'åˆš'</span><span class="token punctuation">,</span> <span class="token string">'ç»¿'</span><span class="token punctuation">,</span> <span class="token string">'çˆ±'</span><span class="token punctuation">,</span> <span class="token string">'çº¯'</span><span class="token punctuation">,</span>    <span class="token string">'ä¾‘'</span><span class="token punctuation">,</span> <span class="token string">'å£«'</span><span class="token punctuation">,</span> <span class="token string">'å'</span><span class="token punctuation">,</span> <span class="token string">'é›¯'</span><span class="token punctuation">,</span> <span class="token string">'ä¹‰'</span><span class="token punctuation">,</span> <span class="token string">'äºš'</span><span class="token punctuation">,</span> <span class="token string">'ç¬'</span><span class="token punctuation">,</span> <span class="token string">'èŠ·'</span><span class="token punctuation">,</span> <span class="token string">'å°§'</span><span class="token punctuation">,</span> <span class="token string">'ä¼¦'</span><span class="token punctuation">,</span> <span class="token string">'æ–°'</span><span class="token punctuation">,</span> <span class="token string">'ä¹”'</span><span class="token punctuation">,</span> <span class="token string">'é›„'</span><span class="token punctuation">,</span> <span class="token string">'æ´'</span><span class="token punctuation">,</span> <span class="token string">'å¹¸'</span><span class="token punctuation">,</span> <span class="token string">'å¨¥'</span><span class="token punctuation">,</span> <span class="token string">'æ©'</span><span class="token punctuation">,</span> <span class="token string">'çŸ'</span><span class="token punctuation">,</span> <span class="token string">'ä¹¦'</span><span class="token punctuation">,</span> <span class="token string">'æƒŸ'</span><span class="token punctuation">,</span> <span class="token string">'æ³°'</span><span class="token punctuation">,</span> <span class="token string">'ç‘œ'</span><span class="token punctuation">,</span>    <span class="token string">'çŠ'</span><span class="token punctuation">,</span> <span class="token string">'è¿œ'</span><span class="token punctuation">,</span> <span class="token string">'æ™´'</span><span class="token punctuation">,</span> <span class="token string">'å½¦'</span><span class="token punctuation">,</span> <span class="token string">'å“²'</span><span class="token punctuation">,</span> <span class="token string">'ç‘'</span><span class="token punctuation">,</span> <span class="token string">'ç‡'</span><span class="token punctuation">,</span> <span class="token string">'æ™º'</span><span class="token punctuation">,</span> <span class="token string">'æ˜ '</span><span class="token punctuation">,</span> <span class="token string">'ç '</span><span class="token punctuation">,</span> <span class="token string">'é¸¿'</span><span class="token punctuation">,</span> <span class="token string">'æ¢¦'</span><span class="token punctuation">,</span> <span class="token string">'ç‡•'</span><span class="token punctuation">,</span> <span class="token string">'äºº'</span><span class="token punctuation">,</span> <span class="token string">'æ˜¥'</span><span class="token punctuation">,</span> <span class="token string">'å„’'</span><span class="token punctuation">,</span> <span class="token string">'å¿'</span><span class="token punctuation">,</span> <span class="token string">'ä½©'</span><span class="token punctuation">,</span> <span class="token string">'ç¥¯'</span><span class="token punctuation">,</span> <span class="token string">'è‰¯'</span><span class="token punctuation">,</span> <span class="token string">'æ¸…'</span><span class="token punctuation">,</span> <span class="token string">'æ¬¢'</span><span class="token punctuation">,</span>    <span class="token string">'ä¸­'</span><span class="token punctuation">,</span> <span class="token string">'éºŸ'</span><span class="token punctuation">,</span> <span class="token string">'éª'</span><span class="token punctuation">,</span> <span class="token string">'å²³'</span><span class="token punctuation">,</span> <span class="token string">'è´¢'</span><span class="token punctuation">,</span> <span class="token string">'èŠ³'</span><span class="token punctuation">,</span> <span class="token string">'è¯š'</span><span class="token punctuation">,</span> <span class="token string">'æ–‡'</span><span class="token punctuation">,</span> <span class="token string">'çœŸ'</span><span class="token punctuation">,</span> <span class="token string">'æŸ'</span><span class="token punctuation">,</span> <span class="token string">'æ¹–'</span><span class="token punctuation">,</span> <span class="token string">'è'</span><span class="token punctuation">,</span> <span class="token string">'ç”·'</span><span class="token punctuation">,</span> <span class="token string">'ä¸€'</span><span class="token punctuation">,</span> <span class="token string">'ä½‘'</span><span class="token punctuation">,</span> <span class="token string">'é¢–'</span><span class="token punctuation">,</span> <span class="token string">'é˜³'</span><span class="token punctuation">,</span> <span class="token string">'æ°´'</span><span class="token punctuation">,</span> <span class="token string">'æ'</span><span class="token punctuation">,</span> <span class="token string">'èŒ¹'</span><span class="token punctuation">,</span> <span class="token string">'å¾·'</span><span class="token punctuation">,</span> <span class="token string">'è±ª'</span><span class="token punctuation">,</span>    <span class="token string">'è°•'</span><span class="token punctuation">,</span> <span class="token string">'å'</span><span class="token punctuation">,</span> <span class="token string">'è£•'</span><span class="token punctuation">,</span> <span class="token string">'å±±'</span><span class="token punctuation">,</span> <span class="token string">'å­'</span><span class="token punctuation">,</span> <span class="token string">'ä¾'</span><span class="token punctuation">,</span> <span class="token string">'æœ¨'</span><span class="token punctuation">,</span> <span class="token string">'å®£'</span><span class="token punctuation">,</span> <span class="token string">'æ¶µ'</span><span class="token punctuation">,</span> <span class="token string">'å‡¯'</span><span class="token punctuation">,</span> <span class="token string">'æº'</span><span class="token punctuation">,</span> <span class="token string">'éŸµ'</span><span class="token punctuation">,</span> <span class="token string">'æˆ'</span><span class="token punctuation">,</span> <span class="token string">'è‚²'</span><span class="token punctuation">,</span> <span class="token string">'å–œ'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'éƒ'</span><span class="token punctuation">,</span> <span class="token string">'ä»'</span><span class="token punctuation">,</span> <span class="token string">'ä»²'</span><span class="token punctuation">,</span> <span class="token string">'å¸Œ'</span><span class="token punctuation">,</span> <span class="token string">'èŠ¬'</span><span class="token punctuation">,</span> <span class="token string">'é›¨'</span><span class="token punctuation">,</span>    <span class="token string">'ç‘¶'</span><span class="token punctuation">,</span> <span class="token string">'ç¿”'</span><span class="token punctuation">,</span> <span class="token string">'ç«'</span><span class="token punctuation">,</span> <span class="token string">'é“­'</span><span class="token punctuation">,</span> <span class="token string">'èŠ'</span><span class="token punctuation">,</span> <span class="token string">'ä¸œ'</span><span class="token punctuation">,</span> <span class="token string">'å®š'</span><span class="token punctuation">,</span> <span class="token string">'ç’‹'</span><span class="token punctuation">,</span> <span class="token string">'æ„'</span><span class="token punctuation">,</span> <span class="token string">'æ±Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'é–'</span><span class="token punctuation">,</span> <span class="token string">'æ°‘'</span><span class="token punctuation">,</span> <span class="token string">'æ˜“'</span><span class="token punctuation">,</span> <span class="token string">'å¦‚'</span><span class="token punctuation">,</span> <span class="token string">'æ·³'</span><span class="token punctuation">,</span> <span class="token string">'å…‰'</span><span class="token punctuation">,</span> <span class="token string">'å‘'</span><span class="token punctuation">,</span> <span class="token string">'å¯'</span><span class="token punctuation">,</span> <span class="token string">'ä¿'</span><span class="token punctuation">,</span> <span class="token string">'ä¿Š'</span><span class="token punctuation">,</span> <span class="token string">'ç¤¼'</span><span class="token punctuation">,</span> <span class="token string">'é½'</span><span class="token punctuation">,</span>    <span class="token string">'åº†'</span><span class="token punctuation">,</span> <span class="token string">'è°š'</span><span class="token punctuation">,</span> <span class="token string">'é¦™'</span><span class="token punctuation">,</span> <span class="token string">'å¯Œ'</span><span class="token punctuation">,</span> <span class="token string">'å¦¤'</span><span class="token punctuation">,</span> <span class="token string">'å®œ'</span><span class="token punctuation">,</span> <span class="token string">'å¼˜'</span><span class="token punctuation">,</span> <span class="token string">'å­¦'</span><span class="token punctuation">,</span> <span class="token string">'æ±‰'</span><span class="token punctuation">,</span> <span class="token string">'æ”¿'</span><span class="token punctuation">,</span> <span class="token string">'ä»¥'</span><span class="token punctuation">,</span> <span class="token string">'ä¼¶'</span><span class="token punctuation">,</span> <span class="token string">'å‹‡'</span><span class="token punctuation">,</span> <span class="token string">'ç»®'</span><span class="token punctuation">,</span> <span class="token string">'å‡¡'</span><span class="token punctuation">,</span> <span class="token string">'å‰'</span><span class="token punctuation">,</span> <span class="token string">'æ¢…'</span><span class="token punctuation">,</span> <span class="token string">'æ…ˆ'</span><span class="token punctuation">,</span> <span class="token string">'å®¹'</span><span class="token punctuation">,</span> <span class="token string">'æ˜'</span><span class="token punctuation">,</span> <span class="token string">'è£'</span><span class="token punctuation">,</span> <span class="token string">'è'</span><span class="token punctuation">,</span>    <span class="token string">'è´'</span><span class="token punctuation">,</span> <span class="token string">'å¨Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'ä¿¡'</span><span class="token punctuation">,</span> <span class="token string">'é’'</span><span class="token punctuation">,</span> <span class="token string">'çš“'</span><span class="token punctuation">,</span> <span class="token string">'é›ª'</span><span class="token punctuation">,</span> <span class="token string">'æ²»'</span><span class="token punctuation">,</span> <span class="token string">'ç³'</span><span class="token punctuation">,</span> <span class="token string">'ç´«'</span><span class="token punctuation">,</span> <span class="token string">'å…°'</span><span class="token punctuation">,</span> <span class="token string">'ç™½'</span><span class="token punctuation">,</span> <span class="token string">'å©·'</span><span class="token punctuation">,</span> <span class="token string">'è¹'</span><span class="token punctuation">,</span> <span class="token string">'å˜‰'</span><span class="token punctuation">,</span> <span class="token string">'æ­'</span><span class="token punctuation">,</span> <span class="token string">'è±'</span><span class="token punctuation">,</span> <span class="token string">'é¡º'</span><span class="token punctuation">,</span> <span class="token string">'è¡Œ'</span><span class="token punctuation">,</span> <span class="token string">'çª'</span><span class="token punctuation">,</span> <span class="token string">'å¿µ'</span><span class="token punctuation">,</span> <span class="token string">'å®‡'</span><span class="token punctuation">,</span> <span class="token string">'æµ·'</span><span class="token punctuation">,</span>    <span class="token string">'åš'</span><span class="token punctuation">,</span> <span class="token string">'ç¦'</span><span class="token punctuation">,</span> <span class="token string">'ç»'</span><span class="token punctuation">,</span> <span class="token string">'æ¡‚'</span><span class="token punctuation">]</span><span class="token comment"># ç”Ÿæˆ10000ä¸ªäººå</span><span class="token keyword">for</span> WJ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">:</span><span class="token comment"># for WJ in range(1, 10001):</span>    <span class="token comment"># åå­—æ ¼å¼</span>    name <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>listf<span class="token punctuation">)</span> <span class="token operator">+</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>listm<span class="token punctuation">)</span> <span class="token operator">+</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>listl<span class="token punctuation">)</span>    <span class="token comment"># æ‰“å¼€æ–‡ä»¶,(a+)è¿½åŠ å†…å®¹</span>    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'file.txt'</span><span class="token punctuation">,</span> <span class="token string">'a+'</span><span class="token punctuation">)</span>    <span class="token comment"># å†™å…¥æ ¼å¼</span>    f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>    <span class="token comment"># å…³é—­æ–‡ä»¶</span>    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ•°æ®åˆ†æ"><a href="#æ•°æ®åˆ†æ" class="headerlink" title="æ•°æ®åˆ†æ "></a><font size=5><strong>æ•°æ®åˆ†æ</strong> </font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># _*_ coding: utf-8 _*_</span><span class="token keyword">from</span> collections <span class="token keyword">import</span> Counter<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt<span class="token keyword">import</span> matplotlib<span class="token keyword">from</span> time <span class="token keyword">import</span> <span class="token operator">*</span>time1 <span class="token operator">=</span> time<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># è®¾ç½®å›¾ç‰‡å­—ä½“</span>matplotlib<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.family'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'SimHei'</span><span class="token comment"># æ‰“å¼€æ–‡ä»¶,(r)è¯»å–å†…å®¹</span>f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'D:/PyCharm/1211/file.txt'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">)</span><span class="token comment"># å°†è¯»å–çš„å†…å®¹å­˜å…¥å˜é‡</span><span class="token builtin">str</span> <span class="token operator">=</span> f<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment"># æ ¼å¼åŒ–æˆå­—å…¸</span>b <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>Counter<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment"># æ˜¾ç¤ºé‡å¤æ¬¡æ•°è¶…è¿‡50çš„äººå</span><span class="token comment"># print(&#123;key:value for key,value in b.items()if value > 50&#125;) </span><span class="token comment"># æ•´ç†æ’åº,(reverse=True)æŒ‰ä»å¤§åˆ°å°æ’åº</span>res <span class="token operator">=</span> <span class="token builtin">sorted</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> b<span class="token punctuation">:</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> reverse<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token comment"># å–å‰å</span>df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>res<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># æ ¼å¼åŒ–æ‰“å°æ ¼å¼</span><span class="token comment"># df2 = pd.DataFrame(&#123;"åå­—": df[0], "æ¬¡æ•°": df[1]&#125;)</span><span class="token comment"># æ‰“å°åå­—å’Œé‡å¤æ¬¡æ•°</span><span class="token comment"># print(df2)</span><span class="token comment"># x,yè½´çš„å†…å®¹,ä»¥åˆ—è¡¨çš„å½¢å¼èµ‹å€¼</span>x <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>y <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment"># x,yè½´çš„åæ ‡ç³»åç§°å­—ä½“çš„å¤§å°çš„è®¾å®š</span>plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">'åå­—'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">'é‡å¤æ¬¡æ•°'</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token comment"># è®¾ç½®x,yè½´çš„æ¡å½¢å›¾ä¿¡æ¯,å®½åº¦,é¢œè‰²ç­‰</span>plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token operator">=</span><span class="token number">0.6</span><span class="token punctuation">,</span> facecolor<span class="token operator">=</span><span class="token string">'orange'</span><span class="token punctuation">,</span> edgecolor<span class="token operator">=</span><span class="token string">'black'</span><span class="token punctuation">)</span><span class="token comment"># ä¼ å€¼,æŠŠx,yåˆ—è¡¨çš„'å€¼'å¯¼å…¥åˆ°åæ ‡ç³»</span><span class="token keyword">for</span> a<span class="token punctuation">,</span> b <span class="token keyword">in</span> <span class="token builtin">zip</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>    plt<span class="token punctuation">.</span>text<span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token operator">+</span> <span class="token number">0.05</span><span class="token punctuation">,</span> <span class="token string">'%.0f'</span> <span class="token operator">%</span> b<span class="token punctuation">,</span> ha<span class="token operator">=</span><span class="token string">'center'</span><span class="token punctuation">,</span> va<span class="token operator">=</span><span class="token string">'bottom'</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token comment"># ç”Ÿæˆçš„å›¾ç‰‡ä¿¡æ¯</span>file_name <span class="token operator">=</span> <span class="token string">"é‡åæ¬¡æ•°ç»Ÿè®¡å›¾.jpg"</span>plt<span class="token punctuation">.</span>title<span class="token punctuation">(</span><span class="token string">"é‡åæ¬¡æ•°ç»Ÿè®¡å›¾"</span><span class="token punctuation">)</span>plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span>file_name<span class="token punctuation">)</span>plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>time2 <span class="token operator">=</span> time<span class="token punctuation">(</span><span class="token punctuation">)</span>time3 <span class="token operator">=</span> time2 <span class="token operator">-</span> time1<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'è¯¥å¾ªç¯ç¨‹åºè¿è¡Œæ—¶é—´: '</span><span class="token punctuation">,</span> time3<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æŸ¥çœ‹å›¾ç‰‡"><a href="#æŸ¥çœ‹å›¾ç‰‡" class="headerlink" title="æŸ¥çœ‹å›¾ç‰‡ "></a><font size=5><strong>æŸ¥çœ‹å›¾ç‰‡</strong> </font></h2><p><img src="/medias/drawing-bed/python0/0.jpg" alt="é‡åæ¬¡æ•°ç»Ÿè®¡å›¾.jpg"></p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLé€ æ•°æ®--å­¦ä¹ </title>
      <link href="/posts/2cc1.html"/>
      <url>/posts/2cc1.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h2 id="åˆ›å»ºæ•°æ®åº“å’Œè¡¨"><a href="#åˆ›å»ºæ•°æ®åº“å’Œè¡¨" class="headerlink" title="åˆ›å»ºæ•°æ®åº“å’Œè¡¨ "></a><font size=5><strong>åˆ›å»ºæ•°æ®åº“å’Œè¡¨</strong> </font></h2><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment"># sqlè¯­å¥</span><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">`</span>school<span class="token punctuation">`</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> <span class="token string">'utf8'</span> <span class="token keyword">COLLATE</span> <span class="token string">'utf8_bin'</span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>school<span class="token punctuation">`</span><span class="token punctuation">.</span><span class="token punctuation">`</span>student<span class="token punctuation">`</span>  <span class="token punctuation">(</span>  <span class="token punctuation">`</span>name<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_bin <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>gender<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_bin <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>age<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>cclass<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8 <span class="token keyword">COLLATE</span> utf8_bin <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>yuwen<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>shuxue<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>english<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token punctuation">`</span>total<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å¯¼å…¥æ•°æ®"><a href="#å¯¼å…¥æ•°æ®" class="headerlink" title="å¯¼å…¥æ•°æ® "></a><font size=5><strong>å¯¼å…¥æ•°æ®</strong> </font></h2><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment"># @Time     : 2019/12/9 17:23</span><span class="token comment"># @Author   : wangjun</span><span class="token comment"># @Mail     : 158970251@qq.com</span><span class="token comment"># @File     : mysql.py</span><span class="token comment"># @Software : PyCharm</span><span class="token comment"># _*_ coding: utf-8 _*_</span><span class="token keyword">import</span> pymysql<span class="token keyword">import</span> random<span class="token keyword">from</span> time <span class="token keyword">import</span> <span class="token operator">*</span><span class="token comment"># å§“</span>listf <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'ç‹'</span><span class="token punctuation">,</span> <span class="token string">'æ'</span><span class="token punctuation">,</span> <span class="token string">'å¼ '</span><span class="token punctuation">,</span> <span class="token string">'åˆ˜'</span><span class="token punctuation">,</span> <span class="token string">'é™ˆ'</span><span class="token punctuation">,</span> <span class="token string">'æ¨'</span><span class="token punctuation">,</span> <span class="token string">'é»„'</span><span class="token punctuation">,</span> <span class="token string">'èµµ'</span><span class="token punctuation">,</span> <span class="token string">'å´'</span><span class="token punctuation">,</span> <span class="token string">'å‘¨'</span><span class="token punctuation">,</span> <span class="token string">'å¾'</span><span class="token punctuation">,</span> <span class="token string">'å­™'</span><span class="token punctuation">,</span> <span class="token string">'é©¬'</span><span class="token punctuation">,</span> <span class="token string">'æœ±'</span><span class="token punctuation">,</span> <span class="token string">'èƒ¡'</span><span class="token punctuation">,</span> <span class="token string">'éƒ­'</span><span class="token punctuation">,</span> <span class="token string">'ä½•'</span><span class="token punctuation">,</span> <span class="token string">'é«˜'</span><span class="token punctuation">,</span> <span class="token string">'æ—'</span><span class="token punctuation">,</span> <span class="token string">'ç½—'</span><span class="token punctuation">,</span>    <span class="token string">'éƒ‘'</span><span class="token punctuation">,</span> <span class="token string">'æ¢'</span><span class="token punctuation">,</span> <span class="token string">'è°¢'</span><span class="token punctuation">,</span> <span class="token string">'å®‹'</span><span class="token punctuation">,</span> <span class="token string">'å”'</span><span class="token punctuation">,</span> <span class="token string">'è®¸'</span><span class="token punctuation">,</span> <span class="token string">'éŸ©'</span><span class="token punctuation">,</span> <span class="token string">'å†¯'</span><span class="token punctuation">,</span> <span class="token string">'é‚“'</span><span class="token punctuation">,</span> <span class="token string">'æ›¹'</span><span class="token punctuation">,</span> <span class="token string">'å½­'</span><span class="token punctuation">,</span> <span class="token string">'æ›¾'</span><span class="token punctuation">,</span> <span class="token string">'è‚–'</span><span class="token punctuation">,</span> <span class="token string">'ç”°'</span><span class="token punctuation">,</span> <span class="token string">'è‘£'</span><span class="token punctuation">,</span> <span class="token string">'è¢'</span><span class="token punctuation">,</span> <span class="token string">'æ½˜'</span><span class="token punctuation">,</span> <span class="token string">'äº'</span><span class="token punctuation">,</span> <span class="token string">'è’‹'</span><span class="token punctuation">,</span> <span class="token string">'è”¡'</span><span class="token punctuation">,</span>    <span class="token string">'ä½™'</span><span class="token punctuation">,</span> <span class="token string">'æœ'</span><span class="token punctuation">,</span> <span class="token string">'å¶'</span><span class="token punctuation">,</span> <span class="token string">'ç¨‹'</span><span class="token punctuation">,</span> <span class="token string">'è‹'</span><span class="token punctuation">,</span> <span class="token string">'é­'</span><span class="token punctuation">,</span> <span class="token string">'å•'</span><span class="token punctuation">,</span> <span class="token string">'ä¸'</span><span class="token punctuation">,</span> <span class="token string">'ä»»'</span><span class="token punctuation">,</span> <span class="token string">'æ²ˆ'</span><span class="token punctuation">,</span> <span class="token string">'å§š'</span><span class="token punctuation">,</span> <span class="token string">'å¢'</span><span class="token punctuation">,</span> <span class="token string">'å§œ'</span><span class="token punctuation">,</span> <span class="token string">'å´”'</span><span class="token punctuation">,</span> <span class="token string">'é’Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'è°­'</span><span class="token punctuation">,</span> <span class="token string">'é™†'</span><span class="token punctuation">,</span> <span class="token string">'æ±ª'</span><span class="token punctuation">,</span> <span class="token string">'èŒƒ'</span><span class="token punctuation">,</span> <span class="token string">'é‡‘'</span><span class="token punctuation">,</span>    <span class="token string">'çŸ³'</span><span class="token punctuation">,</span> <span class="token string">'å»–'</span><span class="token punctuation">,</span> <span class="token string">'è´¾'</span><span class="token punctuation">,</span> <span class="token string">'å¤'</span><span class="token punctuation">,</span> <span class="token string">'éŸ¦'</span><span class="token punctuation">,</span> <span class="token string">'ä»˜'</span><span class="token punctuation">,</span> <span class="token string">'æ–¹'</span><span class="token punctuation">,</span> <span class="token string">'ç™½'</span><span class="token punctuation">,</span> <span class="token string">'é‚¹'</span><span class="token punctuation">,</span> <span class="token string">'å­Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'ç†Š'</span><span class="token punctuation">,</span> <span class="token string">'ç§¦'</span><span class="token punctuation">,</span> <span class="token string">'é‚±'</span><span class="token punctuation">,</span> <span class="token string">'æ±Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'å°¹'</span><span class="token punctuation">,</span> <span class="token string">'è–›'</span><span class="token punctuation">,</span> <span class="token string">'é—«'</span><span class="token punctuation">,</span> <span class="token string">'æ®µ'</span><span class="token punctuation">,</span> <span class="token string">'é›·'</span><span class="token punctuation">,</span> <span class="token string">'ä¾¯'</span><span class="token punctuation">,</span>    <span class="token string">'é¾™'</span><span class="token punctuation">,</span> <span class="token string">'å²'</span><span class="token punctuation">,</span> <span class="token string">'é™¶'</span><span class="token punctuation">,</span> <span class="token string">'é»'</span><span class="token punctuation">,</span> <span class="token string">'è´º'</span><span class="token punctuation">,</span> <span class="token string">'é¡¾'</span><span class="token punctuation">,</span> <span class="token string">'æ¯›'</span><span class="token punctuation">,</span> <span class="token string">'éƒ'</span><span class="token punctuation">,</span> <span class="token string">'é¾š'</span><span class="token punctuation">,</span> <span class="token string">'é‚µ'</span><span class="token punctuation">,</span> <span class="token string">'ä¸‡'</span><span class="token punctuation">,</span> <span class="token string">'é’±'</span><span class="token punctuation">,</span> <span class="token string">'ä¸¥'</span><span class="token punctuation">,</span> <span class="token string">'è¦ƒ'</span><span class="token punctuation">,</span> <span class="token string">'æ­¦'</span><span class="token punctuation">,</span> <span class="token string">'æˆ´'</span><span class="token punctuation">,</span> <span class="token string">'è«'</span><span class="token punctuation">,</span> <span class="token string">'å­”'</span><span class="token punctuation">,</span> <span class="token string">'å‘'</span><span class="token punctuation">,</span> <span class="token string">'æ±¤'</span><span class="token punctuation">]</span><span class="token comment"># ä¸­é—´ç©¿æ’çš„''æ˜¯ä¸ºäº†ç”Ÿæˆä¸¤ä¸ªå­—çš„åå­—</span>listm <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'å…°'</span><span class="token punctuation">,</span> <span class="token string">'æ—º'</span><span class="token punctuation">,</span> <span class="token string">'ç‘¶'</span><span class="token punctuation">,</span> <span class="token string">'ä»»'</span><span class="token punctuation">,</span> <span class="token string">'æ™´'</span><span class="token punctuation">,</span> <span class="token string">'é•‡'</span><span class="token punctuation">,</span> <span class="token string">'ä¹”'</span><span class="token punctuation">,</span> <span class="token string">'æ¬£'</span><span class="token punctuation">,</span> <span class="token string">'æ˜†'</span><span class="token punctuation">,</span> <span class="token string">'æ³°'</span><span class="token punctuation">,</span> <span class="token string">'ç­±'</span><span class="token punctuation">,</span> <span class="token string">'ç§‰'</span><span class="token punctuation">,</span> <span class="token string">'æ›œ'</span><span class="token punctuation">,</span> <span class="token string">'å¿ '</span><span class="token punctuation">,</span> <span class="token string">'çœŸ'</span><span class="token punctuation">,</span> <span class="token string">'å‡¯'</span><span class="token punctuation">,</span> <span class="token string">'é›¯'</span><span class="token punctuation">,</span> <span class="token string">'æ‡¿'</span><span class="token punctuation">,</span> <span class="token string">'å´‡'</span><span class="token punctuation">,</span> <span class="token string">'æˆ'</span><span class="token punctuation">,</span> <span class="token string">'é¡º'</span><span class="token punctuation">,</span> <span class="token string">'åš'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'å­Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'ç¦'</span><span class="token punctuation">,</span> <span class="token string">'å…†'</span><span class="token punctuation">,</span> <span class="token string">'ä½‘'</span><span class="token punctuation">,</span> <span class="token string">'å¥'</span><span class="token punctuation">,</span> <span class="token string">'é‡‘'</span><span class="token punctuation">,</span> <span class="token string">'å®¥'</span><span class="token punctuation">,</span> <span class="token string">'è´µ'</span><span class="token punctuation">,</span> <span class="token string">'ç››'</span><span class="token punctuation">,</span> <span class="token string">'å…ƒ'</span><span class="token punctuation">,</span> <span class="token string">'ç'</span><span class="token punctuation">,</span> <span class="token string">'è¾°'</span><span class="token punctuation">,</span> <span class="token string">'åˆ'</span><span class="token punctuation">,</span> <span class="token string">'æ…ˆ'</span><span class="token punctuation">,</span> <span class="token string">'å‹‡'</span><span class="token punctuation">,</span> <span class="token string">'ä»²'</span><span class="token punctuation">,</span> <span class="token string">'æ€'</span><span class="token punctuation">,</span> <span class="token string">'é›ª'</span><span class="token punctuation">,</span> <span class="token string">'å³'</span><span class="token punctuation">,</span> <span class="token string">'ç¼'</span><span class="token punctuation">,</span> <span class="token string">'å'</span><span class="token punctuation">,</span> <span class="token string">'å…¶'</span><span class="token punctuation">,</span>    <span class="token string">'ç«'</span><span class="token punctuation">,</span> <span class="token string">'å½¦'</span><span class="token punctuation">,</span> <span class="token string">'å®‰'</span><span class="token punctuation">,</span> <span class="token string">'å©·'</span><span class="token punctuation">,</span> <span class="token string">'æ›¼'</span><span class="token punctuation">,</span> <span class="token string">'äºˆ'</span><span class="token punctuation">,</span> <span class="token string">'æ¹–'</span><span class="token punctuation">,</span> <span class="token string">'ç»'</span><span class="token punctuation">,</span> <span class="token string">'ä¼Š'</span><span class="token punctuation">,</span> <span class="token string">'ä»¥'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'è‚²'</span><span class="token punctuation">,</span> <span class="token string">'å¤™'</span><span class="token punctuation">,</span> <span class="token string">'å¯Œ'</span><span class="token punctuation">,</span> <span class="token string">'æ­¦'</span><span class="token punctuation">,</span> <span class="token string">'å“'</span><span class="token punctuation">,</span> <span class="token string">'ç‰'</span><span class="token punctuation">,</span> <span class="token string">'é¦¨'</span><span class="token punctuation">,</span> <span class="token string">'å®¶'</span><span class="token punctuation">,</span> <span class="token string">'å±±'</span><span class="token punctuation">,</span> <span class="token string">'ç¾'</span><span class="token punctuation">,</span> <span class="token string">'ä¸€'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'å¸¸'</span><span class="token punctuation">,</span> <span class="token string">'æ‰¬'</span><span class="token punctuation">,</span> <span class="token string">'è¯š'</span><span class="token punctuation">,</span> <span class="token string">'å£«'</span><span class="token punctuation">,</span> <span class="token string">'å§¿'</span><span class="token punctuation">,</span> <span class="token string">'åŠ›'</span><span class="token punctuation">,</span> <span class="token string">'è€€'</span><span class="token punctuation">,</span> <span class="token string">'ç«£'</span><span class="token punctuation">,</span> <span class="token string">'å…'</span><span class="token punctuation">,</span> <span class="token string">'ç­ '</span><span class="token punctuation">,</span> <span class="token string">'ç‘œ'</span><span class="token punctuation">,</span> <span class="token string">'èˆœ'</span><span class="token punctuation">,</span> <span class="token string">'æ˜Œ'</span><span class="token punctuation">,</span> <span class="token string">'å†°'</span><span class="token punctuation">,</span> <span class="token string">'è¡Œ'</span><span class="token punctuation">,</span> <span class="token string">'æ™“'</span><span class="token punctuation">,</span> <span class="token string">'è½©'</span><span class="token punctuation">,</span> <span class="token string">'ä¹‰'</span><span class="token punctuation">,</span> <span class="token string">'çº¬'</span><span class="token punctuation">,</span> <span class="token string">'æ·‘'</span><span class="token punctuation">,</span> <span class="token string">'è£'</span><span class="token punctuation">,</span> <span class="token string">'æµ·'</span><span class="token punctuation">,</span>    <span class="token string">'å‘ˆ'</span><span class="token punctuation">,</span> <span class="token string">'ç´ '</span><span class="token punctuation">,</span> <span class="token string">'ä¹‹'</span><span class="token punctuation">,</span> <span class="token string">'ç¢§'</span><span class="token punctuation">,</span> <span class="token string">'éŸ¦'</span><span class="token punctuation">,</span> <span class="token string">'å³»'</span><span class="token punctuation">,</span> <span class="token string">'æ™'</span><span class="token punctuation">,</span> <span class="token string">'èƒœ'</span><span class="token punctuation">,</span> <span class="token string">'è£•'</span><span class="token punctuation">,</span> <span class="token string">'æƒ '</span><span class="token punctuation">,</span> <span class="token string">'å­'</span><span class="token punctuation">,</span> <span class="token string">'æ˜­'</span><span class="token punctuation">,</span> <span class="token string">'éª'</span><span class="token punctuation">,</span> <span class="token string">'èŠ³'</span><span class="token punctuation">,</span> <span class="token string">'å‡¡'</span><span class="token punctuation">,</span> <span class="token string">'ç™½'</span><span class="token punctuation">,</span> <span class="token string">'æ­'</span><span class="token punctuation">,</span> <span class="token string">'å¼˜'</span><span class="token punctuation">,</span> <span class="token string">'æ˜'</span><span class="token punctuation">,</span> <span class="token string">'å…´'</span><span class="token punctuation">,</span> <span class="token string">'åš'</span><span class="token punctuation">,</span> <span class="token string">'ç´«'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'å©‰'</span><span class="token punctuation">,</span> <span class="token string">'èŠ'</span><span class="token punctuation">,</span> <span class="token string">'å°'</span><span class="token punctuation">,</span> <span class="token string">'å­'</span><span class="token punctuation">,</span> <span class="token string">'ç¿Š'</span><span class="token punctuation">,</span> <span class="token string">'ä¹'</span><span class="token punctuation">,</span> <span class="token string">'å¦‚'</span><span class="token punctuation">,</span> <span class="token string">'å§µ'</span><span class="token punctuation">,</span> <span class="token string">'ç®'</span><span class="token punctuation">,</span> <span class="token string">'æ™º'</span><span class="token punctuation">,</span> <span class="token string">'æƒŸ'</span><span class="token punctuation">,</span> <span class="token string">'æ·»'</span><span class="token punctuation">,</span> <span class="token string">'æ—»'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'ä¸œ'</span><span class="token punctuation">,</span> <span class="token string">'æ·³'</span><span class="token punctuation">,</span> <span class="token string">'æŸ'</span><span class="token punctuation">,</span> <span class="token string">'æ²›'</span><span class="token punctuation">,</span> <span class="token string">'åˆ'</span><span class="token punctuation">,</span> <span class="token string">'å›½'</span><span class="token punctuation">,</span> <span class="token string">'å®£'</span><span class="token punctuation">,</span> <span class="token string">'ç›Š'</span><span class="token punctuation">,</span>    <span class="token string">'ä¼¯'</span><span class="token punctuation">,</span> <span class="token string">'é•¿'</span><span class="token punctuation">,</span> <span class="token string">'äº'</span><span class="token punctuation">,</span> <span class="token string">'å¹³'</span><span class="token punctuation">,</span> <span class="token string">'ç»¿'</span><span class="token punctuation">,</span> <span class="token string">'ç»´'</span><span class="token punctuation">,</span> <span class="token string">'èˆ’'</span><span class="token punctuation">,</span> <span class="token string">'å¦¤'</span><span class="token punctuation">,</span> <span class="token string">'å—'</span><span class="token punctuation">,</span> <span class="token string">'æ˜±'</span><span class="token punctuation">,</span> <span class="token string">'å®‡'</span><span class="token punctuation">,</span> <span class="token string">'å²³'</span><span class="token punctuation">,</span> <span class="token string">'æ©'</span><span class="token punctuation">,</span> <span class="token string">'ç¤¼'</span><span class="token punctuation">,</span> <span class="token string">'ç¾¤'</span><span class="token punctuation">,</span> <span class="token string">'ä½©'</span><span class="token punctuation">,</span> <span class="token string">'å†›'</span><span class="token punctuation">,</span> <span class="token string">'ç’‡'</span><span class="token punctuation">,</span> <span class="token string">'æ–‡'</span><span class="token punctuation">,</span> <span class="token string">'å’'</span><span class="token punctuation">,</span> <span class="token string">'ä»‹'</span><span class="token punctuation">,</span> <span class="token string">'å–œ'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'æ¯…'</span><span class="token punctuation">,</span> <span class="token string">'å›'</span><span class="token punctuation">,</span> <span class="token string">'åŠ­'</span><span class="token punctuation">,</span> <span class="token string">'å˜‰'</span><span class="token punctuation">,</span> <span class="token string">'è‚‡'</span><span class="token punctuation">,</span> <span class="token string">'æ³•'</span><span class="token punctuation">,</span> <span class="token string">'é€¸'</span><span class="token punctuation">,</span> <span class="token string">'æ²»'</span><span class="token punctuation">,</span> <span class="token string">'ä¸‡'</span><span class="token punctuation">,</span> <span class="token string">'æ¾'</span><span class="token punctuation">,</span> <span class="token string">'æ°´'</span><span class="token punctuation">,</span> <span class="token string">'æµ©'</span><span class="token punctuation">,</span> <span class="token string">'è¹'</span><span class="token punctuation">,</span> <span class="token string">'æ™¯'</span><span class="token punctuation">,</span> <span class="token string">'èŒ‚'</span><span class="token punctuation">,</span> <span class="token string">'ç»®'</span><span class="token punctuation">,</span> <span class="token string">'è“‰'</span><span class="token punctuation">,</span> <span class="token string">'è–‡'</span><span class="token punctuation">,</span> <span class="token string">'éƒ'</span><span class="token punctuation">,</span> <span class="token string">'ä¿'</span><span class="token punctuation">,</span> <span class="token string">'å’Œ'</span><span class="token punctuation">,</span> <span class="token string">'å¤'</span><span class="token punctuation">,</span>    <span class="token string">'æ¯“'</span><span class="token punctuation">,</span> <span class="token string">'å‡'</span><span class="token punctuation">,</span> <span class="token string">'æ¢¦'</span><span class="token punctuation">,</span> <span class="token string">'åŸ¹'</span><span class="token punctuation">,</span> <span class="token string">'ä¸'</span><span class="token punctuation">,</span> <span class="token string">'å»·'</span><span class="token punctuation">,</span> <span class="token string">'ä¹ƒ'</span><span class="token punctuation">,</span> <span class="token string">'å‹‹'</span><span class="token punctuation">,</span> <span class="token string">'ç™»'</span><span class="token punctuation">,</span> <span class="token string">'çˆ±'</span><span class="token punctuation">,</span> <span class="token string">'æ¢…'</span><span class="token punctuation">,</span> <span class="token string">'åƒ'</span><span class="token punctuation">,</span> <span class="token string">'ä¹¦'</span><span class="token punctuation">,</span> <span class="token string">'æ¬¢'</span><span class="token punctuation">,</span> <span class="token string">'ç‡'</span><span class="token punctuation">,</span> <span class="token string">'å¿µ'</span><span class="token punctuation">,</span> <span class="token string">'çŸ'</span><span class="token punctuation">,</span> <span class="token string">'ç§‹'</span><span class="token punctuation">,</span> <span class="token string">'é¢–'</span><span class="token punctuation">,</span> <span class="token string">'å¾—'</span><span class="token punctuation">,</span> <span class="token string">'æ˜Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'æ±Ÿ'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'å®¹'</span><span class="token punctuation">,</span> <span class="token string">'æ˜ '</span><span class="token punctuation">,</span> <span class="token string">'å¾·'</span><span class="token punctuation">,</span> <span class="token string">'æ€¡'</span><span class="token punctuation">,</span> <span class="token string">'èŒ¹'</span><span class="token punctuation">,</span> <span class="token string">'ä»ª'</span><span class="token punctuation">,</span> <span class="token string">'å„’'</span><span class="token punctuation">,</span> <span class="token string">'æ°'</span><span class="token punctuation">,</span> <span class="token string">'å“²'</span><span class="token punctuation">,</span> <span class="token string">'æ±‰'</span><span class="token punctuation">,</span> <span class="token string">'åˆš'</span><span class="token punctuation">,</span> <span class="token string">'å¨‡'</span><span class="token punctuation">,</span> <span class="token string">'ä¿®'</span><span class="token punctuation">,</span> <span class="token string">'æ—­'</span><span class="token punctuation">,</span> <span class="token string">'æ¡‚'</span><span class="token punctuation">,</span> <span class="token string">'é›¨'</span><span class="token punctuation">,</span> <span class="token string">'ä»•'</span><span class="token punctuation">,</span> <span class="token string">'è‰'</span><span class="token punctuation">,</span> <span class="token string">'å…‹'</span><span class="token punctuation">,</span> <span class="token string">'ä½³'</span><span class="token punctuation">,</span> <span class="token string">'çŠ'</span><span class="token punctuation">,</span> <span class="token string">'é˜¿'</span><span class="token punctuation">,</span>    <span class="token string">'ç§€'</span><span class="token punctuation">,</span> <span class="token string">'å°š'</span><span class="token punctuation">,</span> <span class="token string">'å°§'</span><span class="token punctuation">,</span> <span class="token string">'æ™‹'</span><span class="token punctuation">,</span> <span class="token string">'æ¹˜'</span><span class="token punctuation">,</span> <span class="token string">'ä¿'</span><span class="token punctuation">,</span> <span class="token string">'æ˜¥'</span><span class="token punctuation">,</span> <span class="token string">'è™¹'</span><span class="token punctuation">,</span> <span class="token string">'ç‘'</span><span class="token punctuation">,</span> <span class="token string">'ç™¾'</span><span class="token punctuation">,</span> <span class="token string">'ç³'</span><span class="token punctuation">,</span> <span class="token string">'è¯­'</span><span class="token punctuation">,</span> <span class="token string">'é˜³'</span><span class="token punctuation">,</span> <span class="token string">'æœ¨'</span><span class="token punctuation">,</span> <span class="token string">'å»º'</span><span class="token punctuation">,</span> <span class="token string">'ä¸°'</span><span class="token punctuation">,</span> <span class="token string">'çª'</span><span class="token punctuation">,</span> <span class="token string">'è´¢'</span><span class="token punctuation">,</span> <span class="token string">'è‹±'</span><span class="token punctuation">,</span> <span class="token string">'æ…§'</span><span class="token punctuation">,</span> <span class="token string">'é–'</span><span class="token punctuation">,</span> <span class="token string">'è'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'è‹¥'</span><span class="token punctuation">,</span> <span class="token string">'å¤§'</span><span class="token punctuation">,</span> <span class="token string">'åŸ'</span><span class="token punctuation">,</span> <span class="token string">'å©•'</span><span class="token punctuation">,</span> <span class="token string">'æ„'</span><span class="token punctuation">,</span> <span class="token string">'å±•'</span><span class="token punctuation">,</span> <span class="token string">'å·§'</span><span class="token punctuation">,</span> <span class="token string">'äºº'</span><span class="token punctuation">,</span> <span class="token string">'åŸ'</span><span class="token punctuation">,</span> <span class="token string">'ç«¹'</span><span class="token punctuation">,</span> <span class="token string">'é‡'</span><span class="token punctuation">,</span> <span class="token string">'é¸¿'</span><span class="token punctuation">,</span> <span class="token string">'æ•¬'</span><span class="token punctuation">,</span> <span class="token string">'ä¾'</span><span class="token punctuation">,</span> <span class="token string">'è¿›'</span><span class="token punctuation">,</span> <span class="token string">'å°'</span><span class="token punctuation">,</span> <span class="token string">'å·¦'</span><span class="token punctuation">,</span> <span class="token string">'äº¦'</span><span class="token punctuation">,</span> <span class="token string">'éŸµ'</span><span class="token punctuation">,</span> <span class="token string">'é’°'</span><span class="token punctuation">,</span> <span class="token string">'æ–°'</span><span class="token punctuation">,</span> <span class="token string">'ç¾½'</span><span class="token punctuation">,</span>    <span class="token string">'é™'</span><span class="token punctuation">,</span> <span class="token string">'å'</span><span class="token punctuation">,</span> <span class="token string">'ä¸­'</span><span class="token punctuation">,</span> <span class="token string">'ä»'</span><span class="token punctuation">,</span> <span class="token string">'é‡‡'</span><span class="token punctuation">,</span> <span class="token string">'äº­'</span><span class="token punctuation">,</span> <span class="token string">'å¦™'</span><span class="token punctuation">,</span> <span class="token string">'å¸Œ'</span><span class="token punctuation">,</span> <span class="token string">'å¿…'</span><span class="token punctuation">,</span> <span class="token string">'æ‰¿'</span><span class="token punctuation">,</span> <span class="token string">'è±ª'</span><span class="token punctuation">,</span> <span class="token string">'å‰'</span><span class="token punctuation">,</span> <span class="token string">'èŠ·'</span><span class="token punctuation">,</span> <span class="token string">'ä¸Š'</span><span class="token punctuation">,</span> <span class="token string">'çŸ³'</span><span class="token punctuation">,</span> <span class="token string">'å† '</span><span class="token punctuation">,</span> <span class="token string">'å¨'</span><span class="token punctuation">,</span> <span class="token string">'åˆ'</span><span class="token punctuation">,</span> <span class="token string">'è¾›'</span><span class="token punctuation">,</span> <span class="token string">'å¥•'</span><span class="token punctuation">,</span> <span class="token string">'é›…'</span><span class="token punctuation">,</span> <span class="token string">'æ³“'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'ä¼¶'</span><span class="token punctuation">,</span> <span class="token string">'ç«'</span><span class="token punctuation">,</span> <span class="token string">'å®š'</span><span class="token punctuation">,</span> <span class="token string">'ä¸–'</span><span class="token punctuation">,</span> <span class="token string">'çš“'</span><span class="token punctuation">,</span> <span class="token string">'å'</span><span class="token punctuation">,</span> <span class="token string">'èŠ¸'</span><span class="token punctuation">,</span> <span class="token string">'æ”¿'</span><span class="token punctuation">,</span> <span class="token string">'æ´'</span><span class="token punctuation">,</span> <span class="token string">'ç¥¥'</span><span class="token punctuation">,</span> <span class="token string">'æ¸…'</span><span class="token punctuation">,</span> <span class="token string">'å…‰'</span><span class="token punctuation">,</span> <span class="token string">'è´'</span><span class="token punctuation">,</span> <span class="token string">'ç¿ '</span><span class="token punctuation">,</span> <span class="token string">'çº¯'</span><span class="token punctuation">,</span> <span class="token string">'ä¼Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'æŒ¯'</span><span class="token punctuation">,</span> <span class="token string">'åº­'</span><span class="token punctuation">,</span> <span class="token string">'æ˜“'</span><span class="token punctuation">,</span> <span class="token string">'é¦™'</span><span class="token punctuation">,</span> <span class="token string">'æ°¸'</span><span class="token punctuation">,</span> <span class="token string">'çš‡'</span><span class="token punctuation">,</span>    <span class="token string">'èŒœ'</span><span class="token punctuation">,</span> <span class="token string">'è‰¯'</span><span class="token punctuation">,</span> <span class="token string">'æ•'</span><span class="token punctuation">,</span> <span class="token string">'ç‡•'</span><span class="token punctuation">,</span> <span class="token string">'ä¿Š'</span><span class="token punctuation">,</span> <span class="token string">'æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'æ°‘'</span><span class="token punctuation">,</span> <span class="token string">'éš†'</span><span class="token punctuation">,</span> <span class="token string">'ä¾‘'</span><span class="token punctuation">,</span> <span class="token string">'è¯—'</span><span class="token punctuation">,</span> <span class="token string">'å¿ƒ'</span><span class="token punctuation">,</span> <span class="token string">'å‹'</span><span class="token punctuation">,</span> <span class="token string">'è‡´'</span><span class="token punctuation">,</span> <span class="token string">'è´¤'</span><span class="token punctuation">,</span> <span class="token string">'å®›'</span><span class="token punctuation">,</span> <span class="token string">'å¥‡'</span><span class="token punctuation">,</span> <span class="token string">'ç²'</span><span class="token punctuation">,</span> <span class="token string">'å¿—'</span><span class="token punctuation">,</span> <span class="token string">'å®ª'</span><span class="token punctuation">,</span> <span class="token string">'å¯'</span><span class="token punctuation">,</span> <span class="token string">'äºš'</span><span class="token punctuation">,</span> <span class="token string">'ç›ˆ'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span>    <span class="token string">'ç¿'</span><span class="token punctuation">,</span> <span class="token string">'æ¶µ'</span><span class="token punctuation">,</span> <span class="token string">'æŸ”'</span><span class="token punctuation">,</span> <span class="token string">'è±'</span><span class="token punctuation">,</span> <span class="token string">'æ˜€'</span><span class="token punctuation">,</span> <span class="token string">'ä¼¦'</span><span class="token punctuation">,</span> <span class="token string">'å‡'</span><span class="token punctuation">,</span> <span class="token string">'å­£'</span><span class="token punctuation">,</span> <span class="token string">'ç®'</span><span class="token punctuation">,</span> <span class="token string">'å‡¤'</span><span class="token punctuation">,</span> <span class="token string">'å–„'</span><span class="token punctuation">,</span> <span class="token string">'äº‘'</span><span class="token punctuation">,</span> <span class="token string">'ç¥¯'</span><span class="token punctuation">,</span> <span class="token string">'å¹¸'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'å¯'</span><span class="token punctuation">,</span> <span class="token string">'ä¿¡'</span><span class="token punctuation">,</span> <span class="token string">'å¤©'</span><span class="token punctuation">,</span> <span class="token string">'å®—'</span><span class="token punctuation">,</span> <span class="token string">'å®œ'</span><span class="token punctuation">,</span> <span class="token string">'å¿†'</span><span class="token punctuation">,</span> <span class="token string">'åº·'</span><span class="token punctuation">,</span>    <span class="token string">'ç¿°'</span><span class="token punctuation">,</span> <span class="token string">'æ­£'</span><span class="token punctuation">,</span> <span class="token string">'ä¸½'</span><span class="token punctuation">,</span> <span class="token string">'ç¿”'</span><span class="token punctuation">,</span> <span class="token string">'å°‘'</span><span class="token punctuation">,</span> <span class="token string">'æœ'</span><span class="token punctuation">,</span> <span class="token string">'å€©'</span><span class="token punctuation">,</span> <span class="token string">'åœ£'</span><span class="token punctuation">,</span> <span class="token string">'é’§'</span><span class="token punctuation">,</span> <span class="token string">'ç¬'</span><span class="token punctuation">,</span> <span class="token string">'é“­'</span><span class="token punctuation">,</span> <span class="token string">'å­¦'</span><span class="token punctuation">,</span> <span class="token string">'å¹¼'</span><span class="token punctuation">,</span> <span class="token string">'ç«‹'</span><span class="token punctuation">,</span> <span class="token string">'è•™'</span><span class="token punctuation">,</span> <span class="token string">'é’'</span><span class="token punctuation">,</span> <span class="token string">'æ'</span><span class="token punctuation">,</span> <span class="token string">'åº†'</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">]</span><span class="token comment"># å</span>listl <span class="token operator">=</span> <span class="token punctuation">[</span>    <span class="token string">'ç››'</span><span class="token punctuation">,</span> <span class="token string">'æ–Œ'</span><span class="token punctuation">,</span> <span class="token string">'é“ƒ'</span><span class="token punctuation">,</span> <span class="token string">'å³°'</span><span class="token punctuation">,</span> <span class="token string">'å¿—'</span><span class="token punctuation">,</span> <span class="token string">'åŸ'</span><span class="token punctuation">,</span> <span class="token string">'è²'</span><span class="token punctuation">,</span> <span class="token string">'æ‰¬'</span><span class="token punctuation">,</span> <span class="token string">'å…¨'</span><span class="token punctuation">,</span> <span class="token string">'èŒ‚'</span><span class="token punctuation">,</span> <span class="token string">'è¾°'</span><span class="token punctuation">,</span> <span class="token string">'å½°'</span><span class="token punctuation">,</span> <span class="token string">'è‡»'</span><span class="token punctuation">,</span> <span class="token string">'ç«¹'</span><span class="token punctuation">,</span> <span class="token string">'ç¿°'</span><span class="token punctuation">,</span> <span class="token string">'é™'</span><span class="token punctuation">,</span> <span class="token string">'å¦¹'</span><span class="token punctuation">,</span> <span class="token string">'éœ–'</span><span class="token punctuation">,</span> <span class="token string">'æ·»'</span><span class="token punctuation">,</span> <span class="token string">'åŸ'</span><span class="token punctuation">,</span> <span class="token string">'å»·'</span><span class="token punctuation">,</span> <span class="token string">'æ­£'</span><span class="token punctuation">,</span>    <span class="token string">'å¥‡'</span><span class="token punctuation">,</span> <span class="token string">'å¹³'</span><span class="token punctuation">,</span> <span class="token string">'å®‰'</span><span class="token punctuation">,</span> <span class="token string">'æŸ”'</span><span class="token punctuation">,</span> <span class="token string">'æ¯“'</span><span class="token punctuation">,</span> <span class="token string">'è´µ'</span><span class="token punctuation">,</span> <span class="token string">'å®ª'</span><span class="token punctuation">,</span> <span class="token string">'æ€¡'</span><span class="token punctuation">,</span> <span class="token string">'ç§‹'</span><span class="token punctuation">,</span> <span class="token string">'èŒœ'</span><span class="token punctuation">,</span> <span class="token string">'å’Œ'</span><span class="token punctuation">,</span> <span class="token string">'ç‰'</span><span class="token punctuation">,</span> <span class="token string">'æ³‰'</span><span class="token punctuation">,</span> <span class="token string">'ç'</span><span class="token punctuation">,</span> <span class="token string">'å­£'</span><span class="token punctuation">,</span> <span class="token string">'å¨‡'</span><span class="token punctuation">,</span> <span class="token string">'ç›ˆ'</span><span class="token punctuation">,</span> <span class="token string">'è“‰'</span><span class="token punctuation">,</span> <span class="token string">'ä»ª'</span><span class="token punctuation">,</span> <span class="token string">'ç¾¤'</span><span class="token punctuation">,</span> <span class="token string">'å‡'</span><span class="token punctuation">,</span> <span class="token string">'å¿ '</span><span class="token punctuation">,</span>    <span class="token string">'æ…§'</span><span class="token punctuation">,</span> <span class="token string">'ç¿'</span><span class="token punctuation">,</span> <span class="token string">'å†›'</span><span class="token punctuation">,</span> <span class="token string">'å‹'</span><span class="token punctuation">,</span> <span class="token string">'å¨'</span><span class="token punctuation">,</span> <span class="token string">'äº‘'</span><span class="token punctuation">,</span> <span class="token string">'ç²'</span><span class="token punctuation">,</span> <span class="token string">'åº·'</span><span class="token punctuation">,</span> <span class="token string">'å½¬'</span><span class="token punctuation">,</span> <span class="token string">'é›…'</span><span class="token punctuation">,</span> <span class="token string">'å‹‹'</span><span class="token punctuation">,</span> <span class="token string">'ä¸°'</span><span class="token punctuation">,</span> <span class="token string">'å¸†'</span><span class="token punctuation">,</span> <span class="token string">'å›'</span><span class="token punctuation">,</span> <span class="token string">'ç´'</span><span class="token punctuation">,</span> <span class="token string">'æ¯…'</span><span class="token punctuation">,</span> <span class="token string">'ç«'</span><span class="token punctuation">,</span> <span class="token string">'ç’‡'</span><span class="token punctuation">,</span> <span class="token string">'æ·‘'</span><span class="token punctuation">,</span> <span class="token string">'ç§€'</span><span class="token punctuation">,</span> <span class="token string">'ç¦'</span><span class="token punctuation">,</span> <span class="token string">'ç®'</span><span class="token punctuation">,</span>    <span class="token string">'åª›'</span><span class="token punctuation">,</span> <span class="token string">'é€¸'</span><span class="token punctuation">,</span> <span class="token string">'åš'</span><span class="token punctuation">,</span> <span class="token string">'ç­‘'</span><span class="token punctuation">,</span> <span class="token string">'ç»´'</span><span class="token punctuation">,</span> <span class="token string">'éŸ¦'</span><span class="token punctuation">,</span> <span class="token string">'å‡'</span><span class="token punctuation">,</span> <span class="token string">'æ˜Œ'</span><span class="token punctuation">,</span> <span class="token string">'æ¬£'</span><span class="token punctuation">,</span> <span class="token string">'åˆ'</span><span class="token punctuation">,</span> <span class="token string">'å¼º'</span><span class="token punctuation">,</span> <span class="token string">'æ³•'</span><span class="token punctuation">,</span> <span class="token string">'å†°'</span><span class="token punctuation">,</span> <span class="token string">'å…¶'</span><span class="token punctuation">,</span> <span class="token string">'æ˜€'</span><span class="token punctuation">,</span> <span class="token string">'å¿ƒ'</span><span class="token punctuation">,</span> <span class="token string">'æƒ '</span><span class="token punctuation">,</span> <span class="token string">'ç”„'</span><span class="token punctuation">,</span> <span class="token string">'è–‡'</span><span class="token punctuation">,</span> <span class="token string">'æ—º'</span><span class="token punctuation">,</span> <span class="token string">'çº¬'</span><span class="token punctuation">,</span> <span class="token string">'å—'</span><span class="token punctuation">,</span>    <span class="token string">'è¾›'</span><span class="token punctuation">,</span> <span class="token string">'ä¼¯'</span><span class="token punctuation">,</span> <span class="token string">'å‡¤'</span><span class="token punctuation">,</span> <span class="token string">'ç¥¥'</span><span class="token punctuation">,</span> <span class="token string">'å€©'</span><span class="token punctuation">,</span> <span class="token string">'èˆœ'</span><span class="token punctuation">,</span> <span class="token string">'è±'</span><span class="token punctuation">,</span> <span class="token string">'è‹±'</span><span class="token punctuation">,</span> <span class="token string">'ç¾'</span><span class="token punctuation">,</span> <span class="token string">'è™¹'</span><span class="token punctuation">,</span> <span class="token string">'æ¾'</span><span class="token punctuation">,</span> <span class="token string">'æ˜Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'è¾‰'</span><span class="token punctuation">,</span> <span class="token string">'å…ƒ'</span><span class="token punctuation">,</span> <span class="token string">'åœ£'</span><span class="token punctuation">,</span> <span class="token string">'éš†'</span><span class="token punctuation">,</span> <span class="token string">'é¾™'</span><span class="token punctuation">,</span> <span class="token string">'èŠ±'</span><span class="token punctuation">,</span> <span class="token string">'è‹¹'</span><span class="token punctuation">,</span> <span class="token string">'ç­ '</span><span class="token punctuation">,</span> <span class="token string">'ä»»'</span><span class="token punctuation">,</span> <span class="token string">'çº¶'</span><span class="token punctuation">,</span>    <span class="token string">'å²š'</span><span class="token punctuation">,</span> <span class="token string">'å¦ƒ'</span><span class="token punctuation">,</span> <span class="token string">'æ˜†'</span><span class="token punctuation">,</span> <span class="token string">'è´¤'</span><span class="token punctuation">,</span> <span class="token string">'ç”Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'ç‘„'</span><span class="token punctuation">,</span> <span class="token string">'è°¦'</span><span class="token punctuation">,</span> <span class="token string">'å…´'</span><span class="token punctuation">,</span> <span class="token string">'ä¼Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'æ²›'</span><span class="token punctuation">,</span> <span class="token string">'é¦¨'</span><span class="token punctuation">,</span> <span class="token string">'ç®'</span><span class="token punctuation">,</span> <span class="token string">'è“'</span><span class="token punctuation">,</span> <span class="token string">'è•™'</span><span class="token punctuation">,</span> <span class="token string">'é’°'</span><span class="token punctuation">,</span> <span class="token string">'æ°'</span><span class="token punctuation">,</span> <span class="token string">'åŠ­'</span><span class="token punctuation">,</span> <span class="token string">'æ—­'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'åº­'</span><span class="token punctuation">,</span> <span class="token string">'å¤'</span><span class="token punctuation">,</span>    <span class="token string">'è½©'</span><span class="token punctuation">,</span> <span class="token string">'ä¿®'</span><span class="token punctuation">,</span> <span class="token string">'èŠ¸'</span><span class="token punctuation">,</span> <span class="token string">'ä½³'</span><span class="token punctuation">,</span> <span class="token string">'æœˆ'</span><span class="token punctuation">,</span> <span class="token string">'æ¡¦'</span><span class="token punctuation">,</span> <span class="token string">'æ¥'</span><span class="token punctuation">,</span> <span class="token string">'éœ'</span><span class="token punctuation">,</span> <span class="token string">'å­œ'</span><span class="token punctuation">,</span> <span class="token string">'ä¹'</span><span class="token punctuation">,</span> <span class="token string">'è¾¾'</span><span class="token punctuation">,</span> <span class="token string">'æ•'</span><span class="token punctuation">,</span> <span class="token string">'å–„'</span><span class="token punctuation">,</span> <span class="token string">'äº¦'</span><span class="token punctuation">,</span> <span class="token string">'è¶…'</span><span class="token punctuation">,</span> <span class="token string">'é’§'</span><span class="token punctuation">,</span> <span class="token string">'å¤©'</span><span class="token punctuation">,</span> <span class="token string">'ç¾½'</span><span class="token punctuation">,</span> <span class="token string">'åˆš'</span><span class="token punctuation">,</span> <span class="token string">'ç»¿'</span><span class="token punctuation">,</span> <span class="token string">'çˆ±'</span><span class="token punctuation">,</span> <span class="token string">'çº¯'</span><span class="token punctuation">,</span>    <span class="token string">'ä¾‘'</span><span class="token punctuation">,</span> <span class="token string">'å£«'</span><span class="token punctuation">,</span> <span class="token string">'å'</span><span class="token punctuation">,</span> <span class="token string">'é›¯'</span><span class="token punctuation">,</span> <span class="token string">'ä¹‰'</span><span class="token punctuation">,</span> <span class="token string">'äºš'</span><span class="token punctuation">,</span> <span class="token string">'ç¬'</span><span class="token punctuation">,</span> <span class="token string">'èŠ·'</span><span class="token punctuation">,</span> <span class="token string">'å°§'</span><span class="token punctuation">,</span> <span class="token string">'ä¼¦'</span><span class="token punctuation">,</span> <span class="token string">'æ–°'</span><span class="token punctuation">,</span> <span class="token string">'ä¹”'</span><span class="token punctuation">,</span> <span class="token string">'é›„'</span><span class="token punctuation">,</span> <span class="token string">'æ´'</span><span class="token punctuation">,</span> <span class="token string">'å¹¸'</span><span class="token punctuation">,</span> <span class="token string">'å¨¥'</span><span class="token punctuation">,</span> <span class="token string">'æ©'</span><span class="token punctuation">,</span> <span class="token string">'çŸ'</span><span class="token punctuation">,</span> <span class="token string">'ä¹¦'</span><span class="token punctuation">,</span> <span class="token string">'æƒŸ'</span><span class="token punctuation">,</span> <span class="token string">'æ³°'</span><span class="token punctuation">,</span> <span class="token string">'ç‘œ'</span><span class="token punctuation">,</span>    <span class="token string">'çŠ'</span><span class="token punctuation">,</span> <span class="token string">'è¿œ'</span><span class="token punctuation">,</span> <span class="token string">'æ™´'</span><span class="token punctuation">,</span> <span class="token string">'å½¦'</span><span class="token punctuation">,</span> <span class="token string">'å“²'</span><span class="token punctuation">,</span> <span class="token string">'ç‘'</span><span class="token punctuation">,</span> <span class="token string">'ç‡'</span><span class="token punctuation">,</span> <span class="token string">'æ™º'</span><span class="token punctuation">,</span> <span class="token string">'æ˜ '</span><span class="token punctuation">,</span> <span class="token string">'ç '</span><span class="token punctuation">,</span> <span class="token string">'é¸¿'</span><span class="token punctuation">,</span> <span class="token string">'æ¢¦'</span><span class="token punctuation">,</span> <span class="token string">'ç‡•'</span><span class="token punctuation">,</span> <span class="token string">'äºº'</span><span class="token punctuation">,</span> <span class="token string">'æ˜¥'</span><span class="token punctuation">,</span> <span class="token string">'å„’'</span><span class="token punctuation">,</span> <span class="token string">'å¿'</span><span class="token punctuation">,</span> <span class="token string">'ä½©'</span><span class="token punctuation">,</span> <span class="token string">'ç¥¯'</span><span class="token punctuation">,</span> <span class="token string">'è‰¯'</span><span class="token punctuation">,</span> <span class="token string">'æ¸…'</span><span class="token punctuation">,</span> <span class="token string">'æ¬¢'</span><span class="token punctuation">,</span>    <span class="token string">'ä¸­'</span><span class="token punctuation">,</span> <span class="token string">'éºŸ'</span><span class="token punctuation">,</span> <span class="token string">'éª'</span><span class="token punctuation">,</span> <span class="token string">'å²³'</span><span class="token punctuation">,</span> <span class="token string">'è´¢'</span><span class="token punctuation">,</span> <span class="token string">'èŠ³'</span><span class="token punctuation">,</span> <span class="token string">'è¯š'</span><span class="token punctuation">,</span> <span class="token string">'æ–‡'</span><span class="token punctuation">,</span> <span class="token string">'çœŸ'</span><span class="token punctuation">,</span> <span class="token string">'æŸ'</span><span class="token punctuation">,</span> <span class="token string">'æ¹–'</span><span class="token punctuation">,</span> <span class="token string">'è'</span><span class="token punctuation">,</span> <span class="token string">'ç”·'</span><span class="token punctuation">,</span> <span class="token string">'ä¸€'</span><span class="token punctuation">,</span> <span class="token string">'ä½‘'</span><span class="token punctuation">,</span> <span class="token string">'é¢–'</span><span class="token punctuation">,</span> <span class="token string">'é˜³'</span><span class="token punctuation">,</span> <span class="token string">'æ°´'</span><span class="token punctuation">,</span> <span class="token string">'æ'</span><span class="token punctuation">,</span> <span class="token string">'èŒ¹'</span><span class="token punctuation">,</span> <span class="token string">'å¾·'</span><span class="token punctuation">,</span> <span class="token string">'è±ª'</span><span class="token punctuation">,</span>    <span class="token string">'è°•'</span><span class="token punctuation">,</span> <span class="token string">'å'</span><span class="token punctuation">,</span> <span class="token string">'è£•'</span><span class="token punctuation">,</span> <span class="token string">'å±±'</span><span class="token punctuation">,</span> <span class="token string">'å­'</span><span class="token punctuation">,</span> <span class="token string">'ä¾'</span><span class="token punctuation">,</span> <span class="token string">'æœ¨'</span><span class="token punctuation">,</span> <span class="token string">'å®£'</span><span class="token punctuation">,</span> <span class="token string">'æ¶µ'</span><span class="token punctuation">,</span> <span class="token string">'å‡¯'</span><span class="token punctuation">,</span> <span class="token string">'æº'</span><span class="token punctuation">,</span> <span class="token string">'éŸµ'</span><span class="token punctuation">,</span> <span class="token string">'æˆ'</span><span class="token punctuation">,</span> <span class="token string">'è‚²'</span><span class="token punctuation">,</span> <span class="token string">'å–œ'</span><span class="token punctuation">,</span> <span class="token string">'å®'</span><span class="token punctuation">,</span> <span class="token string">'éƒ'</span><span class="token punctuation">,</span> <span class="token string">'ä»'</span><span class="token punctuation">,</span> <span class="token string">'ä»²'</span><span class="token punctuation">,</span> <span class="token string">'å¸Œ'</span><span class="token punctuation">,</span> <span class="token string">'èŠ¬'</span><span class="token punctuation">,</span> <span class="token string">'é›¨'</span><span class="token punctuation">,</span>    <span class="token string">'ç‘¶'</span><span class="token punctuation">,</span> <span class="token string">'ç¿”'</span><span class="token punctuation">,</span> <span class="token string">'ç«'</span><span class="token punctuation">,</span> <span class="token string">'é“­'</span><span class="token punctuation">,</span> <span class="token string">'èŠ'</span><span class="token punctuation">,</span> <span class="token string">'ä¸œ'</span><span class="token punctuation">,</span> <span class="token string">'å®š'</span><span class="token punctuation">,</span> <span class="token string">'ç’‹'</span><span class="token punctuation">,</span> <span class="token string">'æ„'</span><span class="token punctuation">,</span> <span class="token string">'æ±Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'é–'</span><span class="token punctuation">,</span> <span class="token string">'æ°‘'</span><span class="token punctuation">,</span> <span class="token string">'æ˜“'</span><span class="token punctuation">,</span> <span class="token string">'å¦‚'</span><span class="token punctuation">,</span> <span class="token string">'æ·³'</span><span class="token punctuation">,</span> <span class="token string">'å…‰'</span><span class="token punctuation">,</span> <span class="token string">'å‘'</span><span class="token punctuation">,</span> <span class="token string">'å¯'</span><span class="token punctuation">,</span> <span class="token string">'ä¿'</span><span class="token punctuation">,</span> <span class="token string">'ä¿Š'</span><span class="token punctuation">,</span> <span class="token string">'ç¤¼'</span><span class="token punctuation">,</span> <span class="token string">'é½'</span><span class="token punctuation">,</span>    <span class="token string">'åº†'</span><span class="token punctuation">,</span> <span class="token string">'è°š'</span><span class="token punctuation">,</span> <span class="token string">'é¦™'</span><span class="token punctuation">,</span> <span class="token string">'å¯Œ'</span><span class="token punctuation">,</span> <span class="token string">'å¦¤'</span><span class="token punctuation">,</span> <span class="token string">'å®œ'</span><span class="token punctuation">,</span> <span class="token string">'å¼˜'</span><span class="token punctuation">,</span> <span class="token string">'å­¦'</span><span class="token punctuation">,</span> <span class="token string">'æ±‰'</span><span class="token punctuation">,</span> <span class="token string">'æ”¿'</span><span class="token punctuation">,</span> <span class="token string">'ä»¥'</span><span class="token punctuation">,</span> <span class="token string">'ä¼¶'</span><span class="token punctuation">,</span> <span class="token string">'å‹‡'</span><span class="token punctuation">,</span> <span class="token string">'ç»®'</span><span class="token punctuation">,</span> <span class="token string">'å‡¡'</span><span class="token punctuation">,</span> <span class="token string">'å‰'</span><span class="token punctuation">,</span> <span class="token string">'æ¢…'</span><span class="token punctuation">,</span> <span class="token string">'æ…ˆ'</span><span class="token punctuation">,</span> <span class="token string">'å®¹'</span><span class="token punctuation">,</span> <span class="token string">'æ˜'</span><span class="token punctuation">,</span> <span class="token string">'è£'</span><span class="token punctuation">,</span> <span class="token string">'è'</span><span class="token punctuation">,</span>    <span class="token string">'è´'</span><span class="token punctuation">,</span> <span class="token string">'å¨Ÿ'</span><span class="token punctuation">,</span> <span class="token string">'ä¿¡'</span><span class="token punctuation">,</span> <span class="token string">'é’'</span><span class="token punctuation">,</span> <span class="token string">'çš“'</span><span class="token punctuation">,</span> <span class="token string">'é›ª'</span><span class="token punctuation">,</span> <span class="token string">'æ²»'</span><span class="token punctuation">,</span> <span class="token string">'ç³'</span><span class="token punctuation">,</span> <span class="token string">'ç´«'</span><span class="token punctuation">,</span> <span class="token string">'å…°'</span><span class="token punctuation">,</span> <span class="token string">'ç™½'</span><span class="token punctuation">,</span> <span class="token string">'å©·'</span><span class="token punctuation">,</span> <span class="token string">'è¹'</span><span class="token punctuation">,</span> <span class="token string">'å˜‰'</span><span class="token punctuation">,</span> <span class="token string">'æ­'</span><span class="token punctuation">,</span> <span class="token string">'è±'</span><span class="token punctuation">,</span> <span class="token string">'é¡º'</span><span class="token punctuation">,</span> <span class="token string">'è¡Œ'</span><span class="token punctuation">,</span> <span class="token string">'çª'</span><span class="token punctuation">,</span> <span class="token string">'å¿µ'</span><span class="token punctuation">,</span> <span class="token string">'å®‡'</span><span class="token punctuation">,</span> <span class="token string">'æµ·'</span><span class="token punctuation">,</span>    <span class="token string">'åš'</span><span class="token punctuation">,</span> <span class="token string">'ç¦'</span><span class="token punctuation">,</span> <span class="token string">'ç»'</span><span class="token punctuation">,</span> <span class="token string">'æ¡‚'</span><span class="token punctuation">]</span><span class="token comment"># æ•°æ®åº“ç±»</span><span class="token keyword">class</span> <span class="token class-name">Wdatabases</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>__db_host <span class="token operator">=</span> <span class="token string">"192.168.236.128"</span>        self<span class="token punctuation">.</span>__db_port <span class="token operator">=</span> <span class="token number">3306</span>        self<span class="token punctuation">.</span>__db_user <span class="token operator">=</span> <span class="token string">"root"</span>        self<span class="token punctuation">.</span>__db_password <span class="token operator">=</span> <span class="token string">"YjUzZjg0NTU1OWViM2I5ZTM1ZWE0NWZj"</span>        self<span class="token punctuation">.</span>__db_database <span class="token operator">=</span> <span class="token string">"school"</span>    <span class="token comment"># é“¾æ¥æ•°æ®åº“</span>    <span class="token keyword">def</span> <span class="token function">Wlink</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        self<span class="token punctuation">.</span>__db <span class="token operator">=</span> pymysql<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>            host<span class="token operator">=</span>self<span class="token punctuation">.</span>__db_host<span class="token punctuation">,</span>            port<span class="token operator">=</span>self<span class="token punctuation">.</span>__db_port<span class="token punctuation">,</span>            user<span class="token operator">=</span>self<span class="token punctuation">.</span>__db_user<span class="token punctuation">,</span>            password<span class="token operator">=</span>self<span class="token punctuation">.</span>__db_password<span class="token punctuation">,</span>            database<span class="token operator">=</span>self<span class="token punctuation">.</span>__db_database<span class="token punctuation">,</span>            charset<span class="token operator">=</span><span class="token string">'utf8'</span>        <span class="token punctuation">)</span>    <span class="token comment"># æ’å…¥æ•°æ®</span>    <span class="token keyword">def</span> <span class="token function">Winsert</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> ages<span class="token punctuation">,</span> cclass<span class="token punctuation">,</span> yuwen<span class="token punctuation">,</span> shuxue<span class="token punctuation">,</span> english<span class="token punctuation">,</span> total<span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token keyword">try</span><span class="token punctuation">:</span>            <span class="token comment"># è¿æ¥æ•°æ®åº“</span>            self<span class="token punctuation">.</span>Wlink<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># åˆ›å»ºæ¸¸æ ‡</span>            <span class="token keyword">global</span> cursor            cursor <span class="token operator">=</span> self<span class="token punctuation">.</span>__db<span class="token punctuation">.</span>cursor<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># sqlå‘½ä»¤</span>            sql <span class="token operator">=</span> <span class="token string">"insert into student(name,gender,age,cclass,yuwen,shuxue,english, total) value(%s,%s,%s,%s,%s,%s,"</span> \                  <span class="token string">"%s,%s)"</span>            <span class="token comment"># æ‰§è¡Œsqlå‘½ä»¤</span>            cursor<span class="token punctuation">.</span>execute<span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> ages<span class="token punctuation">,</span> cclass<span class="token punctuation">,</span> yuwen<span class="token punctuation">,</span> shuxue<span class="token punctuation">,</span> english<span class="token punctuation">,</span> total<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>            <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>        <span class="token keyword">finally</span><span class="token punctuation">:</span>            <span class="token comment"># å…³é—­æ¸¸æ ‡</span>            cursor<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># æäº¤</span>            self<span class="token punctuation">.</span>__db<span class="token punctuation">.</span>commit<span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment"># å…³é—­æ•°æ®åº“è¿æ¥</span>            self<span class="token punctuation">.</span>__db<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æ•°æ®ç”Ÿæˆå§“å, å¹´é¾„, ç­‰å¹¶è°ƒç”¨æ•°æ®æ’å…¥æ–¹æ³•</span>    <span class="token keyword">def</span> <span class="token function">Wcommit</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>        name <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>listf<span class="token punctuation">)</span> <span class="token operator">+</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>listm<span class="token punctuation">)</span> <span class="token operator">+</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span>listf<span class="token punctuation">)</span>        age <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span>        yuwen <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>        shuxue <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>        english <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>        gender <span class="token operator">=</span> random<span class="token punctuation">.</span>choice<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token string">'ç”·'</span><span class="token punctuation">,</span> <span class="token string">'å¥³'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        total <span class="token operator">=</span> yuwen <span class="token operator">+</span> shuxue <span class="token operator">+</span> english        cclass <span class="token operator">=</span> random<span class="token punctuation">.</span>randint<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>        <span class="token comment"># cclass = random.choice(('ä¸€', 'äºŒ', 'ä¸‰'))</span>        self<span class="token punctuation">.</span>Winsert<span class="token punctuation">(</span>name<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> age<span class="token punctuation">,</span> cclass<span class="token punctuation">,</span> yuwen<span class="token punctuation">,</span> shuxue<span class="token punctuation">,</span> english<span class="token punctuation">,</span> total<span class="token punctuation">)</span><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>    å¼€å§‹æ—¶é—´ <span class="token operator">=</span> time<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># åˆ›å»ºå®ä¾‹åŒ–å¯¹è±¡</span>    db <span class="token operator">=</span> Wdatabases<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment"># æ’å…¥100æ¡æ•°æ®</span>    <span class="token keyword">for</span> WJ <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        <span class="token comment"># è°ƒç”¨æ–¹æ³•</span>        db<span class="token punctuation">.</span>Wcommit<span class="token punctuation">(</span><span class="token punctuation">)</span>    ç»“æŸæ—¶é—´ <span class="token operator">=</span> time<span class="token punctuation">(</span><span class="token punctuation">)</span>    è¿è¡Œæ—¶é—´ <span class="token operator">=</span> ç»“æŸæ—¶é—´ <span class="token operator">-</span> å¼€å§‹æ—¶é—´    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'è¯¥å¾ªç¯ç¨‹åºè¿è¡Œæ—¶é—´: '</span><span class="token punctuation">,</span> è¿è¡Œæ—¶é—´<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æŸ¥çœ‹è¿è¡Œæ—¶é—´"><a href="#æŸ¥çœ‹è¿è¡Œæ—¶é—´" class="headerlink" title="æŸ¥çœ‹è¿è¡Œæ—¶é—´ "></a><font size=5><strong>æŸ¥çœ‹è¿è¡Œæ—¶é—´</strong> </font></h2><p>&emsp;&emsp;(æˆ‘ç”¨çš„æ˜¯pycharmè½¯ä»¶,å¯ä»¥ç›´æ¥å¤åˆ¶åˆ°MySQLæœåŠ¡å™¨,è¿è¡Œ.pyæ–‡ä»¶)</p><pre class="line-numbers language-powershell" data-language="powershell"><code class="language-powershell">D:\PyCharm\venv\Scripts\python<span class="token punctuation">.</span>exe <span class="token string">"F:\PyCharm 2019.2.3\helpers\pydev\pydevconsole.py"</span> <span class="token operator">--</span>mode=client <span class="token operator">--</span>port=62152import sys<span class="token punctuation">;</span> print<span class="token punctuation">(</span><span class="token string">'Python %s on %s'</span> <span class="token operator">%</span> <span class="token punctuation">(</span>sys<span class="token punctuation">.</span>version<span class="token punctuation">,</span> sys<span class="token punctuation">.</span>platform<span class="token punctuation">)</span><span class="token punctuation">)</span>sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'D:\\PyCharm'</span><span class="token punctuation">,</span> <span class="token string">'D:/PyCharm'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>PyDev console: starting<span class="token punctuation">.</span>Python 3<span class="token punctuation">.</span>7<span class="token punctuation">.</span>0 <span class="token punctuation">(</span>v3<span class="token punctuation">.</span>7<span class="token punctuation">.</span>0:1bf9cc5093<span class="token punctuation">,</span> Jun 27 2018<span class="token punctuation">,</span> 04:59:51<span class="token punctuation">)</span> <span class="token namespace">[MSC v.1914 64 bit (AMD64)]</span> on win32>>> runfile<span class="token punctuation">(</span><span class="token string">'D:/PyCharm/1209/mysql.py'</span><span class="token punctuation">,</span> wdir=<span class="token string">'D:/PyCharm/1209'</span><span class="token punctuation">)</span>è¯¥å¾ªç¯ç¨‹åºè¿è¡Œæ—¶é—´:  0<span class="token punctuation">.</span>7610917091369629<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å­¦ä¹ ç¬”è®° </tag>
            
            <tag> mysql </tag>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker-ce å®‰è£…</title>
      <link href="/posts/1bf7.html"/>
      <url>/posts/1bf7.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="çº¦å®š"><a href="#çº¦å®š" class="headerlink" title="çº¦å®š"></a><font size=5><strong>çº¦å®š</strong></font></h1><p>&emsp;&emsp;ç³»ç»ŸUbuntu 18.04.3 LTS</p><h1 id="ä¿®æ”¹é˜¿é‡Œäº‘aptæº"><a href="#ä¿®æ”¹é˜¿é‡Œäº‘aptæº" class="headerlink" title="ä¿®æ”¹é˜¿é‡Œäº‘aptæº"></a><font size=5><strong>ä¿®æ”¹é˜¿é‡Œäº‘aptæº</strong></font></h1><p>&emsp;&emsp;å¦‚æœä½ æ˜¯æŒ‰ç…§æœ¬åšå®¢Ubuntuå®‰è£…è§†é¢‘å®‰è£…çš„Ubuntuç³»ç»Ÿ,åˆ™ä¸ç”¨ä¿®æ”¹aptæº</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wang@wujiops:/etc/apt$ <span class="token function">sudo</span> <span class="token function">mv</span> /etc/apt/sources.list /etc/apt/sources.old   <span class="token comment"># å¤‡ä»½æ—§çš„aptæº</span>wang@wujiops:/etc/apt$ <span class="token function">cat</span> sources.list   <span class="token comment"># æ–°çš„aptæº</span><span class="token comment"># See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to</span><span class="token comment"># newer versions of the distribution.</span>deb http://mirrors.aliyun.com/ubuntu bionic main restricted<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu bionic main restricted</span><span class="token comment">## Major bug fix updates produced after the final release of the</span><span class="token comment">## distribution.</span>deb http://mirrors.aliyun.com/ubuntu bionic-updates main restricted<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu bionic-updates main restricted</span><span class="token comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span><span class="token comment">## team. Also, please note that software in universe WILL NOT receive any</span><span class="token comment">## review or updates from the Ubuntu security team.</span>deb http://mirrors.aliyun.com/ubuntu bionic universe<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu bionic universe</span>deb http://mirrors.aliyun.com/ubuntu bionic-updates universe<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu bionic-updates universe</span><span class="token comment">## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu</span><span class="token comment">## team, and may not be under a free licence. Please satisfy yourself as to</span><span class="token comment">## your rights to use the software. Also, please note that software in</span><span class="token comment">## multiverse WILL NOT receive any review or updates from the Ubuntu</span><span class="token comment">## security team.</span>deb http://mirrors.aliyun.com/ubuntu bionic multiverse<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu bionic multiverse</span>deb http://mirrors.aliyun.com/ubuntu bionic-updates multiverse<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu bionic-updates multiverse</span><span class="token comment">## N.B. software from this repository may not have been tested as</span><span class="token comment">## extensively as that contained in the main release, although it includes</span><span class="token comment">## newer versions of some applications which may provide useful features.</span><span class="token comment">## Also, please note that software in backports WILL NOT receive any review</span><span class="token comment">## or updates from the Ubuntu security team.</span>deb http://mirrors.aliyun.com/ubuntu bionic-backports main restricted universe multiverse<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu bionic-backports main restricted universe multiverse</span><span class="token comment">## Uncomment the following two lines to add software from Canonical's</span><span class="token comment">## 'partner' repository.</span><span class="token comment">## This software is not part of Ubuntu, but is offered by Canonical and the</span><span class="token comment">## respective vendors as a service to Ubuntu users.</span><span class="token comment"># deb http://archive.canonical.com/ubuntu bionic partner</span><span class="token comment"># deb-src http://archive.canonical.com/ubuntu bionic partner</span>deb http://mirrors.aliyun.com/ubuntu bionic-security main restricted<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu bionic-security main restricted</span>deb http://mirrors.aliyun.com/ubuntu bionic-security universe<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu bionic-security universe</span>deb http://mirrors.aliyun.com/ubuntu bionic-security multiverse<span class="token comment"># deb-src http://mirrors.aliyun.com/ubuntu bionic-security multiverse</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="é…ç½®Ubuntu-docker-ce-é˜¿é‡Œäº‘aptæº"><a href="#é…ç½®Ubuntu-docker-ce-é˜¿é‡Œäº‘aptæº" class="headerlink" title="é…ç½®Ubuntu docker-ce é˜¿é‡Œäº‘aptæº"></a><font size=5><strong>é…ç½®Ubuntu docker-ce é˜¿é‡Œäº‘aptæº</strong></font></h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wang@wujiops:/etc/apt$ <span class="token function">sudo</span> <span class="token function">apt-get</span> update   <span class="token comment"># æ›´æ–°aptæº</span>wang@wujiops:/etc/apt$ <span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> apt-transport-https ca-certificates <span class="token function">curl</span> software-properties-common   <span class="token comment"># å®‰è£…ç³»ç»Ÿå·¥å…·</span>wang@wujiops:/etc/apt$ <span class="token function">curl</span> -fsSL http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -   <span class="token comment"># æ·»åŠ GPGè¯ä¹¦</span>wang@wujiops:/etc/apt$ <span class="token function">sudo</span> add-apt-repository <span class="token string">"deb [arch=amd64] http://mirrors.aliyun.com/docker-ce/linux/ubuntu <span class="token variable"><span class="token variable">$(</span>lsb_release -cs<span class="token variable">)</span></span> stable"</span>   <span class="token comment"># è®¾ç½®Ubuntuçš„docker-ceçš„é˜¿é‡Œäº‘aptæº</span>wang@wujiops:/etc/apt$ <span class="token function">sudo</span> <span class="token function">apt-get</span> -y update   <span class="token comment"># æ›´æ–°aptæº</span>wang@wujiops:/etc/apt$ <span class="token function">sudo</span> <span class="token function">apt-get</span> -y <span class="token function">install</span> docker-ce   <span class="token comment"># å®‰è£…docker-ce</span><span class="token comment">#**å®‰è£…æŒ‡å®šç‰ˆæœ¬**</span>wang@wujiops:/etc/apt$ <span class="token function">apt-cache</span> madison docker-ce   <span class="token comment"># æŸ¥çœ‹docker-ceç‰ˆæœ¬</span> docker-ce <span class="token operator">|</span> <span class="token number">5</span>:19.03.5~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:19.03.4~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:19.03.3~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:19.03.2~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:19.03.1~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:19.03.0~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.9~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.8~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.7~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.6~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.5~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.4~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.3~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.2~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.1~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">5</span>:18.09.0~3-0~ubuntu-bionic <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">18.06</span>.3~ce~3-0~ubuntu <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">18.06</span>.2~ce~3-0~ubuntu <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">18.06</span>.1~ce~3-0~ubuntu <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">18.06</span>.0~ce~3-0~ubuntu <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages docker-ce <span class="token operator">|</span> <span class="token number">18.03</span>.1~ce~3-0~ubuntu <span class="token operator">|</span> http://mirrors.aliyun.com/docker-ce/linux/ubuntu bionic/stable amd64 Packages<span class="token comment"># å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„docker-ce: (VERSION=19.03.5~3-0~ubuntu-bionic)</span><span class="token comment"># wang@wujiops:/etc/apt$ sudo apt-get -y install docker-ce=[VERSION]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="å®‰è£…å’Œæ ¡éªŒ"><a href="#å®‰è£…å’Œæ ¡éªŒ" class="headerlink" title="å®‰è£…å’Œæ ¡éªŒ"></a><font size=5><strong>å®‰è£…å’Œæ ¡éªŒ</strong></font></h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">wang@wujiops:~$ <span class="token function">sudo</span> docker version   <span class="token comment"># æŸ¥çœ‹docker-ceç‰ˆæœ¬</span>Client: Docker Engine - Community Version:           <span class="token number">19.03</span>.5 API version:       <span class="token number">1.40</span> Go version:        go1.12.12 Git commit:        633a0ea838 Built:             Wed Nov <span class="token number">13</span> 07:29:52 <span class="token number">2019</span> OS/Arch:           linux/amd64 Experimental:      <span class="token boolean">false</span>Server: Docker Engine - Community Engine:  Version:          <span class="token number">19.03</span>.5  API version:      <span class="token number">1.40</span> <span class="token punctuation">(</span>minimum version <span class="token number">1.12</span><span class="token punctuation">)</span>  Go version:       go1.12.12  Git commit:       633a0ea838  Built:            Wed Nov <span class="token number">13</span> 07:28:22 <span class="token number">2019</span>  OS/Arch:          linux/amd64  Experimental:     <span class="token boolean">false</span> containerd:  Version:          <span class="token number">1.2</span>.10  GitCommit:        b34a5c8af56e510852c35414db4c1f4fa6172339 runc:  Version:          <span class="token number">1.0</span>.0-rc8+dev  GitCommit:        3e425f80a8c931f88e6d94a8c831b9d5aa481657 docker-init:  Version:          <span class="token number">0.18</span>.0  GitCommit:        fec3683<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="centos-7-å®‰è£…docker-ce"><a href="#centos-7-å®‰è£…docker-ce" class="headerlink" title="centos 7 å®‰è£…docker-ce"></a>centos 7 å®‰è£…docker-ce</h1><h2 id="å…³é—­firewalldå’Œselinux"><a href="#å…³é—­firewalldå’Œselinux" class="headerlink" title="å…³é—­firewalldå’Œselinux"></a>å…³é—­firewalldå’Œselinux</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl stop firewalldsystemctl disable firewalldsetenforce <span class="token number">0</span><span class="token function">sed</span> -i <span class="token string">'s/enforcing$/disabled/g'</span> /etc/selinux/config<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum <span class="token function">install</span> -y yum-utils device-mapper-persistent-data lvm2<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å¢åŠ aliyun-dockeryumæº"><a href="#å¢åŠ aliyun-dockeryumæº" class="headerlink" title="å¢åŠ aliyun dockeryumæº"></a>å¢åŠ aliyun dockeryumæº</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="å®‰è£…å¯åŠ¨"><a href="#å®‰è£…å¯åŠ¨" class="headerlink" title="å®‰è£…å¯åŠ¨"></a>å®‰è£…å¯åŠ¨</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum makecache fast   <span class="token comment"># å»ºç«‹ç¼“å­˜</span>yum -y <span class="token function">install</span> docker-ce<span class="token function">service</span> docker start<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="docker-pullåŠ é€Ÿ"><a href="#docker-pullåŠ é€Ÿ" class="headerlink" title="docker pullåŠ é€Ÿ"></a>docker pullåŠ é€Ÿ</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> -p /etc/docker<span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'&#123;  "registry-mirrors": ["https://fogd2pyo.mirror.aliyuncs.com"]&#125;EOF</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="é‡å¯docker"><a href="#é‡å¯docker" class="headerlink" title="é‡å¯docker"></a>é‡å¯docker</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl daemon-reload   <span class="token comment"># åŠ è½½é…ç½®</span>systemctl restart docker<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> wujiops </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> ubuntu </tag>
            
            <tag> centos </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ubuntu 18 å®‰è£…</title>
      <link href="/posts/e57b.html"/>
      <url>/posts/e57b.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="çº¦å®š"><a href="#çº¦å®š" class="headerlink" title="çº¦å®š"></a><font size=6><strong>çº¦å®š</strong></font></h1><p>&emsp;&emsp;VMware ç‰ˆæœ¬ 15.5.1 <a href="https://my.vmware.com/cn/web/vmware/details?downloadGroup=WKST-1551-WIN&productId=799&rPId=39513" title="VMwareç‰ˆæœ¬15.5.1 build-15018445">build-15018445</a><br>&emsp;&emsp;Ubuntu18 ç‰ˆæœ¬ <a href="http://mirror.bytemark.co.uk/ubuntu-releases/18.04.3/ubuntu-18.04.3-live-server-amd64.iso" title="ubuntu-18.04.3-live-server-amd64.iso">ubuntu-18.04.3-live-server-amd64</a>  </p><h2 id="Ubuntu18å®‰è£…"><a href="#Ubuntu18å®‰è£…" class="headerlink" title="Ubuntu18å®‰è£…"></a><font size=5><strong>Ubuntu18å®‰è£…</strong></font></h2><iframe height="600" width="800" src="//player.bilibili.com/player.html?aid=78488013&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h3 id="æ–°å»ºè™šæ‹Ÿæœº-é€‰æ‹©å…¸å‹"><a href="#æ–°å»ºè™šæ‹Ÿæœº-é€‰æ‹©å…¸å‹" class="headerlink" title="æ–°å»ºè™šæ‹Ÿæœº,é€‰æ‹©å…¸å‹"></a><font size=4><strong>æ–°å»ºè™šæ‹Ÿæœº,é€‰æ‹©å…¸å‹</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/0.jpg"></p><h3 id="é€‰æ‹©ä¸‹è½½å¥½çš„Ubuntu18-serveré•œåƒ"><a href="#é€‰æ‹©ä¸‹è½½å¥½çš„Ubuntu18-serveré•œåƒ" class="headerlink" title="é€‰æ‹©ä¸‹è½½å¥½çš„Ubuntu18-serveré•œåƒ"></a><font size=4><strong>é€‰æ‹©ä¸‹è½½å¥½çš„Ubuntu18-serveré•œåƒ</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/1.jpg"></p><h3 id="ä¸ªæ€§åŒ–-ç”¨æˆ·åå¯†ç "><a href="#ä¸ªæ€§åŒ–-ç”¨æˆ·åå¯†ç " class="headerlink" title="ä¸ªæ€§åŒ–(ç”¨æˆ·åå¯†ç )"></a><font size=4><strong>ä¸ªæ€§åŒ–(ç”¨æˆ·åå¯†ç )</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/2.jpg"></p><h3 id="å®‰è£…ä½ç½®-å’Œè™šæ‹Ÿæœºåç§°"><a href="#å®‰è£…ä½ç½®-å’Œè™šæ‹Ÿæœºåç§°" class="headerlink" title="å®‰è£…ä½ç½®,å’Œè™šæ‹Ÿæœºåç§°"></a><font size=4><strong>å®‰è£…ä½ç½®,å’Œè™šæ‹Ÿæœºåç§°</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/3.jpg"></p><h3 id="ç£ç›˜é€‰æ‹©20G-å­˜å‚¨ä¸ºå•ä¸ªæ–‡ä»¶"><a href="#ç£ç›˜é€‰æ‹©20G-å­˜å‚¨ä¸ºå•ä¸ªæ–‡ä»¶" class="headerlink" title="ç£ç›˜é€‰æ‹©20G,å­˜å‚¨ä¸ºå•ä¸ªæ–‡ä»¶"></a><font size=4><strong>ç£ç›˜é€‰æ‹©20G,å­˜å‚¨ä¸ºå•ä¸ªæ–‡ä»¶</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/4.jpg"></p><h3 id="ç‚¹å‡»å®Œæˆ"><a href="#ç‚¹å‡»å®Œæˆ" class="headerlink" title="ç‚¹å‡»å®Œæˆ"></a><font size=4><strong>ç‚¹å‡»å®Œæˆ</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/5.jpg"></p><h2 id="å¼€æœºè®¾ç½®-è®¾ç½®ä½¿ç”¨è‹±è¯­"><a href="#å¼€æœºè®¾ç½®-è®¾ç½®ä½¿ç”¨è‹±è¯­" class="headerlink" title="å¼€æœºè®¾ç½®,è®¾ç½®ä½¿ç”¨è‹±è¯­"></a><font size=5><strong>å¼€æœºè®¾ç½®,è®¾ç½®ä½¿ç”¨è‹±è¯­</strong></font></h2><p><img src="/medias/drawing-bed/ubuntu/6.jpg"></p><h3 id="é”®ç›˜é»˜è®¤-ä¸ç”¨æ”¹"><a href="#é”®ç›˜é»˜è®¤-ä¸ç”¨æ”¹" class="headerlink" title="é”®ç›˜é»˜è®¤,ä¸ç”¨æ”¹"></a><font size=4><strong>é”®ç›˜é»˜è®¤,ä¸ç”¨æ”¹</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/7.jpg"></p><h3 id="é€‰å®šç½‘å¡-é€‰æ‹©IPv4"><a href="#é€‰å®šç½‘å¡-é€‰æ‹©IPv4" class="headerlink" title="é€‰å®šç½‘å¡,é€‰æ‹©IPv4"></a><font size=4><strong>é€‰å®šç½‘å¡,é€‰æ‹©IPv4</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/8.jpg"></p><h3 id="è®¾ç½®Manual"><a href="#è®¾ç½®Manual" class="headerlink" title="è®¾ç½®Manual"></a><font size=4><strong>è®¾ç½®Manual</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/9.jpg"></p><h3 id="å¡«å…¥è‡ªå·±çš„IP-ç½‘å…³ç­‰"><a href="#å¡«å…¥è‡ªå·±çš„IP-ç½‘å…³ç­‰" class="headerlink" title="å¡«å…¥è‡ªå·±çš„IP,ç½‘å…³ç­‰."></a><font size=4><strong>å¡«å…¥è‡ªå·±çš„IP,ç½‘å…³ç­‰.</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/10.jpg"></p><h3 id="æˆ‘çš„å¦‚ä¸‹"><a href="#æˆ‘çš„å¦‚ä¸‹" class="headerlink" title="æˆ‘çš„å¦‚ä¸‹"></a><font size=4><strong>æˆ‘çš„å¦‚ä¸‹</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/11.jpg"></p><h3 id="æŸ¥è¯¢è‡ªå·±çš„ä¿¡æ¯"><a href="#æŸ¥è¯¢è‡ªå·±çš„ä¿¡æ¯" class="headerlink" title="æŸ¥è¯¢è‡ªå·±çš„ä¿¡æ¯"></a><font size=4><strong>æŸ¥è¯¢è‡ªå·±çš„ä¿¡æ¯</strong></font></h3><p>&emsp;&emsp;åœ¨VMwareç¼–è¾‘é‡Œé¢,é€‰æ‹©NATæ¨¡å¼,è¿›å…¥NATè®¾ç½®,æŸ¥çœ‹ç½‘å…³ä¿¡æ¯.ä¾æ®æ­¤,å¡«å†™è‡ªå·±çš„IPå’Œç½‘å…³.<br><img src="/medias/drawing-bed/ubuntu/12.jpg"></p><h3 id="å¡«å®Œæ•ˆæœå¦‚ä¸‹"><a href="#å¡«å®Œæ•ˆæœå¦‚ä¸‹" class="headerlink" title="å¡«å®Œæ•ˆæœå¦‚ä¸‹"></a><font size=4><strong>å¡«å®Œæ•ˆæœå¦‚ä¸‹</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/13.jpg"></p><h3 id="ä»£ç†è·³è¿‡-ä¸è®¾ç½®"><a href="#ä»£ç†è·³è¿‡-ä¸è®¾ç½®" class="headerlink" title="ä»£ç†è·³è¿‡,ä¸è®¾ç½®"></a><font size=4><strong>ä»£ç†è·³è¿‡,ä¸è®¾ç½®</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/14.jpg"></p><h3 id="ä¿®æ”¹ä¸ºé˜¿é‡Œäº‘aptæº"><a href="#ä¿®æ”¹ä¸ºé˜¿é‡Œäº‘aptæº" class="headerlink" title="ä¿®æ”¹ä¸ºé˜¿é‡Œäº‘aptæº"></a><font size=4><strong>ä¿®æ”¹ä¸ºé˜¿é‡Œäº‘aptæº</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/15.jpg"></p><h3 id="é€‰æ‹©å®‰è£…ç£ç›˜"><a href="#é€‰æ‹©å®‰è£…ç£ç›˜" class="headerlink" title="é€‰æ‹©å®‰è£…ç£ç›˜"></a><font size=4><strong>é€‰æ‹©å®‰è£…ç£ç›˜</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/16.jpg"></p><h3 id="ç›´æ¥å›è½¦"><a href="#ç›´æ¥å›è½¦" class="headerlink" title="ç›´æ¥å›è½¦"></a><font size=4><strong>ç›´æ¥å›è½¦</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/17.jpg"></p><h3 id="åˆ†å¥½çš„åŒº"><a href="#åˆ†å¥½çš„åŒº" class="headerlink" title="åˆ†å¥½çš„åŒº"></a><font size=4><strong>åˆ†å¥½çš„åŒº</strong></font></h3><p>&emsp;&emsp;20Gç£ç›˜æ²¡æœ‰å¿…è¦è‡ªå®šä¹‰åˆ†åŒº,<strong>æœåŠ¡å™¨å®‰è£…è¯·å‹¿å‚è€ƒæ­¤åˆ†åŒº.</strong><br><img src="/medias/drawing-bed/ubuntu/18.jpg"></p><h3 id="é€‰æ‹©æ ¼å¼åŒ–"><a href="#é€‰æ‹©æ ¼å¼åŒ–" class="headerlink" title="é€‰æ‹©æ ¼å¼åŒ–"></a><font size=4><strong>é€‰æ‹©æ ¼å¼åŒ–</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/19.jpg"></p><h3 id="å¡«å…¥å§“å-ä¸»æœºå-å¯†ç "><a href="#å¡«å…¥å§“å-ä¸»æœºå-å¯†ç " class="headerlink" title="å¡«å…¥å§“å,ä¸»æœºå,å¯†ç "></a><font size=4><strong>å¡«å…¥å§“å,ä¸»æœºå,å¯†ç </strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/20.jpg"></p><h3 id="é€‰æ‹©å®‰è£…OpenSSH"><a href="#é€‰æ‹©å®‰è£…OpenSSH" class="headerlink" title="é€‰æ‹©å®‰è£…OpenSSH"></a><font size=4><strong>é€‰æ‹©å®‰è£…OpenSSH</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/21.jpg"></p><h3 id="è·³è¿‡-ç›´æ¥Done"><a href="#è·³è¿‡-ç›´æ¥Done" class="headerlink" title="è·³è¿‡,ç›´æ¥Done"></a><font size=4><strong>è·³è¿‡,ç›´æ¥Done</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/22.jpg"></p><h3 id="ç­‰å¾…å®‰è£…-View-full-logå¯ä»¥æŸ¥çœ‹å®‰è£…æ—¥å¿—"><a href="#ç­‰å¾…å®‰è£…-View-full-logå¯ä»¥æŸ¥çœ‹å®‰è£…æ—¥å¿—" class="headerlink" title="ç­‰å¾…å®‰è£…,View full logå¯ä»¥æŸ¥çœ‹å®‰è£…æ—¥å¿—"></a><font size=4><strong>ç­‰å¾…å®‰è£…,View full logå¯ä»¥æŸ¥çœ‹å®‰è£…æ—¥å¿—</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/23.jpg"></p><h3 id="é‡å¯-å®Œæˆå®‰è£…"><a href="#é‡å¯-å®Œæˆå®‰è£…" class="headerlink" title="é‡å¯,å®Œæˆå®‰è£…"></a><font size=4><strong>é‡å¯,å®Œæˆå®‰è£…</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/24.jpg"></p><h3 id="ç”¨æˆ·å-å¯†ç ç™»å½•"><a href="#ç”¨æˆ·å-å¯†ç ç™»å½•" class="headerlink" title="ç”¨æˆ·å,å¯†ç ç™»å½•"></a><font size=4><strong>ç”¨æˆ·å,å¯†ç ç™»å½•</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/25.jpg"></p><h3 id="ä¼šæ‰“å°å¯åŠ¨æ—¥å¿—-è¦†ç›–æ‰ç™»å½•çª—å£-ç›´æ¥å›è½¦æ˜¾ç¤ºç™»å½•ä¿¡æ¯"><a href="#ä¼šæ‰“å°å¯åŠ¨æ—¥å¿—-è¦†ç›–æ‰ç™»å½•çª—å£-ç›´æ¥å›è½¦æ˜¾ç¤ºç™»å½•ä¿¡æ¯" class="headerlink" title="ä¼šæ‰“å°å¯åŠ¨æ—¥å¿—,è¦†ç›–æ‰ç™»å½•çª—å£,ç›´æ¥å›è½¦æ˜¾ç¤ºç™»å½•ä¿¡æ¯"></a><font size=4><strong>ä¼šæ‰“å°å¯åŠ¨æ—¥å¿—,è¦†ç›–æ‰ç™»å½•çª—å£,ç›´æ¥å›è½¦æ˜¾ç¤ºç™»å½•ä¿¡æ¯</strong></font></h3><p><img src="/medias/drawing-bed/ubuntu/26.jpg"></p><h2 id="å¼€æœºè®¾ç½®-rootå¯†ç -SSHè¿œç¨‹ç™»å½•"><a href="#å¼€æœºè®¾ç½®-rootå¯†ç -SSHè¿œç¨‹ç™»å½•" class="headerlink" title="å¼€æœºè®¾ç½®,rootå¯†ç ,SSHè¿œç¨‹ç™»å½•"></a><font size=5><strong>å¼€æœºè®¾ç½®,rootå¯†ç ,SSHè¿œç¨‹ç™»å½•</strong></font></h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># è®¾ç½®rootå¯†ç </span>wang@wujiops:~$ <span class="token function">sudo</span> <span class="token function">passwd</span> <span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> wang:    <span class="token comment"># å½“å‰ç”¨æˆ·å¯†ç </span>Enter new UNIX password:    <span class="token comment"># æ–°rootå¯†ç </span>Retype new UNIX password:    <span class="token comment"># å†æ¬¡è¾“å…¥</span>passwd: password updated successfullywang@wujiops:~$ <span class="token function">sudo</span> <span class="token function">vi</span> /etc/ssh/sshd_config<span class="token comment"># æ­å¼€æ³¨é‡Š &amp; ä¿®æ”¹ä»¥ä¸‹ä¸¤è¡Œå†…å®¹</span>Port <span class="token number">22</span>PermitRootLogin <span class="token function">yes</span>wang@wujiops:~$ <span class="token function">sudo</span> <span class="token function">service</span> sshd restart   <span class="token comment"># é‡å¯sshdæœåŠ¡</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>&emsp;&emsp;æ‰“å¼€xshellå°è¯•é“¾æ¥å§!</p><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOS 7 å®‰è£…</title>
      <link href="/posts/76c1.html"/>
      <url>/posts/76c1.html</url>
      
        <content type="html"><![CDATA[<!-- æ–‡ç« å¤´éƒ¨è®¾ç½® --><h1 id="çº¦å®š"><a href="#çº¦å®š" class="headerlink" title="çº¦å®š"></a><font size=6><strong>çº¦å®š</strong></font></h1><p>&emsp;&emsp;VMware ç‰ˆæœ¬ 15.5.1 <a href="https://my.vmware.com/cn/web/vmware/details?downloadGroup=WKST-1551-WIN&productId=799&rPId=39513" title="VMwareç‰ˆæœ¬15.5.1 build-15018445">build-15018445</a><br>&emsp;&emsp;CentOS7 ç‰ˆæœ¬ <a href="https://mirrors.aliyun.com/centos/7.7.1908/isos/x86_64/CentOS-7-x86_64-Minimal-1908.iso" title="CentOS-7-x86_64-Minimal-1908.iso">CentOS-7-x86_64-Minimal-1908</a>  </p><h2 id="centos7ç³»ç»Ÿå®‰è£…"><a href="#centos7ç³»ç»Ÿå®‰è£…" class="headerlink" title="centos7ç³»ç»Ÿå®‰è£…"></a><font size=5><strong>centos7ç³»ç»Ÿå®‰è£…</strong></font></h2><p>&emsp;&emsp;é‡‡ç”¨VMwareå®‰è£…, ç³»ç»Ÿä¸ºMinimalç‰ˆ, å‰é¢çš„å¤§éƒ¨åˆ†çœç•¥, ç½‘è·¯ä¸Šçš„æ•™ç¨‹å¤Ÿå¤šäº†ã€‚</p><iframe height="600" width="800" src="//player.bilibili.com/player.html?aid=78039743&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><h3 id="1-å…ˆè®¾ç½®å®‰è£…ä½ç½®ã€ç½‘ç»œå’Œä¸»æœºå"><a href="#1-å…ˆè®¾ç½®å®‰è£…ä½ç½®ã€ç½‘ç»œå’Œä¸»æœºå" class="headerlink" title="1.å…ˆè®¾ç½®å®‰è£…ä½ç½®ã€ç½‘ç»œå’Œä¸»æœºå"></a><font size=4><strong>1.å…ˆè®¾ç½®å®‰è£…ä½ç½®ã€ç½‘ç»œå’Œä¸»æœºå</strong></font></h3><p><img src="/medias/drawing-bed/centos7/0.jpg"></p><ul><li>ç‚¹å‡»ç½‘ç»œå’Œä¸»æœºåè®¾ç½®<br>&emsp;&emsp;è®°ä½è¿™äº›ä¿¡æ¯, ä¸€ä¼šè¦ç”¨åˆ°<br><img src="/medias/drawing-bed/centos7/1.jpg"></li><li>å¡«å…¥åˆšæ‰çš„ä¿¡æ¯<br><img src="/medias/drawing-bed/centos7/2.jpg"></li><li>ä¿®æ”¹ä¸»æœºåã€è§‚å¯Ÿå˜åŒ–ä¿å­˜<br><img src="/medias/drawing-bed/centos7/3.jpg"></li><li>è®¾ç½®å®‰è£…ä½ç½®<br><img src="/medias/drawing-bed/centos7/4.jpg"></li><li>è‡ªåŠ¨åˆ›å»º<br><img src="/medias/drawing-bed/centos7/5.jpg"></li><li>ç”Ÿæˆä¸‹å›¾<br><img src="/medias/drawing-bed/centos7/6.jpg"><h3 id="2-ç½‘ç»œå’Œæ—¶é—´è®¾ç½®"><a href="#2-ç½‘ç»œå’Œæ—¶é—´è®¾ç½®" class="headerlink" title="2.ç½‘ç»œå’Œæ—¶é—´è®¾ç½®"></a><font size=4><strong>2.ç½‘ç»œå’Œæ—¶é—´è®¾ç½®</strong></font></h3></li><li>è®¾ç½®è‡ªåŠ¨åŒæ­¥<br>&emsp;&emsp;æœ‰ç»¿è‰²çš„<font color=#008000>âœ”</font>å°±è¡Œ, ä¿å­˜é€€å‡º<br><img src="/medias/drawing-bed/centos7/7.jpg"></li><li>é€‰æ‹©å®‰è£…, è¿™æ—¶å€™è®¾ç½®å¯†ç <br><img src="/medias/drawing-bed/centos7/8.jpg"></li><li>å¦‚æœå¯†ç è¿‡äºç®€å•å°±è¦åŒå‡»ä¿å­˜<br><img src="/medias/drawing-bed/centos7/9.jpg"></li></ul><p>å¦‚æœæ‚¨æœ‰ è¡¥å…… &amp; æ›´æ­£ çš„æ„è§å’Œå»ºè®®è¯·ç•™è¨€è¯„è®ºï¼Œè°¢è°¢~</p>]]></content>
      
      
      <categories>
          
          <category> system </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ç³»ç»Ÿ </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
